### Pacote de Ativa√ß√£o de Miss√£o (PAM) V1.0 - REFINAMENTO DA CONFIGURA√á√ÉO DE JWT

* **Sum√°rio da Miss√£o:** Refatorar a fun√ß√£o `getJwtSecret` em `server/lib/config.ts` para eliminar a l√≥gica de dete√ß√£o de ambiente e consolidar a leitura de uma √∫nica e inequ√≠voca vari√°vel de ambiente para o segredo JWT.

* **Inten√ß√£o Estrat√©gica:** Simplificar a gest√£o de configura√ß√£o, remover c√≥digo propenso a erros e garantir que o ambiente de execu√ß√£o (Replit Secrets) seja a √∫nica fonte da verdade para segredos, prevenindo futuras falhas de autentica√ß√£o.

---

**IMPLEMENTAR:**
Refatora√ß√£o da L√≥gica de Leitura do Segredo JWT.

**CURRENT STATE:**
A fun√ß√£o `getJwtSecret` em `server/lib/config.ts` cont√©m uma l√≥gica complexa que tenta detetar o ambiente e l√™ m√∫ltiplas vari√°veis de ambiente (`DEV_JTW_SECRET`, `PROD_JWT_SECRET`).

**EXPECTED (Estado Final de Sucesso):**
1.  A fun√ß√£o `getJwtSecret` √© eliminada ou simplificada.
2.  O middleware em `server/lib/jwt-auth-middleware.ts` l√™ o segredo de uma √∫nica vari√°vel de ambiente, que ser√° `SUPABASE_JWT_SECRET`.
3.  A l√≥gica de dete√ß√£o de ambiente √© completamente removida do c√≥digo TypeScript.

**CONSTRAINTS (Roadmap de Refatora√ß√£o):**

**Passo 1: Simplifica√ß√£o da Configura√ß√£o**
1.  Abra o arquivo `server/lib/config.ts`.
2.  Modifique a fun√ß√£o `getJwtSecret` para que ela retorne apenas `process.env.SUPABASE_JWT_SECRET`. Remova toda a l√≥gica de `detectEnvironmentFromDomain` e as verifica√ß√µes de `DEV_JTW_SECRET` e `PROD_JWT_SECRET`. A fun√ß√£o deve ser t√£o simples quanto:
    ```typescript
    function getJwtSecret(): string {
      const secret = process.env.SUPABASE_JWT_SECRET;
      if (!secret) {
        console.error('[CONFIG] üö® CRITICAL: SUPABASE_JWT_SECRET n√£o est√° definido!');
        throw new Error('Segredo JWT n√£o configurado.');
      }
      return secret;
    }
    ```

**Passo 2: Atualiza√ß√£o do Middleware**
1.  Abra `server/lib/jwt-auth-middleware.ts`.
2.  Confirme que ele agora utiliza a vers√£o simplificada de `getJwtSecret`, que por sua vez obt√©m `SUPABASE_JWT_SECRET`.

**Passo 3: Limpeza de Vari√°veis Obsoletas (Opcional, mas recomendado)**
1.  Execute uma busca global por `DEV_JTW_SECRET` e `PROD_JWT_SECRET` e remova qualquer refer√™ncia a estas vari√°veis agora obsoletas do c√≥digo.

---