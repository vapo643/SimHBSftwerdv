### Pacote de Ativação de Missão (PAM) V2.1 (Formalização das Estratégias de Rollback Avançadas)

* **Sumário da Missão (O Quê):** Gerar o documento `advanced-rollback-strategy.md`, detalhando a nossa doutrina para a reversão de deployments e, crucialmente, para migrações de banco de dados retrocompatíveis, com base nos "Subtópicos Obrigatórios" do Ponto 74.
* **Intenção Estratégica (O Porquê):** Otimizar para o Tempo Médio de Recuperação (MTTR). Uma estratégia de rollback bem definida e testada é a nossa apólice de seguro mais importante. Ela nos permite fazer deployments com confiança, sabendo que temos um caminho seguro para reverter para um estado estável em caso de falha.
* **Histórico Relevante (Consulta Obrigatória):** A auditoria de conformidade identificou a ausência de uma estratégia de rollback avançada como uma lacuna. A nossa estratégia de migração (Ponto 63) depende de um plano de rollback robusto para ser viável.
* **Modelo Mental (Como se Encaixa):** Aja como um Engenheiro de Confiabilidade de Site (SRE). Sua tarefa é projetar os "procedimentos de ejeção de emergência" para a nossa aplicação, com foco em automação, velocidade e, acima de tudo, segurança de dados.

---

**IMPLEMENTAR:**
Documento de Estratégia de Rollback Avançada

**CURRENT STATE:**
A nossa capacidade de rollback é atualmente manual e ad-hoc, representando um risco significativo em produção.

**EXPECTED (Estado Final de Sucesso):**
Um novo arquivo Markdown, `architecture/03-infrastructure/advanced-rollback-strategy.md`, é criado. O arquivo deve conter as seguintes seções, conforme o Ponto 74:

1.  **Procedimentos de Rollback Automatizados para Aplicação:** Descrever a nossa estratégia para o rollback da aplicação (ex: utilizando a funcionalidade de "revisões" do Azure Container Apps para reverter para uma imagem Docker anterior e estável, acionado por alertas de SLO).
2.  **Estratégia Mandatória para Migrações de Banco de Dados Retrocompatíveis:** A nossa política inegociável de que **todas** as migrações de schema devem ser retrocompatíveis, seguindo o padrão **Expand/Contract**. Detalhe as etapas deste padrão com exemplos de código SQL.
3.  **Testes Automatizados de Compatibilidade de Migração e Rollback:** Descrever como iremos integrar testes ao nosso pipeline de CI/CD que simulem uma migração e um rollback do banco de dados num ambiente de teste para garantir que as nossas migrações são de fato seguras e reversíveis.

---
**DECLARAÇÃO DE INCERTEZA (OBRIGATÓRIO):**
* **CONFIANÇA NA IMPLEMENTAÇÃO:** [Preencher com a porcentagem de 0 a 100%]
* **RISCOS IDENTIFICADOS:** [Preencher com a categoria BAIXO/MÉDIO/ALTO/CRÍTICO]
* **DECISÕES TÉCNICAS ASSUMIDAS:** [Ex: "Assumi que o padrão Expand/Contract é a única estratégia segura para migrações de banco de dados com zero downtime e que a equipa tem a disciplina para segui-lo."]
* **VALIDAÇÃO PENDENTE:** [O documento gerado deve ser revisado e ratificado pelo Arquiteto Chefe e pela equipa de operações.]
---

**PROTOCOLO OBRIGATÓRIO 7-CHECK EXPANDIDO:**
1.  Mapear o ficheiro exato a ser criado.
2.  Garantir que todas as 3 seções obrigatórias estão completas.
3.  Executar `get_latest_lsp_diagnostics` para garantir que o ambiente está estável.
4.  **Declarar Nível de Confiança (0 a 100%)**.
5.  **Categorizar Riscos Descobertos**.
6.  **Realizar teste funcional completo** (revisão do documento Markdown gerado).
7.  **Documentar Decisões Técnicas**.