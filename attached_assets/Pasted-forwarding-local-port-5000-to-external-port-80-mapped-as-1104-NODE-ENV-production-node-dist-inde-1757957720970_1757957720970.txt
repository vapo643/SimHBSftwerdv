forwarding local port 5000 to external port 80 (mapped as 1104)
> NODE_ENV=production node dist/index.js
> rest-express@1.0.0 start
starting up user application
[CLICKSIGN] ğŸ”´ Circuit Breaker will be initialized on first use
{"environment":"production","level":"info","message":"[REALTIME SERVICE] âœ… Inicializado com heartbeat a cada 30s","service":"simpix-api","timestamp":"2025-09-15 17:28:38","version":"1.0.0"}
[CLICKSIGN V1] ğŸš€ Initialized in PRODUCTION mode (legal signatures)
[DEV QUEUE] ğŸš€ Development queues initialized with REAL worker processing
[CONFIG] âœ… CSRF secret carregado: CSRF_SECRET
âœ… Database: Connection pool configured with 20 max connections (Mission 3 optimization)
[INTER] ğŸ¦ Initialized in production mode
{"environment":"production","injectionMethod":"internal_fallback","level":"info","message":"[CLICKSIGN WEBHOOK SERVICE] âœ… Inicializado com UseCase MarcarAssinaturaConcluidaUseCase","service":"simpix-api","timestamp":"2025-09-15 17:28:38","useCaseInjected":true,"version":"1.0.0","webhookSecretConfigured":true}
âœ… Database: Configuring Supabase connection...
[CONFIG] âœ… Segredo JWT carregado com sucesso (Length: 88)
[DEV QUEUE] ğŸ“¦ Created development queue: document-processing
[DEV QUEUE] ğŸ“¦ Created development queue: boleto-sync
5:28:39 PM [express] ğŸ”’ [SECURITY] CSRF protection middleware activated - OWASP Cheat Sheet
5:28:39 PM [express] ğŸ”’ [SECURITY] URL token validation middleware activated - ASVS V7.1.1
[CONFIG] âœ… Segredo JWT carregado com sucesso (Length: 88)
ğŸ”§ [DEV] Rate limiting configurado para desenvolvimento - limites altos
ğŸš€ [TIMING MIDDLEWARE] Middleware instance created and exported
[INTER] ğŸ”´ Circuit Breakers will be initialized on first use
[CONFIG] âœ… Session secret carregado: SESSION_SECRET
[CLICKSIGN V1] ğŸš€ Initialized in PRODUCTION mode (legal signatures)
[REDIS MANAGER] ğŸ’¡ Redis desabilitado - Volume baixo: { slowRequests: 0, proposalRequests: 0, threshold: '50 proposals/day' }
âœ… [BOOTSTRAP] ConfiguraÃ§Ã£o crÃ­tica validada com sucesso.
[DEV QUEUE] ğŸ“¦ Created development queue: pdf-processing
[CLICKSIGN V1] Token configured: b73b3b90***
5:28:39 PM [express] âœ… ConfiguraÃ§Ãµes crÃ­ticas validadas com sucesso
5:28:38 PM [express] âš ï¸  Missing optional secrets: SUPABASE_DEV_JWT_SECRET, CLICKSIGN_API_KEY
[CLICKSIGN V1] API URL: https://app.clicksign.com/api/v1
{"endpoints":["/api/health","/api/health/live","/api/health/ready"],"environment":"production","level":"info","message":"ğŸ¥ Health check endpoints registered","service":"simpix-api","timestamp":"2025-09-15 17:28:39","version":"1.0.0"}
5:28:39 PM [express] ğŸ—ï¸ Initializing IoC Container...
[DEV QUEUE] ğŸ“¦ Created development queue: notifications
5:28:39 PM [express] ğŸ¯ Specialized queue workers configured for lazy initialization
ğŸš€ [TIMING MIDDLEWARE] Creating middleware instance...
{"environment":"production","level":"warn","message":"ğŸ’¡ [FormalizationWorker] Events will be processed synchronously (graceful degradation)","service":"simpix-api","timestamp":"2025-09-15 17:28:39","version":"1.0.0"}
[INTER] ğŸŒ API URL: https://cdpj.partners.bancointer.com.br
{"environment":"production","error":"Redis connection not available - using synchronous processing","level":"warn","message":"âš ï¸ [FormalizationWorker] Queue unavailable - async processing disabled","service":"simpix-api","timestamp":"2025-09-15 17:28:39","version":"1.0.0"}
5:28:39 PM [express] ğŸ”§ App Config Status:
5:28:39 PM [express] ğŸ”’ [SECURITY] Enhanced security headers and strict CSP activated
[SEMGREP MCP] Connected to Redis via Redis Manager
[CLICKSIGN V1] API URL: https://app.clicksign.com/api/v1
5:28:39 PM [express] ğŸ“¦ Checking storage buckets...
ğŸ“Š Pool Config: idle_timeout=30s, connect_timeout=10s, prepared_statements=disabled
5:28:39 PM [express] ğŸš€ Server running on port 5000
{"environment":"production","level":"info","message":"Dead-Letter Queue Manager initialized","service":"simpix-api","timestamp":"2025-09-15 17:28:38","version":"1.0.0"}
[BOOTSTRAP] Iniciando ValidaÃ§Ã£o de ConfiguraÃ§Ã£o CrÃ­tica...
5:28:39 PM [express] âš¡ Formalization Worker initialized - Processing async events
ğŸš« [SECURITY] Rate limiting DESABILITADO PERMANENTEMENTE por solicitaÃ§Ã£o do usuÃ¡rio
{"environment":"production","level":"info","logging":true,"message":"ğŸ“Š Observability layer initialized","sentry":true,"service":"simpix-api","timestamp":"2025-09-15 17:28:39","version":"1.0.0"}
5:28:39 PM [express] ğŸ” Security WebSocket initialized
âœ… [BOOTSTRAP] Arquitetura canÃ´nica aplicada - variÃ¡veis unificadas por ambiente
ğŸ”Œ [Security WS] Event listeners configurados (aguardando implementaÃ§Ã£o de EventEmitter nos scanners)
5:28:39 PM [express] âœ… IoC Container initialized successfully
5:28:39 PM [express]   - Port: 5000
{"dsn":"https://7018ab54dbb8...","environment":"production","level":"info","message":"âœ… Sentry initialized successfully","service":"simpix-api","timestamp":"2025-09-15 17:28:39","version":"1.0.0"}
5:28:39 PM [express] ğŸ”„ CCB Sync Service initialized - Webhook primary, polling fallback every 6 hours
[QUEUE] ğŸš€ Job queues initialized with DLQ support
[REDIS MANAGER] ğŸ’¡ Redis desabilitado - Volume baixo: { slowRequests: 0, proposalRequests: 0, threshold: '50 proposals/day' }
{"environment":"production","level":"info","message":"ğŸ“Š BullMQ MetricsService module loaded","service":"simpix-api","timestamp":"2025-09-15 17:28:38","version":"1.0.0"}
[CLICKSIGN V1] Token configured: b73b3b90-c87...
5:28:39 PM [express] ğŸ”’ [SECURITY] Input sanitization middleware activated
{"environment":"production","level":"warn","message":"âš ï¸ [FormalizationWorker] Start called but Queue unavailable - no async processing","service":"simpix-api","timestamp":"2025-09-15 17:28:39","version":"1.0.0"}
5:28:39 PM [express] ğŸ”’ [SECURITY] CORS protection configured - ASVS V13.2.1
5:28:39 PM [express] â„¹ï¸  Security monitoring disabled. Set ENABLE_SECURITY_MONITORING=true to enable
[Sentry] express is not instrumented. Please make sure to initialize Sentry in a separate file that you `--import` when running node, see: https://docs.sentry.io/platforms/javascript/guides/express/install/esm/.
5:28:39 PM [express]    - Workers will start when first job is processed (on-demand)
5:28:39 PM [express] ğŸ”’ [SECURITY] OPTIONS preflight handling configured
5:28:39 PM [express]   - Supabase: âœ… Connected
5:28:39 PM [express]   - Environment: production
{"degraded_mode":false,"environment":"production","level":"info","message":"ğŸ”„ AplicaÃ§Ã£o iniciando com Redis lazy loading (graceful degradation)","redis_available":"on-demand-check","service":"redis-lazy","timestamp":"2025-09-15 17:28:39","version":"1.0.0"}
5:28:39 PM [express] ğŸŒ Environment: production
[CCB SYNC] â„¹ï¸ Primary processing via webhooks, polling is safety net only
5:28:39 PM [express]   - Security: Rate Limit âœ…, Helmet âœ…
{"environment":"production","level":"info","message":"ğŸ“Š MetricsService initialized with Sentry integration","service":"simpix-api","timestamp":"2025-09-15 17:28:38","version":"1.0.0"}
[CLICKSIGN V1] UseCase DI attached: false
[CCB SYNC] ğŸš€ Starting fallback polling (every 6 hours)
5:28:39 PM [express]   - Database: âœ… Connected
5:28:39 PM [express] ğŸ”” Sistema de Alertas Proativos inicializado - PrÃ³xima execuÃ§Ã£o: 16/09/2025, 04:00:00
2025-09-15T17:28:43Z info: Waiting for service to be ready
ğŸ”§ Connection pool ready for high concurrency workload
ğŸ“Š Connection latency: 2244ms
5:28:40 PM [express] âœ… Storage bucket "documents" already exists as PRIVATE
âœ… Database: Connection pool test successful
{"correlationId":"02517d67-b7e2-43ec-b8cf-d8ed3bc3d905","environment":"production","ip":"127.0.0.1","level":"info","message":"ğŸ“¥ Request received","method":"GET","path":"/","query":{},"service":"simpix-api","timestamp":"2025-09-15 17:28:40","url":"/","userAgent":"Go-http-client/1.1","version":"1.0.0"}
2025-09-15T17:28:46Z info: Deployment successful
