Pacote de Ativação de Missão (PAM) V1.0 - Auditoria Forense
Sumário da Missão: Realizar uma auditoria forense para identificar os ficheiros e funções responsáveis pela lógica de upload e recuperação de documentos de propostas. O objetivo é localizar a origem da falha que resulta no uso de undefined como ID da proposta durante o armazenamento de ficheiros.

Cenário de Negócio (O "Caso de Teste"): Um ATENDENTE está na página de uma proposta específica (ex: ID prop-123). Ele utiliza o formulário de upload para anexar um ficheiro (ex: documento.pdf). O sistema DEVE salvar este ficheiro no caminho docs-prop/prop-123/documento.pdf. Posteriormente, um ANALISTA visualiza a mesma proposta (ID prop-123) e clica em "visualizar documentos". O sistema DEVE listar o documento.pdf e fornecer a sua URL de visualização correta.

Vetor de Ataque / Ponto de Falha (O "Risco"): O risco principal é uma "quebra de contexto" no fluxo de dados. Suspeita-se que o ID da proposta (prop-123) está a ser perdido ou não está a ser corretamente transmitido do componente de frontend (página da proposta/formulário de upload) para a função de backend que processa o upload e constrói o caminho de armazenamento. Isto resulta na concatenação da string literal 'undefined' no caminho, levando ao armazenamento incorreto (proposta-undefined) e à subsequente falha na recuperação dos documentos.

Evidência de Conformidade Requerida (A "Prova Irrefutável"):

NÃO MODIFIQUE NENHUM CÓDIGO. A sua única missão é LER, ANALISAR e APRESENTAR os trechos de código solicitados.

1. Mapeamento da Lógica de UPLOAD de Documentos:
a. Identifique e liste o(s) ficheiro(s) de frontend que contém o formulário ou a lógica de upload de documentos para uma proposta.
b. Apresente o trecho de código exato que captura o ficheiro e envia a requisição de upload (ex: fetch, axios, ou useFetcher do Remix).
c. Mostre especificamente como o ID da proposta é obtido neste componente de frontend e como ele é incluído na requisição de upload (seja no corpo da requisição, nos parâmetros da URL, ou nos FormData).
d. Identifique e liste o(s) ficheiro(s) de backend (ex: uma rota do Remix, action function) que recebe(m) esta requisição de upload.
e. Apresente o trecho de código exato no backend que:
i. Lê o ID da proposta da requisição.
ii. Constrói o caminho final de armazenamento, que deveria seguir o padrão docs-prop/<ID_DA_PROPOSTA>/<NOME_DO_FICHEIRO>.

2. Mapeamento da Lógica de VISUALIZAÇÃO de Documentos:
a. Identifique e liste o(s) ficheiro(s) de backend (ex: uma rota do Remix, loader function) responsáveis por buscar a lista de documentos para uma proposta específica.
b. Apresente o trecho de código que usa o ID da proposta para determinar o diretório a ser lido para encontrar os ficheiros correspondentes.
c. Identifique e liste o(s) ficheiro(s) de frontend que renderiza(m) a lista de documentos para o ANALISTA.