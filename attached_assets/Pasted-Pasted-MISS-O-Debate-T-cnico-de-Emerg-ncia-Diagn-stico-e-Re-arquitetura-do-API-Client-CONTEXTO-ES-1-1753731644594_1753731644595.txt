Pasted--MISS-O-Debate-T-cnico-de-Emerg-ncia-Diagn-stico-e-Re-arquitetura-do-API-Client-CONTEXTO-ES-1753731561912_1753731561913.txt
# MISSÃO: Debate Técnico de Emergência - Diagnóstico e Re-arquitetura do API Client

**CONTEXTO ESTRATÉGICO:**
Uma tentativa anterior de refatorar o nosso código de frontend para usar um `apiClient.ts` centralizado resultou numa falha catastrófica: a API `GET /api/parceiros` começou a retornar HTML em vez de JSON, e dados de teste (lojas) foram excluídos indevidamente. Após um rollback, estamos a recomeçar o planeamento do zero.

**SUA TAREFA (ASSISTENTE):**
A sua tarefa não é escrever código. A sua tarefa é atuar como um Arquiteto de Software Sênior e propor um plano de implementação para a criação do `apiClient.ts` que seja **incremental, seguro e à prova de falhas**. Esta será a nossa **Interação 1 de 3**.

---
### **Interação 1: Sua Proposta de Plano e Análise de Risco**

Por favor, responda seguindo **exatamente** esta estrutura:

**1. Análise da Causa Raiz da Falha Anterior:**
* Com base no sintoma (`API retornando HTML`), qual é a sua principal hipótese técnica para o que o Agente fez de errado na tentativa anterior que causou o crash do servidor? (Ex: erro de importação circular, falha na inicialização do servidor, etc.).

**2. Proposta de Plano de Implementação Incremental e Seguro:**
* Descreva uma sequência de passos, pequena e segura, para realizar esta refatoração. A sua proposta deve priorizar a estabilidade em cada etapa. (Ex: criar o ficheiro primeiro, refatorar uma única chamada `DELETE`, testar, depois refatorar a chamada `POST`, testar, etc.).

**3. Estratégia de Prevenção de Ações Destrutivas:**
* Durante a execução, o Agente anterior executou comandos destrutivos (apagou lojas). Como podemos instruir a IA em um prompt futuro para que ela **APENAS** refatore o código e **NUNCA** execute ações de escrita ou exclusão no banco de dados para fins de teste? Proponha uma fraseologia de restrição.

**4. Plano de Validação Pós-Refatoração:**
* Após a refatoração estar completa, como você validaria que a aplicação não sofreu nenhuma regressão? Descreva os passos de um "smoke test" que você executaria para garantir que não apenas a página de Parceiros, mas também outras páginas, continuam a carregar os seus dados corretamente.

---