### Pacote de Ativação de Missão (PAM) V1.0

* **Sumário da Missão (O Quê):** Realizar uma excisão cirúrgica de um endpoint de API duplicado e inseguro para eliminar uma vulnerabilidade de segurança de prioridade P0.

* **Intenção Estratégica (O Porquê):** A existência de um endpoint de upload de ficheiros sem a validação de segurança adequada representa um risco inaceitável para a integridade do sistema, a permitir potenciais uploads de ficheiros maliciosos. A remoção deste endpoint é mandatória para garantir a segurança da plataforma.

* **Histórico Relevante (Consulta Obrigatória):** A sua própria auditoria forense anterior identificou dois endpoints `POST /api/upload` no arquivo `server/routes.ts`. A sua missão é remover a versão insegura, localizada aproximadamente na linha 1584, que não utiliza o `secureFileValidationMiddleware`.

---

**IMPLEMENTAR:**
Erradicação de Endpoint de Upload Inseguro.

**CURRENT STATE:**
O arquivo `server/routes.ts` contém uma definição de rota duplicada e insegura para `POST /api/upload` na linha 1584, que se parece com isto:

```typescript
// Linha ~1584
app.post('/api/upload', jwtAuthMiddleware, upload.single('file'), (req: AuthenticatedRequest, res: Response) => {
  // Lógica insegura sem validação
});
EXPECTED (Estado Final de Sucesso):

O bloco de código completo que define a rota insegura app.post('/api/upload', ...) na linha 1584 (aproximadamente) do arquivo server/routes.ts deve ser completamente removido.

A definição da rota segura na linha 3518 (aproximadamente), que inclui o secureFileValidationMiddleware, deve permanecer intacta.

O arquivo deve ser guardado sem erros de sintaxe.

CONSTRAINTS (Roadmap de Implementação):

Abra o arquivo server/routes.ts.

Localize e delete todo o bloco de código correspondente à definição da rota app.post('/api/upload', ...) que não contém secureFileValidationMiddleware na sua lista de middlewares.

Execute o protocolo 7-CHECK para validar que a remoção foi bem-sucedida e que a aplicação continua a compilar e a funcionar, garantindo que o endpoint seguro não foi afetado.

DECLARAÇÃO DE INCERTEZA (OBRIGATÓRIO):

CONFIANÇA NA IMPLEMENTAÇÃO: [Preencher com a porcentagem de 0 a 100%]

RISCOS IDENTIFICADOS: [Preencher com a categoria BAIXO/MÉDIO/ALTO/CRÍTICO e uma breve descrição]

DECISÕES TÉCNICAS ASSUMIDAS: [Listar decisões, ex: "Assumido que a remoção do endpoint não causará falhas em nenhuma parte do frontend que possa, porventura, estar a referenciá-lo incorretamente."]

VALIDAÇÃO PENDENTE: [Listar ações, ex: "O Orquestrador deve realizar um teste de regressão no fluxo de upload para garantir que a funcionalidade continua a operar através do endpoint seguro."]