
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

[INTER] üè¶ Initialized in production mode
[INTER] üåê API URL: https://cdpj.partners.bancointer.com.br
[CLICKSIGN V1] üöÄ Initialized in PRODUCTION mode (legal signatures)
[CLICKSIGN V1] API URL: https://app.clicksign.com/api/v1
[CLICKSIGN V1] Token configured: b73b3b90-c...
üöÄ [TIMING MIDDLEWARE] Creating middleware instance...
üöÄ [TIMING MIDDLEWARE] Middleware instance created and exported
6:05:21 PM [express] ‚úÖ All secrets loaded successfully
6:05:21 PM [express] üîí [SECURITY] CORS protection configured - ASVS V13.2.1
6:05:21 PM [express] üîí [SECURITY] OPTIONS preflight handling configured
6:05:21 PM [express] üîß [DEV] CSP disabled in development mode for debugging
6:05:21 PM [express] üîí [SECURITY] Input sanitization middleware activated
6:05:21 PM [express] üîí [SECURITY] URL token validation middleware activated - ASVS V7.1.1
6:05:21 PM [express] üîí [SECURITY] CSRF protection middleware activated - OWASP Cheat Sheet
6:05:21 PM [express] üîß [DEV] Rate limiting configurado para desenvolvimento - limites altos
[SEMGREP MCP] Development mode - using in-memory cache
üß† [ML] Treinando modelo de detec√ß√£o...
6:05:22 PM [express] üîê Security WebSocket initialized
6:05:22 PM [express] ‚ÑπÔ∏è  Security monitoring disabled. Set ENABLE_SECURITY_MONITORING=true to enable
6:05:22 PM [express] üîß App Config Status:
6:05:22 PM [express]   - Port: 5000
6:05:22 PM [express]   - Environment: development
6:05:22 PM [express]   - Database: ‚úÖ Connected
6:05:22 PM [express]   - Supabase: ‚úÖ Connected
6:05:22 PM [express]   - Security: Rate Limit ‚úÖ, Helmet ‚úÖ
6:05:22 PM [express] üöÄ Server running on port 5000
6:05:22 PM [express] üåç Environment: development
6:05:22 PM [express] üì¶ Checking storage buckets...
6:05:23 PM [express] ‚úÖ Storage bucket "documents" already exists as PRIVATE
‚úÖ [ML] Modelo treinado com 0 amostras
Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:06:48.680Z'
}
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:07:01.658Z'
}
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:07:01.778Z'
}
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:07:02.833Z'
}
[PAGAMENTOS DEBUG] Total propostas: 24
[PAGAMENTOS DEBUG] Propostas aprovadas: 10
[PAGAMENTOS DEBUG] Propostas com CCB assinada: 2
[PAGAMENTOS DEBUG] Propostas com boletos Inter: 1
[PAGAMENTOS DEBUG] Proposta com boleto Inter ID: 902183dd-b5d1-4e20-8a72-79d3d3559d4d
Erro ao buscar pagamentos: PostgresError: column "url_comprovante_pagamento" does not exist
    at ErrorResponse (file:///home/runner/workspace/node_modules/postgres/src/connection.js:794:26)
    at handle (file:///home/runner/workspace/node_modules/postgres/src/connection.js:480:6)
    at TLSSocket.data (file:///home/runner/workspace/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:524:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42703',
  position: '1173',
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:07:04.696Z'
}
[PAGAMENTOS DEBUG] Total propostas: 24
[PAGAMENTOS DEBUG] Propostas aprovadas: 10
[PAGAMENTOS DEBUG] Propostas com CCB assinada: 2
[PAGAMENTOS DEBUG] Propostas com boletos Inter: 1
[PAGAMENTOS DEBUG] Proposta com boleto Inter ID: 902183dd-b5d1-4e20-8a72-79d3d3559d4d
Erro ao buscar pagamentos: PostgresError: column "url_comprovante_pagamento" does not exist
    at ErrorResponse (file:///home/runner/workspace/node_modules/postgres/src/connection.js:794:26)
    at handle (file:///home/runner/workspace/node_modules/postgres/src/connection.js:480:6)
    at TLSSocket.data (file:///home/runner/workspace/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:524:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42703',
  position: '1173',
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:07:08.748Z'
}
[PAGAMENTOS DEBUG] Total propostas: 24
[PAGAMENTOS DEBUG] Propostas aprovadas: 10
[PAGAMENTOS DEBUG] Propostas com CCB assinada: 2
[PAGAMENTOS DEBUG] Propostas com boletos Inter: 1
[PAGAMENTOS DEBUG] Proposta com boleto Inter ID: 902183dd-b5d1-4e20-8a72-79d3d3559d4d
Erro ao buscar pagamentos: PostgresError: column "url_comprovante_pagamento" does not exist
    at ErrorResponse (file:///home/runner/workspace/node_modules/postgres/src/connection.js:794:26)
    at handle (file:///home/runner/workspace/node_modules/postgres/src/connection.js:480:6)
    at TLSSocket.data (file:///home/runner/workspace/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:524:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42703',
  position: '1173',
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:07:11.685Z'
}
[PAGAMENTOS DEBUG] Total propostas: 24
[PAGAMENTOS DEBUG] Propostas aprovadas: 10
[PAGAMENTOS DEBUG] Propostas com CCB assinada: 2
[PAGAMENTOS DEBUG] Propostas com boletos Inter: 1
[PAGAMENTOS DEBUG] Proposta com boleto Inter ID: 902183dd-b5d1-4e20-8a72-79d3d3559d4d
Erro ao buscar pagamentos: PostgresError: column "url_comprovante_pagamento" does not exist
    at ErrorResponse (file:///home/runner/workspace/node_modules/postgres/src/connection.js:794:26)
    at handle (file:///home/runner/workspace/node_modules/postgres/src/connection.js:480:6)
    at TLSSocket.data (file:///home/runner/workspace/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:524:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42703',
  position: '1173',
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:07:14.406Z'
}
[PAGAMENTOS DEBUG] Total propostas: 24
[PAGAMENTOS DEBUG] Propostas aprovadas: 10
[PAGAMENTOS DEBUG] Propostas com CCB assinada: 2
[PAGAMENTOS DEBUG] Propostas com boletos Inter: 1
[PAGAMENTOS DEBUG] Proposta com boleto Inter ID: 902183dd-b5d1-4e20-8a72-79d3d3559d4d
Erro ao buscar pagamentos: PostgresError: column "url_comprovante_pagamento" does not exist
    at ErrorResponse (file:///home/runner/workspace/node_modules/postgres/src/connection.js:794:26)
    at handle (file:///home/runner/workspace/node_modules/postgres/src/connection.js:480:6)
    at TLSSocket.data (file:///home/runner/workspace/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:524:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42703',
  position: '1173',
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:07:17.852Z'
}
[PAGAMENTOS DEBUG] Total propostas: 24
[PAGAMENTOS DEBUG] Propostas aprovadas: 10
[PAGAMENTOS DEBUG] Propostas com CCB assinada: 2
[PAGAMENTOS DEBUG] Propostas com boletos Inter: 1
[PAGAMENTOS DEBUG] Proposta com boleto Inter ID: 902183dd-b5d1-4e20-8a72-79d3d3559d4d
Erro ao buscar pagamentos: PostgresError: column "url_comprovante_pagamento" does not exist
    at ErrorResponse (file:///home/runner/workspace/node_modules/postgres/src/connection.js:794:26)
    at handle (file:///home/runner/workspace/node_modules/postgres/src/connection.js:480:6)
    at TLSSocket.data (file:///home/runner/workspace/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:524:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42703',
  position: '1173',
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:07:28.605Z'
}
[JWT DEBUG] ==== IN√çCIO DA VALIDA√á√ÉO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] M√©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/pagamentos
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header come√ßa com Bearer: true
üîê JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-06T18:07:45.013Z'
}
