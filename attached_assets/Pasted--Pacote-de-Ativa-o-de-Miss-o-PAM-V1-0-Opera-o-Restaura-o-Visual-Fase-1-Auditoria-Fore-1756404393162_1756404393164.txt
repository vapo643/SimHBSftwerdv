### Pacote de Ativação de Missão (PAM) V1.0 - Operação "Restauração Visual" / Fase 1: Auditoria Forense

* **Sumário da Missão (O Quê):** Realizar uma auditoria forense de causa raiz na aplicação de frontend para diagnosticar a falha crítica que está a impedir a renderização correta do menu principal e da lista de propostas no dashboard.
* **Intenção Estratégica (O Porquê):** Identificar a regressão exata que quebrou a UI, para que possamos desenvolver um plano de correção cirúrgico. A prioridade é restaurar a funcionalidade básica do sistema para o utilizador.
* **Modelo Mental (Como se Encaixa):** Você é um engenheiro de frontend sênior a depurar uma falha P0 em produção. O seu foco é a análise sistemática de logs, componentes e estado da aplicação para encontrar a origem do erro.

---

**IMPLEMENTAR (Plano de Auditoria):**
Execute a seguinte sequência de análise e reporte as suas descobertas de forma exaustiva.

**CURRENT STATE:**
Após o login, a aplicação renderiza uma página quebrada. O menu de navegação lateral está ausente e a área de conteúdo que deveria exibir as propostas está vazia. O console do browser exibe múltiplos erros.

**EXPECTED (Estado Final da Auditoria):**
Um relatório de diagnóstico detalhado que identifique:
1.  A causa raiz do erro de DOM `Uncaught NotFoundError: Failed to execute 'removeChild' on 'Node'`.
2.  A razão pela qual o menu (provavelmente o componente `Sidebar`) não está a ser renderizado.
3.  A razão pela qual os dados das propostas não estão a ser exibidos no dashboard.

**CONSTRAINTS (Roadmap de Auditoria):**

**Passo 1: Análise Forense dos Logs do Browser**
1.1. Analise os logs de erro fornecidos. Preste especial atenção aos seguintes erros e investigue as suas origens:
    * `Uncaught Error: A custom element with name 'mce-autosize-textarea' has already been defined.`
    * `WebSocket connection to 'wss://localhost:5173/...' failed`
    * `api/features:1 Failed to load resource: the server responded with a status of 401 (Unauthorized)`
    * `Uncaught NotFoundError: Failed to execute 'removeChild' on 'Node': The node to be removed is not a child of this node.` (Este é o erro P0).

**Passo 2: Inspeção do Componente do Dashboard**
2.1. Abra o ficheiro `client/src/pages/dashboard.tsx`.
2.2. Investigue a lógica de renderização. Onde é que os dados das propostas são buscados (`useQuery`)? Existe alguma lógica condicional que possa estar a falhar e a impedir a renderização da lista?
2.3. Analise o *stack trace* do erro `removeChild`. Ele aponta para o componente `<Dashboard>`. Investigue os `useEffect`s e a renderização condicional dentro deste componente como a causa provável da *race condition* que leva a este erro de DOM.

**Passo 3: Inspeção do Layout Principal e do Menu**
3.1. Abra o ficheiro do layout principal da aplicação (provavelmente `client/src/components/DashboardLayout.tsx` ou `client/src/App.tsx`).
3.2. Investigue como o menu (`Sidebar`) é renderizado. Existe alguma condição (ex: um *feature flag* vindo de `/api/features`, que está a falhar com 401) que esteja a impedir a sua renderização?

**Passo 4: Relatório de Diagnóstico (Protocolo de Divulgação Total)**
4.1. Com base na sua análise, apresente um relatório completo que responda às três questões do "Estado Final Esperado".
4.2. Para cada problema, aponte o ficheiro e a(s) linha(s) de código suspeita(s).
4.3. Forneça uma hipótese clara e tecnicamente fundamentada para a causa de cada um dos três sintomas (menu ausente, propostas ausentes, erro de DOM).

---
### **PROTOCOLO DE DIVULGAÇÃO TOTAL (PDT) V1.0 (MANDATÓRIO)**
Apresente a lista exaustiva de TODAS as suas descobertas e hipóteses.
---