### **PACOTE DE ATIVAÇÃO DE MISSÃO (PAM) V1.0 - AUDITORIA FORENSE "ID PERDIDO"**

**ID da Missão:** `RCA-FSM-MANUAL-UPDATE-001-AUDIT`

**Ferramenta Alocada:** `Sniper`

**Doutrina Ativa:** Protocolo de Auditoria de Cenário de Negócio (PACN) V1.0

---

#### **Sumário da Missão:**

Realizar uma auditoria forense de rastreamento para identificar o ponto exato no código do backend onde o UUID da proposta está a ser incorretamente truncado antes de ser passado para o serviço da Máquina de Estados Finitos (FSM). **NÃO MODIFIQUE NENHUM CÓDIGO.**

#### **Cenário de Negócio (O "Caso de Teste"):**

Um usuário, na tela de formalização, utiliza a ferramenta "Gerenciar Status" para mudar manualmente o status de uma proposta. O frontend envia uma requisição `PUT` ou `PATCH` para a API no endpoint `/api/propostas/6206c1e3-686a-4084-b28f-d999ef0a0e9f`. O backend recebe a requisição, mas subsequentemente tenta procurar a proposta no banco de dados usando um ID truncado, como "6206".

#### **Vetor de Ataque / Ponto de Falha (O "Risco"):**

O risco é uma **falha de parsing de dados**. Suspeita-se que o código do controller que manipula esta rota está a extrair o parâmetro `id` da URL, mas está a processá-lo ou a passá-lo para a próxima camada de forma incorreta, resultando na perda de dados e na falha da consulta ao banco de dados.

#### **Evidência de Conformidade Requerida (A "Prova Irrefutável"):**

1.  **Ponto de Entrada (Backend):** Localize o arquivo de rotas e apresente o código do controller que manipula o endpoint de atualização de proposta (ex: `PUT /api/propostas/:id` ou `PATCH /api/propostas/:id`).

2.  **Captura do Parâmetro:** Dentro do código do controller, apresente a linha exata onde o ID da proposta é extraído dos parâmetros da requisição (ex: `const { id } = req.params;`).

3.  **Invocação do Serviço:** Rastreie a variável `id` e apresente a linha de código onde ela é usada para chamar o serviço principal de atualização ou transição de estado (ex: `transitionTo({ propostaId: id, ... })`).

4.  **Análise Crítica do Ponto de Falha:** Analise o fluxo de dados entre o passo 2 e o passo 3. Existe alguma operação de `parseInt()`, `substring()`, ou outra manipulação de string/número a ser aplicada à variável `id` que poderia explicar por que um UUID (`string`) está a ser convertido para um número truncado? Declare a sua hipótese sobre a linha exata que está a causar o bug.