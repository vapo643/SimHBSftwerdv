**### MODO DE OPERAÇÃO: REALISMO CÉTICO (MANDATÓRIO)**
Sua lealdade é para com a verdade do código e a estabilidade da produção.

---
**### Pacote de Ativação de Missão (PAM) V1.0**

* **Sumário da Missão (O Quê):** Refatorar o fluxo de sincronização de boletos para garantir a persistência dos PDFs no Storage, com logging robusto, e simplificar a UI da "Ficha do Cliente" para uma melhor experiência do usuário.
* **Intenção Estratégica (O Porquê):** Para tornar o download de boletos 100% confiável, consertando a falha silenciosa de sincronização, e melhorar a clareza da interface para o operador de cobranças.
* **Histórico Relevante (Consulta Obrigatória):** Use o seu relatório de auditoria forense anterior como a única fonte da verdade. Sua missão é implementar as "RECOMENDAÇÕES ARQUITETURAIS" implícitas em suas descobertas.
* **Modelo Mental (Como se Encaixa):** Você atuará como Engenheiro Full-Stack. A missão exigirá modificações no backend (para adicionar logging e robustez ao serviço de sincronização) e no frontend (para simplificar a UI e adicionar tooltips informativos).
* **Riscos Antecipados:** **Risco:** O processo de sincronização ainda pode falhar devido a problemas na API externa. **Contramedida:** A implementação de logging detalhado é a nossa principal contramedida para diagnosticar futuras falhas externas.

---

**IMPLEMENTAR:**
A refatoração do serviço de sincronização e da interface de usuário da "Ficha do Cliente".

**CURRENT STATE:**
O processo de sincronização de boletos falha silenciosamente, causando erros de "PDF não encontrado" downstream. A UI está poluída com um botão redundante ("Copiar Boleto") e não informa o usuário por que o botão "Copiar PIX" às vezes está desabilitado.

**EXPECTED (Estado Final de Sucesso):**
1.  O serviço de sincronização de boletos agora possui **logging detalhado e tratamento de erros**, tornando o processo transparente.
2.  A UI da "Ficha do Cliente" é simplificada, com o botão "Copiar Boleto" **removido**.
3.  O botão "Copiar PIX", quando desabilitado, exibe um **tooltip informativo**.

**CONSTRAINTS (Roadmap de Implementação Faseado):**

**FASE 1: Blindagem do Serviço de Sincronização (Backend):**
    - **Ação:** No ficheiro `server/services/boletoStorageService.ts`, refatore a função `sincronizarBoletosDaProposta`.
    - **Implementação:** Adicione um bloco `try...catch` robusto em volta da lógica de download (`interBankService.obterPdfCobranca()`) e upload (`supabase.storage.upload()`).
    - **Logging Crítico:**
        - Em caso de **sucesso**, logue uma mensagem clara: `[SYNC-SUCCESS] PDF para o codigoSolicitacao ${codigoSolicitacao} salvo com sucesso em ${caminhoArquivo}`.
        - Em caso de **falha**, logue a mensagem de erro detalhada: `[SYNC-FAILURE] Falha ao salvar PDF para o codigoSolicitacao ${codigoSolicitacao}: ${error.message}`.

**FASE 2: Simplificação e Melhoria da UI (Frontend):**
    - **Ação:** No ficheiro `client/src/pages/financeiro/CobrancasPage.tsx`, localize a renderização da lista de parcelas na "Ficha do Cliente".
    - **Implementação:**
        a. **Remova completamente** o botão "Copiar Boleto" (linha digitável) e toda a sua lógica associada.
        b. **Adicione um `tooltip`** ao botão "Copiar PIX". O tooltip deve ser exibido apenas quando o botão estiver desabilitado e deve conter a mensagem: "PIX não fornecido pelo banco para esta parcela".

---
**PROTOCOLO OBRIGATÓRIO 7-CHECK EXPANDIDO:**
Siga o protocolo completo. O teste funcional deve incluir a verificação dos novos logs de sincronização no console do servidor e a validação visual da UI (botão removido e tooltip funcionando).
---
**DECLARAÇÃO DE INCERTEZA (OBRIGATÓRIO):**
Preencha a declaração completa ao final da sua implementação.
---