**IMPLEMENTAR:** Na "Página de Pagamentos do Financeiro", a funcionalidade do botão "Marcar como Pago" e o mecanismo opcional para anexar um comprovante de pagamento.

**CONTEXT:** Após a equipe financeira realizar o pagamento ao cliente (usando a chave PIX liberada na etapa anterior), precisamos de um mecanismo formal no sistema para registrar que a transação foi concluída. Este é o encerramento do ciclo de pagamento do empréstimo.

**CURRENT STATE:** Após a "Confirmação de Veracidade", a chave PIX do cliente é exibida, mas não há nenhuma ação subsequente para registrar o pagamento.

**EXPECTED (Estado Final de Sucesso):**

**1. Botão "Marcar como Pago":**
    - Um novo botão, "Marcar como Pago", deve aparecer **apenas** para propostas que estejam no status `pagamento_autorizado`.
    - Ao clicar neste botão, um modal deve ser exibido.
    - O modal deve conter um campo **opcional** para `upload de ficheiro` (permitindo formatos como PDF, JPG, PNG) para o comprovante de pagamento.
    - Um botão final "Confirmar Pagamento" deve estar presente no modal.

**2. Lógica de Backend:**
    - Ao confirmar o pagamento no modal, uma chamada deve ser feita para um novo endpoint: `POST /api/pagamentos/:id/marcar-pago`.
    - Se um ficheiro de comprovante for anexado, o backend deve primeiro fazer o upload seguro do ficheiro para o nosso **Supabase Storage**, numa pasta específica (`comprovantes/{propostaId}/`).
    - O endpoint deve então:
        a. Mudar o status da proposta no banco de dados para `pago`.
        b. Salvar a URL do comprovante (retornada pelo Supabase Storage) num novo campo na tabela `propostas`.
        c. Registrar a ação na tabela `historico_observacoes_cobranca` (ex: "Proposta marcada como paga pelo operador [email do usuário].").

**3. Atualização da UI:**
    - Após a confirmação, a proposta deve desaparecer da "Página de Pagamentos do Financeiro", pois já não é uma pendência.

**ROLES:** Apenas usuários com as roles `ADMIN` e `FINANCEIRO` devem ter permissão para executar esta ação.

**BANCO (Diretriz Crítica de Schema):**
- Esta missão requer duas alterações no schema. **Crie e aplique as migrações Drizzle necessárias ANTES de implementar a lógica**:
    1.  Adicione o novo valor `pago` ao `enum` de status na tabela `propostas`.
    2.  Adicione uma nova coluna `url_comprovante_pagamento` (do tipo `text`, `nullable`) à tabela `propostas`.

**TESTE:**
- Como não temos dados no estado `pagamento_autorizado`, em seu relatório de implementação, **descreva detalhadamente o plano de teste** que você executaria para validar esta funcionalidade de ponta a ponta.