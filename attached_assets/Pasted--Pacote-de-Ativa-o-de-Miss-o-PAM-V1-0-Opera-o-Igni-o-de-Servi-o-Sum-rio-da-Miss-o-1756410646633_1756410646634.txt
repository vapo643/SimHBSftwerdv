### Pacote de Ativação de Missão (PAM) V1.0 - Operação "Ignição de Serviço"

* **Sumário da Missão (O Quê):** Modificar os ficheiros de configuração do ambiente Replit (`.replit` e `replit.nix`) para garantir que o serviço Redis seja instalado como uma dependência do sistema e iniciado automaticamente em segundo plano juntamente com a aplicação Node.js.
* **Intenção Estratégica (O Porquê):** Resolver a causa raiz da falha `ECONNREFUSED`, tornando o ambiente de desenvolvimento 100% funcional e alinhado com a nossa arquitetura de produção. Isto desbloqueará os testes completos do nosso sistema de filas e a continuação do desenvolvimento.
* **Modelo Mental (Como se Encaixa):** Você é um engenheiro de DevOps a configurar um ambiente de "Infrastructure as Code". A sua tarefa é definir as dependências de serviço ao nível do ambiente, garantindo um arranque de sistema consistente e fiável.

---

**IMPLEMENTAR (Plano de Remediação de Ambiente):**
Execute a seguinte sequência de ações.

**CURRENT STATE:**
O serviço Redis está disponível no ambiente, mas não é iniciado automaticamente, causando falhas de conexão `ECONNREFUSED` no BullMQ.

**EXPECTED (Estado Final de Sucesso):**
1.  O ficheiro `replit.nix` é configurado para incluir `pkgs.redis`.
2.  O ficheiro `.replit` é modificado para que o comando `run` inicie o `redis-server` em modo *daemon* antes de iniciar a aplicação.
3.  A aplicação reinicia sem erros de `ECONNREFUSED` e os logs confirmam a conexão bem-sucedida ao Redis.

**CONSTRAINTS (Roadmap de Implementação):**

**Passo 1: Definir a Dependência do Redis no Ambiente Nix**
1.1. Abra o ficheiro `replit.nix`.
1.2. Na secção `deps`, certifique-se de que `pkgs.redis` está presente na lista. Se não estiver, adicione-o.

**Passo 2: Configurar o Comando de Arranque do Ambiente**
2.1. Abra o ficheiro de configuração `.replit`.
2.2. Localize a chave `run`.
2.3. Modifique o comando para a seguinte linha, que primeiro inicia o Redis em segundo plano e depois a aplicação:
    `run = "redis-server --daemonize yes && npm run dev"`

**Passo 3: Validação Final**
3.1. Apresente o conteúdo modificado dos ficheiros `replit.nix` e `.replit`.
3.2. Reinicie o ambiente.
3.3. **Validação Crítica:** Apresente os logs de inicialização do servidor, mostrando especificamente a ausência de erros `ECONNREFUSED` e, idealmente, uma mensagem de conexão bem-sucedida do BullMQ ou do cliente Redis.

---
### **PROTOCOLO DE DIVULGAÇÃO TOTAL (PDT) V1.0 (MANDATÓRIO)**
Apresente a lista exaustiva de TODAS as suas descobertas, riscos e recomendações.