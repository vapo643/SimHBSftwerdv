### Pacote de Ativação de Missão (PAM) V1.0 - Reativação do Endpoint de Upload

* **Sumário da Missão:** Reativar a rota `POST /api/propostas/:id/documents` no ficheiro `server/routes.ts` para restaurar a funcionalidade de upload de documentos para propostas existentes.

* **Intenção Estratégica:** Corrigir a regressão crítica que impede os atendentes de adicionarem documentos a propostas pendentes, desbloqueando um passo essencial no fluxo de negócio.

* **Histórico Relevante (Consulta Obrigatória):** A auditoria forense provou que a rota está comentada e o seu controlador (`uploadPropostaDocument`) não está a ser importado no ficheiro principal de rotas.

---

**IMPLEMENTAR:**
Reativar a rota de upload e adicionar a sua importação de dependência.

**CURRENT STATE:**
* **Ficheiro:** `server/routes.ts`
* **Lógica com Falha:**
    ```typescript
    // A importação para uploadPropostaDocument está ausente no topo do ficheiro.

    // A rota está comentada (inativa).
    // app.post(
    //   "/api/propostas/:id/documents",
    //   ...
    //   uploadPropostaDocument
    // );
    ```

**EXPECTED (Estado Final de Sucesso):**
* **Ficheiro:** `server/routes.ts`
* **Código Corrigido:**
    1.  **Adicionar a Importação:** No topo do ficheiro, junto às outras importações de `routes/documents`, adicione `uploadPropostaDocument`.
        ```typescript
        import { getPropostaDocuments, uploadPropostaDocument } from './routes/documents';
        ```
    2.  **Descomentar a Rota:** Localize e descomente o bloco de código que define o endpoint `POST`.
        ```typescript
        app.post(
          "/api/propostas/:id/documents",
          jwtAuthMiddleware as any,
          // Remova a restrição de role temporariamente se ela existir, para simplificar o teste.
          // requireRoles(['ADMINISTRADOR', 'ANALISTA']), 
          upload.single("file"),
          uploadPropostaDocument
        );
        ```

---
**PROTOCOLO OBRIGATÓRIO 7-CHECK EXPANDIDO:**
Execute a refatoração e realize o protocolo 7-CHECK completo, garantindo **ZERO** novos diagnósticos de LSP e a estabilidade da aplicação.