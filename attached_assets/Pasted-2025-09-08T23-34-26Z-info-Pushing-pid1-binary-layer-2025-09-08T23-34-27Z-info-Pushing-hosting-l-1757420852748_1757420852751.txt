2025-09-08T23:34:26Z info: Pushing pid1 binary layer...
2025-09-08T23:34:27Z info: Pushing hosting layer...
2025-09-08T23:34:27Z info: Pushing Repl layer...
2025-09-08T23:34:27Z info: Retrieved cached nix layer
2025-09-08T23:34:28Z info: Created hosting layer
2025-09-08T23:34:28Z info: Created pid1 binary layer
2025-09-08T23:36:00Z info: Created Repl layer
2025-09-08T23:36:03Z info: Pushed image manifest
2025-09-08T23:36:04Z info: Pushed soci index manifest
2025-09-08T23:36:07Z info: Creating Autoscale service
forwarding local port 5000 to external port 80 (mapped as 1104)
starting up user application
> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.js
{"environment":"production","level":"info","message":"Dead-Letter Queue Manager initialized","service":"simpix-api","timestamp":"2025-09-08 23:37:00","version":"1.0.0"}
[CLICKSIGN V1] API URL: https://app.clicksign.com/api/v1
[CLICKSIGN V1] Token configured: b73b3b90-c87...
11:37:01 PM [express] ğŸ”’ [SECURITY] URL token validation middleware activated - ASVS V7.1.1
11:37:00 PM [express] âš ï¸  Missing optional secrets: SUPABASE_URL, SUPABASE_ANON_KEY, SUPABASE_SERVICE_ROLE_KEY, CLICKSIGN_API_KEY
{"environment":"production","level":"info","message":"ğŸ“Š BullMQ MetricsService module loaded","service":"simpix-api","timestamp":"2025-09-08 23:37:00","version":"1.0.0"}
[CLICKSIGN V1] ğŸš€ Initialized in PRODUCTION mode (legal signatures)
âœ… Database: Configuring Supabase connection...
[CLICKSIGN V1] API URL: https://app.clicksign.com/api/v1
âœ… Database: Connection pool configured with 20 max connections (Mission 3 optimization)
[DEV QUEUE] ğŸ“¦ Created development queue: pdf-processing
11:37:01 PM [express] ğŸ”’ [SECURITY] CORS protection configured - ASVS V13.2.1
ğŸ“Š Pool Config: idle_timeout=30s, connect_timeout=10s, prepared_statements=disabled
[DEV QUEUE] ğŸ“¦ Created development queue: boleto-sync
[DEV QUEUE] ğŸ“¦ Created development queue: notifications
[CLICKSIGN] ğŸ”´ Circuit Breaker will be initialized on first use
[REDIS MANAGER] ğŸš€ Cliente Redis pronto
[CLICKSIGN V1] ğŸš€ Initialized in PRODUCTION mode (legal signatures)
[DEV QUEUE] ğŸ“¦ Created development queue: document-processing
11:37:01 PM [express] ğŸ”’ [SECURITY] Input sanitization middleware activated
11:37:01 PM [express] ğŸ”’ [SECURITY] CSRF protection middleware activated - OWASP Cheat Sheet
[INTER] ğŸ”´ Circuit Breakers will be initialized on first use
{"dsn":"https://7018ab54dbb8...","environment":"production","level":"info","message":"âœ… Sentry initialized successfully","service":"simpix-api","timestamp":"2025-09-08 23:37:00","version":"1.0.0"}
[CLICKSIGN V1] Token configured: b73b3b90-c...
11:37:00 PM [express] âœ… IoC Container initialized successfully
11:37:01 PM [express] ğŸ”’ [SECURITY] OPTIONS preflight handling configured
[INTER] ğŸŒ API URL: https://cdpj.partners.bancointer.com.br
11:37:01 PM [express] ğŸ”’ [SECURITY] Enhanced security headers and strict CSP activated
[QUEUE] ğŸš€ Job queues initialized with DLQ support
11:37:00 PM [express] ğŸ—ï¸ Initializing IoC Container...
[DEV QUEUE] ğŸš€ Development queues initialized with REAL worker processing
{"environment":"production","level":"info","logging":true,"message":"ğŸ“Š Observability layer initialized","sentry":true,"service":"simpix-api","timestamp":"2025-09-08 23:37:00","version":"1.0.0"}
11:37:01 PM [express]   - Port: 5000
[CCB SYNC] â„¹ï¸ Primary processing via webhooks, polling is safety net only
11:37:01 PM [express] ğŸ¯ Specialized queue workers configured for lazy initialization
11:37:01 PM [express] ğŸ”” Sistema de Alertas Proativos inicializado - PrÃ³xima execuÃ§Ã£o: 09/09/2025, 04:00:00
[REDIS MANAGER] ğŸ¯ Singleton Redis conectado com sucesso
{"environment":"production","level":"info","message":"ğŸ“Š [FormalizationWorker] BullMQ Worker connected - async processing enabled","service":"simpix-api","timestamp":"2025-09-08 23:37:01","version":"1.0.0"}
[CCB SYNC] ğŸš€ Starting fallback polling (every 6 hours)
[INTER] ğŸ¦ Initialized in production mode
ğŸš€ [TIMING MIDDLEWARE] Middleware instance created and exported
11:37:01 PM [express] ğŸ“¦ Checking storage buckets...
11:37:01 PM [express] ğŸŒ Environment: production
11:37:01 PM [express]   - Security: Rate Limit âœ…, Helmet âœ…
[Sentry] express is not instrumented. Please make sure to initialize Sentry in a separate file that you `--import` when running node, see: https://docs.sentry.io/platforms/javascript/guides/express/install/esm/.
ğŸš€ [TIMING MIDDLEWARE] Creating middleware instance...
[REDIS MANAGER] ğŸ“¡ Modo produÃ§Ã£o: conexÃ£o sem TLS (padrÃ£o seguro)
{"environment":"production","latency":598,"level":"info","message":"âœ… ConexÃ£o com Redis Cloud estabelecida com sucesso","service":"redis-cloud","timestamp":"2025-09-08 23:37:01","version":"1.0.0"}
11:37:01 PM [express] ğŸ” Security WebSocket initialized
11:37:01 PM [express]   - Environment: production
[REDIS MANAGER] âœ… ConexÃ£o TCP estabelecida
11:37:01 PM [express]   - Supabase: âŒ Not configured
ğŸ”Œ [Security WS] Event listeners configurados (aguardando implementaÃ§Ã£o de EventEmitter nos scanners)
11:37:01 PM [express] ğŸš€ Server running on port 5000
11:37:01 PM [express] âœ… Storage bucket "documents" already exists as PRIVATE
{"environment":"production","level":"info","message":"ğŸ“Š MetricsService initialized with Sentry integration","service":"simpix-api","timestamp":"2025-09-08 23:37:00","version":"1.0.0"}
{"environment":"production","level":"warn","message":"âš ï¸ [FormalizationWorker] Start called but Queue unavailable - no async processing","service":"simpix-api","timestamp":"2025-09-08 23:37:01","version":"1.0.0"}
{"endpoints":["/api/health","/api/health/live","/api/health/ready"],"environment":"production","level":"info","message":"ğŸ¥ Health check endpoints registered","service":"simpix-api","timestamp":"2025-09-08 23:37:01","version":"1.0.0"}
11:37:01 PM [express] âš¡ Formalization Worker initialized - Processing async events
11:37:01 PM [express] ğŸ”’ [PROD] Rate limiting configurado para produÃ§Ã£o - limites seguros
11:37:01 PM [express] ğŸ”§ App Config Status:
11:37:01 PM [express]   - Database: âœ… Connected
IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
11:37:01 PM [express] ğŸ”„ CCB Sync Service initialized - Webhook primary, polling fallback every 6 hours
11:37:01 PM [express] â„¹ï¸  Security monitoring disabled. Set ENABLE_SECURITY_MONITORING=true to enable
IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
11:37:01 PM [express]    - Workers will start when first job is processed (on-demand)
[SEMGREP MCP] Connected to Redis via Redis Manager
    at Timeout._onTimeout (/home/runner/workspace/node_modules/ioredis/built/Command.js:192:33)
âœ… Database: Connection pool test successful
    at process.processTimers (node:internal/timers:519:7)
    at process.processTimers (node:internal/timers:519:7)
    at listOnTimeout (node:internal/timers:581:17)
Error: Command timed out
{"correlationId":"a62c30ab-c8d5-4d59-8770-83426c99dacf","environment":"production","ip":"127.0.0.1","level":"info","message":"ğŸ“¥ Request received","method":"GET","path":"/","query":{},"service":"simpix-api","timestamp":"2025-09-08 23:37:02","url":"/","userAgent":"Go-http-client/1.1","version":"1.0.0"}
    at Timeout._onTimeout (/home/runner/workspace/node_modules/ioredis/built/Command.js:192:33)
ğŸ“Š Connection latency: 1441ms
    at listOnTimeout (node:internal/timers:581:17)
Error: Command timed out
ğŸ”§ Connection pool ready for high concurrency workload
2025-09-08T23:37:10Z info: Waiting for service to be ready
Error: Command timed out
    at Timeout._onTimeout (/home/runner/workspace/node_modules/ioredis/built/Command.js:192:33)
    at Timeout._onTimeout (/home/runner/workspace/node_modules/ioredis/built/Command.js:192:33)
    at process.processTimers (node:internal/timers:519:7)
    at listOnTimeout (node:internal/timers:581:17)
Error: Command timed out
    at listOnTimeout (node:internal/timers:581:17)
    at process.processTimers (node:internal/timers:519:7)
2025-09-08T23:37:13Z info: Deployment successful