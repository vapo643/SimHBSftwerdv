### Pacote de Ativação de Missão (PAM) V1.0 (Auditoria de Consistência de Frontend)

* **Sumário da Missão (O Quê):** Realizar uma auditoria de consistência no frontend, verificando se os componentes da UI estão a renderizar corretamente o estado atual dos dados, especialmente após modificações assíncronas, e como lidam com dados nulos.
* **Intenção Estratégica (O Porquê):** Garantir que o usuário final sempre veja a "fonte da verdade". Inconsistências entre o que o backend sabe e o que a UI mostra podem levar a decisões de negócio erradas, uma péssima experiência do usuário e perda de confiança no sistema.
* **Histórico Relevante (Consulta Obrigatória):** A FASE 0 (Pré-Auditoria) confirmou que múltiplos sistemas (Jobs BullMQ, Webhooks Externos) podem alterar o estado de uma proposta "por trás das costas" da UI. Esta auditoria verifica se a UI está preparada para essa realidade.
* **Modelo Mental (Como se Encaixa):** Esta é uma missão de análise de código estático focada na camada de apresentação. O Agente deve agir como um Engenheiro de QA, inspecionando o código React para encontrar a lógica de atualização de dados e de renderização condicional.

---

**IMPLEMENTAR:**
Relatório de Auditoria de Consistência de Frontend

**CURRENT STATE:**
A FASE 0 revelou que o estado dos dados pode ser modificado por processos assíncronos. Não sabemos se a UI reage corretamente a essas mudanças ou como ela lida com estados de dados incompletos.

**EXPECTED (Estado Final de Sucesso):**
Um relatório de auditoria detalhado em formato Markdown, respondendo a duas perguntas críticas:

**1. Análise de Reatividade da UI:**
   * **Pergunta:** Quando um Job BullMQ ou um Webhook altera o status de uma proposta no banco de dados, como a UI do frontend (ex: o Dashboard de propostas) é notificada dessa mudança para se atualizar?
   * **Sua Análise Deve Incluir:**
     * A estratégia de caching e `refetching` do TanStack Query. Inspecione o `queryClient.ts` e os hooks `useQuery` relevantes.
     * A UI se atualiza em tempo real (ex: via WebSockets ou polling), ou o usuário precisa recarregar a página manualmente para ver as mudanças?
     * Apresente `snippets` de código que comprovem a estratégia de invalidação de cache (`queryClient.invalidateQueries`) ou de `refetching` periódico, se existirem.

**2. Análise do Tratamento de Dados Nulos/Incompletos:**
   * **Pergunta:** Inspecione os componentes-chave que exibem dados da proposta (ex: `ProposalDetails`, `DocumentsStep`, `ClientDataStep`). Como estes componentes lidam com campos que podem ser `null` ou `undefined` durante o ciclo de vida da proposta (ex: `caminho_ccb_assinado` antes de ser gerado, ou os novos campos de empregador)?
   * **Sua Análise Deve Incluir:**
     * Eles mostram um estado de "carregando" ou um `skeleton loader`?
     * Eles mostram um valor padrão (ex: "N/A" ou "-")?
     * Ou eles quebram a renderização (resultando em uma tela de erro ou comportamento inesperado)?
     * Apresente `snippets` de código JSX que demonstrem a lógica de renderização condicional para esses campos.

---
**DECLARAÇÃO DE INCERTEZA (OBRIGATÓRIO):**
* **CONFIANÇA NA IMPLEMENTAÇÃO:** [Preencher com a porcentagem de 0 a 100% de confiança na COMPLETUDE da auditoria]
* **RISCOS IDENTIFICADOS:** [Preencher com a categoria BAIXO/MÉDIO/ALTO/CRÍTICO]
* **DECISÕES TÉCNICAS ASSUMIDAS:** [Ex: "Assumi que a lógica de reatividade principal está contida no TanStack Query."]
* **VALIDAÇÃO PENDENTE:** [Os achados desta auditoria irão informar as missões de correção de frontend, se necessárias.]
---

**PROTOCOLO OBRIGATÓRIO 7-CHECK EXPANDIDO:**
1.  Mapear os arquivos e componentes exatos a serem analisados.
2.  Garantir que a análise cobre os dois pontos (Reatividade e Nulos).
3.  Executar `get_latest_lsp_diagnostics` para garantir que o ambiente está estável.
4.  **Declarar Nível de Confiança (0 a 100%)** na completude da auditoria.
5.  **Categorizar Riscos Descobertos**.
6.  **Realizar teste funcional completo** (revisão do relatório gerado para precisão e lógica).
7.  **Documentar Decisões Técnicas** e os critérios usados na análise.