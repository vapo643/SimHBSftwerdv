Pacote de Ativação de Missão (PAM) V1.1 - Refatoração do Formulário de Referências (Ajuste de Requisito)

Sumário da Missão (O Quê): Ajustar o componente de referências (PersonalReferencesStep.tsx) e sua lógica de validação para que a segunda referência obrigatória possa ser tanto profissional quanto pessoal.

Intenção Estratégica (O Porquê): Flexibilizar o requisito de referências para o usuário, facilitando o preenchimento do formulário sem comprometer a qualidade da informação coletada.

Histórico Relevante (Consulta Obrigatória): A missão anterior (3.2a) implementou duas referências obrigatórias. Este ajuste permite que a segunda referência seja de qualquer tipo.

Modelo Mental (Como se Encaixa): Esta é uma pequena modificação na lógica de validação e potencialmente na nomenclatura da UI.

IMPLEMENTAR:
Flexibilização do Tipo da Segunda Referência

CURRENT STATE:
O componente PersonalReferencesStep.tsx foi refatorado para apresentar duas seções de referência obrigatórias. A intenção inicial era que uma fosse pessoal e outra profissional.

EXPECTED (Estado Final de Sucesso):

O schema de validação Zod associado à etapa de referências é modificado para exigir exatamente duas referências.

A validação para o tipo_referencia da primeira referência permanece como 'pessoal' (obrigatória).

A validação para o tipo_referencia da segunda referência é ajustada para aceitar tanto 'profissional' quanto 'pessoal'.

A interface do usuário é revisada. Se a segunda seção de referência foi explicitamente rotulada como "Referência Profissional", o rótulo deve ser alterado para algo mais genérico, como "Segunda Referência (Opcional: Profissional ou Pessoal)" ou simplesmente "Segunda Referência".

CONSTRAINTS (Roadmap de Implementação):

Componente Alvo: Modificar o schema Zod em shared/schema.ts e, se necessário, o componente client/src/components/propostas/PersonalReferencesStep.tsx.

Lógica de Validação: Altere a lógica de validação no Zod para a segunda referência para permitir ambos os tipos.

Revisão da UI: Verifique os rótulos no componente PersonalReferencesStep.tsx e ajuste-os para refletir a nova flexibilidade.

DECLARAÇÃO DE INCERTEZA (OBRIGATÓRIO):

CONFIANÇA NA IMPLEMENTAÇÃO: [Preencher com a porcentagem de 0 a 100%]

RISCOS IDENTIFICADOS: [Preencher com a categoria BAIXO/MÉDIO/ALTO/CRÍTICO]

DECISÕES TÉCNICAS ASSUMIDAS: [Ex: "Assumi que a ordem das referências no array não é importante para a validação do tipo."]

VALIDAÇÃO PENDENTE: [Testar a submissão do formulário com diferentes combinações de tipos de referência.]

PROTOCOLO OBRIGATÓRIO 7-CHECK EXPANDIDO:

Mapear ficheiros e funções exatas afetadas.

Garantir que o schema Zod está atualizado corretamente.

Executar get_latest_lsp_diagnostics para garantir 0 erros novos.

Declarar Nível de Confiança (0 a 100%).

Categorizar Riscos Descobertos.

Realizar teste funcional completo (testar o formulário na UI).

Documentar Decisões Técnicas.

Com este ajuste no requisito, prossiga com a alteração.