# MISSÃO DE DIAGNÓSTICO PROFUNDO: Investigar a Falha em Cascata no Fluxo de Propostas

**Contexto:** Olá, Agente. Estamos a enfrentar uma falha crítica e persistente. Após as nossas últimas implementações, o fluxo principal da nossa aplicação quebrou. Precisamos que você atue como um engenheiro de software sênior para investigar profundamente e nos dar um diagnóstico preciso da causa raiz. Não queremos uma correção apressada; queremos a verdade.

**Os Sintomas (O Que Está Quebrado):**

1.  **A Tela de "Nova Proposta" (T-01) não Carrega:** Quando um usuário clica em "Nova Proposta", a página exibe a mensagem de erro: **"Erro ao carregar dados necessários. Por favor, recarregue a página."**
2.  **A Tela de "Detalhes da Proposta" (T-03) também não Carrega:** Na "Fila de Análise", ao clicar para ver uma proposta, a tela de detalhes exibe um erro semelhante: **"Proposta não encontrada."**

**Sua Missão de Investigação (Roadmap):**

A sua tarefa é seguir este plano de diagnóstico, passo a passo, para isolar o problema.

**PASSO 1: Validar o Backend de Forma Isolada (O Teste de Fogo)**
* **Ação:** Use uma ferramenta como o `curl` para fazer uma chamada de API direta ao nosso endpoint "orquestrador": `GET /api/origination/context`.
* **Objetivo:** Este teste irá nos dizer se o problema está no nosso backend ou no nosso frontend. Se esta chamada direta falhar, o problema está no servidor. Se ela for bem-sucedida, o problema está na forma como o frontend está a chamar ou a interpretar a resposta.
* **Reporte:** Mostre a chamada `curl` que você executou e a resposta completa (JSON ou erro) que o servidor retornou.

**PASSO 2: Investigar o Código (Com Base no Resultado do Passo 1)**
* **SE a chamada `curl` FALHAR:**
    * **Ação:** A falha está no backend. Inspecione o ficheiro do endpoint (`/server/routes/origination.routes.ts`) e a sua lógica de busca de dados no `storage`. Encontre a query ou a linha de código que está a causar o crash e identifique a causa (ex: erro de SQL, referência a uma coluna inexistente, etc.).
* **SE a chamada `curl` for BEM-SUCEDIDA:**
    * **Ação:** A falha está no frontend. Inspecione o ficheiro da página "Nova Proposta" (`/client/src/pages/propostas/nova.tsx`). Investigue o hook `useQuery` que chama este endpoint. Ele está a usar a `queryKey` correta? Ele está a extrair os dados da resposta da API (`response.data`) corretamente?

**Relatório Final:**
Com base na sua investigação, entregue um diagnóstico final e preciso. Queremos saber exatamente qual é o ponto de falha e por que ele está a acontecer.