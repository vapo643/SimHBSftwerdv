Roadmap de Implementação Faseado: Blindagem do Fluxo de Dados de Análise (P0)
Nível da Missão (Protocolo PSF): Nível 3: Crítica (Lógica de negócio core, workflow P0 bloqueado, risco de regressão).

Ferramenta Recomendada (Protocolo PSF): High Power (Claude Opus) - Mandatório para garantir a refatoração semântica e a implementação correta do padrão ACL.

Roadmap Estratégico:

[PENDENTE] Fase 1: Blindagem da Camada de Consumo de Dados (Frontend - P1)

Sub-passo 1.1: Formalização do Contrato de Visualização (Data Contract Definition): Dentro de client/src/pages/credito/analise.tsx, vamos definir explicitamente, via tipos TypeScript (type ou interface), a estrutura de dados exata que o componente espera (ViewModel). Isto transforma a expectativa implícita em um contrato explícito.

Sub-passo 1.2: Implementação do Anti-Corruption Layer (ACL): A função getClienteData será refatorada e elevada a um mapper dedicado. Esta função será a única responsável por transformar a resposta bruta da API (o DTO - Data Transfer Object) no ViewModel definido no passo anterior. Ela atuará como uma barreira, traduzindo e validando os dados, protegendo o resto do componente de qualquer alteração na estrutura da API.

Sub-passo 1.3: Refatoração Cirúrgica do JSX para Consumo do ViewModel: O código de renderização será modificado para consumir exclusivamente o ViewModel limpo e validado, garantindo que não haja mais acessos diretos e arriscados à resposta da API.

[PENDENTE] Fase 2: Garantia de Contrato na Origem (Backend - P2)

Sub-passo 2.1: Implementação da Validação de Schema de Saída (Output Schema Validation): No proposalController.ts, vamos utilizar Zod para validar o objeto de dados de saída antes de ele ser enviado na resposta JSON. Isso garante que o backend cumpra rigorosamente o contrato, prevenindo futuras regressões e quebras silenciosas.

[PENDENTE] Fase 3: Prova de Trabalho e Validação de Conformidade (P0)

Sub-passo 3.1: Teste Funcional de Ponta a Ponta: Validação do fluxo completo, confirmando que a UI agora renderiza 100% dos dados corretamente.

Sub-passo 3.2: Análise de Regressão: Verificação de que a correção não introduziu efeitos colaterais em componentes adjacentes.