### **Pacote de Ativação de Missão (PAM) V10.0: Rollout Final e Erradicação do Débito de Tipagem (Operação Fênix - P1.9)**

* **Sumário da Missão (O Quê):** Executar a **Fase B.3 (Rollout Final)** do plano de remediação `DEBT_REMEDIATION_PLAN.md`. Esta missão consiste em realizar uma refatoração em massa de **TODOS** os arquivos remanescentes no codebase que ainda utilizam definições locais de `AuthenticatedRequest`, substituindo-as pelo tipo canônico.

* **Intenção Estratégica (O Porquê):** As fases piloto e secundária provaram a eficácia da nossa estratégia. Agora é o momento de erradicar completamente este débito técnico sistêmico. A conclusão desta missão resultará em uma base de código com tipagem consistente, mais segura, mais fácil de manter e finalmente alinhada com os nossos padrões de qualidade, desbloqueando o caminho para o desenvolvimento de novas funcionalidades.

* **Modelo Mental (Como se Encaixa):** Você atuará como um **Motor de Refatoração Automatizada**. Sua tarefa é escanear sistematicamente o projeto, identificar todos os arquivos que ainda contêm a definição de tipo duplicada e aplicar o padrão de correção já validado nas missões anteriores. Esta é uma operação de "limpeza" em larga escala.

* **Riscos Antecipados e Contramedidas:**
    * **Risco (CRÍTICO):** **Regressão em Larga Escala.** Modificar um grande número de arquivos simultaneamente aumenta exponencialmente o risco de introduzir uma regressão funcional sutil em uma parte inesperada do sistema que pode não ser coberta pelos testes existentes.
    * **Contramedida Mandatória:** A validação através da suíte de testes completa (`npm run test`) é a sua principal rede de segurança. Além disso, você **DEVE** executar `npx tsc --noEmit` após a refatoração e reportar a contagem final de erros. A missão só será considerada um sucesso se **TODOS** os testes passarem e o número de erros de TSC for drasticamente reduzido.

---

**DIRETRIZ DE MISSÃO: Execução da Fase B.3 do Plano Aprovado**

**CURRENT STATE:**
O sistema está operacional com `2326` erros de TSC. As fases iniciais de refatoração foram bem-sucedidas em um escopo limitado. A maioria dos controllers ainda utiliza tipos inconsistentes.

**EXPECTED (Estado Final de Sucesso):**
1.  Todos os arquivos restantes no projeto com definições locais de `AuthenticatedRequest` devem ser refatorados para usar o tipo canônico.
2.  A execução de `npx tsc --noEmit` deve resultar em uma redução massiva no número total de erros de tipo. A meta é chegar o mais próximo possível de zero.
3.  A suíte de testes completa (`npm run test`) deve passar sem **nenhuma falha**, confirmando a ausência de regressões funcionais.

**CONSTRAINTS (Protocolo de Execução - Inegociável):**

1.  **Passo 1: Varredura e Mapeamento.** Execute uma busca global (`rg`) para identificar e listar **TODOS** os arquivos remanescentes que ainda contêm a string `interface AuthenticatedRequest`.
2.  **Passo 2: Refatoração em Massa.** Itere sobre a lista de arquivos gerada e aplique o padrão de correção validado: remova a interface local e importe o tipo canônico de `@types/express`.
3.  **Passo 3: Validação da Compilação.** Após a refatoração em massa, execute `npx tsc --noEmit`. Capture e reporte o número final de erros de tipo.
4.  **Passo 4: Validação Funcional Rigorosa.** Execute a suíte de testes completa com `npm run test`. A execução deve ser 100% bem-sucedida.
5.  **Passo 5: Relatório Final de Erradicação.** Reporte a conclusão da missão, apresentando a lista de arquivos modificados, a redução final e drástica no número de erros de `tsc`, e a saída bem-sucedida da execução dos testes.

---

**DECLARAÇÃO DE INCERTEZA (OBRIGATÓRIO):**

* **CONFIANÇA NA IMPLEMENTAÇÃO:** 75%
* **RISCOS IDENTIFICADOS:** CRÍTICO (Esta é a operação de maior risco da "Operação Fênix" devido à sua escala).
* **DECISÕES TÉCNICAS ASSUMIDAS:** Assumo que não existem casos de uso do tipo `AuthenticatedRequest` fundamentalmente diferentes nos arquivos restantes que possam ser incompatíveis com o tipo canônico.
* **VALIDAÇÃO PENDENTE:** A passagem completa da suíte de testes e uma redução drástica e satisfatória de erros de `tsc` serão a prova final da missão.

---

**PROTOCOLO OBRIGATÓRIO 7-CHECK (ADAPTATIVO - Nível FULL):**
Ao concluir esta missão de execução, você **DEVE** executar e reportar o resultado do `7-CHECK FULL`, pois o risco foi classificado como **CRÍTICO**.