### Pacote de Ativação de Missão (PAM) V1.0

* **Sumário da Missão (O Quê):** Alterar o middleware de permissão da rota de upload de documentos para permitir o acesso à `role` 'ANALISTA'.
* **Intenção Estratégica (O Porquê):** Implementar o requisito de negócio que expande a funcionalidade de upload de documentos para os analistas, melhorando a eficiência do fluxo de análise e formalização de propostas.
* **Histórico Relevante (Consulta Obrigatória):** A auditoria inicial (Missão de Planejamento) identificou que a permissão de upload de documentos era um requisito, mas a rota exata e suas permissões atuais precisam ser confirmadas e modificadas.
* **Modelo Mental (Como se Encaixa):** Esta é uma modificação de segurança e controle de acesso. O Agente irá localizar uma verificação de permissão no backend e expandir o conjunto de `roles` permitidas.
* **Riscos Antecipados e Contramedidas:**
    * **Risco:** A alteração pode ser aplicada à rota errada ou expor a funcionalidade a `roles` indesejadas.
    * **Contramedida:** O prompt exige a localização da rota específica para documentos de proposta e a adição de uma única `role` específica, minimizando a superfície de ataque.

---

**IMPLEMENTAR:**
Atualização de Permissão de Upload para Analistas

**CURRENT STATE:**
A rota da API responsável pelo upload de documentos de proposta está protegida por um middleware de `role` que atualmente não permite o acesso de usuários com a `role` 'ANALISTA'.

**EXPECTED (Estado Final de Sucesso):**
1.  O arquivo de rotas que contém o endpoint de upload de documentos de proposta é localizado e modificado.
2.  O middleware `requireRole` (ou similar) para essa rota é atualizado para incluir `'ANALISTA'` na lista de `roles` permitidas (ex: `requireRole(['ADMIN', 'ANALISTA'])`).
3.  A aplicação permanece funcional e as permissões para outras rotas não são alteradas.

**CONSTRAINTS (Roadmap de Implementação):**
1.  **Localize a Rota Correta:** Inicie uma busca no código para encontrar o endpoint correto para upload de documentos associados a uma proposta (ex: `POST /api/propostas/:id/documentos`). Ignore a rota de upload de documentos OWASP em `owasp.ts`.
2.  **Modificação Cirúrgica:** A única alteração autorizada é a adição da string `'ANALISTA'` ao array de permissões no middleware `requireRole` da rota identificada.
3.  **Validação:** A validação será uma revisão do código-fonte modificado para confirmar que a permissão foi adicionada corretamente à rota correta.

---
**DECLARAÇÃO DE INCERTEZA (OBRIGATÓRIO):**
* **CONFIANÇA NA IMPLEMENTAÇÃO:** [Preencher com a porcentagem de 0 a 100%]
* **RISCOS IDENTIFICADOS:** [Preencher com a categoria BAIXO/MÉDIO/ALTO/CRÍTICO]
* **DECISÕES TÉCNICAS ASSUMIDAS:** [Ex: "Assumi que a função de middleware para controle de acesso se chama `requireRole`."]
* **VALIDAÇÃO PENDENTE:** [Testes de integração devem ser criados para validar que um usuário 'ANALISTA' pode fazer upload e que outras roles não autorizadas (ex: 'ATENDENTE') continuam a ser bloqueadas.]
---

**PROTOCOLO OBRIGATÓRIO 7-CHECK EXPANDIDO:**
1.  Mapear ficheiros e funções exatas afetadas.
2