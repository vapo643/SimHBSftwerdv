var BF=t=>{throw TypeError(t)};var lN=(t,e,r)=>e.has(t)||BF("Cannot "+r);var Hr=(t,e,r)=>(lN(t,e,"read from private field"),r?r.call(t):e.get(t)),eo=(t,e,r)=>e.has(t)?BF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ea=(t,e,r,n)=>(lN(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),to=(t,e,r)=>(lN(t,e,"access private method"),r);var UF=(t,e,r,n)=>({set _(s){ea(t,e,s,r)},get _(){return Hr(t,e,n)}});function GW(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function loe(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var cN={exports:{}},wm={},uN={exports:{}},Vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zF;function coe(){if(zF)return Vt;zF=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function m(F){return F===null||typeof F!="object"?null:(F=f&&F[f]||F["@@iterator"],typeof F=="function"?F:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,v={};function y(F,Y,oe){this.props=F,this.context=Y,this.refs=v,this.updater=oe||g}y.prototype.isReactComponent={},y.prototype.setState=function(F,Y){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Y,"setState")},y.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function w(){}w.prototype=y.prototype;function _(F,Y,oe){this.props=F,this.context=Y,this.refs=v,this.updater=oe||g}var A=_.prototype=new w;A.constructor=_,x(A,y.prototype),A.isPureReactComponent=!0;var C=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(F,Y,oe){var xe,J={},Ee=null,ye=null;if(Y!=null)for(xe in Y.ref!==void 0&&(ye=Y.ref),Y.key!==void 0&&(Ee=""+Y.key),Y)S.call(Y,xe)&&!P.hasOwnProperty(xe)&&(J[xe]=Y[xe]);var je=arguments.length-2;if(je===1)J.children=oe;else if(1<je){for(var pe=Array(je),Se=0;Se<je;Se++)pe[Se]=arguments[Se+2];J.children=pe}if(F&&F.defaultProps)for(xe in je=F.defaultProps,je)J[xe]===void 0&&(J[xe]=je[xe]);return{$$typeof:t,type:F,key:Ee,ref:ye,props:J,_owner:E.current}}function O(F,Y){return{$$typeof:t,type:F.type,key:Y,ref:F.ref,props:F.props,_owner:F._owner}}function D(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function I(F){var Y={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(oe){return Y[oe]})}var $=/\/+/g;function M(F,Y){return typeof F=="object"&&F!==null&&F.key!=null?I(""+F.key):Y.toString(36)}function U(F,Y,oe,xe,J){var Ee=typeof F;(Ee==="undefined"||Ee==="boolean")&&(F=null);var ye=!1;if(F===null)ye=!0;else switch(Ee){case"string":case"number":ye=!0;break;case"object":switch(F.$$typeof){case t:case e:ye=!0}}if(ye)return ye=F,J=J(ye),F=xe===""?"."+M(ye,0):xe,C(J)?(oe="",F!=null&&(oe=F.replace($,"$&/")+"/"),U(J,Y,oe,"",function(Se){return Se})):J!=null&&(D(J)&&(J=O(J,oe+(!J.key||ye&&ye.key===J.key?"":(""+J.key).replace($,"$&/")+"/")+F)),Y.push(J)),1;if(ye=0,xe=xe===""?".":xe+":",C(F))for(var je=0;je<F.length;je++){Ee=F[je];var pe=xe+M(Ee,je);ye+=U(Ee,Y,oe,pe,J)}else if(pe=m(F),typeof pe=="function")for(F=pe.call(F),je=0;!(Ee=F.next()).done;)Ee=Ee.value,pe=xe+M(Ee,je++),ye+=U(Ee,Y,oe,pe,J);else if(Ee==="object")throw Y=String(F),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return ye}function H(F,Y,oe){if(F==null)return F;var xe=[],J=0;return U(F,xe,"","",function(Ee){return Y.call(oe,Ee,J++)}),xe}function z(F){if(F._status===-1){var Y=F._result;Y=Y(),Y.then(function(oe){(F._status===0||F._status===-1)&&(F._status=1,F._result=oe)},function(oe){(F._status===0||F._status===-1)&&(F._status=2,F._result=oe)}),F._status===-1&&(F._status=0,F._result=Y)}if(F._status===1)return F._result.default;throw F._result}var q={current:null},V={transition:null},W={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:V,ReactCurrentOwner:E};function B(){throw Error("act(...) is not supported in production builds of React.")}return Vt.Children={map:H,forEach:function(F,Y,oe){H(F,function(){Y.apply(this,arguments)},oe)},count:function(F){var Y=0;return H(F,function(){Y++}),Y},toArray:function(F){return H(F,function(Y){return Y})||[]},only:function(F){if(!D(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Vt.Component=y,Vt.Fragment=r,Vt.Profiler=s,Vt.PureComponent=_,Vt.StrictMode=n,Vt.Suspense=c,Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,Vt.act=B,Vt.cloneElement=function(F,Y,oe){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var xe=x({},F.props),J=F.key,Ee=F.ref,ye=F._owner;if(Y!=null){if(Y.ref!==void 0&&(Ee=Y.ref,ye=E.current),Y.key!==void 0&&(J=""+Y.key),F.type&&F.type.defaultProps)var je=F.type.defaultProps;for(pe in Y)S.call(Y,pe)&&!P.hasOwnProperty(pe)&&(xe[pe]=Y[pe]===void 0&&je!==void 0?je[pe]:Y[pe])}var pe=arguments.length-2;if(pe===1)xe.children=oe;else if(1<pe){je=Array(pe);for(var Se=0;Se<pe;Se++)je[Se]=arguments[Se+2];xe.children=je}return{$$typeof:t,type:F.type,key:J,ref:Ee,props:xe,_owner:ye}},Vt.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},Vt.createElement=R,Vt.createFactory=function(F){var Y=R.bind(null,F);return Y.type=F,Y},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(F){return{$$typeof:l,render:F}},Vt.isValidElement=D,Vt.lazy=function(F){return{$$typeof:d,_payload:{_status:-1,_result:F},_init:z}},Vt.memo=function(F,Y){return{$$typeof:u,type:F,compare:Y===void 0?null:Y}},Vt.startTransition=function(F){var Y=V.transition;V.transition={};try{F()}finally{V.transition=Y}},Vt.unstable_act=B,Vt.useCallback=function(F,Y){return q.current.useCallback(F,Y)},Vt.useContext=function(F){return q.current.useContext(F)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(F){return q.current.useDeferredValue(F)},Vt.useEffect=function(F,Y){return q.current.useEffect(F,Y)},Vt.useId=function(){return q.current.useId()},Vt.useImperativeHandle=function(F,Y,oe){return q.current.useImperativeHandle(F,Y,oe)},Vt.useInsertionEffect=function(F,Y){return q.current.useInsertionEffect(F,Y)},Vt.useLayoutEffect=function(F,Y){return q.current.useLayoutEffect(F,Y)},Vt.useMemo=function(F,Y){return q.current.useMemo(F,Y)},Vt.useReducer=function(F,Y,oe){return q.current.useReducer(F,Y,oe)},Vt.useRef=function(F){return q.current.useRef(F)},Vt.useState=function(F){return q.current.useState(F)},Vt.useSyncExternalStore=function(F,Y,oe){return q.current.useSyncExternalStore(F,Y,oe)},Vt.useTransition=function(){return q.current.useTransition()},Vt.version="18.3.1",Vt}var qF;function m_(){return qF||(qF=1,uN.exports=coe()),uN.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VF;function uoe(){if(VF)return wm;VF=1;var t=m_(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var d,f={},m=null,g=null;u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(g=c.ref);for(d in c)n.call(c,d)&&!a.hasOwnProperty(d)&&(f[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:e,type:l,key:m,ref:g,props:f,_owner:s.current}}return wm.Fragment=r,wm.jsx=o,wm.jsxs=o,wm}var HF;function doe(){return HF||(HF=1,cN.exports=uoe()),cN.exports}var i=doe(),Mx={},dN={exports:{}},ta={},hN={exports:{}},fN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WF;function hoe(){return WF||(WF=1,(function(t){function e(V,W){var B=V.length;V.push(W);e:for(;0<B;){var F=B-1>>>1,Y=V[F];if(0<s(Y,W))V[F]=W,V[B]=Y,B=F;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var W=V[0],B=V.pop();if(B!==W){V[0]=B;e:for(var F=0,Y=V.length,oe=Y>>>1;F<oe;){var xe=2*(F+1)-1,J=V[xe],Ee=xe+1,ye=V[Ee];if(0>s(J,B))Ee<Y&&0>s(ye,J)?(V[F]=ye,V[Ee]=B,F=Ee):(V[F]=J,V[xe]=B,F=xe);else if(Ee<Y&&0>s(ye,B))V[F]=ye,V[Ee]=B,F=Ee;else break e}}return W}function s(V,W){var B=V.sortIndex-W.sortIndex;return B!==0?B:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(V){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=V)n(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=r(u)}}function C(V){if(v=!1,A(V),!x)if(r(c)!==null)x=!0,z(S);else{var W=r(u);W!==null&&q(C,W.startTime-V)}}function S(V,W){x=!1,v&&(v=!1,w(R),R=-1),g=!0;var B=m;try{for(A(W),f=r(c);f!==null&&(!(f.expirationTime>W)||V&&!I());){var F=f.callback;if(typeof F=="function"){f.callback=null,m=f.priorityLevel;var Y=F(f.expirationTime<=W);W=t.unstable_now(),typeof Y=="function"?f.callback=Y:f===r(c)&&n(c),A(W)}else n(c);f=r(c)}if(f!==null)var oe=!0;else{var xe=r(u);xe!==null&&q(C,xe.startTime-W),oe=!1}return oe}finally{f=null,m=B,g=!1}}var E=!1,P=null,R=-1,O=5,D=-1;function I(){return!(t.unstable_now()-D<O)}function $(){if(P!==null){var V=t.unstable_now();D=V;var W=!0;try{W=P(!0,V)}finally{W?M():(E=!1,P=null)}}else E=!1}var M;if(typeof _=="function")M=function(){_($)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,H=U.port2;U.port1.onmessage=$,M=function(){H.postMessage(null)}}else M=function(){y($,0)};function z(V){P=V,E||(E=!0,M())}function q(V,W){R=y(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,z(S))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(V){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var B=m;m=W;try{return V()}finally{m=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var B=m;m=V;try{return W()}finally{m=B}},t.unstable_scheduleCallback=function(V,W,B){var F=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?F+B:F):B=F,V){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=B+Y,V={id:d++,callback:W,priorityLevel:V,startTime:B,expirationTime:Y,sortIndex:-1},B>F?(V.sortIndex=B,e(u,V),r(c)===null&&V===r(u)&&(v?(w(R),R=-1):v=!0,q(C,B-F))):(V.sortIndex=Y,e(c,V),x||g||(x=!0,z(S))),V},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(V){var W=m;return function(){var B=m;m=W;try{return V.apply(this,arguments)}finally{m=B}}}})(fN)),fN}var GF;function foe(){return GF||(GF=1,hN.exports=hoe()),hN.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KF;function poe(){if(KF)return ta;KF=1;var t=m_(),e=foe();function r(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,b=1;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(h,p){o(h,p),o(h+"Capture",p)}function o(h,p){for(s[h]=p,h=0;h<p.length;h++)n.add(p[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function m(h){return c.call(f,h)?!0:c.call(d,h)?!1:u.test(h)?f[h]=!0:(d[h]=!0,!1)}function g(h,p,b,j){if(b!==null&&b.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return j?!1:b!==null?!b.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function x(h,p,b,j){if(p===null||typeof p>"u"||g(h,p,b,j))return!0;if(j)return!1;if(b!==null)switch(b.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function v(h,p,b,j,T,k,L){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=j,this.attributeNamespace=T,this.mustUseProperty=b,this.propertyName=h,this.type=p,this.sanitizeURL=k,this.removeEmptyString=L}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){y[h]=new v(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var p=h[0];y[p]=new v(p,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){y[h]=new v(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){y[h]=new v(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){y[h]=new v(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){y[h]=new v(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){y[h]=new v(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){y[h]=new v(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){y[h]=new v(h,5,!1,h.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function _(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var p=h.replace(w,_);y[p]=new v(p,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var p=h.replace(w,_);y[p]=new v(p,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var p=h.replace(w,_);y[p]=new v(p,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){y[h]=new v(h,1,!1,h.toLowerCase(),null,!1,!1)}),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){y[h]=new v(h,1,!1,h.toLowerCase(),null,!0,!0)});function A(h,p,b,j){var T=y.hasOwnProperty(p)?y[p]:null;(T!==null?T.type!==0:j||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(x(p,b,T,j)&&(b=null),j||T===null?m(p)&&(b===null?h.removeAttribute(p):h.setAttribute(p,""+b)):T.mustUseProperty?h[T.propertyName]=b===null?T.type===3?!1:"":b:(p=T.attributeName,j=T.attributeNamespace,b===null?h.removeAttribute(p):(T=T.type,b=T===3||T===4&&b===!0?"":""+b,j?h.setAttributeNS(j,p,b):h.setAttribute(p,b))))}var C=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),E=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),I=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),V=Symbol.iterator;function W(h){return h===null||typeof h!="object"?null:(h=V&&h[V]||h["@@iterator"],typeof h=="function"?h:null)}var B=Object.assign,F;function Y(h){if(F===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);F=p&&p[1]||""}return`
`+F+h}var oe=!1;function xe(h,p){if(!h||oe)return"";oe=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(me){var j=me}Reflect.construct(h,[],p)}else{try{p.call()}catch(me){j=me}h.call(p.prototype)}else{try{throw Error()}catch(me){j=me}h()}}catch(me){if(me&&j&&typeof me.stack=="string"){for(var T=me.stack.split(`
`),k=j.stack.split(`
`),L=T.length-1,Q=k.length-1;1<=L&&0<=Q&&T[L]!==k[Q];)Q--;for(;1<=L&&0<=Q;L--,Q--)if(T[L]!==k[Q]){if(L!==1||Q!==1)do if(L--,Q--,0>Q||T[L]!==k[Q]){var Z=`
`+T[L].replace(" at new "," at ");return h.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",h.displayName)),Z}while(1<=L&&0<=Q);break}}}finally{oe=!1,Error.prepareStackTrace=b}return(h=h?h.displayName||h.name:"")?Y(h):""}function J(h){switch(h.tag){case 5:return Y(h.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return h=xe(h.type,!1),h;case 11:return h=xe(h.type.render,!1),h;case 1:return h=xe(h.type,!0),h;default:return""}}function Ee(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case P:return"Fragment";case E:return"Portal";case O:return"Profiler";case R:return"StrictMode";case M:return"Suspense";case U:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case I:return(h.displayName||"Context")+".Consumer";case D:return(h._context.displayName||"Context")+".Provider";case $:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case H:return p=h.displayName||null,p!==null?p:Ee(h.type)||"Memo";case z:p=h._payload,h=h._init;try{return Ee(h(p))}catch{}}return null}function ye(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(p);case 8:return p===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function je(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function pe(h){var p=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Se(h){var p=pe(h)?"checked":"value",b=Object.getOwnPropertyDescriptor(h.constructor.prototype,p),j=""+h[p];if(!h.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var T=b.get,k=b.set;return Object.defineProperty(h,p,{configurable:!0,get:function(){return T.call(this)},set:function(L){j=""+L,k.call(this,L)}}),Object.defineProperty(h,p,{enumerable:b.enumerable}),{getValue:function(){return j},setValue:function(L){j=""+L},stopTracking:function(){h._valueTracker=null,delete h[p]}}}}function Oe(h){h._valueTracker||(h._valueTracker=Se(h))}function ve(h){if(!h)return!1;var p=h._valueTracker;if(!p)return!0;var b=p.getValue(),j="";return h&&(j=pe(h)?h.checked?"true":"false":h.value),h=j,h!==b?(p.setValue(h),!0):!1}function Xe(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function $e(h,p){var b=p.checked;return B({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??h._wrapperState.initialChecked})}function at(h,p){var b=p.defaultValue==null?"":p.defaultValue,j=p.checked!=null?p.checked:p.defaultChecked;b=je(p.value!=null?p.value:b),h._wrapperState={initialChecked:j,initialValue:b,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Ft(h,p){p=p.checked,p!=null&&A(h,"checked",p,!1)}function rr(h,p){Ft(h,p);var b=je(p.value),j=p.type;if(b!=null)j==="number"?(b===0&&h.value===""||h.value!=b)&&(h.value=""+b):h.value!==""+b&&(h.value=""+b);else if(j==="submit"||j==="reset"){h.removeAttribute("value");return}p.hasOwnProperty("value")?St(h,p.type,b):p.hasOwnProperty("defaultValue")&&St(h,p.type,je(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(h.defaultChecked=!!p.defaultChecked)}function _e(h,p,b){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var j=p.type;if(!(j!=="submit"&&j!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+h._wrapperState.initialValue,b||p===h.value||(h.value=p),h.defaultValue=p}b=h.name,b!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,b!==""&&(h.name=b)}function St(h,p,b){(p!=="number"||Xe(h.ownerDocument)!==h)&&(b==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+b&&(h.defaultValue=""+b))}var X=Array.isArray;function ae(h,p,b,j){if(h=h.options,p){p={};for(var T=0;T<b.length;T++)p["$"+b[T]]=!0;for(b=0;b<h.length;b++)T=p.hasOwnProperty("$"+h[b].value),h[b].selected!==T&&(h[b].selected=T),T&&j&&(h[b].defaultSelected=!0)}else{for(b=""+je(b),p=null,T=0;T<h.length;T++){if(h[T].value===b){h[T].selected=!0,j&&(h[T].defaultSelected=!0);return}p!==null||h[T].disabled||(p=h[T])}p!==null&&(p.selected=!0)}}function ce(h,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return B({},p,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Ce(h,p){var b=p.value;if(b==null){if(b=p.children,p=p.defaultValue,b!=null){if(p!=null)throw Error(r(92));if(X(b)){if(1<b.length)throw Error(r(93));b=b[0]}p=b}p==null&&(p=""),b=p}h._wrapperState={initialValue:je(b)}}function K(h,p){var b=je(p.value),j=je(p.defaultValue);b!=null&&(b=""+b,b!==h.value&&(h.value=b),p.defaultValue==null&&h.defaultValue!==b&&(h.defaultValue=b)),j!=null&&(h.defaultValue=""+j)}function we(h){var p=h.textContent;p===h._wrapperState.initialValue&&p!==""&&p!==null&&(h.value=p)}function Ue(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(h,p){return h==null||h==="http://www.w3.org/1999/xhtml"?Ue(p):h==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var gt,ge=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,b,j,T){MSApp.execUnsafeLocalFunction(function(){return h(p,b,j,T)})}:h})(function(h,p){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=p;else{for(gt=gt||document.createElement("div"),gt.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=gt.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;p.firstChild;)h.appendChild(p.firstChild)}});function er(h,p){if(p){var b=h.firstChild;if(b&&b===h.lastChild&&b.nodeType===3){b.nodeValue=p;return}}h.textContent=p}var nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ws=["Webkit","ms","Moz","O"];Object.keys(nr).forEach(function(h){Ws.forEach(function(p){p=p+h.charAt(0).toUpperCase()+h.substring(1),nr[p]=nr[h]})});function An(h,p,b){return p==null||typeof p=="boolean"||p===""?"":b||typeof p!="number"||p===0||nr.hasOwnProperty(h)&&nr[h]?(""+p).trim():p+"px"}function Zn(h,p){h=h.style;for(var b in p)if(p.hasOwnProperty(b)){var j=b.indexOf("--")===0,T=An(b,p[b],j);b==="float"&&(b="cssFloat"),j?h.setProperty(b,T):h[b]=T}}var bs=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gs(h,p){if(p){if(bs[h]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function vn(h,p){if(h.indexOf("-")===-1)return typeof p.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pa=null;function Xr(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Ud=null,Rl=null,Ki=null;function jy(h){if(h=im(h)){if(typeof Ud!="function")throw Error(r(280));var p=h.stateNode;p&&(p=Xy(p),Ud(h.stateNode,h.type,p))}}function Ay(h){Rl?Ki?Ki.push(h):Ki=[h]:Rl=h}function zd(){if(Rl){var h=Rl,p=Ki;if(Ki=Rl=null,jy(h),p)for(h=0;h<p.length;h++)jy(p[h])}}function Ny(h,p){return h(p)}function Ey(){}var Up=!1;function Cy(h,p,b){if(Up)return h(p,b);Up=!0;try{return Ny(h,p,b)}finally{Up=!1,(Rl!==null||Ki!==null)&&(Ey(),zd())}}function te(h,p){var b=h.stateNode;if(b===null)return null;var j=Xy(b);if(j===null)return null;b=j[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(h=h.type,j=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!j;break e;default:h=!1}if(h)return null;if(b&&typeof b!="function")throw Error(r(231,p,typeof b));return b}var st=!1;if(l)try{var Ye={};Object.defineProperty(Ye,"passive",{get:function(){st=!0}}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch{st=!1}function Bn(h,p,b,j,T,k,L,Q,Z){var me=Array.prototype.slice.call(arguments,3);try{p.apply(b,me)}catch(Ne){this.onError(Ne)}}var Yr=!1,Ks=null,qd=!1,Ej=null,mae={onError:function(h){Yr=!0,Ks=h}};function gae(h,p,b,j,T,k,L,Q,Z){Yr=!1,Ks=null,Bn.apply(mae,arguments)}function vae(h,p,b,j,T,k,L,Q,Z){if(gae.apply(this,arguments),Yr){if(Yr){var me=Ks;Yr=!1,Ks=null}else throw Error(r(198));qd||(qd=!0,Ej=me)}}function Zc(h){var p=h,b=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(b=p.return),h=p.return;while(h)}return p.tag===3?b:null}function cL(h){if(h.tag===13){var p=h.memoizedState;if(p===null&&(h=h.alternate,h!==null&&(p=h.memoizedState)),p!==null)return p.dehydrated}return null}function uL(h){if(Zc(h)!==h)throw Error(r(188))}function yae(h){var p=h.alternate;if(!p){if(p=Zc(h),p===null)throw Error(r(188));return p!==h?null:h}for(var b=h,j=p;;){var T=b.return;if(T===null)break;var k=T.alternate;if(k===null){if(j=T.return,j!==null){b=j;continue}break}if(T.child===k.child){for(k=T.child;k;){if(k===b)return uL(T),h;if(k===j)return uL(T),p;k=k.sibling}throw Error(r(188))}if(b.return!==j.return)b=T,j=k;else{for(var L=!1,Q=T.child;Q;){if(Q===b){L=!0,b=T,j=k;break}if(Q===j){L=!0,j=T,b=k;break}Q=Q.sibling}if(!L){for(Q=k.child;Q;){if(Q===b){L=!0,b=k,j=T;break}if(Q===j){L=!0,j=k,b=T;break}Q=Q.sibling}if(!L)throw Error(r(189))}}if(b.alternate!==j)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?h:p}function dL(h){return h=yae(h),h!==null?hL(h):null}function hL(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=hL(h);if(p!==null)return p;h=h.sibling}return null}var fL=e.unstable_scheduleCallback,pL=e.unstable_cancelCallback,xae=e.unstable_shouldYield,bae=e.unstable_requestPaint,yn=e.unstable_now,wae=e.unstable_getCurrentPriorityLevel,Cj=e.unstable_ImmediatePriority,mL=e.unstable_UserBlockingPriority,Ty=e.unstable_NormalPriority,_ae=e.unstable_LowPriority,gL=e.unstable_IdlePriority,Py=null,Xi=null;function Sae(h){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(Py,h,void 0,(h.current.flags&128)===128)}catch{}}var hi=Math.clz32?Math.clz32:Nae,jae=Math.log,Aae=Math.LN2;function Nae(h){return h>>>=0,h===0?32:31-(jae(h)/Aae|0)|0}var ky=64,Oy=4194304;function zp(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Ry(h,p){var b=h.pendingLanes;if(b===0)return 0;var j=0,T=h.suspendedLanes,k=h.pingedLanes,L=b&268435455;if(L!==0){var Q=L&~T;Q!==0?j=zp(Q):(k&=L,k!==0&&(j=zp(k)))}else L=b&~T,L!==0?j=zp(L):k!==0&&(j=zp(k));if(j===0)return 0;if(p!==0&&p!==j&&(p&T)===0&&(T=j&-j,k=p&-p,T>=k||T===16&&(k&4194240)!==0))return p;if((j&4)!==0&&(j|=b&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=j;0<p;)b=31-hi(p),T=1<<b,j|=h[b],p&=~T;return j}function Eae(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cae(h,p){for(var b=h.suspendedLanes,j=h.pingedLanes,T=h.expirationTimes,k=h.pendingLanes;0<k;){var L=31-hi(k),Q=1<<L,Z=T[L];Z===-1?((Q&b)===0||(Q&j)!==0)&&(T[L]=Eae(Q,p)):Z<=p&&(h.expiredLanes|=Q),k&=~Q}}function Tj(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function vL(){var h=ky;return ky<<=1,(ky&4194240)===0&&(ky=64),h}function Pj(h){for(var p=[],b=0;31>b;b++)p.push(h);return p}function qp(h,p,b){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-hi(p),h[p]=b}function Tae(h,p){var b=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var j=h.eventTimes;for(h=h.expirationTimes;0<b;){var T=31-hi(b),k=1<<T;p[T]=0,j[T]=-1,h[T]=-1,b&=~k}}function kj(h,p){var b=h.entangledLanes|=p;for(h=h.entanglements;b;){var j=31-hi(b),T=1<<j;T&p|h[j]&p&&(h[j]|=p),b&=~T}}var wr=0;function yL(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var xL,Oj,bL,wL,_L,Rj=!1,Iy=[],Il=null,Ml=null,Dl=null,Vp=new Map,Hp=new Map,Ll=[],Pae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SL(h,p){switch(h){case"focusin":case"focusout":Il=null;break;case"dragenter":case"dragleave":Ml=null;break;case"mouseover":case"mouseout":Dl=null;break;case"pointerover":case"pointerout":Vp.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hp.delete(p.pointerId)}}function Wp(h,p,b,j,T,k){return h===null||h.nativeEvent!==k?(h={blockedOn:p,domEventName:b,eventSystemFlags:j,nativeEvent:k,targetContainers:[T]},p!==null&&(p=im(p),p!==null&&Oj(p)),h):(h.eventSystemFlags|=j,p=h.targetContainers,T!==null&&p.indexOf(T)===-1&&p.push(T),h)}function kae(h,p,b,j,T){switch(p){case"focusin":return Il=Wp(Il,h,p,b,j,T),!0;case"dragenter":return Ml=Wp(Ml,h,p,b,j,T),!0;case"mouseover":return Dl=Wp(Dl,h,p,b,j,T),!0;case"pointerover":var k=T.pointerId;return Vp.set(k,Wp(Vp.get(k)||null,h,p,b,j,T)),!0;case"gotpointercapture":return k=T.pointerId,Hp.set(k,Wp(Hp.get(k)||null,h,p,b,j,T)),!0}return!1}function jL(h){var p=eu(h.target);if(p!==null){var b=Zc(p);if(b!==null){if(p=b.tag,p===13){if(p=cL(b),p!==null){h.blockedOn=p,_L(h.priority,function(){bL(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){h.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}h.blockedOn=null}function My(h){if(h.blockedOn!==null)return!1;for(var p=h.targetContainers;0<p.length;){var b=Mj(h.domEventName,h.eventSystemFlags,p[0],h.nativeEvent);if(b===null){b=h.nativeEvent;var j=new b.constructor(b.type,b);pa=j,b.target.dispatchEvent(j),pa=null}else return p=im(b),p!==null&&Oj(p),h.blockedOn=b,!1;p.shift()}return!0}function AL(h,p,b){My(h)&&b.delete(p)}function Oae(){Rj=!1,Il!==null&&My(Il)&&(Il=null),Ml!==null&&My(Ml)&&(Ml=null),Dl!==null&&My(Dl)&&(Dl=null),Vp.forEach(AL),Hp.forEach(AL)}function Gp(h,p){h.blockedOn===p&&(h.blockedOn=null,Rj||(Rj=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Oae)))}function Kp(h){function p(T){return Gp(T,h)}if(0<Iy.length){Gp(Iy[0],h);for(var b=1;b<Iy.length;b++){var j=Iy[b];j.blockedOn===h&&(j.blockedOn=null)}}for(Il!==null&&Gp(Il,h),Ml!==null&&Gp(Ml,h),Dl!==null&&Gp(Dl,h),Vp.forEach(p),Hp.forEach(p),b=0;b<Ll.length;b++)j=Ll[b],j.blockedOn===h&&(j.blockedOn=null);for(;0<Ll.length&&(b=Ll[0],b.blockedOn===null);)jL(b),b.blockedOn===null&&Ll.shift()}var Vd=C.ReactCurrentBatchConfig,Dy=!0;function Rae(h,p,b,j){var T=wr,k=Vd.transition;Vd.transition=null;try{wr=1,Ij(h,p,b,j)}finally{wr=T,Vd.transition=k}}function Iae(h,p,b,j){var T=wr,k=Vd.transition;Vd.transition=null;try{wr=4,Ij(h,p,b,j)}finally{wr=T,Vd.transition=k}}function Ij(h,p,b,j){if(Dy){var T=Mj(h,p,b,j);if(T===null)Jj(h,p,j,Ly,b),SL(h,j);else if(kae(T,h,p,b,j))j.stopPropagation();else if(SL(h,j),p&4&&-1<Pae.indexOf(h)){for(;T!==null;){var k=im(T);if(k!==null&&xL(k),k=Mj(h,p,b,j),k===null&&Jj(h,p,j,Ly,b),k===T)break;T=k}T!==null&&j.stopPropagation()}else Jj(h,p,j,null,b)}}var Ly=null;function Mj(h,p,b,j){if(Ly=null,h=Xr(j),h=eu(h),h!==null)if(p=Zc(h),p===null)h=null;else if(b=p.tag,b===13){if(h=cL(p),h!==null)return h;h=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;h=null}else p!==h&&(h=null);return Ly=h,null}function NL(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wae()){case Cj:return 1;case mL:return 4;case Ty:case _ae:return 16;case gL:return 536870912;default:return 16}default:return 16}}var $l=null,Dj=null,$y=null;function EL(){if($y)return $y;var h,p=Dj,b=p.length,j,T="value"in $l?$l.value:$l.textContent,k=T.length;for(h=0;h<b&&p[h]===T[h];h++);var L=b-h;for(j=1;j<=L&&p[b-j]===T[k-j];j++);return $y=T.slice(h,1<j?1-j:void 0)}function Fy(h){var p=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&p===13&&(h=13)):h=p,h===10&&(h=13),32<=h||h===13?h:0}function By(){return!0}function CL(){return!1}function ma(h){function p(b,j,T,k,L){this._reactName=b,this._targetInst=T,this.type=j,this.nativeEvent=k,this.target=L,this.currentTarget=null;for(var Q in h)h.hasOwnProperty(Q)&&(b=h[Q],this[Q]=b?b(k):k[Q]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?By:CL,this.isPropagationStopped=CL,this}return B(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=By)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=By)},persist:function(){},isPersistent:By}),p}var Hd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lj=ma(Hd),Xp=B({},Hd,{view:0,detail:0}),Mae=ma(Xp),$j,Fj,Yp,Uy=B({},Xp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uj,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Yp&&(Yp&&h.type==="mousemove"?($j=h.screenX-Yp.screenX,Fj=h.screenY-Yp.screenY):Fj=$j=0,Yp=h),$j)},movementY:function(h){return"movementY"in h?h.movementY:Fj}}),TL=ma(Uy),Dae=B({},Uy,{dataTransfer:0}),Lae=ma(Dae),$ae=B({},Xp,{relatedTarget:0}),Bj=ma($ae),Fae=B({},Hd,{animationName:0,elapsedTime:0,pseudoElement:0}),Bae=ma(Fae),Uae=B({},Hd,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),zae=ma(Uae),qae=B({},Hd,{data:0}),PL=ma(qae),Vae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gae(h){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(h):(h=Wae[h])?!!p[h]:!1}function Uj(){return Gae}var Kae=B({},Xp,{key:function(h){if(h.key){var p=Vae[h.key]||h.key;if(p!=="Unidentified")return p}return h.type==="keypress"?(h=Fy(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Hae[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uj,charCode:function(h){return h.type==="keypress"?Fy(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Fy(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Xae=ma(Kae),Yae=B({},Uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kL=ma(Yae),Qae=B({},Xp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uj}),Jae=ma(Qae),Zae=B({},Hd,{propertyName:0,elapsedTime:0,pseudoElement:0}),eie=ma(Zae),tie=B({},Uy,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),rie=ma(tie),nie=[9,13,27,32],zj=l&&"CompositionEvent"in window,Qp=null;l&&"documentMode"in document&&(Qp=document.documentMode);var sie=l&&"TextEvent"in window&&!Qp,OL=l&&(!zj||Qp&&8<Qp&&11>=Qp),RL=" ",IL=!1;function ML(h,p){switch(h){case"keyup":return nie.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DL(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Wd=!1;function aie(h,p){switch(h){case"compositionend":return DL(p);case"keypress":return p.which!==32?null:(IL=!0,RL);case"textInput":return h=p.data,h===RL&&IL?null:h;default:return null}}function iie(h,p){if(Wd)return h==="compositionend"||!zj&&ML(h,p)?(h=EL(),$y=Dj=$l=null,Wd=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return OL&&p.locale!=="ko"?null:p.data;default:return null}}var oie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LL(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p==="input"?!!oie[h.type]:p==="textarea"}function $L(h,p,b,j){Ay(j),p=Wy(p,"onChange"),0<p.length&&(b=new Lj("onChange","change",null,b,j),h.push({event:b,listeners:p}))}var Jp=null,Zp=null;function lie(h){r$(h,0)}function zy(h){var p=Qd(h);if(ve(p))return h}function cie(h,p){if(h==="change")return p}var FL=!1;if(l){var qj;if(l){var Vj="oninput"in document;if(!Vj){var BL=document.createElement("div");BL.setAttribute("oninput","return;"),Vj=typeof BL.oninput=="function"}qj=Vj}else qj=!1;FL=qj&&(!document.documentMode||9<document.documentMode)}function UL(){Jp&&(Jp.detachEvent("onpropertychange",zL),Zp=Jp=null)}function zL(h){if(h.propertyName==="value"&&zy(Zp)){var p=[];$L(p,Zp,h,Xr(h)),Cy(lie,p)}}function uie(h,p,b){h==="focusin"?(UL(),Jp=p,Zp=b,Jp.attachEvent("onpropertychange",zL)):h==="focusout"&&UL()}function die(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return zy(Zp)}function hie(h,p){if(h==="click")return zy(p)}function fie(h,p){if(h==="input"||h==="change")return zy(p)}function pie(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var fi=typeof Object.is=="function"?Object.is:pie;function em(h,p){if(fi(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var b=Object.keys(h),j=Object.keys(p);if(b.length!==j.length)return!1;for(j=0;j<b.length;j++){var T=b[j];if(!c.call(p,T)||!fi(h[T],p[T]))return!1}return!0}function qL(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function VL(h,p){var b=qL(h);h=0;for(var j;b;){if(b.nodeType===3){if(j=h+b.textContent.length,h<=p&&j>=p)return{node:b,offset:p-h};h=j}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=qL(b)}}function HL(h,p){return h&&p?h===p?!0:h&&h.nodeType===3?!1:p&&p.nodeType===3?HL(h,p.parentNode):"contains"in h?h.contains(p):h.compareDocumentPosition?!!(h.compareDocumentPosition(p)&16):!1:!1}function WL(){for(var h=window,p=Xe();p instanceof h.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)h=p.contentWindow;else break;p=Xe(h.document)}return p}function Hj(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p&&(p==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||p==="textarea"||h.contentEditable==="true")}function mie(h){var p=WL(),b=h.focusedElem,j=h.selectionRange;if(p!==b&&b&&b.ownerDocument&&HL(b.ownerDocument.documentElement,b)){if(j!==null&&Hj(b)){if(p=j.start,h=j.end,h===void 0&&(h=p),"selectionStart"in b)b.selectionStart=p,b.selectionEnd=Math.min(h,b.value.length);else if(h=(p=b.ownerDocument||document)&&p.defaultView||window,h.getSelection){h=h.getSelection();var T=b.textContent.length,k=Math.min(j.start,T);j=j.end===void 0?k:Math.min(j.end,T),!h.extend&&k>j&&(T=j,j=k,k=T),T=VL(b,k);var L=VL(b,j);T&&L&&(h.rangeCount!==1||h.anchorNode!==T.node||h.anchorOffset!==T.offset||h.focusNode!==L.node||h.focusOffset!==L.offset)&&(p=p.createRange(),p.setStart(T.node,T.offset),h.removeAllRanges(),k>j?(h.addRange(p),h.extend(L.node,L.offset)):(p.setEnd(L.node,L.offset),h.addRange(p)))}}for(p=[],h=b;h=h.parentNode;)h.nodeType===1&&p.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<p.length;b++)h=p[b],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var gie=l&&"documentMode"in document&&11>=document.documentMode,Gd=null,Wj=null,tm=null,Gj=!1;function GL(h,p,b){var j=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Gj||Gd==null||Gd!==Xe(j)||(j=Gd,"selectionStart"in j&&Hj(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),tm&&em(tm,j)||(tm=j,j=Wy(Wj,"onSelect"),0<j.length&&(p=new Lj("onSelect","select",null,p,b),h.push({event:p,listeners:j}),p.target=Gd)))}function qy(h,p){var b={};return b[h.toLowerCase()]=p.toLowerCase(),b["Webkit"+h]="webkit"+p,b["Moz"+h]="moz"+p,b}var Kd={animationend:qy("Animation","AnimationEnd"),animationiteration:qy("Animation","AnimationIteration"),animationstart:qy("Animation","AnimationStart"),transitionend:qy("Transition","TransitionEnd")},Kj={},KL={};l&&(KL=document.createElement("div").style,"AnimationEvent"in window||(delete Kd.animationend.animation,delete Kd.animationiteration.animation,delete Kd.animationstart.animation),"TransitionEvent"in window||delete Kd.transitionend.transition);function Vy(h){if(Kj[h])return Kj[h];if(!Kd[h])return h;var p=Kd[h],b;for(b in p)if(p.hasOwnProperty(b)&&b in KL)return Kj[h]=p[b];return h}var XL=Vy("animationend"),YL=Vy("animationiteration"),QL=Vy("animationstart"),JL=Vy("transitionend"),ZL=new Map,e$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fl(h,p){ZL.set(h,p),a(p,[h])}for(var Xj=0;Xj<e$.length;Xj++){var Yj=e$[Xj],vie=Yj.toLowerCase(),yie=Yj[0].toUpperCase()+Yj.slice(1);Fl(vie,"on"+yie)}Fl(XL,"onAnimationEnd"),Fl(YL,"onAnimationIteration"),Fl(QL,"onAnimationStart"),Fl("dblclick","onDoubleClick"),Fl("focusin","onFocus"),Fl("focusout","onBlur"),Fl(JL,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xie=new Set("cancel close invalid load scroll toggle".split(" ").concat(rm));function t$(h,p,b){var j=h.type||"unknown-event";h.currentTarget=b,vae(j,p,void 0,h),h.currentTarget=null}function r$(h,p){p=(p&4)!==0;for(var b=0;b<h.length;b++){var j=h[b],T=j.event;j=j.listeners;e:{var k=void 0;if(p)for(var L=j.length-1;0<=L;L--){var Q=j[L],Z=Q.instance,me=Q.currentTarget;if(Q=Q.listener,Z!==k&&T.isPropagationStopped())break e;t$(T,Q,me),k=Z}else for(L=0;L<j.length;L++){if(Q=j[L],Z=Q.instance,me=Q.currentTarget,Q=Q.listener,Z!==k&&T.isPropagationStopped())break e;t$(T,Q,me),k=Z}}}if(qd)throw h=Ej,qd=!1,Ej=null,h}function Br(h,p){var b=p[sA];b===void 0&&(b=p[sA]=new Set);var j=h+"__bubble";b.has(j)||(n$(p,h,2,!1),b.add(j))}function Qj(h,p,b){var j=0;p&&(j|=4),n$(b,h,j,p)}var Hy="_reactListening"+Math.random().toString(36).slice(2);function nm(h){if(!h[Hy]){h[Hy]=!0,n.forEach(function(b){b!=="selectionchange"&&(xie.has(b)||Qj(b,!1,h),Qj(b,!0,h))});var p=h.nodeType===9?h:h.ownerDocument;p===null||p[Hy]||(p[Hy]=!0,Qj("selectionchange",!1,p))}}function n$(h,p,b,j){switch(NL(p)){case 1:var T=Rae;break;case 4:T=Iae;break;default:T=Ij}b=T.bind(null,p,b,h),T=void 0,!st||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(T=!0),j?T!==void 0?h.addEventListener(p,b,{capture:!0,passive:T}):h.addEventListener(p,b,!0):T!==void 0?h.addEventListener(p,b,{passive:T}):h.addEventListener(p,b,!1)}function Jj(h,p,b,j,T){var k=j;if((p&1)===0&&(p&2)===0&&j!==null)e:for(;;){if(j===null)return;var L=j.tag;if(L===3||L===4){var Q=j.stateNode.containerInfo;if(Q===T||Q.nodeType===8&&Q.parentNode===T)break;if(L===4)for(L=j.return;L!==null;){var Z=L.tag;if((Z===3||Z===4)&&(Z=L.stateNode.containerInfo,Z===T||Z.nodeType===8&&Z.parentNode===T))return;L=L.return}for(;Q!==null;){if(L=eu(Q),L===null)return;if(Z=L.tag,Z===5||Z===6){j=k=L;continue e}Q=Q.parentNode}}j=j.return}Cy(function(){var me=k,Ne=Xr(b),Pe=[];e:{var Ae=ZL.get(h);if(Ae!==void 0){var qe=Lj,Qe=h;switch(h){case"keypress":if(Fy(b)===0)break e;case"keydown":case"keyup":qe=Xae;break;case"focusin":Qe="focus",qe=Bj;break;case"focusout":Qe="blur",qe=Bj;break;case"beforeblur":case"afterblur":qe=Bj;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=TL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=Lae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=Jae;break;case XL:case YL:case QL:qe=Bae;break;case JL:qe=eie;break;case"scroll":qe=Mae;break;case"wheel":qe=rie;break;case"copy":case"cut":case"paste":qe=zae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=kL}var Ze=(p&4)!==0,xn=!Ze&&h==="scroll",he=Ze?Ae!==null?Ae+"Capture":null:Ae;Ze=[];for(var ne=me,fe;ne!==null;){fe=ne;var Me=fe.stateNode;if(fe.tag===5&&Me!==null&&(fe=Me,he!==null&&(Me=te(ne,he),Me!=null&&Ze.push(sm(ne,Me,fe)))),xn)break;ne=ne.return}0<Ze.length&&(Ae=new qe(Ae,Qe,null,b,Ne),Pe.push({event:Ae,listeners:Ze}))}}if((p&7)===0){e:{if(Ae=h==="mouseover"||h==="pointerover",qe=h==="mouseout"||h==="pointerout",Ae&&b!==pa&&(Qe=b.relatedTarget||b.fromElement)&&(eu(Qe)||Qe[Mo]))break e;if((qe||Ae)&&(Ae=Ne.window===Ne?Ne:(Ae=Ne.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,qe?(Qe=b.relatedTarget||b.toElement,qe=me,Qe=Qe?eu(Qe):null,Qe!==null&&(xn=Zc(Qe),Qe!==xn||Qe.tag!==5&&Qe.tag!==6)&&(Qe=null)):(qe=null,Qe=me),qe!==Qe)){if(Ze=TL,Me="onMouseLeave",he="onMouseEnter",ne="mouse",(h==="pointerout"||h==="pointerover")&&(Ze=kL,Me="onPointerLeave",he="onPointerEnter",ne="pointer"),xn=qe==null?Ae:Qd(qe),fe=Qe==null?Ae:Qd(Qe),Ae=new Ze(Me,ne+"leave",qe,b,Ne),Ae.target=xn,Ae.relatedTarget=fe,Me=null,eu(Ne)===me&&(Ze=new Ze(he,ne+"enter",Qe,b,Ne),Ze.target=fe,Ze.relatedTarget=xn,Me=Ze),xn=Me,qe&&Qe)t:{for(Ze=qe,he=Qe,ne=0,fe=Ze;fe;fe=Xd(fe))ne++;for(fe=0,Me=he;Me;Me=Xd(Me))fe++;for(;0<ne-fe;)Ze=Xd(Ze),ne--;for(;0<fe-ne;)he=Xd(he),fe--;for(;ne--;){if(Ze===he||he!==null&&Ze===he.alternate)break t;Ze=Xd(Ze),he=Xd(he)}Ze=null}else Ze=null;qe!==null&&s$(Pe,Ae,qe,Ze,!1),Qe!==null&&xn!==null&&s$(Pe,xn,Qe,Ze,!0)}}e:{if(Ae=me?Qd(me):window,qe=Ae.nodeName&&Ae.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Ae.type==="file")var tt=cie;else if(LL(Ae))if(FL)tt=fie;else{tt=die;var ct=uie}else(qe=Ae.nodeName)&&qe.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(tt=hie);if(tt&&(tt=tt(h,me))){$L(Pe,tt,b,Ne);break e}ct&&ct(h,Ae,me),h==="focusout"&&(ct=Ae._wrapperState)&&ct.controlled&&Ae.type==="number"&&St(Ae,"number",Ae.value)}switch(ct=me?Qd(me):window,h){case"focusin":(LL(ct)||ct.contentEditable==="true")&&(Gd=ct,Wj=me,tm=null);break;case"focusout":tm=Wj=Gd=null;break;case"mousedown":Gj=!0;break;case"contextmenu":case"mouseup":case"dragend":Gj=!1,GL(Pe,b,Ne);break;case"selectionchange":if(gie)break;case"keydown":case"keyup":GL(Pe,b,Ne)}var ut;if(zj)e:{switch(h){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else Wd?ML(h,b)&&(bt="onCompositionEnd"):h==="keydown"&&b.keyCode===229&&(bt="onCompositionStart");bt&&(OL&&b.locale!=="ko"&&(Wd||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Wd&&(ut=EL()):($l=Ne,Dj="value"in $l?$l.value:$l.textContent,Wd=!0)),ct=Wy(me,bt),0<ct.length&&(bt=new PL(bt,h,null,b,Ne),Pe.push({event:bt,listeners:ct}),ut?bt.data=ut:(ut=DL(b),ut!==null&&(bt.data=ut)))),(ut=sie?aie(h,b):iie(h,b))&&(me=Wy(me,"onBeforeInput"),0<me.length&&(Ne=new PL("onBeforeInput","beforeinput",null,b,Ne),Pe.push({event:Ne,listeners:me}),Ne.data=ut))}r$(Pe,p)})}function sm(h,p,b){return{instance:h,listener:p,currentTarget:b}}function Wy(h,p){for(var b=p+"Capture",j=[];h!==null;){var T=h,k=T.stateNode;T.tag===5&&k!==null&&(T=k,k=te(h,b),k!=null&&j.unshift(sm(h,k,T)),k=te(h,p),k!=null&&j.push(sm(h,k,T))),h=h.return}return j}function Xd(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function s$(h,p,b,j,T){for(var k=p._reactName,L=[];b!==null&&b!==j;){var Q=b,Z=Q.alternate,me=Q.stateNode;if(Z!==null&&Z===j)break;Q.tag===5&&me!==null&&(Q=me,T?(Z=te(b,k),Z!=null&&L.unshift(sm(b,Z,Q))):T||(Z=te(b,k),Z!=null&&L.push(sm(b,Z,Q)))),b=b.return}L.length!==0&&h.push({event:p,listeners:L})}var bie=/\r\n?/g,wie=/\u0000|\uFFFD/g;function a$(h){return(typeof h=="string"?h:""+h).replace(bie,`
`).replace(wie,"")}function Gy(h,p,b){if(p=a$(p),a$(h)!==p&&b)throw Error(r(425))}function Ky(){}var Zj=null,eA=null;function tA(h,p){return h==="textarea"||h==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var rA=typeof setTimeout=="function"?setTimeout:void 0,_ie=typeof clearTimeout=="function"?clearTimeout:void 0,i$=typeof Promise=="function"?Promise:void 0,Sie=typeof queueMicrotask=="function"?queueMicrotask:typeof i$<"u"?function(h){return i$.resolve(null).then(h).catch(jie)}:rA;function jie(h){setTimeout(function(){throw h})}function nA(h,p){var b=p,j=0;do{var T=b.nextSibling;if(h.removeChild(b),T&&T.nodeType===8)if(b=T.data,b==="/$"){if(j===0){h.removeChild(T),Kp(p);return}j--}else b!=="$"&&b!=="$?"&&b!=="$!"||j++;b=T}while(b);Kp(p)}function Bl(h){for(;h!=null;h=h.nextSibling){var p=h.nodeType;if(p===1||p===3)break;if(p===8){if(p=h.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return h}function o$(h){h=h.previousSibling;for(var p=0;h;){if(h.nodeType===8){var b=h.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return h;p--}else b==="/$"&&p++}h=h.previousSibling}return null}var Yd=Math.random().toString(36).slice(2),Yi="__reactFiber$"+Yd,am="__reactProps$"+Yd,Mo="__reactContainer$"+Yd,sA="__reactEvents$"+Yd,Aie="__reactListeners$"+Yd,Nie="__reactHandles$"+Yd;function eu(h){var p=h[Yi];if(p)return p;for(var b=h.parentNode;b;){if(p=b[Mo]||b[Yi]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(h=o$(h);h!==null;){if(b=h[Yi])return b;h=o$(h)}return p}h=b,b=h.parentNode}return null}function im(h){return h=h[Yi]||h[Mo],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Qd(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function Xy(h){return h[am]||null}var aA=[],Jd=-1;function Ul(h){return{current:h}}function Ur(h){0>Jd||(h.current=aA[Jd],aA[Jd]=null,Jd--)}function kr(h,p){Jd++,aA[Jd]=h.current,h.current=p}var zl={},ws=Ul(zl),Xs=Ul(!1),tu=zl;function Zd(h,p){var b=h.type.contextTypes;if(!b)return zl;var j=h.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===p)return j.__reactInternalMemoizedMaskedChildContext;var T={},k;for(k in b)T[k]=p[k];return j&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=T),T}function Ys(h){return h=h.childContextTypes,h!=null}function Yy(){Ur(Xs),Ur(ws)}function l$(h,p,b){if(ws.current!==zl)throw Error(r(168));kr(ws,p),kr(Xs,b)}function c$(h,p,b){var j=h.stateNode;if(p=p.childContextTypes,typeof j.getChildContext!="function")return b;j=j.getChildContext();for(var T in j)if(!(T in p))throw Error(r(108,ye(h)||"Unknown",T));return B({},b,j)}function Qy(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||zl,tu=ws.current,kr(ws,h),kr(Xs,Xs.current),!0}function u$(h,p,b){var j=h.stateNode;if(!j)throw Error(r(169));b?(h=c$(h,p,tu),j.__reactInternalMemoizedMergedChildContext=h,Ur(Xs),Ur(ws),kr(ws,h)):Ur(Xs),kr(Xs,b)}var Do=null,Jy=!1,iA=!1;function d$(h){Do===null?Do=[h]:Do.push(h)}function Eie(h){Jy=!0,d$(h)}function ql(){if(!iA&&Do!==null){iA=!0;var h=0,p=wr;try{var b=Do;for(wr=1;h<b.length;h++){var j=b[h];do j=j(!0);while(j!==null)}Do=null,Jy=!1}catch(T){throw Do!==null&&(Do=Do.slice(h+1)),fL(Cj,ql),T}finally{wr=p,iA=!1}}return null}var eh=[],th=0,Zy=null,ex=0,Fa=[],Ba=0,ru=null,Lo=1,$o="";function nu(h,p){eh[th++]=ex,eh[th++]=Zy,Zy=h,ex=p}function h$(h,p,b){Fa[Ba++]=Lo,Fa[Ba++]=$o,Fa[Ba++]=ru,ru=h;var j=Lo;h=$o;var T=32-hi(j)-1;j&=~(1<<T),b+=1;var k=32-hi(p)+T;if(30<k){var L=T-T%5;k=(j&(1<<L)-1).toString(32),j>>=L,T-=L,Lo=1<<32-hi(p)+T|b<<T|j,$o=k+h}else Lo=1<<k|b<<T|j,$o=h}function oA(h){h.return!==null&&(nu(h,1),h$(h,1,0))}function lA(h){for(;h===Zy;)Zy=eh[--th],eh[th]=null,ex=eh[--th],eh[th]=null;for(;h===ru;)ru=Fa[--Ba],Fa[Ba]=null,$o=Fa[--Ba],Fa[Ba]=null,Lo=Fa[--Ba],Fa[Ba]=null}var ga=null,va=null,Vr=!1,pi=null;function f$(h,p){var b=Va(5,null,null,0);b.elementType="DELETED",b.stateNode=p,b.return=h,p=h.deletions,p===null?(h.deletions=[b],h.flags|=16):p.push(b)}function p$(h,p){switch(h.tag){case 5:var b=h.type;return p=p.nodeType!==1||b.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(h.stateNode=p,ga=h,va=Bl(p.firstChild),!0):!1;case 6:return p=h.pendingProps===""||p.nodeType!==3?null:p,p!==null?(h.stateNode=p,ga=h,va=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(b=ru!==null?{id:Lo,overflow:$o}:null,h.memoizedState={dehydrated:p,treeContext:b,retryLane:1073741824},b=Va(18,null,null,0),b.stateNode=p,b.return=h,h.child=b,ga=h,va=null,!0):!1;default:return!1}}function cA(h){return(h.mode&1)!==0&&(h.flags&128)===0}function uA(h){if(Vr){var p=va;if(p){var b=p;if(!p$(h,p)){if(cA(h))throw Error(r(418));p=Bl(b.nextSibling);var j=ga;p&&p$(h,p)?f$(j,b):(h.flags=h.flags&-4097|2,Vr=!1,ga=h)}}else{if(cA(h))throw Error(r(418));h.flags=h.flags&-4097|2,Vr=!1,ga=h}}}function m$(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;ga=h}function tx(h){if(h!==ga)return!1;if(!Vr)return m$(h),Vr=!0,!1;var p;if((p=h.tag!==3)&&!(p=h.tag!==5)&&(p=h.type,p=p!=="head"&&p!=="body"&&!tA(h.type,h.memoizedProps)),p&&(p=va)){if(cA(h))throw g$(),Error(r(418));for(;p;)f$(h,p),p=Bl(p.nextSibling)}if(m$(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,p=0;h;){if(h.nodeType===8){var b=h.data;if(b==="/$"){if(p===0){va=Bl(h.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++}h=h.nextSibling}va=null}}else va=ga?Bl(h.stateNode.nextSibling):null;return!0}function g$(){for(var h=va;h;)h=Bl(h.nextSibling)}function rh(){va=ga=null,Vr=!1}function dA(h){pi===null?pi=[h]:pi.push(h)}var Cie=C.ReactCurrentBatchConfig;function om(h,p,b){if(h=b.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(r(309));var j=b.stateNode}if(!j)throw Error(r(147,h));var T=j,k=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===k?p.ref:(p=function(L){var Q=T.refs;L===null?delete Q[k]:Q[k]=L},p._stringRef=k,p)}if(typeof h!="string")throw Error(r(284));if(!b._owner)throw Error(r(290,h))}return h}function rx(h,p){throw h=Object.prototype.toString.call(p),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function v$(h){var p=h._init;return p(h._payload)}function y$(h){function p(he,ne){if(h){var fe=he.deletions;fe===null?(he.deletions=[ne],he.flags|=16):fe.push(ne)}}function b(he,ne){if(!h)return null;for(;ne!==null;)p(he,ne),ne=ne.sibling;return null}function j(he,ne){for(he=new Map;ne!==null;)ne.key!==null?he.set(ne.key,ne):he.set(ne.index,ne),ne=ne.sibling;return he}function T(he,ne){return he=Ql(he,ne),he.index=0,he.sibling=null,he}function k(he,ne,fe){return he.index=fe,h?(fe=he.alternate,fe!==null?(fe=fe.index,fe<ne?(he.flags|=2,ne):fe):(he.flags|=2,ne)):(he.flags|=1048576,ne)}function L(he){return h&&he.alternate===null&&(he.flags|=2),he}function Q(he,ne,fe,Me){return ne===null||ne.tag!==6?(ne=rN(fe,he.mode,Me),ne.return=he,ne):(ne=T(ne,fe),ne.return=he,ne)}function Z(he,ne,fe,Me){var tt=fe.type;return tt===P?Ne(he,ne,fe.props.children,Me,fe.key):ne!==null&&(ne.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===z&&v$(tt)===ne.type)?(Me=T(ne,fe.props),Me.ref=om(he,ne,fe),Me.return=he,Me):(Me=Nx(fe.type,fe.key,fe.props,null,he.mode,Me),Me.ref=om(he,ne,fe),Me.return=he,Me)}function me(he,ne,fe,Me){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==fe.containerInfo||ne.stateNode.implementation!==fe.implementation?(ne=nN(fe,he.mode,Me),ne.return=he,ne):(ne=T(ne,fe.children||[]),ne.return=he,ne)}function Ne(he,ne,fe,Me,tt){return ne===null||ne.tag!==7?(ne=du(fe,he.mode,Me,tt),ne.return=he,ne):(ne=T(ne,fe),ne.return=he,ne)}function Pe(he,ne,fe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=rN(""+ne,he.mode,fe),ne.return=he,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case S:return fe=Nx(ne.type,ne.key,ne.props,null,he.mode,fe),fe.ref=om(he,null,ne),fe.return=he,fe;case E:return ne=nN(ne,he.mode,fe),ne.return=he,ne;case z:var Me=ne._init;return Pe(he,Me(ne._payload),fe)}if(X(ne)||W(ne))return ne=du(ne,he.mode,fe,null),ne.return=he,ne;rx(he,ne)}return null}function Ae(he,ne,fe,Me){var tt=ne!==null?ne.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return tt!==null?null:Q(he,ne,""+fe,Me);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case S:return fe.key===tt?Z(he,ne,fe,Me):null;case E:return fe.key===tt?me(he,ne,fe,Me):null;case z:return tt=fe._init,Ae(he,ne,tt(fe._payload),Me)}if(X(fe)||W(fe))return tt!==null?null:Ne(he,ne,fe,Me,null);rx(he,fe)}return null}function qe(he,ne,fe,Me,tt){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return he=he.get(fe)||null,Q(ne,he,""+Me,tt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case S:return he=he.get(Me.key===null?fe:Me.key)||null,Z(ne,he,Me,tt);case E:return he=he.get(Me.key===null?fe:Me.key)||null,me(ne,he,Me,tt);case z:var ct=Me._init;return qe(he,ne,fe,ct(Me._payload),tt)}if(X(Me)||W(Me))return he=he.get(fe)||null,Ne(ne,he,Me,tt,null);rx(ne,Me)}return null}function Qe(he,ne,fe,Me){for(var tt=null,ct=null,ut=ne,bt=ne=0,rs=null;ut!==null&&bt<fe.length;bt++){ut.index>bt?(rs=ut,ut=null):rs=ut.sibling;var hr=Ae(he,ut,fe[bt],Me);if(hr===null){ut===null&&(ut=rs);break}h&&ut&&hr.alternate===null&&p(he,ut),ne=k(hr,ne,bt),ct===null?tt=hr:ct.sibling=hr,ct=hr,ut=rs}if(bt===fe.length)return b(he,ut),Vr&&nu(he,bt),tt;if(ut===null){for(;bt<fe.length;bt++)ut=Pe(he,fe[bt],Me),ut!==null&&(ne=k(ut,ne,bt),ct===null?tt=ut:ct.sibling=ut,ct=ut);return Vr&&nu(he,bt),tt}for(ut=j(he,ut);bt<fe.length;bt++)rs=qe(ut,he,bt,fe[bt],Me),rs!==null&&(h&&rs.alternate!==null&&ut.delete(rs.key===null?bt:rs.key),ne=k(rs,ne,bt),ct===null?tt=rs:ct.sibling=rs,ct=rs);return h&&ut.forEach(function(Jl){return p(he,Jl)}),Vr&&nu(he,bt),tt}function Ze(he,ne,fe,Me){var tt=W(fe);if(typeof tt!="function")throw Error(r(150));if(fe=tt.call(fe),fe==null)throw Error(r(151));for(var ct=tt=null,ut=ne,bt=ne=0,rs=null,hr=fe.next();ut!==null&&!hr.done;bt++,hr=fe.next()){ut.index>bt?(rs=ut,ut=null):rs=ut.sibling;var Jl=Ae(he,ut,hr.value,Me);if(Jl===null){ut===null&&(ut=rs);break}h&&ut&&Jl.alternate===null&&p(he,ut),ne=k(Jl,ne,bt),ct===null?tt=Jl:ct.sibling=Jl,ct=Jl,ut=rs}if(hr.done)return b(he,ut),Vr&&nu(he,bt),tt;if(ut===null){for(;!hr.done;bt++,hr=fe.next())hr=Pe(he,hr.value,Me),hr!==null&&(ne=k(hr,ne,bt),ct===null?tt=hr:ct.sibling=hr,ct=hr);return Vr&&nu(he,bt),tt}for(ut=j(he,ut);!hr.done;bt++,hr=fe.next())hr=qe(ut,he,bt,hr.value,Me),hr!==null&&(h&&hr.alternate!==null&&ut.delete(hr.key===null?bt:hr.key),ne=k(hr,ne,bt),ct===null?tt=hr:ct.sibling=hr,ct=hr);return h&&ut.forEach(function(ooe){return p(he,ooe)}),Vr&&nu(he,bt),tt}function xn(he,ne,fe,Me){if(typeof fe=="object"&&fe!==null&&fe.type===P&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case S:e:{for(var tt=fe.key,ct=ne;ct!==null;){if(ct.key===tt){if(tt=fe.type,tt===P){if(ct.tag===7){b(he,ct.sibling),ne=T(ct,fe.props.children),ne.return=he,he=ne;break e}}else if(ct.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===z&&v$(tt)===ct.type){b(he,ct.sibling),ne=T(ct,fe.props),ne.ref=om(he,ct,fe),ne.return=he,he=ne;break e}b(he,ct);break}else p(he,ct);ct=ct.sibling}fe.type===P?(ne=du(fe.props.children,he.mode,Me,fe.key),ne.return=he,he=ne):(Me=Nx(fe.type,fe.key,fe.props,null,he.mode,Me),Me.ref=om(he,ne,fe),Me.return=he,he=Me)}return L(he);case E:e:{for(ct=fe.key;ne!==null;){if(ne.key===ct)if(ne.tag===4&&ne.stateNode.containerInfo===fe.containerInfo&&ne.stateNode.implementation===fe.implementation){b(he,ne.sibling),ne=T(ne,fe.children||[]),ne.return=he,he=ne;break e}else{b(he,ne);break}else p(he,ne);ne=ne.sibling}ne=nN(fe,he.mode,Me),ne.return=he,he=ne}return L(he);case z:return ct=fe._init,xn(he,ne,ct(fe._payload),Me)}if(X(fe))return Qe(he,ne,fe,Me);if(W(fe))return Ze(he,ne,fe,Me);rx(he,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ne!==null&&ne.tag===6?(b(he,ne.sibling),ne=T(ne,fe),ne.return=he,he=ne):(b(he,ne),ne=rN(fe,he.mode,Me),ne.return=he,he=ne),L(he)):b(he,ne)}return xn}var nh=y$(!0),x$=y$(!1),nx=Ul(null),sx=null,sh=null,hA=null;function fA(){hA=sh=sx=null}function pA(h){var p=nx.current;Ur(nx),h._currentValue=p}function mA(h,p,b){for(;h!==null;){var j=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,j!==null&&(j.childLanes|=p)):j!==null&&(j.childLanes&p)!==p&&(j.childLanes|=p),h===b)break;h=h.return}}function ah(h,p){sx=h,hA=sh=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&p)!==0&&(Qs=!0),h.firstContext=null)}function Ua(h){var p=h._currentValue;if(hA!==h)if(h={context:h,memoizedValue:p,next:null},sh===null){if(sx===null)throw Error(r(308));sh=h,sx.dependencies={lanes:0,firstContext:h}}else sh=sh.next=h;return p}var su=null;function gA(h){su===null?su=[h]:su.push(h)}function b$(h,p,b,j){var T=p.interleaved;return T===null?(b.next=b,gA(p)):(b.next=T.next,T.next=b),p.interleaved=b,Fo(h,j)}function Fo(h,p){h.lanes|=p;var b=h.alternate;for(b!==null&&(b.lanes|=p),b=h,h=h.return;h!==null;)h.childLanes|=p,b=h.alternate,b!==null&&(b.childLanes|=p),b=h,h=h.return;return b.tag===3?b.stateNode:null}var Vl=!1;function vA(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w$(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Bo(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function Hl(h,p,b){var j=h.updateQueue;if(j===null)return null;if(j=j.shared,(cr&2)!==0){var T=j.pending;return T===null?p.next=p:(p.next=T.next,T.next=p),j.pending=p,Fo(h,b)}return T=j.interleaved,T===null?(p.next=p,gA(j)):(p.next=T.next,T.next=p),j.interleaved=p,Fo(h,b)}function ax(h,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194240)!==0)){var j=p.lanes;j&=h.pendingLanes,b|=j,p.lanes=b,kj(h,b)}}function _$(h,p){var b=h.updateQueue,j=h.alternate;if(j!==null&&(j=j.updateQueue,b===j)){var T=null,k=null;if(b=b.firstBaseUpdate,b!==null){do{var L={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};k===null?T=k=L:k=k.next=L,b=b.next}while(b!==null);k===null?T=k=p:k=k.next=p}else T=k=p;b={baseState:j.baseState,firstBaseUpdate:T,lastBaseUpdate:k,shared:j.shared,effects:j.effects},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=p:h.next=p,b.lastBaseUpdate=p}function ix(h,p,b,j){var T=h.updateQueue;Vl=!1;var k=T.firstBaseUpdate,L=T.lastBaseUpdate,Q=T.shared.pending;if(Q!==null){T.shared.pending=null;var Z=Q,me=Z.next;Z.next=null,L===null?k=me:L.next=me,L=Z;var Ne=h.alternate;Ne!==null&&(Ne=Ne.updateQueue,Q=Ne.lastBaseUpdate,Q!==L&&(Q===null?Ne.firstBaseUpdate=me:Q.next=me,Ne.lastBaseUpdate=Z))}if(k!==null){var Pe=T.baseState;L=0,Ne=me=Z=null,Q=k;do{var Ae=Q.lane,qe=Q.eventTime;if((j&Ae)===Ae){Ne!==null&&(Ne=Ne.next={eventTime:qe,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Qe=h,Ze=Q;switch(Ae=p,qe=b,Ze.tag){case 1:if(Qe=Ze.payload,typeof Qe=="function"){Pe=Qe.call(qe,Pe,Ae);break e}Pe=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Ze.payload,Ae=typeof Qe=="function"?Qe.call(qe,Pe,Ae):Qe,Ae==null)break e;Pe=B({},Pe,Ae);break e;case 2:Vl=!0}}Q.callback!==null&&Q.lane!==0&&(h.flags|=64,Ae=T.effects,Ae===null?T.effects=[Q]:Ae.push(Q))}else qe={eventTime:qe,lane:Ae,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Ne===null?(me=Ne=qe,Z=Pe):Ne=Ne.next=qe,L|=Ae;if(Q=Q.next,Q===null){if(Q=T.shared.pending,Q===null)break;Ae=Q,Q=Ae.next,Ae.next=null,T.lastBaseUpdate=Ae,T.shared.pending=null}}while(!0);if(Ne===null&&(Z=Pe),T.baseState=Z,T.firstBaseUpdate=me,T.lastBaseUpdate=Ne,p=T.shared.interleaved,p!==null){T=p;do L|=T.lane,T=T.next;while(T!==p)}else k===null&&(T.shared.lanes=0);ou|=L,h.lanes=L,h.memoizedState=Pe}}function S$(h,p,b){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var j=h[p],T=j.callback;if(T!==null){if(j.callback=null,j=b,typeof T!="function")throw Error(r(191,T));T.call(j)}}}var lm={},Qi=Ul(lm),cm=Ul(lm),um=Ul(lm);function au(h){if(h===lm)throw Error(r(174));return h}function yA(h,p){switch(kr(um,p),kr(cm,h),kr(Qi,lm),h=p.nodeType,h){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:mt(null,"");break;default:h=h===8?p.parentNode:p,p=h.namespaceURI||null,h=h.tagName,p=mt(p,h)}Ur(Qi),kr(Qi,p)}function ih(){Ur(Qi),Ur(cm),Ur(um)}function j$(h){au(um.current);var p=au(Qi.current),b=mt(p,h.type);p!==b&&(kr(cm,h),kr(Qi,b))}function xA(h){cm.current===h&&(Ur(Qi),Ur(cm))}var Qr=Ul(0);function ox(h){for(var p=h;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var bA=[];function wA(){for(var h=0;h<bA.length;h++)bA[h]._workInProgressVersionPrimary=null;bA.length=0}var lx=C.ReactCurrentDispatcher,_A=C.ReactCurrentBatchConfig,iu=0,Jr=null,Un=null,es=null,cx=!1,dm=!1,hm=0,Tie=0;function _s(){throw Error(r(321))}function SA(h,p){if(p===null)return!1;for(var b=0;b<p.length&&b<h.length;b++)if(!fi(h[b],p[b]))return!1;return!0}function jA(h,p,b,j,T,k){if(iu=k,Jr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,lx.current=h===null||h.memoizedState===null?Rie:Iie,h=b(j,T),dm){k=0;do{if(dm=!1,hm=0,25<=k)throw Error(r(301));k+=1,es=Un=null,p.updateQueue=null,lx.current=Mie,h=b(j,T)}while(dm)}if(lx.current=hx,p=Un!==null&&Un.next!==null,iu=0,es=Un=Jr=null,cx=!1,p)throw Error(r(300));return h}function AA(){var h=hm!==0;return hm=0,h}function Ji(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?Jr.memoizedState=es=h:es=es.next=h,es}function za(){if(Un===null){var h=Jr.alternate;h=h!==null?h.memoizedState:null}else h=Un.next;var p=es===null?Jr.memoizedState:es.next;if(p!==null)es=p,Un=h;else{if(h===null)throw Error(r(310));Un=h,h={memoizedState:Un.memoizedState,baseState:Un.baseState,baseQueue:Un.baseQueue,queue:Un.queue,next:null},es===null?Jr.memoizedState=es=h:es=es.next=h}return es}function fm(h,p){return typeof p=="function"?p(h):p}function NA(h){var p=za(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=h;var j=Un,T=j.baseQueue,k=b.pending;if(k!==null){if(T!==null){var L=T.next;T.next=k.next,k.next=L}j.baseQueue=T=k,b.pending=null}if(T!==null){k=T.next,j=j.baseState;var Q=L=null,Z=null,me=k;do{var Ne=me.lane;if((iu&Ne)===Ne)Z!==null&&(Z=Z.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),j=me.hasEagerState?me.eagerState:h(j,me.action);else{var Pe={lane:Ne,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};Z===null?(Q=Z=Pe,L=j):Z=Z.next=Pe,Jr.lanes|=Ne,ou|=Ne}me=me.next}while(me!==null&&me!==k);Z===null?L=j:Z.next=Q,fi(j,p.memoizedState)||(Qs=!0),p.memoizedState=j,p.baseState=L,p.baseQueue=Z,b.lastRenderedState=j}if(h=b.interleaved,h!==null){T=h;do k=T.lane,Jr.lanes|=k,ou|=k,T=T.next;while(T!==h)}else T===null&&(b.lanes=0);return[p.memoizedState,b.dispatch]}function EA(h){var p=za(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=h;var j=b.dispatch,T=b.pending,k=p.memoizedState;if(T!==null){b.pending=null;var L=T=T.next;do k=h(k,L.action),L=L.next;while(L!==T);fi(k,p.memoizedState)||(Qs=!0),p.memoizedState=k,p.baseQueue===null&&(p.baseState=k),b.lastRenderedState=k}return[k,j]}function A$(){}function N$(h,p){var b=Jr,j=za(),T=p(),k=!fi(j.memoizedState,T);if(k&&(j.memoizedState=T,Qs=!0),j=j.queue,CA(T$.bind(null,b,j,h),[h]),j.getSnapshot!==p||k||es!==null&&es.memoizedState.tag&1){if(b.flags|=2048,pm(9,C$.bind(null,b,j,T,p),void 0,null),ts===null)throw Error(r(349));(iu&30)!==0||E$(b,p,T)}return T}function E$(h,p,b){h.flags|=16384,h={getSnapshot:p,value:b},p=Jr.updateQueue,p===null?(p={lastEffect:null,stores:null},Jr.updateQueue=p,p.stores=[h]):(b=p.stores,b===null?p.stores=[h]:b.push(h))}function C$(h,p,b,j){p.value=b,p.getSnapshot=j,P$(p)&&k$(h)}function T$(h,p,b){return b(function(){P$(p)&&k$(h)})}function P$(h){var p=h.getSnapshot;h=h.value;try{var b=p();return!fi(h,b)}catch{return!0}}function k$(h){var p=Fo(h,1);p!==null&&yi(p,h,1,-1)}function O$(h){var p=Ji();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fm,lastRenderedState:h},p.queue=h,h=h.dispatch=Oie.bind(null,Jr,h),[p.memoizedState,h]}function pm(h,p,b,j){return h={tag:h,create:p,destroy:b,deps:j,next:null},p=Jr.updateQueue,p===null?(p={lastEffect:null,stores:null},Jr.updateQueue=p,p.lastEffect=h.next=h):(b=p.lastEffect,b===null?p.lastEffect=h.next=h:(j=b.next,b.next=h,h.next=j,p.lastEffect=h)),h}function R$(){return za().memoizedState}function ux(h,p,b,j){var T=Ji();Jr.flags|=h,T.memoizedState=pm(1|p,b,void 0,j===void 0?null:j)}function dx(h,p,b,j){var T=za();j=j===void 0?null:j;var k=void 0;if(Un!==null){var L=Un.memoizedState;if(k=L.destroy,j!==null&&SA(j,L.deps)){T.memoizedState=pm(p,b,k,j);return}}Jr.flags|=h,T.memoizedState=pm(1|p,b,k,j)}function I$(h,p){return ux(8390656,8,h,p)}function CA(h,p){return dx(2048,8,h,p)}function M$(h,p){return dx(4,2,h,p)}function D$(h,p){return dx(4,4,h,p)}function L$(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function $$(h,p,b){return b=b!=null?b.concat([h]):null,dx(4,4,L$.bind(null,p,h),b)}function TA(){}function F$(h,p){var b=za();p=p===void 0?null:p;var j=b.memoizedState;return j!==null&&p!==null&&SA(p,j[1])?j[0]:(b.memoizedState=[h,p],h)}function B$(h,p){var b=za();p=p===void 0?null:p;var j=b.memoizedState;return j!==null&&p!==null&&SA(p,j[1])?j[0]:(h=h(),b.memoizedState=[h,p],h)}function U$(h,p,b){return(iu&21)===0?(h.baseState&&(h.baseState=!1,Qs=!0),h.memoizedState=b):(fi(b,p)||(b=vL(),Jr.lanes|=b,ou|=b,h.baseState=!0),p)}function Pie(h,p){var b=wr;wr=b!==0&&4>b?b:4,h(!0);var j=_A.transition;_A.transition={};try{h(!1),p()}finally{wr=b,_A.transition=j}}function z$(){return za().memoizedState}function kie(h,p,b){var j=Xl(h);if(b={lane:j,action:b,hasEagerState:!1,eagerState:null,next:null},q$(h))V$(p,b);else if(b=b$(h,p,b,j),b!==null){var T=Ts();yi(b,h,j,T),H$(b,p,j)}}function Oie(h,p,b){var j=Xl(h),T={lane:j,action:b,hasEagerState:!1,eagerState:null,next:null};if(q$(h))V$(p,T);else{var k=h.alternate;if(h.lanes===0&&(k===null||k.lanes===0)&&(k=p.lastRenderedReducer,k!==null))try{var L=p.lastRenderedState,Q=k(L,b);if(T.hasEagerState=!0,T.eagerState=Q,fi(Q,L)){var Z=p.interleaved;Z===null?(T.next=T,gA(p)):(T.next=Z.next,Z.next=T),p.interleaved=T;return}}catch{}finally{}b=b$(h,p,T,j),b!==null&&(T=Ts(),yi(b,h,j,T),H$(b,p,j))}}function q$(h){var p=h.alternate;return h===Jr||p!==null&&p===Jr}function V$(h,p){dm=cx=!0;var b=h.pending;b===null?p.next=p:(p.next=b.next,b.next=p),h.pending=p}function H$(h,p,b){if((b&4194240)!==0){var j=p.lanes;j&=h.pendingLanes,b|=j,p.lanes=b,kj(h,b)}}var hx={readContext:Ua,useCallback:_s,useContext:_s,useEffect:_s,useImperativeHandle:_s,useInsertionEffect:_s,useLayoutEffect:_s,useMemo:_s,useReducer:_s,useRef:_s,useState:_s,useDebugValue:_s,useDeferredValue:_s,useTransition:_s,useMutableSource:_s,useSyncExternalStore:_s,useId:_s,unstable_isNewReconciler:!1},Rie={readContext:Ua,useCallback:function(h,p){return Ji().memoizedState=[h,p===void 0?null:p],h},useContext:Ua,useEffect:I$,useImperativeHandle:function(h,p,b){return b=b!=null?b.concat([h]):null,ux(4194308,4,L$.bind(null,p,h),b)},useLayoutEffect:function(h,p){return ux(4194308,4,h,p)},useInsertionEffect:function(h,p){return ux(4,2,h,p)},useMemo:function(h,p){var b=Ji();return p=p===void 0?null:p,h=h(),b.memoizedState=[h,p],h},useReducer:function(h,p,b){var j=Ji();return p=b!==void 0?b(p):p,j.memoizedState=j.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},j.queue=h,h=h.dispatch=kie.bind(null,Jr,h),[j.memoizedState,h]},useRef:function(h){var p=Ji();return h={current:h},p.memoizedState=h},useState:O$,useDebugValue:TA,useDeferredValue:function(h){return Ji().memoizedState=h},useTransition:function(){var h=O$(!1),p=h[0];return h=Pie.bind(null,h[1]),Ji().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,b){var j=Jr,T=Ji();if(Vr){if(b===void 0)throw Error(r(407));b=b()}else{if(b=p(),ts===null)throw Error(r(349));(iu&30)!==0||E$(j,p,b)}T.memoizedState=b;var k={value:b,getSnapshot:p};return T.queue=k,I$(T$.bind(null,j,k,h),[h]),j.flags|=2048,pm(9,C$.bind(null,j,k,b,p),void 0,null),b},useId:function(){var h=Ji(),p=ts.identifierPrefix;if(Vr){var b=$o,j=Lo;b=(j&~(1<<32-hi(j)-1)).toString(32)+b,p=":"+p+"R"+b,b=hm++,0<b&&(p+="H"+b.toString(32)),p+=":"}else b=Tie++,p=":"+p+"r"+b.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},Iie={readContext:Ua,useCallback:F$,useContext:Ua,useEffect:CA,useImperativeHandle:$$,useInsertionEffect:M$,useLayoutEffect:D$,useMemo:B$,useReducer:NA,useRef:R$,useState:function(){return NA(fm)},useDebugValue:TA,useDeferredValue:function(h){var p=za();return U$(p,Un.memoizedState,h)},useTransition:function(){var h=NA(fm)[0],p=za().memoizedState;return[h,p]},useMutableSource:A$,useSyncExternalStore:N$,useId:z$,unstable_isNewReconciler:!1},Mie={readContext:Ua,useCallback:F$,useContext:Ua,useEffect:CA,useImperativeHandle:$$,useInsertionEffect:M$,useLayoutEffect:D$,useMemo:B$,useReducer:EA,useRef:R$,useState:function(){return EA(fm)},useDebugValue:TA,useDeferredValue:function(h){var p=za();return Un===null?p.memoizedState=h:U$(p,Un.memoizedState,h)},useTransition:function(){var h=EA(fm)[0],p=za().memoizedState;return[h,p]},useMutableSource:A$,useSyncExternalStore:N$,useId:z$,unstable_isNewReconciler:!1};function mi(h,p){if(h&&h.defaultProps){p=B({},p),h=h.defaultProps;for(var b in h)p[b]===void 0&&(p[b]=h[b]);return p}return p}function PA(h,p,b,j){p=h.memoizedState,b=b(j,p),b=b==null?p:B({},p,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var fx={isMounted:function(h){return(h=h._reactInternals)?Zc(h)===h:!1},enqueueSetState:function(h,p,b){h=h._reactInternals;var j=Ts(),T=Xl(h),k=Bo(j,T);k.payload=p,b!=null&&(k.callback=b),p=Hl(h,k,T),p!==null&&(yi(p,h,T,j),ax(p,h,T))},enqueueReplaceState:function(h,p,b){h=h._reactInternals;var j=Ts(),T=Xl(h),k=Bo(j,T);k.tag=1,k.payload=p,b!=null&&(k.callback=b),p=Hl(h,k,T),p!==null&&(yi(p,h,T,j),ax(p,h,T))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var b=Ts(),j=Xl(h),T=Bo(b,j);T.tag=2,p!=null&&(T.callback=p),p=Hl(h,T,j),p!==null&&(yi(p,h,j,b),ax(p,h,j))}};function W$(h,p,b,j,T,k,L){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(j,k,L):p.prototype&&p.prototype.isPureReactComponent?!em(b,j)||!em(T,k):!0}function G$(h,p,b){var j=!1,T=zl,k=p.contextType;return typeof k=="object"&&k!==null?k=Ua(k):(T=Ys(p)?tu:ws.current,j=p.contextTypes,k=(j=j!=null)?Zd(h,T):zl),p=new p(b,k),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=fx,h.stateNode=p,p._reactInternals=h,j&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=T,h.__reactInternalMemoizedMaskedChildContext=k),p}function K$(h,p,b,j){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,j),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,j),p.state!==h&&fx.enqueueReplaceState(p,p.state,null)}function kA(h,p,b,j){var T=h.stateNode;T.props=b,T.state=h.memoizedState,T.refs={},vA(h);var k=p.contextType;typeof k=="object"&&k!==null?T.context=Ua(k):(k=Ys(p)?tu:ws.current,T.context=Zd(h,k)),T.state=h.memoizedState,k=p.getDerivedStateFromProps,typeof k=="function"&&(PA(h,p,k,b),T.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(p=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),p!==T.state&&fx.enqueueReplaceState(T,T.state,null),ix(h,b,T,j),T.state=h.memoizedState),typeof T.componentDidMount=="function"&&(h.flags|=4194308)}function oh(h,p){try{var b="",j=p;do b+=J(j),j=j.return;while(j);var T=b}catch(k){T=`
Error generating stack: `+k.message+`
`+k.stack}return{value:h,source:p,stack:T,digest:null}}function OA(h,p,b){return{value:h,source:null,stack:b??null,digest:p??null}}function RA(h,p){try{console.error(p.value)}catch(b){setTimeout(function(){throw b})}}var Die=typeof WeakMap=="function"?WeakMap:Map;function X$(h,p,b){b=Bo(-1,b),b.tag=3,b.payload={element:null};var j=p.value;return b.callback=function(){bx||(bx=!0,KA=j),RA(h,p)},b}function Y$(h,p,b){b=Bo(-1,b),b.tag=3;var j=h.type.getDerivedStateFromError;if(typeof j=="function"){var T=p.value;b.payload=function(){return j(T)},b.callback=function(){RA(h,p)}}var k=h.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(b.callback=function(){RA(h,p),typeof j!="function"&&(Gl===null?Gl=new Set([this]):Gl.add(this));var L=p.stack;this.componentDidCatch(p.value,{componentStack:L!==null?L:""})}),b}function Q$(h,p,b){var j=h.pingCache;if(j===null){j=h.pingCache=new Die;var T=new Set;j.set(p,T)}else T=j.get(p),T===void 0&&(T=new Set,j.set(p,T));T.has(b)||(T.add(b),h=Yie.bind(null,h,p,b),p.then(h,h))}function J$(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function Z$(h,p,b,j,T){return(h.mode&1)===0?(h===p?h.flags|=65536:(h.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(p=Bo(-1,1),p.tag=2,Hl(b,p,1))),b.lanes|=1),h):(h.flags|=65536,h.lanes=T,h)}var Lie=C.ReactCurrentOwner,Qs=!1;function Cs(h,p,b,j){p.child=h===null?x$(p,null,b,j):nh(p,h.child,b,j)}function eF(h,p,b,j,T){b=b.render;var k=p.ref;return ah(p,T),j=jA(h,p,b,j,k,T),b=AA(),h!==null&&!Qs?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~T,Uo(h,p,T)):(Vr&&b&&oA(p),p.flags|=1,Cs(h,p,j,T),p.child)}function tF(h,p,b,j,T){if(h===null){var k=b.type;return typeof k=="function"&&!tN(k)&&k.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(p.tag=15,p.type=k,rF(h,p,k,j,T)):(h=Nx(b.type,null,j,p,p.mode,T),h.ref=p.ref,h.return=p,p.child=h)}if(k=h.child,(h.lanes&T)===0){var L=k.memoizedProps;if(b=b.compare,b=b!==null?b:em,b(L,j)&&h.ref===p.ref)return Uo(h,p,T)}return p.flags|=1,h=Ql(k,j),h.ref=p.ref,h.return=p,p.child=h}function rF(h,p,b,j,T){if(h!==null){var k=h.memoizedProps;if(em(k,j)&&h.ref===p.ref)if(Qs=!1,p.pendingProps=j=k,(h.lanes&T)!==0)(h.flags&131072)!==0&&(Qs=!0);else return p.lanes=h.lanes,Uo(h,p,T)}return IA(h,p,b,j,T)}function nF(h,p,b){var j=p.pendingProps,T=j.children,k=h!==null?h.memoizedState:null;if(j.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(ch,ya),ya|=b;else{if((b&1073741824)===0)return h=k!==null?k.baseLanes|b:b,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null,transitions:null},p.updateQueue=null,kr(ch,ya),ya|=h,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=k!==null?k.baseLanes:b,kr(ch,ya),ya|=j}else k!==null?(j=k.baseLanes|b,p.memoizedState=null):j=b,kr(ch,ya),ya|=j;return Cs(h,p,T,b),p.child}function sF(h,p){var b=p.ref;(h===null&&b!==null||h!==null&&h.ref!==b)&&(p.flags|=512,p.flags|=2097152)}function IA(h,p,b,j,T){var k=Ys(b)?tu:ws.current;return k=Zd(p,k),ah(p,T),b=jA(h,p,b,j,k,T),j=AA(),h!==null&&!Qs?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~T,Uo(h,p,T)):(Vr&&j&&oA(p),p.flags|=1,Cs(h,p,b,T),p.child)}function aF(h,p,b,j,T){if(Ys(b)){var k=!0;Qy(p)}else k=!1;if(ah(p,T),p.stateNode===null)mx(h,p),G$(p,b,j),kA(p,b,j,T),j=!0;else if(h===null){var L=p.stateNode,Q=p.memoizedProps;L.props=Q;var Z=L.context,me=b.contextType;typeof me=="object"&&me!==null?me=Ua(me):(me=Ys(b)?tu:ws.current,me=Zd(p,me));var Ne=b.getDerivedStateFromProps,Pe=typeof Ne=="function"||typeof L.getSnapshotBeforeUpdate=="function";Pe||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Q!==j||Z!==me)&&K$(p,L,j,me),Vl=!1;var Ae=p.memoizedState;L.state=Ae,ix(p,j,L,T),Z=p.memoizedState,Q!==j||Ae!==Z||Xs.current||Vl?(typeof Ne=="function"&&(PA(p,b,Ne,j),Z=p.memoizedState),(Q=Vl||W$(p,b,Q,j,Ae,Z,me))?(Pe||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(p.flags|=4194308)):(typeof L.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=j,p.memoizedState=Z),L.props=j,L.state=Z,L.context=me,j=Q):(typeof L.componentDidMount=="function"&&(p.flags|=4194308),j=!1)}else{L=p.stateNode,w$(h,p),Q=p.memoizedProps,me=p.type===p.elementType?Q:mi(p.type,Q),L.props=me,Pe=p.pendingProps,Ae=L.context,Z=b.contextType,typeof Z=="object"&&Z!==null?Z=Ua(Z):(Z=Ys(b)?tu:ws.current,Z=Zd(p,Z));var qe=b.getDerivedStateFromProps;(Ne=typeof qe=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Q!==Pe||Ae!==Z)&&K$(p,L,j,Z),Vl=!1,Ae=p.memoizedState,L.state=Ae,ix(p,j,L,T);var Qe=p.memoizedState;Q!==Pe||Ae!==Qe||Xs.current||Vl?(typeof qe=="function"&&(PA(p,b,qe,j),Qe=p.memoizedState),(me=Vl||W$(p,b,me,j,Ae,Qe,Z)||!1)?(Ne||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(j,Qe,Z),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(j,Qe,Z)),typeof L.componentDidUpdate=="function"&&(p.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof L.componentDidUpdate!="function"||Q===h.memoizedProps&&Ae===h.memoizedState||(p.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Q===h.memoizedProps&&Ae===h.memoizedState||(p.flags|=1024),p.memoizedProps=j,p.memoizedState=Qe),L.props=j,L.state=Qe,L.context=Z,j=me):(typeof L.componentDidUpdate!="function"||Q===h.memoizedProps&&Ae===h.memoizedState||(p.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Q===h.memoizedProps&&Ae===h.memoizedState||(p.flags|=1024),j=!1)}return MA(h,p,b,j,k,T)}function MA(h,p,b,j,T,k){sF(h,p);var L=(p.flags&128)!==0;if(!j&&!L)return T&&u$(p,b,!1),Uo(h,p,k);j=p.stateNode,Lie.current=p;var Q=L&&typeof b.getDerivedStateFromError!="function"?null:j.render();return p.flags|=1,h!==null&&L?(p.child=nh(p,h.child,null,k),p.child=nh(p,null,Q,k)):Cs(h,p,Q,k),p.memoizedState=j.state,T&&u$(p,b,!0),p.child}function iF(h){var p=h.stateNode;p.pendingContext?l$(h,p.pendingContext,p.pendingContext!==p.context):p.context&&l$(h,p.context,!1),yA(h,p.containerInfo)}function oF(h,p,b,j,T){return rh(),dA(T),p.flags|=256,Cs(h,p,b,j),p.child}var DA={dehydrated:null,treeContext:null,retryLane:0};function LA(h){return{baseLanes:h,cachePool:null,transitions:null}}function lF(h,p,b){var j=p.pendingProps,T=Qr.current,k=!1,L=(p.flags&128)!==0,Q;if((Q=L)||(Q=h!==null&&h.memoizedState===null?!1:(T&2)!==0),Q?(k=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(T|=1),kr(Qr,T&1),h===null)return uA(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((p.mode&1)===0?p.lanes=1:h.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(L=j.children,h=j.fallback,k?(j=p.mode,k=p.child,L={mode:"hidden",children:L},(j&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=L):k=Ex(L,j,0,null),h=du(h,j,b,null),k.return=p,h.return=p,k.sibling=h,p.child=k,p.child.memoizedState=LA(b),p.memoizedState=DA,h):$A(p,L));if(T=h.memoizedState,T!==null&&(Q=T.dehydrated,Q!==null))return $ie(h,p,L,j,Q,T,b);if(k){k=j.fallback,L=p.mode,T=h.child,Q=T.sibling;var Z={mode:"hidden",children:j.children};return(L&1)===0&&p.child!==T?(j=p.child,j.childLanes=0,j.pendingProps=Z,p.deletions=null):(j=Ql(T,Z),j.subtreeFlags=T.subtreeFlags&14680064),Q!==null?k=Ql(Q,k):(k=du(k,L,b,null),k.flags|=2),k.return=p,j.return=p,j.sibling=k,p.child=j,j=k,k=p.child,L=h.child.memoizedState,L=L===null?LA(b):{baseLanes:L.baseLanes|b,cachePool:null,transitions:L.transitions},k.memoizedState=L,k.childLanes=h.childLanes&~b,p.memoizedState=DA,j}return k=h.child,h=k.sibling,j=Ql(k,{mode:"visible",children:j.children}),(p.mode&1)===0&&(j.lanes=b),j.return=p,j.sibling=null,h!==null&&(b=p.deletions,b===null?(p.deletions=[h],p.flags|=16):b.push(h)),p.child=j,p.memoizedState=null,j}function $A(h,p){return p=Ex({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function px(h,p,b,j){return j!==null&&dA(j),nh(p,h.child,null,b),h=$A(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function $ie(h,p,b,j,T,k,L){if(b)return p.flags&256?(p.flags&=-257,j=OA(Error(r(422))),px(h,p,L,j)):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(k=j.fallback,T=p.mode,j=Ex({mode:"visible",children:j.children},T,0,null),k=du(k,T,L,null),k.flags|=2,j.return=p,k.return=p,j.sibling=k,p.child=j,(p.mode&1)!==0&&nh(p,h.child,null,L),p.child.memoizedState=LA(L),p.memoizedState=DA,k);if((p.mode&1)===0)return px(h,p,L,null);if(T.data==="$!"){if(j=T.nextSibling&&T.nextSibling.dataset,j)var Q=j.dgst;return j=Q,k=Error(r(419)),j=OA(k,j,void 0),px(h,p,L,j)}if(Q=(L&h.childLanes)!==0,Qs||Q){if(j=ts,j!==null){switch(L&-L){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(j.suspendedLanes|L))!==0?0:T,T!==0&&T!==k.retryLane&&(k.retryLane=T,Fo(h,T),yi(j,h,T,-1))}return eN(),j=OA(Error(r(421))),px(h,p,L,j)}return T.data==="$?"?(p.flags|=128,p.child=h.child,p=Qie.bind(null,h),T._reactRetry=p,null):(h=k.treeContext,va=Bl(T.nextSibling),ga=p,Vr=!0,pi=null,h!==null&&(Fa[Ba++]=Lo,Fa[Ba++]=$o,Fa[Ba++]=ru,Lo=h.id,$o=h.overflow,ru=p),p=$A(p,j.children),p.flags|=4096,p)}function cF(h,p,b){h.lanes|=p;var j=h.alternate;j!==null&&(j.lanes|=p),mA(h.return,p,b)}function FA(h,p,b,j,T){var k=h.memoizedState;k===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:j,tail:b,tailMode:T}:(k.isBackwards=p,k.rendering=null,k.renderingStartTime=0,k.last=j,k.tail=b,k.tailMode=T)}function uF(h,p,b){var j=p.pendingProps,T=j.revealOrder,k=j.tail;if(Cs(h,p,j.children,b),j=Qr.current,(j&2)!==0)j=j&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&cF(h,b,p);else if(h.tag===19)cF(h,b,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}j&=1}if(kr(Qr,j),(p.mode&1)===0)p.memoizedState=null;else switch(T){case"forwards":for(b=p.child,T=null;b!==null;)h=b.alternate,h!==null&&ox(h)===null&&(T=b),b=b.sibling;b=T,b===null?(T=p.child,p.child=null):(T=b.sibling,b.sibling=null),FA(p,!1,T,b,k);break;case"backwards":for(b=null,T=p.child,p.child=null;T!==null;){if(h=T.alternate,h!==null&&ox(h)===null){p.child=T;break}h=T.sibling,T.sibling=b,b=T,T=h}FA(p,!0,b,null,k);break;case"together":FA(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function mx(h,p){(p.mode&1)===0&&h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2)}function Uo(h,p,b){if(h!==null&&(p.dependencies=h.dependencies),ou|=p.lanes,(b&p.childLanes)===0)return null;if(h!==null&&p.child!==h.child)throw Error(r(153));if(p.child!==null){for(h=p.child,b=Ql(h,h.pendingProps),p.child=b,b.return=p;h.sibling!==null;)h=h.sibling,b=b.sibling=Ql(h,h.pendingProps),b.return=p;b.sibling=null}return p.child}function Fie(h,p,b){switch(p.tag){case 3:iF(p),rh();break;case 5:j$(p);break;case 1:Ys(p.type)&&Qy(p);break;case 4:yA(p,p.stateNode.containerInfo);break;case 10:var j=p.type._context,T=p.memoizedProps.value;kr(nx,j._currentValue),j._currentValue=T;break;case 13:if(j=p.memoizedState,j!==null)return j.dehydrated!==null?(kr(Qr,Qr.current&1),p.flags|=128,null):(b&p.child.childLanes)!==0?lF(h,p,b):(kr(Qr,Qr.current&1),h=Uo(h,p,b),h!==null?h.sibling:null);kr(Qr,Qr.current&1);break;case 19:if(j=(b&p.childLanes)!==0,(h.flags&128)!==0){if(j)return uF(h,p,b);p.flags|=128}if(T=p.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),kr(Qr,Qr.current),j)break;return null;case 22:case 23:return p.lanes=0,nF(h,p,b)}return Uo(h,p,b)}var dF,BA,hF,fF;dF=function(h,p){for(var b=p.child;b!==null;){if(b.tag===5||b.tag===6)h.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},BA=function(){},hF=function(h,p,b,j){var T=h.memoizedProps;if(T!==j){h=p.stateNode,au(Qi.current);var k=null;switch(b){case"input":T=$e(h,T),j=$e(h,j),k=[];break;case"select":T=B({},T,{value:void 0}),j=B({},j,{value:void 0}),k=[];break;case"textarea":T=ce(h,T),j=ce(h,j),k=[];break;default:typeof T.onClick!="function"&&typeof j.onClick=="function"&&(h.onclick=Ky)}Gs(b,j);var L;b=null;for(me in T)if(!j.hasOwnProperty(me)&&T.hasOwnProperty(me)&&T[me]!=null)if(me==="style"){var Q=T[me];for(L in Q)Q.hasOwnProperty(L)&&(b||(b={}),b[L]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(s.hasOwnProperty(me)?k||(k=[]):(k=k||[]).push(me,null));for(me in j){var Z=j[me];if(Q=T?.[me],j.hasOwnProperty(me)&&Z!==Q&&(Z!=null||Q!=null))if(me==="style")if(Q){for(L in Q)!Q.hasOwnProperty(L)||Z&&Z.hasOwnProperty(L)||(b||(b={}),b[L]="");for(L in Z)Z.hasOwnProperty(L)&&Q[L]!==Z[L]&&(b||(b={}),b[L]=Z[L])}else b||(k||(k=[]),k.push(me,b)),b=Z;else me==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Q=Q?Q.__html:void 0,Z!=null&&Q!==Z&&(k=k||[]).push(me,Z)):me==="children"?typeof Z!="string"&&typeof Z!="number"||(k=k||[]).push(me,""+Z):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(s.hasOwnProperty(me)?(Z!=null&&me==="onScroll"&&Br("scroll",h),k||Q===Z||(k=[])):(k=k||[]).push(me,Z))}b&&(k=k||[]).push("style",b);var me=k;(p.updateQueue=me)&&(p.flags|=4)}},fF=function(h,p,b,j){b!==j&&(p.flags|=4)};function mm(h,p){if(!Vr)switch(h.tailMode){case"hidden":p=h.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var j=null;b!==null;)b.alternate!==null&&(j=b),b=b.sibling;j===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:j.sibling=null}}function Ss(h){var p=h.alternate!==null&&h.alternate.child===h.child,b=0,j=0;if(p)for(var T=h.child;T!==null;)b|=T.lanes|T.childLanes,j|=T.subtreeFlags&14680064,j|=T.flags&14680064,T.return=h,T=T.sibling;else for(T=h.child;T!==null;)b|=T.lanes|T.childLanes,j|=T.subtreeFlags,j|=T.flags,T.return=h,T=T.sibling;return h.subtreeFlags|=j,h.childLanes=b,p}function Bie(h,p,b){var j=p.pendingProps;switch(lA(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ss(p),null;case 1:return Ys(p.type)&&Yy(),Ss(p),null;case 3:return j=p.stateNode,ih(),Ur(Xs),Ur(ws),wA(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(h===null||h.child===null)&&(tx(p)?p.flags|=4:h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,pi!==null&&(QA(pi),pi=null))),BA(h,p),Ss(p),null;case 5:xA(p);var T=au(um.current);if(b=p.type,h!==null&&p.stateNode!=null)hF(h,p,b,j,T),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!j){if(p.stateNode===null)throw Error(r(166));return Ss(p),null}if(h=au(Qi.current),tx(p)){j=p.stateNode,b=p.type;var k=p.memoizedProps;switch(j[Yi]=p,j[am]=k,h=(p.mode&1)!==0,b){case"dialog":Br("cancel",j),Br("close",j);break;case"iframe":case"object":case"embed":Br("load",j);break;case"video":case"audio":for(T=0;T<rm.length;T++)Br(rm[T],j);break;case"source":Br("error",j);break;case"img":case"image":case"link":Br("error",j),Br("load",j);break;case"details":Br("toggle",j);break;case"input":at(j,k),Br("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!k.multiple},Br("invalid",j);break;case"textarea":Ce(j,k),Br("invalid",j)}Gs(b,k),T=null;for(var L in k)if(k.hasOwnProperty(L)){var Q=k[L];L==="children"?typeof Q=="string"?j.textContent!==Q&&(k.suppressHydrationWarning!==!0&&Gy(j.textContent,Q,h),T=["children",Q]):typeof Q=="number"&&j.textContent!==""+Q&&(k.suppressHydrationWarning!==!0&&Gy(j.textContent,Q,h),T=["children",""+Q]):s.hasOwnProperty(L)&&Q!=null&&L==="onScroll"&&Br("scroll",j)}switch(b){case"input":Oe(j),_e(j,k,!0);break;case"textarea":Oe(j),we(j);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(j.onclick=Ky)}j=T,p.updateQueue=j,j!==null&&(p.flags|=4)}else{L=T.nodeType===9?T:T.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Ue(b)),h==="http://www.w3.org/1999/xhtml"?b==="script"?(h=L.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof j.is=="string"?h=L.createElement(b,{is:j.is}):(h=L.createElement(b),b==="select"&&(L=h,j.multiple?L.multiple=!0:j.size&&(L.size=j.size))):h=L.createElementNS(h,b),h[Yi]=p,h[am]=j,dF(h,p,!1,!1),p.stateNode=h;e:{switch(L=vn(b,j),b){case"dialog":Br("cancel",h),Br("close",h),T=j;break;case"iframe":case"object":case"embed":Br("load",h),T=j;break;case"video":case"audio":for(T=0;T<rm.length;T++)Br(rm[T],h);T=j;break;case"source":Br("error",h),T=j;break;case"img":case"image":case"link":Br("error",h),Br("load",h),T=j;break;case"details":Br("toggle",h),T=j;break;case"input":at(h,j),T=$e(h,j),Br("invalid",h);break;case"option":T=j;break;case"select":h._wrapperState={wasMultiple:!!j.multiple},T=B({},j,{value:void 0}),Br("invalid",h);break;case"textarea":Ce(h,j),T=ce(h,j),Br("invalid",h);break;default:T=j}Gs(b,T),Q=T;for(k in Q)if(Q.hasOwnProperty(k)){var Z=Q[k];k==="style"?Zn(h,Z):k==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&ge(h,Z)):k==="children"?typeof Z=="string"?(b!=="textarea"||Z!=="")&&er(h,Z):typeof Z=="number"&&er(h,""+Z):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(s.hasOwnProperty(k)?Z!=null&&k==="onScroll"&&Br("scroll",h):Z!=null&&A(h,k,Z,L))}switch(b){case"input":Oe(h),_e(h,j,!1);break;case"textarea":Oe(h),we(h);break;case"option":j.value!=null&&h.setAttribute("value",""+je(j.value));break;case"select":h.multiple=!!j.multiple,k=j.value,k!=null?ae(h,!!j.multiple,k,!1):j.defaultValue!=null&&ae(h,!!j.multiple,j.defaultValue,!0);break;default:typeof T.onClick=="function"&&(h.onclick=Ky)}switch(b){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Ss(p),null;case 6:if(h&&p.stateNode!=null)fF(h,p,h.memoizedProps,j);else{if(typeof j!="string"&&p.stateNode===null)throw Error(r(166));if(b=au(um.current),au(Qi.current),tx(p)){if(j=p.stateNode,b=p.memoizedProps,j[Yi]=p,(k=j.nodeValue!==b)&&(h=ga,h!==null))switch(h.tag){case 3:Gy(j.nodeValue,b,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Gy(j.nodeValue,b,(h.mode&1)!==0)}k&&(p.flags|=4)}else j=(b.nodeType===9?b:b.ownerDocument).createTextNode(j),j[Yi]=p,p.stateNode=j}return Ss(p),null;case 13:if(Ur(Qr),j=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Vr&&va!==null&&(p.mode&1)!==0&&(p.flags&128)===0)g$(),rh(),p.flags|=98560,k=!1;else if(k=tx(p),j!==null&&j.dehydrated!==null){if(h===null){if(!k)throw Error(r(318));if(k=p.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));k[Yi]=p}else rh(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Ss(p),k=!1}else pi!==null&&(QA(pi),pi=null),k=!0;if(!k)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=b,p):(j=j!==null,j!==(h!==null&&h.memoizedState!==null)&&j&&(p.child.flags|=8192,(p.mode&1)!==0&&(h===null||(Qr.current&1)!==0?zn===0&&(zn=3):eN())),p.updateQueue!==null&&(p.flags|=4),Ss(p),null);case 4:return ih(),BA(h,p),h===null&&nm(p.stateNode.containerInfo),Ss(p),null;case 10:return pA(p.type._context),Ss(p),null;case 17:return Ys(p.type)&&Yy(),Ss(p),null;case 19:if(Ur(Qr),k=p.memoizedState,k===null)return Ss(p),null;if(j=(p.flags&128)!==0,L=k.rendering,L===null)if(j)mm(k,!1);else{if(zn!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(L=ox(h),L!==null){for(p.flags|=128,mm(k,!1),j=L.updateQueue,j!==null&&(p.updateQueue=j,p.flags|=4),p.subtreeFlags=0,j=b,b=p.child;b!==null;)k=b,h=j,k.flags&=14680066,L=k.alternate,L===null?(k.childLanes=0,k.lanes=h,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=L.childLanes,k.lanes=L.lanes,k.child=L.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=L.memoizedProps,k.memoizedState=L.memoizedState,k.updateQueue=L.updateQueue,k.type=L.type,h=L.dependencies,k.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),b=b.sibling;return kr(Qr,Qr.current&1|2),p.child}h=h.sibling}k.tail!==null&&yn()>uh&&(p.flags|=128,j=!0,mm(k,!1),p.lanes=4194304)}else{if(!j)if(h=ox(L),h!==null){if(p.flags|=128,j=!0,b=h.updateQueue,b!==null&&(p.updateQueue=b,p.flags|=4),mm(k,!0),k.tail===null&&k.tailMode==="hidden"&&!L.alternate&&!Vr)return Ss(p),null}else 2*yn()-k.renderingStartTime>uh&&b!==1073741824&&(p.flags|=128,j=!0,mm(k,!1),p.lanes=4194304);k.isBackwards?(L.sibling=p.child,p.child=L):(b=k.last,b!==null?b.sibling=L:p.child=L,k.last=L)}return k.tail!==null?(p=k.tail,k.rendering=p,k.tail=p.sibling,k.renderingStartTime=yn(),p.sibling=null,b=Qr.current,kr(Qr,j?b&1|2:b&1),p):(Ss(p),null);case 22:case 23:return ZA(),j=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==j&&(p.flags|=8192),j&&(p.mode&1)!==0?(ya&1073741824)!==0&&(Ss(p),p.subtreeFlags&6&&(p.flags|=8192)):Ss(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function Uie(h,p){switch(lA(p),p.tag){case 1:return Ys(p.type)&&Yy(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return ih(),Ur(Xs),Ur(ws),wA(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 5:return xA(p),null;case 13:if(Ur(Qr),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(r(340));rh()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return Ur(Qr),null;case 4:return ih(),null;case 10:return pA(p.type._context),null;case 22:case 23:return ZA(),null;case 24:return null;default:return null}}var gx=!1,js=!1,zie=typeof WeakSet=="function"?WeakSet:Set,We=null;function lh(h,p){var b=h.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(j){sn(h,p,j)}else b.current=null}function UA(h,p,b){try{b()}catch(j){sn(h,p,j)}}var pF=!1;function qie(h,p){if(Zj=Dy,h=WL(),Hj(h)){if("selectionStart"in h)var b={start:h.selectionStart,end:h.selectionEnd};else e:{b=(b=h.ownerDocument)&&b.defaultView||window;var j=b.getSelection&&b.getSelection();if(j&&j.rangeCount!==0){b=j.anchorNode;var T=j.anchorOffset,k=j.focusNode;j=j.focusOffset;try{b.nodeType,k.nodeType}catch{b=null;break e}var L=0,Q=-1,Z=-1,me=0,Ne=0,Pe=h,Ae=null;t:for(;;){for(var qe;Pe!==b||T!==0&&Pe.nodeType!==3||(Q=L+T),Pe!==k||j!==0&&Pe.nodeType!==3||(Z=L+j),Pe.nodeType===3&&(L+=Pe.nodeValue.length),(qe=Pe.firstChild)!==null;)Ae=Pe,Pe=qe;for(;;){if(Pe===h)break t;if(Ae===b&&++me===T&&(Q=L),Ae===k&&++Ne===j&&(Z=L),(qe=Pe.nextSibling)!==null)break;Pe=Ae,Ae=Pe.parentNode}Pe=qe}b=Q===-1||Z===-1?null:{start:Q,end:Z}}else b=null}b=b||{start:0,end:0}}else b=null;for(eA={focusedElem:h,selectionRange:b},Dy=!1,We=p;We!==null;)if(p=We,h=p.child,(p.subtreeFlags&1028)!==0&&h!==null)h.return=p,We=h;else for(;We!==null;){p=We;try{var Qe=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Qe!==null){var Ze=Qe.memoizedProps,xn=Qe.memoizedState,he=p.stateNode,ne=he.getSnapshotBeforeUpdate(p.elementType===p.type?Ze:mi(p.type,Ze),xn);he.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var fe=p.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Me){sn(p,p.return,Me)}if(h=p.sibling,h!==null){h.return=p.return,We=h;break}We=p.return}return Qe=pF,pF=!1,Qe}function gm(h,p,b){var j=p.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var T=j=j.next;do{if((T.tag&h)===h){var k=T.destroy;T.destroy=void 0,k!==void 0&&UA(p,b,k)}T=T.next}while(T!==j)}}function vx(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&h)===h){var j=b.create;b.destroy=j()}b=b.next}while(b!==p)}}function zA(h){var p=h.ref;if(p!==null){var b=h.stateNode;switch(h.tag){case 5:h=b;break;default:h=b}typeof p=="function"?p(h):p.current=h}}function mF(h){var p=h.alternate;p!==null&&(h.alternate=null,mF(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&(delete p[Yi],delete p[am],delete p[sA],delete p[Aie],delete p[Nie])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function gF(h){return h.tag===5||h.tag===3||h.tag===4}function vF(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||gF(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function qA(h,p,b){var j=h.tag;if(j===5||j===6)h=h.stateNode,p?b.nodeType===8?b.parentNode.insertBefore(h,p):b.insertBefore(h,p):(b.nodeType===8?(p=b.parentNode,p.insertBefore(h,b)):(p=b,p.appendChild(h)),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=Ky));else if(j!==4&&(h=h.child,h!==null))for(qA(h,p,b),h=h.sibling;h!==null;)qA(h,p,b),h=h.sibling}function VA(h,p,b){var j=h.tag;if(j===5||j===6)h=h.stateNode,p?b.insertBefore(h,p):b.appendChild(h);else if(j!==4&&(h=h.child,h!==null))for(VA(h,p,b),h=h.sibling;h!==null;)VA(h,p,b),h=h.sibling}var ds=null,gi=!1;function Wl(h,p,b){for(b=b.child;b!==null;)yF(h,p,b),b=b.sibling}function yF(h,p,b){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(Py,b)}catch{}switch(b.tag){case 5:js||lh(b,p);case 6:var j=ds,T=gi;ds=null,Wl(h,p,b),ds=j,gi=T,ds!==null&&(gi?(h=ds,b=b.stateNode,h.nodeType===8?h.parentNode.removeChild(b):h.removeChild(b)):ds.removeChild(b.stateNode));break;case 18:ds!==null&&(gi?(h=ds,b=b.stateNode,h.nodeType===8?nA(h.parentNode,b):h.nodeType===1&&nA(h,b),Kp(h)):nA(ds,b.stateNode));break;case 4:j=ds,T=gi,ds=b.stateNode.containerInfo,gi=!0,Wl(h,p,b),ds=j,gi=T;break;case 0:case 11:case 14:case 15:if(!js&&(j=b.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){T=j=j.next;do{var k=T,L=k.destroy;k=k.tag,L!==void 0&&((k&2)!==0||(k&4)!==0)&&UA(b,p,L),T=T.next}while(T!==j)}Wl(h,p,b);break;case 1:if(!js&&(lh(b,p),j=b.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=b.memoizedProps,j.state=b.memoizedState,j.componentWillUnmount()}catch(Q){sn(b,p,Q)}Wl(h,p,b);break;case 21:Wl(h,p,b);break;case 22:b.mode&1?(js=(j=js)||b.memoizedState!==null,Wl(h,p,b),js=j):Wl(h,p,b);break;default:Wl(h,p,b)}}function xF(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var b=h.stateNode;b===null&&(b=h.stateNode=new zie),p.forEach(function(j){var T=Jie.bind(null,h,j);b.has(j)||(b.add(j),j.then(T,T))})}}function vi(h,p){var b=p.deletions;if(b!==null)for(var j=0;j<b.length;j++){var T=b[j];try{var k=h,L=p,Q=L;e:for(;Q!==null;){switch(Q.tag){case 5:ds=Q.stateNode,gi=!1;break e;case 3:ds=Q.stateNode.containerInfo,gi=!0;break e;case 4:ds=Q.stateNode.containerInfo,gi=!0;break e}Q=Q.return}if(ds===null)throw Error(r(160));yF(k,L,T),ds=null,gi=!1;var Z=T.alternate;Z!==null&&(Z.return=null),T.return=null}catch(me){sn(T,p,me)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)bF(p,h),p=p.sibling}function bF(h,p){var b=h.alternate,j=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(vi(p,h),Zi(h),j&4){try{gm(3,h,h.return),vx(3,h)}catch(Ze){sn(h,h.return,Ze)}try{gm(5,h,h.return)}catch(Ze){sn(h,h.return,Ze)}}break;case 1:vi(p,h),Zi(h),j&512&&b!==null&&lh(b,b.return);break;case 5:if(vi(p,h),Zi(h),j&512&&b!==null&&lh(b,b.return),h.flags&32){var T=h.stateNode;try{er(T,"")}catch(Ze){sn(h,h.return,Ze)}}if(j&4&&(T=h.stateNode,T!=null)){var k=h.memoizedProps,L=b!==null?b.memoizedProps:k,Q=h.type,Z=h.updateQueue;if(h.updateQueue=null,Z!==null)try{Q==="input"&&k.type==="radio"&&k.name!=null&&Ft(T,k),vn(Q,L);var me=vn(Q,k);for(L=0;L<Z.length;L+=2){var Ne=Z[L],Pe=Z[L+1];Ne==="style"?Zn(T,Pe):Ne==="dangerouslySetInnerHTML"?ge(T,Pe):Ne==="children"?er(T,Pe):A(T,Ne,Pe,me)}switch(Q){case"input":rr(T,k);break;case"textarea":K(T,k);break;case"select":var Ae=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!k.multiple;var qe=k.value;qe!=null?ae(T,!!k.multiple,qe,!1):Ae!==!!k.multiple&&(k.defaultValue!=null?ae(T,!!k.multiple,k.defaultValue,!0):ae(T,!!k.multiple,k.multiple?[]:"",!1))}T[am]=k}catch(Ze){sn(h,h.return,Ze)}}break;case 6:if(vi(p,h),Zi(h),j&4){if(h.stateNode===null)throw Error(r(162));T=h.stateNode,k=h.memoizedProps;try{T.nodeValue=k}catch(Ze){sn(h,h.return,Ze)}}break;case 3:if(vi(p,h),Zi(h),j&4&&b!==null&&b.memoizedState.isDehydrated)try{Kp(p.containerInfo)}catch(Ze){sn(h,h.return,Ze)}break;case 4:vi(p,h),Zi(h);break;case 13:vi(p,h),Zi(h),T=h.child,T.flags&8192&&(k=T.memoizedState!==null,T.stateNode.isHidden=k,!k||T.alternate!==null&&T.alternate.memoizedState!==null||(GA=yn())),j&4&&xF(h);break;case 22:if(Ne=b!==null&&b.memoizedState!==null,h.mode&1?(js=(me=js)||Ne,vi(p,h),js=me):vi(p,h),Zi(h),j&8192){if(me=h.memoizedState!==null,(h.stateNode.isHidden=me)&&!Ne&&(h.mode&1)!==0)for(We=h,Ne=h.child;Ne!==null;){for(Pe=We=Ne;We!==null;){switch(Ae=We,qe=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:gm(4,Ae,Ae.return);break;case 1:lh(Ae,Ae.return);var Qe=Ae.stateNode;if(typeof Qe.componentWillUnmount=="function"){j=Ae,b=Ae.return;try{p=j,Qe.props=p.memoizedProps,Qe.state=p.memoizedState,Qe.componentWillUnmount()}catch(Ze){sn(j,b,Ze)}}break;case 5:lh(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){SF(Pe);continue}}qe!==null?(qe.return=Ae,We=qe):SF(Pe)}Ne=Ne.sibling}e:for(Ne=null,Pe=h;;){if(Pe.tag===5){if(Ne===null){Ne=Pe;try{T=Pe.stateNode,me?(k=T.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(Q=Pe.stateNode,Z=Pe.memoizedProps.style,L=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,Q.style.display=An("display",L))}catch(Ze){sn(h,h.return,Ze)}}}else if(Pe.tag===6){if(Ne===null)try{Pe.stateNode.nodeValue=me?"":Pe.memoizedProps}catch(Ze){sn(h,h.return,Ze)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===h)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===h)break e;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===h)break e;Ne===Pe&&(Ne=null),Pe=Pe.return}Ne===Pe&&(Ne=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}break;case 19:vi(p,h),Zi(h),j&4&&xF(h);break;case 21:break;default:vi(p,h),Zi(h)}}function Zi(h){var p=h.flags;if(p&2){try{e:{for(var b=h.return;b!==null;){if(gF(b)){var j=b;break e}b=b.return}throw Error(r(160))}switch(j.tag){case 5:var T=j.stateNode;j.flags&32&&(er(T,""),j.flags&=-33);var k=vF(h);VA(h,k,T);break;case 3:case 4:var L=j.stateNode.containerInfo,Q=vF(h);qA(h,Q,L);break;default:throw Error(r(161))}}catch(Z){sn(h,h.return,Z)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function Vie(h,p,b){We=h,wF(h)}function wF(h,p,b){for(var j=(h.mode&1)!==0;We!==null;){var T=We,k=T.child;if(T.tag===22&&j){var L=T.memoizedState!==null||gx;if(!L){var Q=T.alternate,Z=Q!==null&&Q.memoizedState!==null||js;Q=gx;var me=js;if(gx=L,(js=Z)&&!me)for(We=T;We!==null;)L=We,Z=L.child,L.tag===22&&L.memoizedState!==null?jF(T):Z!==null?(Z.return=L,We=Z):jF(T);for(;k!==null;)We=k,wF(k),k=k.sibling;We=T,gx=Q,js=me}_F(h)}else(T.subtreeFlags&8772)!==0&&k!==null?(k.return=T,We=k):_F(h)}}function _F(h){for(;We!==null;){var p=We;if((p.flags&8772)!==0){var b=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:js||vx(5,p);break;case 1:var j=p.stateNode;if(p.flags&4&&!js)if(b===null)j.componentDidMount();else{var T=p.elementType===p.type?b.memoizedProps:mi(p.type,b.memoizedProps);j.componentDidUpdate(T,b.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var k=p.updateQueue;k!==null&&S$(p,k,j);break;case 3:var L=p.updateQueue;if(L!==null){if(b=null,p.child!==null)switch(p.child.tag){case 5:b=p.child.stateNode;break;case 1:b=p.child.stateNode}S$(p,L,b)}break;case 5:var Q=p.stateNode;if(b===null&&p.flags&4){b=Q;var Z=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&b.focus();break;case"img":Z.src&&(b.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var me=p.alternate;if(me!==null){var Ne=me.memoizedState;if(Ne!==null){var Pe=Ne.dehydrated;Pe!==null&&Kp(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}js||p.flags&512&&zA(p)}catch(Ae){sn(p,p.return,Ae)}}if(p===h){We=null;break}if(b=p.sibling,b!==null){b.return=p.return,We=b;break}We=p.return}}function SF(h){for(;We!==null;){var p=We;if(p===h){We=null;break}var b=p.sibling;if(b!==null){b.return=p.return,We=b;break}We=p.return}}function jF(h){for(;We!==null;){var p=We;try{switch(p.tag){case 0:case 11:case 15:var b=p.return;try{vx(4,p)}catch(Z){sn(p,b,Z)}break;case 1:var j=p.stateNode;if(typeof j.componentDidMount=="function"){var T=p.return;try{j.componentDidMount()}catch(Z){sn(p,T,Z)}}var k=p.return;try{zA(p)}catch(Z){sn(p,k,Z)}break;case 5:var L=p.return;try{zA(p)}catch(Z){sn(p,L,Z)}}}catch(Z){sn(p,p.return,Z)}if(p===h){We=null;break}var Q=p.sibling;if(Q!==null){Q.return=p.return,We=Q;break}We=p.return}}var Hie=Math.ceil,yx=C.ReactCurrentDispatcher,HA=C.ReactCurrentOwner,qa=C.ReactCurrentBatchConfig,cr=0,ts=null,Nn=null,hs=0,ya=0,ch=Ul(0),zn=0,vm=null,ou=0,xx=0,WA=0,ym=null,Js=null,GA=0,uh=1/0,zo=null,bx=!1,KA=null,Gl=null,wx=!1,Kl=null,_x=0,xm=0,XA=null,Sx=-1,jx=0;function Ts(){return(cr&6)!==0?yn():Sx!==-1?Sx:Sx=yn()}function Xl(h){return(h.mode&1)===0?1:(cr&2)!==0&&hs!==0?hs&-hs:Cie.transition!==null?(jx===0&&(jx=vL()),jx):(h=wr,h!==0||(h=window.event,h=h===void 0?16:NL(h.type)),h)}function yi(h,p,b,j){if(50<xm)throw xm=0,XA=null,Error(r(185));qp(h,b,j),((cr&2)===0||h!==ts)&&(h===ts&&((cr&2)===0&&(xx|=b),zn===4&&Yl(h,hs)),Zs(h,j),b===1&&cr===0&&(p.mode&1)===0&&(uh=yn()+500,Jy&&ql()))}function Zs(h,p){var b=h.callbackNode;Cae(h,p);var j=Ry(h,h===ts?hs:0);if(j===0)b!==null&&pL(b),h.callbackNode=null,h.callbackPriority=0;else if(p=j&-j,h.callbackPriority!==p){if(b!=null&&pL(b),p===1)h.tag===0?Eie(NF.bind(null,h)):d$(NF.bind(null,h)),Sie(function(){(cr&6)===0&&ql()}),b=null;else{switch(yL(j)){case 1:b=Cj;break;case 4:b=mL;break;case 16:b=Ty;break;case 536870912:b=gL;break;default:b=Ty}b=IF(b,AF.bind(null,h))}h.callbackPriority=p,h.callbackNode=b}}function AF(h,p){if(Sx=-1,jx=0,(cr&6)!==0)throw Error(r(327));var b=h.callbackNode;if(dh()&&h.callbackNode!==b)return null;var j=Ry(h,h===ts?hs:0);if(j===0)return null;if((j&30)!==0||(j&h.expiredLanes)!==0||p)p=Ax(h,j);else{p=j;var T=cr;cr|=2;var k=CF();(ts!==h||hs!==p)&&(zo=null,uh=yn()+500,cu(h,p));do try{Kie();break}catch(Q){EF(h,Q)}while(!0);fA(),yx.current=k,cr=T,Nn!==null?p=0:(ts=null,hs=0,p=zn)}if(p!==0){if(p===2&&(T=Tj(h),T!==0&&(j=T,p=YA(h,T))),p===1)throw b=vm,cu(h,0),Yl(h,j),Zs(h,yn()),b;if(p===6)Yl(h,j);else{if(T=h.current.alternate,(j&30)===0&&!Wie(T)&&(p=Ax(h,j),p===2&&(k=Tj(h),k!==0&&(j=k,p=YA(h,k))),p===1))throw b=vm,cu(h,0),Yl(h,j),Zs(h,yn()),b;switch(h.finishedWork=T,h.finishedLanes=j,p){case 0:case 1:throw Error(r(345));case 2:uu(h,Js,zo);break;case 3:if(Yl(h,j),(j&130023424)===j&&(p=GA+500-yn(),10<p)){if(Ry(h,0)!==0)break;if(T=h.suspendedLanes,(T&j)!==j){Ts(),h.pingedLanes|=h.suspendedLanes&T;break}h.timeoutHandle=rA(uu.bind(null,h,Js,zo),p);break}uu(h,Js,zo);break;case 4:if(Yl(h,j),(j&4194240)===j)break;for(p=h.eventTimes,T=-1;0<j;){var L=31-hi(j);k=1<<L,L=p[L],L>T&&(T=L),j&=~k}if(j=T,j=yn()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*Hie(j/1960))-j,10<j){h.timeoutHandle=rA(uu.bind(null,h,Js,zo),j);break}uu(h,Js,zo);break;case 5:uu(h,Js,zo);break;default:throw Error(r(329))}}}return Zs(h,yn()),h.callbackNode===b?AF.bind(null,h):null}function YA(h,p){var b=ym;return h.current.memoizedState.isDehydrated&&(cu(h,p).flags|=256),h=Ax(h,p),h!==2&&(p=Js,Js=b,p!==null&&QA(p)),h}function QA(h){Js===null?Js=h:Js.push.apply(Js,h)}function Wie(h){for(var p=h;;){if(p.flags&16384){var b=p.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var j=0;j<b.length;j++){var T=b[j],k=T.getSnapshot;T=T.value;try{if(!fi(k(),T))return!1}catch{return!1}}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Yl(h,p){for(p&=~WA,p&=~xx,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var b=31-hi(p),j=1<<b;h[b]=-1,p&=~j}}function NF(h){if((cr&6)!==0)throw Error(r(327));dh();var p=Ry(h,0);if((p&1)===0)return Zs(h,yn()),null;var b=Ax(h,p);if(h.tag!==0&&b===2){var j=Tj(h);j!==0&&(p=j,b=YA(h,j))}if(b===1)throw b=vm,cu(h,0),Yl(h,p),Zs(h,yn()),b;if(b===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,uu(h,Js,zo),Zs(h,yn()),null}function JA(h,p){var b=cr;cr|=1;try{return h(p)}finally{cr=b,cr===0&&(uh=yn()+500,Jy&&ql())}}function lu(h){Kl!==null&&Kl.tag===0&&(cr&6)===0&&dh();var p=cr;cr|=1;var b=qa.transition,j=wr;try{if(qa.transition=null,wr=1,h)return h()}finally{wr=j,qa.transition=b,cr=p,(cr&6)===0&&ql()}}function ZA(){ya=ch.current,Ur(ch)}function cu(h,p){h.finishedWork=null,h.finishedLanes=0;var b=h.timeoutHandle;if(b!==-1&&(h.timeoutHandle=-1,_ie(b)),Nn!==null)for(b=Nn.return;b!==null;){var j=b;switch(lA(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&Yy();break;case 3:ih(),Ur(Xs),Ur(ws),wA();break;case 5:xA(j);break;case 4:ih();break;case 13:Ur(Qr);break;case 19:Ur(Qr);break;case 10:pA(j.type._context);break;case 22:case 23:ZA()}b=b.return}if(ts=h,Nn=h=Ql(h.current,null),hs=ya=p,zn=0,vm=null,WA=xx=ou=0,Js=ym=null,su!==null){for(p=0;p<su.length;p++)if(b=su[p],j=b.interleaved,j!==null){b.interleaved=null;var T=j.next,k=b.pending;if(k!==null){var L=k.next;k.next=T,j.next=L}b.pending=j}su=null}return h}function EF(h,p){do{var b=Nn;try{if(fA(),lx.current=hx,cx){for(var j=Jr.memoizedState;j!==null;){var T=j.queue;T!==null&&(T.pending=null),j=j.next}cx=!1}if(iu=0,es=Un=Jr=null,dm=!1,hm=0,HA.current=null,b===null||b.return===null){zn=1,vm=p,Nn=null;break}e:{var k=h,L=b.return,Q=b,Z=p;if(p=hs,Q.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var me=Z,Ne=Q,Pe=Ne.tag;if((Ne.mode&1)===0&&(Pe===0||Pe===11||Pe===15)){var Ae=Ne.alternate;Ae?(Ne.updateQueue=Ae.updateQueue,Ne.memoizedState=Ae.memoizedState,Ne.lanes=Ae.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var qe=J$(L);if(qe!==null){qe.flags&=-257,Z$(qe,L,Q,k,p),qe.mode&1&&Q$(k,me,p),p=qe,Z=me;var Qe=p.updateQueue;if(Qe===null){var Ze=new Set;Ze.add(Z),p.updateQueue=Ze}else Qe.add(Z);break e}else{if((p&1)===0){Q$(k,me,p),eN();break e}Z=Error(r(426))}}else if(Vr&&Q.mode&1){var xn=J$(L);if(xn!==null){(xn.flags&65536)===0&&(xn.flags|=256),Z$(xn,L,Q,k,p),dA(oh(Z,Q));break e}}k=Z=oh(Z,Q),zn!==4&&(zn=2),ym===null?ym=[k]:ym.push(k),k=L;do{switch(k.tag){case 3:k.flags|=65536,p&=-p,k.lanes|=p;var he=X$(k,Z,p);_$(k,he);break e;case 1:Q=Z;var ne=k.type,fe=k.stateNode;if((k.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(Gl===null||!Gl.has(fe)))){k.flags|=65536,p&=-p,k.lanes|=p;var Me=Y$(k,Q,p);_$(k,Me);break e}}k=k.return}while(k!==null)}PF(b)}catch(tt){p=tt,Nn===b&&b!==null&&(Nn=b=b.return);continue}break}while(!0)}function CF(){var h=yx.current;return yx.current=hx,h===null?hx:h}function eN(){(zn===0||zn===3||zn===2)&&(zn=4),ts===null||(ou&268435455)===0&&(xx&268435455)===0||Yl(ts,hs)}function Ax(h,p){var b=cr;cr|=2;var j=CF();(ts!==h||hs!==p)&&(zo=null,cu(h,p));do try{Gie();break}catch(T){EF(h,T)}while(!0);if(fA(),cr=b,yx.current=j,Nn!==null)throw Error(r(261));return ts=null,hs=0,zn}function Gie(){for(;Nn!==null;)TF(Nn)}function Kie(){for(;Nn!==null&&!xae();)TF(Nn)}function TF(h){var p=RF(h.alternate,h,ya);h.memoizedProps=h.pendingProps,p===null?PF(h):Nn=p,HA.current=null}function PF(h){var p=h;do{var b=p.alternate;if(h=p.return,(p.flags&32768)===0){if(b=Bie(b,p,ya),b!==null){Nn=b;return}}else{if(b=Uie(b,p),b!==null){b.flags&=32767,Nn=b;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{zn=6,Nn=null;return}}if(p=p.sibling,p!==null){Nn=p;return}Nn=p=h}while(p!==null);zn===0&&(zn=5)}function uu(h,p,b){var j=wr,T=qa.transition;try{qa.transition=null,wr=1,Xie(h,p,b,j)}finally{qa.transition=T,wr=j}return null}function Xie(h,p,b,j){do dh();while(Kl!==null);if((cr&6)!==0)throw Error(r(327));b=h.finishedWork;var T=h.finishedLanes;if(b===null)return null;if(h.finishedWork=null,h.finishedLanes=0,b===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var k=b.lanes|b.childLanes;if(Tae(h,k),h===ts&&(Nn=ts=null,hs=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||wx||(wx=!0,IF(Ty,function(){return dh(),null})),k=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||k){k=qa.transition,qa.transition=null;var L=wr;wr=1;var Q=cr;cr|=4,HA.current=null,qie(h,b),bF(b,h),mie(eA),Dy=!!Zj,eA=Zj=null,h.current=b,Vie(b),bae(),cr=Q,wr=L,qa.transition=k}else h.current=b;if(wx&&(wx=!1,Kl=h,_x=T),k=h.pendingLanes,k===0&&(Gl=null),Sae(b.stateNode),Zs(h,yn()),p!==null)for(j=h.onRecoverableError,b=0;b<p.length;b++)T=p[b],j(T.value,{componentStack:T.stack,digest:T.digest});if(bx)throw bx=!1,h=KA,KA=null,h;return(_x&1)!==0&&h.tag!==0&&dh(),k=h.pendingLanes,(k&1)!==0?h===XA?xm++:(xm=0,XA=h):xm=0,ql(),null}function dh(){if(Kl!==null){var h=yL(_x),p=qa.transition,b=wr;try{if(qa.transition=null,wr=16>h?16:h,Kl===null)var j=!1;else{if(h=Kl,Kl=null,_x=0,(cr&6)!==0)throw Error(r(331));var T=cr;for(cr|=4,We=h.current;We!==null;){var k=We,L=k.child;if((We.flags&16)!==0){var Q=k.deletions;if(Q!==null){for(var Z=0;Z<Q.length;Z++){var me=Q[Z];for(We=me;We!==null;){var Ne=We;switch(Ne.tag){case 0:case 11:case 15:gm(8,Ne,k)}var Pe=Ne.child;if(Pe!==null)Pe.return=Ne,We=Pe;else for(;We!==null;){Ne=We;var Ae=Ne.sibling,qe=Ne.return;if(mF(Ne),Ne===me){We=null;break}if(Ae!==null){Ae.return=qe,We=Ae;break}We=qe}}}var Qe=k.alternate;if(Qe!==null){var Ze=Qe.child;if(Ze!==null){Qe.child=null;do{var xn=Ze.sibling;Ze.sibling=null,Ze=xn}while(Ze!==null)}}We=k}}if((k.subtreeFlags&2064)!==0&&L!==null)L.return=k,We=L;else e:for(;We!==null;){if(k=We,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:gm(9,k,k.return)}var he=k.sibling;if(he!==null){he.return=k.return,We=he;break e}We=k.return}}var ne=h.current;for(We=ne;We!==null;){L=We;var fe=L.child;if((L.subtreeFlags&2064)!==0&&fe!==null)fe.return=L,We=fe;else e:for(L=ne;We!==null;){if(Q=We,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:vx(9,Q)}}catch(tt){sn(Q,Q.return,tt)}if(Q===L){We=null;break e}var Me=Q.sibling;if(Me!==null){Me.return=Q.return,We=Me;break e}We=Q.return}}if(cr=T,ql(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(Py,h)}catch{}j=!0}return j}finally{wr=b,qa.transition=p}}return!1}function kF(h,p,b){p=oh(b,p),p=X$(h,p,1),h=Hl(h,p,1),p=Ts(),h!==null&&(qp(h,1,p),Zs(h,p))}function sn(h,p,b){if(h.tag===3)kF(h,h,b);else for(;p!==null;){if(p.tag===3){kF(p,h,b);break}else if(p.tag===1){var j=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(Gl===null||!Gl.has(j))){h=oh(b,h),h=Y$(p,h,1),p=Hl(p,h,1),h=Ts(),p!==null&&(qp(p,1,h),Zs(p,h));break}}p=p.return}}function Yie(h,p,b){var j=h.pingCache;j!==null&&j.delete(p),p=Ts(),h.pingedLanes|=h.suspendedLanes&b,ts===h&&(hs&b)===b&&(zn===4||zn===3&&(hs&130023424)===hs&&500>yn()-GA?cu(h,0):WA|=b),Zs(h,p)}function OF(h,p){p===0&&((h.mode&1)===0?p=1:(p=Oy,Oy<<=1,(Oy&130023424)===0&&(Oy=4194304)));var b=Ts();h=Fo(h,p),h!==null&&(qp(h,p,b),Zs(h,b))}function Qie(h){var p=h.memoizedState,b=0;p!==null&&(b=p.retryLane),OF(h,b)}function Jie(h,p){var b=0;switch(h.tag){case 13:var j=h.stateNode,T=h.memoizedState;T!==null&&(b=T.retryLane);break;case 19:j=h.stateNode;break;default:throw Error(r(314))}j!==null&&j.delete(p),OF(h,b)}var RF;RF=function(h,p,b){if(h!==null)if(h.memoizedProps!==p.pendingProps||Xs.current)Qs=!0;else{if((h.lanes&b)===0&&(p.flags&128)===0)return Qs=!1,Fie(h,p,b);Qs=(h.flags&131072)!==0}else Qs=!1,Vr&&(p.flags&1048576)!==0&&h$(p,ex,p.index);switch(p.lanes=0,p.tag){case 2:var j=p.type;mx(h,p),h=p.pendingProps;var T=Zd(p,ws.current);ah(p,b),T=jA(null,p,j,h,T,b);var k=AA();return p.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Ys(j)?(k=!0,Qy(p)):k=!1,p.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,vA(p),T.updater=fx,p.stateNode=T,T._reactInternals=p,kA(p,j,h,b),p=MA(null,p,j,!0,k,b)):(p.tag=0,Vr&&k&&oA(p),Cs(null,p,T,b),p=p.child),p;case 16:j=p.elementType;e:{switch(mx(h,p),h=p.pendingProps,T=j._init,j=T(j._payload),p.type=j,T=p.tag=eoe(j),h=mi(j,h),T){case 0:p=IA(null,p,j,h,b);break e;case 1:p=aF(null,p,j,h,b);break e;case 11:p=eF(null,p,j,h,b);break e;case 14:p=tF(null,p,j,mi(j.type,h),b);break e}throw Error(r(306,j,""))}return p;case 0:return j=p.type,T=p.pendingProps,T=p.elementType===j?T:mi(j,T),IA(h,p,j,T,b);case 1:return j=p.type,T=p.pendingProps,T=p.elementType===j?T:mi(j,T),aF(h,p,j,T,b);case 3:e:{if(iF(p),h===null)throw Error(r(387));j=p.pendingProps,k=p.memoizedState,T=k.element,w$(h,p),ix(p,j,null,b);var L=p.memoizedState;if(j=L.element,k.isDehydrated)if(k={element:j,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},p.updateQueue.baseState=k,p.memoizedState=k,p.flags&256){T=oh(Error(r(423)),p),p=oF(h,p,j,b,T);break e}else if(j!==T){T=oh(Error(r(424)),p),p=oF(h,p,j,b,T);break e}else for(va=Bl(p.stateNode.containerInfo.firstChild),ga=p,Vr=!0,pi=null,b=x$(p,null,j,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(rh(),j===T){p=Uo(h,p,b);break e}Cs(h,p,j,b)}p=p.child}return p;case 5:return j$(p),h===null&&uA(p),j=p.type,T=p.pendingProps,k=h!==null?h.memoizedProps:null,L=T.children,tA(j,T)?L=null:k!==null&&tA(j,k)&&(p.flags|=32),sF(h,p),Cs(h,p,L,b),p.child;case 6:return h===null&&uA(p),null;case 13:return lF(h,p,b);case 4:return yA(p,p.stateNode.containerInfo),j=p.pendingProps,h===null?p.child=nh(p,null,j,b):Cs(h,p,j,b),p.child;case 11:return j=p.type,T=p.pendingProps,T=p.elementType===j?T:mi(j,T),eF(h,p,j,T,b);case 7:return Cs(h,p,p.pendingProps,b),p.child;case 8:return Cs(h,p,p.pendingProps.children,b),p.child;case 12:return Cs(h,p,p.pendingProps.children,b),p.child;case 10:e:{if(j=p.type._context,T=p.pendingProps,k=p.memoizedProps,L=T.value,kr(nx,j._currentValue),j._currentValue=L,k!==null)if(fi(k.value,L)){if(k.children===T.children&&!Xs.current){p=Uo(h,p,b);break e}}else for(k=p.child,k!==null&&(k.return=p);k!==null;){var Q=k.dependencies;if(Q!==null){L=k.child;for(var Z=Q.firstContext;Z!==null;){if(Z.context===j){if(k.tag===1){Z=Bo(-1,b&-b),Z.tag=2;var me=k.updateQueue;if(me!==null){me=me.shared;var Ne=me.pending;Ne===null?Z.next=Z:(Z.next=Ne.next,Ne.next=Z),me.pending=Z}}k.lanes|=b,Z=k.alternate,Z!==null&&(Z.lanes|=b),mA(k.return,b,p),Q.lanes|=b;break}Z=Z.next}}else if(k.tag===10)L=k.type===p.type?null:k.child;else if(k.tag===18){if(L=k.return,L===null)throw Error(r(341));L.lanes|=b,Q=L.alternate,Q!==null&&(Q.lanes|=b),mA(L,b,p),L=k.sibling}else L=k.child;if(L!==null)L.return=k;else for(L=k;L!==null;){if(L===p){L=null;break}if(k=L.sibling,k!==null){k.return=L.return,L=k;break}L=L.return}k=L}Cs(h,p,T.children,b),p=p.child}return p;case 9:return T=p.type,j=p.pendingProps.children,ah(p,b),T=Ua(T),j=j(T),p.flags|=1,Cs(h,p,j,b),p.child;case 14:return j=p.type,T=mi(j,p.pendingProps),T=mi(j.type,T),tF(h,p,j,T,b);case 15:return rF(h,p,p.type,p.pendingProps,b);case 17:return j=p.type,T=p.pendingProps,T=p.elementType===j?T:mi(j,T),mx(h,p),p.tag=1,Ys(j)?(h=!0,Qy(p)):h=!1,ah(p,b),G$(p,j,T),kA(p,j,T,b),MA(null,p,j,!0,h,b);case 19:return uF(h,p,b);case 22:return nF(h,p,b)}throw Error(r(156,p.tag))};function IF(h,p){return fL(h,p)}function Zie(h,p,b,j){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Va(h,p,b,j){return new Zie(h,p,b,j)}function tN(h){return h=h.prototype,!(!h||!h.isReactComponent)}function eoe(h){if(typeof h=="function")return tN(h)?1:0;if(h!=null){if(h=h.$$typeof,h===$)return 11;if(h===H)return 14}return 2}function Ql(h,p){var b=h.alternate;return b===null?(b=Va(h.tag,p,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=p,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&14680064,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,p=h.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b}function Nx(h,p,b,j,T,k){var L=2;if(j=h,typeof h=="function")tN(h)&&(L=1);else if(typeof h=="string")L=5;else e:switch(h){case P:return du(b.children,T,k,p);case R:L=8,T|=8;break;case O:return h=Va(12,b,p,T|2),h.elementType=O,h.lanes=k,h;case M:return h=Va(13,b,p,T),h.elementType=M,h.lanes=k,h;case U:return h=Va(19,b,p,T),h.elementType=U,h.lanes=k,h;case q:return Ex(b,T,k,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case D:L=10;break e;case I:L=9;break e;case $:L=11;break e;case H:L=14;break e;case z:L=16,j=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return p=Va(L,b,p,T),p.elementType=h,p.type=j,p.lanes=k,p}function du(h,p,b,j){return h=Va(7,h,j,p),h.lanes=b,h}function Ex(h,p,b,j){return h=Va(22,h,j,p),h.elementType=q,h.lanes=b,h.stateNode={isHidden:!1},h}function rN(h,p,b){return h=Va(6,h,null,p),h.lanes=b,h}function nN(h,p,b){return p=Va(4,h.children!==null?h.children:[],h.key,p),p.lanes=b,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function toe(h,p,b,j,T){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pj(0),this.expirationTimes=Pj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pj(0),this.identifierPrefix=j,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function sN(h,p,b,j,T,k,L,Q,Z){return h=new toe(h,p,b,Q,Z),p===1?(p=1,k===!0&&(p|=8)):p=0,k=Va(3,null,null,p),h.current=k,k.stateNode=h,k.memoizedState={element:j,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},vA(k),h}function roe(h,p,b){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:j==null?null:""+j,children:h,containerInfo:p,implementation:b}}function MF(h){if(!h)return zl;h=h._reactInternals;e:{if(Zc(h)!==h||h.tag!==1)throw Error(r(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Ys(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(h.tag===1){var b=h.type;if(Ys(b))return c$(h,b,p)}return p}function DF(h,p,b,j,T,k,L,Q,Z){return h=sN(b,j,!0,h,T,k,L,Q,Z),h.context=MF(null),b=h.current,j=Ts(),T=Xl(b),k=Bo(j,T),k.callback=p??null,Hl(b,k,T),h.current.lanes=T,qp(h,T,j),Zs(h,j),h}function Cx(h,p,b,j){var T=p.current,k=Ts(),L=Xl(T);return b=MF(b),p.context===null?p.context=b:p.pendingContext=b,p=Bo(k,L),p.payload={element:h},j=j===void 0?null:j,j!==null&&(p.callback=j),h=Hl(T,p,L),h!==null&&(yi(h,T,L,k),ax(h,T,L)),L}function Tx(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function LF(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<p?b:p}}function aN(h,p){LF(h,p),(h=h.alternate)&&LF(h,p)}function noe(){return null}var $F=typeof reportError=="function"?reportError:function(h){console.error(h)};function iN(h){this._internalRoot=h}Px.prototype.render=iN.prototype.render=function(h){var p=this._internalRoot;if(p===null)throw Error(r(409));Cx(h,p,null,null)},Px.prototype.unmount=iN.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var p=h.containerInfo;lu(function(){Cx(null,h,null,null)}),p[Mo]=null}};function Px(h){this._internalRoot=h}Px.prototype.unstable_scheduleHydration=function(h){if(h){var p=wL();h={blockedOn:null,target:h,priority:p};for(var b=0;b<Ll.length&&p!==0&&p<Ll[b].priority;b++);Ll.splice(b,0,h),b===0&&jL(h)}};function oN(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function kx(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function FF(){}function soe(h,p,b,j,T){if(T){if(typeof j=="function"){var k=j;j=function(){var me=Tx(L);k.call(me)}}var L=DF(p,j,h,0,null,!1,!1,"",FF);return h._reactRootContainer=L,h[Mo]=L.current,nm(h.nodeType===8?h.parentNode:h),lu(),L}for(;T=h.lastChild;)h.removeChild(T);if(typeof j=="function"){var Q=j;j=function(){var me=Tx(Z);Q.call(me)}}var Z=sN(h,0,!1,null,null,!1,!1,"",FF);return h._reactRootContainer=Z,h[Mo]=Z.current,nm(h.nodeType===8?h.parentNode:h),lu(function(){Cx(p,Z,b,j)}),Z}function Ox(h,p,b,j,T){var k=b._reactRootContainer;if(k){var L=k;if(typeof T=="function"){var Q=T;T=function(){var Z=Tx(L);Q.call(Z)}}Cx(p,L,h,T)}else L=soe(b,p,h,T,j);return Tx(L)}xL=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var b=zp(p.pendingLanes);b!==0&&(kj(p,b|1),Zs(p,yn()),(cr&6)===0&&(uh=yn()+500,ql()))}break;case 13:lu(function(){var j=Fo(h,1);if(j!==null){var T=Ts();yi(j,h,1,T)}}),aN(h,1)}},Oj=function(h){if(h.tag===13){var p=Fo(h,134217728);if(p!==null){var b=Ts();yi(p,h,134217728,b)}aN(h,134217728)}},bL=function(h){if(h.tag===13){var p=Xl(h),b=Fo(h,p);if(b!==null){var j=Ts();yi(b,h,p,j)}aN(h,p)}},wL=function(){return wr},_L=function(h,p){var b=wr;try{return wr=h,p()}finally{wr=b}},Ud=function(h,p,b){switch(p){case"input":if(rr(h,b),p=b.name,b.type==="radio"&&p!=null){for(b=h;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<b.length;p++){var j=b[p];if(j!==h&&j.form===h.form){var T=Xy(j);if(!T)throw Error(r(90));ve(j),rr(j,T)}}}break;case"textarea":K(h,b);break;case"select":p=b.value,p!=null&&ae(h,!!b.multiple,p,!1)}},Ny=JA,Ey=lu;var aoe={usingClientEntryPoint:!1,Events:[im,Qd,Xy,Ay,zd,JA]},bm={findFiberByHostInstance:eu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ioe={bundleType:bm.bundleType,version:bm.version,rendererPackageName:bm.rendererPackageName,rendererConfig:bm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=dL(h),h===null?null:h.stateNode},findFiberByHostInstance:bm.findFiberByHostInstance||noe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rx.isDisabled&&Rx.supportsFiber)try{Py=Rx.inject(ioe),Xi=Rx}catch{}}return ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aoe,ta.createPortal=function(h,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oN(p))throw Error(r(200));return roe(h,p,null,b)},ta.createRoot=function(h,p){if(!oN(h))throw Error(r(299));var b=!1,j="",T=$F;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(j=p.identifierPrefix),p.onRecoverableError!==void 0&&(T=p.onRecoverableError)),p=sN(h,1,!1,null,null,b,!1,j,T),h[Mo]=p.current,nm(h.nodeType===8?h.parentNode:h),new iN(p)},ta.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=dL(p),h=h===null?null:h.stateNode,h},ta.flushSync=function(h){return lu(h)},ta.hydrate=function(h,p,b){if(!kx(p))throw Error(r(200));return Ox(null,h,p,!0,b)},ta.hydrateRoot=function(h,p,b){if(!oN(h))throw Error(r(405));var j=b!=null&&b.hydratedSources||null,T=!1,k="",L=$F;if(b!=null&&(b.unstable_strictMode===!0&&(T=!0),b.identifierPrefix!==void 0&&(k=b.identifierPrefix),b.onRecoverableError!==void 0&&(L=b.onRecoverableError)),p=DF(p,null,h,1,b??null,T,!1,k,L),h[Mo]=p.current,nm(h),j)for(h=0;h<j.length;h++)b=j[h],T=b._getVersion,T=T(b._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[b,T]:p.mutableSourceEagerHydrationData.push(b,T);return new Px(p)},ta.render=function(h,p,b){if(!kx(p))throw Error(r(200));return Ox(null,h,p,!1,b)},ta.unmountComponentAtNode=function(h){if(!kx(h))throw Error(r(40));return h._reactRootContainer?(lu(function(){Ox(null,null,h,!1,function(){h._reactRootContainer=null,h[Mo]=null})}),!0):!1},ta.unstable_batchedUpdates=JA,ta.unstable_renderSubtreeIntoContainer=function(h,p,b,j){if(!kx(b))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return Ox(h,p,b,!1,j)},ta.version="18.3.1-next-f1338f8080-20240426",ta}var XF;function KW(){if(XF)return dN.exports;XF=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),dN.exports=poe(),dN.exports}var YF;function moe(){if(YF)return Mx;YF=1;var t=KW();return Mx.createRoot=t.createRoot,Mx.hydrateRoot=t.hydrateRoot,Mx}var goe=moe();const ot=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Cr=globalThis,zu="10.8.0";function Ad(){return g_(Cr),Cr}function g_(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||zu,e[zu]=e[zu]||{}}function Iv(t,e,r=Cr){const n=r.__SENTRY__=r.__SENTRY__||{},s=n[zu]=n[zu]||{};return s[t]||(s[t]=e())}const voe=["debug","info","warn","error","log","assert","trace"],yoe="Sentry Logger ",lb={};function cp(t){if(!("console"in Cr))return t();const e=Cr.console,r={},n=Object.keys(lb);n.forEach(s=>{const a=lb[s];r[s]=e[s],e[s]=a});try{return t()}finally{n.forEach(s=>{e[s]=r[s]})}}function xoe(){JR().enabled=!0}function boe(){JR().enabled=!1}function XW(){return JR().enabled}function woe(...t){QR("log",...t)}function _oe(...t){QR("warn",...t)}function Soe(...t){QR("error",...t)}function QR(t,...e){ot&&XW()&&cp(()=>{Cr.console[t](`${yoe}[${t}]:`,...e)})}function JR(){return ot?Iv("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const ze={enable:xoe,disable:boe,isEnabled:XW,log:woe,warn:_oe,error:Soe},YW=50,Qu="?",QF=/\(error: (.*)\)/,JF=/captureMessage|captureException/;function QW(...t){const e=t.sort((r,n)=>r[0]-n[0]).map(r=>r[1]);return(r,n=0,s=0)=>{const a=[],o=r.split(`
`);for(let l=n;l<o.length;l++){let c=o[l];c.length>1024&&(c=c.slice(0,1024));const u=QF.test(c)?c.replace(QF,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of e){const f=d(u);if(f){a.push(f);break}}if(a.length>=YW+s)break}}return Aoe(a.slice(s))}}function joe(t){return Array.isArray(t)?QW(...t):t}function Aoe(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(Dx(e).function||"")&&e.pop(),e.reverse(),JF.test(Dx(e).function||"")&&(e.pop(),JF.test(Dx(e).function||"")&&e.pop()),e.slice(0,YW).map(r=>({...r,filename:r.filename||Dx(e).filename,function:r.function||Qu}))}function Dx(t){return t[t.length-1]||{}}const pN="<anonymous>";function Tc(t){try{return!t||typeof t!="function"?pN:t.name||pN}catch{return pN}}function ZF(t){const e=t.exception;if(e){const r=[];try{return e.values.forEach(n=>{n.stacktrace.frames&&r.push(...n.stacktrace.frames)}),r}catch{return}}}const $0={},e4={};function Mv(t,e){$0[t]=$0[t]||[],$0[t].push(e)}function Dv(t,e){if(!e4[t]){e4[t]=!0;try{e()}catch(r){ot&&ze.error(`Error while instrumenting ${t}`,r)}}}function qu(t,e){const r=t&&$0[t];if(r)for(const n of r)try{n(e)}catch(s){ot&&ze.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Tc(n)}
Error:`,s)}}let mN=null;function JW(t){const e="error";Mv(e,t),Dv(e,Noe)}function Noe(){mN=Cr.onerror,Cr.onerror=function(t,e,r,n,s){return qu("error",{column:n,error:s,line:r,msg:t,url:e}),mN?mN.apply(this,arguments):!1},Cr.onerror.__SENTRY_INSTRUMENTED__=!0}let gN=null;function ZW(t){const e="unhandledrejection";Mv(e,t),Dv(e,Eoe)}function Eoe(){gN=Cr.onunhandledrejection,Cr.onunhandledrejection=function(t){return qu("unhandledrejection",t),gN?gN.apply(this,arguments):!0},Cr.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const e9=Object.prototype.toString;function ZR(t){switch(e9.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return gl(t,Error)}}function up(t,e){return e9.call(t)===`[object ${e}]`}function t9(t){return up(t,"ErrorEvent")}function t4(t){return up(t,"DOMError")}function Coe(t){return up(t,"DOMException")}function bg(t){return up(t,"String")}function eI(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function tI(t){return t===null||eI(t)||typeof t!="object"&&typeof t!="function"}function wg(t){return up(t,"Object")}function v_(t){return typeof Event<"u"&&gl(t,Event)}function Toe(t){return typeof Element<"u"&&gl(t,Element)}function Poe(t){return up(t,"RegExp")}function y_(t){return!!(t?.then&&typeof t.then=="function")}function koe(t){return wg(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function gl(t,e){try{return t instanceof e}catch{return!1}}function r9(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function n9(t){return typeof Request<"u"&&gl(t,Request)}const rI=Cr,Ooe=80;function s9(t,e={}){if(!t)return"<unknown>";try{let r=t;const n=5,s=[];let a=0,o=0;const l=" > ",c=l.length;let u;const d=Array.isArray(e)?e:e.keyAttrs,f=!Array.isArray(e)&&e.maxStringLength||Ooe;for(;r&&a++<n&&(u=Roe(r,d),!(u==="html"||a>1&&o+s.length*c+u.length>=f));)s.push(u),o+=u.length,r=r.parentNode;return s.reverse().join(l)}catch{return"<unknown>"}}function Roe(t,e){const r=t,n=[];if(!r?.tagName)return"";if(rI.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const s=e?.length?e.filter(o=>r.getAttribute(o)).map(o=>[o,r.getAttribute(o)]):null;if(s?.length)s.forEach(o=>{n.push(`[${o[0]}="${o[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const o=r.className;if(o&&bg(o)){const l=o.split(/\s+/);for(const c of l)n.push(`.${c}`)}}const a=["aria-label","type","name","title","alt"];for(const o of a){const l=r.getAttribute(o);l&&n.push(`[${o}="${l}"]`)}return n.join("")}function Lv(){try{return rI.document.location.href}catch{return""}}function Ioe(t){if(!rI.HTMLElement)return null;let e=t;const r=5;for(let n=0;n<r;n++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function cb(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function r4(t,e){if(!Array.isArray(t))return"";const r=[];for(let n=0;n<t.length;n++){const s=t[n];try{r9(s)?r.push("[VueViewModel]"):r.push(String(s))}catch{r.push("[value cannot be serialized]")}}return r.join(e)}function F0(t,e,r=!1){return bg(t)?Poe(e)?e.test(t):bg(e)?r?t===e:t.includes(e):!1:!1}function Vu(t,e=[],r=!1){return e.some(n=>F0(t,n,r))}function al(t,e,r){if(!(e in t))return;const n=t[e];if(typeof n!="function")return;const s=r(n);typeof s=="function"&&a9(s,n);try{t[e]=s}catch{ot&&ze.log(`Failed to replace method "${e}" in object`,t)}}function Fi(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{ot&&ze.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function a9(t,e){try{const r=e.prototype||{};t.prototype=e.prototype=r,Fi(t,"__sentry_original__",e)}catch{}}function nI(t){return t.__sentry_original__}function i9(t){if(ZR(t))return{message:t.message,name:t.name,stack:t.stack,...s4(t)};if(v_(t)){const e={type:t.type,target:n4(t.target),currentTarget:n4(t.currentTarget),...s4(t)};return typeof CustomEvent<"u"&&gl(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function n4(t){try{return Toe(t)?s9(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function s4(t){if(typeof t=="object"&&t!==null){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}else return{}}function Moe(t,e=40){const r=Object.keys(i9(t));r.sort();const n=r[0];if(!n)return"[object has no keys]";if(n.length>=e)return cb(n,e);for(let s=r.length;s>0;s--){const a=r.slice(0,s).join(", ");if(!(a.length>e))return s===r.length?a:cb(a,e)}return""}function Doe(){const t=Cr;return t.crypto||t.msCrypto}function Ri(t=Doe()){let e=()=>Math.random()*16;try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"");t?.getRandomValues&&(e=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(e()&15)>>r/4).toString(16))}function o9(t){return t.exception?.values?.[0]}function Au(t){const{message:e,event_id:r}=t;if(e)return e;const n=o9(t);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function MP(t,e,r){const n=t.exception=t.exception||{},s=n.values=n.values||[],a=s[0]=s[0]||{};a.value||(a.value=e||""),a.type||(a.type="Error")}function mf(t,e){const r=o9(t);if(!r)return;const n={type:"generic",handled:!0},s=r.mechanism;if(r.mechanism={...n,...s,...e},e&&"data"in e){const a={...s?.data,...e.data};r.mechanism.data=a}}function a4(t){if(Loe(t))return!0;try{Fi(t,"__sentry_captured__",!0)}catch{}return!1}function Loe(t){try{return t.__sentry_captured__}catch{}}const l9=1e3;function Nd(){return Date.now()/l9}function $oe(){const{performance:t}=Cr;if(!t?.now||!t.timeOrigin)return Nd;const e=t.timeOrigin;return()=>(e+t.now())/l9}let i4;function Pa(){return(i4??(i4=$oe()))()}let vN;function Foe(){const{performance:t}=Cr;if(!t?.now)return[void 0,"none"];const e=3600*1e3,r=t.now(),n=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+r-n):e,a=s<e,o=t.timing?.navigationStart,c=typeof o=="number"?Math.abs(o+r-n):e,u=c<e;return a||u?s<=c?[t.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[n,"dateNow"]}function sI(){return vN||(vN=Foe()),vN[0]}function Boe(t){const e=Pa(),r={sid:Ri(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>zoe(r)};return t&&gf(r,t),r}function gf(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Pa(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Ri()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Uoe(t,e){let r={};t.status==="ok"&&(r={status:"exited"}),gf(t,r)}function zoe(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function $v(t,e,r=2){if(!e||typeof e!="object"||r<=0)return e;if(t&&Object.keys(e).length===0)return t;const n={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=$v(n[s],e[s],r-1));return n}function Pc(){return Ri()}function Fv(){return Ri().substring(16)}const DP="_sentrySpan";function _g(t,e){e?Fi(t,DP,e):delete t[DP]}function ub(t){return t[DP]}const qoe=100;let Ju=class LP{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Pc(),sampleRand:Math.random()}}clone(){const e=new LP;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,_g(e,ub(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&gf(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const r=typeof e=="function"?e(this):e,n=r instanceof LP?r.getScopeData():wg(r)?e:void 0,{tags:s,extra:a,user:o,contexts:l,level:c,fingerprint:u=[],propagationContext:d}=n||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...a},this._contexts={...this._contexts,...l},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,_g(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Pc(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,r){const n=typeof r=="number"?r:qoe;if(n<=0)return this;const s={timestamp:Nd(),...e,message:e.message?cb(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ub(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=$v(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,r){const n=r?.event_id||Ri();if(!this._client)return ot&&ze.warn("No client configured on scope - will not capture exception!"),n;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...r,event_id:n},this),n}captureMessage(e,r,n){const s=n?.event_id||Ri();if(!this._client)return ot&&ze.warn("No client configured on scope - will not capture message!"),s;const a=new Error(e);return this._client.captureMessage(e,r,{originalException:e,syntheticException:a,...n,event_id:s},this),s}captureEvent(e,r){const n=r?.event_id||Ri();return this._client?(this._client.captureEvent(e,{...r,event_id:n},this),n):(ot&&ze.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}};function Voe(){return Iv("defaultCurrentScope",()=>new Ju)}function Hoe(){return Iv("defaultIsolationScope",()=>new Ju)}let Woe=class{constructor(e,r){let n;e?n=e:n=new Ju;let s;r?s=r:s=new Ju,this._stack=[{scope:n}],this._isolationScope=s}withScope(e){const r=this._pushScope();let n;try{n=e(r)}catch(s){throw this._popScope(),s}return y_(n)?n.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function vf(){const t=Ad(),e=g_(t);return e.stack=e.stack||new Woe(Voe(),Hoe())}function Goe(t){return vf().withScope(t)}function Koe(t,e){const r=vf();return r.withScope(()=>(r.getStackTop().scope=t,e(t)))}function o4(t){return vf().withScope(()=>t(vf().getIsolationScope()))}function Xoe(){return{withIsolationScope:o4,withScope:Goe,withSetScope:Koe,withSetIsolationScope:(t,e)=>o4(e),getCurrentScope:()=>vf().getScope(),getIsolationScope:()=>vf().getIsolationScope()}}function dp(t){const e=g_(t);return e.acs?e.acs:Xoe()}function fn(){const t=Ad();return dp(t).getCurrentScope()}function Nl(){const t=Ad();return dp(t).getIsolationScope()}function Yoe(){return Iv("globalScope",()=>new Ju)}function Bv(...t){const e=Ad(),r=dp(e);if(t.length===2){const[n,s]=t;return n?r.withSetScope(n,s):r.withScope(s)}return r.withScope(t[0])}function Ar(){return fn().getClient()}function Qoe(t){const e=t.getPropagationContext(),{traceId:r,parentSpanId:n,propagationSpanId:s}=e,a={trace_id:r,span_id:s||Fv()};return n&&(a.parent_span_id=n),a}const il="sentry.source",aI="sentry.sample_rate",c9="sentry.previous_trace_sample_rate",Sg="sentry.op",Zu="sentry.origin",db="sentry.idle_span_finish_reason",Joe="sentry.measurement_unit",Zoe="sentry.measurement_value",l4="sentry.custom_span_name",iI="sentry.profile_id",oI="sentry.exclusive_time",ele="sentry.link.type",tle=0,u9=1,ss=2;function rle(t){if(t<400&&t>=100)return{code:u9};if(t>=400&&t<500)switch(t){case 401:return{code:ss,message:"unauthenticated"};case 403:return{code:ss,message:"permission_denied"};case 404:return{code:ss,message:"not_found"};case 409:return{code:ss,message:"already_exists"};case 413:return{code:ss,message:"failed_precondition"};case 429:return{code:ss,message:"resource_exhausted"};case 499:return{code:ss,message:"cancelled"};default:return{code:ss,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:ss,message:"unimplemented"};case 503:return{code:ss,message:"unavailable"};case 504:return{code:ss,message:"deadline_exceeded"};default:return{code:ss,message:"internal_error"}}return{code:ss,message:"unknown_error"}}function d9(t,e){t.setAttribute("http.response.status_code",e);const r=rle(e);r.message!=="unknown_error"&&t.setStatus(r)}const h9="_sentryScope",f9="_sentryIsolationScope";function nle(t,e,r){t&&(Fi(t,f9,r),Fi(t,h9,e))}function hb(t){return{scope:t[h9],isolationScope:t[f9]}}const lI="sentry-",sle=/^sentry-/,ale=8192;function p9(t){const e=ole(t);if(!e)return;const r=Object.entries(e).reduce((n,[s,a])=>{if(s.match(sle)){const o=s.slice(lI.length);n[o]=a}return n},{});if(Object.keys(r).length>0)return r}function ile(t){if(!t)return;const e=Object.entries(t).reduce((r,[n,s])=>(s&&(r[`${lI}${n}`]=s),r),{});return lle(e)}function ole(t){if(!(!t||!bg(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,r)=>{const n=c4(r);return Object.entries(n).forEach(([s,a])=>{e[s]=a}),e},{}):c4(t)}function c4(t){return t.split(",").map(e=>e.split("=").map(r=>{try{return decodeURIComponent(r.trim())}catch{return}})).reduce((e,[r,n])=>(r&&n&&(e[r]=n),e),{})}function lle(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[r,n],s)=>{const a=`${encodeURIComponent(r)}=${encodeURIComponent(n)}`,o=s===0?a:`${e},${a}`;return o.length>ale?(ot&&ze.warn(`Not adding key: ${r} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):o},"")}const cle=/^o(\d+)\./,ule=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function dle(t){return t==="http"||t==="https"}function hp(t,e=!1){const{host:r,path:n,pass:s,port:a,projectId:o,protocol:l,publicKey:c}=t;return`${l}://${c}${e&&s?`:${s}`:""}@${r}${a?`:${a}`:""}/${n&&`${n}/`}${o}`}function hle(t){const e=ule.exec(t);if(!e){cp(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[r,n,s="",a="",o="",l=""]=e.slice(1);let c="",u=l;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const f=u.match(/^\d+/);f&&(u=f[0])}return m9({host:a,pass:s,path:c,projectId:u,port:o,protocol:r,publicKey:n})}function m9(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function fle(t){if(!ot)return!0;const{port:e,projectId:r,protocol:n}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(ze.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:r.match(/^\d+$/)?dle(n)?e&&isNaN(parseInt(e,10))?(ze.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(ze.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),!1):(ze.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),!1)}function ple(t){return t.match(cle)?.[1]}function mle(t){const e=t.getOptions(),{host:r}=t.getDsn()||{};let n;return e.orgId?n=String(e.orgId):r&&(n=ple(r)),n}function g9(t){const e=typeof t=="string"?hle(t):m9(t);if(!(!e||!fle(e)))return e}function jg(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const v9=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function gle(t){if(!t)return;const e=t.match(v9);if(!e)return;let r;return e[3]==="1"?r=!0:e[3]==="0"&&(r=!1),{traceId:e[1],parentSampled:r,parentSpanId:e[2]}}function vle(t,e){const r=gle(t),n=p9(e);if(!r?.traceId)return{traceId:Pc(),sampleRand:Math.random()};const s=yle(r,n);n&&(n.sample_rand=s.toString());const{traceId:a,parentSpanId:o,parentSampled:l}=r;return{traceId:a,parentSpanId:o,sampled:l,dsc:n||{},sampleRand:s}}function y9(t=Pc(),e=Fv(),r){let n="";return r!==void 0&&(n=r?"-1":"-0"),`${t}-${e}${n}`}function yle(t,e){const r=jg(e?.sample_rand);if(r!==void 0)return r;const n=jg(e?.sample_rate);return n&&t?.parentSampled!==void 0?t.parentSampled?Math.random()*n:n+Math.random()*(1-n):Math.random()}const x9=0,cI=1;let u4=!1;function xle(t){const{spanId:e,traceId:r}=t.spanContext(),{data:n,op:s,parent_span_id:a,status:o,origin:l,links:c}=Gr(t);return{parent_span_id:a,span_id:e,trace_id:r,data:n,op:s,status:o,origin:l,links:c}}function ble(t){const{spanId:e,traceId:r,isRemote:n}=t.spanContext(),s=n?e:Gr(t).parent_span_id,a=hb(t).scope,o=n?a?.getPropagationContext().propagationSpanId||Fv():e;return{parent_span_id:s,span_id:o,trace_id:r}}function wle(t){const{traceId:e,spanId:r}=t.spanContext(),n=Ed(t);return y9(e,r,n)}function b9(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:r,traceFlags:n,...s},attributes:a})=>({span_id:e,trace_id:r,sampled:n===cI,attributes:a,...s}))}function Hu(t){return typeof t=="number"?d4(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?d4(t.getTime()):Pa()}function d4(t){return t>9999999999?t/1e3:t}function Gr(t){if(Sle(t))return t.getSpanJSON();const{spanId:e,traceId:r}=t.spanContext();if(_le(t)){const{attributes:n,startTime:s,name:a,endTime:o,status:l,links:c}=t,u="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0;return{span_id:e,trace_id:r,data:n,description:a,parent_span_id:u,start_timestamp:Hu(s),timestamp:Hu(o)||void 0,status:w9(l),op:n[Sg],origin:n[Zu],links:b9(c)}}return{span_id:e,trace_id:r,start_timestamp:0,data:{}}}function _le(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function Sle(t){return typeof t.getSpanJSON=="function"}function Ed(t){const{traceFlags:e}=t.spanContext();return e===cI}function w9(t){if(!(!t||t.code===tle))return t.code===u9?"ok":t.message||"unknown_error"}const Wu="_sentryChildSpans",$P="_sentryRootSpan";function _9(t,e){const r=t[$P]||t;Fi(e,$P,r),t[Wu]?t[Wu].add(e):Fi(t,Wu,new Set([e]))}function jle(t,e){t[Wu]&&t[Wu].delete(e)}function B0(t){const e=new Set;function r(n){if(!e.has(n)&&Ed(n)){e.add(n);const s=n[Wu]?Array.from(n[Wu]):[];for(const a of s)r(a)}}return r(t),Array.from(e)}function Ii(t){return t[$P]||t}function fp(){const t=Ad(),e=dp(t);return e.getActiveSpan?e.getActiveSpan():ub(fn())}function FP(){u4||(cp(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),u4=!0)}let h4=!1;function Ale(){if(h4)return;function t(){const e=fp(),r=e&&Ii(e);if(r){const n="internal_error";ot&&ze.log(`[Tracing] Root span: ${n} -> Global error occurred`),r.setStatus({code:ss,message:n})}}t.tag="sentry_tracingErrorCallback",h4=!0,JW(t),ZW(t)}function kc(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||Ar()?.getOptions();return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}const uI="production",S9="_frozenDsc";function U0(t,e){Fi(t,S9,e)}function j9(t,e){const r=e.getOptions(),{publicKey:n}=e.getDsn()||{},s={environment:r.environment||uI,release:r.release,public_key:n,trace_id:t,org_id:mle(e)};return e.emit("createDsc",s),s}function A9(t,e){const r=e.getPropagationContext();return r.dsc||j9(r.traceId,t)}function Oc(t){const e=Ar();if(!e)return{};const r=Ii(t),n=Gr(r),s=n.data,a=r.spanContext().traceState,o=a?.get("sentry.sample_rate")??s[aI]??s[c9];function l(x){return(typeof o=="number"||typeof o=="string")&&(x.sample_rate=`${o}`),x}const c=r[S9];if(c)return l(c);const u=a?.get("sentry.dsc"),d=u&&p9(u);if(d)return l(d);const f=j9(t.spanContext().traceId,e),m=s[il],g=n.description;return m!=="url"&&g&&(f.transaction=g),kc()&&(f.sampled=String(Ed(r)),f.sample_rand=a?.get("sentry.sample_rand")??hb(r).scope?.getPropagationContext().sampleRand.toString()),l(f),e.emit("createDsc",f,r),f}let ed=class{constructor(e={}){this._traceId=e.traceId||Pc(),this._spanId=e.spanId||Fv()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:x9}}end(e){}setAttribute(e,r){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,r,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,r){}};function Xo(t,e=100,r=1/0){try{return BP("",t,e,r)}catch(n){return{ERROR:`**non-serializable** (${n})`}}}function N9(t,e=3,r=100*1024){const n=Xo(t,e);return Tle(n)>r?N9(t,e-1,r):n}function BP(t,e,r=1/0,n=1/0,s=Ple()){const[a,o]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const l=Nle(t,e);if(!l.startsWith("[object "))return l;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:r;if(c===0)return l.replace("object ","");if(a(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{const g=u.toJSON();return BP("",g,c-1,n,s)}catch{}const d=Array.isArray(e)?[]:{};let f=0;const m=i9(e);for(const g in m){if(!Object.prototype.hasOwnProperty.call(m,g))continue;if(f>=n){d[g]="[MaxProperties ~]";break}const x=m[g];d[g]=BP(g,x,c-1,n,s),f++}return o(e),d}function Nle(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(r9(e))return"[VueViewModel]";if(koe(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${Tc(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const r=Ele(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}function Ele(t){const e=Object.getPrototypeOf(t);return e?.constructor?e.constructor.name:"null prototype"}function Cle(t){return~-encodeURI(t).split(/%..|./).length}function Tle(t){return Cle(JSON.stringify(t))}function Ple(){const t=new WeakSet;function e(n){return t.has(n)?!0:(t.add(n),!1)}function r(n){t.delete(n)}return[e,r]}function pp(t,e=[]){return[t,e]}function kle(t,e){const[r,n]=t;return[r,[...n,e]]}function f4(t,e){const r=t[1];for(const n of r){const s=n[0].type;if(e(n,s))return!0}return!1}function UP(t){const e=g_(Cr);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function Ole(t){const[e,r]=t;let n=JSON.stringify(e);function s(a){typeof n=="string"?n=typeof a=="string"?n+a:[UP(n),a]:n.push(typeof a=="string"?UP(a):a)}for(const a of r){const[o,l]=a;if(s(`
${JSON.stringify(o)}
`),typeof l=="string"||l instanceof Uint8Array)s(l);else{let c;try{c=JSON.stringify(l)}catch{c=JSON.stringify(Xo(l))}s(c)}}return typeof n=="string"?n:Rle(n)}function Rle(t){const e=t.reduce((s,a)=>s+a.length,0),r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function Ile(t){return[{type:"span"},t]}function Mle(t){const e=typeof t.data=="string"?UP(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const Dle={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function p4(t){return Dle[t]}function E9(t){if(!t?.sdk)return;const{name:e,version:r}=t.sdk;return{name:e,version:r}}function Lle(t,e,r,n){const s=t.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!r&&n&&{dsn:hp(n)},...s&&{trace:s}}}function zP(t,e){if(!e?.length||!t.description)return!1;for(const r of e){if(Fle(r)){if(F0(t.description,r))return!0;continue}if(!r.name&&!r.op)continue;const n=r.name?F0(t.description,r.name):!0,s=r.op?t.op&&F0(t.op,r.op):!0;if(n&&s)return!0}return!1}function $le(t,e){const r=e.parent_span_id,n=e.span_id;if(r)for(const s of t)s.parent_span_id===n&&(s.parent_span_id=r)}function Fle(t){return typeof t=="string"||t instanceof RegExp}function Ble(t,e){if(!e)return t;const r=t.sdk||{};return t.sdk={...r,name:r.name||e.name,version:r.version||e.version,integrations:[...t.sdk?.integrations||[],...e.integrations||[]],packages:[...t.sdk?.packages||[],...e.packages||[]],settings:t.sdk?.settings||e.settings?{...t.sdk?.settings,...e.settings}:void 0},t}function Ule(t,e,r,n){const s=E9(r),a={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!n&&e&&{dsn:hp(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return pp(a,[o])}function zle(t,e,r,n){const s=E9(r),a=t.type&&t.type!=="replay_event"?t.type:"event";Ble(t,r?.sdk);const o=Lle(t,s,n,e);return delete t.sdkProcessingMetadata,pp(o,[[{type:a},t]])}function qle(t,e){function r(g){return!!g.trace_id&&!!g.public_key}const n=Oc(t[0]),s=e?.getDsn(),a=e?.getOptions().tunnel,o={sent_at:new Date().toISOString(),...r(n)&&{trace:n},...!!a&&s&&{dsn:hp(s)}},{beforeSendSpan:l,ignoreSpans:c}=e?.getOptions()||{},u=c?.length?t.filter(g=>!zP(Gr(g),c)):t,d=t.length-u.length;d&&e?.recordDroppedEvent("before_send","span",d);const f=l?g=>{const x=Gr(g),v=l(x);return v||(FP(),x)}:Gr,m=[];for(const g of u){const x=f(g);x&&m.push(Ile(x))}return pp(o,m)}function Vle(t){if(!ot)return;const{description:e="< unknown name >",op:r="< unknown op >",parent_span_id:n}=Gr(t),{spanId:s}=t.spanContext(),a=Ed(t),o=Ii(t),l=o===t,c=`[Tracing] Starting ${a?"sampled":"unsampled"} ${l?"root ":""}span`,u=[`op: ${r}`,`name: ${e}`,`ID: ${s}`];if(n&&u.push(`parent ID: ${n}`),!l){const{op:d,description:f}=Gr(o);u.push(`root ID: ${o.spanContext().spanId}`),d&&u.push(`root op: ${d}`),f&&u.push(`root description: ${f}`)}ze.log(`${c}
  ${u.join(`
  `)}`)}function Hle(t){if(!ot)return;const{description:e="< unknown name >",op:r="< unknown op >"}=Gr(t),{spanId:n}=t.spanContext(),a=Ii(t)===t,o=`[Tracing] Finishing "${r}" ${a?"root ":""}span "${e}" with ID ${n}`;ze.log(o)}function m4(t){if(!t||t.length===0)return;const e={};return t.forEach(r=>{const n=r.attributes||{},s=n[Joe],a=n[Zoe];typeof s=="string"&&typeof a=="number"&&(e[r.name]={value:a,unit:s})}),e}const g4=1e3;let x_=class{constructor(e={}){this._traceId=e.traceId||Pc(),this._spanId=e.spanId||Fv(),this._startTime=e.startTimestamp||Pa(),this._links=e.links,this._attributes={},this.setAttributes({[Zu]:"manual",[Sg]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,r){}spanContext(){const{_spanId:e,_traceId:r,_sampled:n}=this;return{spanId:e,traceId:r,traceFlags:n?cI:x9}}setAttribute(e,r){return r===void 0?delete this._attributes[e]:this._attributes[e]=r,this}setAttributes(e){return Object.keys(e).forEach(r=>this.setAttribute(r,e[r])),this}updateStartTime(e){this._startTime=Hu(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(il,"custom"),this}end(e){this._endTime||(this._endTime=Hu(e),Hle(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Sg],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:w9(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Zu],profile_id:this._attributes[iI],exclusive_time:this._attributes[oI],measurements:m4(this._events),is_segment:this._isStandaloneSpan&&Ii(this)===this||void 0,segment_id:this._isStandaloneSpan?Ii(this).spanContext().spanId:void 0,links:b9(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,r,n){ot&&ze.log("[Tracing] Adding an event to span:",e);const s=v4(r)?r:n||Pa(),a=v4(r)?{}:r||{},o={name:e,time:Hu(s),attributes:a};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=Ar();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Ii(this)))return;if(this._isStandaloneSpan){this._sampled?Gle(qle([this],e)):(ot&&ze.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const n=this._convertSpanToTransaction();n&&(hb(this).scope||fn()).captureEvent(n)}_convertSpanToTransaction(){if(!y4(Gr(this)))return;this._name||(ot&&ze.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:r}=hb(this),n=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const a=B0(this).filter(d=>d!==this&&!Wle(d)).map(d=>Gr(d)).filter(y4),o=this._attributes[il];delete this._attributes[l4],a.forEach(d=>{delete d.data[l4]});const l={contexts:{trace:xle(this)},spans:a.length>g4?a.sort((d,f)=>d.start_timestamp-f.start_timestamp).slice(0,g4):a,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:r,dynamicSamplingContext:Oc(this)},request:n,...o&&{transaction_info:{source:o}}},c=m4(this._events);return c&&Object.keys(c).length&&(ot&&ze.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}};function v4(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function y4(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function Wle(t){return t instanceof x_&&t.isStandaloneSpan()}function Gle(t){const e=Ar();if(!e)return;const r=t[1];if(!r||r.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function Kle(t,e,r){if(!kc(t))return[!1];let n,s;typeof t.tracesSampler=="function"?(s=t.tracesSampler({...e,inheritOrSampleWith:l=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):l}),n=!0):e.parentSampled!==void 0?s=e.parentSampled:typeof t.tracesSampleRate<"u"&&(s=t.tracesSampleRate,n=!0);const a=jg(s);if(a===void 0)return ot&&ze.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!a)return ot&&ze.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,a,n];const o=r<a;return o||ot&&ze.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,a,n]}const C9="__SENTRY_SUPPRESS_TRACING__";function b_(t){const e=T9();if(e.startInactiveSpan)return e.startInactiveSpan(t);const r=Qle(t),{forceTransaction:n,parentSpan:s}=t;return(t.scope?o=>Bv(t.scope,o):s!==void 0?o=>Xle(s,o):o=>o())(()=>{const o=fn(),l=Zle(o,s);return t.onlyIfParent&&!l?new ed:Yle({parentSpan:l,spanArguments:r,forceTransaction:n,scope:o})})}function Xle(t,e){const r=T9();return r.withActiveSpan?r.withActiveSpan(t,e):Bv(n=>(_g(n,t||void 0),e(n)))}function Yle({parentSpan:t,spanArguments:e,forceTransaction:r,scope:n}){if(!kc()){const o=new ed;if(r||!t){const l={sampled:"false",sample_rate:"0",transaction:e.name,...Oc(o)};U0(o,l)}return o}const s=Nl();let a;if(t&&!r)a=Jle(t,n,e),_9(t,a);else if(t){const o=Oc(t),{traceId:l,spanId:c}=t.spanContext(),u=Ed(t);a=x4({traceId:l,parentSpanId:c,...e},n,u),U0(a,o)}else{const{traceId:o,dsc:l,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...n.getPropagationContext()};a=x4({traceId:o,parentSpanId:c,...e},n,u),l&&U0(a,l)}return Vle(a),nle(a,n,s),a}function Qle(t){const r={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const n={...r};return n.startTimestamp=Hu(t.startTime),delete n.startTime,n}return r}function T9(){const t=Ad();return dp(t)}function x4(t,e,r){const n=Ar(),s=n?.getOptions()||{},{name:a=""}=t,o={spanAttributes:{...t.attributes},spanName:a,parentSampled:r};n?.emit("beforeSampling",o,{decision:!1});const l=o.parentSampled??r,c=o.spanAttributes,u=e.getPropagationContext(),[d,f,m]=e.getScopeData().sdkProcessingMetadata[C9]?[!1]:Kle(s,{name:a,parentSampled:l,attributes:c,parentSampleRate:jg(u.dsc?.sample_rate)},u.sampleRand),g=new x_({...t,attributes:{[il]:"custom",[aI]:f!==void 0&&m?f:void 0,...c},sampled:d});return!d&&n&&(ot&&ze.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),n.recordDroppedEvent("sample_rate","transaction")),n&&n.emit("spanStart",g),g}function Jle(t,e,r){const{spanId:n,traceId:s}=t.spanContext(),a=e.getScopeData().sdkProcessingMetadata[C9]?!1:Ed(t),o=a?new x_({...r,parentSpanId:n,traceId:s,sampled:a}):new ed({traceId:s});_9(t,o);const l=Ar();return l&&(l.emit("spanStart",o),r.endTimestamp&&l.emit("spanEnd",o)),o}function Zle(t,e){if(e)return e;if(e===null)return;const r=ub(t);if(!r)return;const n=Ar();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Ii(r):r}const z0={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},ece="heartbeatFailed",tce="idleTimeout",rce="finalTimeout",nce="externalFinish";function P9(t,e={}){const r=new Map;let n=!1,s,a=nce,o=!e.disableAutoFinish;const l=[],{idleTimeout:c=z0.idleTimeout,finalTimeout:u=z0.finalTimeout,childSpanTimeout:d=z0.childSpanTimeout,beforeSpanEnd:f}=e,m=Ar();if(!m||!kc()){const E=new ed,P={sample_rate:"0",sampled:"false",...Oc(E)};return U0(E,P),E}const g=fn(),x=fp(),v=sce(t);v.end=new Proxy(v.end,{apply(E,P,R){if(f&&f(v),P instanceof ed)return;const[O,...D]=R,I=O||Pa(),$=Hu(I),M=B0(v).filter(V=>V!==v);if(!M.length)return S($),Reflect.apply(E,P,[$,...D]);const U=M.map(V=>Gr(V).timestamp).filter(V=>!!V),H=U.length?Math.max(...U):void 0,z=Gr(v).start_timestamp,q=Math.min(z?z+u/1e3:1/0,Math.max(z||-1/0,Math.min($,H||1/0)));return S(q),Reflect.apply(E,P,[q,...D])}});function y(){s&&(clearTimeout(s),s=void 0)}function w(E){y(),s=setTimeout(()=>{!n&&r.size===0&&o&&(a=tce,v.end(E))},c)}function _(E){s=setTimeout(()=>{!n&&o&&(a=ece,v.end(E))},d)}function A(E){y(),r.set(E,!0);const P=Pa();_(P+d/1e3)}function C(E){if(r.has(E)&&r.delete(E),r.size===0){const P=Pa();w(P+c/1e3)}}function S(E){n=!0,r.clear(),l.forEach($=>$()),_g(g,x);const P=Gr(v),{start_timestamp:R}=P;if(!R)return;P.data[db]||v.setAttribute(db,a),ze.log(`[Tracing] Idle span "${P.op}" finished`);const D=B0(v).filter($=>$!==v);let I=0;D.forEach($=>{$.isRecording()&&($.setStatus({code:ss,message:"cancelled"}),$.end(E),ot&&ze.log("[Tracing] Cancelling span since span ended early",JSON.stringify($,void 0,2)));const M=Gr($),{timestamp:U=0,start_timestamp:H=0}=M,z=H<=E,q=(u+c)/1e3,V=U-H<=q;if(ot){const W=JSON.stringify($,void 0,2);z?V||ze.log("[Tracing] Discarding span since it finished after idle span final timeout",W):ze.log("[Tracing] Discarding span since it happened after idle span was finished",W)}(!V||!z)&&(jle(v,$),I++)}),I>0&&v.setAttribute("sentry.idle_span_discarded_spans",I)}return l.push(m.on("spanStart",E=>{if(n||E===v||Gr(E).timestamp||E instanceof x_&&E.isStandaloneSpan())return;B0(v).includes(E)&&A(E.spanContext().spanId)})),l.push(m.on("spanEnd",E=>{n||C(E.spanContext().spanId)})),l.push(m.on("idleSpanEnableAutoFinish",E=>{E===v&&(o=!0,w(),r.size&&_())})),e.disableAutoFinish||w(),setTimeout(()=>{n||(v.setStatus({code:ss,message:"deadline_exceeded"}),a=rce,v.end())},u),v}function sce(t){const e=b_(t);return _g(fn(),e),ot&&ze.log("[Tracing] Started span is an idle span"),e}const yN=0,b4=1,w4=2;function td(t){return new Uv(e=>{e(t)})}function fb(t){return new Uv((e,r)=>{r(t)})}let Uv=class qP{constructor(e){this._state=yN,this._handlers=[],this._runExecutor(e)}then(e,r){return new qP((n,s)=>{this._handlers.push([!1,a=>{if(!e)n(a);else try{n(e(a))}catch(o){s(o)}},a=>{if(!r)s(a);else try{n(r(a))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(r=>r,e)}finally(e){return new qP((r,n)=>{let s,a;return this.then(o=>{a=!1,s=o,e&&e()},o=>{a=!0,s=o,e&&e()}).then(()=>{if(a){n(s);return}r(s)})})}_executeHandlers(){if(this._state===yN)return;const e=this._handlers.slice();this._handlers=[],e.forEach(r=>{r[0]||(this._state===b4&&r[1](this._value),this._state===w4&&r[2](this._value),r[0]=!0)})}_runExecutor(e){const r=(a,o)=>{if(this._state===yN){if(y_(o)){o.then(n,s);return}this._state=a,this._value=o,this._executeHandlers()}},n=a=>{r(b4,a)},s=a=>{r(w4,a)};try{e(n,s)}catch(a){s(a)}}};function VP(t,e,r,n=0){return new Uv((s,a)=>{const o=t[n];if(e===null||typeof o!="function")s(e);else{const l=o({...e},r);ot&&o.id&&l===null&&ze.log(`Event processor "${o.id}" dropped event`),y_(l)?l.then(c=>VP(t,c,r,n+1).then(s)).then(null,a):VP(t,l,r,n+1).then(s).then(null,a)}})}function ace(t,e){const{fingerprint:r,span:n,breadcrumbs:s,sdkProcessingMetadata:a}=e;ice(t,e),n&&cce(t,n),uce(t,r),oce(t,s),lce(t,a)}function _4(t,e){const{extra:r,tags:n,user:s,contexts:a,level:o,sdkProcessingMetadata:l,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:f,propagationContext:m,transactionName:g,span:x}=e;Lx(t,"extra",r),Lx(t,"tags",n),Lx(t,"user",s),Lx(t,"contexts",a),t.sdkProcessingMetadata=$v(t.sdkProcessingMetadata,l,2),o&&(t.level=o),g&&(t.transactionName=g),x&&(t.span=x),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),f.length&&(t.attachments=[...t.attachments,...f]),t.propagationContext={...t.propagationContext,...m}}function Lx(t,e,r){t[e]=$v(t[e],r,1)}function ice(t,e){const{extra:r,tags:n,user:s,contexts:a,level:o,transactionName:l}=e;Object.keys(r).length&&(t.extra={...r,...t.extra}),Object.keys(n).length&&(t.tags={...n,...t.tags}),Object.keys(s).length&&(t.user={...s,...t.user}),Object.keys(a).length&&(t.contexts={...a,...t.contexts}),o&&(t.level=o),l&&t.type!=="transaction"&&(t.transaction=l)}function oce(t,e){const r=[...t.breadcrumbs||[],...e];t.breadcrumbs=r.length?r:void 0}function lce(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function cce(t,e){t.contexts={trace:ble(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:Oc(e),...t.sdkProcessingMetadata};const r=Ii(e),n=Gr(r).description;n&&!t.transaction&&t.type==="transaction"&&(t.transaction=n)}function uce(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}let $x,S4,Fx;function dce(t){const e=Cr._sentryDebugIds;if(!e)return{};const r=Object.keys(e);return Fx&&r.length===S4||(S4=r.length,Fx=r.reduce((n,s)=>{$x||($x={});const a=$x[s];if(a)n[a[0]]=a[1];else{const o=t(s);for(let l=o.length-1;l>=0;l--){const u=o[l]?.filename,d=e[s];if(u&&d){n[u]=d,$x[s]=[u,d];break}}}return n},{})),Fx}function hce(t,e,r,n,s,a){const{normalizeDepth:o=3,normalizeMaxBreadth:l=1e3}=t,c={...e,event_id:e.event_id||r.event_id||Ri(),timestamp:e.timestamp||Nd()},u=r.integrations||t.integrations.map(y=>y.name);fce(c,t),gce(c,u),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&pce(c,t.stackParser);const d=yce(n,r.captureContext);r.mechanism&&mf(c,r.mechanism);const f=s?s.getEventProcessors():[],m=Yoe().getScopeData();if(a){const y=a.getScopeData();_4(m,y)}if(d){const y=d.getScopeData();_4(m,y)}const g=[...r.attachments||[],...m.attachments];g.length&&(r.attachments=g),ace(c,m);const x=[...f,...m.eventProcessors];return VP(x,c,r).then(y=>(y&&mce(y),typeof o=="number"&&o>0?vce(y,o,l):y))}function fce(t,e){const{environment:r,release:n,dist:s,maxValueLength:a=250}=e;t.environment=t.environment||r||uI,!t.release&&n&&(t.release=n),!t.dist&&s&&(t.dist=s);const o=t.request;o?.url&&(o.url=cb(o.url,a))}function pce(t,e){const r=dce(e);t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(s=>{s.filename&&(s.debug_id=r[s.filename])})})}function mce(t){const e={};if(t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(s=>{s.debug_id&&(s.abs_path?e[s.abs_path]=s.debug_id:s.filename&&(e[s.filename]=s.debug_id),delete s.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const r=t.debug_meta.images;Object.entries(e).forEach(([n,s])=>{r.push({type:"sourcemap",code_file:n,debug_id:s})})}function gce(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function vce(t,e,r){if(!t)return null;const n={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(s=>({...s,...s.data&&{data:Xo(s.data,e,r)}}))},...t.user&&{user:Xo(t.user,e,r)},...t.contexts&&{contexts:Xo(t.contexts,e,r)},...t.extra&&{extra:Xo(t.extra,e,r)}};return t.contexts?.trace&&n.contexts&&(n.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(n.contexts.trace.data=Xo(t.contexts.trace.data,e,r))),t.spans&&(n.spans=t.spans.map(s=>({...s,...s.data&&{data:Xo(s.data,e,r)}}))),t.contexts?.flags&&n.contexts&&(n.contexts.flags=Xo(t.contexts.flags,3,r)),n}function yce(t,e){if(!e)return t;const r=t?t.clone():new Ju;return r.update(e),r}function xce(t){if(t)return bce(t)?{captureContext:t}:_ce(t)?{captureContext:t}:t}function bce(t){return t instanceof Ju||typeof t=="function"}const wce=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function _ce(t){return Object.keys(t).some(e=>wce.includes(e))}function k9(t,e){return fn().captureException(t,xce(e))}function O9(t,e){return fn().captureEvent(t,e)}function Sce(t,e){Nl().setContext(t,e)}function jce(){return Nl().lastEventId()}function Ace(){const t=Ar();return t?.getOptions().enabled!==!1&&!!t?.getTransport()}function j4(t){const e=Nl(),r=fn(),{userAgent:n}=Cr.navigator||{},s=Boe({user:r.getUser()||e.getUser(),...n&&{userAgent:n},...t}),a=e.getSession();return a?.status==="ok"&&gf(a,{status:"exited"}),R9(),e.setSession(s),s}function R9(){const t=Nl(),r=fn().getSession()||t.getSession();r&&Uoe(r),I9(),t.setSession()}function I9(){const t=Nl(),e=Ar(),r=t.getSession();r&&e&&e.captureSession(r)}function A4(t=!1){if(t){R9();return}I9()}const Nce="7";function M9(t){const e=t.protocol?`${t.protocol}:`:"",r=t.port?`:${t.port}`:"";return`${e}//${t.host}${r}${t.path?`/${t.path}`:""}/api/`}function Ece(t){return`${M9(t)}${t.projectId}/envelope/`}function Cce(t,e){const r={sentry_version:Nce};return t.publicKey&&(r.sentry_key=t.publicKey),e&&(r.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(r).toString()}function Tce(t,e,r){return e||`${Ece(t)}?${Cce(t,r)}`}function Pce(t,e){const r=g9(t);if(!r)return"";const n=`${M9(r)}embed/error-page/`;let s=`dsn=${hp(r)}`;for(const a in e)if(a!=="dsn"&&a!=="onClose")if(a==="user"){const o=e.user;if(!o)continue;o.name&&(s+=`&name=${encodeURIComponent(o.name)}`),o.email&&(s+=`&email=${encodeURIComponent(o.email)}`)}else s+=`&${encodeURIComponent(a)}=${encodeURIComponent(e[a])}`;return`${n}?${s}`}const N4=[];function kce(t){const e={};return t.forEach(r=>{const{name:n}=r,s=e[n];s&&!s.isDefaultInstance&&r.isDefaultInstance||(e[n]=r)}),Object.values(e)}function Oce(t){const e=t.defaultIntegrations||[],r=t.integrations;e.forEach(s=>{s.isDefaultInstance=!0});let n;if(Array.isArray(r))n=[...e,...r];else if(typeof r=="function"){const s=r(e);n=Array.isArray(s)?s:[s]}else n=e;return kce(n)}function Rce(t,e){const r={};return e.forEach(n=>{n&&D9(t,n,r)}),r}function E4(t,e){for(const r of e)r?.afterAllSetup&&r.afterAllSetup(t)}function D9(t,e,r){if(r[e.name]){ot&&ze.log(`Integration skipped because it was already installed: ${e.name}`);return}if(r[e.name]=e,N4.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),N4.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,a)=>n(s,a,t))}if(typeof e.processEvent=="function"){const n=e.processEvent.bind(e),s=Object.assign((a,o)=>n(a,o,t),{id:e.name});t.addEventProcessor(s)}ot&&ze.log(`Integration installed: ${e.name}`)}function Ice(t,e,r){const n=[{type:"client_report"},{timestamp:Nd(),discarded_events:t}];return pp(e?{dsn:e}:{},[n])}function L9(t){const e=[];t.message&&e.push(t.message);try{const r=t.exception.values[t.exception.values.length-1];r?.value&&(e.push(r.value),r.type&&e.push(`${r.type}: ${r.value}`))}catch{}return e}function Mce(t){const{trace_id:e,parent_span_id:r,span_id:n,status:s,origin:a,data:o,op:l}=t.contexts?.trace??{};return{data:o??{},description:t.transaction,op:l,parent_span_id:r,span_id:n??"",start_timestamp:t.start_timestamp??0,status:s,timestamp:t.timestamp,trace_id:e??"",origin:a,profile_id:o?.[iI],exclusive_time:o?.[oI],measurements:t.measurements,is_segment:!0}}function Dce(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[iI]:t.profile_id},...t.exclusive_time&&{[oI]:t.exclusive_time}}}},measurements:t.measurements}}const C4="Not capturing exception because it's already been captured.",T4="Discarded session because of missing or non-string release",$9=Symbol.for("SentryInternalError"),F9=Symbol.for("SentryDoNotSendEventError");function q0(t){return{message:t,[$9]:!0}}function xN(t){return{message:t,[F9]:!0}}function P4(t){return!!t&&typeof t=="object"&&$9 in t}function k4(t){return!!t&&typeof t=="object"&&F9 in t}class Lce{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=g9(e.dsn):ot&&ze.warn("No DSN provided, client will not send events."),this._dsn){const r=Tce(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}}captureException(e,r,n){const s=Ri();if(a4(e))return ot&&ze.log(C4),s;const a={event_id:s,...r};return this._process(this.eventFromException(e,a).then(o=>this._captureEvent(o,a,n))),a.event_id}captureMessage(e,r,n,s){const a={event_id:Ri(),...n},o=eI(e)?e:String(e),l=tI(e)?this.eventFromMessage(o,r,a):this.eventFromException(e,a);return this._process(l.then(c=>this._captureEvent(c,a,s))),a.event_id}captureEvent(e,r,n){const s=Ri();if(r?.originalException&&a4(r.originalException))return ot&&ze.log(C4),s;const a={event_id:s,...r},o=e.sdkProcessingMetadata||{},l=o.capturedSpanScope,c=o.capturedSpanIsolationScope;return this._process(this._captureEvent(e,a,l||n,c)),a.event_id}captureSession(e){this.sendSession(e),gf(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const r=this._transport;return r?(this.emit("flush"),this._isClientDoneProcessing(e).then(n=>r.flush(e).then(s=>n&&s))):td(!0)}close(e){return this.flush(e).then(r=>(this.getOptions().enabled=!1,this.emit("close"),r))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const r=this._integrations[e.name];D9(this,e,this._integrations),r||E4(this,[e])}sendEvent(e,r={}){this.emit("beforeSendEvent",e,r);let n=zle(e,this._dsn,this._options._metadata,this._options.tunnel);for(const a of r.attachments||[])n=kle(n,Mle(a));const s=this.sendEnvelope(n);s&&s.then(a=>this.emit("afterSendEvent",e,a),null)}sendSession(e){const{release:r,environment:n=uI}=this._options;if("aggregates"in e){const a=e.attrs||{};if(!a.release&&!r){ot&&ze.warn(T4);return}a.release=a.release||r,a.environment=a.environment||n,e.attrs=a}else{if(!e.release&&!r){ot&&ze.warn(T4);return}e.release=e.release||r,e.environment=e.environment||n}this.emit("beforeSendSession",e);const s=Ule(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(e,r,n=1){if(this._options.sendClientReports){const s=`${e}:${r}`;ot&&ze.log(`Recording outcome: "${s}"${n>1?` (${n} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+n}}on(e,r){const n=this._hooks[e]=this._hooks[e]||[];return n.push(r),()=>{const s=n.indexOf(r);s>-1&&n.splice(s,1)}}emit(e,...r){const n=this._hooks[e];n&&n.forEach(s=>s(...r))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,r=>(ot&&ze.error("Error while sending envelope:",r),r)):(ot&&ze.error("Transport disabled"),td({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=Rce(this,e),E4(this,e)}_updateSessionFromEvent(e,r){let n=r.level==="fatal",s=!1;const a=r.exception?.values;if(a){s=!0;for(const c of a)if(c.mechanism?.handled===!1){n=!0;break}}const o=e.status==="ok";(o&&e.errors===0||o&&n)&&(gf(e,{...n&&{status:"crashed"},errors:e.errors||Number(s||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Uv(r=>{let n=0;const s=1,a=setInterval(()=>{this._numProcessing==0?(clearInterval(a),r(!0)):(n+=s,e&&n>=e&&(clearInterval(a),r(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,r,n,s){const a=this.getOptions(),o=Object.keys(this._integrations);return!r.integrations&&o?.length&&(r.integrations=o),this.emit("preprocessEvent",e,r),e.type||s.setLastEventId(e.event_id||r.event_id),hce(a,e,r,n,this,s).then(l=>{if(l===null)return l;this.emit("postprocessEvent",l,r),l.contexts={trace:Qoe(n),...l.contexts};const c=A9(this,n);return l.sdkProcessingMetadata={dynamicSamplingContext:c,...l.sdkProcessingMetadata},l})}_captureEvent(e,r={},n=fn(),s=Nl()){return ot&&HP(e)&&ze.log(`Captured error event \`${L9(e)[0]||"<unknown>"}\``),this._processEvent(e,r,n,s).then(a=>a.event_id,a=>{ot&&(k4(a)?ze.log(a.message):P4(a)?ze.warn(a.message):ze.warn(a))})}_processEvent(e,r,n,s){const a=this.getOptions(),{sampleRate:o}=a,l=B9(e),c=HP(e),u=e.type||"error",d=`before send for type \`${u}\``,f=typeof o>"u"?void 0:jg(o);if(c&&typeof f=="number"&&Math.random()>f)return this.recordDroppedEvent("sample_rate","error"),fb(xN(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const m=u==="replay_event"?"replay":u;return this._prepareEvent(e,r,n,s).then(g=>{if(g===null)throw this.recordDroppedEvent("event_processor",m),xN("An event processor returned `null`, will not send event.");if(r.data&&r.data.__sentry__===!0)return g;const v=Fce(this,a,g,r);return $ce(v,d)}).then(g=>{if(g===null){if(this.recordDroppedEvent("before_send",m),l){const w=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",w)}throw xN(`${d} returned \`null\`, will not send event.`)}const x=n.getSession()||s.getSession();if(c&&x&&this._updateSessionFromEvent(x,g),l){const y=g.sdkProcessingMetadata?.spanCountBeforeProcessing||0,w=g.spans?g.spans.length:0,_=y-w;_>0&&this.recordDroppedEvent("before_send","span",_)}const v=g.transaction_info;if(l&&v&&g.transaction!==e.transaction){const y="custom";g.transaction_info={...v,source:y}}return this.sendEvent(g,r),g}).then(null,g=>{throw k4(g)||P4(g)?g:(this.captureException(g,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:g}),q0(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${g}`))})}_process(e){this._numProcessing++,e.then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([r,n])=>{const[s,a]=r.split(":");return{reason:s,category:a,quantity:n}})}_flushOutcomes(){ot&&ze.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){ot&&ze.log("No outcomes to send");return}if(!this._dsn){ot&&ze.log("No dsn provided, will not send outcomes");return}ot&&ze.log("Sending outcomes:",e);const r=Ice(e,this._options.tunnel&&hp(this._dsn));this.sendEnvelope(r)}}function $ce(t,e){const r=`${e} must return \`null\` or a valid event.`;if(y_(t))return t.then(n=>{if(!wg(n)&&n!==null)throw q0(r);return n},n=>{throw q0(`${e} rejected with ${n}`)});if(!wg(t)&&t!==null)throw q0(r);return t}function Fce(t,e,r,n){const{beforeSend:s,beforeSendTransaction:a,beforeSendSpan:o,ignoreSpans:l}=e;let c=r;if(HP(c)&&s)return s(c,n);if(B9(c)){if(o||l){const u=Mce(c);if(l?.length&&zP(u,l))return null;if(o){const d=o(u);d?c=$v(r,Dce(d)):FP()}if(c.spans){const d=[],f=c.spans;for(const g of f){if(l?.length&&zP(g,l)){$le(f,g);continue}if(o){const x=o(g);x?d.push(x):(FP(),d.push(g))}else d.push(g)}const m=c.spans.length-d.length;m&&t.recordDroppedEvent("before_send","span",m),c.spans=d}}if(a){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return a(c,n)}}return c}function HP(t){return t.type===void 0}function B9(t){return t.type==="transaction"}function Bce(t){return[{type:"log",item_count:t.length,content_type:"application/vnd.sentry.items.log+json"},{items:t}]}function Uce(t,e,r,n){const s={};return e?.sdk&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),r&&n&&(s.dsn=hp(n)),pp(s,[Bce(t)])}function bN(t,e){const r=zce(t)??[];if(r.length===0)return;const n=t.getOptions(),s=Uce(r,n._metadata,n.tunnel,t.getDsn());U9().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(s)}function zce(t){return U9().get(t)}function U9(){return Iv("clientToLogBufferMap",()=>new WeakMap)}function qce(t,e){e.debug===!0&&(ot?ze.enable():cp(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),fn().update(e.initialScope);const n=new t(e);return Vce(n),n.init(),n}function Vce(t){fn().setClient(t)}const z9=Symbol.for("SentryBufferFullError");function Hce(t){const e=[];function r(){return t===void 0||e.length<t}function n(o){return e.splice(e.indexOf(o),1)[0]||Promise.resolve(void 0)}function s(o){if(!r())return fb(z9);const l=o();return e.indexOf(l)===-1&&e.push(l),l.then(()=>n(l)).then(null,()=>n(l).then(null,()=>{})),l}function a(o){return new Uv((l,c)=>{let u=e.length;if(!u)return l(!0);const d=setTimeout(()=>{o&&o>0&&l(!1)},o);e.forEach(f=>{td(f).then(()=>{--u||(clearTimeout(d),l(!0))},c)})})}return{$:e,add:s,drain:a}}const Wce=60*1e3;function Gce(t,e=Date.now()){const r=parseInt(`${t}`,10);if(!isNaN(r))return r*1e3;const n=Date.parse(`${t}`);return isNaN(n)?Wce:n-e}function Kce(t,e){return t[e]||t.all||0}function Xce(t,e,r=Date.now()){return Kce(t,e)>r}function Yce(t,{statusCode:e,headers:r},n=Date.now()){const s={...t},a=r?.["x-sentry-rate-limits"],o=r?.["retry-after"];if(a)for(const l of a.trim().split(",")){const[c,u,,,d]=l.split(":",5),f=parseInt(c,10),m=(isNaN(f)?60:f)*1e3;if(!u)s.all=n+m;else for(const g of u.split(";"))g==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[g]=n+m):s[g]=n+m}else o?s.all=n+Gce(o,n):e===429&&(s.all=n+60*1e3);return s}const Qce=64;function Jce(t,e,r=Hce(t.bufferSize||Qce)){let n={};const s=o=>r.drain(o);function a(o){const l=[];if(f4(o,(f,m)=>{const g=p4(m);Xce(n,g)?t.recordDroppedEvent("ratelimit_backoff",g):l.push(f)}),l.length===0)return td({});const c=pp(o[0],l),u=f=>{f4(c,(m,g)=>{t.recordDroppedEvent(f,p4(g))})},d=()=>e({body:Ole(c)}).then(f=>(f.statusCode!==void 0&&(f.statusCode<200||f.statusCode>=300)&&ot&&ze.warn(`Sentry responded with status code ${f.statusCode} to sent event.`),n=Yce(n,f),f),f=>{throw u("network_error"),ot&&ze.error("Encountered error running transport request:",f),f});return r.add(d).then(f=>f,f=>{if(f===z9)return ot&&ze.error("Skipped sending event because buffer is full."),u("queue_overflow"),td({});throw f})}return{send:a,flush:s}}const Zce="thismessage:/";function q9(t){return"isRelative"in t}function V9(t,e){const r=t.indexOf("://")<=0&&t.indexOf("//")!==0,n=r?Zce:void 0;try{if("canParse"in URL&&!URL.canParse(t,n))return;const s=new URL(t,n);return r?{isRelative:r,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function eue(t){if(q9(t))return t.pathname;const e=new URL(t);return e.search="",e.hash="",["80","443"].includes(e.port)&&(e.port=""),e.password&&(e.password="%filtered%"),e.username&&(e.username="%filtered%"),e.toString()}function Zh(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const r=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:r,hash:n,relative:e[5]+r+n}}function tue(t){return t.split(/[?#]/,1)[0]}function rue(t){"aggregates"in t?t.attrs?.ip_address===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function nue(t,e,r=[e],n="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:r.map(a=>({name:`${n}:@sentry/${a}`,version:zu})),version:zu}),t._metadata=s}function H9(t={}){const e=t.client||Ar();if(!Ace()||!e)return{};const r=Ad(),n=dp(r);if(n.getTraceData)return n.getTraceData(t);const s=t.scope||fn(),a=t.span||fp(),o=a?wle(a):sue(s),l=a?Oc(a):A9(e,s),c=ile(l);return v9.test(o)?{"sentry-trace":o,baggage:c}:(ze.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function sue(t){const{traceId:e,sampled:r,propagationSpanId:n}=t.getPropagationContext();return y9(e,n,r)}const aue=100;function rd(t,e){const r=Ar(),n=Nl();if(!r)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:a=aue}=r.getOptions();if(a<=0)return;const l={timestamp:Nd(),...t},c=s?cp(()=>s(l,e)):l;c!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",c,e),n.addBreadcrumb(c,a))}let O4;const iue="FunctionToString",R4=new WeakMap,oue=(()=>({name:iue,setupOnce(){O4=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=nI(this),r=R4.has(Ar())&&e!==void 0?e:this;return O4.apply(r,t)}}catch{}},setup(t){R4.set(t,!0)}})),lue=oue,cue=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],uue="EventFilters",due=(t={})=>{let e;return{name:uue,setup(r){const n=r.getOptions();e=I4(t,n)},processEvent(r,n,s){if(!e){const a=s.getOptions();e=I4(t,a)}return fue(r,e)?null:r}}},hue=((t={})=>({...due(t),name:"InboundFilters"}));function I4(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:cue],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function fue(t,e){if(t.type){if(t.type==="transaction"&&mue(t,e.ignoreTransactions))return ot&&ze.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Au(t)}`),!0}else{if(pue(t,e.ignoreErrors))return ot&&ze.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Au(t)}`),!0;if(xue(t))return ot&&ze.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Au(t)}`),!0;if(gue(t,e.denyUrls))return ot&&ze.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Au(t)}.
Url: ${pb(t)}`),!0;if(!vue(t,e.allowUrls))return ot&&ze.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Au(t)}.
Url: ${pb(t)}`),!0}return!1}function pue(t,e){return e?.length?L9(t).some(r=>Vu(r,e)):!1}function mue(t,e){if(!e?.length)return!1;const r=t.transaction;return r?Vu(r,e):!1}function gue(t,e){if(!e?.length)return!1;const r=pb(t);return r?Vu(r,e):!1}function vue(t,e){if(!e?.length)return!0;const r=pb(t);return r?Vu(r,e):!0}function yue(t=[]){for(let e=t.length-1;e>=0;e--){const r=t[e];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null}function pb(t){try{const r=[...t.exception?.values??[]].reverse().find(n=>n.mechanism?.parent_id===void 0&&n.stacktrace?.frames?.length)?.stacktrace?.frames;return r?yue(r):null}catch{return ot&&ze.error(`Cannot extract url for event ${Au(t)}`),null}}function xue(t){return t.exception?.values?.length?!t.message&&!t.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value):!1}function bue(t,e,r,n,s,a){if(!s.exception?.values||!a||!gl(a.originalException,Error))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;o&&(s.exception.values=WP(t,e,n,a.originalException,r,s.exception.values,o,0))}function WP(t,e,r,n,s,a,o,l){if(a.length>=r+1)return a;let c=[...a];if(gl(n[s],Error)){M4(o,l);const u=t(e,n[s]),d=c.length;D4(u,s,d,l),c=WP(t,e,r,n[s],s,[u,...c],u,d)}return Array.isArray(n.errors)&&n.errors.forEach((u,d)=>{if(gl(u,Error)){M4(o,l);const f=t(e,u),m=c.length;D4(f,`errors[${d}]`,m,l),c=WP(t,e,r,u,s,[f,...c],f,m)}}),c}function M4(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function D4(t,e,r,n){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:r,parent_id:n}}function wue(t){const e="console";Mv(e,t),Dv(e,_ue)}function _ue(){"console"in Cr&&voe.forEach(function(t){t in Cr.console&&al(Cr.console,t,function(e){return lb[t]=e,function(...r){qu("console",{args:r,level:t}),lb[t]?.apply(Cr.console,r)}})})}function Sue(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const jue="Dedupe",Aue=(()=>{let t;return{name:jue,processEvent(e){if(e.type)return e;try{if(Eue(e,t))return ot&&ze.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}}),Nue=Aue;function Eue(t,e){return e?!!(Cue(t,e)||Tue(t,e)):!1}function Cue(t,e){const r=t.message,n=e.message;return!(!r&&!n||r&&!n||!r&&n||r!==n||!G9(t,e)||!W9(t,e))}function Tue(t,e){const r=L4(e),n=L4(t);return!(!r||!n||r.type!==n.type||r.value!==n.value||!G9(t,e)||!W9(t,e))}function W9(t,e){let r=ZF(t),n=ZF(e);if(!r&&!n)return!0;if(r&&!n||!r&&n||(r=r,n=n,n.length!==r.length))return!1;for(let s=0;s<n.length;s++){const a=n[s],o=r[s];if(a.filename!==o.filename||a.lineno!==o.lineno||a.colno!==o.colno||a.function!==o.function)return!1}return!0}function G9(t,e){let r=t.fingerprint,n=e.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;r=r,n=n;try{return r.join("")===n.join("")}catch{return!1}}function L4(t){return t.exception?.values?.[0]}function Pue(t,e,r,n,s="auto.http.browser"){if(!t.fetchData)return;const{method:a,url:o}=t.fetchData,l=kc()&&e(o);if(t.endTimestamp&&l){const f=t.fetchData.__span;if(!f)return;const m=n[f];m&&(Oue(m,t),delete n[f]);return}const c=!!fp(),u=l&&c?b_(Iue(o,a,s)):new ed;if(t.fetchData.__span=u.spanContext().spanId,n[u.spanContext().spanId]=u,r(t.fetchData.url)){const f=t.args[0],m=t.args[1]||{},g=kue(f,m,kc()&&c?u:void 0);g&&(t.args[1]=m,m.headers=g)}const d=Ar();if(d){const f={input:t.args,response:t.response,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp};d.emit("beforeOutgoingRequestSpan",u,f)}return u}function kue(t,e,r){const n=H9({span:r}),s=n["sentry-trace"],a=n.baggage;if(!s)return;const o=e.headers||(n9(t)?t.headers:void 0);if(o)if(Rue(o)){const l=new Headers(o);if(l.get("sentry-trace")||l.set("sentry-trace",s),a){const c=l.get("baggage");c?Bx(c)||l.set("baggage",`${c},${a}`):l.set("baggage",a)}return l}else if(Array.isArray(o)){const l=[...o];o.find(u=>u[0]==="sentry-trace")||l.push(["sentry-trace",s]);const c=o.find(u=>u[0]==="baggage"&&Bx(u[1]));return a&&!c&&l.push(["baggage",a]),l}else{const l="sentry-trace"in o?o["sentry-trace"]:void 0,c="baggage"in o?o.baggage:void 0,u=c?Array.isArray(c)?[...c]:[c]:[],d=c&&(Array.isArray(c)?c.find(f=>Bx(f)):Bx(c));return a&&!d&&u.push(a),{...o,"sentry-trace":l??s,baggage:u.length>0?u.join(","):void 0}}else return{...n}}function Oue(t,e){if(e.response){d9(t,e.response.status);const r=e.response?.headers?.get("content-length");if(r){const n=parseInt(r);n>0&&t.setAttribute("http.response_content_length",n)}}else e.error&&t.setStatus({code:ss,message:"internal_error"});t.end()}function Bx(t){return t.split(",").some(e=>e.trim().startsWith(lI))}function Rue(t){return typeof Headers<"u"&&gl(t,Headers)}function Iue(t,e,r){const n=V9(t);return{name:n?`${e} ${eue(n)}`:e,attributes:Mue(t,n,e,r)}}function Mue(t,e,r,n){const s={url:t,type:"fetch","http.method":r,[Zu]:n,[Sg]:"http.client"};return e&&(q9(e)||(s["http.url"]=e.href,s["server.address"]=e.host),e.search&&(s["http.query"]=e.search),e.hash&&(s["http.fragment"]=e.hash)),s}function K9(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const GP=Cr;function Due(){if(!("fetch"in GP))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function $4(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Lue(){if(typeof EdgeRuntime=="string")return!0;if(!Due())return!1;if($4(GP.fetch))return!0;let t=!1;const e=GP.document;if(e&&typeof e.createElement=="function")try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),r.contentWindow?.fetch&&(t=$4(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){ot&&ze.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}function X9(t,e){const r="fetch";Mv(r,t),Dv(r,()=>Y9(void 0,e))}function $ue(t){const e="fetch-body-resolved";Mv(e,t),Dv(e,()=>Y9(Bue))}function Y9(t,e=!1){e&&!Lue()||al(Cr,"fetch",function(r){return function(...n){const s=new Error,{method:a,url:o}=Uue(n),l={args:n,fetchData:{method:a,url:o},startTimestamp:Pa()*1e3,virtualError:s,headers:zue(n)};return t||qu("fetch",{...l}),r.apply(Cr,n).then(async c=>(t?t(c):qu("fetch",{...l,endTimestamp:Pa()*1e3,response:c}),c),c=>{if(qu("fetch",{...l,endTimestamp:Pa()*1e3,error:c}),ZR(c)&&c.stack===void 0&&(c.stack=s.stack,Fi(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const u=new URL(l.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function Fue(t,e){if(t?.body){const r=t.body,n=r.getReader(),s=setTimeout(()=>{r.cancel().then(null,()=>{})},90*1e3);let a=!0;for(;a;){let o;try{o=setTimeout(()=>{r.cancel().then(null,()=>{})},5e3);const{done:l}=await n.read();clearTimeout(o),l&&(e(),a=!1)}catch{a=!1}finally{clearTimeout(o)}}clearTimeout(s),n.releaseLock(),r.cancel().then(null,()=>{})}}function Bue(t){let e;try{e=t.clone()}catch{return}Fue(e,()=>{qu("fetch-body-resolved",{endTimestamp:Pa()*1e3,response:t})})}function KP(t,e){return!!t&&typeof t=="object"&&!!t[e]}function F4(t){return typeof t=="string"?t:t?KP(t,"url")?t.url:t.toString?t.toString():"":""}function Uue(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[r,n]=t;return{url:F4(r),method:KP(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:F4(e),method:KP(e,"method")?String(e.method).toUpperCase():"GET"}}function zue(t){const[e,r]=t;try{if(typeof r=="object"&&r!==null&&"headers"in r&&r.headers)return new Headers(r.headers);if(n9(e))return new Headers(e.headers)}catch{}}function que(){return"npm"}const Zt=Cr;let XP=0;function Q9(){return XP>0}function Vue(){XP++,setTimeout(()=>{XP--})}function yf(t,e={}){function r(s){return typeof s=="function"}if(!r(t))return t;try{const s=t.__sentry_wrapped__;if(s)return typeof s=="function"?s:t;if(nI(t))return t}catch{return t}const n=function(...s){try{const a=s.map(o=>yf(o,e));return t.apply(this,a)}catch(a){throw Vue(),Bv(o=>{o.addEventProcessor(l=>(e.mechanism&&(MP(l,void 0),mf(l,e.mechanism)),l.extra={...l.extra,arguments:s},l)),k9(a)}),a}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}catch{}a9(n,t),Fi(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get(){return t.name}})}catch{}return n}function dI(){const t=Lv(),{referrer:e}=Zt.document||{},{userAgent:r}=Zt.navigator||{},n={...e&&{Referer:e},...r&&{"User-Agent":r}};return{url:t,headers:n}}function hI(t,e){const r=fI(t,e),n={type:Xue(e),value:Yue(e)};return r.length&&(n.stacktrace={frames:r}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function Hue(t,e,r,n){const a=Ar()?.getOptions().normalizeDepth,o=tde(e),l={__serialized__:N9(e,a)};if(o)return{exception:{values:[hI(t,o)]},extra:l};const c={exception:{values:[{type:v_(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:Zue(e,{isUnhandledRejection:n})}]},extra:l};if(r){const u=fI(t,r);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function wN(t,e){return{exception:{values:[hI(t,e)]}}}function fI(t,e){const r=e.stacktrace||e.stack||"",n=Gue(e),s=Kue(e);try{return t(r,n,s)}catch{}return[]}const Wue=/Minified React error #\d+;/i;function Gue(t){return t&&Wue.test(t.message)?1:0}function Kue(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function J9(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function Xue(t){const e=t?.name;return!e&&J9(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function Yue(t){const e=t?.message;return J9(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Que(t,e,r,n){const s=r?.syntheticException||void 0,a=pI(t,e,s,n);return mf(a),a.level="error",r?.event_id&&(a.event_id=r.event_id),td(a)}function Jue(t,e,r="info",n,s){const a=n?.syntheticException||void 0,o=YP(t,e,a,s);return o.level=r,n?.event_id&&(o.event_id=n.event_id),td(o)}function pI(t,e,r,n,s){let a;if(t9(e)&&e.error)return wN(t,e.error);if(t4(e)||Coe(e)){const o=e;if("stack"in e)a=wN(t,e);else{const l=o.name||(t4(o)?"DOMError":"DOMException"),c=o.message?`${l}: ${o.message}`:l;a=YP(t,c,r,n),MP(a,c)}return"code"in o&&(a.tags={...a.tags,"DOMException.code":`${o.code}`}),a}return ZR(e)?wN(t,e):wg(e)||v_(e)?(a=Hue(t,e,r,s),mf(a,{synthetic:!0}),a):(a=YP(t,e,r,n),MP(a,`${e}`),mf(a,{synthetic:!0}),a)}function YP(t,e,r,n){const s={};if(n&&r){const a=fI(t,r);a.length&&(s.exception={values:[{value:e,stacktrace:{frames:a}}]}),mf(s,{synthetic:!0})}if(eI(e)){const{__sentry_template_string__:a,__sentry_template_values__:o}=e;return s.logentry={message:a,params:o},s}return s.message=e,s}function Zue(t,{isUnhandledRejection:e}){const r=Moe(t),n=e?"promise rejection":"exception";return t9(t)?`Event \`ErrorEvent\` captured as ${n} with message \`${t.message}\``:v_(t)?`Event \`${ede(t)}\` (type=${t.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}function ede(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function tde(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const r=t[e];if(r instanceof Error)return r}}const rde=5e3;class nde extends Lce{constructor(e){const r=sde(e),n=Zt.SENTRY_SDK_SOURCE||que();nue(r,"browser",["browser"],n),r._metadata?.sdk&&(r._metadata.sdk.settings={infer_ip:r.sendDefaultPii?"auto":"never",...r._metadata.sdk.settings}),super(r);const{sendDefaultPii:s,sendClientReports:a,enableLogs:o}=this._options;Zt.document&&(a||o)&&Zt.document.addEventListener("visibilitychange",()=>{Zt.document.visibilityState==="hidden"&&(a&&this._flushOutcomes(),o&&bN(this))}),o&&(this.on("flush",()=>{bN(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{bN(this)},rde)})),s&&this.on("beforeSendSession",rue)}eventFromException(e,r){return Que(this._options.stackParser,e,r,this._options.attachStacktrace)}eventFromMessage(e,r="info",n){return Jue(this._options.stackParser,e,r,n,this._options.attachStacktrace)}_prepareEvent(e,r,n,s){return e.platform=e.platform||"javascript",super._prepareEvent(e,r,n,s)}}function sde(t){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:Zt.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...t}}const $n=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ni=globalThis,Jm="10.8.0";function mp(){return mI(ni),ni}function mI(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||Jm,e[Jm]=e[Jm]||{}}function gI(t,e,r=ni){const n=r.__SENTRY__=r.__SENTRY__||{},s=n[Jm]=n[Jm]||{};return s[t]||(s[t]=e())}const ade="Sentry Logger ",B4={};function Z9(t){if(!("console"in ni))return t();const e=ni.console,r={},n=Object.keys(B4);n.forEach(s=>{const a=B4[s];r[s]=e[s],e[s]=a});try{return t()}finally{n.forEach(s=>{e[s]=r[s]})}}function ide(){yI().enabled=!0}function ode(){yI().enabled=!1}function eG(){return yI().enabled}function lde(...t){vI("log",...t)}function cde(...t){vI("warn",...t)}function ude(...t){vI("error",...t)}function vI(t,...e){$n&&eG()&&Z9(()=>{ni.console[t](`${ade}[${t}]:`,...e)})}function yI(){return $n?gI("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const en={enable:ide,disable:ode,isEnabled:eG,log:lde,warn:cde,error:ude},_N="<anonymous>";function tG(t){try{return!t||typeof t!="function"?_N:t.name||_N}catch{return _N}}const V0={},U4={};function xI(t,e){V0[t]=V0[t]||[],V0[t].push(e)}function bI(t,e){if(!U4[t]){U4[t]=!0;try{e()}catch(r){$n&&en.error(`Error while instrumenting ${t}`,r)}}}function Ag(t,e){const r=t&&V0[t];if(r)for(const n of r)try{n(e)}catch(s){$n&&en.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${tG(n)}
Error:`,s)}}const dde=Object.prototype.toString;function wI(t,e){return dde.call(t)===`[object ${e}]`}function bc(t){return wI(t,"String")}function hde(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function z4(t){return t===null||hde(t)||typeof t!="object"&&typeof t!="function"}function fde(t){return wI(t,"Object")}function pde(t){return wI(t,"RegExp")}function rG(t){return!!(t?.then&&typeof t.then=="function")}const nG=ni,mde=80;function Rc(t,e={}){if(!t)return"<unknown>";try{let r=t;const n=5,s=[];let a=0,o=0;const l=" > ",c=l.length;let u;const d=Array.isArray(e)?e:e.keyAttrs,f=!Array.isArray(e)&&e.maxStringLength||mde;for(;r&&a++<n&&(u=gde(r,d),!(u==="html"||a>1&&o+s.length*c+u.length>=f));)s.push(u),o+=u.length,r=r.parentNode;return s.reverse().join(l)}catch{return"<unknown>"}}function gde(t,e){const r=t,n=[];if(!r?.tagName)return"";if(nG.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const s=e?.length?e.filter(o=>r.getAttribute(o)).map(o=>[o,r.getAttribute(o)]):null;if(s?.length)s.forEach(o=>{n.push(`[${o[0]}="${o[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const o=r.className;if(o&&bc(o)){const l=o.split(/\s+/);for(const c of l)n.push(`.${c}`)}}const a=["aria-label","type","name","title","alt"];for(const o of a){const l=r.getAttribute(o);l&&n.push(`[${o}="${l}"]`)}return n.join("")}function vde(t){if(!nG.HTMLElement)return null;let e=t;const r=5;for(let n=0;n<r;n++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function yde(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function H0(t,e,r=!1){return bc(t)?pde(e)?e.test(t):bc(e)?r?t===e:t.includes(e):!1:!1}function xde(t,e=[],r=!1){return e.some(n=>H0(t,n,r))}function mb(t,e,r){if(!(e in t))return;const n=t[e];if(typeof n!="function")return;const s=r(n);typeof s=="function"&&bde(s,n);try{t[e]=s}catch{$n&&en.log(`Failed to replace method "${e}" in object`,t)}}function vl(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{$n&&en.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function bde(t,e){try{const r=e.prototype||{};t.prototype=e.prototype=r,vl(t,"__sentry_original__",e)}catch{}}function wde(){const t=ni;return t.crypto||t.msCrypto}function Gu(t=wde()){let e=()=>Math.random()*16;try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"");t?.getRandomValues&&(e=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(e()&15)>>r/4).toString(16))}const sG=1e3;function aG(){return Date.now()/sG}function _de(){const{performance:t}=ni;if(!t?.now||!t.timeOrigin)return aG;const e=t.timeOrigin;return()=>(e+t.now())/sG}let q4;function wc(){return(q4??(q4=_de()))()}let SN;function Sde(){const{performance:t}=ni;if(!t?.now)return[void 0,"none"];const e=3600*1e3,r=t.now(),n=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+r-n):e,a=s<e,o=t.timing?.navigationStart,c=typeof o=="number"?Math.abs(o+r-n):e,u=c<e;return a||u?s<=c?[t.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[n,"dateNow"]}function Co(){return SN||(SN=Sde()),SN[0]}function jde(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||wc(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Gu()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function iG(t,e,r=2){if(!e||typeof e!="object"||r<=0)return e;if(t&&Object.keys(e).length===0)return t;const n={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=iG(n[s],e[s],r-1));return n}function gb(){return Gu()}function oG(){return Gu().substring(16)}const QP="_sentrySpan";function vb(t,e){e?vl(t,QP,e):delete t[QP]}function yb(t){return t[QP]}const Ade=100;let xb=class JP{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:gb(),sampleRand:Math.random()}}clone(){const e=new JP;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,vb(e,yb(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&jde(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const r=typeof e=="function"?e(this):e,n=r instanceof JP?r.getScopeData():fde(r)?e:void 0,{tags:s,extra:a,user:o,contexts:l,level:c,fingerprint:u=[],propagationContext:d}=n||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...a},this._contexts={...this._contexts,...l},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,vb(this,void 0),this._attachments=[],this.setPropagationContext({traceId:gb(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,r){const n=typeof r=="number"?r:Ade;if(n<=0)return this;const s={timestamp:aG(),...e,message:e.message?yde(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:yb(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=iG(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,r){const n=r?.event_id||Gu();if(!this._client)return $n&&en.warn("No client configured on scope - will not capture exception!"),n;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...r,event_id:n},this),n}captureMessage(e,r,n){const s=n?.event_id||Gu();if(!this._client)return $n&&en.warn("No client configured on scope - will not capture message!"),s;const a=new Error(e);return this._client.captureMessage(e,r,{originalException:e,syntheticException:a,...n,event_id:s},this),s}captureEvent(e,r){const n=r?.event_id||Gu();return this._client?(this._client.captureEvent(e,{...r,event_id:n},this),n):($n&&en.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}};function Nde(){return gI("defaultCurrentScope",()=>new xb)}function Ede(){return gI("defaultIsolationScope",()=>new xb)}let Cde=class{constructor(e,r){let n;e?n=e:n=new xb;let s;r?s=r:s=new xb,this._stack=[{scope:n}],this._isolationScope=s}withScope(e){const r=this._pushScope();let n;try{n=e(r)}catch(s){throw this._popScope(),s}return rG(n)?n.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function xf(){const t=mp(),e=mI(t);return e.stack=e.stack||new Cde(Nde(),Ede())}function Tde(t){return xf().withScope(t)}function Pde(t,e){const r=xf();return r.withScope(()=>(r.getStackTop().scope=t,e(t)))}function V4(t){return xf().withScope(()=>t(xf().getIsolationScope()))}function kde(){return{withIsolationScope:V4,withScope:Tde,withSetScope:Pde,withSetIsolationScope:(t,e)=>V4(e),getCurrentScope:()=>xf().getScope(),getIsolationScope:()=>xf().getIsolationScope()}}function zv(t){const e=mI(t);return e.acs?e.acs:kde()}function To(){const t=mp();return zv(t).getCurrentScope()}function Ode(){const t=mp();return zv(t).getIsolationScope()}function _I(...t){const e=mp(),r=zv(e);if(t.length===2){const[n,s]=t;return n?r.withSetScope(n,s):r.withScope(s)}return r.withScope(t[0])}function qc(){return To().getClient()}const Ng="sentry.source",lG="sentry.sample_rate",Rde="sentry.previous_trace_sample_rate",nd="sentry.op",Vs="sentry.origin",qv="sentry.measurement_unit",Vv="sentry.measurement_value",H4="sentry.custom_span_name",Ide="sentry.profile_id",w_="sentry.exclusive_time",Mde=0,Dde=1,Lde=2,cG="_sentryScope",uG="_sentryIsolationScope";function $de(t,e,r){t&&(vl(t,uG,r),vl(t,cG,e))}function ZP(t){return{scope:t[cG],isolationScope:t[uG]}}const Fde="sentry-",Bde=/^sentry-/;function Ude(t){const e=zde(t);if(!e)return;const r=Object.entries(e).reduce((n,[s,a])=>{if(s.match(Bde)){const o=s.slice(Fde.length);n[o]=a}return n},{});if(Object.keys(r).length>0)return r}function zde(t){if(!(!t||!bc(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,r)=>{const n=W4(r);return Object.entries(n).forEach(([s,a])=>{e[s]=a}),e},{}):W4(t)}function W4(t){return t.split(",").map(e=>e.split("=").map(r=>{try{return decodeURIComponent(r.trim())}catch{return}})).reduce((e,[r,n])=>(r&&n&&(e[r]=n),e),{})}const qde=/^o(\d+)\./;function Vde(t,e=!1){const{host:r,path:n,pass:s,port:a,projectId:o,protocol:l,publicKey:c}=t;return`${l}://${c}${e&&s?`:${s}`:""}@${r}${a?`:${a}`:""}/${n&&`${n}/`}${o}`}function Hde(t){return t.match(qde)?.[1]}function Wde(t){const e=t.getOptions(),{host:r}=t.getDsn()||{};let n;return e.orgId?n=String(e.orgId):r&&(n=Hde(r)),n}function dG(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const hG=0,SI=1;let G4=!1;function Gde(t){const{spanId:e,traceId:r}=t.spanContext(),{data:n,op:s,parent_span_id:a,status:o,origin:l,links:c}=gs(t);return{parent_span_id:a,span_id:e,trace_id:r,data:n,op:s,status:o,origin:l,links:c}}function fG(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:r,traceFlags:n,...s},attributes:a})=>({span_id:e,trace_id:r,sampled:n===SI,attributes:a,...s}))}function ef(t){return typeof t=="number"?K4(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?K4(t.getTime()):wc()}function K4(t){return t>9999999999?t/1e3:t}function gs(t){if(Xde(t))return t.getSpanJSON();const{spanId:e,traceId:r}=t.spanContext();if(Kde(t)){const{attributes:n,startTime:s,name:a,endTime:o,status:l,links:c}=t,u="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0;return{span_id:e,trace_id:r,data:n,description:a,parent_span_id:u,start_timestamp:ef(s),timestamp:ef(o)||void 0,status:pG(l),op:n[nd],origin:n[Vs],links:fG(c)}}return{span_id:e,trace_id:r,start_timestamp:0,data:{}}}function Kde(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function Xde(t){return typeof t.getSpanJSON=="function"}function Hv(t){const{traceFlags:e}=t.spanContext();return e===SI}function pG(t){if(!(!t||t.code===Mde))return t.code===Dde?"ok":t.message||"unknown_error"}const Zm="_sentryChildSpans",ek="_sentryRootSpan";function mG(t,e){const r=t[ek]||t;vl(e,ek,r),t[Zm]?t[Zm].add(e):vl(t,Zm,new Set([e]))}function Yde(t){const e=new Set;function r(n){if(!e.has(n)&&Hv(n)){e.add(n);const s=n[Zm]?Array.from(n[Zm]):[];for(const a of s)r(a)}}return r(t),Array.from(e)}function Mi(t){return t[ek]||t}function Cd(){const t=mp(),e=zv(t);return e.getActiveSpan?e.getActiveSpan():yb(To())}function Qde(){G4||(Z9(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),G4=!0)}function jI(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||qc()?.getOptions();return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}const Jde="production",gG="_frozenDsc";function jN(t,e){vl(t,gG,e)}function Zde(t,e){const r=e.getOptions(),{publicKey:n}=e.getDsn()||{},s={environment:r.environment||Jde,release:r.release,public_key:n,trace_id:t,org_id:Wde(e)};return e.emit("createDsc",s),s}function bb(t){const e=qc();if(!e)return{};const r=Mi(t),n=gs(r),s=n.data,a=r.spanContext().traceState,o=a?.get("sentry.sample_rate")??s[lG]??s[Rde];function l(x){return(typeof o=="number"||typeof o=="string")&&(x.sample_rate=`${o}`),x}const c=r[gG];if(c)return l(c);const u=a?.get("sentry.dsc"),d=u&&Ude(u);if(d)return l(d);const f=Zde(t.spanContext().traceId,e),m=s[Ng],g=n.description;return m!=="url"&&g&&(f.transaction=g),jI()&&(f.sampled=String(Hv(r)),f.sample_rand=a?.get("sentry.sample_rand")??ZP(r).scope?.getPropagationContext().sampleRand.toString()),l(f),e.emit("createDsc",f,r),f}class __{constructor(e={}){this._traceId=e.traceId||gb(),this._spanId=e.spanId||oG()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:hG}}end(e){}setAttribute(e,r){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,r,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,r){}}function ehe(t,e=[]){return[t,e]}function the(t){return[{type:"span"},t]}function rhe(t,e){if(!e?.length||!t.description)return!1;for(const r of e){if(nhe(r)){if(H0(t.description,r))return!0;continue}if(!r.name&&!r.op)continue;const n=r.name?H0(t.description,r.name):!0,s=r.op?t.op&&H0(t.op,r.op):!0;if(n&&s)return!0}return!1}function nhe(t){return typeof t=="string"||t instanceof RegExp}function she(t,e){function r(g){return!!g.trace_id&&!!g.public_key}const n=bb(t[0]),s=e?.getDsn(),a=e?.getOptions().tunnel,o={sent_at:new Date().toISOString(),...r(n)&&{trace:n},...!!a&&s&&{dsn:Vde(s)}},{beforeSendSpan:l,ignoreSpans:c}=e?.getOptions()||{},u=c?.length?t.filter(g=>!rhe(gs(g),c)):t,d=t.length-u.length;d&&e?.recordDroppedEvent("before_send","span",d);const f=l?g=>{const x=gs(g),v=l(x);return v||(Qde(),x)}:gs,m=[];for(const g of u){const x=f(g);x&&m.push(the(x))}return ehe(o,m)}function ahe(t){if(!$n)return;const{description:e="< unknown name >",op:r="< unknown op >",parent_span_id:n}=gs(t),{spanId:s}=t.spanContext(),a=Hv(t),o=Mi(t),l=o===t,c=`[Tracing] Starting ${a?"sampled":"unsampled"} ${l?"root ":""}span`,u=[`op: ${r}`,`name: ${e}`,`ID: ${s}`];if(n&&u.push(`parent ID: ${n}`),!l){const{op:d,description:f}=gs(o);u.push(`root ID: ${o.spanContext().spanId}`),d&&u.push(`root op: ${d}`),f&&u.push(`root description: ${f}`)}en.log(`${c}
  ${u.join(`
  `)}`)}function ihe(t){if(!$n)return;const{description:e="< unknown name >",op:r="< unknown op >"}=gs(t),{spanId:n}=t.spanContext(),a=Mi(t)===t,o=`[Tracing] Finishing "${r}" ${a?"root ":""}span "${e}" with ID ${n}`;en.log(o)}function ohe(t,e,r,n=Cd()){const s=n&&Mi(n);s&&($n&&en.log(`[Measurement] Setting measurement on root span: ${t} = ${e} ${r}`),s.addEvent(t,{[Vv]:e,[qv]:r}))}function X4(t){if(!t||t.length===0)return;const e={};return t.forEach(r=>{const n=r.attributes||{},s=n[qv],a=n[Vv];typeof s=="string"&&typeof a=="number"&&(e[r.name]={value:a,unit:s})}),e}const Y4=1e3;class AI{constructor(e={}){this._traceId=e.traceId||gb(),this._spanId=e.spanId||oG(),this._startTime=e.startTimestamp||wc(),this._links=e.links,this._attributes={},this.setAttributes({[Vs]:"manual",[nd]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,r){}spanContext(){const{_spanId:e,_traceId:r,_sampled:n}=this;return{spanId:e,traceId:r,traceFlags:n?SI:hG}}setAttribute(e,r){return r===void 0?delete this._attributes[e]:this._attributes[e]=r,this}setAttributes(e){return Object.keys(e).forEach(r=>this.setAttribute(r,e[r])),this}updateStartTime(e){this._startTime=ef(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(Ng,"custom"),this}end(e){this._endTime||(this._endTime=ef(e),ihe(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[nd],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:pG(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Vs],profile_id:this._attributes[Ide],exclusive_time:this._attributes[w_],measurements:X4(this._events),is_segment:this._isStandaloneSpan&&Mi(this)===this||void 0,segment_id:this._isStandaloneSpan?Mi(this).spanContext().spanId:void 0,links:fG(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,r,n){$n&&en.log("[Tracing] Adding an event to span:",e);const s=Q4(r)?r:n||wc(),a=Q4(r)?{}:r||{},o={name:e,time:ef(s),attributes:a};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=qc();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Mi(this)))return;if(this._isStandaloneSpan){this._sampled?che(she([this],e)):($n&&en.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const n=this._convertSpanToTransaction();n&&(ZP(this).scope||To()).captureEvent(n)}_convertSpanToTransaction(){if(!J4(gs(this)))return;this._name||($n&&en.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:r}=ZP(this),n=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const a=Yde(this).filter(d=>d!==this&&!lhe(d)).map(d=>gs(d)).filter(J4),o=this._attributes[Ng];delete this._attributes[H4],a.forEach(d=>{delete d.data[H4]});const l={contexts:{trace:Gde(this)},spans:a.length>Y4?a.sort((d,f)=>d.start_timestamp-f.start_timestamp).slice(0,Y4):a,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:r,dynamicSamplingContext:bb(this)},request:n,...o&&{transaction_info:{source:o}}},c=X4(this._events);return c&&Object.keys(c).length&&($n&&en.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}}function Q4(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function J4(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function lhe(t){return t instanceof AI&&t.isStandaloneSpan()}function che(t){const e=qc();if(!e)return;const r=t[1];if(!r||r.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function uhe(t,e,r=()=>{}){let n;try{n=t()}catch(s){throw e(s),r(),s}return dhe(n,e,r)}function dhe(t,e,r){return rG(t)?t.then(n=>(r(),n),n=>{throw e(n),r(),n}):(r(),t)}function hhe(t,e,r){if(!jI(t))return[!1];let n,s;typeof t.tracesSampler=="function"?(s=t.tracesSampler({...e,inheritOrSampleWith:l=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):l}),n=!0):e.parentSampled!==void 0?s=e.parentSampled:typeof t.tracesSampleRate<"u"&&(s=t.tracesSampleRate,n=!0);const a=dG(s);if(a===void 0)return $n&&en.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!a)return $n&&en.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,a,n];const o=r<a;return o||$n&&en.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,a,n]}const vG="__SENTRY_SUPPRESS_TRACING__";function fhe(t,e){const r=EI();if(r.startSpan)return r.startSpan(t,e);const n=bG(t),{forceTransaction:s,parentSpan:a,scope:o}=t,l=o?.clone();return _I(l,()=>mhe(a)(()=>{const u=To(),d=wG(u,a),m=t.onlyIfParent&&!d?new __:xG({parentSpan:d,spanArguments:n,forceTransaction:s,scope:u});return vb(u,m),uhe(()=>e(m),()=>{const{status:g}=gs(m);m.isRecording()&&(!g||g==="ok")&&m.setStatus({code:Lde,message:"internal_error"})},()=>{m.end()})}))}function yG(t){const e=EI();if(e.startInactiveSpan)return e.startInactiveSpan(t);const r=bG(t),{forceTransaction:n,parentSpan:s}=t;return(t.scope?o=>_I(t.scope,o):s!==void 0?o=>NI(s,o):o=>o())(()=>{const o=To(),l=wG(o,s);return t.onlyIfParent&&!l?new __:xG({parentSpan:l,spanArguments:r,forceTransaction:n,scope:o})})}function NI(t,e){const r=EI();return r.withActiveSpan?r.withActiveSpan(t,e):_I(n=>(vb(n,t||void 0),e(n)))}function xG({parentSpan:t,spanArguments:e,forceTransaction:r,scope:n}){if(!jI()){const o=new __;if(r||!t){const l={sampled:"false",sample_rate:"0",transaction:e.name,...bb(o)};jN(o,l)}return o}const s=Ode();let a;if(t&&!r)a=phe(t,n,e),mG(t,a);else if(t){const o=bb(t),{traceId:l,spanId:c}=t.spanContext(),u=Hv(t);a=Z4({traceId:l,parentSpanId:c,...e},n,u),jN(a,o)}else{const{traceId:o,dsc:l,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...n.getPropagationContext()};a=Z4({traceId:o,parentSpanId:c,...e},n,u),l&&jN(a,l)}return ahe(a),$de(a,n,s),a}function bG(t){const r={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const n={...r};return n.startTimestamp=ef(t.startTime),delete n.startTime,n}return r}function EI(){const t=mp();return zv(t)}function Z4(t,e,r){const n=qc(),s=n?.getOptions()||{},{name:a=""}=t,o={spanAttributes:{...t.attributes},spanName:a,parentSampled:r};n?.emit("beforeSampling",o,{decision:!1});const l=o.parentSampled??r,c=o.spanAttributes,u=e.getPropagationContext(),[d,f,m]=e.getScopeData().sdkProcessingMetadata[vG]?[!1]:hhe(s,{name:a,parentSampled:l,attributes:c,parentSampleRate:dG(u.dsc?.sample_rate)},u.sampleRand),g=new AI({...t,attributes:{[Ng]:"custom",[lG]:f!==void 0&&m?f:void 0,...c},sampled:d});return!d&&n&&($n&&en.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),n.recordDroppedEvent("sample_rate","transaction")),n&&n.emit("spanStart",g),g}function phe(t,e,r){const{spanId:n,traceId:s}=t.spanContext(),a=e.getScopeData().sdkProcessingMetadata[vG]?!1:Hv(t),o=a?new AI({...r,parentSpanId:n,traceId:s,sampled:a}):new __({traceId:s});mG(t,o);const l=qc();return l&&(l.emit("spanStart",o),r.endTimestamp&&l.emit("spanEnd",o)),o}function wG(t,e){if(e)return e;if(e===null)return;const r=yb(t);if(!r)return;const n=qc();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Mi(r):r}function mhe(t){return t!==void 0?e=>NI(t,e):e=>e()}function ghe(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const r=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:r,hash:n,relative:e[5]+r+n}}const eB=ni;function vhe(){return"history"in eB&&!!eB.history}function yhe(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}const bf=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$t=ni,xhe=(t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good",Wv=(t,e,r,n)=>{let s,a;return o=>{e.value>=0&&(o||n)&&(a=e.value-(s??0),(a||s===void 0)&&(s=e.value,e.delta=a,e.rating=xhe(e.value,r),t(e)))}},bhe=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Gv=(t=!0)=>{const e=$t.performance?.getEntriesByType?.("navigation")[0];if(!t||e&&e.responseStart>0&&e.responseStart<performance.now())return e},gp=()=>Gv()?.activationStart??0,Kv=(t,e=-1)=>{const r=Gv();let n="navigate";return r&&($t.document?.prerendering||gp()>0?n="prerender":$t.document?.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:bhe(),navigationType:n}},AN=new WeakMap;function CI(t,e){return AN.get(t)||AN.set(t,new e),AN.get(t)}class wb{constructor(){wb.prototype.__init.call(this),wb.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){if(e.hadRecentInput)return;const r=this._sessionEntries[0],n=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&r&&n&&e.startTime-n.startTime<1e3&&e.startTime-r.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),this._onAfterProcessingUnexpectedShift?.(e)}}const vp=(t,e,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const n=new PerformanceObserver(s=>{Promise.resolve().then(()=>{e(s.getEntries())})});return n.observe({type:t,buffered:!0,...r}),n}}catch{}},TI=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let eg=-1;const whe=()=>$t.document?.visibilityState==="hidden"&&!$t.document?.prerendering?0:1/0,_b=t=>{$t.document.visibilityState==="hidden"&&eg>-1&&(eg=t.type==="visibilitychange"?t.timeStamp:0,She())},_he=()=>{addEventListener("visibilitychange",_b,!0),addEventListener("prerenderingchange",_b,!0)},She=()=>{removeEventListener("visibilitychange",_b,!0),removeEventListener("prerenderingchange",_b,!0)},PI=()=>{if($t.document&&eg<0){const t=gp();eg=($t.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(r=>r.name==="hidden"&&r.startTime>t)[0]?.startTime)??whe(),_he()}return{get firstHiddenTime(){return eg}}},S_=t=>{$t.document?.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},jhe=[1800,3e3],Ahe=(t,e={})=>{S_(()=>{const r=PI(),n=Kv("FCP");let s;const o=vp("paint",l=>{for(const c of l)c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<r.firstHiddenTime&&(n.value=Math.max(c.startTime-gp(),0),n.entries.push(c),s(!0)))});o&&(s=Wv(t,n,jhe,e.reportAllChanges))})},Nhe=[.1,.25],Ehe=(t,e={})=>{Ahe(TI(()=>{const r=Kv("CLS",0);let n;const s=CI(e,wb),a=l=>{for(const c of l)s._processEntry(c);s._sessionValue>r.value&&(r.value=s._sessionValue,r.entries=s._sessionEntries,n())},o=vp("layout-shift",a);o&&(n=Wv(t,r,Nhe,e.reportAllChanges),$t.document?.addEventListener("visibilitychange",()=>{$t.document?.visibilityState==="hidden"&&(a(o.takeRecords()),n(!0))}),$t?.setTimeout?.(n))}))};let _G=0,NN=1/0,Ux=0;const Che=t=>{t.forEach(e=>{e.interactionId&&(NN=Math.min(NN,e.interactionId),Ux=Math.max(Ux,e.interactionId),_G=Ux?(Ux-NN)/7+1:0)})};let tk;const SG=()=>tk?_G:performance.interactionCount||0,The=()=>{"interactionCount"in performance||tk||(tk=vp("event",Che,{type:"event",buffered:!0,durationThreshold:0}))},EN=10;let jG=0;const Phe=()=>SG()-jG;class Sb{constructor(){Sb.prototype.__init.call(this),Sb.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){jG=SG(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor(Phe()/50));return this._longestInteractionList[e]}_processEntry(e){if(this._onBeforeProcessingEntry?.(e),!(e.interactionId||e.entryType==="first-input"))return;const r=this._longestInteractionList.at(-1);let n=this._longestInteractionMap.get(e.interactionId);if(n||this._longestInteractionList.length<EN||e.duration>r._latency){if(n?e.duration>n._latency?(n.entries=[e],n._latency=e.duration):e.duration===n._latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(n.id,n),this._longestInteractionList.push(n)),this._longestInteractionList.sort((s,a)=>a._latency-s._latency),this._longestInteractionList.length>EN){const s=this._longestInteractionList.splice(EN);for(const a of s)this._longestInteractionMap.delete(a.id)}this._onAfterProcessingINPCandidate?.(n)}}}const kI=t=>{const e=r=>{(r.type==="pagehide"||$t.document?.visibilityState==="hidden")&&t(r)};$t.document&&(addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},AG=t=>{const e=$t.requestIdleCallback||$t.setTimeout;$t.document?.visibilityState==="hidden"?t():(t=TI(t),e(t),kI(t))},khe=[200,500],Ohe=40,Rhe=(t,e={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&S_(()=>{The();const r=Kv("INP");let n;const s=CI(e,Sb),a=l=>{AG(()=>{for(const u of l)s._processEntry(u);const c=s._estimateP98LongestInteraction();c&&c._latency!==r.value&&(r.value=c._latency,r.entries=c.entries,n())})},o=vp("event",a,{durationThreshold:e.durationThreshold??Ohe});n=Wv(t,r,khe,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),kI(()=>{a(o.takeRecords()),n(!0)}))})};class Ihe{_processEntry(e){this._onBeforeProcessingEntry?.(e)}}const Mhe=[2500,4e3],Dhe=(t,e={})=>{S_(()=>{const r=PI(),n=Kv("LCP");let s;const a=CI(e,Ihe),o=c=>{e.reportAllChanges||(c=c.slice(-1));for(const u of c)a._processEntry(u),u.startTime<r.firstHiddenTime&&(n.value=Math.max(u.startTime-gp(),0),n.entries=[u],s())},l=vp("largest-contentful-paint",o);if(l){s=Wv(t,n,Mhe,e.reportAllChanges);const c=TI(()=>{o(l.takeRecords()),l.disconnect(),s(!0)});for(const u of["keydown","click","visibilitychange"])$t.document&&addEventListener(u,()=>AG(c),{capture:!0,once:!0})}})},Lhe=[800,1800],rk=t=>{$t.document?.prerendering?S_(()=>rk(t)):$t.document?.readyState!=="complete"?addEventListener("load",()=>rk(t),!0):setTimeout(t)},$he=(t,e={})=>{const r=Kv("TTFB"),n=Wv(t,r,Lhe,e.reportAllChanges);rk(()=>{const s=Gv();s&&(r.value=Math.max(s.responseStart-gp(),0),r.entries=[s],n(!0))})},tg={},jb={};let NG,EG,CG,TG;function OI(t,e=!1){return j_("cls",t,Bhe,NG,e)}function RI(t,e=!1){return j_("lcp",t,Uhe,EG,e)}function Fhe(t){return j_("ttfb",t,zhe,CG)}function PG(t){return j_("inp",t,qhe,TG)}function sd(t,e){return kG(t,e),jb[t]||(Vhe(t),jb[t]=!0),OG(t,e)}function Xv(t,e){const r=tg[t];if(r?.length)for(const n of r)try{n(e)}catch(s){bf&&en.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${tG(n)}
Error:`,s)}}function Bhe(){return Ehe(t=>{Xv("cls",{metric:t}),NG=t},{reportAllChanges:!0})}function Uhe(){return Dhe(t=>{Xv("lcp",{metric:t}),EG=t},{reportAllChanges:!0})}function zhe(){return $he(t=>{Xv("ttfb",{metric:t}),CG=t})}function qhe(){return Rhe(t=>{Xv("inp",{metric:t}),TG=t})}function j_(t,e,r,n,s=!1){kG(t,e);let a;return jb[t]||(a=r(),jb[t]=!0),n&&e({metric:n}),OG(t,e,s?a:void 0)}function Vhe(t){const e={};t==="event"&&(e.durationThreshold=0),vp(t,r=>{Xv(t,{entries:r})},e)}function kG(t,e){tg[t]=tg[t]||[],tg[t].push(e)}function OG(t,e,r){return()=>{r&&r();const n=tg[t];if(!n)return;const s=n.indexOf(e);s!==-1&&n.splice(s,1)}}function Hhe(t){return"duration"in t}function CN(t){return typeof t=="number"&&isFinite(t)}function Ic(t,e,r,{...n}){const s=gs(t).start_timestamp;return s&&s>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),NI(t,()=>{const a=yG({startTime:e,...n});return a&&a.end(r),a})}function II(t){const e=qc();if(!e)return;const{name:r,transaction:n,attributes:s,startTime:a}=t,{release:o,environment:l,sendDefaultPii:c}=e.getOptions(),d=e.getIntegrationByName("Replay")?.getReplayId(),f=To(),m=f.getUser(),g=m!==void 0?m.email||m.id||m.ip_address:void 0;let x;try{x=f.getScopeData().contexts.profile.profile_id}catch{}const v={release:o,environment:l,user:g||void 0,profile_id:x||void 0,replay_id:d||void 0,transaction:n,"user_agent.original":$t.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...s};return yG({name:r,attributes:v,startTime:a,experimental:{standalone:!0}})}function A_(){return $t.addEventListener&&$t.performance}function pn(t){return t/1e3}function RG(t){let e="unknown",r="unknown",n="";for(const s of t){if(s==="/"){[e,r]=t.split("/");break}if(!isNaN(Number(s))){e=n==="h"?"http":n,r=t.split(n)[1];break}n+=s}return n===t&&(e=n),{name:e,version:r}}function IG(t){try{return PerformanceObserver.supportedEntryTypes.includes(t)}catch{return!1}}function MG(t,e){let r,n=!1;function s(l){!n&&r&&e(l,r),n=!0}kI(()=>{s("pagehide")});const a=t.on("beforeStartNavigationSpan",(l,c)=>{c?.isRedirect||(s("navigation"),tB(a,o))}),o=t.on("afterStartPageLoadSpan",l=>{r=l.spanContext().spanId,tB(o)})}function tB(...t){t.forEach(e=>e&&setTimeout(e,0))}function Whe(t){let e=0,r;if(!IG("layout-shift"))return;const n=OI(({metric:s})=>{const a=s.entries[s.entries.length-1];a&&(e=s.value,r=a)},!0);MG(t,(s,a)=>{Ghe(e,r,a,s),n()})}function Ghe(t,e,r,n){bf&&en.log(`Sending CLS span (${t})`);const s=pn((Co()||0)+(e?.startTime||0)),a=To().getScopeData().transactionName,o=e?Rc(e.sources[0]?.node):"Layout shift",l={[Vs]:"auto.http.browser.cls",[nd]:"ui.webvital.cls",[w_]:e?.duration||0,"sentry.pageload.span_id":r,"sentry.report_event":n};e?.sources&&e.sources.forEach((u,d)=>{l[`cls.source.${d+1}`]=Rc(u.node)});const c=II({name:o,transaction:a,attributes:l,startTime:s});c&&(c.addEvent("cls",{[qv]:"",[Vv]:t}),c.end(s))}function Khe(t){let e=0,r;if(!IG("largest-contentful-paint"))return;const n=RI(({metric:s})=>{const a=s.entries[s.entries.length-1];a&&(e=s.value,r=a)},!0);MG(t,(s,a)=>{Xhe(e,r,a,s),n()})}function Xhe(t,e,r,n){bf&&en.log(`Sending LCP span (${t})`);const s=pn((Co()||0)+(e?.startTime||0)),a=To().getScopeData().transactionName,o=e?Rc(e.element):"Largest contentful paint",l={[Vs]:"auto.http.browser.lcp",[nd]:"ui.webvital.lcp",[w_]:0,"sentry.pageload.span_id":r,"sentry.report_event":n};e&&(e.element&&(l["lcp.element"]=Rc(e.element)),e.id&&(l["lcp.id"]=e.id),e.url&&(l["lcp.url"]=e.url.trim().slice(0,200)),e.loadTime!=null&&(l["lcp.loadTime"]=e.loadTime),e.renderTime!=null&&(l["lcp.renderTime"]=e.renderTime),e.size!=null&&(l["lcp.size"]=e.size));const c=II({name:o,transaction:a,attributes:l,startTime:s});c&&(c.addEvent("lcp",{[qv]:"millisecond",[Vv]:t}),c.end(s))}const Yhe=2147483647;let rB=0,Ni={},ra,Ab;function Qhe({recordClsStandaloneSpans:t,recordLcpStandaloneSpans:e,client:r}){const n=A_();if(n&&Co()){n.mark&&$t.performance.mark("sentry-tracing-init");const s=e?Khe(r):rfe(),a=nfe(),o=t?Whe(r):tfe();return()=>{s?.(),a(),o?.()}}return()=>{}}function Jhe(){sd("longtask",({entries:t})=>{const e=Cd();if(!e)return;const{op:r,start_timestamp:n}=gs(e);for(const s of t){const a=pn(Co()+s.startTime),o=pn(s.duration);r==="navigation"&&n&&a<n||Ic(e,a,a+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Vs]:"auto.ui.browser.metrics"}})}})}function Zhe(){new PerformanceObserver(e=>{const r=Cd();if(r)for(const n of e.getEntries()){if(!n.scripts[0])continue;const s=pn(Co()+n.startTime),{start_timestamp:a,op:o}=gs(r);if(o==="navigation"&&a&&s<a)continue;const l=pn(n.duration),c={[Vs]:"auto.ui.browser.metrics"},u=n.scripts[0],{invoker:d,invokerType:f,sourceURL:m,sourceFunctionName:g,sourceCharPosition:x}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=f,m&&(c["code.filepath"]=m),g&&(c["code.function"]=g),x!==-1&&(c["browser.script.source_char_position"]=x),Ic(r,s,s+l,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function efe(){sd("event",({entries:t})=>{const e=Cd();if(e){for(const r of t)if(r.name==="click"){const n=pn(Co()+r.startTime),s=pn(r.duration),a={name:Rc(r.target),op:`ui.interaction.${r.name}`,startTime:n,attributes:{[Vs]:"auto.ui.browser.metrics"}},o=vde(r.target);o&&(a.attributes["ui.component_name"]=o),Ic(e,n,n+s,a)}}})}function tfe(){return OI(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(Ni.cls={value:t.value,unit:""},Ab=e)},!0)}function rfe(){return RI(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(Ni.lcp={value:t.value,unit:"millisecond"},ra=e)},!0)}function nfe(){return Fhe(({metric:t})=>{t.entries[t.entries.length-1]&&(Ni.ttfb={value:t.value,unit:"millisecond"})})}function sfe(t,e){const r=A_(),n=Co();if(!r?.getEntries||!n)return;const s=pn(n),a=r.getEntries(),{op:o,start_timestamp:l}=gs(t);a.slice(rB).forEach(c=>{const u=pn(c.startTime),d=pn(Math.max(0,c.duration));if(!(o==="navigation"&&l&&s+u<l))switch(c.entryType){case"navigation":{ofe(t,c,s);break}case"mark":case"paint":case"measure":{afe(t,c,u,d,s,e.ignorePerformanceApiSpans);const f=PI(),m=c.startTime<f.firstHiddenTime;c.name==="first-paint"&&m&&(Ni.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&m&&(Ni.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{ufe(t,c,c.name,u,d,s,e.ignoreResourceSpans);break}}}),rB=Math.max(a.length-1,0),dfe(t),o==="pageload"&&(ffe(Ni),e.recordClsOnPageloadSpan||delete Ni.cls,e.recordLcpOnPageloadSpan||delete Ni.lcp,Object.entries(Ni).forEach(([c,u])=>{ohe(c,u.value,u.unit)}),t.setAttribute("performance.timeOrigin",s),t.setAttribute("performance.activationStart",gp()),hfe(t,e)),ra=void 0,Ab=void 0,Ni={}}function afe(t,e,r,n,s,a){if(["mark","measure"].includes(e.entryType)&&xde(e.name,a))return;const o=Gv(!1),l=pn(o?o.requestStart:0),c=s+Math.max(r,l),u=s+r,d=u+n,f={[Vs]:"auto.resource.browser.metrics"};c!==u&&(f["sentry.browser.measure_happened_before_request"]=!0,f["sentry.browser.measure_start_time"]=c),ife(f,e),c<=d&&Ic(t,c,d,{name:e.name,op:e.entryType,attributes:f})}function ife(t,e){try{const r=e.detail;if(!r)return;if(typeof r=="object"){for(const[n,s]of Object.entries(r))if(s&&z4(s))t[`sentry.browser.measure.detail.${n}`]=s;else if(s!==void 0)try{t[`sentry.browser.measure.detail.${n}`]=JSON.stringify(s)}catch{}return}if(z4(r)){t["sentry.browser.measure.detail"]=r;return}try{t["sentry.browser.measure.detail"]=JSON.stringify(r)}catch{}}catch{}}function ofe(t,e,r){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(n=>{zx(t,e,n,r)}),zx(t,e,"secureConnection",r,"TLS/SSL"),zx(t,e,"fetch",r,"cache"),zx(t,e,"domainLookup",r,"DNS"),cfe(t,e,r)}function zx(t,e,r,n,s=r){const a=lfe(r),o=e[a],l=e[`${r}Start`];!l||!o||Ic(t,n+pn(l),n+pn(o),{op:`browser.${s}`,name:e.name,attributes:{[Vs]:"auto.ui.browser.metrics",...r==="redirect"&&e.redirectCount!=null?{"http.redirect_count":e.redirectCount}:{}}})}function lfe(t){return t==="secureConnection"?"connectEnd":t==="fetch"?"domainLookupStart":`${t}End`}function cfe(t,e,r){const n=r+pn(e.requestStart),s=r+pn(e.responseEnd),a=r+pn(e.responseStart);e.responseEnd&&(Ic(t,n,s,{op:"browser.request",name:e.name,attributes:{[Vs]:"auto.ui.browser.metrics"}}),Ic(t,a,s,{op:"browser.response",name:e.name,attributes:{[Vs]:"auto.ui.browser.metrics"}}))}function ufe(t,e,r,n,s,a,o){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const l=e.initiatorType?`resource.${e.initiatorType}`:"resource.other";if(o?.includes(l))return;const c=ghe(r),u={[Vs]:"auto.resource.browser.metrics"};TN(u,e,"transferSize","http.response_transfer_size"),TN(u,e,"encodedBodySize","http.response_content_length"),TN(u,e,"decodedBodySize","http.decoded_response_content_length");const d=e.deliveryType;d!=null&&(u["http.response_delivery_type"]=d);const f=e.renderBlockingStatus;if(f&&(u["resource.render_blocking_status"]=f),c.protocol&&(u["url.scheme"]=c.protocol.split(":").pop()),c.host&&(u["server.address"]=c.host),u["url.same_origin"]=r.includes($t.location.origin),e.nextHopProtocol!=null){const{name:x,version:v}=RG(e.nextHopProtocol);u["network.protocol.name"]=x,u["network.protocol.version"]=v}const m=a+n,g=m+s;Ic(t,m,g,{name:r.replace($t.location.origin,""),op:l,attributes:u})}function dfe(t){const e=$t.navigator;if(!e)return;const r=e.connection;r&&(r.effectiveType&&t.setAttribute("effectiveConnectionType",r.effectiveType),r.type&&t.setAttribute("connectionType",r.type),CN(r.rtt)&&(Ni["connection.rtt"]={value:r.rtt,unit:"millisecond"})),CN(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),CN(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function hfe(t,e){ra&&e.recordLcpOnPageloadSpan&&(ra.element&&t.setAttribute("lcp.element",Rc(ra.element)),ra.id&&t.setAttribute("lcp.id",ra.id),ra.url&&t.setAttribute("lcp.url",ra.url.trim().slice(0,200)),ra.loadTime!=null&&t.setAttribute("lcp.loadTime",ra.loadTime),ra.renderTime!=null&&t.setAttribute("lcp.renderTime",ra.renderTime),t.setAttribute("lcp.size",ra.size)),Ab?.sources&&e.recordClsOnPageloadSpan&&Ab.sources.forEach((r,n)=>t.setAttribute(`cls.source.${n+1}`,Rc(r.node)))}function TN(t,e,r,n){const s=e[r];s!=null&&s<Yhe&&(t[n]=s)}function ffe(t){const e=Gv(!1);if(!e)return;const{responseStart:r,requestStart:n}=e;n<=r&&(t["ttfb.requestTime"]={value:r-n,unit:"millisecond"})}function pfe(){return A_()&&Co()?sd("element",mfe):()=>{}}const mfe=({entries:t})=>{const e=Cd(),r=e?Mi(e):void 0,n=r?gs(r).description:To().getScopeData().transactionName;t.forEach(s=>{const a=s;if(!a.identifier)return;const o=a.name,l=a.renderTime,c=a.loadTime,[u,d]=c?[pn(c),"load-time"]:l?[pn(l),"render-time"]:[wc(),"entry-emission"],f=o==="image-paint"?pn(Math.max(0,(l??0)-(c??0))):0,m={[Vs]:"auto.ui.browser.elementtiming",[nd]:"ui.elementtiming",[Ng]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":n,"element.id":a.id,"element.type":a.element?.tagName?.toLowerCase()||"unknown","element.size":a.naturalWidth&&a.naturalHeight?`${a.naturalWidth}x${a.naturalHeight}`:void 0,"element.render_time":l,"element.load_time":c,"element.url":a.url||void 0,"element.identifier":a.identifier,"element.paint_type":o};fhe({name:`element[${a.identifier}]`,attributes:m,startTime:u,onlyIfParent:!0},g=>{g.end(u+f)})})},gfe=1e3;let nB,nk,sk;function DG(t){xI("dom",t),bI("dom",vfe)}function vfe(){if(!$t.document)return;const t=Ag.bind(null,"dom"),e=sB(t,!0);$t.document.addEventListener("click",e,!1),$t.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(r=>{const s=$t[r]?.prototype;s?.hasOwnProperty?.("addEventListener")&&(mb(s,"addEventListener",function(a){return function(o,l,c){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[o]=u[o]||{refCount:0};if(!d.handler){const f=sB(t);d.handler=f,a.call(this,o,f,c)}d.refCount++}catch{}return a.call(this,o,l,c)}}),mb(s,"removeEventListener",function(a){return function(o,l,c){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},d=u[o];d&&(d.refCount--,d.refCount<=0&&(a.call(this,o,d.handler,c),d.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,o,l,c)}}))})}function yfe(t){if(t.type!==nk)return!1;try{if(!t.target||t.target._sentryId!==sk)return!1}catch{}return!0}function xfe(t,e){return t!=="keypress"?!1:e?.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function sB(t,e=!1){return r=>{if(!r||r._sentryCaptured)return;const n=bfe(r);if(xfe(r.type,n))return;vl(r,"_sentryCaptured",!0),n&&!n._sentryId&&vl(n,"_sentryId",Gu());const s=r.type==="keypress"?"input":r.type;yfe(r)||(t({event:r,name:s,global:e}),nk=r.type,sk=n?n._sentryId:void 0),clearTimeout(nB),nB=$t.setTimeout(()=>{sk=void 0,nk=void 0},gfe)}}function bfe(t){try{return t.target}catch{return null}}let qx;function N_(t){const e="history";xI(e,t),bI(e,wfe)}function wfe(){if($t.addEventListener("popstate",()=>{const e=$t.location.href,r=qx;if(qx=e,r===e)return;Ag("history",{from:r,to:e})}),!vhe())return;function t(e){return function(...r){const n=r.length>2?r[2]:void 0;if(n){const s=qx,a=_fe(String(n));if(qx=a,s===a)return e.apply(this,r);Ag("history",{from:s,to:a})}return e.apply(this,r)}}mb($t.history,"pushState",t),mb($t.history,"replaceState",t)}function _fe(t){try{return new URL(t,$t.location.origin).toString()}catch{return t}}const W0={};function LG(t){const e=W0[t];if(e)return e;let r=$t[t];if(yhe(r))return W0[t]=r.bind($t);const n=$t.document;if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const a=s.contentWindow;a?.[t]&&(r=a[t]),n.head.removeChild(s)}catch(s){bf&&en.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return r&&(W0[t]=r.bind($t))}function aB(t){W0[t]=void 0}function Yv(...t){return LG("setTimeout")(...t)}const Pu="__sentry_xhr_v3__";function $G(t){xI("xhr",t),bI("xhr",Sfe)}function Sfe(){if(!$t.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,r,n){const s=new Error,a=wc()*1e3,o=bc(n[0])?n[0].toUpperCase():void 0,l=jfe(n[1]);if(!o||!l)return e.apply(r,n);r[Pu]={method:o,url:l,request_headers:{}},o==="POST"&&l.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const c=()=>{const u=r[Pu];if(u&&r.readyState===4){try{u.status_code=r.status}catch{}const d={endTimestamp:wc()*1e3,startTimestamp:a,xhr:r,virtualError:s};Ag("xhr",d)}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?r.onreadystatechange=new Proxy(r.onreadystatechange,{apply(u,d,f){return c(),u.apply(d,f)}}):r.addEventListener("readystatechange",c),r.setRequestHeader=new Proxy(r.setRequestHeader,{apply(u,d,f){const[m,g]=f,x=d[Pu];return x&&bc(m)&&bc(g)&&(x.request_headers[m.toLowerCase()]=g),u.apply(d,f)}}),e.apply(r,n)}}),t.send=new Proxy(t.send,{apply(e,r,n){const s=r[Pu];if(!s)return e.apply(r,n);n[0]!==void 0&&(s.body=n[0]);const a={startTimestamp:wc()*1e3,xhr:r};return Ag("xhr",a),e.apply(r,n)}})}function jfe(t){if(bc(t))return t;try{return t.toString()}catch{}}function FG(t){return new URLSearchParams(t).toString()}function BG(t,e=en){try{if(typeof t=="string")return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[FG(t)];if(!t)return[void 0]}catch(r){return bf&&e.error(r,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return bf&&e.log("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function UG(t=[]){if(!(t.length!==2||typeof t[1]!="object"))return t[1].body}const PN=[],G0=new Map,Afe=60;function Nfe(){if(A_()&&Co()){const e=Efe();return()=>{e()}}return()=>{}}const iB={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Efe(){return PG(Cfe)}const Cfe=({metric:t})=>{if(t.value==null)return;const e=pn(t.value);if(e>Afe)return;const r=t.entries.find(x=>x.duration===t.value&&iB[x.name]);if(!r)return;const{interactionId:n}=r,s=iB[r.name],a=pn(Co()+r.startTime),o=Cd(),l=o?Mi(o):void 0,u=(n!=null?G0.get(n):void 0)||l,d=u?gs(u).description:To().getScopeData().transactionName,f=Rc(r.target),m={[Vs]:"auto.http.browser.inp",[nd]:`ui.interaction.${s}`,[w_]:r.duration},g=II({name:f,transaction:d,attributes:m,startTime:a});g&&(g.addEvent("inp",{[qv]:"millisecond",[Vv]:t.value}),g.end(a+e))};function Tfe(){const t=({entries:e})=>{const r=Cd(),n=r&&Mi(r);e.forEach(s=>{if(!Hhe(s)||!n)return;const a=s.interactionId;if(a!=null&&!G0.has(a)){if(PN.length>10){const o=PN.shift();G0.delete(o)}PN.push(a),G0.set(a,n)}})};sd("event",t),sd("first-input",t)}function Pfe(t,e=LG("fetch")){let r=0,n=0;function s(a){const o=a.body.length;r+=o,n++;const l={body:a.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:r<=6e4&&n<15,...t.fetchOptions};if(!e)return aB("fetch"),fb("No fetch implementation available");try{return e(t.url,l).then(c=>(r-=o,n--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return aB("fetch"),r-=o,n--,fb(c)}}return Jce(t,s)}const kfe=30,Ofe=50;function ak(t,e,r,n){const s={filename:t,function:e==="<anonymous>"?Qu:e,in_app:!0};return r!==void 0&&(s.lineno=r),n!==void 0&&(s.colno=n),s}const Rfe=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Ife=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Mfe=/\((\S*)(?::(\d+))(?::(\d+))\)/,Dfe=/at (.+?) ?\(data:(.+?),/,Lfe=t=>{const e=t.match(Dfe);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const r=Rfe.exec(t);if(r){const[,s,a,o]=r;return ak(s,Qu,+a,+o)}const n=Ife.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const l=Mfe.exec(n[2]);l&&(n[2]=l[1],n[3]=l[2],n[4]=l[3])}const[a,o]=zG(n[1]||Qu,n[2]);return ak(o,a,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},$fe=[kfe,Lfe],Ffe=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Bfe=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ufe=t=>{const e=Ffe.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const a=Bfe.exec(e[3]);a&&(e[1]=e[1]||"eval",e[3]=a[1],e[4]=a[2],e[5]="")}let n=e[3],s=e[1]||Qu;return[s,n]=zG(s,n),ak(n,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},zfe=[Ofe,Ufe],qfe=[$fe,zfe],Vfe=QW(...qfe),zG=(t,e)=>{const r=t.indexOf("safari-extension")!==-1,n=t.indexOf("safari-web-extension")!==-1;return r||n?[t.indexOf("@")!==-1?t.split("@")[0]:Qu,r?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},ua=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Vx=1024,Hfe="Breadcrumbs",Wfe=((t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:Hfe,setup(r){e.console&&wue(Yfe(r)),e.dom&&DG(Xfe(r,e.dom)),e.xhr&&$G(Qfe(r)),e.fetch&&X9(Jfe(r)),e.history&&N_(Zfe(r)),e.sentry&&r.on("beforeSendEvent",Kfe(r))}}}),Gfe=Wfe;function Kfe(t){return function(r){Ar()===t&&rd({category:`sentry.${r.type==="transaction"?"transaction":"event"}`,event_id:r.event_id,level:r.level,message:Au(r)},{event:r})}}function Xfe(t,e){return function(n){if(Ar()!==t)return;let s,a,o=typeof e=="object"?e.serializeAttribute:void 0,l=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;l&&l>Vx&&(ua&&ze.warn(`\`dom.maxStringLength\` cannot exceed ${Vx}, but a value of ${l} was configured. Sentry will use ${Vx} instead.`),l=Vx),typeof o=="string"&&(o=[o]);try{const u=n.event,d=epe(u)?u.target:u;s=s9(d,{keyAttrs:o,maxStringLength:l}),a=Ioe(d)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${n.name}`,message:s};a&&(c.data={"ui.component_name":a}),rd(c,{event:n.event,name:n.name,global:n.global})}}function Yfe(t){return function(r){if(Ar()!==t)return;const n={category:"console",data:{arguments:r.args,logger:"console"},level:Sue(r.level),message:r4(r.args," ")};if(r.level==="assert")if(r.args[0]===!1)n.message=`Assertion failed: ${r4(r.args.slice(1)," ")||"console.assert"}`,n.data.arguments=r.args.slice(1);else return;rd(n,{input:r.args,level:r.level})}}function Qfe(t){return function(r){if(Ar()!==t)return;const{startTimestamp:n,endTimestamp:s}=r,a=r.xhr[Pu];if(!n||!s||!a)return;const{method:o,url:l,status_code:c,body:u}=a,d={method:o,url:l,status_code:c},f={xhr:r.xhr,input:u,startTimestamp:n,endTimestamp:s},m={category:"xhr",data:d,type:"http",level:K9(c)};t.emit("beforeOutgoingRequestBreadcrumb",m,f),rd(m,f)}}function Jfe(t){return function(r){if(Ar()!==t)return;const{startTimestamp:n,endTimestamp:s}=r;if(s&&!(r.fetchData.url.match(/sentry_key/)&&r.fetchData.method==="POST"))if(r.fetchData.method,r.fetchData.url,r.error){const a=r.fetchData,o={data:r.error,input:r.args,startTimestamp:n,endTimestamp:s},l={category:"fetch",data:a,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",l,o),rd(l,o)}else{const a=r.response,o={...r.fetchData,status_code:a?.status};r.fetchData.request_body_size,r.fetchData.response_body_size,a?.status;const l={input:r.args,response:a,startTimestamp:n,endTimestamp:s},c={category:"fetch",data:o,type:"http",level:K9(o.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",c,l),rd(c,l)}}}function Zfe(t){return function(r){if(Ar()!==t)return;let n=r.from,s=r.to;const a=Zh(Zt.location.href);let o=n?Zh(n):void 0;const l=Zh(s);o?.path||(o=a),a.protocol===l.protocol&&a.host===l.host&&(s=l.relative),a.protocol===o.protocol&&a.host===o.host&&(n=o.relative),rd({category:"navigation",data:{from:n,to:s}})}}function epe(t){return!!t&&!!t.target}const tpe=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],rpe="BrowserApiErrors",npe=((t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:rpe,setupOnce(){e.setTimeout&&al(Zt,"setTimeout",oB),e.setInterval&&al(Zt,"setInterval",oB),e.requestAnimationFrame&&al(Zt,"requestAnimationFrame",ape),e.XMLHttpRequest&&"XMLHttpRequest"in Zt&&al(XMLHttpRequest.prototype,"send",ipe);const r=e.eventTarget;r&&(Array.isArray(r)?r:tpe).forEach(s=>ope(s,e))}}}),spe=npe;function oB(t){return function(...e){const r=e[0];return e[0]=yf(r,{mechanism:{data:{function:Tc(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function ape(t){return function(e){return t.apply(this,[yf(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Tc(t)},handled:!1,type:"instrument"}})])}}function ipe(t){return function(...e){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in r&&typeof r[s]=="function"&&al(r,s,function(a){const o={mechanism:{data:{function:s,handler:Tc(a)},handled:!1,type:"instrument"}},l=nI(a);return l&&(o.mechanism.data.handler=Tc(l)),yf(a,o)})}),t.apply(this,e)}}function ope(t,e){const n=Zt[t]?.prototype;n?.hasOwnProperty?.("addEventListener")&&(al(n,"addEventListener",function(s){return function(a,o,l){try{lpe(o)&&(o.handleEvent=yf(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Tc(o),target:t},handled:!1,type:"instrument"}}))}catch{}return e.unregisterOriginalCallbacks&&cpe(this,a,o),s.apply(this,[a,yf(o,{mechanism:{data:{function:"addEventListener",handler:Tc(o),target:t},handled:!1,type:"instrument"}}),l])}}),al(n,"removeEventListener",function(s){return function(a,o,l){try{const c=o.__sentry_wrapped__;c&&s.call(this,a,c,l)}catch{}return s.call(this,a,o,l)}}))}function lpe(t){return typeof t.handleEvent=="function"}function cpe(t,e,r){t&&typeof t=="object"&&"removeEventListener"in t&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,r)}const upe=()=>({name:"BrowserSession",setupOnce(){if(typeof Zt.document>"u"){ua&&ze.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}j4({ignoreDuration:!0}),A4(),N_(({from:t,to:e})=>{t!==void 0&&t!==e&&(j4({ignoreDuration:!0}),A4())})}}),dpe="GlobalHandlers",hpe=((t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:dpe,setupOnce(){Error.stackTraceLimit=50},setup(r){e.onerror&&(ppe(r),lB("onerror")),e.onunhandledrejection&&(mpe(r),lB("onunhandledrejection"))}}}),fpe=hpe;function ppe(t){JW(e=>{const{stackParser:r,attachStacktrace:n}=qG();if(Ar()!==t||Q9())return;const{msg:s,url:a,line:o,column:l,error:c}=e,u=ype(pI(r,c||s,void 0,n,!1),a,o,l);u.level="error",O9(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function mpe(t){ZW(e=>{const{stackParser:r,attachStacktrace:n}=qG();if(Ar()!==t||Q9())return;const s=gpe(e),a=tI(s)?vpe(s):pI(r,s,void 0,n,!0);a.level="error",O9(a,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function gpe(t){if(tI(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function vpe(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function ype(t,e,r,n){const s=t.exception=t.exception||{},a=s.values=s.values||[],o=a[0]=a[0]||{},l=o.stacktrace=o.stacktrace||{},c=l.frames=l.frames||[],u=n,d=r,f=xpe(e)??Lv();return c.length===0&&c.push({colno:u,filename:f,function:Qu,in_app:!0,lineno:d}),t}function lB(t){ua&&ze.log(`Global Handler attached: ${t}`)}function qG(){return Ar()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function xpe(t){if(!(!bg(t)||t.length===0)){if(t.startsWith("data:")){const e=t.match(/^data:([^;]+)/),r=e?e[1]:"text/javascript",n=t.includes("base64,");return`<data:${r}${n?",base64":""}>`}return t.slice(0,1024)}}const bpe=()=>({name:"HttpContext",preprocessEvent(t){if(!Zt.navigator&&!Zt.location&&!Zt.document)return;const e=dI(),r={...e.headers,...t.request?.headers};t.request={...e,...t.request,headers:r}}}),wpe="cause",_pe=5,Spe="LinkedErrors",jpe=((t={})=>{const e=t.limit||_pe,r=t.key||wpe;return{name:Spe,preprocessEvent(n,s,a){const o=a.getOptions();bue(hI,o.stackParser,r,e,n,s)}}}),Ape=jpe;function Npe(){return Epe()?(ua&&cp(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function Epe(){if(typeof Zt.window>"u")return!1;const t=Zt;if(t.nw||!(t.chrome||t.browser)?.runtime?.id)return!1;const r=Lv(),n=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Zt===Zt.top&&n.some(a=>r.startsWith(`${a}://`)))}function Cpe(t){return[hue(),lue(),spe(),Gfe(),fpe(),Ape(),Nue(),bpe(),upe()]}function Tpe(t={}){const e=!t.skipBrowserExtensionCheck&&Npe(),r={...t,enabled:e?!1:t.enabled,stackParser:joe(t.stackParser||Vfe),integrations:Oce({integrations:t.integrations,defaultIntegrations:t.defaultIntegrations==null?Cpe():t.defaultIntegrations}),transport:t.transport||Pfe};return qce(nde,r)}function cB(t={}){const e=Zt.document,r=e?.head||e?.body;if(!r){ua&&ze.error("[showReportDialog] Global document not defined");return}const n=fn(),a=Ar()?.getDsn();if(!a){ua&&ze.error("[showReportDialog] DSN not configured");return}const o={...t,user:{...n.getUser(),...t.user},eventId:t.eventId||jce()},l=Zt.document.createElement("script");l.async=!0,l.crossOrigin="anonymous",l.src=Pce(a,o);const{onLoad:c,onClose:u}=o;if(c&&(l.onload=c),u){const d=f=>{if(f.data==="__sentry_reportdialog_closed__")try{u()}finally{Zt.removeEventListener("message",d)}};Zt.addEventListener("message",d)}r.appendChild(l)}const _c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,da=globalThis,rg="10.8.0";function E_(){return MI(da),da}function MI(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||rg,e[rg]=e[rg]||{}}function C_(t,e,r=da){const n=r.__SENTRY__=r.__SENTRY__||{},s=n[rg]=n[rg]||{};return s[t]||(s[t]=e())}const Ppe="Sentry Logger ",uB={};function DI(t){if(!("console"in da))return t();const e=da.console,r={},n=Object.keys(uB);n.forEach(s=>{const a=uB[s];r[s]=e[s],e[s]=a});try{return t()}finally{n.forEach(s=>{e[s]=r[s]})}}function kpe(){$I().enabled=!0}function Ope(){$I().enabled=!1}function VG(){return $I().enabled}function Rpe(...t){LI("log",...t)}function Ipe(...t){LI("warn",...t)}function Mpe(...t){LI("error",...t)}function LI(t,...e){_c&&VG()&&DI(()=>{da.console[t](`${Ppe}[${t}]:`,...e)})}function $I(){return _c?C_("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const ul={enable:kpe,disable:Ope,isEnabled:VG,log:Rpe,warn:Ipe,error:Mpe},kN="<anonymous>";function Dpe(t){try{return!t||typeof t!="function"?kN:t.name||kN}catch{return kN}}const HG=Object.prototype.toString;function Lpe(t){switch(HG.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return T_(t,Error)}}function FI(t,e){return HG.call(t)===`[object ${e}]`}function Nb(t){return FI(t,"String")}function WG(t){return FI(t,"Object")}function $pe(t){return typeof Event<"u"&&T_(t,Event)}function Fpe(t){return typeof Element<"u"&&T_(t,Element)}function Bpe(t){return FI(t,"RegExp")}function BI(t){return!!(t?.then&&typeof t.then=="function")}function Upe(t){return WG(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function T_(t,e){try{return t instanceof e}catch{return!1}}function zpe(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}const GG=da,qpe=80;function UI(t,e={}){if(!t)return"<unknown>";try{let r=t;const n=5,s=[];let a=0,o=0;const l=" > ",c=l.length;let u;const d=Array.isArray(e)?e:e.keyAttrs,f=!Array.isArray(e)&&e.maxStringLength||qpe;for(;r&&a++<n&&(u=Vpe(r,d),!(u==="html"||a>1&&o+s.length*c+u.length>=f));)s.push(u),o+=u.length,r=r.parentNode;return s.reverse().join(l)}catch{return"<unknown>"}}function Vpe(t,e){const r=t,n=[];if(!r?.tagName)return"";if(GG.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const s=e?.length?e.filter(o=>r.getAttribute(o)).map(o=>[o,r.getAttribute(o)]):null;if(s?.length)s.forEach(o=>{n.push(`[${o[0]}="${o[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const o=r.className;if(o&&Nb(o)){const l=o.split(/\s+/);for(const c of l)n.push(`.${c}`)}}const a=["aria-label","type","name","title","alt"];for(const o of a){const l=r.getAttribute(o);l&&n.push(`[${o}="${l}"]`)}return n.join("")}function Hpe(){try{return GG.document.location.href}catch{return""}}function KG(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function Wpe(t,e,r=!1){return Nb(t)?Bpe(e)?e.test(t):Nb(e)?r?t===e:t.includes(e):!1:!1}function Gpe(t,e=[],r=!1){return e.some(n=>Wpe(t,n,r))}function Kpe(t,e,r){if(!(e in t))return;const n=t[e];if(typeof n!="function")return;const s=r(n);typeof s=="function"&&Xpe(s,n);try{t[e]=s}catch{_c&&ul.log(`Failed to replace method "${e}" in object`,t)}}function XG(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{_c&&ul.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Xpe(t,e){try{const r=e.prototype||{};t.prototype=e.prototype=r,XG(t,"__sentry_original__",e)}catch{}}function Ype(t){if(Lpe(t))return{message:t.message,name:t.name,stack:t.stack,...hB(t)};if($pe(t)){const e={type:t.type,target:dB(t.target),currentTarget:dB(t.currentTarget),...hB(t)};return typeof CustomEvent<"u"&&T_(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function dB(t){try{return Fpe(t)?UI(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function hB(t){if(typeof t=="object"&&t!==null){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}else return{}}function Qpe(){const t=da;return t.crypto||t.msCrypto}function Sc(t=Qpe()){let e=()=>Math.random()*16;try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"");t?.getRandomValues&&(e=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(e()&15)>>r/4).toString(16))}function Jpe(t){return t.exception?.values?.[0]}function Zpe(t,e){const r=Jpe(t);if(!r)return;const n={type:"generic",handled:!0},s=r.mechanism;if(r.mechanism={...n,...s,...e},e&&"data"in e){const a={...s?.data,...e.data};r.mechanism.data=a}}const YG=1e3;function P_(){return Date.now()/YG}function eme(){const{performance:t}=da;if(!t?.now||!t.timeOrigin)return P_;const e=t.timeOrigin;return()=>(e+t.now())/YG}let fB;function QG(){return(fB??(fB=eme()))()}let ON;function tme(){const{performance:t}=da;if(!t?.now)return[void 0,"none"];const e=3600*1e3,r=t.now(),n=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+r-n):e,a=s<e,o=t.timing?.navigationStart,c=typeof o=="number"?Math.abs(o+r-n):e,u=c<e;return a||u?s<=c?[t.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[n,"dateNow"]}function rme(){return ON||(ON=tme()),ON[0]}function nme(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||QG(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Sc()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function k_(t,e,r=2){if(!e||typeof e!="object"||r<=0)return e;if(t&&Object.keys(e).length===0)return t;const n={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=k_(n[s],e[s],r-1));return n}function pB(){return Sc()}function sme(){return Sc().substring(16)}const ik="_sentrySpan";function mB(t,e){e?XG(t,ik,e):delete t[ik]}function ok(t){return t[ik]}const ame=100;class yl{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:pB(),sampleRand:Math.random()}}clone(){const e=new yl;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,mB(e,ok(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&nme(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const r=typeof e=="function"?e(this):e,n=r instanceof yl?r.getScopeData():WG(r)?e:void 0,{tags:s,extra:a,user:o,contexts:l,level:c,fingerprint:u=[],propagationContext:d}=n||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...a},this._contexts={...this._contexts,...l},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,mB(this,void 0),this._attachments=[],this.setPropagationContext({traceId:pB(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,r){const n=typeof r=="number"?r:ame;if(n<=0)return this;const s={timestamp:P_(),...e,message:e.message?KG(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ok(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=k_(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,r){const n=r?.event_id||Sc();if(!this._client)return _c&&ul.warn("No client configured on scope - will not capture exception!"),n;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...r,event_id:n},this),n}captureMessage(e,r,n){const s=n?.event_id||Sc();if(!this._client)return _c&&ul.warn("No client configured on scope - will not capture message!"),s;const a=new Error(e);return this._client.captureMessage(e,r,{originalException:e,syntheticException:a,...n,event_id:s},this),s}captureEvent(e,r){const n=r?.event_id||Sc();return this._client?(this._client.captureEvent(e,{...r,event_id:n},this),n):(_c&&ul.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function ime(){return C_("defaultCurrentScope",()=>new yl)}function ome(){return C_("defaultIsolationScope",()=>new yl)}class lme{constructor(e,r){let n;e?n=e:n=new yl;let s;r?s=r:s=new yl,this._stack=[{scope:n}],this._isolationScope=s}withScope(e){const r=this._pushScope();let n;try{n=e(r)}catch(s){throw this._popScope(),s}return BI(n)?n.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function wf(){const t=E_(),e=MI(t);return e.stack=e.stack||new lme(ime(),ome())}function cme(t){return wf().withScope(t)}function ume(t,e){const r=wf();return r.withScope(()=>(r.getStackTop().scope=t,e(t)))}function gB(t){return wf().withScope(()=>t(wf().getIsolationScope()))}function dme(){return{withIsolationScope:gB,withScope:cme,withSetScope:ume,withSetIsolationScope:(t,e)=>gB(e),getCurrentScope:()=>wf().getScope(),getIsolationScope:()=>wf().getIsolationScope()}}function zI(t){const e=MI(t);return e.acs?e.acs:dme()}function Qv(){const t=E_();return zI(t).getCurrentScope()}function O_(){const t=E_();return zI(t).getIsolationScope()}function hme(){return C_("globalScope",()=>new yl)}function Po(){return Qv().getClient()}const JG="sentry.source",fme="sentry.sample_rate",pme="sentry.previous_trace_sample_rate",mme="sentry.op",gme="sentry.origin",vme=0,yme=1,xme="_sentryScope",bme="_sentryIsolationScope";function ZG(t){return{scope:t[xme],isolationScope:t[bme]}}const wme="sentry-",_me=/^sentry-/;function Sme(t){const e=jme(t);if(!e)return;const r=Object.entries(e).reduce((n,[s,a])=>{if(s.match(_me)){const o=s.slice(wme.length);n[o]=a}return n},{});if(Object.keys(r).length>0)return r}function jme(t){if(!(!t||!Nb(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,r)=>{const n=vB(r);return Object.entries(n).forEach(([s,a])=>{e[s]=a}),e},{}):vB(t)}function vB(t){return t.split(",").map(e=>e.split("=").map(r=>{try{return decodeURIComponent(r.trim())}catch{return}})).reduce((e,[r,n])=>(r&&n&&(e[r]=n),e),{})}const Ame=/^o(\d+)\./;function Nme(t,e=!1){const{host:r,path:n,pass:s,port:a,projectId:o,protocol:l,publicKey:c}=t;return`${l}://${c}${e&&s?`:${s}`:""}@${r}${a?`:${a}`:""}/${n&&`${n}/`}${o}`}function Eme(t){return t.match(Ame)?.[1]}function Cme(t){const e=t.getOptions(),{host:r}=t.getDsn()||{};let n;return e.orgId?n=String(e.orgId):r&&(n=Eme(r)),n}function yB(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const e7=1;function Tme(t){const{spanId:e,traceId:r,isRemote:n}=t.spanContext(),s=n?e:Eg(t).parent_span_id,a=ZG(t).scope,o=n?a?.getPropagationContext().propagationSpanId||sme():e;return{parent_span_id:s,span_id:o,trace_id:r}}function Pme(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:r,traceFlags:n,...s},attributes:a})=>({span_id:e,trace_id:r,sampled:n===e7,attributes:a,...s}))}function xB(t){return typeof t=="number"?bB(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?bB(t.getTime()):QG()}function bB(t){return t>9999999999?t/1e3:t}function Eg(t){if(Ome(t))return t.getSpanJSON();const{spanId:e,traceId:r}=t.spanContext();if(kme(t)){const{attributes:n,startTime:s,name:a,endTime:o,status:l,links:c}=t,u="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0;return{span_id:e,trace_id:r,data:n,description:a,parent_span_id:u,start_timestamp:xB(s),timestamp:xB(o)||void 0,status:Ime(l),op:n[mme],origin:n[gme],links:Pme(c)}}return{span_id:e,trace_id:r,start_timestamp:0,data:{}}}function kme(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function Ome(t){return typeof t.getSpanJSON=="function"}function Rme(t){const{traceFlags:e}=t.spanContext();return e===e7}function Ime(t){if(!(!t||t.code===vme))return t.code===yme?"ok":t.message||"unknown_error"}const Mme="_sentryRootSpan";function qI(t){return t[Mme]||t}function t7(){const t=E_(),e=zI(t);return e.getActiveSpan?e.getActiveSpan():ok(Qv())}function Dme(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=Po()?.getOptions();return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}const r7="production",Lme="_frozenDsc";function $me(t,e){const r=e.getOptions(),{publicKey:n}=e.getDsn()||{},s={environment:r.environment||r7,release:r.release,public_key:n,trace_id:t,org_id:Cme(e)};return e.emit("createDsc",s),s}function n7(t){const e=Po();if(!e)return{};const r=qI(t),n=Eg(r),s=n.data,a=r.spanContext().traceState,o=a?.get("sentry.sample_rate")??s[fme]??s[pme];function l(x){return(typeof o=="number"||typeof o=="string")&&(x.sample_rate=`${o}`),x}const c=r[Lme];if(c)return l(c);const u=a?.get("sentry.dsc"),d=u&&Sme(u);if(d)return l(d);const f=$me(t.spanContext().traceId,e),m=s[JG],g=n.description;return m!=="url"&&g&&(f.transaction=g),Dme()&&(f.sampled=String(Rme(r)),f.sample_rand=a?.get("sentry.sample_rand")??ZG(r).scope?.getPropagationContext().sampleRand.toString()),l(f),e.emit("createDsc",f,r),f}function Yo(t,e=100,r=1/0){try{return lk("",t,e,r)}catch(n){return{ERROR:`**non-serializable** (${n})`}}}function lk(t,e,r=1/0,n=1/0,s=Ume()){const[a,o]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const l=Fme(t,e);if(!l.startsWith("[object "))return l;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:r;if(c===0)return l.replace("object ","");if(a(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{const g=u.toJSON();return lk("",g,c-1,n,s)}catch{}const d=Array.isArray(e)?[]:{};let f=0;const m=Ype(e);for(const g in m){if(!Object.prototype.hasOwnProperty.call(m,g))continue;if(f>=n){d[g]="[MaxProperties ~]";break}const x=m[g];d[g]=lk(g,x,c-1,n,s),f++}return o(e),d}function Fme(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(zpe(e))return"[VueViewModel]";if(Upe(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${Dpe(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const r=Bme(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}function Bme(t){const e=Object.getPrototypeOf(t);return e?.constructor?e.constructor.name:"null prototype"}function Ume(){const t=new WeakSet;function e(n){return t.has(n)?!0:(t.add(n),!1)}function r(n){t.delete(n)}return[e,r]}function zme(t,e=[]){return[t,e]}function qme(t){if(!t?.sdk)return;const{name:e,version:r}=t.sdk;return{name:e,version:r}}function Vme(t,e,r,n){const s=t.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!r&&n&&{dsn:Nme(n)},...s&&{trace:s}}}const RN=0,wB=1,_B=2;function SB(t){return new Cg(e=>{e(t)})}class Cg{constructor(e){this._state=RN,this._handlers=[],this._runExecutor(e)}then(e,r){return new Cg((n,s)=>{this._handlers.push([!1,a=>{if(!e)n(a);else try{n(e(a))}catch(o){s(o)}},a=>{if(!r)s(a);else try{n(r(a))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(r=>r,e)}finally(e){return new Cg((r,n)=>{let s,a;return this.then(o=>{a=!1,s=o,e&&e()},o=>{a=!0,s=o,e&&e()}).then(()=>{if(a){n(s);return}r(s)})})}_executeHandlers(){if(this._state===RN)return;const e=this._handlers.slice();this._handlers=[],e.forEach(r=>{r[0]||(this._state===wB&&r[1](this._value),this._state===_B&&r[2](this._value),r[0]=!0)})}_runExecutor(e){const r=(a,o)=>{if(this._state===RN){if(BI(o)){o.then(n,s);return}this._state=a,this._value=o,this._executeHandlers()}},n=a=>{r(wB,a)},s=a=>{r(_B,a)};try{e(n,s)}catch(a){s(a)}}}function ck(t,e,r,n=0){return new Cg((s,a)=>{const o=t[n];if(e===null||typeof o!="function")s(e);else{const l=o({...e},r);_c&&o.id&&l===null&&ul.log(`Event processor "${o.id}" dropped event`),BI(l)?l.then(c=>ck(t,c,r,n+1).then(s)).then(null,a):ck(t,l,r,n+1).then(s).then(null,a)}})}function Hme(t,e){const{fingerprint:r,span:n,breadcrumbs:s,sdkProcessingMetadata:a}=e;Wme(t,e),n&&Xme(t,n),Yme(t,r),Gme(t,s),Kme(t,a)}function jB(t,e){const{extra:r,tags:n,user:s,contexts:a,level:o,sdkProcessingMetadata:l,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:f,propagationContext:m,transactionName:g,span:x}=e;Hx(t,"extra",r),Hx(t,"tags",n),Hx(t,"user",s),Hx(t,"contexts",a),t.sdkProcessingMetadata=k_(t.sdkProcessingMetadata,l,2),o&&(t.level=o),g&&(t.transactionName=g),x&&(t.span=x),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),f.length&&(t.attachments=[...t.attachments,...f]),t.propagationContext={...t.propagationContext,...m}}function Hx(t,e,r){t[e]=k_(t[e],r,1)}function Wme(t,e){const{extra:r,tags:n,user:s,contexts:a,level:o,transactionName:l}=e;Object.keys(r).length&&(t.extra={...r,...t.extra}),Object.keys(n).length&&(t.tags={...n,...t.tags}),Object.keys(s).length&&(t.user={...s,...t.user}),Object.keys(a).length&&(t.contexts={...a,...t.contexts}),o&&(t.level=o),l&&t.type!=="transaction"&&(t.transaction=l)}function Gme(t,e){const r=[...t.breadcrumbs||[],...e];t.breadcrumbs=r.length?r:void 0}function Kme(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Xme(t,e){t.contexts={trace:Tme(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:n7(e),...t.sdkProcessingMetadata};const r=qI(e),n=Eg(r).description;n&&!t.transaction&&t.type==="transaction"&&(t.transaction=n)}function Yme(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}let Wx,AB,Gx;function Qme(t){const e=da._sentryDebugIds;if(!e)return{};const r=Object.keys(e);return Gx&&r.length===AB||(AB=r.length,Gx=r.reduce((n,s)=>{Wx||(Wx={});const a=Wx[s];if(a)n[a[0]]=a[1];else{const o=t(s);for(let l=o.length-1;l>=0;l--){const u=o[l]?.filename,d=e[s];if(u&&d){n[u]=d,Wx[s]=[u,d];break}}}return n},{})),Gx}function Jme(t,e,r,n,s,a){const{normalizeDepth:o=3,normalizeMaxBreadth:l=1e3}=t,c={...e,event_id:e.event_id||r.event_id||Sc(),timestamp:e.timestamp||P_()},u=r.integrations||t.integrations.map(y=>y.name);Zme(c,t),rge(c,u),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&ege(c,t.stackParser);const d=sge(n,r.captureContext);r.mechanism&&Zpe(c,r.mechanism);const f=s?s.getEventProcessors():[],m=hme().getScopeData();if(a){const y=a.getScopeData();jB(m,y)}if(d){const y=d.getScopeData();jB(m,y)}const g=[...r.attachments||[],...m.attachments];g.length&&(r.attachments=g),Hme(c,m);const x=[...f,...m.eventProcessors];return ck(x,c,r).then(y=>(y&&tge(y),typeof o=="number"&&o>0?nge(y,o,l):y))}function Zme(t,e){const{environment:r,release:n,dist:s,maxValueLength:a=250}=e;t.environment=t.environment||r||r7,!t.release&&n&&(t.release=n),!t.dist&&s&&(t.dist=s);const o=t.request;o?.url&&(o.url=KG(o.url,a))}function ege(t,e){const r=Qme(e);t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(s=>{s.filename&&(s.debug_id=r[s.filename])})})}function tge(t){const e={};if(t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(s=>{s.debug_id&&(s.abs_path?e[s.abs_path]=s.debug_id:s.filename&&(e[s.filename]=s.debug_id),delete s.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const r=t.debug_meta.images;Object.entries(e).forEach(([n,s])=>{r.push({type:"sourcemap",code_file:n,debug_id:s})})}function rge(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function nge(t,e,r){if(!t)return null;const n={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(s=>({...s,...s.data&&{data:Yo(s.data,e,r)}}))},...t.user&&{user:Yo(t.user,e,r)},...t.contexts&&{contexts:Yo(t.contexts,e,r)},...t.extra&&{extra:Yo(t.extra,e,r)}};return t.contexts?.trace&&n.contexts&&(n.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(n.contexts.trace.data=Yo(t.contexts.trace.data,e,r))),t.spans&&(n.spans=t.spans.map(s=>({...s,...s.data&&{data:Yo(s.data,e,r)}}))),t.contexts?.flags&&n.contexts&&(n.contexts.flags=Yo(t.contexts.flags,3,r)),n}function sge(t,e){if(!e)return t;const r=t?t.clone():new yl;return r.update(e),r}function age(t,e){return Qv().captureException(t,void 0)}function ige(t,e){O_().setContext(t,e)}function oge(t){O_().addEventProcessor(t)}const lge=60*1e3;function cge(t,e=Date.now()){const r=parseInt(`${t}`,10);if(!isNaN(r))return r*1e3;const n=Date.parse(`${t}`);return isNaN(n)?lge:n-e}function uge(t,e){return t[e]||t.all||0}function dge(t,e,r=Date.now()){return uge(t,e)>r}function hge(t,{statusCode:e,headers:r},n=Date.now()){const s={...t},a=r?.["x-sentry-rate-limits"],o=r?.["retry-after"];if(a)for(const l of a.trim().split(",")){const[c,u,,,d]=l.split(":",5),f=parseInt(c,10),m=(isNaN(f)?60:f)*1e3;if(!u)s.all=n+m;else for(const g of u.split(";"))g==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[g]=n+m):s[g]=n+m}else o?s.all=n+cge(o,n):e===429&&(s.all=n+60*1e3);return s}const fge="thismessage:/";function pge(t){return"isRelative"in t}function mge(t,e){const r=t.indexOf("://")<=0&&t.indexOf("//")!==0,n=r?fge:void 0;try{if("canParse"in URL&&!URL.canParse(t,n))return;const s=new URL(t,n);return r?{isRelative:r,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function gge(t,e){const r=e?.getDsn(),n=e?.getOptions().tunnel;return yge(t,r)||vge(t,n)}function vge(t,e){return e?NB(t)===NB(e):!1}function yge(t,e){const r=mge(t);return!r||pge(r)?!1:e?r.host.includes(e.host)&&/(^|&|\?)sentry_key=/.test(r.search):!1}function NB(t){return t[t.length-1]==="/"?t.slice(0,-1):t}function xge(t,e,r){let n,s,a;const o=r?.maxWait?Math.max(r.maxWait,e):0,l=r?.setTimeoutImpl||setTimeout;function c(){return u(),n=t(),n}function u(){s!==void 0&&clearTimeout(s),a!==void 0&&clearTimeout(a),s=a=void 0}function d(){return s!==void 0||a!==void 0?c():n}function f(){return s&&clearTimeout(s),s=l(c,e),o&&a===void 0&&(a=l(c,o)),n}return f.cancel=u,f.flush=d,f}const bge=100;function wge(t,e){const r=Po(),n=O_();if(!r)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:a=bge}=r.getOptions();if(a<=0)return;const l={timestamp:P_(),...t},c=s?DI(()=>s(l,e)):l;c!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",c,e),n.addBreadcrumb(c,a))}function _ge(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}function Sge(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function jge(){return!Sge()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function EB(){return typeof window<"u"&&(!jge()||Age())}function Age(){return da.process?.type==="renderer"}const Dr=da,VI="sentryReplaySession",Nge="replay_event",HI="Unable to send Replay",Ege=3e5,Cge=9e5,Tge=5e3,Pge=5500,kge=6e4,Oge=5e3,Rge=3,CB=15e4,Kx=5e3,Ige=3e3,Mge=300,WI=2e7,Dge=4999,Lge=15e3,TB=36e5;var $ge=Object.defineProperty,Fge=(t,e,r)=>e in t?$ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,PB=(t,e,r)=>Fge(t,typeof e!="symbol"?e+"":e,r),Rn=(t=>(t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t))(Rn||{});function Bge(t){return t.nodeType===t.ELEMENT_NODE}function ng(t){return t?.host?.shadowRoot===t}function sg(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function Uge(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t}function zge(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const r=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?r.push("layer"):t.layerName&&r.push(`layer(${t.layerName})`),t.supportsText&&r.push(`supports(${t.supportsText})`),t.media.length&&r.push(t.media.mediaText),r.join(" ")+";"}function Eb(t){try{const e=t.rules||t.cssRules;return e?Uge(Array.from(e,s7).join("")):null}catch{return null}}function qge(t){let e="";for(let r=0;r<t.style.length;r++){const n=t.style,s=n[r],a=n.getPropertyPriority(s);e+=`${s}:${n.getPropertyValue(s)}${a?" !important":""};`}return`${t.selectorText} { ${e} }`}function s7(t){let e;if(Hge(t))try{e=Eb(t.styleSheet)||zge(t)}catch{}else if(Wge(t)){let r=t.cssText;const n=t.selectorText.includes(":"),s=typeof t.style.all=="string"&&t.style.all;if(s&&(r=qge(t)),n&&(r=Vge(r)),n||s)return r}return e||t.cssText}function Vge(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}function Hge(t){return"styleSheet"in t}function Wge(t){return"selectorText"in t}class a7{constructor(){PB(this,"idNodeMap",new Map),PB(this,"nodeMetaMap",new WeakMap)}getId(e){return e?this.getMeta(e)?.id??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,r){const n=r.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,r)}replace(e,r){const n=this.getNode(e);if(n){const s=this.nodeMetaMap.get(n);s&&this.nodeMetaMap.set(r,s)}this.idNodeMap.set(e,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Gge(){return new a7}function R_({maskInputOptions:t,tagName:e,type:r}){return e==="OPTION"&&(e="SELECT"),!!(t[e.toLowerCase()]||r&&t[r]||r==="password"||e==="INPUT"&&!r&&t.text)}function Tg({isMasked:t,element:e,value:r,maskInputFn:n}){let s=r||"";return t?(n&&(s=n(s,e)),"*".repeat(s.length)):s}function _f(t){return t.toLowerCase()}function uk(t){return t.toUpperCase()}const kB="__rrweb_original__";function Kge(t){const e=t.getContext("2d");if(!e)return!0;const r=50;for(let n=0;n<t.width;n+=r)for(let s=0;s<t.height;s+=r){const a=e.getImageData,o=kB in a?a[kB]:a;if(new Uint32Array(o.call(e,n,s,Math.min(r,t.width-n),Math.min(r,t.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function GI(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?_f(e):null}function Cb(t,e,r){return e==="INPUT"&&(r==="radio"||r==="checkbox")?t.getAttribute("value")||"":t.value}function i7(t,e){let r;try{r=new URL(t,e??window.location.href)}catch{return null}const n=/\.([0-9a-z]+)(?:$)/i;return r.pathname.match(n)?.[1]??null}const OB={};function o7(t){const e=OB[t];if(e)return e;const r=window.document;let n=window[t];if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const a=s.contentWindow;a&&a[t]&&(n=a[t]),r.head.removeChild(s)}catch{}return OB[t]=n.bind(window)}function dk(...t){return o7("setTimeout")(...t)}function l7(...t){return o7("clearTimeout")(...t)}function c7(t){try{return t.contentDocument}catch{}}let Xge=1;const Yge=new RegExp("[^a-z0-9-_:]"),Pg=-2;function KI(){return Xge++}function Qge(t){if(t instanceof HTMLFormElement)return"form";const e=_f(t.tagName);return Yge.test(e)?"div":e}function Jge(t){let e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}let hh,RB;const Zge=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,eve=/^(?:[a-z+]+:)?\/\//i,tve=/^www\..*/i,rve=/^(data:)([^,]*),(.*)/i;function Tb(t,e){return(t||"").replace(Zge,(r,n,s,a,o,l)=>{const c=s||o||l,u=n||a||"";if(!c)return r;if(eve.test(c)||tve.test(c))return`url(${u}${c}${u})`;if(rve.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${Jge(e)+c}${u})`;const d=e.split("/"),f=c.split("/");d.pop();for(const m of f)m!=="."&&(m===".."?d.pop():d.push(m));return`url(${u}${d.join("/")}${u})`})}const nve=/^[^ \t\n\r\u000c]+/,sve=/^[, \t\n\r\u000c]+/;function ave(t,e){if(e.trim()==="")return e;let r=0;function n(a){let o;const l=a.exec(e.substring(r));return l?(o=l[0],r+=o.length,o):""}const s=[];for(;n(sve),!(r>=e.length);){let a=n(nve);if(a.slice(-1)===",")a=Bh(t,a.substring(0,a.length-1)),s.push(a);else{let o="";a=Bh(t,a);let l=!1;for(;;){const c=e.charAt(r);if(c===""){s.push((a+o).trim());break}else if(l)c===")"&&(l=!1);else if(c===","){r+=1,s.push((a+o).trim());break}else c==="("&&(l=!0);o+=c,r+=1}}}return s.join(", ")}const IB=new WeakMap;function Bh(t,e){return!e||e.trim()===""?e:I_(t,e)}function ive(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function I_(t,e){let r=IB.get(t);if(r||(r=t.createElement("a"),IB.set(t,r)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return r.setAttribute("href",e),r.href}function u7(t,e,r,n,s,a){return n&&(r==="src"||r==="href"&&!(e==="use"&&n[0]==="#")||r==="xlink:href"&&n[0]!=="#"||r==="background"&&(e==="table"||e==="td"||e==="th")?Bh(t,n):r==="srcset"?ave(t,n):r==="style"?Tb(n,I_(t)):e==="object"&&r==="data"?Bh(t,n):typeof a=="function"?a(r,n,s):n)}function d7(t,e,r){return(t==="video"||t==="audio")&&e==="autoplay"}function ove(t,e,r,n){try{if(n&&t.matches(n))return!1;if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(let s=t.classList.length;s--;){const a=t.classList[s];if(e.test(a))return!0}if(r)return t.matches(r)}catch{}return!1}function lve(t,e){for(let r=t.classList.length;r--;){const n=t.classList[r];if(e.test(n))return!0}return!1}function ku(t,e,r=1/0,n=0){return!t||t.nodeType!==t.ELEMENT_NODE||n>r?-1:e(t)?n:ku(t.parentNode,e,r,n+1)}function Uh(t,e){return r=>{const n=r;if(n===null)return!1;try{if(t){if(typeof t=="string"){if(n.matches(`.${t}`))return!0}else if(lve(n,t))return!0}return!!(e&&n.matches(e))}catch{return!1}}}function Sf(t,e,r,n,s,a){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const u=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let l=-1,c=-1;if(a){if(c=ku(o,Uh(n,s)),c<0)return!0;l=ku(o,Uh(e,r),c>=0?c:1/0)}else{if(l=ku(o,Uh(e,r)),l<0)return!1;c=ku(o,Uh(n,s),l>=0?l:1/0)}return l>=0?c>=0?l<=c:!0:c>=0?!1:!!a}catch{}return!!a}function cve(t,e,r){const n=t.contentWindow;if(!n)return;let s=!1,a;try{a=n.document.readyState}catch{return}if(a!=="complete"){const l=dk(()=>{s||(e(),s=!0)},r);t.addEventListener("load",()=>{l7(l),s=!0,e()});return}const o="about:blank";if(n.location.href!==o||t.src===o||t.src==="")return dk(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}function uve(t,e,r){let n=!1,s;try{s=t.sheet}catch{return}if(s)return;const a=dk(()=>{n||(e(),n=!0)},r);t.addEventListener("load",()=>{l7(a),n=!0,e()})}function dve(t,e){const{doc:r,mirror:n,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:l,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:m,inlineStylesheet:g,maskInputOptions:x={},maskTextFn:v,maskInputFn:y,dataURLOptions:w={},inlineImages:_,recordCanvas:A,keepIframeSrcFn:C,newlyAddedElement:S=!1}=e,E=hve(r,n);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:Rn.Document,childNodes:[],compatMode:t.compatMode}:{type:Rn.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:Rn.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:E};case t.ELEMENT_NODE:return pve(t,{doc:r,blockClass:s,blockSelector:a,unblockSelector:o,inlineStylesheet:g,maskAttributeFn:c,maskInputOptions:x,maskInputFn:y,dataURLOptions:w,inlineImages:_,recordCanvas:A,keepIframeSrcFn:C,newlyAddedElement:S,rootId:E,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:m});case t.TEXT_NODE:return fve(t,{doc:r,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:m,maskTextFn:v,maskInputOptions:x,maskInputFn:y,rootId:E});case t.CDATA_SECTION_NODE:return{type:Rn.CDATA,textContent:"",rootId:E};case t.COMMENT_NODE:return{type:Rn.Comment,textContent:t.textContent||"",rootId:E};default:return!1}}function hve(t,e){if(!e.hasNode(t))return;const r=e.getId(t);return r===1?void 0:r}function fve(t,e){const{maskAllText:r,maskTextClass:n,unmaskTextClass:s,maskTextSelector:a,unmaskTextSelector:o,maskTextFn:l,maskInputOptions:c,maskInputFn:u,rootId:d}=e,f=t.parentNode&&t.parentNode.tagName;let m=t.textContent;const g=f==="STYLE"?!0:void 0,x=f==="SCRIPT"?!0:void 0,v=f==="TEXTAREA"?!0:void 0;if(g&&m){try{t.nextSibling||t.previousSibling||t.parentNode.sheet?.cssRules&&(m=Eb(t.parentNode.sheet))}catch(w){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${w}`,t)}m=Tb(m,I_(e.doc))}x&&(m="SCRIPT_PLACEHOLDER");const y=Sf(t,n,a,s,o,r);if(!g&&!x&&!v&&m&&y&&(m=l?l(m,t.parentElement):m.replace(/[\S]/g,"*")),v&&m&&(c.textarea||y)&&(m=u?u(m,t.parentNode):m.replace(/[\S]/g,"*")),f==="OPTION"&&m){const w=R_({type:null,tagName:f,maskInputOptions:c});m=Tg({isMasked:Sf(t,n,a,s,o,w),element:t,value:m,maskInputFn:u})}return{type:Rn.Text,textContent:m||"",isStyle:g,rootId:d}}function pve(t,e){const{doc:r,blockClass:n,blockSelector:s,unblockSelector:a,inlineStylesheet:o,maskInputOptions:l={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:f,recordCanvas:m,keepIframeSrcFn:g,newlyAddedElement:x=!1,rootId:v,maskTextClass:y,unmaskTextClass:w,maskTextSelector:_,unmaskTextSelector:A}=e,C=ove(t,n,s,a),S=Qge(t);let E={};const P=t.attributes.length;for(let O=0;O<P;O++){const D=t.attributes[O];D.name&&!d7(S,D.name,D.value)&&(E[D.name]=u7(r,S,_f(D.name),D.value,t,c))}if(S==="link"&&o){const O=Array.from(r.styleSheets).find(I=>I.href===t.href);let D=null;O&&(D=Eb(O)),D&&(E.rel=null,E.href=null,E.crossorigin=null,E._cssText=Tb(D,O.href))}if(S==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const O=Eb(t.sheet);O&&(E._cssText=Tb(O,I_(r)))}if(S==="input"||S==="textarea"||S==="select"||S==="option"){const O=t,D=GI(O),I=Cb(O,uk(S),D),$=O.checked;if(D!=="submit"&&D!=="button"&&I){const M=Sf(O,y,_,w,A,R_({type:D,tagName:uk(S),maskInputOptions:l}));E.value=Tg({isMasked:M,element:O,value:I,maskInputFn:u})}$&&(E.checked=$)}if(S==="option"&&(t.selected&&!l.select?E.selected=!0:delete E.selected),S==="canvas"&&m){if(t.__context==="2d")Kge(t)||(E.rr_dataURL=t.toDataURL(d.type,d.quality));else if(!("__context"in t)){const O=t.toDataURL(d.type,d.quality),D=r.createElement("canvas");D.width=t.width,D.height=t.height;const I=D.toDataURL(d.type,d.quality);O!==I&&(E.rr_dataURL=O)}}if(S==="img"&&f){hh||(hh=r.createElement("canvas"),RB=hh.getContext("2d"));const O=t,D=O.currentSrc||O.getAttribute("src")||"<unknown-src>",I=O.crossOrigin,$=()=>{O.removeEventListener("load",$);try{hh.width=O.naturalWidth,hh.height=O.naturalHeight,RB.drawImage(O,0,0),E.rr_dataURL=hh.toDataURL(d.type,d.quality)}catch(M){if(O.crossOrigin!=="anonymous"){O.crossOrigin="anonymous",O.complete&&O.naturalWidth!==0?$():O.addEventListener("load",$);return}else console.warn(`Cannot inline img src=${D}! Error: ${M}`)}O.crossOrigin==="anonymous"&&(I?E.crossOrigin=I:O.removeAttribute("crossorigin"))};O.complete&&O.naturalWidth!==0?$():O.addEventListener("load",$)}if((S==="audio"||S==="video")&&(E.rr_mediaState=t.paused?"paused":"played",E.rr_mediaCurrentTime=t.currentTime),x||(t.scrollLeft&&(E.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(E.rr_scrollTop=t.scrollTop)),C){const{width:O,height:D}=t.getBoundingClientRect();E={class:E.class,rr_width:`${O}px`,rr_height:`${D}px`}}S==="iframe"&&!g(E.src)&&(!C&&!c7(t)&&(E.rr_src=E.src),delete E.src);let R;try{customElements.get(S)&&(R=!0)}catch{}return{type:Rn.Element,tagName:S,attributes:E,childNodes:[],isSVG:ive(t)||void 0,needBlock:C,rootId:v,isCustom:R}}function Or(t){return t==null?"":t.toLowerCase()}function mve(t,e){if(e.comment&&t.type===Rn.Comment)return!0;if(t.type===Rn.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&i7(t.attributes.href)==="js"))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(Or(t.attributes.name).match(/^msapplication-tile(image|color)$/)||Or(t.attributes.name)==="application-name"||Or(t.attributes.rel)==="icon"||Or(t.attributes.rel)==="apple-touch-icon"||Or(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&Or(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Or(t.attributes.property).match(/^(og|twitter|fb):/)||Or(t.attributes.name).match(/^(og|twitter):/)||Or(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(Or(t.attributes.name)==="robots"||Or(t.attributes.name)==="googlebot"||Or(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(Or(t.attributes.name)==="author"||Or(t.attributes.name)==="generator"||Or(t.attributes.name)==="framework"||Or(t.attributes.name)==="publisher"||Or(t.attributes.name)==="progid"||Or(t.attributes.property).match(/^article:/)||Or(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(Or(t.attributes.name)==="google-site-verification"||Or(t.attributes.name)==="yandex-verification"||Or(t.attributes.name)==="csrf-token"||Or(t.attributes.name)==="p:domain_verify"||Or(t.attributes.name)==="verify-v1"||Or(t.attributes.name)==="verification"||Or(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function zh(t,e){const{doc:r,mirror:n,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,skipChild:m=!1,inlineStylesheet:g=!0,maskInputOptions:x={},maskAttributeFn:v,maskTextFn:y,maskInputFn:w,slimDOMOptions:_,dataURLOptions:A={},inlineImages:C=!1,recordCanvas:S=!1,onSerialize:E,onIframeLoad:P,iframeLoadTimeout:R=5e3,onBlockedImageLoad:O,onStylesheetLoad:D,stylesheetLoadTimeout:I=5e3,keepIframeSrcFn:$=()=>!1,newlyAddedElement:M=!1}=e;let{preserveWhiteSpace:U=!0}=e;const H=dve(t,{doc:r,mirror:n,blockClass:s,blockSelector:a,maskAllText:l,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,inlineStylesheet:g,maskInputOptions:x,maskAttributeFn:v,maskTextFn:y,maskInputFn:w,dataURLOptions:A,inlineImages:C,recordCanvas:S,keepIframeSrcFn:$,newlyAddedElement:M});if(!H)return console.warn(t,"not serialized"),null;let z;n.hasNode(t)?z=n.getId(t):mve(H,_)||!U&&H.type===Rn.Text&&!H.isStyle&&!H.textContent.replace(/^\s+|\s+$/gm,"").length?z=Pg:z=KI();const q=Object.assign(H,{id:z});if(n.add(t,q),z===Pg)return null;E&&E(t);let V=!m;if(q.type===Rn.Element){V=V&&!q.needBlock;const W=t.shadowRoot;W&&sg(W)&&(q.isShadowHost=!0)}if((q.type===Rn.Document||q.type===Rn.Element)&&V){_.headWhitespace&&q.type===Rn.Element&&q.tagName==="head"&&(U=!1);const W={doc:r,mirror:n,blockClass:s,blockSelector:a,maskAllText:l,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,skipChild:m,inlineStylesheet:g,maskInputOptions:x,maskAttributeFn:v,maskTextFn:y,maskInputFn:w,slimDOMOptions:_,dataURLOptions:A,inlineImages:C,recordCanvas:S,preserveWhiteSpace:U,onSerialize:E,onIframeLoad:P,iframeLoadTimeout:R,onBlockedImageLoad:O,onStylesheetLoad:D,stylesheetLoadTimeout:I,keepIframeSrcFn:$},B=t.childNodes?Array.from(t.childNodes):[];for(const F of B){const Y=zh(F,W);Y&&q.childNodes.push(Y)}if(Bge(t)&&t.shadowRoot)for(const F of Array.from(t.shadowRoot.childNodes)){const Y=zh(F,W);Y&&(sg(t.shadowRoot)&&(Y.isShadow=!0),q.childNodes.push(Y))}}if(t.parentNode&&ng(t.parentNode)&&sg(t.parentNode)&&(q.isShadow=!0),q.type===Rn.Element&&q.tagName==="iframe"&&!q.needBlock&&cve(t,()=>{const W=c7(t);if(W&&P){const B=zh(W,{doc:W,mirror:n,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:g,maskInputOptions:x,maskAttributeFn:v,maskTextFn:y,maskInputFn:w,slimDOMOptions:_,dataURLOptions:A,inlineImages:C,recordCanvas:S,preserveWhiteSpace:U,onSerialize:E,onIframeLoad:P,iframeLoadTimeout:R,onStylesheetLoad:D,stylesheetLoadTimeout:I,keepIframeSrcFn:$});B&&P(t,B)}},R),q.type===Rn.Element&&q.tagName==="img"&&!t.complete&&q.needBlock){const W=t,B=()=>{if(W.isConnected&&!W.complete&&O)try{const F=W.getBoundingClientRect();F.width>0&&F.height>0&&O(W,q,F)}catch{}W.removeEventListener("load",B)};W.isConnected&&W.addEventListener("load",B)}return q.type===Rn.Element&&q.tagName==="link"&&typeof q.attributes.rel=="string"&&(q.attributes.rel==="stylesheet"||q.attributes.rel==="preload"&&typeof q.attributes.href=="string"&&i7(q.attributes.href)==="css")&&uve(t,()=>{if(D){const W=zh(t,{doc:r,mirror:n,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:g,maskInputOptions:x,maskAttributeFn:v,maskTextFn:y,maskInputFn:w,slimDOMOptions:_,dataURLOptions:A,inlineImages:C,recordCanvas:S,preserveWhiteSpace:U,onSerialize:E,onIframeLoad:P,iframeLoadTimeout:R,onStylesheetLoad:D,stylesheetLoadTimeout:I,keepIframeSrcFn:$});W&&D(t,W)}},I),q.type===Rn.Element&&delete q.needBlock,q}function gve(t,e){const{mirror:r=new a7,blockClass:n="rr-block",blockSelector:s=null,unblockSelector:a=null,maskAllText:o=!1,maskTextClass:l="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:f=!0,inlineImages:m=!1,recordCanvas:g=!1,maskAllInputs:x=!1,maskAttributeFn:v,maskTextFn:y,maskInputFn:w,slimDOM:_=!1,dataURLOptions:A,preserveWhiteSpace:C,onSerialize:S,onIframeLoad:E,iframeLoadTimeout:P,onBlockedImageLoad:R,onStylesheetLoad:O,stylesheetLoadTimeout:D,keepIframeSrcFn:I=()=>!1}=e||{};return zh(t,{doc:t,mirror:r,blockClass:n,blockSelector:s,unblockSelector:a,maskAllText:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:x===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:x===!1?{}:x,maskAttributeFn:v,maskTextFn:y,maskInputFn:w,slimDOMOptions:_===!0||_==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:_==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:_===!1?{}:_,dataURLOptions:A,inlineImages:m,recordCanvas:g,preserveWhiteSpace:C,onSerialize:S,onIframeLoad:E,iframeLoadTimeout:P,onBlockedImageLoad:R,onStylesheetLoad:O,stylesheetLoadTimeout:D,keepIframeSrcFn:I,newlyAddedElement:!1})}function $s(t,e,r=document){const n={capture:!0,passive:!0};return r.addEventListener(t,e,n),()=>r.removeEventListener(t,e,n)}const kh=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let MB={map:{},getId(){return console.error(kh),-1},getNode(){return console.error(kh),null},removeNodeFromMap(){console.error(kh)},has(){return console.error(kh),!1},reset(){console.error(kh)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(MB=new Proxy(MB,{get(t,e,r){return e==="map"&&console.error(kh),Reflect.get(t,e,r)}}));function kg(t,e,r={}){let n=null,s=0;return function(...a){const o=Date.now();!s&&r.leading===!1&&(s=o);const l=e-(o-s),c=this;l<=0||l>e?(n&&(Sve(n),n=null),s=o,t.apply(c,a)):!n&&r.trailing!==!1&&(n=M_(()=>{s=r.leading===!1?0:Date.now(),n=null,t.apply(c,a)},l))}}function h7(t,e,r,n,s=window){const a=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,n?r:{set(o){M_(()=>{r.set.call(this,o)},0),a&&a.set&&a.set.call(this,o)}}),()=>h7(t,e,a||{},!0)}function XI(t,e,r){try{if(!(e in t))return()=>{};const n=t[e],s=r(n);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:n}})),t[e]=s,()=>{t[e]=n}}catch{return()=>{}}}let Pb=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Pb=()=>new Date().getTime());function f7(t){const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:e?.documentElement.scrollLeft||e?.body?.parentElement?.scrollLeft||e?.body?.scrollLeft||0,top:e.scrollingElement?e.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:e?.documentElement.scrollTop||e?.body?.parentElement?.scrollTop||e?.body?.scrollTop||0}}function p7(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function m7(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function g7(t){if(!t)return null;try{return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}catch{return null}}function _a(t,e,r,n,s){if(!t)return!1;const a=g7(t);if(!a)return!1;const o=Uh(e,r);if(!s){const u=n&&a.matches(n);return o(a)&&!u}const l=ku(a,o);let c=-1;return l<0?!1:(n&&(c=ku(a,Uh(null,n))),l>-1&&c<0?!0:l<c)}function vve(t,e){return e.getId(t)!==-1}function IN(t,e){return e.getId(t)===Pg}function v7(t,e){if(ng(t))return!1;const r=e.getId(t);return e.has(r)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?v7(t.parentNode,e):!0:!0}function hk(t){return!!t.changedTouches}function yve(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let r=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function y7(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function x7(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function fk(t){return!!t?.shadowRoot}class xve{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,r){if(this.has(e))return this.getId(e);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function b7(t){let e=null;return t.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}function bve(t){let e=t,r;for(;r=b7(e);)e=r;return e}function wve(t){const e=t.ownerDocument;if(!e)return!1;const r=bve(t);return e.contains(r)}function w7(t){const e=t.ownerDocument;return e?e.contains(t)||wve(t):!1}const DB={};function YI(t){const e=DB[t];if(e)return e;const r=window.document;let n=window[t];if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const a=s.contentWindow;a&&a[t]&&(n=a[t]),r.head.removeChild(s)}catch{}return DB[t]=n.bind(window)}function _ve(...t){return YI("requestAnimationFrame")(...t)}function M_(...t){return YI("setTimeout")(...t)}function Sve(...t){return YI("clearTimeout")(...t)}var qt=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(qt||{}),Nt=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Nt||{}),ks=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(ks||{}),Wo=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(Wo||{}),Oh=(t=>(t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange",t[t.RateChange=4]="RateChange",t))(Oh||{});function QI(t){try{return t.contentDocument}catch{}}function jve(t){try{return t.contentWindow}catch{}}function LB(t){return"__ln"in t}class Ave{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<e;n++)r=r?.next||null;return r}addNode(e){const r={value:e,previous:null,next:null};if(e.__ln=r,e.previousSibling&&LB(e.previousSibling)){const n=e.previousSibling.__ln.next;r.next=n,r.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(e.nextSibling&&LB(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;r.previous=n,r.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(e){const r=e.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const $B=(t,e)=>`${t}@${e}`;class Nve{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],r=new Set,n=new Ave,s=c=>{let u=c,d=Pg;for(;d===Pg;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},a=c=>{if(!c.parentNode||!w7(c))return;const u=ng(c.parentNode)?this.mirror.getId(b7(c)):this.mirror.getId(c.parentNode),d=s(c);if(u===-1||d===-1)return n.addNode(c);const f=zh(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:m=>{y7(m,this.mirror)&&!_a(m,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(m),x7(m,this.mirror)&&this.stylesheetManager.trackLinkElement(m),fk(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(m,g)=>{_a(m,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(m,g),m.contentWindow&&this.canvasManager.addWindow(m.contentWindow),this.shadowDomManager.observeAttachShadow(m))},onStylesheetLoad:(m,g)=>{this.stylesheetManager.attachLinkElement(m,g)},onBlockedImageLoad:(m,g,{width:x,height:v})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:g.id,attributes:{style:{width:`${x}px`,height:`${v}px`}}}]})}});f&&(e.push({parentId:u,nextId:d,node:f}),r.add(f.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)FB(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||a(c);for(const c of this.addedSet)!BB(this.droppedSet,c)&&!FB(this.removes,c,this.mirror)||BB(this.movedSet,c)?a(c):this.droppedSet.add(c);let o=null;for(;n.length;){let c=null;if(o){const u=this.mirror.getId(o.value.parentNode),d=s(o.value);u!==-1&&d!==-1&&(c=o)}if(!c){let u=n.tail;for(;u;){const d=u;if(u=u.previous,d){const f=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(f!==-1){c=d;break}else{const g=d.value;if(g.parentNode&&g.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const x=g.parentNode.host;if(this.mirror.getId(x)!==-1){c=d;break}}}}}}if(!c){for(;n.head;)n.removeNode(n.head.value);break}o=c.previous,n.removeNode(c.value),a(c.value)}const l={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!r.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),f=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+f).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!r.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:e};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(l))},this.processMutation=e=>{if(!IN(e.target,this.mirror))switch(e.type){case"characterData":{const r=e.target.textContent;!_a(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==e.oldValue&&this.texts.push({value:Sf(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r,g7(e.target)):r.replace(/[\S]/g,"*"):r,node:e.target});break}case"attributes":{const r=e.target;let n=e.attributeName,s=e.target.getAttribute(n);if(n==="value"){const o=GI(r),l=r.tagName;s=Cb(r,l,o);const c=R_({maskInputOptions:this.maskInputOptions,tagName:l,type:o}),u=Sf(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=Tg({isMasked:u,element:r,value:s,maskInputFn:this.maskInputFn})}if(_a(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===e.oldValue)return;let a=this.attributeMap.get(e.target);if(r.tagName==="IFRAME"&&n==="src"&&!this.keepIframeSrcFn(s))if(!QI(r))n="rr_src";else return;if(a||(a={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(a),this.attributeMap.set(e.target,a)),n==="type"&&r.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!d7(r.tagName,n)&&(a.attributes[n]=u7(this.doc,_f(r.tagName),_f(n),s,r,this.maskAttributeFn),n==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");e.oldValue&&o.setAttribute("style",e.oldValue);for(const l of Array.from(r.style)){const c=r.style.getPropertyValue(l),u=r.style.getPropertyPriority(l);c!==o.style.getPropertyValue(l)||u!==o.style.getPropertyPriority(l)?u===""?a.styleDiff[l]=c:a.styleDiff[l]=[c,u]:a._unchangedStyles[l]=[c,u]}for(const l of Array.from(o.style))r.style.getPropertyValue(l)===""&&(a.styleDiff[l]=!1)}break}case"childList":{if(_a(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(r=>this.genAdds(r,e.target)),e.removedNodes.forEach(r=>{const n=this.mirror.getId(r),s=ng(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);_a(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||IN(r,this.mirror)||!vve(r,this.mirror)||(this.addedSet.has(r)?(pk(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(e.target)&&n===-1||v7(e.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[$B(n,s)]?pk(this.movedSet,r):this.removes.push({parentId:s,id:n,isShadow:ng(e.target)&&sg(e.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(e,r)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(IN(e,this.mirror))return;this.movedSet.add(e);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[$B(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);_a(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes&&e.childNodes.forEach(n=>this.genAdds(n)),fk(e)&&e.shadowRoot.childNodes.forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(r=>{this[r]=e[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function pk(t,e){t.delete(e),e.childNodes?.forEach(r=>pk(t,r))}function FB(t,e,r){return t.length===0?!1:Eve(t,e,r)}function Eve(t,e,r){let n=e.parentNode;for(;n;){const s=r.getId(n);if(t.some(a=>a.id===s))return!0;n=n.parentNode}return!1}function BB(t,e){return t.size===0?!1:_7(t,e)}function _7(t,e){const{parentNode:r}=e;return r?t.has(r)?!0:_7(t,r):!1}let ag;function Cve(t){ag=t}function Tve(){ag=void 0}const or=t=>ag?(...r)=>{try{return t(...r)}catch(n){if(ag&&ag(n)===!0)return()=>{};throw n}}:t,qh=[];function Jv(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function S7(t,e){const r=new Nve;qh.push(r),r.init(t);let n=window.MutationObserver||window.__rrMutationObserver;const s=window?.Zone?.__symbol__?.("MutationObserver");s&&window[s]&&(n=window[s]);const a=new n(or(o=>{t.onMutation&&t.onMutation(o)===!1||r.processMutations.bind(r)(o)}));return a.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Pve({mousemoveCb:t,sampling:e,doc:r,mirror:n}){if(e.mousemove===!1)return()=>{};const s=typeof e.mousemove=="number"?e.mousemove:50,a=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],l;const c=kg(or(f=>{const m=Date.now()-l;t(o.map(g=>(g.timeOffset-=m,g)),f),o=[],l=null}),a),u=or(kg(or(f=>{const m=Jv(f),{clientX:g,clientY:x}=hk(f)?f.changedTouches[0]:f;l||(l=Pb()),o.push({x:g,y:x,id:n.getId(m),timeOffset:Pb()-l}),c(typeof DragEvent<"u"&&f instanceof DragEvent?Nt.Drag:f instanceof MouseEvent?Nt.MouseMove:Nt.TouchMove)}),s,{trailing:!1})),d=[$s("mousemove",u,r),$s("touchmove",u,r),$s("drag",u,r)];return or(()=>{d.forEach(f=>f())})}function kve({mouseInteractionCb:t,doc:e,mirror:r,blockClass:n,blockSelector:s,unblockSelector:a,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const l=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let u=null;const d=f=>m=>{const g=Jv(m);if(_a(g,n,s,a,!0))return;let x=null,v=f;if("pointerType"in m){switch(m.pointerType){case"mouse":x=Wo.Mouse;break;case"touch":x=Wo.Touch;break;case"pen":x=Wo.Pen;break}x===Wo.Touch?ks[f]===ks.MouseDown?v="TouchStart":ks[f]===ks.MouseUp&&(v="TouchEnd"):Wo.Pen}else hk(m)&&(x=Wo.Touch);x!==null?(u=x,(v.startsWith("Touch")&&x===Wo.Touch||v.startsWith("Mouse")&&x===Wo.Mouse)&&(x=null)):ks[f]===ks.Click&&(x=u,u=null);const y=hk(m)?m.changedTouches[0]:m;if(!y)return;const w=r.getId(g),{clientX:_,clientY:A}=y;or(t)({type:ks[v],id:w,x:_,y:A,...x!==null&&{pointerType:x}})};return Object.keys(ks).filter(f=>Number.isNaN(Number(f))&&!f.endsWith("_Departed")&&l[f]!==!1).forEach(f=>{let m=_f(f);const g=d(f);if(window.PointerEvent)switch(ks[f]){case ks.MouseDown:case ks.MouseUp:m=m.replace("mouse","pointer");break;case ks.TouchStart:case ks.TouchEnd:return}c.push($s(m,g,e))}),or(()=>{c.forEach(f=>f())})}function j7({scrollCb:t,doc:e,mirror:r,blockClass:n,blockSelector:s,unblockSelector:a,sampling:o}){const l=or(kg(or(c=>{const u=Jv(c);if(!u||_a(u,n,s,a,!0))return;const d=r.getId(u);if(u===e&&e.defaultView){const f=f7(e.defaultView);t({id:d,x:f.left,y:f.top})}else t({id:d,x:u.scrollLeft,y:u.scrollTop})}),o.scroll||100));return $s("scroll",l,e)}function Ove({viewportResizeCb:t},{win:e}){let r=-1,n=-1;const s=or(kg(or(()=>{const a=p7(),o=m7();(r!==a||n!==o)&&(t({width:Number(o),height:Number(a)}),r=a,n=o)}),200));return $s("resize",s,e)}const Rve=["INPUT","TEXTAREA","SELECT"],UB=new WeakMap;function Ive({inputCb:t,doc:e,mirror:r,blockClass:n,blockSelector:s,unblockSelector:a,ignoreClass:o,ignoreSelector:l,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:f,maskTextClass:m,unmaskTextClass:g,maskTextSelector:x,unmaskTextSelector:v}){function y(P){let R=Jv(P);const O=P.isTrusted,D=R&&uk(R.tagName);if(D==="OPTION"&&(R=R.parentElement),!R||!D||Rve.indexOf(D)<0||_a(R,n,s,a,!0))return;const I=R;if(I.classList.contains(o)||l&&I.matches(l))return;const $=GI(R);let M=Cb(I,D,$),U=!1;const H=R_({maskInputOptions:c,tagName:D,type:$}),z=Sf(R,m,x,g,v,H);($==="radio"||$==="checkbox")&&(U=R.checked),M=Tg({isMasked:z,element:R,value:M,maskInputFn:u}),w(R,f?{text:M,isChecked:U,userTriggered:O}:{text:M,isChecked:U});const q=R.name;$==="radio"&&q&&U&&e.querySelectorAll(`input[type="radio"][name="${q}"]`).forEach(V=>{if(V!==R){const W=Tg({isMasked:z,element:V,value:Cb(V,D,$),maskInputFn:u});w(V,f?{text:W,isChecked:!U,userTriggered:!1}:{text:W,isChecked:!U})}})}function w(P,R){const O=UB.get(P);if(!O||O.text!==R.text||O.isChecked!==R.isChecked){UB.set(P,R);const D=r.getId(P);or(t)({...R,id:D})}}const A=(d.input==="last"?["change"]:["input","change"]).map(P=>$s(P,or(y),e)),C=e.defaultView;if(!C)return()=>{A.forEach(P=>P())};const S=C.Object.getOwnPropertyDescriptor(C.HTMLInputElement.prototype,"value"),E=[[C.HTMLInputElement.prototype,"value"],[C.HTMLInputElement.prototype,"checked"],[C.HTMLSelectElement.prototype,"value"],[C.HTMLTextAreaElement.prototype,"value"],[C.HTMLSelectElement.prototype,"selectedIndex"],[C.HTMLOptionElement.prototype,"selected"]];return S&&S.set&&A.push(...E.map(P=>h7(P[0],P[1],{set(){or(y)({target:this,isTrusted:!1})}},!1,C))),or(()=>{A.forEach(P=>P())})}function kb(t){const e=[];function r(n,s){if(Xx("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||Xx("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||Xx("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||Xx("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const o=Array.from(n.parentRule.cssRules).indexOf(n);s.unshift(o)}else if(n.parentStyleSheet){const o=Array.from(n.parentStyleSheet.cssRules).indexOf(n);s.unshift(o)}return s}return r(t,e)}function lc(t,e,r){let n,s;return t?(t.ownerNode?n=e.getId(t.ownerNode):s=r.getId(t),{styleId:s,id:n}):{}}function Mve({styleSheetRuleCb:t,mirror:e,stylesheetManager:r},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const s=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:or((d,f,m)=>{const[g,x]=m,{id:v,styleId:y}=lc(f,e,r.styleMirror);return(v&&v!==-1||y&&y!==-1)&&t({id:v,styleId:y,adds:[{rule:g,index:x}]}),d.apply(f,m)})});const a=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:or((d,f,m)=>{const[g]=m,{id:x,styleId:v}=lc(f,e,r.styleMirror);return(x&&x!==-1||v&&v!==-1)&&t({id:x,styleId:v,removes:[{index:g}]}),d.apply(f,m)})});let o;n.CSSStyleSheet.prototype.replace&&(o=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:or((d,f,m)=>{const[g]=m,{id:x,styleId:v}=lc(f,e,r.styleMirror);return(x&&x!==-1||v&&v!==-1)&&t({id:x,styleId:v,replace:g}),d.apply(f,m)})}));let l;n.CSSStyleSheet.prototype.replaceSync&&(l=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:or((d,f,m)=>{const[g]=m,{id:x,styleId:v}=lc(f,e,r.styleMirror);return(x&&x!==-1||v&&v!==-1)&&t({id:x,styleId:v,replaceSync:g}),d.apply(f,m)})}));const c={};Yx("CSSGroupingRule")?c.CSSGroupingRule=n.CSSGroupingRule:(Yx("CSSMediaRule")&&(c.CSSMediaRule=n.CSSMediaRule),Yx("CSSConditionRule")&&(c.CSSConditionRule=n.CSSConditionRule),Yx("CSSSupportsRule")&&(c.CSSSupportsRule=n.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,f])=>{u[d]={insertRule:f.prototype.insertRule,deleteRule:f.prototype.deleteRule},f.prototype.insertRule=new Proxy(u[d].insertRule,{apply:or((m,g,x)=>{const[v,y]=x,{id:w,styleId:_}=lc(g.parentStyleSheet,e,r.styleMirror);return(w&&w!==-1||_&&_!==-1)&&t({id:w,styleId:_,adds:[{rule:v,index:[...kb(g),y||0]}]}),m.apply(g,x)})}),f.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:or((m,g,x)=>{const[v]=x,{id:y,styleId:w}=lc(g.parentStyleSheet,e,r.styleMirror);return(y&&y!==-1||w&&w!==-1)&&t({id:y,styleId:w,removes:[{index:[...kb(g),v]}]}),m.apply(g,x)})})}),or(()=>{n.CSSStyleSheet.prototype.insertRule=s,n.CSSStyleSheet.prototype.deleteRule=a,o&&(n.CSSStyleSheet.prototype.replace=o),l&&(n.CSSStyleSheet.prototype.replaceSync=l),Object.entries(c).forEach(([d,f])=>{f.prototype.insertRule=u[d].insertRule,f.prototype.deleteRule=u[d].deleteRule})})}function A7({mirror:t,stylesheetManager:e},r){let n=null;r.nodeName==="#document"?n=t.getId(r):n=t.getId(r.host);const s=r.nodeName==="#document"?r.defaultView?.Document:r.ownerDocument?.defaultView?.ShadowRoot,a=s?.prototype?Object.getOwnPropertyDescriptor(s?.prototype,"adoptedStyleSheets"):void 0;return n===null||n===-1||!s||!a?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get(){return a.get?.call(this)},set(o){const l=a.set?.call(this,o);if(n!==null&&n!==-1)try{e.adoptStyleSheets(o,n)}catch{}return l}}),or(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get:a.get,set:a.set})}))}function Dve({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:r,stylesheetManager:n},{win:s}){const a=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:or((l,c,u)=>{const[d,f,m]=u;if(r.has(d))return a.apply(c,[d,f,m]);const{id:g,styleId:x}=lc(c.parentRule?.parentStyleSheet,e,n.styleMirror);return(g&&g!==-1||x&&x!==-1)&&t({id:g,styleId:x,set:{property:d,value:f,priority:m},index:kb(c.parentRule)}),l.apply(c,u)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:or((l,c,u)=>{const[d]=u;if(r.has(d))return o.apply(c,[d]);const{id:f,styleId:m}=lc(c.parentRule?.parentStyleSheet,e,n.styleMirror);return(f&&f!==-1||m&&m!==-1)&&t({id:f,styleId:m,remove:{property:d},index:kb(c.parentRule)}),l.apply(c,u)})}),or(()=>{s.CSSStyleDeclaration.prototype.setProperty=a,s.CSSStyleDeclaration.prototype.removeProperty=o})}function Lve({mediaInteractionCb:t,blockClass:e,blockSelector:r,unblockSelector:n,mirror:s,sampling:a,doc:o}){const l=or(u=>kg(or(d=>{const f=Jv(d);if(!f||_a(f,e,r,n,!0))return;const{currentTime:m,volume:g,muted:x,playbackRate:v}=f;t({type:u,id:s.getId(f),currentTime:m,volume:g,muted:x,playbackRate:v})}),a.media||500)),c=[$s("play",l(Oh.Play),o),$s("pause",l(Oh.Pause),o),$s("seeked",l(Oh.Seeked),o),$s("volumechange",l(Oh.VolumeChange),o),$s("ratechange",l(Oh.RateChange),o)];return or(()=>{c.forEach(u=>u())})}function $ve({fontCb:t,doc:e}){const r=e.defaultView;if(!r)return()=>{};const n=[],s=new WeakMap,a=r.FontFace;r.FontFace=function(c,u,d){const f=new a(c,u,d);return s.set(f,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),f};const o=XI(e.fonts,"add",function(l){return function(c){return M_(or(()=>{const u=s.get(c);u&&(t(u),s.delete(c))}),0),l.apply(this,[c])}});return n.push(()=>{r.FontFace=a}),n.push(o),or(()=>{n.forEach(l=>l())})}function Fve(t){const{doc:e,mirror:r,blockClass:n,blockSelector:s,unblockSelector:a,selectionCb:o}=t;let l=!0;const c=or(()=>{const u=e.getSelection();if(!u||l&&u?.isCollapsed)return;l=u.isCollapsed||!1;const d=[],f=u.rangeCount||0;for(let m=0;m<f;m++){const g=u.getRangeAt(m),{startContainer:x,startOffset:v,endContainer:y,endOffset:w}=g;_a(x,n,s,a,!0)||_a(y,n,s,a,!0)||d.push({start:r.getId(x),startOffset:v,end:r.getId(y),endOffset:w})}o({ranges:d})});return c(),$s("selectionchange",c)}function Bve({doc:t,customElementCb:e}){const r=t.defaultView;return!r||!r.customElements?()=>{}:XI(r.customElements,"define",function(s){return function(a,o,l){try{e({define:{name:a}})}catch{}return s.apply(this,[a,o,l])}})}function Uve(t,e={}){const r=t.doc.defaultView;if(!r)return()=>{};let n;t.recordDOM&&(n=S7(t,t.doc));const s=Pve(t),a=kve(t),o=j7(t),l=Ove(t,{win:r}),c=Ive(t),u=Lve(t);let d=()=>{},f=()=>{},m=()=>{},g=()=>{};t.recordDOM&&(d=Mve(t,{win:r}),f=A7(t,t.doc),m=Dve(t,{win:r}),t.collectFonts&&(g=$ve(t)));const x=Fve(t),v=Bve(t),y=[];for(const w of t.plugins)y.push(w.observer(w.callback,r,w.options));return or(()=>{qh.forEach(w=>w.reset()),n?.disconnect(),s(),a(),o(),l(),c(),u(),d(),f(),m(),g(),x(),v(),y.forEach(w=>w())})}function Xx(t){return typeof window[t]<"u"}function Yx(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class mk{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,r,n,s){const a=n||this.getIdToRemoteIdMap(e),o=s||this.getRemoteIdToIdMap(e);let l=a.get(r);return l||(l=this.generateIdFn(),a.set(r,l),o.set(l,r)),l}getIds(e,r){const n=this.getIdToRemoteIdMap(e),s=this.getRemoteIdToIdMap(e);return r.map(a=>this.getId(e,a,n,s))}getRemoteId(e,r,n){const s=n||this.getRemoteIdToIdMap(e);if(typeof r!="number")return r;const a=s.get(r);return a||-1}getRemoteIds(e,r){const n=this.getRemoteIdToIdMap(e);return r.map(s=>this.getRemoteId(e,s,n))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let r=this.iframeIdToRemoteIdMap.get(e);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(e,r)),r}getRemoteIdToIdMap(e){let r=this.iframeRemoteIdToIdMap.get(e);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(e,r)),r}}class zve{constructor(){this.crossOriginIframeMirror=new mk(KI),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class qve{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new mk(KI),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new mk(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,r){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&e.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(e);const n=QI(e);n&&n.adoptedStyleSheets&&n.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(n.adoptedStyleSheets,this.mirror.getId(n))}handleMessage(e){const r=e;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!e.source)return;const s=this.crossOriginIframeMap.get(e.source);if(!s)return;const a=this.transformCrossOriginEvent(s,r.data.event);a&&this.wrappedEmit(a,r.data.isCheckout)}transformCrossOriginEvent(e,r){switch(r.type){case qt.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(r.data.node,e);const n=r.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(r.data.node,n),{timestamp:r.timestamp,type:qt.IncrementalSnapshot,data:{source:Nt.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case qt.Meta:case qt.Load:case qt.DomContentLoaded:return!1;case qt.Plugin:return r;case qt.Custom:return this.replaceIds(r.data.payload,e,["id","parentId","previousId","nextId"]),r;case qt.IncrementalSnapshot:switch(r.data.source){case Nt.Mutation:return r.data.adds.forEach(n=>{this.replaceIds(n,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(n.node,e);const s=this.crossOriginIframeRootIdMap.get(e);s&&this.patchRootIdOnNode(n.node,s)}),r.data.removes.forEach(n=>{this.replaceIds(n,e,["parentId","id"])}),r.data.attributes.forEach(n=>{this.replaceIds(n,e,["id"])}),r.data.texts.forEach(n=>{this.replaceIds(n,e,["id"])}),r;case Nt.Drag:case Nt.TouchMove:case Nt.MouseMove:return r.data.positions.forEach(n=>{this.replaceIds(n,e,["id"])}),r;case Nt.ViewportResize:return!1;case Nt.MediaInteraction:case Nt.MouseInteraction:case Nt.Scroll:case Nt.CanvasMutation:case Nt.Input:return this.replaceIds(r.data,e,["id"]),r;case Nt.StyleSheetRule:case Nt.StyleDeclaration:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleId"]),r;case Nt.Font:return r;case Nt.Selection:return r.data.ranges.forEach(n=>{this.replaceIds(n,e,["start","end"])}),r;case Nt.AdoptedStyleSheet:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleIds"]),r.data.styles?.forEach(n=>{this.replaceStyleIds(n,e,["styleId"])}),r}}return!1}replace(e,r,n,s){for(const a of s)!Array.isArray(r[a])&&typeof r[a]!="number"||(Array.isArray(r[a])?r[a]=e.getIds(n,r[a]):r[a]=e.getId(n,r[a]));return r}replaceIds(e,r,n){return this.replace(this.crossOriginIframeMirror,e,r,n)}replaceStyleIds(e,r,n){return this.replace(this.crossOriginIframeStyleMirror,e,r,n)}replaceIdOnNode(e,r){this.replaceIds(e,r,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}patchRootIdOnNode(e,r){e.type!==Rn.Document&&!e.rootId&&(e.rootId=r),"childNodes"in e&&e.childNodes.forEach(n=>{this.patchRootIdOnNode(n,r)})}}class Vve{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Hve{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,r){if(!sg(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const n=S7({...this.bypassOptions,doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(j7({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),M_(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(A7({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){const r=QI(e),n=jve(e);!r||!n||this.patchAttachShadow(n.Element,r)}patchAttachShadow(e,r){const n=this;this.restoreHandlers.push(XI(e.prototype,"attachShadow",function(s){return function(a){const o=s.call(this,a);return this.shadowRoot&&w7(this)&&n.addShadowRoot(this.shadowRoot,r),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var zB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wve=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qx=0;Qx<zB.length;Qx++)Wve[zB.charCodeAt(Qx)]=Qx;class qB{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Gve{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new xve,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,r){if(e.length===0)return;const n={id:r,styleIds:[]},s=[];for(const a of e){let o;this.styleMirror.has(a)?o=this.styleMirror.getId(a):(o=this.styleMirror.add(a),s.push({styleId:o,rules:Array.from(a.rules||CSSRule,(l,c)=>({rule:s7(l),index:c}))})),n.styleIds.push(o)}s.length>0&&(n.styles=s),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Kve{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,r){const n=this.nodeMap.get(e);return n&&Array.from(n).some(s=>s!==r)}add(e,r){this.active||(this.active=!0,_ve(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(r))}destroy(){}}let an,Ob;try{if(Array.from([1],t=>t*2)[0]!==2){const t=document.createElement("iframe");document.body.appendChild(t),Array.from=t.contentWindow?.Array.from||Array.from,document.body.removeChild(t)}}catch(t){console.debug("Unable to override Array.from",t)}const bi=Gge();function dl(t={}){const{emit:e,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:s="rr-block",blockSelector:a=null,unblockSelector:o=null,ignoreClass:l="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:f=null,maskTextSelector:m=null,unmaskTextSelector:g=null,inlineStylesheet:x=!0,maskAllInputs:v,maskInputOptions:y,slimDOMOptions:w,maskAttributeFn:_,maskInputFn:A,maskTextFn:C,maxCanvasSize:S=null,packFn:E,sampling:P={},dataURLOptions:R={},mousemoveWait:O,recordDOM:D=!0,recordCanvas:I=!1,recordCrossOriginIframes:$=!1,recordAfter:M=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:U=!1,collectFonts:H=!1,inlineImages:z=!1,plugins:q,keepIframeSrcFn:V=()=>!1,ignoreCSSAttributes:W=new Set([]),errorHandler:B,onMutation:F,getCanvasManager:Y}=t;Cve(B);const oe=$?window.parent===window:!0;let xe=!1;if(!oe)try{window.parent.document&&(xe=!1)}catch{xe=!0}if(oe&&!e)throw new Error("emit function is required");if(!oe&&!xe)return()=>{};O!==void 0&&P.mousemove===void 0&&(P.mousemove=O),bi.reset();const J=v===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:y!==void 0?y:{},Ee=w===!0||w==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:w==="all",headMetaDescKeywords:w==="all"}:w||{};yve();let ye,je=0;const pe=X=>{for(const ae of q||[])ae.eventProcessor&&(X=ae.eventProcessor(X));return E&&!xe&&(X=E(X)),X};an=(X,ae)=>{const ce=X;if(ce.timestamp=Pb(),qh[0]?.isFrozen()&&ce.type!==qt.FullSnapshot&&!(ce.type===qt.IncrementalSnapshot&&ce.data.source===Nt.Mutation)&&qh.forEach(Ce=>Ce.unfreeze()),oe)e?.(pe(ce),ae);else if(xe){const Ce={type:"rrweb",event:pe(ce),origin:window.location.origin,isCheckout:ae};window.parent.postMessage(Ce,"*")}if(ce.type===qt.FullSnapshot)ye=ce,je=0;else if(ce.type===qt.IncrementalSnapshot){if(ce.data.source===Nt.Mutation&&ce.data.isAttachIframe)return;je++;const Ce=n&&je>=n,K=r&&ye&&ce.timestamp-ye.timestamp>r;(Ce||K)&&St(!0)}};const Se=X=>{an({type:qt.IncrementalSnapshot,data:{source:Nt.Mutation,...X}})},Oe=X=>an({type:qt.IncrementalSnapshot,data:{source:Nt.Scroll,...X}}),ve=X=>an({type:qt.IncrementalSnapshot,data:{source:Nt.CanvasMutation,...X}}),Xe=X=>an({type:qt.IncrementalSnapshot,data:{source:Nt.AdoptedStyleSheet,...X}}),$e=new Gve({mutationCb:Se,adoptedStyleSheetCb:Xe}),at=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new zve:new qve({mirror:bi,mutationCb:Se,stylesheetManager:$e,recordCrossOriginIframes:$,wrappedEmit:an});for(const X of q||[])X.getMirror&&X.getMirror({nodeMirror:bi,crossOriginIframeMirror:at.crossOriginIframeMirror,crossOriginIframeStyleMirror:at.crossOriginIframeStyleMirror});const Ft=new Kve,rr=Yve(Y,{mirror:bi,win:window,mutationCb:X=>an({type:qt.IncrementalSnapshot,data:{source:Nt.CanvasMutation,...X}}),recordCanvas:I,blockClass:s,blockSelector:a,unblockSelector:o,maxCanvasSize:S,sampling:P.canvas,dataURLOptions:R,errorHandler:B}),_e=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Vve:new Hve({mutationCb:Se,scrollCb:Oe,bypassOptions:{onMutation:F,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:u,maskTextClass:d,unmaskTextClass:f,maskTextSelector:m,unmaskTextSelector:g,inlineStylesheet:x,maskInputOptions:J,dataURLOptions:R,maskAttributeFn:_,maskTextFn:C,maskInputFn:A,recordCanvas:I,inlineImages:z,sampling:P,slimDOMOptions:Ee,iframeManager:at,stylesheetManager:$e,canvasManager:rr,keepIframeSrcFn:V,processedNodeManager:Ft},mirror:bi}),St=(X=!1)=>{if(!D)return;an({type:qt.Meta,data:{href:window.location.href,width:m7(),height:p7()}},X),$e.reset(),_e.init(),qh.forEach(ce=>ce.lock());const ae=gve(document,{mirror:bi,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:u,maskTextClass:d,unmaskTextClass:f,maskTextSelector:m,unmaskTextSelector:g,inlineStylesheet:x,maskAllInputs:J,maskAttributeFn:_,maskInputFn:A,maskTextFn:C,slimDOM:Ee,dataURLOptions:R,recordCanvas:I,inlineImages:z,onSerialize:ce=>{y7(ce,bi)&&at.addIframe(ce),x7(ce,bi)&&$e.trackLinkElement(ce),fk(ce)&&_e.addShadowRoot(ce.shadowRoot,document)},onIframeLoad:(ce,Ce)=>{at.attachIframe(ce,Ce),ce.contentWindow&&rr.addWindow(ce.contentWindow),_e.observeAttachShadow(ce)},onStylesheetLoad:(ce,Ce)=>{$e.attachLinkElement(ce,Ce)},onBlockedImageLoad:(ce,Ce,{width:K,height:we})=>{Se({adds:[],removes:[],texts:[],attributes:[{id:Ce.id,attributes:{style:{width:`${K}px`,height:`${we}px`}}}]})},keepIframeSrcFn:V});if(!ae)return console.warn("Failed to snapshot the document");an({type:qt.FullSnapshot,data:{node:ae,initialOffset:f7(window)}}),qh.forEach(ce=>ce.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&$e.adoptStyleSheets(document.adoptedStyleSheets,bi.getId(document))};Ob=St;try{const X=[],ae=Ce=>or(Uve)({onMutation:F,mutationCb:Se,mousemoveCb:(K,we)=>an({type:qt.IncrementalSnapshot,data:{source:we,positions:K}}),mouseInteractionCb:K=>an({type:qt.IncrementalSnapshot,data:{source:Nt.MouseInteraction,...K}}),scrollCb:Oe,viewportResizeCb:K=>an({type:qt.IncrementalSnapshot,data:{source:Nt.ViewportResize,...K}}),inputCb:K=>an({type:qt.IncrementalSnapshot,data:{source:Nt.Input,...K}}),mediaInteractionCb:K=>an({type:qt.IncrementalSnapshot,data:{source:Nt.MediaInteraction,...K}}),styleSheetRuleCb:K=>an({type:qt.IncrementalSnapshot,data:{source:Nt.StyleSheetRule,...K}}),styleDeclarationCb:K=>an({type:qt.IncrementalSnapshot,data:{source:Nt.StyleDeclaration,...K}}),canvasMutationCb:ve,fontCb:K=>an({type:qt.IncrementalSnapshot,data:{source:Nt.Font,...K}}),selectionCb:K=>{an({type:qt.IncrementalSnapshot,data:{source:Nt.Selection,...K}})},customElementCb:K=>{an({type:qt.IncrementalSnapshot,data:{source:Nt.CustomElement,...K}})},blockClass:s,ignoreClass:l,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:f,maskTextSelector:m,unmaskTextSelector:g,maskInputOptions:J,inlineStylesheet:x,sampling:P,recordDOM:D,recordCanvas:I,inlineImages:z,userTriggeredOnInput:U,collectFonts:H,doc:Ce,maskAttributeFn:_,maskInputFn:A,maskTextFn:C,keepIframeSrcFn:V,blockSelector:a,unblockSelector:o,slimDOMOptions:Ee,dataURLOptions:R,mirror:bi,iframeManager:at,stylesheetManager:$e,shadowDomManager:_e,processedNodeManager:Ft,canvasManager:rr,ignoreCSSAttributes:W,plugins:q?.filter(K=>K.observer)?.map(K=>({observer:K.observer,options:K.options,callback:we=>an({type:qt.Plugin,data:{plugin:K.name,payload:we}})}))||[]},{});at.addLoadListener(Ce=>{try{X.push(ae(Ce.contentDocument))}catch(K){console.warn(K)}});const ce=()=>{St(),X.push(ae(document))};return document.readyState==="interactive"||document.readyState==="complete"?ce():(X.push($s("DOMContentLoaded",()=>{an({type:qt.DomContentLoaded,data:{}}),M==="DOMContentLoaded"&&ce()})),X.push($s("load",()=>{an({type:qt.Load,data:{}}),M==="load"&&ce()},window))),()=>{X.forEach(Ce=>Ce()),Ft.destroy(),Ob=void 0,Tve()}}catch(X){console.warn(X)}}function Xve(t){if(!Ob)throw new Error("please take full snapshot after start recording");Ob(t)}dl.mirror=bi;dl.takeFullSnapshot=Xve;function Yve(t,e){try{return t?t(e):new qB}catch{return console.warn("Unable to initialize CanvasManager"),new qB}}var VB;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(VB||(VB={}));const Qve=3,Jve=5;function JI(t){return t>9999999999?t:t*1e3}function MN(t){return t>9999999999?t/1e3:t}function Zv(t,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:qt.Custom,timestamp:(e.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Yo(e,10,1e3)}}),e.category==="console")))}const Zve="button,a";function N7(t){return t.closest(Zve)||t}function E7(t){const e=C7(t);return!e||!(e instanceof Element)?e:N7(e)}function C7(t){return eye(t)?t.target:t}function eye(t){return typeof t=="object"&&!!t&&"target"in t}let cc;function tye(t){return cc||(cc=[],rye()),cc.push(t),()=>{const e=cc?cc.indexOf(t):-1;e>-1&&cc.splice(e,1)}}function rye(){Kpe(Dr,"open",function(t){return function(...e){if(cc)try{cc.forEach(r=>r())}catch{}return t.apply(Dr,e)}})}const nye=new Set([Nt.Mutation,Nt.StyleSheetRule,Nt.StyleDeclaration,Nt.AdoptedStyleSheet,Nt.CanvasMutation,Nt.Selection,Nt.MediaInteraction]);function sye(t,e,r){t.handleClick(e,r)}class aye{constructor(e,r,n=Zv){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=r.timeout/1e3,this._threshold=r.threshold/1e3,this._scrollTimeout=r.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=r.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=tye(()=>{this._lastMutation=HB()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,r){if(oye(r,this._ignoreSelector)||!lye(e))return;const n={timestamp:MN(e.timestamp),clickBreadcrumb:e,clickCount:0,node:r};this._clicks.some(s=>s.node===n.node&&Math.abs(s.timestamp-n.timestamp)<1)||(this._clicks.push(n),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=MN(e)}registerScroll(e=Date.now()){this._lastScroll=MN(e)}registerClick(e){const r=N7(e);this._handleMultiClick(r)}_handleMultiClick(e){this._getClicks(e).forEach(r=>{r.clickCount++})}_getClicks(e){return this._clicks.filter(r=>r.node===e)}_checkClicks(){const e=[],r=HB();this._clicks.forEach(n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=r&&e.push(n)});for(const n of e){const s=this._clicks.indexOf(n);s>-1&&(this._generateBreadcrumbs(n),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const r=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,s=e.mutationAfter&&e.mutationAfter<=this._threshold,a=!n&&!s,{clickCount:o,clickBreadcrumb:l}=e;if(a){const c=Math.min(e.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.slowClickDetected",data:{...l.data,url:Dr.location.href,route:r.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:o||1}};this._addBreadcrumbEvent(r,d);return}if(o>1){const c={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.multiClick",data:{...l.data,url:Dr.location.href,route:r.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(r,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Yv(()=>this._checkClicks(),1e3)}}const iye=["A","BUTTON","INPUT"];function oye(t,e){return!!(!iye.includes(t.tagName)||t.tagName==="INPUT"&&!["submit","button"].includes(t.getAttribute("type")||"")||t.tagName==="A"&&(t.hasAttribute("download")||t.hasAttribute("target")&&t.getAttribute("target")!=="_self")||e&&t.matches(e))}function lye(t){return!!(t.data&&typeof t.data.nodeId=="number"&&t.timestamp)}function HB(){return Date.now()/1e3}function cye(t,e){try{if(!uye(e))return;const{source:r}=e.data;if(nye.has(r)&&t.registerMutation(e.timestamp),r===Nt.Scroll&&t.registerScroll(e.timestamp),dye(e)){const{type:n,id:s}=e.data,a=dl.mirror.getNode(s);a instanceof HTMLElement&&n===ks.Click&&t.registerClick(a)}}catch{}}function uye(t){return t.type===Qve}function dye(t){return t.data.source===Nt.MouseInteraction}function ho(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var ZI=(t=>(t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t))(ZI||{});const hye=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function fye(t){const e={};!t["data-sentry-component"]&&t["data-sentry-element"]&&(t["data-sentry-component"]=t["data-sentry-element"]);for(const r in t)if(hye.has(r)){let n=r;(r==="data-testid"||r==="data-test-id")&&(n="testId"),e[n]=t[r]}return e}const pye=t=>e=>{if(!t.isEnabled())return;const r=mye(e);if(!r)return;const n=e.name==="click",s=n?e.event:void 0;n&&t.clickDetector&&s?.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&sye(t.clickDetector,r,E7(e.event)),Zv(t,r)};function T7(t,e){const r=dl.mirror.getId(t),n=r&&dl.mirror.getNode(r),s=n&&dl.mirror.getMeta(n),a=s&&vye(s)?s:null;return{message:e,data:a?{nodeId:r,node:{id:r,tagName:a.tagName,textContent:Array.from(a.childNodes).map(o=>o.type===ZI.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:fye(a.attributes)}}:{}}}function mye(t){const{target:e,message:r}=gye(t);return ho({category:`ui.${t.name}`,...T7(e,r)})}function gye(t){const e=t.name==="click";let r,n=null;try{n=e?E7(t.event):C7(t.event),r=UI(n,{maxStringLength:200})||"<unknown>"}catch{r="<unknown>"}return{target:n,message:r}}function vye(t){return t.type===ZI.Element}function yye(t,e){if(!t.isEnabled())return;t.updateUserActivity();const r=xye(e);r&&Zv(t,r)}function xye(t){const{metaKey:e,shiftKey:r,ctrlKey:n,altKey:s,key:a,target:o}=t;if(!o||bye(o)||!a)return null;const l=e||n||s,c=a.length===1;if(!l&&c)return null;const u=UI(o,{maxStringLength:200})||"<unknown>",d=T7(o,u);return ho({category:"ui.keyDown",message:u,data:{...d.data,metaKey:e,shiftKey:r,ctrlKey:n,altKey:s,key:a}})}function bye(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable}const wye={resource:Nye,paint:jye,navigation:Aye};function DN(t,e){return({metric:r})=>void e.replayPerformanceEntries.push(t(r))}function _ye(t){return t.map(Sye).filter(Boolean)}function Sye(t){const e=wye[t.entryType];return e?e(t):null}function jf(t){return((rme()||Dr.performance.timeOrigin)+t)/1e3}function jye(t){const{duration:e,entryType:r,name:n,startTime:s}=t,a=jf(s);return{type:r,name:n,start:a,end:a+e,data:void 0}}function Aye(t){const{entryType:e,name:r,decodedBodySize:n,duration:s,domComplete:a,encodedBodySize:o,domContentLoadedEventStart:l,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:f,redirectCount:m,startTime:g,transferSize:x,type:v}=t;return s===0?null:{type:`${e}.${v}`,start:jf(g),end:jf(a),name:r,data:{size:x,decodedBodySize:n,encodedBodySize:o,duration:s,domInteractive:u,domContentLoadedEventStart:l,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:f,domComplete:a,redirectCount:m}}}function Nye(t){const{entryType:e,initiatorType:r,name:n,responseEnd:s,startTime:a,decodedBodySize:o,encodedBodySize:l,responseStatus:c,transferSize:u}=t;return["fetch","xmlhttprequest"].includes(r)?null:{type:`${e}.${r}`,start:jf(a),end:jf(s),name:n,data:{size:u,statusCode:c,decodedBodySize:o,encodedBodySize:l}}}function Eye(t){const e=t.entries[t.entries.length-1],r=e?.element?[e.element]:void 0;return eM(t,"largest-contentful-paint",r)}function Cye(t){return t.sources!==void 0}function Tye(t){const e=[],r=[];for(const n of t.entries)if(Cye(n)){const s=[];for(const a of n.sources)if(a.node){r.push(a.node);const o=dl.mirror.getId(a.node);o&&s.push(o)}e.push({value:n.value,nodeIds:s.length?s:void 0})}return eM(t,"cumulative-layout-shift",r,e)}function Pye(t){const e=t.entries[t.entries.length-1],r=e?.target?[e.target]:void 0;return eM(t,"interaction-to-next-paint",r)}function eM(t,e,r,n){const s=t.value,a=t.rating,o=jf(s);return{type:"web-vital",name:e,start:o,end:o,data:{value:s,size:s,rating:a,nodeIds:r?r.map(l=>dl.mirror.getId(l)):void 0,attributions:n}}}function kye(t){function e(s){t.performanceEntries.includes(s)||t.performanceEntries.push(s)}function r({entries:s}){s.forEach(e)}const n=[];return["navigation","paint","resource"].forEach(s=>{n.push(sd(s,r))}),n.push(RI(DN(Eye,t)),OI(DN(Tye,t)),PG(DN(Pye,t))),()=>{n.forEach(s=>s())}}const wt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Oye='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Rye(){const t=new Blob([Oye]);return URL.createObjectURL(t)}const WB=["log","warn","error"],K0="[Replay] ";function LN(t,e="info"){wge({category:"console",data:{logger:"replay"},level:e,message:`${K0}${t}`},{level:e})}function Iye(){let t=!1,e=!1;const r={exception:()=>{},infoTick:()=>{},setConfig:n=>{t=!!n.captureExceptions,e=!!n.traceInternals}};return wt?(WB.forEach(n=>{r[n]=(...s)=>{ul[n](K0,...s),e&&LN(s.join(""),_ge(n))}}),r.exception=(n,...s)=>{s.length&&r.error&&r.error(...s),ul.error(K0,n),t?age(n):e&&LN(n,"error")},r.infoTick=(...n)=>{ul.log(K0,...n),e&&setTimeout(()=>LN(n[0]),0)}):WB.forEach(n=>{r[n]=()=>{}}),r}const _t=Iye();class tM extends Error{constructor(){super(`Event buffer exceeded maximum size of ${WI}.`)}}class P7{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const r=JSON.stringify(e).length;if(this._totalSize+=r,this._totalSize>WI)throw new tM;this.events.push(e)}finish(){return new Promise(e=>{const r=this.events;this.clear(),e(JSON.stringify(r))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(r=>r.timestamp).sort()[0];return e?JI(e):null}}class Mye{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((e,r)=>{this._worker.addEventListener("message",({data:n})=>{n.success?e():r()},{once:!0}),this._worker.addEventListener("error",n=>{r(n)},{once:!0})}),this._ensureReadyPromise)}destroy(){wt&&_t.log("Destroying compression worker"),this._worker.terminate()}postMessage(e,r){const n=this._getAndIncrementId();return new Promise((s,a)=>{const o=({data:l})=>{const c=l;if(c.method===e&&c.id===n){if(this._worker.removeEventListener("message",o),!c.success){wt&&_t.error("Error in compression worker: ",c.response),a(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:n,method:e,arg:r})})}_getAndIncrementId(){return this._id++}}class Dye{constructor(e){this._worker=new Mye(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const r=JI(e.timestamp);(!this._earliestTimestamp||r<this._earliestTimestamp)&&(this._earliestTimestamp=r);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>WI?Promise.reject(new tM):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{wt&&_t.exception(e,'Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Lye{constructor(e){this._fallback=new P7,this._compression=new Dye(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){wt&&_t.exception(e,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:r,waitForCheckout:n}=this._fallback,s=[];for(const a of e)s.push(this._compression.addEvent(a));this._compression.hasCheckout=r,this._compression.waitForCheckout=n,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(a){wt&&_t.exception(a,"Failed to add events when switching buffers.")}}}function $ye({useCompression:t,workerUrl:e}){if(t&&window.Worker){const r=Fye(e);if(r)return r}return wt&&_t.log("Using simple buffer"),new P7}function Fye(t){try{const e=t||Bye();if(!e)return;wt&&_t.log(`Using compression worker${t?` from ${t}`:""}`);const r=new Worker(e);return new Lye(r)}catch(e){wt&&_t.exception(e,"Failed to create compression worker")}}function Bye(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?Rye():""}function rM(){try{return"sessionStorage"in Dr&&!!Dr.sessionStorage}catch{return!1}}function Uye(t){zye(),t.session=void 0}function zye(){if(rM())try{Dr.sessionStorage.removeItem(VI)}catch{}}function k7(t){return t===void 0?!1:Math.random()<t}function nM(t){if(rM())try{Dr.sessionStorage.setItem(VI,JSON.stringify(t))}catch{}}function O7(t){const e=Date.now(),r=t.id||Sc(),n=t.started||e,s=t.lastActivity||e,a=t.segmentId||0,o=t.sampled,l=t.previousSessionId;return{id:r,started:n,lastActivity:s,segmentId:a,sampled:o,previousSessionId:l}}function qye(t,e){return k7(t)?"session":e?"buffer":!1}function GB({sessionSampleRate:t,allowBuffering:e,stickySession:r=!1},{previousSessionId:n}={}){const s=qye(t,e),a=O7({sampled:s,previousSessionId:n});return r&&nM(a),a}function Vye(){if(!rM())return null;try{const t=Dr.sessionStorage.getItem(VI);if(!t)return null;const e=JSON.parse(t);return wt&&_t.infoTick("Loading existing session"),O7(e)}catch{return null}}function gk(t,e,r=+new Date){return t===null||e===void 0||e<0?!0:e===0?!1:t+e<=r}function R7(t,{maxReplayDuration:e,sessionIdleExpire:r,targetTime:n=Date.now()}){return gk(t.started,e,n)||gk(t.lastActivity,r,n)}function I7(t,{sessionIdleExpire:e,maxReplayDuration:r}){return!(!R7(t,{sessionIdleExpire:e,maxReplayDuration:r})||t.sampled==="buffer"&&t.segmentId===0)}function $N({sessionIdleExpire:t,maxReplayDuration:e,previousSessionId:r},n){const s=n.stickySession&&Vye();return s?I7(s,{sessionIdleExpire:t,maxReplayDuration:e})?(wt&&_t.infoTick("Session in sessionStorage is expired, creating new one..."),GB(n,{previousSessionId:s.id})):s:(wt&&_t.infoTick("Creating new session"),GB(n,{previousSessionId:r}))}function Hye(t){return t.type===qt.Custom}function sM(t,e,r){return D7(t,e)?(M7(t,e,r),!0):!1}function Wye(t,e,r){return D7(t,e)?M7(t,e,r):Promise.resolve(null)}async function M7(t,e,r){const{eventBuffer:n}=t;if(!n||n.waitForCheckout&&!r)return null;const s=t.recordingMode==="buffer";try{r&&s&&n.clear(),r&&(n.hasCheckout=!0,n.waitForCheckout=!1);const a=t.getOptions(),o=Gye(e,a.beforeAddRecordingEvent);return o?await n.addEvent(o):void 0}catch(a){const o=a&&a instanceof tM,l=o?"addEventSizeExceeded":"addEvent";if(o&&s)return n.clear(),n.waitForCheckout=!0,null;t.handleException(a),await t.stop({reason:l});const c=Po();c&&c.recordDroppedEvent("internal_sdk_error","replay")}}function D7(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const r=JI(e.timestamp);return r+t.timeouts.sessionIdlePause<Date.now()?!1:r>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration?(wt&&_t.infoTick(`Skipping event with timestamp ${r} because it is after maxReplayDuration`),!1):!0}function Gye(t,e){try{if(typeof e=="function"&&Hye(t))return e(t)}catch(r){return wt&&_t.exception(r,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return t}function aM(t){return!t.type}function vk(t){return t.type==="transaction"}function Kye(t){return t.type==="replay_event"}function KB(t){return t.type==="feedback"}function Xye(t){return(e,r)=>{if(!t.isEnabled()||!aM(e)&&!vk(e))return;const n=r?.statusCode;if(!(!n||n<200||n>=300)){if(vk(e)){Yye(t,e);return}Qye(t,e)}}}function Yye(t,e){const r=t.getContext();e.contexts?.trace?.trace_id&&r.traceIds.size<100&&r.traceIds.add(e.contexts.trace.trace_id)}function Qye(t,e){const r=t.getContext();if(e.event_id&&r.errorIds.size<100&&r.errorIds.add(e.event_id),t.recordingMode!=="buffer"||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:n}=t.getOptions();typeof n=="function"&&!n(e)||Yv(async()=>{try{await t.sendBufferedReplayOrFlush()}catch(s){t.handleException(s)}})}function Jye(t){return e=>{!t.isEnabled()||!aM(e)||Zye(t,e)}}function Zye(t,e){const r=e.exception?.values?.[0]?.value;if(typeof r=="string"&&(r.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||r.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const n=ho({category:"replay.hydrate-error",data:{url:Hpe()}});Zv(t,n)}}function exe(t){const e=Po();e&&e.on("beforeAddBreadcrumb",r=>txe(t,r))}function txe(t,e){if(!t.isEnabled()||!L7(e))return;const r=rxe(e);r&&Zv(t,r)}function rxe(t){return!L7(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")?null:t.category==="console"?nxe(t):ho(t)}function nxe(t){const e=t.data?.arguments;if(!Array.isArray(e)||e.length===0)return ho(t);let r=!1;const n=e.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>Kx?(r=!0,`${s.slice(0,Kx)}…`):s;if(typeof s=="object")try{const a=Yo(s,7);return JSON.stringify(a).length>Kx?(r=!0,`${JSON.stringify(a,null,2).slice(0,Kx)}…`):a}catch{}return s});return ho({...t,data:{...t.data,arguments:n,...r?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function L7(t){return!!t.category}function sxe(t,e){return t.type||!t.exception?.values?.length?!1:!!e.originalException?.__rrweb__}function $7(){const t=Qv().getPropagationContext().dsc;t&&delete t.replay_id;const e=t7();if(e){const r=n7(e);delete r.replay_id}}function axe(t,e){t.triggerUserActivity(),t.addUpdate(()=>e.timestamp?(t.throttledAddEvent({type:qt.Custom,timestamp:e.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:e.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1):!0)}function ixe(t,e){return t.recordingMode!=="buffer"||e.message===HI||!e.exception||e.type?!1:k7(t.getOptions().errorSampleRate)}function oxe(t){return Object.assign((e,r)=>!t.isEnabled()||t.isPaused()?e:Kye(e)?(delete e.breadcrumbs,e):!aM(e)&&!vk(e)&&!KB(e)?e:t.checkAndHandleExpiredSession()?KB(e)?(t.flush(),e.contexts.feedback.replay_id=t.getSessionId(),axe(t,e),e):sxe(e,r)&&!t.getOptions()._experiments.captureExceptions?(wt&&_t.log("Ignoring error from rrweb internals",e),null):((ixe(t,e)||t.recordingMode==="session")&&(e.tags={...e.tags,replayId:t.getSessionId()}),e):($7(),e),{id:"Replay"})}function D_(t,e){return e.map(({type:r,start:n,end:s,name:a,data:o})=>{const l=t.throttledAddEvent({type:qt.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:r,description:a,startTimestamp:n,endTimestamp:s,data:o}}});return typeof l=="string"?Promise.resolve(null):l})}function lxe(t){const{from:e,to:r}=t,n=Date.now()/1e3;return{type:"navigation.push",start:n,end:n,name:r,data:{previous:e}}}function cxe(t){return e=>{if(!t.isEnabled())return;const r=lxe(e);r!==null&&(t.getContext().urls.push(r.name),t.triggerUserActivity(),t.addUpdate(()=>(D_(t,[r]),!1)))}}function uxe(t,e){return wt&&t.getOptions()._experiments.traceInternals?!1:gge(e,Po())}function F7(t,e){t.isEnabled()&&e!==null&&(uxe(t,e.name)||t.addUpdate(()=>(D_(t,[e]),!0)))}function L_(t){if(!t)return;const e=new TextEncoder;try{if(typeof t=="string")return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const r=FG(t);return e.encode(r).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function B7(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function Rb(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const r={...t._meta},n=r.warnings||[];return r.warnings=[...n,e],t._meta=r,t}function U7(t,e){if(!e)return null;const{startTimestamp:r,endTimestamp:n,url:s,method:a,statusCode:o,request:l,response:c}=e;return{type:t,start:r/1e3,end:n/1e3,name:s,data:{method:a,statusCode:o,request:l,response:c}}}function Og(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function jc(t,e,r){if(!e&&Object.keys(t).length===0)return;if(!e)return{headers:t};if(!r)return{headers:t,size:e};const n={headers:t,size:e},{body:s,warnings:a}=dxe(r);return n.body=s,a?.length&&(n._meta={warnings:a}),n}function yk(t,e){return Object.entries(t).reduce((r,[n,s])=>{const a=n.toLowerCase();return e.includes(a)&&t[n]&&(r[a]=s),r},{})}function dxe(t){if(!t||typeof t!="string")return{body:t};const e=t.length>CB,r=hxe(t);if(e){const n=t.slice(0,CB);return r?{body:n,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${n}…`,warnings:["TEXT_TRUNCATED"]}}if(r)try{return{body:JSON.parse(t)}}catch{}return{body:t}}function hxe(t){const e=t[0],r=t[t.length-1];return e==="["&&r==="]"||e==="{"&&r==="}"}function Ib(t,e){const r=fxe(t);return Gpe(r,e)}function fxe(t,e=Dr.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(Dr.location.origin))return t;const r=new URL(t,e);if(r.origin!==new URL(e).origin)return t;const n=r.href;return!t.endsWith("/")&&n.endsWith("/")?n.slice(0,-1):n}async function pxe(t,e,r){try{const n=await gxe(t,e,r),s=U7("resource.fetch",n);F7(r.replay,s)}catch(n){wt&&_t.exception(n,"Failed to capture fetch breadcrumb")}}function mxe(t,e){const{input:r,response:n}=e,s=r?UG(r):void 0,a=L_(s),o=n?B7(n.headers.get("content-length")):void 0;a!==void 0&&(t.data.request_body_size=a),o!==void 0&&(t.data.response_body_size=o)}async function gxe(t,e,r){const n=Date.now(),{startTimestamp:s=n,endTimestamp:a=n}=e,{url:o,method:l,status_code:c=0,request_body_size:u,response_body_size:d}=t.data,f=Ib(o,r.networkDetailAllowUrls)&&!Ib(o,r.networkDetailDenyUrls),m=f?vxe(r,e.input,u):Og(u),g=await yxe(f,r,e.response,d);return{startTimestamp:s,endTimestamp:a,url:o,method:l,statusCode:c,request:m,response:g}}function vxe({networkCaptureBodies:t,networkRequestHeaders:e},r,n){const s=r?wxe(r,e):{};if(!t)return jc(s,n,void 0);const a=UG(r),[o,l]=BG(a,_t),c=jc(s,n,o);return l?Rb(c,l):c}async function yxe(t,{networkCaptureBodies:e,networkResponseHeaders:r},n,s){if(!t&&s!==void 0)return Og(s);const a=n?z7(n.headers,r):{};if(!n||!e&&s!==void 0)return jc(a,s,void 0);const[o,l]=await bxe(n),c=xxe(o,{networkCaptureBodies:e,responseBodySize:s,captureDetails:t,headers:a});return l?Rb(c,l):c}function xxe(t,{networkCaptureBodies:e,responseBodySize:r,captureDetails:n,headers:s}){try{const a=t?.length&&r===void 0?L_(t):r;return n?e?jc(s,a,t):jc(s,a,void 0):Og(a)}catch(a){return wt&&_t.exception(a,"Failed to serialize response body"),jc(s,r,void 0)}}async function bxe(t){const e=_xe(t);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{return[await Sxe(e)]}catch(r){return r instanceof Error&&r.message.indexOf("Timeout")>-1?(wt&&_t.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(wt&&_t.exception(r,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function z7(t,e){const r={};return e.forEach(n=>{t.get(n)&&(r[n]=t.get(n))}),r}function wxe(t,e){return t.length===1&&typeof t[0]!="string"?XB(t[0],e):t.length===2?XB(t[1],e):{}}function XB(t,e){if(!t)return{};const r=t.headers;return r?r instanceof Headers?z7(r,e):Array.isArray(r)?{}:yk(r,e):{}}function _xe(t){try{return t.clone()}catch(e){wt&&_t.exception(e,"Failed to clone response body")}}function Sxe(t){return new Promise((e,r)=>{const n=Yv(()=>r(new Error("Timeout while trying to read response body")),500);jxe(t).then(s=>e(s),s=>r(s)).finally(()=>clearTimeout(n))})}async function jxe(t){return await t.text()}async function Axe(t,e,r){try{const n=Exe(t,e,r),s=U7("resource.xhr",n);F7(r.replay,s)}catch(n){wt&&_t.exception(n,"Failed to capture xhr breadcrumb")}}function Nxe(t,e){const{xhr:r,input:n}=e;if(!r)return;const s=L_(n),a=r.getResponseHeader("content-length")?B7(r.getResponseHeader("content-length")):kxe(r.response,r.responseType);s!==void 0&&(t.data.request_body_size=s),a!==void 0&&(t.data.response_body_size=a)}function Exe(t,e,r){const n=Date.now(),{startTimestamp:s=n,endTimestamp:a=n,input:o,xhr:l}=e,{url:c,method:u,status_code:d=0,request_body_size:f,response_body_size:m}=t.data;if(!c)return null;if(!l||!Ib(c,r.networkDetailAllowUrls)||Ib(c,r.networkDetailDenyUrls)){const E=Og(f),P=Og(m);return{startTimestamp:s,endTimestamp:a,url:c,method:u,statusCode:d,request:E,response:P}}const g=l[Pu],x=g?yk(g.request_headers,r.networkRequestHeaders):{},v=yk(Cxe(l),r.networkResponseHeaders),[y,w]=r.networkCaptureBodies?BG(o,_t):[void 0],[_,A]=r.networkCaptureBodies?Txe(l):[void 0],C=jc(x,f,y),S=jc(v,m,_);return{startTimestamp:s,endTimestamp:a,url:c,method:u,statusCode:d,request:w?Rb(C,w):C,response:A?Rb(S,A):S}}function Cxe(t){const e=t.getAllResponseHeaders();return e?e.split(`\r
`).reduce((r,n)=>{const[s,a]=n.split(": ");return a&&(r[s.toLowerCase()]=a),r},{}):{}}function Txe(t){const e=[];try{return[t.responseText]}catch(r){e.push(r)}try{return Pxe(t.response,t.responseType)}catch(r){e.push(r)}return wt&&_t.warn("Failed to get xhr response body",...e),[void 0]}function Pxe(t,e){try{if(typeof t=="string")return[t];if(t instanceof Document)return[t.body.outerHTML];if(e==="json"&&t&&typeof t=="object")return[JSON.stringify(t)];if(!t)return[void 0]}catch(r){return wt&&_t.exception(r,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return wt&&_t.log("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function kxe(t,e){try{const r=e==="json"&&t&&typeof t=="object"?JSON.stringify(t):t;return L_(r)}catch{return}}function Oxe(t){const e=Po();try{const{networkDetailAllowUrls:r,networkDetailDenyUrls:n,networkCaptureBodies:s,networkRequestHeaders:a,networkResponseHeaders:o}=t.getOptions(),l={replay:t,networkDetailAllowUrls:r,networkDetailDenyUrls:n,networkCaptureBodies:s,networkRequestHeaders:a,networkResponseHeaders:o};e&&e.on("beforeAddBreadcrumb",(c,u)=>Rxe(l,c,u))}catch{}}function Rxe(t,e,r){if(e.data)try{Ixe(e)&&Dxe(r)&&(Nxe(e,r),Axe(e,r,t)),Mxe(e)&&Lxe(r)&&(mxe(e,r),pxe(e,r,t))}catch(n){wt&&_t.exception(n,"Error when enriching network breadcrumb")}}function Ixe(t){return t.category==="xhr"}function Mxe(t){return t.category==="fetch"}function Dxe(t){return t?.xhr}function Lxe(t){return t?.response}function $xe(t){const e=Po();DG(pye(t)),N_(cxe(t)),exe(t),Oxe(t);const r=oxe(t);oge(r),e&&(e.on("beforeSendEvent",Jye(t)),e.on("afterSendEvent",Xye(t)),e.on("createDsc",n=>{const s=t.getSessionId();s&&t.isEnabled()&&t.recordingMode==="session"&&t.checkAndHandleExpiredSession()&&(n.replay_id=s)}),e.on("spanStart",n=>{t.lastActiveSpan=n}),e.on("spanEnd",n=>{t.lastActiveSpan=n}),e.on("beforeSendFeedback",async(n,s)=>{const a=t.getSessionId();s?.includeReplay&&t.isEnabled()&&a&&n.contexts?.feedback&&(n.contexts.feedback.source==="api"&&await t.sendBufferedReplayOrFlush(),n.contexts.feedback.replay_id=a)}),e.on("openFeedbackWidget",async()=>{await t.sendBufferedReplayOrFlush()}))}async function Fxe(t){try{return Promise.all(D_(t,[Bxe(Dr.performance.memory)]))}catch{return[]}}function Bxe(t){const{jsHeapSizeLimit:e,totalJSHeapSize:r,usedJSHeapSize:n}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:r,usedJSHeapSize:n}}}}function Uxe(t,e,r){return xge(t,e,{...r,setTimeoutImpl:Yv})}const Jx=da.navigator;function zxe(){return/iPhone|iPad|iPod/i.test(Jx?.userAgent??"")||/Macintosh/i.test(Jx?.userAgent??"")&&Jx?.maxTouchPoints&&Jx?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function qxe(t){let e=!1;return(r,n)=>{if(!t.checkAndHandleExpiredSession()){wt&&_t.warn("Received replay event after session expired.");return}const s=n||!e;e=!0,t.clickDetector&&cye(t.clickDetector,r),t.addUpdate(()=>{if(t.recordingMode==="buffer"&&s&&t.setInitialState(),!sM(t,r,s))return!0;if(!s)return!1;const a=t.session;if(Hxe(t,s),t.recordingMode==="buffer"&&a&&t.eventBuffer){const o=t.eventBuffer.getEarliestTimestamp();o&&(wt&&_t.log(`Updating session start time to earliest event in buffer to ${new Date(o)}`),a.started=o,t.getOptions().stickySession&&nM(a))}return a?.previousSessionId||t.recordingMode==="session"&&t.flush(),!0})}}function Vxe(t){const e=t.getOptions();return{type:qt.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:t.eventBuffer?t.eventBuffer.type==="worker":!1,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}function Hxe(t,e){!e||!t.session||t.session.segmentId!==0||sM(t,Vxe(t),!1)}function Wxe(t){if(!t)return null;try{return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}catch{return null}}function Gxe(t,e,r,n){return zme(Vme(t,qme(t),n,r),[[{type:"replay_event"},t],[{type:"replay_recording",length:typeof e=="string"?new TextEncoder().encode(e).length:e.length},e]])}function Kxe({recordingData:t,headers:e}){let r;const n=`${JSON.stringify(e)}
`;if(typeof t=="string")r=`${n}${t}`;else{const a=new TextEncoder().encode(n);r=new Uint8Array(a.length+t.length),r.set(a),r.set(t,a.length)}return r}async function Xxe({client:t,scope:e,replayId:r,event:n}){const s=typeof t._integrations=="object"&&t._integrations!==null&&!Array.isArray(t._integrations)?Object.keys(t._integrations):void 0,a={event_id:r,integrations:s};t.emit("preprocessEvent",n,a);const o=await Jme(t.getOptions(),n,a,e,t,O_());if(!o)return null;t.emit("postprocessEvent",o,a),o.platform=o.platform||"javascript";const l=t.getSdkMetadata(),{name:c,version:u,settings:d}=l?.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},o}async function Yxe({recordingData:t,replayId:e,segmentId:r,eventContext:n,timestamp:s,session:a}){const o=Kxe({recordingData:t,headers:{segment_id:r}}),{urls:l,errorIds:c,traceIds:u,initialTimestamp:d}=n,f=Po(),m=Qv(),g=f?.getTransport(),x=f?.getDsn();if(!f||!g||!x||!a.sampled)return SB({});const v={type:Nge,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:l,replay_id:e,segment_id:r,replay_type:a.sampled},y=await Xxe({scope:m,client:f,replayId:e,event:v});if(!y)return f.recordDroppedEvent("event_processor","replay"),wt&&_t.log("An event processor returned `null`, will not send event."),SB({});delete y.sdkProcessingMetadata;const w=Gxe(y,o,x,f.getOptions().tunnel);let _;try{_=await g.send(w)}catch(C){const S=new Error(HI);try{S.cause=C}catch{}throw S}if(typeof _.statusCode=="number"&&(_.statusCode<200||_.statusCode>=300))throw new q7(_.statusCode);const A=hge({},_);if(dge(A,"replay"))throw new iM(A);return _}class q7 extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class iM extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function V7(t,e={count:0,interval:Oge}){const{recordingData:r,onError:n}=t;if(r.length)try{return await Yxe(t),!0}catch(s){if(s instanceof q7||s instanceof iM)throw s;if(ige("Replays",{_retryCount:e.count}),n&&n(s),e.count>=Rge){const a=new Error(`${HI} - max retries exceeded`);try{a.cause=s}catch{}throw a}return e.interval*=++e.count,new Promise((a,o)=>{Yv(async()=>{try{await V7(t,e),a(!0)}catch(l){o(l)}},e.interval)})}}const H7="__THROTTLED",Qxe="__SKIPPED";function Jxe(t,e,r){const n=new Map,s=l=>{const c=l-r;n.forEach((u,d)=>{d<c&&n.delete(d)})},a=()=>[...n.values()].reduce((l,c)=>l+c,0);let o=!1;return(...l)=>{const c=Math.floor(Date.now()/1e3);if(s(c),a()>=e){const d=o;return o=!0,d?Qxe:H7}o=!1;const u=n.get(c)||0;return n.set(c,u+1),t(...l)}}class Zxe{constructor({options:e,recordingOptions:r}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:Ege,sessionIdleExpire:Cge},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=r,this._options=e,this._debouncedFlush=Uxe(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Jxe((o,l)=>Wye(this,o,l),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:s}=this.getOptions(),a=n?{threshold:Math.min(Ige,n),timeout:n,scrollTimeout:Mge,ignoreSelector:s?s.join(","):""}:void 0;if(a&&(this.clickDetector=new aye(this,a)),wt){const o=e._experiments;_t.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}this._handleVisibilityChange=()=>{Dr.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const o=ho({category:"ui.blur"});this._doChangeToBackgroundTasks(o)},this._handleWindowFocus=()=>{const o=ho({category:"ui.focus"});this._doChangeToForegroundTasks(o)},this._handleKeyboardEvent=o=>{yye(this,o)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(e){wt&&_t.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:r,sessionSampleRate:n}=this._options,s=r<=0&&n<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(e),!this.session){wt&&_t.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",wt&&_t.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){wt&&_t.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){wt&&_t.log("Buffering is in progress, call `flush()` to save the replay");return}wt&&_t.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=$N({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){wt&&_t.log("Buffering is in progress, call `flush()` to save the replay");return}wt&&_t.infoTick("Starting replay in buffer mode");const e=$N({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=dl({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:kge}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:qxe(this),...zxe(),onMutation:this._onMutationHandler.bind(this),...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:r}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{wt&&_t.log(`Stopping Replay${r?` triggered by ${r}`:""}`),$7(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,Uye(this)}catch(n){this.handleException(n)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),wt&&_t.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),wt&&_t.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const r=Date.now();wt&&_t.log("Converting buffer to session"),await this.flushImmediate();const n=this.stopRecording();!e||!n||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(r),this._updateSessionActivity(r),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const r=e();this.recordingMode==="buffer"||!this._isEnabled||r!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&gk(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const e=`${Dr.location.pathname}${Dr.location.hash}${Dr.location.search}`,r=`${Dr.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=r,this._context.initialTimestamp=Date.now(),this._context.urls.push(r)}throttledAddEvent(e,r){const n=this._throttledAddEvent(e,r);if(n===H7){const s=ho({category:"replay.throttled"});this.addUpdate(()=>!sM(this,{type:Jve,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return n}getCurrentRoute(){const e=this.lastActiveSpan||t7(),r=e&&qI(e),s=(r&&Eg(r).data||{})[JG];if(!(!r||!s||!["route","custom"].includes(s)))return Eg(r).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=$ye({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const r=this._options.errorSampleRate>0,n=$N({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:r});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return I7(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(e),!1):!0}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Dr.document.addEventListener("visibilitychange",this._handleVisibilityChange),Dr.addEventListener("blur",this._handleWindowBlur),Dr.addEventListener("focus",this._handleWindowFocus),Dr.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||($xe(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=kye(this)}_removeListeners(){try{Dr.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Dr.removeEventListener("blur",this._handleWindowBlur),Dr.removeEventListener("focus",this._handleWindowFocus),Dr.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}_doChangeToBackgroundTasks(e){!this.session||R7(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){wt&&_t.log("Document has become active, but session has expired");return}e&&this._createCustomBreadcrumb(e)}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:qt.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){let e=_ye(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const r=this._context.initialTimestamp/1e3;e=e.filter(n=>n.start>=r)}return Promise.all(D_(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:r}=this;if(!e||!r||this._requiresManualStart||e.segmentId)return;const n=r.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(!this.session||!this.eventBuffer||!e){wt&&_t.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await Fxe(this),!!this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const r=Date.now();if(r-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const a=await this.eventBuffer.finish();await V7({replayId:e,recordingData:a,segmentId:s,eventContext:n,session:this.session,timestamp:r,onError:o=>this.handleException(o)})}catch(r){this.handleException(r),this.stop({reason:"sendReplay"});const n=Po();if(n){const s=r instanceof iM?"ratelimit_backoff":"send_error";n.recordDroppedEvent(s,"replay")}}}async _flush({force:e=!1}={}){if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){wt&&_t.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const r=this.session.started,s=Date.now()-r;this._debouncedFlush.cancel();const a=s<this._options.minReplayDuration,o=s>this._options.maxReplayDuration+5e3;if(a||o){wt&&_t.log(`Session duration (${Math.floor(s/1e3)}s) is too ${a?"short":"long"}, not sending replay.`),a&&this._debouncedFlush();return}const l=this.eventBuffer;l&&this.session.segmentId===0&&!l.hasCheckout&&wt&&_t.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&nM(this.session)}_onMutationHandler(e){const{ignoreMutations:r}=this._options._experiments;if(r?.length&&e.some(l=>{const c=Wxe(l.target),u=r.join(",");return c?.matches(u)}))return!1;const n=e.length,s=this._options.mutationLimit,a=this._options.mutationBreadcrumbLimit,o=s&&n>s;if(n>a||o){const l=ho({category:"replay.mutations",data:{count:n,limit:o}});this._createCustomBreadcrumb(l)}return o?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function _m(t,e){return[...t,...e].join(",")}function e0e({mask:t,unmask:e,block:r,unblock:n,ignore:s}){const a=["base","iframe[srcdoc]:not([src])"],o=_m(t,[".sentry-mask","[data-sentry-mask]"]),l=_m(e,[]);return{maskTextSelector:o,unmaskTextSelector:l,blockSelector:_m(r,[".sentry-block","[data-sentry-block]",...a]),unblockSelector:_m(n,[]),ignoreSelector:_m(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function t0e({el:t,key:e,maskAttributes:r,maskAllText:n,privacyOptions:s,value:a}){return!n||s.unmaskTextSelector&&t.matches(s.unmaskTextSelector)?a:r.includes(e)||e==="value"&&t.tagName==="INPUT"&&["submit","button"].includes(t.getAttribute("type")||"")?a.replace(/[\S]/g,"*"):a}const YB='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',r0e=["content-length","content-type","accept"];let QB=!1;const n0e=(t=>new s0e(t));class s0e{constructor({flushMinDelay:e=Tge,flushMaxDelay:r=Pge,minReplayDuration:n=Dge,maxReplayDuration:s=TB,stickySession:a=!0,useCompression:o=!0,workerUrl:l,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:f=!0,mutationBreadcrumbLimit:m=750,mutationLimit:g=1e4,slowClickTimeout:x=7e3,slowClickIgnoreSelectors:v=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:w=[],networkCaptureBodies:_=!0,networkRequestHeaders:A=[],networkResponseHeaders:C=[],mask:S=[],maskAttributes:E=["title","placeholder","aria-label"],unmask:P=[],block:R=[],unblock:O=[],ignore:D=[],maskFn:I,beforeAddRecordingEvent:$,beforeErrorSampling:M,onError:U}={}){this.name="Replay";const H=e0e({mask:S,unmask:P,block:R,unblock:O,ignore:D});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:I,maskInputFn:I,maskAttributeFn:(z,q,V)=>t0e({maskAttributes:E,maskAllText:u,privacyOptions:H,key:z,value:q,el:V}),...H,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:z=>{try{z.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:e,flushMaxDelay:r,minReplayDuration:Math.min(n,Lge),maxReplayDuration:Math.min(s,TB),stickySession:a,useCompression:o,workerUrl:l,blockAllMedia:f,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:m,mutationLimit:g,slowClickTimeout:x,slowClickIgnoreSelectors:v,networkDetailAllowUrls:y,networkDetailDenyUrls:w,networkCaptureBodies:_,networkRequestHeaders:JB(A),networkResponseHeaders:JB(C),beforeAddRecordingEvent:$,beforeErrorSampling:M,onError:U,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${YB}`:YB),this._isInitialized&&EB())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return QB}set _isInitialized(e){QB=e}afterAllSetup(e){!EB()||this._replay||(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay?.isEnabled())return this._replay.getSessionId()}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const r=a0e(this._initialOptions,e);this._replay=new Zxe({options:r,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const r=e.getIntegrationByName("ReplayCanvas");if(!r)return;this._replay._canvas=r.getOptions()}catch{}}}function a0e(t,e){const r=e.getOptions(),n={sessionSampleRate:0,errorSampleRate:0,...t},s=yB(r.replaysSessionSampleRate),a=yB(r.replaysOnErrorSampleRate);return s==null&&a==null&&DI(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(n.sessionSampleRate=s),a!=null&&(n.errorSampleRate=a),n}function JB(t){return[...r0e,...t.map(e=>e.toLowerCase())]}function ro(t=0){return((sI()||performance.timeOrigin)+t)/1e3}function i0e(t){const e=[];if(t.nextHopProtocol!=null){const{name:r,version:n}=RG(t.nextHopProtocol);e.push(["network.protocol.version",n],["network.protocol.name",r])}return sI()?[...e,["http.request.redirect_start",ro(t.redirectStart)],["http.request.fetch_start",ro(t.fetchStart)],["http.request.domain_lookup_start",ro(t.domainLookupStart)],["http.request.domain_lookup_end",ro(t.domainLookupEnd)],["http.request.connect_start",ro(t.connectStart)],["http.request.secure_connection_start",ro(t.secureConnectionStart)],["http.request.connection_end",ro(t.connectEnd)],["http.request.request_start",ro(t.requestStart)],["http.request.response_start",ro(t.responseStart)],["http.request.response_end",ro(t.responseEnd)]]:e}const ZB=new WeakMap,FN=new Map,W7={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function o0e(t,e){const{traceFetch:r,traceXHR:n,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:a,enableHTTPTimings:o,tracePropagationTargets:l,onRequestSpanStart:c}={...W7,...e},u=typeof a=="function"?a:m=>!0,d=m=>c0e(m,l),f={};r&&(t.addEventProcessor(m=>(m.type==="transaction"&&m.spans&&m.spans.forEach(g=>{if(g.op==="http.client"){const x=FN.get(g.span_id);x&&(g.timestamp=x/1e3,FN.delete(g.span_id))}}),m)),s&&$ue(m=>{if(m.response){const g=ZB.get(m.response);g&&m.endTimestamp&&FN.set(g,m.endTimestamp)}}),X9(m=>{const g=Pue(m,u,d,f);if(m.response&&m.fetchData.__span&&ZB.set(m.response,m.fetchData.__span),g){const x=G7(m.fetchData.url),v=x?Zh(x).host:void 0;g.setAttributes({"http.url":x,"server.address":v}),o&&e3(g),c?.(g,{headers:m.headers})}})),n&&$G(m=>{const g=u0e(m,u,d,f);if(g){o&&e3(g);let x;try{x=new Headers(m.xhr.__sentry_xhr_v3__?.request_headers)}catch{}c?.(g,{headers:x})}})}function l0e(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function e3(t){const{url:e}=Gr(t).data;if(!e||typeof e!="string")return;const r=sd("resource",({entries:n})=>{n.forEach(s=>{l0e(s)&&s.name.endsWith(e)&&(i0e(s).forEach(o=>t.setAttribute(...o)),setTimeout(r))})})}function c0e(t,e){const r=Lv();if(r){let n,s;try{n=new URL(t,r),s=new URL(r).origin}catch{return!1}const a=n.origin===s;return e?Vu(n.toString(),e)||a&&Vu(n.pathname,e):a}else{const n=!!t.match(/^\/(?!\/)/);return e?Vu(t,e):n}}function u0e(t,e,r,n){const s=t.xhr,a=s?.[Pu];if(!s||s.__sentry_own_request__||!a)return;const{url:o,method:l}=a,c=kc()&&e(o);if(t.endTimestamp&&c){const v=s.__sentry_xhr_span_id__;if(!v)return;const y=n[v];y&&a.status_code!==void 0&&(d9(y,a.status_code),y.end(),delete n[v]);return}const u=G7(o),d=Zh(u||o),f=tue(o),m=!!fp(),g=c&&m?b_({name:`${l} ${f}`,attributes:{url:o,type:"xhr","http.method":l,"http.url":u,"server.address":d?.host,[Zu]:"auto.http.browser",[Sg]:"http.client",...d?.search&&{"http.query":d?.search},...d?.hash&&{"http.fragment":d?.hash}}}):new ed;s.__sentry_xhr_span_id__=g.spanContext().spanId,n[s.__sentry_xhr_span_id__]=g,r(o)&&d0e(s,kc()&&m?g:void 0);const x=Ar();return x&&x.emit("beforeOutgoingRequestSpan",g,t),g}function d0e(t,e){const{"sentry-trace":r,baggage:n}=H9({span:e});r&&h0e(t,r,n)}function h0e(t,e,r){const n=t.__sentry_xhr_v3__?.request_headers;if(!n?.["sentry-trace"])try{if(t.setRequestHeader("sentry-trace",e),r){const s=n?.baggage;(!s||!f0e(s))&&t.setRequestHeader("baggage",r)}}catch{}}function f0e(t){return t.split(",").some(e=>e.trim().startsWith("sentry-"))}function G7(t){try{return new URL(t,Zt.location.origin).href}catch{return}}function p0e(){Zt.document?Zt.document.addEventListener("visibilitychange",()=>{const t=fp();if(!t)return;const e=Ii(t);if(Zt.document.hidden&&e){const r="cancelled",{op:n,status:s}=Gr(e);ua&&ze.log(`[Tracing] Transaction: ${r} -> since tab moved to the background, op: ${n}`),s||e.setStatus({code:ss,message:r}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):ua&&ze.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const m0e=3600,K7="sentry_previous_trace",g0e="sentry.previous_trace";function v0e(t,{linkPreviousTrace:e,consistentTraceSampling:r}){const n=e==="session-storage";let s=n?b0e():void 0;t.on("spanStart",o=>{if(Ii(o)!==o)return;const l=fn().getPropagationContext();s=y0e(s,o,l),n&&x0e(s)});let a=!0;r&&t.on("beforeSampling",o=>{if(!s)return;const l=fn(),c=l.getPropagationContext();if(a&&c.parentSpanId){a=!1;return}l.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(xk(s.spanContext))},sampleRand:s.sampleRand}),o.parentSampled=xk(s.spanContext),o.parentSampleRate=s.sampleRate,o.spanAttributes={...o.spanAttributes,[c9]:s.sampleRate}})}function y0e(t,e,r){const n=Gr(e);function s(){try{return Number(r.dsc?.sample_rate)??Number(n.data?.[aI])}catch{return 0}}const a={spanContext:e.spanContext(),startTimestamp:n.start_timestamp,sampleRate:s(),sampleRand:r.sampleRand};if(!t)return a;const o=t.spanContext;return o.traceId===n.trace_id?t:(Date.now()/1e3-t.startTimestamp<=m0e&&(ua&&ze.log(`Adding previous_trace ${o} link to span ${{op:n.op,...e.spanContext()}}`),e.addLink({context:o,attributes:{[ele]:"previous_trace"}}),e.setAttribute(g0e,`${o.traceId}-${o.spanId}-${xk(o)?1:0}`)),a)}function x0e(t){try{Zt.sessionStorage.setItem(K7,JSON.stringify(t))}catch(e){ua&&ze.warn("Could not store previous trace in sessionStorage",e)}}function b0e(){try{const t=Zt.sessionStorage?.getItem(K7);return JSON.parse(t)}catch{return}}function xk(t){return t.traceFlags===1}const w0e="BrowserTracing",_0e={...z0,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,_experiments:{},...W7},S0e=((t={})=>{const e={name:void 0,source:void 0},r=Zt.document,{enableInp:n,enableElementTiming:s,enableLongTask:a,enableLongAnimationFrame:o,_experiments:{enableInteractions:l,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:f,finalTimeout:m,childSpanTimeout:g,markBackgroundSpan:x,traceFetch:v,traceXHR:y,trackFetchStreamPerformance:w,shouldCreateSpanForRequest:_,enableHTTPTimings:A,ignoreResourceSpans:C,ignorePerformanceApiSpans:S,instrumentPageLoad:E,instrumentNavigation:P,detectRedirects:R,linkPreviousTrace:O,consistentTraceSampling:D,onRequestSpanStart:I}={..._0e,...t};let $,M;function U(H,z,q=!0){const V=z.op==="pageload",W=d?d(z):z,B=W.attributes||{};if(z.name!==W.name&&(B[il]="custom",W.attributes=B),!q){const oe=Nd();b_({...W,startTime:oe}).end(oe);return}e.name=W.name,e.source=B[il];const F=P9(W,{idleTimeout:f,finalTimeout:m,childSpanTimeout:g,disableAutoFinish:V,beforeSpanEnd:oe=>{$?.(),sfe(oe,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:C,ignorePerformanceApiSpans:S}),r3(H,void 0);const xe=fn(),J=xe.getPropagationContext();xe.setPropagationContext({...J,traceId:F.spanContext().traceId,sampled:Ed(F),dsc:Oc(oe)})}});r3(H,F);function Y(){r&&["interactive","complete"].includes(r.readyState)&&H.emit("idleSpanEnableAutoFinish",F)}V&&r&&(r.addEventListener("readystatechange",()=>{Y()}),Y())}return{name:w0e,setup(H){if(Ale(),$=Qhe({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:H}),n&&Nfe(),s&&pfe(),o&&Cr.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Zhe():a&&Jhe(),l&&efe(),R&&r){const q=()=>{M=Pa()};addEventListener("click",q,{capture:!0}),addEventListener("keydown",q,{capture:!0,passive:!0})}function z(){const q=Rg(H);q&&!Gr(q).timestamp&&(ua&&ze.log(`[Tracing] Finishing current active span with op: ${Gr(q).op}`),q.setAttribute(db,"cancelled"),q.end())}H.on("startNavigationSpan",(q,V)=>{if(Ar()!==H)return;if(V?.isRedirect){ua&&ze.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),U(H,{op:"navigation.redirect",...q},!1);return}M=void 0,z(),Nl().setPropagationContext({traceId:Pc(),sampleRand:Math.random()});const W=fn();W.setPropagationContext({traceId:Pc(),sampleRand:Math.random()}),W.setSDKProcessingMetadata({normalizedRequest:void 0}),U(H,{op:"navigation",...q})}),H.on("startPageLoadSpan",(q,V={})=>{if(Ar()!==H)return;z();const W=V.sentryTrace||t3("sentry-trace"),B=V.baggage||t3("baggage"),F=vle(W,B),Y=fn();Y.setPropagationContext(F),Y.setSDKProcessingMetadata({normalizedRequest:dI()}),U(H,{op:"pageload",...q})})},afterAllSetup(H){let z=Lv();if(O!=="off"&&v0e(H,{linkPreviousTrace:O,consistentTraceSampling:D}),Zt.location){if(E){const q=sI();j0e(H,{name:Zt.location.pathname,startTime:q?q/1e3:void 0,attributes:{[il]:"url",[Zu]:"auto.pageload.browser"}})}P&&N_(({to:q,from:V})=>{if(V===void 0&&z?.indexOf(q)!==-1){z=void 0;return}z=void 0;const W=V9(q),B=Rg(H),F=B&&R&&E0e(B,M);A0e(H,{name:W?.pathname||Zt.location.pathname,attributes:{[il]:"url",[Zu]:"auto.navigation.browser"}},{url:q,isRedirect:F})})}x&&p0e(),l&&N0e(H,f,m,g,e),n&&Tfe(),o0e(H,{traceFetch:v,traceXHR:y,trackFetchStreamPerformance:w,tracePropagationTargets:H.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:_,enableHTTPTimings:A,onRequestSpanStart:I})}}});function j0e(t,e,r){t.emit("startPageLoadSpan",e,r),fn().setTransactionName(e.name);const n=Rg(t);return n&&t.emit("afterStartPageLoadSpan",n),n}function A0e(t,e,r){const{url:n,isRedirect:s}=r||{};t.emit("beforeStartNavigationSpan",e,{isRedirect:s}),t.emit("startNavigationSpan",e,{isRedirect:s});const a=fn();return a.setTransactionName(e.name),n&&!s&&a.setSDKProcessingMetadata({normalizedRequest:{...dI(),url:n}}),Rg(t)}function t3(t){return Zt.document?.querySelector(`meta[name=${t}]`)?.getAttribute("content")||void 0}function N0e(t,e,r,n,s){const a=Zt.document;let o;const l=()=>{const c="ui.action.click",u=Rg(t);if(u){const d=Gr(u).op;if(["navigation","pageload"].includes(d)){ua&&ze.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(db,"interactionInterrupted"),o.end(),o=void 0),!s.name){ua&&ze.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}o=P9({name:s.name,op:c,attributes:{[il]:s.source||"url"}},{idleTimeout:e,finalTimeout:r,childSpanTimeout:n})};a&&addEventListener("click",l,{capture:!0})}const X7="_sentry_idleSpan";function Rg(t){return t[X7]}function r3(t,e){Fi(t,X7,e)}const n3=1.5;function E0e(t,e){const r=Gr(t),n=Nd(),s=r.start_timestamp;return!(n-s>n3||e&&n-e<=n3)}const Y7=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Mb=globalThis,Db="10.8.0";function C0e(t,e,r=Mb){const n=r.__SENTRY__=r.__SENTRY__||{},s=n[Db]=n[Db]||{};return s[t]||(s[t]=e())}const T0e="Sentry Logger ",s3={};function P0e(t){if(!("console"in Mb))return t();const e=Mb.console,r={},n=Object.keys(s3);n.forEach(s=>{const a=s3[s];r[s]=e[s],e[s]=a});try{return t()}finally{n.forEach(s=>{e[s]=r[s]})}}function k0e(){lM().enabled=!0}function O0e(){lM().enabled=!1}function Q7(){return lM().enabled}function R0e(...t){oM("log",...t)}function I0e(...t){oM("warn",...t)}function M0e(...t){oM("error",...t)}function oM(t,...e){Y7&&Q7()&&P0e(()=>{Mb.console[t](`${T0e}[${t}]:`,...e)})}function lM(){return Y7?C0e("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const D0e={enable:k0e,disable:O0e,isEnabled:Q7,log:R0e,warn:I0e,error:M0e},L0e=Object.prototype.toString;function $0e(t){switch(L0e.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return F0e(t,Error)}}function F0e(t,e){try{return t instanceof e}catch{return!1}}function B0e(t,e,r=[e],n="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:r.map(a=>({name:`${n}:@sentry/${a}`,version:Db})),version:Db}),t._metadata=s}var N=m_();const G=gr(N),cM=GW({__proto__:null,default:G},[N]);function U0e(t){const e={...t};return B0e(e,"react"),Sce("react",{version:N.version}),Tpe(e)}function z0e(t){const e=t.match(/^([^.]+)/);return e!==null&&parseInt(e[0])>=17}function q0e(t,e){const r=new WeakSet;function n(s,a){if(!r.has(s)){if(s.cause)return r.add(s),n(s.cause,a);s.cause=a}}n(t,e)}function V0e(t,{componentStack:e},r){if(z0e(N.version)&&$0e(t)&&e){const n=new Error(t.message);n.name=`React ErrorBoundary ${t.name}`,n.stack=e,q0e(t,n)}return Bv(n=>(n.setContext("react",{componentStack:e}),k9(t,r)))}var BN={exports:{}},vr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a3;function H0e(){if(a3)return vr;a3=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,n=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,m=t?Symbol.for("react.suspense_list"):60120,g=t?Symbol.for("react.memo"):60115,x=t?Symbol.for("react.lazy"):60116,v=t?Symbol.for("react.block"):60121,y=t?Symbol.for("react.fundamental"):60117,w=t?Symbol.for("react.responder"):60118,_=t?Symbol.for("react.scope"):60119;function A(S){if(typeof S=="object"&&S!==null){var E=S.$$typeof;switch(E){case e:switch(S=S.type,S){case c:case u:case n:case a:case s:case f:return S;default:switch(S=S&&S.$$typeof,S){case l:case d:case x:case g:case o:return S;default:return E}}case r:return E}}}function C(S){return A(S)===u}return vr.AsyncMode=c,vr.ConcurrentMode=u,vr.ContextConsumer=l,vr.ContextProvider=o,vr.Element=e,vr.ForwardRef=d,vr.Fragment=n,vr.Lazy=x,vr.Memo=g,vr.Portal=r,vr.Profiler=a,vr.StrictMode=s,vr.Suspense=f,vr.isAsyncMode=function(S){return C(S)||A(S)===c},vr.isConcurrentMode=C,vr.isContextConsumer=function(S){return A(S)===l},vr.isContextProvider=function(S){return A(S)===o},vr.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===e},vr.isForwardRef=function(S){return A(S)===d},vr.isFragment=function(S){return A(S)===n},vr.isLazy=function(S){return A(S)===x},vr.isMemo=function(S){return A(S)===g},vr.isPortal=function(S){return A(S)===r},vr.isProfiler=function(S){return A(S)===a},vr.isStrictMode=function(S){return A(S)===s},vr.isSuspense=function(S){return A(S)===f},vr.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===u||S===a||S===s||S===f||S===m||typeof S=="object"&&S!==null&&(S.$$typeof===x||S.$$typeof===g||S.$$typeof===o||S.$$typeof===l||S.$$typeof===d||S.$$typeof===y||S.$$typeof===w||S.$$typeof===_||S.$$typeof===v)},vr.typeOf=A,vr}var i3;function W0e(){return i3||(i3=1,BN.exports=H0e()),BN.exports}var UN,o3;function G0e(){if(o3)return UN;o3=1;var t=W0e(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[t.ForwardRef]=n,a[t.Memo]=s;function o(x){return t.isMemo(x)?s:a[x.$$typeof]||e}var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,m=Object.prototype;function g(x,v,y){if(typeof v!="string"){if(m){var w=f(v);w&&w!==m&&g(x,w,y)}var _=c(v);u&&(_=_.concat(u(v)));for(var A=o(x),C=o(v),S=0;S<_.length;++S){var E=_[S];if(!r[E]&&!(y&&y[E])&&!(C&&C[E])&&!(A&&A[E])){var P=d(v,E);try{l(x,E,P)}catch{}}}}return x}return UN=g,UN}var J7=G0e();const Z7=gr(J7),K0e=GW({__proto__:null,default:Z7},[J7]),X0e=Z7||K0e,Y0e=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Q0e="unknown",zN={componentStack:null,error:null,eventId:null};let J0e=class extends N.Component{constructor(e){super(e),this.state=zN,this._openFallbackReportDialog=!0;const r=Ar();r&&e.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=r.on("afterSendEvent",n=>{!n.type&&this._lastEventId&&n.event_id===this._lastEventId&&cB({...e.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(e,r){const{componentStack:n}=r,{beforeCapture:s,onError:a,showDialog:o,dialogOptions:l}=this.props;Bv(c=>{s&&s(c,e,n);const u=this.props.handled!=null?this.props.handled:!!this.props.fallback,d=V0e(e,r,{mechanism:{handled:u}});a&&a(e,n,d),o&&(this._lastEventId=d,this._openFallbackReportDialog&&cB({...l,eventId:d})),this.setState({error:e,componentStack:n,eventId:d})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:r,eventId:n}=this.state,{onUnmount:s}=this.props;s&&(this.state===zN?s(null,null,null):s(e,r,n)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:e}=this.props,{error:r,componentStack:n,eventId:s}=this.state;e&&e(r,n,s),this.setState(zN)}render(){const{fallback:e,children:r}=this.props,n=this.state;if(n.componentStack===null)return typeof r=="function"?r():r;const s=typeof e=="function"?N.createElement(e,{error:n.error,componentStack:n.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:n.eventId}):e;return N.isValidElement(s)?s:(e&&Y0e&&D0e.warn("fallback did not produce a valid ReactElement"),null)}};function Z0e(t,e){const r=t.displayName||t.name||Q0e,n=N.memo(s=>N.createElement(J0e,{...e},N.createElement(t,{...s})));return n.displayName=`errorBoundary(${r})`,X0e(n,t),n}function ebe(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,s,a,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)r=s[0],r==="*"?(o.push(r),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=s.indexOf("?",1),a=s.indexOf(".",1),o.push(s.substring(1,~n?n:~a?a:s.length)),l+=~n&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~n?"?":"")+"\\"+s.substring(a))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var qN={exports:{}},VN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l3;function tbe(){if(l3)return VN;l3=1;var t=m_();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,a=t.useLayoutEffect,o=t.useDebugValue;function l(f,m){var g=m(),x=n({inst:{value:g,getSnapshot:m}}),v=x[0].inst,y=x[1];return a(function(){v.value=g,v.getSnapshot=m,c(v)&&y({inst:v})},[f,g,m]),s(function(){return c(v)&&y({inst:v}),f(function(){c(v)&&y({inst:v})})},[f]),o(g),g}function c(f){var m=f.getSnapshot;f=f.value;try{var g=m();return!r(f,g)}catch{return!0}}function u(f,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return VN.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,VN}var c3;function rbe(){return c3||(c3=1,qN.exports=tbe()),qN.exports}var eK=rbe();const nbe=cM.useInsertionEffect,sbe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",abe=sbe?N.useLayoutEffect:N.useEffect,ibe=nbe||abe,tK=t=>{const e=N.useRef([t,(...r)=>e[0](...r)]).current;return ibe(()=>{e[0]=t}),e[1]},obe="popstate",uM="pushState",dM="replaceState",lbe="hashchange",u3=[obe,uM,dM,lbe],cbe=t=>{for(const e of u3)addEventListener(e,t);return()=>{for(const e of u3)removeEventListener(e,t)}},rK=(t,e)=>eK.useSyncExternalStore(cbe,t,e),ube=()=>location.search,dbe=({ssrSearch:t=""}={})=>rK(ube,()=>t),d3=()=>location.pathname,hbe=({ssrPath:t}={})=>rK(d3,t?()=>t:d3),fbe=(t,{replace:e=!1,state:r=null}={})=>history[e?dM:uM](r,"",t),pbe=(t={})=>[hbe(t),fbe],h3=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[h3]>"u"){for(const t of[uM,dM]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,h3,{value:!0})}const mbe=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",nK=(t="")=>t==="/"?"":t,gbe=(t,e)=>t[0]==="~"?t.slice(1):nK(e)+t,vbe=(t="",e)=>mbe(f3(nK(t)),f3(e)),f3=t=>{try{return decodeURI(t)}catch{return t}},sK={hook:pbe,searchHook:dbe,parser:ebe,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},aK=N.createContext(sK),yp=()=>N.useContext(aK),iK={},oK=N.createContext(iK),lK=()=>N.useContext(oK),$_=t=>{const[e,r]=t.hook(t);return[vbe(t.base,e),tK((n,s)=>r(gbe(n,t.base),s))]},qi=()=>$_(yp()),hM=(t,e,r,n)=>{const{pattern:s,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",n),o=s.exec(r)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=a!==!1?Object.fromEntries(a.map((f,m)=>[f,c[m]])):o.groups;let d={...c};return u&&Object.assign(d,u),d})(),...n?[l]:[]]:[!1,null]},F_=t=>hM(yp().parser,t,qi()[0]),ybe=({children:t,...e})=>{const r=yp(),n=e.hook?sK:r;let s=n;const[a,o]=e.ssrPath?.split("?")??[];o&&(e.ssrSearch=o,e.ssrPath=a),e.hrefs=e.hrefs??e.hook?.hrefs;let l=N.useRef({}),c=l.current,u=c;for(let d in n){const f=d==="base"?n[d]+(e[d]||""):e[d]||n[d];c===u&&f!==u[d]&&(l.current=u={...u}),u[d]=f,(f!==n[d]||f!==s[d])&&(s=u)}return N.createElement(aK.Provider,{value:s,children:t})},p3=({children:t,component:e},r)=>e?N.createElement(e,{params:r}):typeof t=="function"?t(r):t,xbe=t=>{let e=N.useRef(iK);const r=e.current;return e.current=Object.keys(t).length!==Object.keys(r).length||Object.entries(t).some(([n,s])=>s!==r[n])?t:r},Nr=({path:t,nest:e,match:r,...n})=>{const s=yp(),[a]=$_(s),[o,l,c]=r??hM(s.parser,t,a,e),u=xbe({...lK(),...l});if(!o)return null;const d=c?N.createElement(ybe,{base:c},p3(n,u)):p3(n,u);return N.createElement(oK.Provider,{value:u,children:d})},on=N.forwardRef((t,e)=>{const r=yp(),[n,s]=$_(r),{to:a="",href:o=a,onClick:l,asChild:c,children:u,className:d,replace:f,state:m,...g}=t,x=tK(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l?.(y),y.defaultPrevented||(y.preventDefault(),s(o,t)))}),v=r.hrefs(o[0]==="~"?o.slice(1):r.base+o,r);return c&&N.isValidElement(u)?N.cloneElement(u,{onClick:x,href:v}):N.createElement("a",{...g,onClick:x,href:v,className:d?.call?d(n===o):d,children:u,ref:e})}),cK=t=>Array.isArray(t)?t.flatMap(e=>cK(e&&e.type===N.Fragment?e.props.children:e)):[t],bbe=({children:t,location:e})=>{const r=yp(),[n]=$_(r);for(const s of cK(t)){let a=0;if(N.isValidElement(s)&&(a=hM(r.parser,s.props.path,e||n,s.props.nest))[0])return N.cloneElement(s,{match:a})}return null};var xp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ad=typeof window>"u"||"Deno"in globalThis;function Ms(){}function wbe(t,e){return typeof t=="function"?t(e):t}function bk(t){return typeof t=="number"&&t>=0&&t!==1/0}function uK(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ac(t,e){return typeof t=="function"?t(e):t}function Ya(t,e){return typeof t=="function"?t(e):t}function m3(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:o,stale:l}=t;if(o){if(n){if(e.queryHash!==fM(o,e.options))return!1}else if(!Ig(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||a&&!a(e))}function g3(t,e){const{exact:r,status:n,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(id(e.options.mutationKey)!==id(a))return!1}else if(!Ig(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function fM(t,e){return(e?.queryKeyHashFn||id)(t)}function id(t){return JSON.stringify(t,(e,r)=>wk(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Ig(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Ig(t[r],e[r])):!1}function dK(t,e){if(t===e)return t;const r=v3(t)&&v3(e);if(r||wk(t)&&wk(e)){const n=r?t:Object.keys(t),s=n.length,a=r?e:Object.keys(e),o=a.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const f=r?d:a[d];(!r&&c.has(f)||r)&&t[f]===void 0&&e[f]===void 0?(l[f]=void 0,u++):(l[f]=dK(t[f],e[f]),l[f]===t[f]&&t[f]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function Lb(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function v3(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function wk(t){if(!y3(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!y3(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function y3(t){return Object.prototype.toString.call(t)==="[object Object]"}function _be(t){return new Promise(e=>{setTimeout(e,t)})}function _k(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?dK(t,e):e}function Sbe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function jbe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var pM=Symbol();function hK(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===pM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function fK(t,e){return typeof t=="function"?t(...e):!!t}var Abe=class extends xp{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!ad&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},mM=new Abe,Nbe=class extends xp{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!ad&&window.addEventListener){const e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},$b=new Nbe;function Sk(){let t,e;const r=new Promise((s,a)=>{t=s,e=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function Ebe(t){return Math.min(1e3*2**t,3e4)}function pK(t){return(t??"online")==="online"?$b.isOnline():!0}var mK=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function gK(t){let e=!1,r=0,n;const s=Sk(),a=()=>s.status!=="pending",o=v=>{a()||(m(new mK(v)),t.abort?.())},l=()=>{e=!0},c=()=>{e=!1},u=()=>mM.isFocused()&&(t.networkMode==="always"||$b.isOnline())&&t.canRun(),d=()=>pK(t.networkMode)&&t.canRun(),f=v=>{a()||(n?.(),s.resolve(v))},m=v=>{a()||(n?.(),s.reject(v))},g=()=>new Promise(v=>{n=y=>{(a()||u())&&v(y)},t.onPause?.()}).then(()=>{n=void 0,a()||t.onContinue?.()}),x=()=>{if(a())return;let v;const y=r===0?t.initialPromise:void 0;try{v=y??t.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(f).catch(w=>{if(a())return;const _=t.retry??(ad?0:3),A=t.retryDelay??Ebe,C=typeof A=="function"?A(r,w):A,S=_===!0||typeof _=="number"&&r<_||typeof _=="function"&&_(r,w);if(e||!S){m(w);return}r++,t.onFail?.(r,w),_be(C).then(()=>u()?void 0:g()).then(()=>{e?m(w):x()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n?.(),s),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?x():g().then(x),s)}}var Cbe=t=>setTimeout(t,0);function Tbe(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=Cbe;const a=l=>{e?t.push(l):s(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Xn=Tbe(),vK=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bk(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ad?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},Pbe=class extends vK{#e;#t;#r;#n;#a;#s;#i;constructor(t){super(),this.#i=!1,this.#s=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#r=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=kbe(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(t){this.options={...this.#s,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const r=_k(this.state.data,t,this.options);return this.#o({data:r,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),r}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#a?.promise;return this.#a?.cancel(t),e?e.then(Ms).catch(Ms):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Ya(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ac(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!uK(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#a&&(this.#i?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#i=!0,r.signal)})},s=()=>{const l=hK(this.options,e),u=(()=>{const d={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(d),d})();return this.#i=!1,this.options.persister?this.options.persister(l,u,this):l(u)},o=(()=>{const l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:s};return n(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#o({type:"fetch",meta:o.fetchOptions?.meta}),this.#a=gK({initialPromise:e?.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onFail:(l,c)=>{this.#o({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#a.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof mK){if(l.silent)return this.#a.promise;if(l.revert){if(this.setState({...this.#t,fetchStatus:"idle"}),this.state.data===void 0)throw l;return this.state.data}}throw this.#o({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#o(t){const e=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...yK(r.data,this.options),fetchMeta:t.meta??null};case"success":const n={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?n:void 0,n;case"error":const s=t.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=e(this.state),Xn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function yK(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pK(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function kbe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Obe=class extends xp{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,r){const n=e.queryKey,s=e.queryHash??fM(n,e);let a=this.get(s);return a||(a=new Pbe({client:t,queryKey:n,queryHash:s,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(r=>m3(e,r))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(r=>m3(t,r)):e}notify(t){Xn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Xn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Rbe=class extends vK{#e;#t;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||xK(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#n({type:"continue"})};this.#r=gK({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(s,a)=>{this.#n({type:"failed",failureCount:s,error:a})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const r=this.state.status==="pending",n=!this.#r.canStart();try{if(r)e();else{this.#n({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const a=await this.options.onMutate?.(t);a!==this.state.context&&this.#n({type:"pending",context:a,variables:t,isPaused:n})}const s=await this.#r.start();return await this.#t.config.onSuccess?.(s,t,this.state.context,this),await this.options.onSuccess?.(s,t,this.state.context),await this.#t.config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,t,this.state.context),this.#n({type:"success",data:s}),s}catch(s){try{throw await this.#t.config.onError?.(s,t,this.state.context,this),await this.options.onError?.(s,t,this.state.context),await this.#t.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,s,t,this.state.context),s}finally{this.#n({type:"error",error:s})}}finally{this.#t.runNext(this)}}#n(t){const e=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Xn.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function xK(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ibe=class extends xp{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,e,r){const n=new Rbe({mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(e),state:r});return this.add(n),n}add(t){this.#e.add(t);const e=Zx(t);if(typeof e=="string"){const r=this.#t.get(e);r?r.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Zx(t);if(typeof e=="string"){const r=this.#t.get(e);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Zx(t);if(typeof e=="string"){const n=this.#t.get(e)?.find(s=>s.state.status==="pending");return!n||n===t}else return!0}runNext(t){const e=Zx(t);return typeof e=="string"?this.#t.get(e)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Xn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(r=>g3(e,r))}findAll(t={}){return this.getAll().filter(e=>g3(t,e))}notify(t){Xn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Xn.batch(()=>Promise.all(t.map(e=>e.continue().catch(Ms))))}};function Zx(t){return t.options.scope?.id}function x3(t){return{onFetch:(e,r)=>{const n=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let d=!1;const f=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?d=!0:e.signal.addEventListener("abort",()=>{d=!0}),e.signal)})},m=hK(e.options,e.fetchOptions),g=async(x,v,y)=>{if(d)return Promise.reject();if(v==null&&x.pages.length)return Promise.resolve(x);const _=(()=>{const E={client:e.client,queryKey:e.queryKey,pageParam:v,direction:y?"backward":"forward",meta:e.options.meta};return f(E),E})(),A=await m(_),{maxPages:C}=e.options,S=y?jbe:Sbe;return{pages:S(x.pages,A,C),pageParams:S(x.pageParams,v,C)}};if(s&&a.length){const x=s==="backward",v=x?Mbe:b3,y={pages:a,pageParams:o},w=v(n,y);l=await g(y,w,x)}else{const x=t??a.length;do{const v=c===0?o[0]??n.initialPageParam:b3(n,l);if(c>0&&v==null)break;l=await g(l,v),c++}while(c<x)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r):e.fetchFn=u}}}function b3(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Mbe(t,{pages:e,pageParams:r}){return e.length>0?t.getPreviousPageParam?.(e[0],e,r[0],r):void 0}var Dbe=class{#e;#t;#r;#n;#a;#s;#i;#o;constructor(t={}){this.#e=t.queryCache||new Obe,this.#t=t.mutationCache||new Ibe,this.#r=t.defaultOptions||{},this.#n=new Map,this.#a=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#i=mM.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=$b.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#i?.(),this.#i=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=this.#e.build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Ac(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(n.queryHash)?.state.data,o=wbe(e,a);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return Xn.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Xn.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=this.#e;return Xn.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=Xn.batch(()=>this.#e.findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Ms).catch(Ms)}invalidateQueries(t,e={}){return Xn.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=Xn.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(Ms)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Ms)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=this.#e.build(this,e);return r.isStaleByTime(Ac(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ms).catch(Ms)}fetchInfiniteQuery(t){return t.behavior=x3(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ms).catch(Ms)}ensureInfiniteQueryData(t){return t.behavior=x3(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return $b.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#n.set(id(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#n.values()],r={};return e.forEach(n=>{Ig(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){this.#a.set(id(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#a.values()],r={};return e.forEach(n=>{Ig(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=fM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===pM&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Lbe=class extends xp{constructor(t,e){super(),this.options=e,this.#e=t,this.#o=null,this.#i=Sk(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#r=void 0;#n=void 0;#a;#s;#i;#o;#u;#c;#h;#l;#p;#m;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),w3(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jk(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jk(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#y(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ya(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),e._defaulted&&!Lb(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&_3(this.#t,r,this.options,e)&&this.#d(),this.updateResult(),n&&(this.#t!==r||Ya(this.options.enabled,this.#t)!==Ya(e.enabled,this.#t)||Ac(this.options.staleTime,this.#t)!==Ac(e.staleTime,this.#t))&&this.#g();const s=this.#x();n&&(this.#t!==r||Ya(this.options.enabled,this.#t)!==Ya(e.enabled,this.#t)||s!==this.#m)&&this.#v(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),r=this.createResult(e,t);return Fbe(this,r)&&(this.#n=r,this.#s=this.options,this.#a=this.#t.state),r}getCurrentResult(){return this.#n}trackResult(t,e){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),e?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),r=this.#e.getQueryCache().build(this.#e,e);return r.fetch().then(()=>this.createResult(r,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(t){this.#S();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Ms)),e}#g(){this.#w();const t=Ac(this.options.staleTime,this.#t);if(ad||this.#n.isStale||!bk(t))return;const r=uK(this.#n.dataUpdatedAt,t)+1;this.#l=setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#y(),this.#m=t,!(ad||Ya(this.options.enabled,this.#t)===!1||!bk(this.#m)||this.#m===0)&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||mM.isFocused())&&this.#d()},this.#m))}#b(){this.#g(),this.#v(this.#x())}#w(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#y(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(t,e){const r=this.#t,n=this.options,s=this.#n,a=this.#a,o=this.#s,c=t!==r?t.state:this.#r,{state:u}=t;let d={...u},f=!1,m;if(e._optimisticResults){const R=this.hasListeners(),O=!R&&w3(t,e),D=R&&_3(t,r,e,n);(O||D)&&(d={...d,...yK(u.data,t.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:g,errorUpdatedAt:x,status:v}=d;m=d.data;let y=!1;if(e.placeholderData!==void 0&&m===void 0&&v==="pending"){let R;s?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(R=s.data,y=!0):R=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,R!==void 0&&(v="success",m=_k(s?.data,R,e),f=!0)}if(e.select&&m!==void 0&&!y)if(s&&m===a?.data&&e.select===this.#u)m=this.#c;else try{this.#u=e.select,m=e.select(m),m=_k(s?.data,m,e),this.#c=m,this.#o=null}catch(R){this.#o=R}this.#o&&(g=this.#o,m=this.#c,x=Date.now(),v="error");const w=d.fetchStatus==="fetching",_=v==="pending",A=v==="error",C=_&&w,S=m!==void 0,P={status:v,fetchStatus:d.fetchStatus,isPending:_,isSuccess:v==="success",isError:A,isInitialLoading:C,isLoading:C,data:m,dataUpdatedAt:d.dataUpdatedAt,error:g,errorUpdatedAt:x,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!_,isLoadingError:A&&!S,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:A&&S,isStale:gM(t,e),refetch:this.refetch,promise:this.#i,isEnabled:Ya(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=I=>{P.status==="error"?I.reject(P.error):P.data!==void 0&&I.resolve(P.data)},O=()=>{const I=this.#i=P.promise=Sk();R(I)},D=this.#i;switch(D.status){case"pending":t.queryHash===r.queryHash&&R(D);break;case"fulfilled":(P.status==="error"||P.data!==D.value)&&O();break;case"rejected":(P.status!=="error"||P.error!==D.reason)&&O();break}}return P}updateResult(){const t=this.#n,e=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#s=this.options,this.#a.data!==void 0&&(this.#h=this.#t),Lb(e,t))return;this.#n=e;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,s=typeof n=="function"?n():n;if(s==="all"||!s&&!this.#f.size)return!0;const a=new Set(s??this.#f);return this.options.throwOnError&&a.add("error"),Object.keys(this.#n).some(o=>{const l=o;return this.#n[l]!==t[l]&&a.has(l)})};this.#E({listeners:r()})}#S(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#E(t){Xn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function $be(t,e){return Ya(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function w3(t,e){return $be(t,e)||t.state.data!==void 0&&jk(t,e,e.refetchOnMount)}function jk(t,e,r){if(Ya(e.enabled,t)!==!1&&Ac(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&gM(t,e)}return!1}function _3(t,e,r,n){return(t!==e||Ya(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&gM(t,r)}function gM(t,e){return Ya(e.enabled,t)!==!1&&t.isStaleByTime(Ac(e.staleTime,t))}function Fbe(t,e){return!Lb(t.getCurrentResult(),e)}var Bbe=class extends xp{#e;#t=void 0;#r;#n;constructor(e,r){super(),this.#e=e,this.setOptions(r),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const r=this.options;this.options=this.#e.defaultMutationOptions(e),Lb(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&id(r.mutationKey)!==id(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#s()}mutate(e,r){return this.#n=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){const e=this.#r?.state??xK();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){Xn.batch(()=>{if(this.#n&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context;e?.type==="success"?(this.#n.onSuccess?.(e.data,r,n),this.#n.onSettled?.(e.data,null,r,n)):e?.type==="error"&&(this.#n.onError?.(e.error,r,n),this.#n.onSettled?.(void 0,e.error,r,n))}this.listeners.forEach(r=>{r(this.#t)})})}},bK=N.createContext(void 0),ys=t=>{const e=N.useContext(bK);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ube=({client:t,children:e})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(bK.Provider,{value:t,children:e})),wK=N.createContext(!1),zbe=()=>N.useContext(wK);wK.Provider;function qbe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Vbe=N.createContext(qbe()),Hbe=()=>N.useContext(Vbe),Wbe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Gbe=t=>{N.useEffect(()=>{t.clearReset()},[t])},Kbe=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(s&&t.data===void 0||fK(r,[t.error,n])),Xbe=t=>{if(t.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>e(r(...n)):e(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Ybe=(t,e)=>t.isLoading&&t.isFetching&&!e,Qbe=(t,e)=>t?.suspense&&e.isPending,S3=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function Jbe(t,e,r){const n=zbe(),s=Hbe(),a=ys(),o=a.defaultQueryOptions(t);a.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=n?"isRestoring":"optimistic",Xbe(o),Wbe(o,s),Gbe(s);const l=!a.getQueryCache().get(o.queryHash),[c]=N.useState(()=>new e(a,o)),u=c.getOptimisticResult(o),d=!n&&t.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(f=>{const m=d?c.subscribe(Xn.batchCalls(f)):Ms;return c.updateResult(),m},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setOptions(o)},[o,c]),Qbe(o,u))throw S3(o,c,s);if(Kbe({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!ad&&Ybe(u,n)&&(l?S3(o,c,s):a.getQueryCache().get(o.queryHash)?.promise)?.catch(Ms).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?u:c.trackResult(u)}function nt(t,e){return Jbe(t,Lbe)}function Mt(t,e){const r=ys(),[n]=N.useState(()=>new Bbe(r,t));N.useEffect(()=>{n.setOptions(t)},[n,t]);const s=N.useSyncExternalStore(N.useCallback(o=>n.subscribe(Xn.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=N.useCallback((o,l)=>{n.mutate(o,l).catch(Ms)},[n]);if(s.error&&fK(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}const Zbe="modulepreload",ewe=function(t){return"/"+t},j3={},Di=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(u=>{if(u=ewe(u),u in j3)return;j3[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Zbe,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,x)=>{m.addEventListener("load",g),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},twe=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Di(async()=>{const{default:n}=await Promise.resolve().then(()=>bp);return{default:n}},[]).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class vM extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class rwe extends vM{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class A3 extends vM{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class N3 extends vM{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ak;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ak||(Ak={}));var nwe=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class swe{constructor(e,{headers:r={},customFetch:n,region:s=Ak.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=twe(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return nwe(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(v=>{throw new rwe(v)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new A3(f);if(!f.ok)throw new N3(f);let g=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield f.json():g==="application/octet-stream"?x=yield f.blob():g==="text/event-stream"?x=f:g==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof N3||s instanceof A3?s.context:void 0}}})}}var ns={},fh={},ph={},mh={},gh={},vh={},awe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Af=awe();const iwe=Af.fetch,_K=Af.fetch.bind(Af),SK=Af.Headers,owe=Af.Request,lwe=Af.Response,bp=Object.freeze(Object.defineProperty({__proto__:null,Headers:SK,Request:owe,Response:lwe,default:_K,fetch:iwe},Symbol.toStringTag,{value:"Module"})),cwe=loe(bp);var e0={},E3;function jK(){if(E3)return e0;E3=1,Object.defineProperty(e0,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return e0.default=t,e0}var C3;function AK(){if(C3)return vh;C3=1;var t=vh&&vh.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(vh,"__esModule",{value:!0});const e=t(cwe),r=t(jK());class n{constructor(a){var o,l;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(l=a.isMaybeSingle)!==null&&l!==void 0?l:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,f,m,g;let x=null,v=null,y=null,w=u.status,_=u.statusText;if(u.ok){if(this.method!=="HEAD"){const E=await u.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?v=E:v=JSON.parse(E))}const C=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),S=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");C&&S&&S.length>1&&(y=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(x={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,y=null,w=406,_="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const C=await u.text();try{x=JSON.parse(C),Array.isArray(x)&&u.status===404&&(v=[],x=null,w=200,_="OK")}catch{u.status===404&&C===""?(w=204,_="No Content"):x={message:C}}if(x&&this.isMaybeSingle&&(!((g=x?.details)===null||g===void 0)&&g.includes("0 rows"))&&(x=null,w=200,_="OK"),x&&this.shouldThrowOnError)throw new r.default(x)}return{error:x,data:v,count:y,status:w,statusText:_}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,f,m;return{error:{message:`${(d=u?.name)!==null&&d!==void 0?d:"FetchError"}: ${u?.message}`,details:`${(f=u?.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(m=u?.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(a,o)}returns(){return this}overrideTypes(){return this}}return vh.default=n,vh}var T3;function NK(){if(T3)return gh;T3=1;var t=gh&&gh.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gh,"__esModule",{value:!0});const e=t(AK());class r extends e.default{select(s){let a=!1;const o=(s??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,a,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const f=[s?"analyze":null,a?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return gh.default=r,gh}var P3;function yM(){if(P3)return mh;P3=1;var t=mh&&mh.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(mh,"__esModule",{value:!0});const e=t(NK());class r extends e.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const o=Array.from(new Set(a)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${c}fts${u}.${a}`),this}match(s){return Object.entries(s).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(s,a,o){return this.url.searchParams.append(s,`not.${a}.${o}`),this}or(s,{foreignTable:a,referencedTable:o=a}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,a,o){return this.url.searchParams.append(s,`${a}.${o}`),this}}return mh.default=r,mh}var k3;function EK(){if(k3)return ph;k3=1;var t=ph&&ph.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ph,"__esModule",{value:!0});const e=t(yM());class r{constructor(s,{headers:a={},schema:o,fetch:l}){this.url=s,this.headers=new Headers(a),this.schema=o,this.fetch=l}select(s,{head:a=!1,count:o}={}){const l=a?"HEAD":"GET";let c=!1;const u=(s??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:o=!0}={}){var l;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:a}={}){var o;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var a;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return ph.default=r,ph}var O3;function uwe(){if(O3)return fh;O3=1;var t=fh&&fh.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fh,"__esModule",{value:!0});const e=t(EK()),r=t(yM());class n{constructor(a,{headers:o={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:c=!1,count:u}={}){var d;let f;const m=new URL(`${this.url}/rpc/${a}`);let g;l||c?(f=l?"HEAD":"GET",Object.entries(o).filter(([v,y])=>y!==void 0).map(([v,y])=>[v,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([v,y])=>{m.searchParams.append(v,y)})):(f="POST",g=o);const x=new Headers(this.headers);return u&&x.set("Prefer",`count=${u}`),new r.default({method:f,url:m,headers:x,schema:this.schemaName,body:g,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return fh.default=n,fh}var R3;function dwe(){if(R3)return ns;R3=1;var t=ns&&ns.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ns,"__esModule",{value:!0}),ns.PostgrestError=ns.PostgrestBuilder=ns.PostgrestTransformBuilder=ns.PostgrestFilterBuilder=ns.PostgrestQueryBuilder=ns.PostgrestClient=void 0;const e=t(uwe());ns.PostgrestClient=e.default;const r=t(EK());ns.PostgrestQueryBuilder=r.default;const n=t(yM());ns.PostgrestFilterBuilder=n.default;const s=t(NK());ns.PostgrestTransformBuilder=s.default;const a=t(AK());ns.PostgrestBuilder=a.default;const o=t(jK());return ns.PostgrestError=o.default,ns.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:a.default,PostgrestError:o.default},ns}var hwe=dwe();const fwe=gr(hwe),{PostgrestClient:pwe,PostgrestQueryBuilder:e7e,PostgrestFilterBuilder:t7e,PostgrestTransformBuilder:r7e,PostgrestBuilder:n7e,PostgrestError:s7e}=fwe;class mwe{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const gwe="2.15.1",vwe=`realtime-js/${gwe}`,ywe="1.0.0",Nk=1e4,xwe=1e3,bwe=100;var ig;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ig||(ig={}));var Hn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Hn||(Hn={}));var Ei;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ei||(Ei={}));var Ek;(function(t){t.websocket="websocket"})(Ek||(Ek={}));var Nu;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Nu||(Nu={}));class wwe{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class CK{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ir;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ir||(Ir={}));const I3=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=_we(o,t,e,s),a),{})},_we=(t,e,r,n)=>{const s=e.find(l=>l.name===t),a=s?.type,o=r[t];return a&&!n.includes(a)?TK(a,o):Ck(o)},TK=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Nwe(e,r)}switch(t){case Ir.bool:return Swe(e);case Ir.float4:case Ir.float8:case Ir.int2:case Ir.int4:case Ir.int8:case Ir.numeric:case Ir.oid:return jwe(e);case Ir.json:case Ir.jsonb:return Awe(e);case Ir.timestamp:return Ewe(e);case Ir.abstime:case Ir.date:case Ir.daterange:case Ir.int4range:case Ir.int8range:case Ir.money:case Ir.reltime:case Ir.text:case Ir.time:case Ir.timestamptz:case Ir.timetz:case Ir.tsrange:case Ir.tstzrange:return Ck(e);default:return Ck(e)}},Ck=t=>t,Swe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},jwe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Awe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Nwe=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>TK(e,l))}return t},Ewe=t=>typeof t=="string"?t.replace(" ","T"):t,PK=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class HN{constructor(e,r,n={},s=Nk){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var M3;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(M3||(M3={}));class og{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=og.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=og.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=og.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=a[u];if(f){const m=d.map(y=>y.presence_ref),g=f.map(y=>y.presence_ref),x=d.filter(y=>g.indexOf(y.presence_ref)<0),v=f.filter(y=>m.indexOf(y.presence_ref)<0);x.length>0&&(l[u]=x),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const f=e[l].map(g=>g.presence_ref),m=d.filter(g=>f.indexOf(g.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var D3;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(D3||(D3={}));var lg;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(lg||(lg={}));var Qo;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Qo||(Qo={}));class xM{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Hn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new HN(this,Ei.join,this.params,this.timeout),this.rejoinTimer=new CK(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Hn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Hn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ei.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new og(this),this.broadcastEndpointURL=PK(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Hn.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[lg.PRESENCE]&&this.bindings[lg.PRESENCE].length>0,d={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>e?.(Qo.CHANNEL_ERROR,m)),this._onClose(()=>e?.(Qo.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){e?.(Qo.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,v=(g=x?.length)!==null&&g!==void 0?g:0,y=[];for(let w=0;w<v;w++){const _=x[w],{filter:{event:A,schema:C,table:S,filter:E}}=_,P=m&&m[w];if(P&&P.event===A&&P.schema===C&&P.table===S&&P.filter===E)y.push(Object.assign(Object.assign({},_),{id:P.id}));else{this.unsubscribe(),this.state=Hn.errored,e?.(Qo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Qo.SUBSCRIBED);return}}).receive("error",m=>{this.state=Hn.errored,e?.(Qo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e?.(Qo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Hn.joined&&e===lg.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Hn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ei.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new HN(this,Ei.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Hn.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new HN(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>bwe){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ei;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var x,v,y;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((y=(v=g.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(g=>g.callback(m,n)):(a=this.bindings[o])===null||a===void 0||a.filter(g=>{var x,v,y,w,_,A;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const C=g.id,S=(x=g.filter)===null||x===void 0?void 0:x.event;return C&&((v=r.ids)===null||v===void 0?void 0:v.includes(C))&&(S==="*"||S?.toLocaleLowerCase()===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const C=(_=(w=g?.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return C==="*"||C===((A=r?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:v,table:y,commit_timestamp:w,type:_,errors:A}=x;m=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:w,eventType:_,new:{},old:{},errors:A}),this._getPayloadRecords(x))}g.callback(m,n)})}_isClosed(){return this.state===Hn.closed}_isJoined(){return this.state===Hn.joined}_isJoining(){return this.state===Hn.joining}_isLeaving(){return this.state===Hn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&xM.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ei.close,{},e)}_onError(e){this._on(Ei.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Hn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=I3(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=I3(e.columns,e.old_record)),r}}const L3=()=>{},t0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Cwe=[1e3,2e3,5e3,1e4],Twe=1e4,Pwe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kwe{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Nk,this.transport=null,this.heartbeatIntervalMs=t0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=L3,this.ref=0,this.reconnectTimer=null,this.logger=L3,this.conn=null,this.sendBuffer=[],this.serializer=new wwe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Di(async()=>{const{default:l}=await Promise.resolve().then(()=>bp);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Ek.websocket}`,this.httpEndpoint=PK(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mwe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ywe}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ig.connecting:return Nu.Connecting;case ig.open:return Nu.Open;case ig.closing:return Nu.Closing;default:return Nu.Closed}}isConnected(){return this.connectionState()===Nu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new xM(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:s,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(xwe,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},t0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:o}=r,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ei.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Pwe],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:vwe};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ei.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new CK(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},t0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,a,o,l,c,u;if(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:Nk,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:t0.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:(d=>Cwe[d-1]||Twe),this.encode=(c=e?.encode)!==null&&c!==void 0?c:((d,f)=>f(JSON.stringify(d))),this.decode=(u=e?.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class bM extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Kn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Owe extends bM{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tk extends bM{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Rwe=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const kK=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Di(async()=>{const{default:n}=await Promise.resolve().then(()=>bp);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Iwe=()=>Rwe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Di(()=>Promise.resolve().then(()=>bp),void 0)).Response:Response}),Pk=t=>{if(Array.isArray(t))return t.map(r=>Pk(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Pk(n)}),e},Mwe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Td=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const WN=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Dwe=(t,e,r)=>Td(void 0,void 0,void 0,function*(){const n=yield Iwe();t instanceof n&&!r?.noResolveJson?t.json().then(s=>{const a=t.status||500,o=s?.statusCode||a+"";e(new Owe(WN(s),a,o))}).catch(s=>{e(new Tk(WN(s),s))}):e(new Tk(WN(t),t))}),Lwe=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"||!n?s:(Mwe(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,e?.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function ey(t,e,r,n,s,a){return Td(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,Lwe(e,n,s,a)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Dwe(c,l,n))})})}function Fb(t,e,r,n){return Td(this,void 0,void 0,function*(){return ey(t,"GET",e,r,n)})}function ao(t,e,r,n,s){return Td(this,void 0,void 0,function*(){return ey(t,"POST",e,n,s,r)})}function kk(t,e,r,n,s){return Td(this,void 0,void 0,function*(){return ey(t,"PUT",e,n,s,r)})}function $we(t,e,r,n){return Td(this,void 0,void 0,function*(){return ey(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function OK(t,e,r,n,s){return Td(this,void 0,void 0,function*(){return ey(t,"DELETE",e,n,s,r)})}var Ps=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Fwe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$3={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Bwe{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=kK(s)}uploadOrUpdate(e,r,n,s){return Ps(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},$3),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s?.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(e=="PUT"?kk:ao)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(Kn(a))return{data:null,error:a};throw a}})}upload(e,r,n){return Ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Ps(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:$3.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield kk(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(Kn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Ps(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r?.upsert&&(s["x-upsert"]="true");const a=yield ao(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new bM("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Kn(n))return{data:null,error:n};throw n}})}update(e,r,n){return Ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Ps(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Kn(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Ps(this,void 0,void 0,function*(){try{return{data:{path:(yield ao(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Kn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Ps(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield ao(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(Kn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Ps(this,void 0,void 0,function*(){try{const s=yield ao(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(Kn(s))return{data:null,error:s};throw s}})}download(e,r){return Ps(this,void 0,void 0,function*(){const s=typeof r?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(r?.transform||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Fb(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Kn(l))return{data:null,error:l};throw l}})}info(e){return Ps(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Fb(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Pk(n),error:null}}catch(n){if(Kn(n))return{data:null,error:n};throw n}})}exists(e){return Ps(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield $we(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Kn(n)&&n instanceof Tk){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],a=r?.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof r?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(r?.transform||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return Ps(this,void 0,void 0,function*(){try{return{data:yield OK(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Kn(r))return{data:null,error:r};throw r}})}list(e,r,n){return Ps(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Fwe),r),{prefix:e||""});return{data:yield ao(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Kn(s))return{data:null,error:s};throw s}})}listV2(e,r){return Ps(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ao(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Kn(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Uwe="2.11.0",zwe={"X-Client-Info":`storage-js/${Uwe}`};var yh=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class qwe{constructor(e,r={},n,s){const a=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},zwe),r),this.fetch=kK(n)}listBuckets(){return yh(this,void 0,void 0,function*(){try{return{data:yield Fb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Kn(e))return{data:null,error:e};throw e}})}getBucket(e){return yh(this,void 0,void 0,function*(){try{return{data:yield Fb(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Kn(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return yh(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Kn(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return yh(this,void 0,void 0,function*(){try{return{data:yield kk(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Kn(n))return{data:null,error:n};throw n}})}emptyBucket(e){return yh(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Kn(r))return{data:null,error:r};throw r}})}deleteBucket(e){return yh(this,void 0,void 0,function*(){try{return{data:yield OK(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Kn(r))return{data:null,error:r};throw r}})}}class Vwe extends qwe{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new Bwe(this.url,this.headers,e,this.fetch)}}const Hwe="2.56.0";let Um="";typeof Deno<"u"?Um="deno":typeof document<"u"?Um="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Um="react-native":Um="node";const Wwe={"X-Client-Info":`supabase-js-${Um}/${Hwe}`},Gwe={headers:Wwe},Kwe={schema:"public"},Xwe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ywe={};var Qwe=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Jwe=t=>{let e;return t?e=t:typeof fetch>"u"?e=_K:e=fetch,(...r)=>e(...r)},Zwe=()=>typeof Headers>"u"?SK:Headers,e_e=(t,e,r)=>{const n=Jwe(r),s=Zwe();return(a,o)=>Qwe(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o?.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var t_e=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function r_e(t){return t.endsWith("/")?t:t+"/"}function n_e(t,e){var r,n;const{db:s,auth:a,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:f}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>t_e(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const RK="2.71.1",Rh=30*1e3,Ok=3,GN=Ok*Rh,s_e="http://localhost:9999",a_e="supabase.auth.token",i_e={"X-Client-Info":`gotrue-js/${RK}`},Rk="X-Supabase-Api-Version",IK={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},o_e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,l_e=600*1e3;class wM extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Dt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class c_e extends wM{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function u_e(t){return Dt(t)&&t.name==="AuthApiError"}class MK extends wM{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Vc extends wM{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class ac extends Vc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function d_e(t){return Dt(t)&&t.name==="AuthSessionMissingError"}class r0 extends Vc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class n0 extends Vc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class s0 extends Vc{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function h_e(t){return Dt(t)&&t.name==="AuthImplicitGrantRedirectError"}class F3 extends Vc{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ik extends Vc{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function KN(t){return Dt(t)&&t.name==="AuthRetryableFetchError"}class B3 extends Vc{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Mk extends Vc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),U3=` 	
\r=`.split(""),f_e=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<U3.length;e+=1)t[U3[e].charCodeAt(0)]=-2;for(let e=0;e<Bb.length;e+=1)t[Bb[e].charCodeAt(0)]=e;return t})();function z3(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Bb[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Bb[n]),e.queuedBits-=6}}function DK(t,e,r){const n=f_e[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function q3(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{g_e(o,n,r)};for(let o=0;o<t.length;o+=1)DK(t.charCodeAt(o),s,a);return e.join("")}function p_e(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function m_e(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}p_e(n,e)}}function g_e(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function v_e(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)DK(t.charCodeAt(s),r,n);return new Uint8Array(e)}function y_e(t){const e=[];return m_e(t,r=>e.push(r)),new Uint8Array(e)}function x_e(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>z3(s,r,n)),z3(null,r,n),e.join("")}function b_e(t){return Math.round(Date.now()/1e3)+t}function w_e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const wi=()=>typeof window<"u"&&typeof document<"u",hu={tested:!1,writable:!1},LK=()=>{if(!wi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hu.tested)return hu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),hu.tested=!0,hu.writable=!0}catch{hu.tested=!0,hu.writable=!1}return hu.writable};function __e(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const $K=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Di(async()=>{const{default:n}=await Promise.resolve().then(()=>bp);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},S_e=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ih=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},fu=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Zl=async(t,e)=>{await t.removeItem(e)};class B_{constructor(){this.promise=new B_.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}B_.promiseConstructor=Promise;function XN(t){const e=t.split(".");if(e.length!==3)throw new Mk("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!o_e.test(e[n]))throw new Mk("JWT not in base64url format");return{header:JSON.parse(q3(e[0])),payload:JSON.parse(q3(e[1])),signature:v_e(e[2]),raw:{header:e[0],payload:e[1]}}}async function j_e(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function A_e(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function N_e(t){return("0"+t.toString(16)).substr(-2)}function E_e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,N_e).join("")}async function C_e(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function T_e(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await C_e(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xh(t,e,r=!1){const n=E_e();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ih(t,`${e}-code-verifier`,s);const a=await T_e(n);return[a,n===a?"plain":"s256"]}const P_e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function k_e(t){const e=t.headers.get(Rk);if(!e||!e.match(P_e))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function O_e(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function R_e(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const I_e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function bh(t){if(!I_e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function YN(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function V3(t){return JSON.parse(JSON.stringify(t))}var M_e=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const yu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),D_e=[502,503,504];async function H3(t){var e;if(!S_e(t))throw new Ik(yu(t),0);if(D_e.includes(t.status))throw new Ik(yu(t),t.status);let r;try{r=await t.json()}catch(a){throw new MK(yu(a),a)}let n;const s=k_e(t);if(s&&s.getTime()>=IK["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new B3(yu(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ac}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new B3(yu(r),t.status,r.weak_password.reasons);throw new c_e(yu(r),t.status||500,n)}const L_e=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Xt(t,e,r,n){var s;const a=Object.assign({},n?.headers);a[Rk]||(a[Rk]=IK["2024-01-01"].name),n?.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await $_e(t,e,r+l,{headers:a,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function $_e(t,e,r,n,s,a){const o=L_e(e,n,s,a);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Ik(yu(c),0)}if(l.ok||await H3(l),n?.noResolveJson)return l;try{return await l.json()}catch(c){await H3(c)}}function Go(t){var e;let r=null;z_e(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=b_e(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function W3(t){const e=Go(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function hc(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function F_e(t){return{data:t,error:null}}function B_e(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,o=M_e(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function U_e(t){return t}function z_e(t){return t.access_token&&t.refresh_token&&t.expires_in}const QN=["global","local","others"];var q_e=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class V_e{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=$K(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=QN[0]){if(QN.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${QN.join(", ")}`);try{return await Xt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:hc})}catch(n){if(Dt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=q_e(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await Xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:B_e,redirectTo:r?.redirectTo})}catch(r){if(Dt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Xt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:hc})}catch(r){if(Dt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:U_e});if(d.error)throw d.error;const f=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);u[`${y}Page`]=v}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Dt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){bh(e);try{return await Xt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:hc})}catch(r){if(Dt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){bh(e);try{return await Xt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:hc})}catch(n){if(Dt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){bh(e);try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:hc})}catch(n){if(Dt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){bh(e.userId);try{const{data:r,error:n}=await Xt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Dt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){bh(e.userId),bh(e.id);try{return{data:await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Dt(r))return{data:null,error:r};throw r}}}function G3(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function H_e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const wh={debug:!!(globalThis&&LK()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class FK extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class W_e extends FK{}async function G_e(t,e,r){wh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),wh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){wh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{wh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw wh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new W_e(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wh.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}H_e();const K_e={url:s_e,storageKey:a_e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:i_e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function K3(t,e,r){return await r()}const _h={};class Mg{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mg.nextInstanceID,Mg.nextInstanceID+=1,this.instanceID>0&&wi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},K_e),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new V_e({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=$K(s.fetch),this.lock=s.lock||K3,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:wi()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=G_e:this.lock=K3,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:LK()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=G3(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=G3(this.memoryStorage)),wi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=_h[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){_h[this.storageKey]=Object.assign(Object.assign({},_h[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=_h[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_h[this.storageKey]=Object.assign(Object.assign({},_h[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${RK}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=__e(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),wi()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),h_e(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Dt(r)?{error:r}:{error:new MK("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Go}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Dt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:d,password:f,options:m}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await xh(this.storage,this.storageKey)),a=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:d,password:f,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:x},xform:Go})}else if("phone"in e){const{phone:d,password:f,options:m}=e;a=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=m?.data)!==null&&n!==void 0?n:{},channel:(s=m?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Go})}else throw new n0("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Dt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:W3})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:W3})}else throw new n0("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new r0}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Dt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,a,o,l,c,u,d,f,m,g;let x,v;if("message"in e)x=e.message,v=e.signature;else{const{chain:y,wallet:w,statement:_,options:A}=e;let C;if(wi())if(typeof w=="object")C=w;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))C=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=w}const S=new URL((r=A?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){const E=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),_?{statement:_}:null));let P;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")P=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)P=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)x=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${S.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=A?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=A?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((o=A?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((l=A?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((c=A?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((u=A?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((f=(d=A?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...A.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const E=await C.signMessage(new TextEncoder().encode(x),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=E}}try{const{data:y,error:w}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:x_e(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Go});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new r0}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(Dt(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const r=await fu(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:o}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Go});if(await Zl(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new r0}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(Dt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=e,l=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Go}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new r0}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(Dt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,a,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await xh(this.storage,this.storageKey));const{error:f}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(a=c?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new n0("You must provide either an email or phone number.")}catch(l){if(Dt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Go});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Dt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await xh(this.storage,this.storageKey)),await Xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:F_e})}catch(a){if(Dt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new ac;const{error:s}=await Xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Dt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:o}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:o,error:l}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new n0("You must provide either an email or phone number and a type")}catch(r){if(Dt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await fu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<GN:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await fu(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=YN()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:hc}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ac}:await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:hc})})}catch(r){if(Dt(r))return d_e(r)&&(await this._removeSession(),await Zl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new ac;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await xh(this.storage,this.storageKey));const{data:u,error:d}=await Xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:hc});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Dt(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ac;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=XN(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Dt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new ac;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Dt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!wi())throw new s0("No browser detected.");if(e.error||e.error_description||e.error_code)throw new s0(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new F3("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new s0("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new F3("No code detected.");const{data:_,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!o||!u)throw new s0("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let m=d+f;c&&(m=parseInt(c));const g=m-d;g*1e3<=Rh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const x=m-f;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:v,error:y}=await this._getUser(a);if(y)throw y;const w={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:m,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(n){if(Dt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await fu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(u_e(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Zl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=w_e(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await xh(this.storage,this.storageKey,!0));try{return await Xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Dt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Dt(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:f,error:m}=a;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Xt(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return wi()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(Dt(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await Xt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Dt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await A_e(async s=>(s>0&&await j_e(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Go})),(s,a)=>{const o=200*Math.pow(2,s);return a&&KN(a)&&Date.now()+o-n<Rh})}catch(n){if(this._debug(r,"error",n),Dt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),wi()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await fu(this.storage,this.storageKey);if(s&&this.userStorage){let o=await fu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Ih(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o?.user)!==null&&e!==void 0?e:YN()}else if(s&&!s.user&&!s.user){const o=await fu(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await Zl(this.storage,this.storageKey+"-user"),await Ih(this.storage,this.storageKey,s)):s.user=YN()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<GN;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${GN}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),KN(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new ac;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new B_;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new ac;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Dt(a)){const o={session:null,error:a};return KN(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ih(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=V3(s);await Ih(this.storage,this.storageKey,a)}else{const s=V3(r);await Ih(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Zl(this.storage,this.storageKey),await Zl(this.storage,this.storageKey+"-code-verifier"),await Zl(this.storage,this.storageKey+"-user"),this.userStorage&&await Zl(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wi()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Rh);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Rh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Rh}ms, refresh threshold is ${Ok} ticks`),s<=Ok&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof FK)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wi()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await xh(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n?.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Xt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Dt(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Xt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Dt(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await Xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(Dt(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Dt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=e?.factors||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=XN(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+l_e>s)return n;const{data:a,error:o}=await Xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:g,error:x}=await this.getSession();if(x||!g.session)return{data:null,error:x};n=g.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=XN(n);r?.allowExpired||O_e(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:a,header:s,signature:o},error:null}}const d=R_e(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,y_e(`${l}.${c}`)))throw new Mk("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}}}Mg.nextInstanceID=0;const X_e=Mg;class Y_e extends X_e{constructor(e){super(e)}}var Q_e=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class J_e{constructor(e,r,n){var s,a,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=r_e(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Kwe,realtime:Ywe,auth:Object.assign(Object.assign({},Xwe),{storageKey:u}),global:Gwe},f=n_e(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=e_e(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new pwe(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Vwe(this.storageUrl.href,this.headers,this.fetch,n?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new swe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Q_e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Y_e({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new kwe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Z_e=(t,e,r)=>new J_e(t,e,r);function eSe(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}eSe()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let a0=null;const BK=()=>{if(a0)return a0;if(typeof window<"u")return a0=Z_e("https://dvglgxrvhmtsixaabxha.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR2Z2xneHJ2aG10c2l4YWFieGhhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2Njk0NzMsImV4cCI6MjA2ODI0NTQ3M30.5EswQJMAEh587sPR-fVvGuwZn7hRl7T5GUgDWrEdvnY"),a0;throw new Error("Client supabase should not be used on server side")},tf=()=>BK();function tSe(t){return t.replace(/_([a-z])/g,(e,r)=>r.toUpperCase())}function Ub(t){if(t==null)return t;if(Array.isArray(t))return t.map(e=>Ub(e));if(typeof t=="object"&&t!==null){const e={};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=Ub(t[r]);if(e[r]=n,r.includes("_")){const s=tSe(r);e[s]=n}}return e}return t}var zb=(t=>(t.VALIDATION_ERROR="VALIDATION_ERROR",t.TOKEN_EXPIRED="TOKEN_EXPIRED",t.NETWORK_ERROR="NETWORK_ERROR",t.TIMEOUT_ERROR="TIMEOUT_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.UNAUTHORIZED="UNAUTHORIZED",t.FORBIDDEN="FORBIDDEN",t.NOT_FOUND="NOT_FOUND",t.CONFLICT="CONFLICT",t))(zb||{});class nl extends Error{constructor(e,r,n,s,a,o){super(e),this.status=r,this.statusText=n,this.response=s,this.name="ApiError",this.code=a||this.inferCodeFromStatus(r),this.isRetryable=this.determineRetryability(),this.data=o}code;isRetryable;data;inferCodeFromStatus(e){switch(e){case 400:return"VALIDATION_ERROR";case 401:return"TOKEN_EXPIRED";case 403:return"FORBIDDEN";case 404:return"NOT_FOUND";case 409:return"CONFLICT";case 500:case 502:case 503:case 504:return"SERVER_ERROR";case 0:return this.message.includes("timeout")?"TIMEOUT_ERROR":"NETWORK_ERROR";default:return"UNKNOWN_ERROR"}}determineRetryability(){return[503,504,0].includes(this.status)||this.code==="TIMEOUT_ERROR"||this.code==="NETWORK_ERROR"}}class gc{static instance;cachedToken=null;tokenExpiry=null;refreshPromise=null;constructor(){}static getInstance(){return gc.instance||(gc.instance=new gc),gc.instance}async getValidToken(e=!1){if(!e&&this.cachedToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry*1e3)return this.cachedToken;if(this.refreshPromise)return await this.refreshPromise;this.refreshPromise=this.refreshToken();const r=await this.refreshPromise;return this.refreshPromise=null,r}async refreshToken(){try{const e=tf(),{data:{session:r}}=await e.auth.getSession();if(!r?.access_token)return this.clearCache(),null;const n=r.access_token.split(".");if(n.length===3)try{const s=JSON.parse(atob(n[1]));this.tokenExpiry=s.exp}catch{this.tokenExpiry=Math.floor(Date.now()/1e3)+1800}return this.cachedToken=r.access_token,console.log(`🔐 [TOKEN MANAGER] Fresh token obtained, length: ${this.cachedToken.length}`),this.cachedToken}catch(e){return console.error("🔐 [TOKEN MANAGER] Error refreshing token:",e),this.clearCache(),null}}clearCache(){this.cachedToken=null,this.tokenExpiry=null}invalidateToken(){this.clearCache()}}class Vh{static instance;baseUrl;constructor(){this.baseUrl=this.determineBaseUrl()}static getInstance(){return Vh.instance||(Vh.instance=new Vh),Vh.instance}determineBaseUrl(){if(typeof window<"u"){const e=window.location.hostname;if(e.includes("replit.")||e.includes(".repl.co"))return window.location.origin;if(e==="localhost"||e==="127.0.0.1")return`${window.location.protocol}//${e}:5000`}return"http://localhost:5000"}buildUrl(e){const r=e.startsWith("/")?e.slice(1):e;return`${this.baseUrl}/${r}`}getBaseUrl(){return this.baseUrl}}class X3{static async fetchWithTimeout(e,r,n=15e3,s=2){let a;for(let o=0;o<=s;o++)try{const l=new AbortController,c=setTimeout(()=>l.abort(),n),u={...r,signal:l.signal},d=await fetch(e,u);return clearTimeout(c),d}catch(l){if(a=l,l instanceof Error&&l.name==="AbortError"&&(a=new Error("Request timeout")),o===s||!(l instanceof TypeError||l instanceof Error&&l.name==="AbortError"))break;const u=Math.pow(2,o)*1e3;await new Promise(d=>setTimeout(d,u))}throw a}}async function Eu(t,e={}){const{method:r="GET",body:n,headers:s={},requireAuth:a=!0,timeout:o=15e3,retries:l=2,responseType:c="json"}=e,d=Vh.getInstance().buildUrl(t),f={...s};if(n instanceof FormData||(f["Content-Type"]="application/json"),a){const x=await gc.getInstance().getValidToken();x&&(f.Authorization=`Bearer ${x}`),console.log("[PASSO 3 - ENVIO]",{url:d,authorizationHeader:f.Authorization,hasToken:!!x,isFormData:n instanceof FormData})}const m={method:r,headers:f};n&&r!=="GET"&&(n instanceof FormData||typeof n=="string"?m.body=n:m.body=JSON.stringify(n));try{const g=await X3.fetchWithTimeout(d,m,o,l);let x;const v=g.headers.get("content-type");if(c==="blob")x=await g.blob();else if(c==="text")x=await g.text();else if(v&&v.includes("application/json")){const y=await g.json();console.log("[API Client] Raw JSON response from",d,":",y),d.includes("/api/")?(x=Ub(y),console.log("[API Client] After dual-key transformation:",x)):x=y}else g.status===204||g.status===205?x=null:x=await g.text()||null;if(!g.ok){if(g.status===401&&a){const w=gc.getInstance();w.invalidateToken();const _=await w.getValidToken();if(_){f.Authorization=`Bearer ${_}`;const A={...m,headers:f};try{const C=await X3.fetchWithTimeout(d,A,o,0);let S;const E=C.headers.get("content-type");if(c==="blob")S=await C.blob();else if(c==="text")S=await C.text();else if(E&&E.includes("application/json")){const P=await C.json();d.includes("/api/")?S=Ub(P):S=P}else C.status===204||C.status===205?S=null:S=await C.text()||null;if(C.ok)return c==="blob"?S:{data:S,status:C.status,statusText:C.statusText,headers:C.headers}}catch{}}}const y=typeof x=="object"&&x!==null&&"message"in x&&typeof x.message=="string"?x.message:typeof x=="string"?x:`HTTP Error ${g.status}`;throw new nl(y,g.status,g.statusText,g,void 0,x)}return c==="blob"&&g.ok?x:{data:x,status:g.status,statusText:g.statusText,headers:g.headers}}catch(g){throw g instanceof nl?g:g instanceof Error&&g.message.includes("timeout")?new nl("Request timeout: The server took too long to respond",0,"Timeout Error",void 0,"TIMEOUT_ERROR"):g instanceof TypeError||g instanceof Error&&g.message.includes("fetch")?new nl("Network error: Unable to connect to the server",0,"Network Error",void 0,"NETWORK_ERROR"):new nl(g instanceof Error?g.message:"Unknown error occurred",0,"Unknown Error",void 0,"UNKNOWN_ERROR")}}const xt={get:(t,e={})=>Eu(t,{...e,method:"GET"}),post:(t,e,r={})=>Eu(t,{...r,method:"POST",body:e}),put:(t,e,r={})=>Eu(t,{...r,method:"PUT",body:e}),patch:(t,e,r={})=>Eu(t,{...r,method:"PATCH",body:e}),delete:(t,e={})=>Eu(t,{...e,method:"DELETE"})},_i=Eu,Dg=Object.freeze(Object.defineProperty({__proto__:null,ApiError:nl,ApiErrorCode:zb,TokenManager:gc,api:xt,apiClient:Eu,fetchWithToken:_i},Symbol.toStringTag,{value:"Module"}));async function Je(t,e={method:"GET"}){const{method:r,body:n,responseType:s="json"}=e;if(s==="blob"){if(r==="GET")return await xt.get(t,{responseType:"blob"});throw new Error(`Blob responseType not supported for method: ${r}`)}if(r==="GET")return(await xt.get(t)).data;if(r==="POST")return(await xt.post(t,n)).data;if(r==="PUT")return(await xt.put(t,n)).data;if(r==="PATCH")return(await xt.patch(t,n)).data;if(r==="DELETE")return(await xt.delete(t)).data;throw new Error(`Unsupported method: ${r}`)}const UK=({on401:t})=>async({queryKey:e})=>{try{const r=e.join("/");return(await xt.get(r)).data}catch(r){throw r}},tr=new Dbe({defaultOptions:{queries:{queryFn:UK({on401:"throw"}),retry:(t,e)=>{if(e instanceof nl){if(e.status>=400&&e.status<500&&e.status!==401)return!1;if(e.status>=500)return t<3;if(e.code===zb.NETWORK_ERROR||e.code===zb.TIMEOUT_ERROR)return t<5}return t<3},retryDelay:t=>{const n=Math.min(1e3*Math.pow(2,t),3e4),s=Math.random()*.3*n;return n+s},staleTime:300*1e3,gcTime:600*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0,refetchInterval:!1,networkMode:"online"},mutations:{retry:(t,e)=>e instanceof nl&&e.isRetryable?t<2:!1,retryDelay:t=>Math.min(1e3*Math.pow(1.5,t),5e3),onError:(t,e,r)=>{console.error("🔴 [MUTATION FAILED]",{error:t instanceof nl?{message:t.message,status:t.status,code:t.code,isRetryable:t.isRetryable}:t,variables:e}),typeof window<"u"&&window.Sentry&&window.Sentry.captureException(t,{extra:{variables:e,context:r},tags:{type:"mutation-error"}})},networkMode:"online"}}}),rSe=Object.freeze(Object.defineProperty({__proto__:null,apiRequest:Je,getQueryFn:UK,queryClient:tr},Symbol.toStringTag,{value:"Module"})),nSe=1,sSe=1e6;let JN=0;function aSe(){return JN=(JN+1)%Number.MAX_SAFE_INTEGER,JN.toString()}const ZN=new Map,Y3=t=>{if(ZN.has(t))return;const e=setTimeout(()=>{ZN.delete(t),cg({type:"REMOVE_TOAST",toastId:t})},sSe);ZN.set(t,e)},iSe=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,nSe)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Y3(r):t.toasts.forEach(n=>{Y3(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},X0=[];let Y0={toasts:[]};function cg(t){Y0=iSe(Y0,t),X0.forEach(e=>{e(Y0)})}function Ls({...t}){const e=aSe(),r=s=>cg({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>cg({type:"DISMISS_TOAST",toastId:e});return cg({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function Fr(){const[t,e]=N.useState(Y0);return N.useEffect(()=>(X0.push(e),()=>{const r=X0.indexOf(e);r>-1&&X0.splice(r,1)}),[t]),{...t,toast:Ls,dismiss:r=>cg({type:"DISMISS_TOAST",toastId:r})}}var wp=KW();const oSe=gr(wp);function Le(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t?.(s),r===!1||!s.defaultPrevented)return e?.(s)}}function Q3(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function U_(...t){return e=>{let r=!1;const n=t.map(s=>{const a=Q3(s,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():Q3(t[s],null)}}}}function Et(...t){return N.useCallback(U_(...t),t)}function lSe(t,e){const r=N.createContext(e),n=a=>{const{children:o,...l}=a,c=N.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:o})};n.displayName=t+"Provider";function s(a){const o=N.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[n,s]}function cs(t,e=[]){let r=[];function n(a,o){const l=N.createContext(o),c=r.length;r=[...r,o];const u=f=>{const{scope:m,children:g,...x}=f,v=m?.[t]?.[c]||l,y=N.useMemo(()=>x,Object.values(x));return i.jsx(v.Provider,{value:y,children:g})};u.displayName=a+"Provider";function d(f,m){const g=m?.[t]?.[c]||l,x=N.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=r.map(o=>N.createContext(o));return function(l){const c=l?.[t]||a;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,cSe(s,...e)]}function cSe(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function od(t){const e=uSe(t),r=N.forwardRef((n,s)=>{const{children:a,...o}=n,l=N.Children.toArray(a),c=l.find(dSe);if(c){const u=c.props.children,d=l.map(f=>f===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:f);return i.jsx(e,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,d):null})}return i.jsx(e,{...o,ref:s,children:a})});return r.displayName=`${t}.Slot`,r}var zK=od("Slot");function uSe(t){const e=N.forwardRef((r,n)=>{const{children:s,...a}=r;if(N.isValidElement(s)){const o=fSe(s),l=hSe(a,s.props);return s.type!==N.Fragment&&(l.ref=n?U_(n,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var qK=Symbol("radix.slottable");function VK(t){const e=({children:r})=>i.jsx(i.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=qK,e}function dSe(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===qK}function hSe(t,e){const r={...e};for(const n in e){const s=t[n],a=e[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...t,...r}}function fSe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function ty(t){const e=t+"CollectionProvider",[r,n]=cs(e),[s,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:y,children:w}=v,_=G.useRef(null),A=G.useRef(new Map).current;return i.jsx(s,{scope:y,itemMap:A,collectionRef:_,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=od(l),u=G.forwardRef((v,y)=>{const{scope:w,children:_}=v,A=a(l,w),C=Et(y,A.collectionRef);return i.jsx(c,{ref:C,children:_})});u.displayName=l;const d=t+"CollectionItemSlot",f="data-radix-collection-item",m=od(d),g=G.forwardRef((v,y)=>{const{scope:w,children:_,...A}=v,C=G.useRef(null),S=Et(y,C),E=a(d,w);return G.useEffect(()=>(E.itemMap.set(C,{ref:C,...A}),()=>void E.itemMap.delete(C))),i.jsx(m,{[f]:"",ref:S,children:_})});g.displayName=d;function x(v){const y=a(t+"CollectionConsumer",v);return G.useCallback(()=>{const _=y.collectionRef.current;if(!_)return[];const A=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((E,P)=>A.indexOf(E.ref.current)-A.indexOf(P.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},x,n]}var pSe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],He=pSe.reduce((t,e)=>{const r=od(`Primitive.${e}`),n=N.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function _M(t,e){t&&wp.flushSync(()=>t.dispatchEvent(e))}function cn(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...r)=>e.current?.(...r),[])}function mSe(t,e=globalThis?.document){const r=cn(t);N.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var gSe="DismissableLayer",Dk="dismissableLayer.update",vSe="dismissableLayer.pointerDownOutside",ySe="dismissableLayer.focusOutside",J3,HK=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_p=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=N.useContext(HK),[d,f]=N.useState(null),m=d?.ownerDocument??globalThis?.document,[,g]=N.useState({}),x=Et(e,P=>f(P)),v=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(y),_=d?v.indexOf(d):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,C=_>=w,S=bSe(P=>{const R=P.target,O=[...u.branches].some(D=>D.contains(R));!C||O||(s?.(P),o?.(P),P.defaultPrevented||l?.())},m),E=wSe(P=>{const R=P.target;[...u.branches].some(D=>D.contains(R))||(a?.(P),o?.(P),P.defaultPrevented||l?.())},m);return mSe(P=>{_===u.layers.size-1&&(n?.(P),!P.defaultPrevented&&l&&(P.preventDefault(),l()))},m),N.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(J3=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Z3(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=J3)}},[d,m,r,u]),N.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Z3())},[d,u]),N.useEffect(()=>{const P=()=>g({});return document.addEventListener(Dk,P),()=>document.removeEventListener(Dk,P)},[]),i.jsx(He.div,{...c,ref:x,style:{pointerEvents:A?C?"auto":"none":void 0,...t.style},onFocusCapture:Le(t.onFocusCapture,E.onFocusCapture),onBlurCapture:Le(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Le(t.onPointerDownCapture,S.onPointerDownCapture)})});_p.displayName=gSe;var xSe="DismissableLayerBranch",WK=N.forwardRef((t,e)=>{const r=N.useContext(HK),n=N.useRef(null),s=Et(e,n);return N.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),i.jsx(He.div,{...t,ref:s})});WK.displayName=xSe;function bSe(t,e=globalThis?.document){const r=cn(t),n=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){GK(vSe,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function wSe(t,e=globalThis?.document){const r=cn(t),n=N.useRef(!1);return N.useEffect(()=>{const s=a=>{a.target&&!n.current&&GK(ySe,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Z3(){const t=new CustomEvent(Dk);document.dispatchEvent(t)}function GK(t,e,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?_M(s,a):s.dispatchEvent(a)}var _Se=_p,SSe=WK,gn=globalThis?.document?N.useLayoutEffect:()=>{},jSe="Portal",ry=N.forwardRef((t,e)=>{const{container:r,...n}=t,[s,a]=N.useState(!1);gn(()=>a(!0),[]);const o=r||s&&globalThis?.document?.body;return o?oSe.createPortal(i.jsx(He.div,{...n,ref:e}),o):null});ry.displayName=jSe;function ASe(t,e){return N.useReducer((r,n)=>e[r][n]??r,t)}var xs=t=>{const{present:e,children:r}=t,n=NSe(e),s=typeof r=="function"?r({present:n.isPresent}):N.Children.only(r),a=Et(n.ref,ESe(s));return typeof r=="function"||n.isPresent?N.cloneElement(s,{ref:a}):null};xs.displayName="Presence";function NSe(t){const[e,r]=N.useState(),n=N.useRef(null),s=N.useRef(t),a=N.useRef("none"),o=t?"mounted":"unmounted",[l,c]=ASe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=i0(n.current);a.current=l==="mounted"?u:"none"},[l]),gn(()=>{const u=n.current,d=s.current;if(d!==t){const m=a.current,g=i0(u);t?c("MOUNT"):g==="none"||u?.display==="none"?c("UNMOUNT"):c(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),gn(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=g=>{const v=i0(n.current).includes(CSS.escape(g.animationName));if(g.target===e&&v&&(c("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},m=g=>{g.target===e&&(a.current=i0(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function i0(t){return t?.animationName||"none"}function ESe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var CSe=cM[" useInsertionEffect ".trim().toString()]||gn;function Ma({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,a,o]=TSe({defaultProp:e,onChange:r}),l=t!==void 0,c=l?t:s;{const d=N.useRef(t!==void 0);N.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=N.useCallback(d=>{if(l){const f=PSe(d)?d(t):d;f!==t&&o.current?.(f)}else a(d)},[l,t,a,o]);return[c,u]}function TSe({defaultProp:t,onChange:e}){const[r,n]=N.useState(t),s=N.useRef(r),a=N.useRef(e);return CSe(()=>{a.current=e},[e]),N.useEffect(()=>{s.current!==r&&(a.current?.(r),s.current=r)},[r,s]),[r,n,a]}function PSe(t){return typeof t=="function"}var KK=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),kSe="VisuallyHidden",z_=N.forwardRef((t,e)=>i.jsx(He.span,{...t,ref:e,style:{...KK,...t.style}}));z_.displayName=kSe;var OSe=z_,SM="ToastProvider",[jM,RSe,ISe]=ty("Toast"),[XK,a7e]=cs("Toast",[ISe]),[MSe,q_]=XK(SM),YK=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=t,[l,c]=N.useState(null),[u,d]=N.useState(0),f=N.useRef(!1),m=N.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${SM}\`. Expected non-empty \`string\`.`),i.jsx(jM.Provider,{scope:e,children:i.jsx(MSe,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:N.useCallback(()=>d(g=>g+1),[]),onToastRemove:N.useCallback(()=>d(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};YK.displayName=SM;var QK="ToastViewport",DSe=["F8"],Lk="toast.viewportPause",$k="toast.viewportResume",JK=N.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=DSe,label:s="Notifications ({hotkey})",...a}=t,o=q_(QK,r),l=RSe(r),c=N.useRef(null),u=N.useRef(null),d=N.useRef(null),f=N.useRef(null),m=Et(e,f,o.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;N.useEffect(()=>{const y=w=>{n.length!==0&&n.every(A=>w[A]||w.code===A)&&f.current?.focus()};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),N.useEffect(()=>{const y=c.current,w=f.current;if(x&&y&&w){const _=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(Lk);w.dispatchEvent(E),o.isClosePausedRef.current=!0}},A=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent($k);w.dispatchEvent(E),o.isClosePausedRef.current=!1}},C=E=>{!y.contains(E.relatedTarget)&&A()},S=()=>{y.contains(document.activeElement)||A()};return y.addEventListener("focusin",_),y.addEventListener("focusout",C),y.addEventListener("pointermove",_),y.addEventListener("pointerleave",S),window.addEventListener("blur",_),window.addEventListener("focus",A),()=>{y.removeEventListener("focusin",_),y.removeEventListener("focusout",C),y.removeEventListener("pointermove",_),y.removeEventListener("pointerleave",S),window.removeEventListener("blur",_),window.removeEventListener("focus",A)}}},[x,o.isClosePausedRef]);const v=N.useCallback(({tabbingDirection:y})=>{const _=l().map(A=>{const C=A.ref.current,S=[C,...XSe(C)];return y==="forwards"?S:S.reverse()});return(y==="forwards"?_.reverse():_).flat()},[l]);return N.useEffect(()=>{const y=f.current;if(y){const w=_=>{const A=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!A){const S=document.activeElement,E=_.shiftKey;if(_.target===y&&E){u.current?.focus();return}const O=v({tabbingDirection:E?"backwards":"forwards"}),D=O.findIndex(I=>I===S);eE(O.slice(D+1))?_.preventDefault():E?u.current?.focus():d.current?.focus()}};return y.addEventListener("keydown",w),()=>y.removeEventListener("keydown",w)}},[l,v]),i.jsxs(SSe,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&i.jsx(Fk,{ref:u,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"forwards"});eE(y)}}),i.jsx(jM.Slot,{scope:r,children:i.jsx(He.ol,{tabIndex:-1,...a,ref:m})}),x&&i.jsx(Fk,{ref:d,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"backwards"});eE(y)}})]})});JK.displayName=QK;var ZK="ToastFocusProxy",Fk=N.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,a=q_(ZK,r);return i.jsx(z_,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{const l=o.relatedTarget;!a.viewport?.contains(l)&&n()}})});Fk.displayName=ZK;var ny="Toast",LSe="toast.swipeStart",$Se="toast.swipeMove",FSe="toast.swipeCancel",BSe="toast.swipeEnd",eX=N.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:a,...o}=t,[l,c]=Ma({prop:n,defaultProp:s??!0,onChange:a,caller:ny});return i.jsx(xs,{present:r||l,children:i.jsx(qSe,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:cn(t.onPause),onResume:cn(t.onResume),onSwipeStart:Le(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Le(t.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Le(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Le(t.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});eX.displayName=ny;var[USe,zSe]=XK(ny,{onClose(){}}),qSe=N.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:g,...x}=t,v=q_(ny,r),[y,w]=N.useState(null),_=Et(e,U=>w(U)),A=N.useRef(null),C=N.useRef(null),S=s||v.duration,E=N.useRef(0),P=N.useRef(S),R=N.useRef(0),{onToastAdd:O,onToastRemove:D}=v,I=cn(()=>{y?.contains(document.activeElement)&&v.viewport?.focus(),o()}),$=N.useCallback(U=>{!U||U===1/0||(window.clearTimeout(R.current),E.current=new Date().getTime(),R.current=window.setTimeout(I,U))},[I]);N.useEffect(()=>{const U=v.viewport;if(U){const H=()=>{$(P.current),u?.()},z=()=>{const q=new Date().getTime()-E.current;P.current=P.current-q,window.clearTimeout(R.current),c?.()};return U.addEventListener(Lk,z),U.addEventListener($k,H),()=>{U.removeEventListener(Lk,z),U.removeEventListener($k,H)}}},[v.viewport,S,c,u,$]),N.useEffect(()=>{a&&!v.isClosePausedRef.current&&$(S)},[a,S,v.isClosePausedRef,$]),N.useEffect(()=>(O(),()=>D()),[O,D]);const M=N.useMemo(()=>y?oX(y):null,[y]);return v.viewport?i.jsxs(i.Fragment,{children:[M&&i.jsx(VSe,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:M}),i.jsx(USe,{scope:r,onClose:I,children:wp.createPortal(i.jsx(jM.ItemSlot,{scope:r,children:i.jsx(_Se,{asChild:!0,onEscapeKeyDown:Le(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||I(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(He.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Le(t.onKeyDown,U=>{U.key==="Escape"&&(l?.(U.nativeEvent),U.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:Le(t.onPointerDown,U=>{U.button===0&&(A.current={x:U.clientX,y:U.clientY})}),onPointerMove:Le(t.onPointerMove,U=>{if(!A.current)return;const H=U.clientX-A.current.x,z=U.clientY-A.current.y,q=!!C.current,V=["left","right"].includes(v.swipeDirection),W=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,B=V?W(0,H):0,F=V?0:W(0,z),Y=U.pointerType==="touch"?10:2,oe={x:B,y:F},xe={originalEvent:U,delta:oe};q?(C.current=oe,o0($Se,f,xe,{discrete:!1})):e5(oe,v.swipeDirection,Y)?(C.current=oe,o0(LSe,d,xe,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(H)>Y||Math.abs(z)>Y)&&(A.current=null)}),onPointerUp:Le(t.onPointerUp,U=>{const H=C.current,z=U.target;if(z.hasPointerCapture(U.pointerId)&&z.releasePointerCapture(U.pointerId),C.current=null,A.current=null,H){const q=U.currentTarget,V={originalEvent:U,delta:H};e5(H,v.swipeDirection,v.swipeThreshold)?o0(BSe,g,V,{discrete:!0}):o0(FSe,m,V,{discrete:!0}),q.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),VSe=t=>{const{__scopeToast:e,children:r,...n}=t,s=q_(ny,e),[a,o]=N.useState(!1),[l,c]=N.useState(!1);return GSe(()=>o(!0)),N.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(ry,{asChild:!0,children:i.jsx(z_,{...n,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",r]})})})},HSe="ToastTitle",tX=N.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return i.jsx(He.div,{...n,ref:e})});tX.displayName=HSe;var WSe="ToastDescription",rX=N.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return i.jsx(He.div,{...n,ref:e})});rX.displayName=WSe;var nX="ToastAction",sX=N.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?i.jsx(iX,{altText:r,asChild:!0,children:i.jsx(AM,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${nX}\`. Expected non-empty \`string\`.`),null)});sX.displayName=nX;var aX="ToastClose",AM=N.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=zSe(aX,r);return i.jsx(iX,{asChild:!0,children:i.jsx(He.button,{type:"button",...n,ref:e,onClick:Le(t.onClick,s.onClose)})})});AM.displayName=aX;var iX=N.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return i.jsx(He.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function oX(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),KSe(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...oX(n))}}),e}function o0(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?_M(s,a):s.dispatchEvent(a)}var e5=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),a=n>s;return e==="left"||e==="right"?a&&n>r:!a&&s>r};function GSe(t=()=>{}){const e=cn(t);gn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function KSe(t){return t.nodeType===t.ELEMENT_NODE}function XSe(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function eE(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var YSe=YK,lX=JK,cX=eX,uX=tX,dX=rX,hX=sX,fX=AM;function pX(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=pX(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Rt(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=pX(t))&&(n&&(n+=" "),n+=e);return n}const t5=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,r5=Rt,sy=(t,e)=>r=>{var n;if(e?.variants==null)return r5(t,r?.class,r?.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(u=>{const d=r?.[u],f=a?.[u];if(d===null)return null;const m=t5(d)||t5(f);return s[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:m,...g}=d;return Object.entries(g).every(x=>{let[v,y]=x;return Array.isArray(y)?y.includes({...a,...l}[v]):{...a,...l}[v]===y})?[...u,f,m]:u},[]);return r5(t,o,c,r?.class,r?.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QSe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mX=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JSe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZSe=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...JSe,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:mX("lucide",s),...l},[...o.map(([u,d])=>N.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(t,e)=>{const r=N.forwardRef(({className:n,...s},a)=>N.createElement(ZSe,{ref:a,iconNode:e,className:mX(`lucide-${QSe(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Te("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=Te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eje=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tje=Te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=Te("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rje=Te("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=Te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=Te("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=Te("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=Te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nje=Te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=Te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sje=Te("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=Te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=Te("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=Te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=Te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aje=Te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=Te("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=Te("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=Te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=Te("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=Te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=Te("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ije=Te("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=Te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oje=Te("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=Te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lje=Te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=Te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cje=Te("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=Te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uje=Te("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=Te("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=Te("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=Te("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=Te("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=Te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dje=Te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=Te("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=Te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=Te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=Te("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hje=Te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fje=Te("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=Te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pje=Te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=Te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=Te("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mje=Te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gje=Te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vje=Te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=Te("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=Te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Te("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yje=Te("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=Te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=Te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=Te("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=Te("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=Te("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=Te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=Te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=Te("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xje=Te("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Te("Signature",[["path",{d:"m21 17-2.156-1.868A.5.5 0 0 0 18 15.5v.5a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 0 0 0 5c4.153 0 4.745-11.295 5.708-13.5a2.5 2.5 0 1 1 3.31 3.284",key:"y32ogt"}],["path",{d:"M3 21h18",key:"itz85i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=Te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bje=Te("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Te("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=Te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=Te("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wje=Te("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _je=Te("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=Te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sje=Te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jje=Te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aje=Te("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=Te("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Te("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nje=Te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),RM="-",Eje=t=>{const e=Tje(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(RM);return l[0]===""&&l.length!==1&&l.shift(),RX(l,e)||Cje(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},RX=(t,e)=>{if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?RX(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(RM);return e.validators.find(({validator:o})=>o(a))?.classGroupId},l5=/^\[(.+)\]$/,Cje=t=>{if(l5.test(t)){const e=l5.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},Tje=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return kje(Object.entries(t.classGroups),r).forEach(([a,o])=>{qk(o,n,a,e)}),n},qk=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:c5(e,s);a.classGroupId=r;return}if(typeof s=="function"){if(Pje(s)){qk(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,o])=>{qk(o,c5(e,a),r,n)})})},c5=(t,e)=>{let r=t;return e.split(RM).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Pje=t=>t.isThemeGetter,kje=(t,e)=>e?t.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[r,s]}):t,Oje=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(a,o)=>{r.set(a,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return s(a,o),o},set(a,o){r.has(a)?r.set(a,o):s(a,o)}}},IX="!",Rje=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,f;for(let y=0;y<l.length;y++){let w=l[y];if(u===0){if(w===s&&(n||l.slice(y,y+a)===e)){c.push(l.slice(d,y)),d=y+a;continue}if(w==="/"){f=y;continue}}w==="["?u++:w==="]"&&u--}const m=c.length===0?l:l.substring(d),g=m.startsWith(IX),x=g?m.substring(1):m,v=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:v}};return r?l=>r({className:l,parseClassName:o}):o},Ije=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},Mje=t=>({cache:Oje(t.cacheSize),parseClassName:Rje(t),...Eje(t)}),Dje=/\s+/,Lje=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(Dje);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}=r(u);let x=!!g,v=n(x?m.substring(0,g):m);if(!v){if(!x){l=u+(l.length>0?" "+l:l);continue}if(v=n(m),!v){l=u+(l.length>0?" "+l:l);continue}x=!1}const y=Ije(d).join(":"),w=f?y+IX:y,_=w+v;if(a.includes(_))continue;a.push(_);const A=s(v,x);for(let C=0;C<A.length;++C){const S=A[C];a.push(w+S)}l=u+(l.length>0?" "+l:l)}return l};function $je(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=MX(e))&&(n&&(n+=" "),n+=r);return n}const MX=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=MX(t[n]))&&(r&&(r+=" "),r+=e);return r};function Fje(t,...e){let r,n,s,a=o;function o(c){const u=e.reduce((d,f)=>f(d),t());return r=Mje(u),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=Lje(c,r);return s(c,d),d}return function(){return a($je.apply(null,arguments))}}const zr=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},DX=/^\[(?:([a-z-]+):)?(.+)\]$/i,Bje=/^\d+\/\d+$/,Uje=new Set(["px","full","screen"]),zje=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qje=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vje=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Hje=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Wje=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qo=t=>rf(t)||Uje.has(t)||Bje.test(t),tc=t=>Sp(t,"length",eAe),rf=t=>!!t&&!Number.isNaN(Number(t)),sE=t=>Sp(t,"number",rf),Sm=t=>!!t&&Number.isInteger(Number(t)),Gje=t=>t.endsWith("%")&&rf(t.slice(0,-1)),Bt=t=>DX.test(t),rc=t=>zje.test(t),Kje=new Set(["length","size","percentage"]),Xje=t=>Sp(t,Kje,LX),Yje=t=>Sp(t,"position",LX),Qje=new Set(["image","url"]),Jje=t=>Sp(t,Qje,rAe),Zje=t=>Sp(t,"",tAe),jm=()=>!0,Sp=(t,e,r)=>{const n=DX.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},eAe=t=>qje.test(t)&&!Vje.test(t),LX=()=>!1,tAe=t=>Hje.test(t),rAe=t=>Wje.test(t),nAe=()=>{const t=zr("colors"),e=zr("spacing"),r=zr("blur"),n=zr("brightness"),s=zr("borderColor"),a=zr("borderRadius"),o=zr("borderSpacing"),l=zr("borderWidth"),c=zr("contrast"),u=zr("grayscale"),d=zr("hueRotate"),f=zr("invert"),m=zr("gap"),g=zr("gradientColorStops"),x=zr("gradientColorStopPositions"),v=zr("inset"),y=zr("margin"),w=zr("opacity"),_=zr("padding"),A=zr("saturate"),C=zr("scale"),S=zr("sepia"),E=zr("skew"),P=zr("space"),R=zr("translate"),O=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Bt,e],$=()=>[Bt,e],M=()=>["",qo,tc],U=()=>["auto",rf,Bt],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",Bt],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[rf,Bt];return{cacheSize:500,separator:":",theme:{colors:[jm],spacing:[qo,tc],blur:["none","",rc,Bt],brightness:F(),borderColor:[t],borderRadius:["none","","full",rc,Bt],borderSpacing:$(),borderWidth:M(),contrast:F(),grayscale:W(),hueRotate:F(),invert:W(),gap:$(),gradientColorStops:[t],gradientColorStopPositions:[Gje,tc],inset:I(),margin:I(),opacity:F(),padding:$(),saturate:F(),scale:F(),sepia:W(),skew:F(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",Bt]}],container:["container"],columns:[{columns:[rc]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Bt]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Sm,Bt]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Bt]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Sm,Bt]}],"grid-cols":[{"grid-cols":[jm]}],"col-start-end":[{col:["auto",{span:["full",Sm,Bt]},Bt]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[jm]}],"row-start-end":[{row:["auto",{span:[Sm,Bt]},Bt]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Bt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Bt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Bt,e]}],"min-w":[{"min-w":[Bt,e,"min","max","fit"]}],"max-w":[{"max-w":[Bt,e,"none","full","min","max","fit","prose",{screen:[rc]},rc]}],h:[{h:[Bt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Bt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Bt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Bt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",rc,tc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",sE]}],"font-family":[{font:[jm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Bt]}],"line-clamp":[{"line-clamp":["none",rf,sE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qo,Bt]}],"list-image":[{"list-image":["none",Bt]}],"list-style-type":[{list:["none","disc","decimal",Bt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",qo,tc]}],"underline-offset":[{"underline-offset":["auto",qo,Bt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Bt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Bt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),Yje]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Xje]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Jje]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[qo,Bt]}],"outline-w":[{outline:[qo,tc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[qo,tc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",rc,Zje]}],"shadow-color":[{shadow:[jm]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",rc,Bt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[A]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Bt]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Bt]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Bt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Sm,Bt]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Bt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Bt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Bt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[qo,tc,sE]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},sAe=Fje(nAe);function Ie(...t){return sAe(Rt(t))}function aE(t){let e;return typeof t=="object"&&t!==null?e=t.value||t.getReais?.()||t.getCents?.()/100||0:e=Number(t)||0,new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}const aAe=YSe,$X=N.forwardRef(({className:t,...e},r)=>i.jsx(lX,{ref:r,className:Ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));$X.displayName=lX.displayName;const iAe=sy("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),FX=N.forwardRef(({className:t,variant:e,...r},n)=>i.jsx(cX,{ref:n,className:Ie(iAe({variant:e}),t),...r}));FX.displayName=cX.displayName;const oAe=N.forwardRef(({className:t,...e},r)=>i.jsx(hX,{ref:r,className:Ie("group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));oAe.displayName=hX.displayName;const BX=N.forwardRef(({className:t,...e},r)=>i.jsx(fX,{ref:r,className:Ie("text-foreground/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(Vi,{className:"h-4 w-4"})}));BX.displayName=fX.displayName;const UX=N.forwardRef(({className:t,...e},r)=>i.jsx(uX,{ref:r,className:Ie("text-sm font-semibold",t),...e}));UX.displayName=uX.displayName;const zX=N.forwardRef(({className:t,...e},r)=>i.jsx(dX,{ref:r,className:Ie("text-sm opacity-90",t),...e}));zX.displayName=dX.displayName;function lAe(){const{toasts:t}=Fr();return i.jsxs(aAe,{children:[t.map(function({id:e,title:r,description:n,action:s,...a}){return i.jsxs(FX,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(UX,{children:r}),n&&i.jsx(zX,{children:n})]}),s,i.jsx(BX,{})]},e)}),i.jsx($X,{})]})}var cAe=cM[" useId ".trim().toString()]||(()=>{}),uAe=0;function ka(t){const[e,r]=N.useState(cAe());return gn(()=>{r(n=>n??String(uAe++))},[t]),e?`radix-${e}`:""}const dAe=["top","right","bottom","left"],Dc=Math.min,Aa=Math.max,Vb=Math.round,l0=Math.floor,vo=t=>({x:t,y:t}),hAe={left:"right",right:"left",bottom:"top",top:"bottom"},fAe={start:"end",end:"start"};function Vk(t,e,r){return Aa(t,Dc(e,r))}function xl(t,e){return typeof t=="function"?t(e):t}function bl(t){return t.split("-")[0]}function jp(t){return t.split("-")[1]}function IM(t){return t==="x"?"y":"x"}function MM(t){return t==="y"?"height":"width"}const pAe=new Set(["top","bottom"]);function fo(t){return pAe.has(bl(t))?"y":"x"}function DM(t){return IM(fo(t))}function mAe(t,e,r){r===void 0&&(r=!1);const n=jp(t),s=DM(t),a=MM(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Hb(o)),[o,Hb(o)]}function gAe(t){const e=Hb(t);return[Hk(t),e,Hk(e)]}function Hk(t){return t.replace(/start|end/g,e=>fAe[e])}const u5=["left","right"],d5=["right","left"],vAe=["top","bottom"],yAe=["bottom","top"];function xAe(t,e,r){switch(t){case"top":case"bottom":return r?e?d5:u5:e?u5:d5;case"left":case"right":return e?vAe:yAe;default:return[]}}function bAe(t,e,r,n){const s=jp(t);let a=xAe(bl(t),r==="start",n);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(Hk)))),a}function Hb(t){return t.replace(/left|right|bottom|top/g,e=>hAe[e])}function wAe(t){return{top:0,right:0,bottom:0,left:0,...t}}function qX(t){return typeof t!="number"?wAe(t):{top:t,right:t,bottom:t,left:t}}function Wb(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function h5(t,e,r){let{reference:n,floating:s}=t;const a=fo(e),o=DM(e),l=MM(o),c=bl(e),u=a==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let g;switch(c){case"top":g={x:d,y:n.y-s.height};break;case"bottom":g={x:d,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:f};break;case"left":g={x:n.x-s.width,y:f};break;default:g={x:n.x,y:n.y}}switch(jp(e)){case"start":g[o]-=m*(r&&u?-1:1);break;case"end":g[o]+=m*(r&&u?-1:1);break}return g}const _Ae=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=h5(u,n,c),m=n,g={},x=0;for(let v=0;v<l.length;v++){const{name:y,fn:w}=l[v],{x:_,y:A,data:C,reset:S}=await w({x:d,y:f,initialPlacement:n,placement:m,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});d=_??d,f=A??f,g={...g,[y]:{...g[y],...C}},S&&x<=50&&(x++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:f}=h5(u,m,c)),v=-1)}return{x:d,y:f,placement:m,strategy:s,middlewareData:g}};async function Fg(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=xl(e,t),x=qX(g),y=l[m?f==="floating"?"reference":"floating":f],w=Wb(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(y)))==null||r?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),_=f==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(A))?await(a.getScale==null?void 0:a.getScale(A))||{x:1,y:1}:{x:1,y:1},S=Wb(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:A,strategy:c}):_);return{top:(w.top-S.top+x.top)/C.y,bottom:(S.bottom-w.bottom+x.bottom)/C.y,left:(w.left-S.left+x.left)/C.x,right:(S.right-w.right+x.right)/C.x}}const SAe=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=xl(t,e)||{};if(u==null)return{};const f=qX(d),m={x:r,y:n},g=DM(s),x=MM(g),v=await o.getDimensions(u),y=g==="y",w=y?"top":"left",_=y?"bottom":"right",A=y?"clientHeight":"clientWidth",C=a.reference[x]+a.reference[g]-m[g]-a.floating[x],S=m[g]-a.reference[g],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let P=E?E[A]:0;(!P||!await(o.isElement==null?void 0:o.isElement(E)))&&(P=l.floating[A]||a.floating[x]);const R=C/2-S/2,O=P/2-v[x]/2-1,D=Dc(f[w],O),I=Dc(f[_],O),$=D,M=P-v[x]-I,U=P/2-v[x]/2+R,H=Vk($,U,M),z=!c.arrow&&jp(s)!=null&&U!==H&&a.reference[x]/2-(U<$?D:I)-v[x]/2<0,q=z?U<$?U-$:U-M:0;return{[g]:m[g]+q,data:{[g]:H,centerOffset:U-H-q,...z&&{alignmentOffset:q}},reset:z}}}),jAe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...y}=xl(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const w=bl(s),_=fo(l),A=bl(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=m||(A||!v?[Hb(l)]:gAe(l)),E=x!=="none";!m&&E&&S.push(...bAe(l,v,x,C));const P=[l,...S],R=await Fg(e,y),O=[];let D=((n=a.flip)==null?void 0:n.overflows)||[];if(d&&O.push(R[w]),f){const U=mAe(s,o,C);O.push(R[U[0]],R[U[1]])}if(D=[...D,{placement:s,overflows:O}],!O.every(U=>U<=0)){var I,$;const U=(((I=a.flip)==null?void 0:I.index)||0)+1,H=P[U];if(H&&(!(f==="alignment"?_!==fo(H):!1)||D.every(V=>fo(V.placement)===_?V.overflows[0]>0:!0)))return{data:{index:U,overflows:D},reset:{placement:H}};let z=($=D.filter(q=>q.overflows[0]<=0).sort((q,V)=>q.overflows[1]-V.overflows[1])[0])==null?void 0:$.placement;if(!z)switch(g){case"bestFit":{var M;const q=(M=D.filter(V=>{if(E){const W=fo(V.placement);return W===_||W==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(W=>W>0).reduce((W,B)=>W+B,0)]).sort((V,W)=>V[1]-W[1])[0])==null?void 0:M[0];q&&(z=q);break}case"initialPlacement":z=l;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function f5(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function p5(t){return dAe.some(e=>t[e]>=0)}const AAe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=xl(t,e);switch(n){case"referenceHidden":{const a=await Fg(e,{...s,elementContext:"reference"}),o=f5(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:p5(o)}}}case"escaped":{const a=await Fg(e,{...s,altBoundary:!0}),o=f5(a,r.floating);return{data:{escapedOffsets:o,escaped:p5(o)}}}default:return{}}}}},VX=new Set(["left","top"]);async function NAe(t,e){const{placement:r,platform:n,elements:s}=t,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=bl(r),l=jp(r),c=fo(r)==="y",u=VX.has(o)?-1:1,d=a&&c?-1:1,f=xl(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const EAe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:a,placement:o,middlewareData:l}=e,c=await NAe(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},CAe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:w,y:_}=y;return{x:w,y:_}}},...c}=xl(t,e),u={x:r,y:n},d=await Fg(e,c),f=fo(bl(s)),m=IM(f);let g=u[m],x=u[f];if(a){const y=m==="y"?"top":"left",w=m==="y"?"bottom":"right",_=g+d[y],A=g-d[w];g=Vk(_,g,A)}if(o){const y=f==="y"?"top":"left",w=f==="y"?"bottom":"right",_=x+d[y],A=x-d[w];x=Vk(_,x,A)}const v=l.fn({...e,[m]:g,[f]:x});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[m]:a,[f]:o}}}}}},TAe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=xl(t,e),d={x:r,y:n},f=fo(s),m=IM(f);let g=d[m],x=d[f];const v=xl(l,e),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const A=m==="y"?"height":"width",C=a.reference[m]-a.floating[A]+y.mainAxis,S=a.reference[m]+a.reference[A]-y.mainAxis;g<C?g=C:g>S&&(g=S)}if(u){var w,_;const A=m==="y"?"width":"height",C=VX.has(bl(s)),S=a.reference[f]-a.floating[A]+(C&&((w=o.offset)==null?void 0:w[f])||0)+(C?0:y.crossAxis),E=a.reference[f]+a.reference[A]+(C?0:((_=o.offset)==null?void 0:_[f])||0)-(C?y.crossAxis:0);x<S?x=S:x>E&&(x=E)}return{[m]:g,[f]:x}}}},PAe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=xl(t,e),d=await Fg(e,u),f=bl(s),m=jp(s),g=fo(s)==="y",{width:x,height:v}=a.floating;let y,w;f==="top"||f==="bottom"?(y=f,w=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=f,y=m==="end"?"top":"bottom");const _=v-d.top-d.bottom,A=x-d.left-d.right,C=Dc(v-d[y],_),S=Dc(x-d[w],A),E=!e.middlewareData.shift;let P=C,R=S;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(R=A),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(P=_),E&&!m){const D=Aa(d.left,0),I=Aa(d.right,0),$=Aa(d.top,0),M=Aa(d.bottom,0);g?R=x-2*(D!==0||I!==0?D+I:Aa(d.left,d.right)):P=v-2*($!==0||M!==0?$+M:Aa(d.top,d.bottom))}await c({...e,availableWidth:R,availableHeight:P});const O=await o.getDimensions(l.floating);return x!==O.width||v!==O.height?{reset:{rects:!0}}:{}}}};function G_(){return typeof window<"u"}function Ap(t){return HX(t)?(t.nodeName||"").toLowerCase():"#document"}function Oa(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ko(t){var e;return(e=(HX(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function HX(t){return G_()?t instanceof Node||t instanceof Oa(t).Node:!1}function Ui(t){return G_()?t instanceof Element||t instanceof Oa(t).Element:!1}function jo(t){return G_()?t instanceof HTMLElement||t instanceof Oa(t).HTMLElement:!1}function m5(t){return!G_()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Oa(t).ShadowRoot}const kAe=new Set(["inline","contents"]);function iy(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=zi(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!kAe.has(s)}const OAe=new Set(["table","td","th"]);function RAe(t){return OAe.has(Ap(t))}const IAe=[":popover-open",":modal"];function K_(t){return IAe.some(e=>{try{return t.matches(e)}catch{return!1}})}const MAe=["transform","translate","scale","rotate","perspective"],DAe=["transform","translate","scale","rotate","perspective","filter"],LAe=["paint","layout","strict","content"];function LM(t){const e=$M(),r=Ui(t)?zi(t):t;return MAe.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||DAe.some(n=>(r.willChange||"").includes(n))||LAe.some(n=>(r.contain||"").includes(n))}function $Ae(t){let e=Lc(t);for(;jo(e)&&!Cf(e);){if(LM(e))return e;if(K_(e))return null;e=Lc(e)}return null}function $M(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const FAe=new Set(["html","body","#document"]);function Cf(t){return FAe.has(Ap(t))}function zi(t){return Oa(t).getComputedStyle(t)}function X_(t){return Ui(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Lc(t){if(Ap(t)==="html")return t;const e=t.assignedSlot||t.parentNode||m5(t)&&t.host||ko(t);return m5(e)?e.host:e}function WX(t){const e=Lc(t);return Cf(e)?t.ownerDocument?t.ownerDocument.body:t.body:jo(e)&&iy(e)?e:WX(e)}function Bg(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=WX(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),o=Oa(s);if(a){const l=Wk(o);return e.concat(o,o.visualViewport||[],iy(s)?s:[],l&&r?Bg(l):[])}return e.concat(s,Bg(s,[],r))}function Wk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function GX(t){const e=zi(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=jo(t),a=s?t.offsetWidth:r,o=s?t.offsetHeight:n,l=Vb(r)!==a||Vb(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function FM(t){return Ui(t)?t:t.contextElement}function nf(t){const e=FM(t);if(!jo(e))return vo(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:a}=GX(e);let o=(a?Vb(r.width):r.width)/n,l=(a?Vb(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const BAe=vo(0);function KX(t){const e=Oa(t);return!$M()||!e.visualViewport?BAe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function UAe(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Oa(t)?!1:e}function ld(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),a=FM(t);let o=vo(1);e&&(n?Ui(n)&&(o=nf(n)):o=nf(t));const l=UAe(a,r,n)?KX(a):vo(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(a){const m=Oa(a),g=n&&Ui(n)?Oa(n):n;let x=m,v=Wk(x);for(;v&&n&&g!==x;){const y=nf(v),w=v.getBoundingClientRect(),_=zi(v),A=w.left+(v.clientLeft+parseFloat(_.paddingLeft))*y.x,C=w.top+(v.clientTop+parseFloat(_.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,f*=y.y,c+=A,u+=C,x=Oa(v),v=Wk(x)}}return Wb({width:d,height:f,x:c,y:u})}function Y_(t,e){const r=X_(t).scrollLeft;return e?e.left+r:ld(ko(t)).left+r}function XX(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-Y_(t,r),s=r.top+e.scrollTop;return{x:n,y:s}}function zAe(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const a=s==="fixed",o=ko(n),l=e?K_(e.floating):!1;if(n===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},u=vo(1);const d=vo(0),f=jo(n);if((f||!f&&!a)&&((Ap(n)!=="body"||iy(o))&&(c=X_(n)),jo(n))){const g=ld(n);u=nf(n),d.x=g.x+n.clientLeft,d.y=g.y+n.clientTop}const m=o&&!f&&!a?XX(o,c):vo(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:r.y*u.y-c.scrollTop*u.y+d.y+m.y}}function qAe(t){return Array.from(t.getClientRects())}function VAe(t){const e=ko(t),r=X_(t),n=t.ownerDocument.body,s=Aa(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=Aa(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Y_(t);const l=-r.scrollTop;return zi(n).direction==="rtl"&&(o+=Aa(e.clientWidth,n.clientWidth)-s),{width:s,height:a,x:o,y:l}}const g5=25;function HAe(t,e){const r=Oa(t),n=ko(t),s=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const d=$M();(!d||d&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const u=Y_(n);if(u<=0){const d=n.ownerDocument,f=d.body,m=getComputedStyle(f),g=d.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,x=Math.abs(n.clientWidth-f.clientWidth-g);x<=g5&&(a-=x)}else u<=g5&&(a+=u);return{width:a,height:o,x:l,y:c}}const WAe=new Set(["absolute","fixed"]);function GAe(t,e){const r=ld(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,a=jo(t)?nf(t):vo(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=n*a.y;return{width:o,height:l,x:c,y:u}}function v5(t,e,r){let n;if(e==="viewport")n=HAe(t,r);else if(e==="document")n=VAe(ko(t));else if(Ui(e))n=GAe(e,r);else{const s=KX(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Wb(n)}function YX(t,e){const r=Lc(t);return r===e||!Ui(r)||Cf(r)?!1:zi(r).position==="fixed"||YX(r,e)}function KAe(t,e){const r=e.get(t);if(r)return r;let n=Bg(t,[],!1).filter(l=>Ui(l)&&Ap(l)!=="body"),s=null;const a=zi(t).position==="fixed";let o=a?Lc(t):t;for(;Ui(o)&&!Cf(o);){const l=zi(o),c=LM(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&WAe.has(s.position)||iy(o)&&!c&&YX(t,o))?n=n.filter(d=>d!==o):s=l,o=Lc(o)}return e.set(t,n),n}function XAe(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?K_(e)?[]:KAe(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=v5(e,d,s);return u.top=Aa(f.top,u.top),u.right=Dc(f.right,u.right),u.bottom=Dc(f.bottom,u.bottom),u.left=Aa(f.left,u.left),u},v5(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function YAe(t){const{width:e,height:r}=GX(t);return{width:e,height:r}}function QAe(t,e,r){const n=jo(e),s=ko(e),a=r==="fixed",o=ld(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=vo(0);function u(){c.x=Y_(s)}if(n||!n&&!a)if((Ap(e)!=="body"||iy(s))&&(l=X_(e)),n){const g=ld(e,!0,a,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&u();a&&!n&&s&&u();const d=s&&!n&&!a?XX(s,l):vo(0),f=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:f,y:m,width:o.width,height:o.height}}function iE(t){return zi(t).position==="static"}function y5(t,e){if(!jo(t)||zi(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return ko(t)===r&&(r=r.ownerDocument.body),r}function QX(t,e){const r=Oa(t);if(K_(t))return r;if(!jo(t)){let s=Lc(t);for(;s&&!Cf(s);){if(Ui(s)&&!iE(s))return s;s=Lc(s)}return r}let n=y5(t,e);for(;n&&RAe(n)&&iE(n);)n=y5(n,e);return n&&Cf(n)&&iE(n)&&!LM(n)?r:n||$Ae(t)||r}const JAe=async function(t){const e=this.getOffsetParent||QX,r=this.getDimensions,n=await r(t.floating);return{reference:QAe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function ZAe(t){return zi(t).direction==="rtl"}const eNe={convertOffsetParentRelativeRectToViewportRelativeRect:zAe,getDocumentElement:ko,getClippingRect:XAe,getOffsetParent:QX,getElementRects:JAe,getClientRects:qAe,getDimensions:YAe,getScale:nf,isElement:Ui,isRTL:ZAe};function JX(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function tNe(t,e){let r=null,n;const s=ko(t);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=t.getBoundingClientRect(),{left:d,top:f,width:m,height:g}=u;if(l||e(),!m||!g)return;const x=l0(f),v=l0(s.clientWidth-(d+m)),y=l0(s.clientHeight-(f+g)),w=l0(d),A={rootMargin:-x+"px "+-v+"px "+-y+"px "+-w+"px",threshold:Aa(0,Dc(1,c))||1};let C=!0;function S(E){const P=E[0].intersectionRatio;if(P!==c){if(!C)return o();P?o(!1,P):n=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!JX(u,t.getBoundingClientRect())&&o(),C=!1}try{r=new IntersectionObserver(S,{...A,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,A)}r.observe(t)}return o(!0),a}function rNe(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=FM(t),d=s||a?[...u?Bg(u):[],...Bg(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",r,{passive:!0}),a&&w.addEventListener("resize",r)});const f=u&&l?tNe(u,r):null;let m=-1,g=null;o&&(g=new ResizeObserver(w=>{let[_]=w;_&&_.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var A;(A=g)==null||A.observe(e)})),r()}),u&&!c&&g.observe(u),g.observe(e));let x,v=c?ld(t):null;c&&y();function y(){const w=ld(t);v&&!JX(v,w)&&r(),v=w,x=requestAnimationFrame(y)}return r(),()=>{var w;d.forEach(_=>{s&&_.removeEventListener("scroll",r),a&&_.removeEventListener("resize",r)}),f?.(),(w=g)==null||w.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const nNe=EAe,sNe=CAe,aNe=jAe,iNe=PAe,oNe=AAe,x5=SAe,lNe=TAe,cNe=(t,e,r)=>{const n=new Map,s={platform:eNe,...r},a={...s.platform,_c:n};return _Ae(t,e,{...s,platform:a})};var uNe=typeof document<"u",dNe=function(){},Q0=uNe?N.useLayoutEffect:dNe;function Gb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Gb(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&t.$$typeof)&&!Gb(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function ZX(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function b5(t,e){const r=ZX(t);return Math.round(e*r)/r}function oE(t){const e=N.useRef(t);return Q0(()=>{e.current=t}),e}function hNe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=N.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=N.useState(n);Gb(m,n)||g(n);const[x,v]=N.useState(null),[y,w]=N.useState(null),_=N.useCallback(V=>{V!==E.current&&(E.current=V,v(V))},[]),A=N.useCallback(V=>{V!==P.current&&(P.current=V,w(V))},[]),C=a||x,S=o||y,E=N.useRef(null),P=N.useRef(null),R=N.useRef(d),O=c!=null,D=oE(c),I=oE(s),$=oE(u),M=N.useCallback(()=>{if(!E.current||!P.current)return;const V={placement:e,strategy:r,middleware:m};I.current&&(V.platform=I.current),cNe(E.current,P.current,V).then(W=>{const B={...W,isPositioned:$.current!==!1};U.current&&!Gb(R.current,B)&&(R.current=B,wp.flushSync(()=>{f(B)}))})},[m,e,r,I,$]);Q0(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[u]);const U=N.useRef(!1);Q0(()=>(U.current=!0,()=>{U.current=!1}),[]),Q0(()=>{if(C&&(E.current=C),S&&(P.current=S),C&&S){if(D.current)return D.current(C,S,M);M()}},[C,S,M,D,O]);const H=N.useMemo(()=>({reference:E,floating:P,setReference:_,setFloating:A}),[_,A]),z=N.useMemo(()=>({reference:C,floating:S}),[C,S]),q=N.useMemo(()=>{const V={position:r,left:0,top:0};if(!z.floating)return V;const W=b5(z.floating,d.x),B=b5(z.floating,d.y);return l?{...V,transform:"translate("+W+"px, "+B+"px)",...ZX(z.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:W,top:B}},[r,l,z.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:M,refs:H,elements:z,floatingStyles:q}),[d,M,H,z,q])}const fNe=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?x5({element:n.current,padding:s}).fn(r):{}:n?x5({element:n,padding:s}).fn(r):{}}}},pNe=(t,e)=>({...nNe(t),options:[t,e]}),mNe=(t,e)=>({...sNe(t),options:[t,e]}),gNe=(t,e)=>({...lNe(t),options:[t,e]}),vNe=(t,e)=>({...aNe(t),options:[t,e]}),yNe=(t,e)=>({...iNe(t),options:[t,e]}),xNe=(t,e)=>({...oNe(t),options:[t,e]}),bNe=(t,e)=>({...fNe(t),options:[t,e]});var wNe="Arrow",eY=N.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...a}=t;return i.jsx(He.svg,{...a,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});eY.displayName=wNe;var _Ne=eY;function BM(t){const[e,r]=N.useState(void 0);return gn(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var UM="Popper",[tY,Np]=cs(UM),[SNe,rY]=tY(UM),nY=t=>{const{__scopePopper:e,children:r}=t,[n,s]=N.useState(null);return i.jsx(SNe,{scope:e,anchor:n,onAnchorChange:s,children:r})};nY.displayName=UM;var sY="PopperAnchor",aY=N.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,a=rY(sY,r),o=N.useRef(null),l=Et(e,o),c=N.useRef(null);return N.useEffect(()=>{const u=c.current;c.current=n?.current||o.current,u!==c.current&&a.onAnchorChange(c.current)}),n?null:i.jsx(He.div,{...s,ref:l})});aY.displayName=sY;var zM="PopperContent",[jNe,ANe]=tY(zM),iY=N.forwardRef((t,e)=>{const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:x,...v}=t,y=rY(zM,r),[w,_]=N.useState(null),A=Et(e,ye=>_(ye)),[C,S]=N.useState(null),E=BM(C),P=E?.width??0,R=E?.height??0,O=n+(a!=="center"?"-"+a:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},I=Array.isArray(u)?u:[u],$=I.length>0,M={padding:D,boundary:I.filter(ENe),altBoundary:$},{refs:U,floatingStyles:H,placement:z,isPositioned:q,middlewareData:V}=hNe({strategy:"fixed",placement:O,whileElementsMounted:(...ye)=>rNe(...ye,{animationFrame:g==="always"}),elements:{reference:y.anchor},middleware:[pNe({mainAxis:s+R,alignmentAxis:o}),c&&mNe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?gNe():void 0,...M}),c&&vNe({...M}),yNe({...M,apply:({elements:ye,rects:je,availableWidth:pe,availableHeight:Se})=>{const{width:Oe,height:ve}=je.reference,Xe=ye.floating.style;Xe.setProperty("--radix-popper-available-width",`${pe}px`),Xe.setProperty("--radix-popper-available-height",`${Se}px`),Xe.setProperty("--radix-popper-anchor-width",`${Oe}px`),Xe.setProperty("--radix-popper-anchor-height",`${ve}px`)}}),C&&bNe({element:C,padding:l}),CNe({arrowWidth:P,arrowHeight:R}),m&&xNe({strategy:"referenceHidden",...M})]}),[W,B]=cY(z),F=cn(x);gn(()=>{q&&F?.()},[q,F]);const Y=V.arrow?.x,oe=V.arrow?.y,xe=V.arrow?.centerOffset!==0,[J,Ee]=N.useState();return gn(()=>{w&&Ee(window.getComputedStyle(w).zIndex)},[w]),i.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:q?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[V.transformOrigin?.x,V.transformOrigin?.y].join(" "),...V.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(jNe,{scope:r,placedSide:W,onArrowChange:S,arrowX:Y,arrowY:oe,shouldHideArrow:xe,children:i.jsx(He.div,{"data-side":W,"data-align":B,...v,ref:A,style:{...v.style,animation:q?void 0:"none"}})})})});iY.displayName=zM;var oY="PopperArrow",NNe={top:"bottom",right:"left",bottom:"top",left:"right"},lY=N.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,a=ANe(oY,n),o=NNe[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(_Ne,{...s,ref:r,style:{...s.style,display:"block"}})})});lY.displayName=oY;function ENe(t){return t!==null}var CNe=t=>({name:"transformOrigin",options:t,fn(e){const{placement:r,rects:n,middlewareData:s}=e,o=s.arrow?.centerOffset!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=cY(r),f={start:"0%",center:"50%",end:"100%"}[d],m=(s.arrow?.x??0)+l/2,g=(s.arrow?.y??0)+c/2;let x="",v="";return u==="bottom"?(x=o?f:`${m}px`,v=`${-c}px`):u==="top"?(x=o?f:`${m}px`,v=`${n.floating.height+c}px`):u==="right"?(x=`${-c}px`,v=o?f:`${g}px`):u==="left"&&(x=`${n.floating.width+c}px`,v=o?f:`${g}px`),{data:{x,y:v}}}});function cY(t){const[e,r="center"]=t.split("-");return[e,r]}var qM=nY,VM=aY,HM=iY,WM=lY,[Q_,i7e]=cs("Tooltip",[Np]),J_=Np(),uY="TooltipProvider",TNe=700,Gk="tooltip.open",[PNe,GM]=Q_(uY),dY=t=>{const{__scopeTooltip:e,delayDuration:r=TNe,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:a}=t,o=N.useRef(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(PNe,{scope:e,isOpenDelayedRef:o,delayDuration:r,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};dY.displayName=uY;var Ug="Tooltip",[kNe,Z_]=Q_(Ug),hY=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:s,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=t,c=GM(Ug,t.__scopeTooltip),u=J_(e),[d,f]=N.useState(null),m=ka(),g=N.useRef(0),x=o??c.disableHoverableContent,v=l??c.delayDuration,y=N.useRef(!1),[w,_]=Ma({prop:n,defaultProp:s??!1,onChange:P=>{P?(c.onOpen(),document.dispatchEvent(new CustomEvent(Gk))):c.onClose(),a?.(P)},caller:Ug}),A=N.useMemo(()=>w?y.current?"delayed-open":"instant-open":"closed",[w]),C=N.useCallback(()=>{window.clearTimeout(g.current),g.current=0,y.current=!1,_(!0)},[_]),S=N.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_(!1)},[_]),E=N.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{y.current=!0,_(!0),g.current=0},v)},[v,_]);return N.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),i.jsx(qM,{...u,children:i.jsx(kNe,{scope:e,contentId:m,open:w,stateAttribute:A,trigger:d,onTriggerChange:f,onTriggerEnter:N.useCallback(()=>{c.isOpenDelayedRef.current?E():C()},[c.isOpenDelayedRef,E,C]),onTriggerLeave:N.useCallback(()=>{x?S():(window.clearTimeout(g.current),g.current=0)},[S,x]),onOpen:C,onClose:S,disableHoverableContent:x,children:r})})};hY.displayName=Ug;var Kk="TooltipTrigger",fY=N.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Z_(Kk,r),a=GM(Kk,r),o=J_(r),l=N.useRef(null),c=Et(e,l,s.onTriggerChange),u=N.useRef(!1),d=N.useRef(!1),f=N.useCallback(()=>u.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(VM,{asChild:!0,...o,children:i.jsx(He.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:Le(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Le(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Le(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Le(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:Le(t.onBlur,s.onClose),onClick:Le(t.onClick,s.onClose)})})});fY.displayName=Kk;var ONe="TooltipPortal",[o7e,RNe]=Q_(ONe,{forceMount:void 0}),Tf="TooltipContent",pY=N.forwardRef((t,e)=>{const r=RNe(Tf,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...a}=t,o=Z_(Tf,t.__scopeTooltip);return i.jsx(xs,{present:n||o.open,children:o.disableHoverableContent?i.jsx(mY,{side:s,...a,ref:e}):i.jsx(INe,{side:s,...a,ref:e})})}),INe=N.forwardRef((t,e)=>{const r=Z_(Tf,t.__scopeTooltip),n=GM(Tf,t.__scopeTooltip),s=N.useRef(null),a=Et(e,s),[o,l]=N.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:f}=n,m=N.useCallback(()=>{l(null),f(!1)},[f]),g=N.useCallback((x,v)=>{const y=x.currentTarget,w={x:x.clientX,y:x.clientY},_=FNe(w,y.getBoundingClientRect()),A=BNe(w,_),C=UNe(v.getBoundingClientRect()),S=qNe([...A,...C]);l(S),f(!0)},[f]);return N.useEffect(()=>()=>m(),[m]),N.useEffect(()=>{if(c&&d){const x=y=>g(y,d),v=y=>g(y,c);return c.addEventListener("pointerleave",x),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",v)}}},[c,d,g,m]),N.useEffect(()=>{if(o){const x=v=>{const y=v.target,w={x:v.clientX,y:v.clientY},_=c?.contains(y)||d?.contains(y),A=!zNe(w,o);_?m():A&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,d,o,u,m]),i.jsx(mY,{...t,ref:a})}),[MNe,DNe]=Q_(Ug,{isInside:!1}),LNe=VK("TooltipContent"),mY=N.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=Z_(Tf,r),u=J_(r),{onClose:d}=c;return N.useEffect(()=>(document.addEventListener(Gk,d),()=>document.removeEventListener(Gk,d)),[d]),N.useEffect(()=>{if(c.trigger){const f=m=>{m.target?.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),i.jsx(_p,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:i.jsxs(HM,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(LNe,{children:n}),i.jsx(MNe,{scope:r,isInside:!0,children:i.jsx(OSe,{id:c.contentId,role:"tooltip",children:s||n})})]})})});pY.displayName=Tf;var gY="TooltipArrow",$Ne=N.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=J_(r);return DNe(gY,r).isInside?null:i.jsx(WM,{...s,...n,ref:e})});$Ne.displayName=gY;function FNe(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function BNe(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function UNe(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function zNe(t,e){const{x:r,y:n}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,d=l.y,f=c.x,m=c.y;d>n!=m>n&&r<(f-u)*(n-d)/(m-d)+u&&(s=!s)}return s}function qNe(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),VNe(e)}function VNe(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const a=r[r.length-1],o=r[r.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var HNe=dY,WNe=hY,GNe=fY,vY=pY;const yY=HNe,KNe=WNe,XNe=GNe,xY=N.forwardRef(({className:t,sideOffset:e=4,...r},n)=>i.jsx(vY,{ref:n,sideOffset:e,className:Ie("z-50 origin-[--radix-tooltip-content-transform-origin] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));xY.displayName=vY.displayName;const YNe=["mousedown","mousemove","keypress","scroll","touchstart","click","wheel"];function QNe({timeout:t,onIdle:e,events:r=YNe,throttle:n=500}){const s=N.useRef(null),a=N.useRef(Date.now()),o=N.useRef(!1),l=N.useCallback(()=>{const d=Date.now();d-a.current<n||(a.current=d,o.current=!1,s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{o.current||(o.current=!0,console.log("🕐 [IDLE TIMER] User became idle after 30 minutes of inactivity"),e())},t))},[t,e,n]),c=N.useCallback(()=>{s.current&&(clearTimeout(s.current),s.current=null),o.current=!1},[]),u=N.useCallback(()=>{l()},[l]);return N.useEffect(()=>{let d=0;const f=()=>{const m=Date.now();m-d>=n&&(d=m,l())};return r.forEach(m=>{document.addEventListener(m,f,!0)}),l(),()=>{r.forEach(m=>{document.removeEventListener(m,f,!0)}),c()}},[r,l,c,n]),N.useEffect(()=>{const d=()=>{document.visibilityState==="visible"?l():console.log("🔍 [IDLE TIMER] Tab became hidden, timer continues")};return document.addEventListener("visibilitychange",d),()=>{document.removeEventListener("visibilitychange",d)}},[l]),{isIdle:o.current,resetTimer:l,stopTimer:c,startTimer:u}}var lE="focusScope.autoFocusOnMount",cE="focusScope.autoFocusOnUnmount",w5={bubbles:!1,cancelable:!0},JNe="FocusScope",eS=N.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=N.useState(null),u=cn(s),d=cn(a),f=N.useRef(null),m=Et(e,v=>c(v)),g=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(n){let v=function(A){if(g.paused||!l)return;const C=A.target;l.contains(C)?f.current=C:ic(f.current,{select:!0})},y=function(A){if(g.paused||!l)return;const C=A.relatedTarget;C!==null&&(l.contains(C)||ic(f.current,{select:!0}))},w=function(A){if(document.activeElement===document.body)for(const S of A)S.removedNodes.length>0&&ic(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const _=new MutationObserver(w);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),_.disconnect()}}},[n,l,g.paused]),N.useEffect(()=>{if(l){S5.add(g);const v=document.activeElement;if(!l.contains(v)){const w=new CustomEvent(lE,w5);l.addEventListener(lE,u),l.dispatchEvent(w),w.defaultPrevented||(ZNe(sEe(bY(l)),{select:!0}),document.activeElement===v&&ic(l))}return()=>{l.removeEventListener(lE,u),setTimeout(()=>{const w=new CustomEvent(cE,w5);l.addEventListener(cE,d),l.dispatchEvent(w),w.defaultPrevented||ic(v??document.body,{select:!0}),l.removeEventListener(cE,d),S5.remove(g)},0)}}},[l,u,d,g]);const x=N.useCallback(v=>{if(!r&&!n||g.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,w=document.activeElement;if(y&&w){const _=v.currentTarget,[A,C]=eEe(_);A&&C?!v.shiftKey&&w===C?(v.preventDefault(),r&&ic(A,{select:!0})):v.shiftKey&&w===A&&(v.preventDefault(),r&&ic(C,{select:!0})):w===_&&v.preventDefault()}},[r,n,g.paused]);return i.jsx(He.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});eS.displayName=JNe;function ZNe(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(ic(n,{select:e}),document.activeElement!==r)return}function eEe(t){const e=bY(t),r=_5(e,t),n=_5(e.reverse(),t);return[r,n]}function bY(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function _5(t,e){for(const r of t)if(!tEe(r,{upTo:e}))return r}function tEe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function rEe(t){return t instanceof HTMLInputElement&&"select"in t}function ic(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&rEe(t)&&e&&t.select()}}var S5=nEe();function nEe(){let t=[];return{add(e){const r=t[0];e!==r&&r?.pause(),t=j5(t,e),t.unshift(e)},remove(e){t=j5(t,e),t[0]?.resume()}}}function j5(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function sEe(t){return t.filter(e=>e.tagName!=="A")}var uE=0;function KM(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??A5()),document.body.insertAdjacentElement("beforeend",t[1]??A5()),uE++,()=>{uE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),uE--}},[])}function A5(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var lo=function(){return lo=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lo.apply(this,arguments)};function wY(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function aEe(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}var J0="right-scroll-bar-position",Z0="width-before-scroll-bar",iEe="with-scroll-bars-hidden",oEe="--removed-body-scroll-bar-size";function dE(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function lEe(t,e){var r=N.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var cEe=typeof window<"u"?N.useLayoutEffect:N.useEffect,N5=new WeakMap;function uEe(t,e){var r=lEe(null,function(n){return t.forEach(function(s){return dE(s,n)})});return cEe(function(){var n=N5.get(r);if(n){var s=new Set(n),a=new Set(t),o=r.current;s.forEach(function(l){a.has(l)||dE(l,null)}),a.forEach(function(l){s.has(l)||dE(l,o)})}N5.set(r,t)},[t]),r}function dEe(t){return t}function hEe(t,e){e===void 0&&(e=dEe);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var o=e(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return s}function fEe(t){t===void 0&&(t={});var e=hEe(null);return e.options=lo({async:!0,ssr:!1},t),e}var _Y=function(t){var e=t.sideCar,r=wY(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return N.createElement(n,lo({},r))};_Y.isSideCarExport=!0;function pEe(t,e){return t.useMedium(e),_Y}var SY=fEe(),hE=function(){},tS=N.forwardRef(function(t,e){var r=N.useRef(null),n=N.useState({onScrollCapture:hE,onWheelCapture:hE,onTouchMoveCapture:hE}),s=n[0],a=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,m=t.sideCar,g=t.noRelative,x=t.noIsolation,v=t.inert,y=t.allowPinchZoom,w=t.as,_=w===void 0?"div":w,A=t.gapMode,C=wY(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,E=uEe([r,e]),P=lo(lo({},C),s);return N.createElement(N.Fragment,null,d&&N.createElement(S,{sideCar:SY,removeScrollBar:u,shards:f,noRelative:g,noIsolation:x,inert:v,setCallbacks:a,allowPinchZoom:!!y,lockRef:r,gapMode:A}),o?N.cloneElement(N.Children.only(l),lo(lo({},P),{ref:E})):N.createElement(_,lo({},P,{className:c,ref:E}),l))});tS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};tS.classNames={fullWidth:Z0,zeroRight:J0};var mEe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gEe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=mEe();return e&&t.setAttribute("nonce",e),t}function vEe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function yEe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var xEe=function(){var t=0,e=null;return{add:function(r){t==0&&(e=gEe())&&(vEe(e,r),yEe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},bEe=function(){var t=xEe();return function(e,r){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},jY=function(){var t=bEe(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},wEe={left:0,top:0,right:0,gap:0},fE=function(t){return parseInt(t||"",10)||0},_Ee=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[fE(r),fE(n),fE(s)]},SEe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return wEe;var e=_Ee(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},jEe=jY(),sf="data-scroll-locked",AEe=function(t,e,r,n){var s=t.left,a=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(iEe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(sf,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(J0,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Z0,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(J0," .").concat(J0,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Z0," .").concat(Z0,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(sf,`] {
    `).concat(oEe,": ").concat(l,`px;
  }
`)},E5=function(){var t=parseInt(document.body.getAttribute(sf)||"0",10);return isFinite(t)?t:0},NEe=function(){N.useEffect(function(){return document.body.setAttribute(sf,(E5()+1).toString()),function(){var t=E5()-1;t<=0?document.body.removeAttribute(sf):document.body.setAttribute(sf,t.toString())}},[])},EEe=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;NEe();var a=N.useMemo(function(){return SEe(s)},[s]);return N.createElement(jEe,{styles:AEe(a,!e,s,r?"":"!important")})},Xk=!1;if(typeof window<"u")try{var c0=Object.defineProperty({},"passive",{get:function(){return Xk=!0,!0}});window.addEventListener("test",c0,c0),window.removeEventListener("test",c0,c0)}catch{Xk=!1}var Sh=Xk?{passive:!1}:!1,CEe=function(t){return t.tagName==="TEXTAREA"},AY=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!CEe(t)&&r[e]==="visible")},TEe=function(t){return AY(t,"overflowY")},PEe=function(t){return AY(t,"overflowX")},C5=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=NY(t,n);if(s){var a=EY(t,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},kEe=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},OEe=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},NY=function(t,e){return t==="v"?TEe(e):PEe(e)},EY=function(t,e){return t==="v"?kEe(e):OEe(e)},REe=function(t,e){return t==="h"&&e==="rtl"?-1:1},IEe=function(t,e,r,n,s){var a=REe(t,window.getComputedStyle(e).direction),o=a*n,l=r.target,c=e.contains(l),u=!1,d=o>0,f=0,m=0;do{if(!l)break;var g=EY(t,l),x=g[0],v=g[1],y=g[2],w=v-y-a*x;(x||w)&&NY(t,l)&&(f+=w,m+=x);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&Math.abs(f)<1||!d&&Math.abs(m)<1)&&(u=!0),u},u0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},T5=function(t){return[t.deltaX,t.deltaY]},P5=function(t){return t&&"current"in t?t.current:t},MEe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},DEe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},LEe=0,jh=[];function $Ee(t){var e=N.useRef([]),r=N.useRef([0,0]),n=N.useRef(),s=N.useState(LEe++)[0],a=N.useState(jY)[0],o=N.useRef(t);N.useEffect(function(){o.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=aEe([t.lockRef.current],(t.shards||[]).map(P5),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=N.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var w=u0(v),_=r.current,A="deltaX"in v?v.deltaX:_[0]-w[0],C="deltaY"in v?v.deltaY:_[1]-w[1],S,E=v.target,P=Math.abs(A)>Math.abs(C)?"h":"v";if("touches"in v&&P==="h"&&E.type==="range")return!1;var R=C5(P,E);if(!R)return!0;if(R?S=P:(S=P==="v"?"h":"v",R=C5(P,E)),!R)return!1;if(!n.current&&"changedTouches"in v&&(A||C)&&(n.current=S),!S)return!0;var O=n.current||S;return IEe(O,y,v,O==="h"?A:C)},[]),c=N.useCallback(function(v){var y=v;if(!(!jh.length||jh[jh.length-1]!==a)){var w="deltaY"in y?T5(y):u0(y),_=e.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&MEe(S.delta,w)})[0];if(_&&_.should){y.cancelable&&y.preventDefault();return}if(!_){var A=(o.current.shards||[]).map(P5).filter(Boolean).filter(function(S){return S.contains(y.target)}),C=A.length>0?l(y,A[0]):!o.current.noIsolation;C&&y.cancelable&&y.preventDefault()}}},[]),u=N.useCallback(function(v,y,w,_){var A={name:v,delta:y,target:w,should:_,shadowParent:FEe(w)};e.current.push(A),setTimeout(function(){e.current=e.current.filter(function(C){return C!==A})},1)},[]),d=N.useCallback(function(v){r.current=u0(v),n.current=void 0},[]),f=N.useCallback(function(v){u(v.type,T5(v),v.target,l(v,t.lockRef.current))},[]),m=N.useCallback(function(v){u(v.type,u0(v),v.target,l(v,t.lockRef.current))},[]);N.useEffect(function(){return jh.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Sh),document.addEventListener("touchmove",c,Sh),document.addEventListener("touchstart",d,Sh),function(){jh=jh.filter(function(v){return v!==a}),document.removeEventListener("wheel",c,Sh),document.removeEventListener("touchmove",c,Sh),document.removeEventListener("touchstart",d,Sh)}},[]);var g=t.removeScrollBar,x=t.inert;return N.createElement(N.Fragment,null,x?N.createElement(a,{styles:DEe(s)}):null,g?N.createElement(EEe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function FEe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const BEe=pEe(SY,$Ee);var rS=N.forwardRef(function(t,e){return N.createElement(tS,lo({},t,{ref:e,sideCar:BEe}))});rS.classNames=tS.classNames;var UEe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ah=new WeakMap,d0=new WeakMap,h0={},pE=0,CY=function(t){return t&&(t.host||CY(t.parentNode))},zEe=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=CY(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},qEe=function(t,e,r,n){var s=zEe(e,Array.isArray(t)?t:[t]);h0[r]||(h0[r]=new WeakMap);var a=h0[r],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var g=m.getAttribute(n),x=g!==null&&g!=="false",v=(Ah.get(m)||0)+1,y=(a.get(m)||0)+1;Ah.set(m,v),a.set(m,y),o.push(m),v===1&&x&&d0.set(m,!0),y===1&&m.setAttribute(r,"true"),x||m.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return d(e),l.clear(),pE++,function(){o.forEach(function(f){var m=Ah.get(f)-1,g=a.get(f)-1;Ah.set(f,m),a.set(f,g),m||(d0.has(f)||f.removeAttribute(n),d0.delete(f)),g||f.removeAttribute(r)}),pE--,pE||(Ah=new WeakMap,Ah=new WeakMap,d0=new WeakMap,h0={})}},XM=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=UEe(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),qEe(n,s,r,"aria-hidden")):function(){return null}},nS="Dialog",[TY,PY]=cs(nS),[VEe,Hi]=TY(nS),kY=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=N.useRef(null),c=N.useRef(null),[u,d]=Ma({prop:n,defaultProp:s??!1,onChange:a,caller:nS});return i.jsx(VEe,{scope:e,triggerRef:l,contentRef:c,contentId:ka(),titleId:ka(),descriptionId:ka(),open:u,onOpenChange:d,onOpenToggle:N.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};kY.displayName=nS;var OY="DialogTrigger",RY=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Hi(OY,r),a=Et(e,s.triggerRef);return i.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":JM(s.open),...n,ref:a,onClick:Le(t.onClick,s.onOpenToggle)})});RY.displayName=OY;var YM="DialogPortal",[HEe,IY]=TY(YM,{forceMount:void 0}),MY=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,a=Hi(YM,e);return i.jsx(HEe,{scope:e,forceMount:r,children:N.Children.map(n,o=>i.jsx(xs,{present:r||a.open,children:i.jsx(ry,{asChild:!0,container:s,children:o})}))})};MY.displayName=YM;var Kb="DialogOverlay",DY=N.forwardRef((t,e)=>{const r=IY(Kb,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,a=Hi(Kb,t.__scopeDialog);return a.modal?i.jsx(xs,{present:n||a.open,children:i.jsx(GEe,{...s,ref:e})}):null});DY.displayName=Kb;var WEe=od("DialogOverlay.RemoveScroll"),GEe=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Hi(Kb,r);return i.jsx(rS,{as:WEe,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(He.div,{"data-state":JM(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),cd="DialogContent",LY=N.forwardRef((t,e)=>{const r=IY(cd,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,a=Hi(cd,t.__scopeDialog);return i.jsx(xs,{present:n||a.open,children:a.modal?i.jsx(KEe,{...s,ref:e}):i.jsx(XEe,{...s,ref:e})})});LY.displayName=cd;var KEe=N.forwardRef((t,e)=>{const r=Hi(cd,t.__scopeDialog),n=N.useRef(null),s=Et(e,r.contentRef,n);return N.useEffect(()=>{const a=n.current;if(a)return XM(a)},[]),i.jsx($Y,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(t.onCloseAutoFocus,a=>{a.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Le(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Le(t.onFocusOutside,a=>a.preventDefault())})}),XEe=N.forwardRef((t,e)=>{const r=Hi(cd,t.__scopeDialog),n=N.useRef(!1),s=N.useRef(!1);return i.jsx($Y,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||r.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;r.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),$Y=N.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=Hi(cd,r),c=N.useRef(null),u=Et(e,c);return KM(),i.jsxs(i.Fragment,{children:[i.jsx(eS,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(_p,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":JM(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(QEe,{titleId:l.titleId}),i.jsx(ZEe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),QM="DialogTitle",FY=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Hi(QM,r);return i.jsx(He.h2,{id:s.titleId,...n,ref:e})});FY.displayName=QM;var BY="DialogDescription",UY=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Hi(BY,r);return i.jsx(He.p,{id:s.descriptionId,...n,ref:e})});UY.displayName=BY;var zY="DialogClose",qY=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Hi(zY,r);return i.jsx(He.button,{type:"button",...n,ref:e,onClick:Le(t.onClick,()=>s.onOpenChange(!1))})});qY.displayName=zY;function JM(t){return t?"open":"closed"}var VY="DialogTitleWarning",[YEe,HY]=lSe(VY,{contentName:cd,titleName:QM,docsSlug:"dialog"}),QEe=({titleId:t})=>{const e=HY(VY),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},JEe="DialogDescriptionWarning",ZEe=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HY(JEe).contentName}}.`;return N.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},WY=kY,GY=RY,KY=MY,ZM=DY,e2=LY,t2=FY,r2=UY,n2=qY;const mn=WY,XY=GY,e1e=KY,YY=N.forwardRef(({className:t,...e},r)=>i.jsx(ZM,{ref:r,className:Ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));YY.displayName=ZM.displayName;const tn=N.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(e1e,{children:[i.jsx(YY,{}),i.jsxs(e2,{ref:n,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,i.jsxs(n2,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Vi,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tn.displayName=e2.displayName;const rn=({className:t,...e})=>i.jsx("div",{className:Ie("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});rn.displayName="DialogHeader";const ca=({className:t,...e})=>i.jsx("div",{className:Ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ca.displayName="DialogFooter";const nn=N.forwardRef(({className:t,...e},r)=>i.jsx(t2,{ref:r,className:Ie("text-lg font-semibold leading-none tracking-tight",t),...e}));nn.displayName=t2.displayName;const qs=N.forwardRef(({className:t,...e},r)=>i.jsx(r2,{ref:r,className:Ie("text-sm text-muted-foreground",t),...e}));qs.displayName=r2.displayName;const sS=sy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"hover:bg-primary/90 bg-primary text-primary-foreground",destructive:"hover:bg-destructive/90 bg-destructive text-destructive-foreground",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"hover:bg-secondary/80 bg-secondary text-secondary-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),se=N.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},a)=>{const o=n?zK:"button";return i.jsx(o,{className:Ie(sS({variant:e,size:r,className:t})),ref:a,...s})});se.displayName="Button";function t1e({isOpen:t,onContinueSession:e,onLogout:r,warningTimeoutSeconds:n=120}){const[s,a]=N.useState(n);N.useEffect(()=>{if(t){a(n);const l=setInterval(()=>{a(c=>c<=1?(clearInterval(l),r(),0):c-1)},1e3);return()=>clearInterval(l)}},[t,n,r]);const o=l=>{const c=Math.floor(l/60),u=l%60;return`${c}:${u.toString().padStart(2,"0")}`};return i.jsx(mn,{open:t,onOpenChange:()=>{},children:i.jsxs(tn,{className:"max-w-md",children:[i.jsx(rn,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-amber-100 dark:bg-amber-900/20",children:i.jsx(jr,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx(nn,{className:"text-lg font-semibold",children:"Sessão Expirando"}),i.jsx(qs,{className:"text-sm text-muted-foreground",children:"Sua sessão será encerrada devido à inatividade"})]})]})}),i.jsxs("div",{className:"py-4",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-lg bg-muted p-4",children:[i.jsx(_n,{className:"h-5 w-5 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-lg font-semibold",children:o(s)})]}),i.jsxs("p",{className:"mt-3 text-center text-sm text-muted-foreground",children:["Você será deslogado automaticamente em ",o(s),' devido à inatividade. Clique em "Continuar Sessão" para manter-se logado.']})]}),i.jsxs(ca,{className:"gap-2",children:[i.jsx(se,{variant:"outline",onClick:r,className:"flex-1",children:"Sair Agora"}),i.jsx(se,{onClick:e,className:"flex-1",children:"Continuar Sessão"})]})]})})}const QY=N.createContext(void 0);function r1e({children:t}){const[e,r]=N.useState(null),[n,s]=N.useState(null),[a,o]=N.useState(null),[l,c]=N.useState(!0),[u,d]=N.useState(null),[f,m]=N.useState(!1),g=1800*1e3,x=120*1e3,v=g-x,y=N.useCallback(async()=>{console.log("🔐 [IDLE TIMEOUT] User being logged out due to inactivity");try{await tf().auth.signOut(),r(null),s(null),o(null),m(!1),d(null)}catch(P){console.error("Error during idle logout:",P)}},[]),w=N.useCallback(()=>{console.log("⚠️ [IDLE WARNING] Showing inactivity warning to user (2 minutes left)"),m(!0)},[]),_=N.useCallback(()=>{console.log("🔄 [IDLE RESET] User chose to continue session"),m(!1)},[]),{resetTimer:A}=QNe({timeout:v,onIdle:w,throttle:1e3}),C=N.useCallback(async P=>{try{if(P?.user)try{const R=await xt.get("/api/debug/me"),O="data"in R?R.data:R;if(O?.user)console.log("🔐 [AUTH RESTORED] User profile loaded with valid token"),r(O.user),d(null);else throw new Error("Invalid user data received")}catch(R){console.error("Error fetching profile data:",R),d(R),r(null)}else r(null),d(null)}catch(R){console.error("Error checking authentication:",R),d(R),r(null)}finally{c(!1)}},[]),S=N.useCallback(async()=>{try{const P=tf(),{data:R}=await P.auth.getUser();if(R.user){const O=await xt.get("/api/debug/me"),D="data"in O?O.data:O;D?.user&&(r(D.user),d(null))}else r(null),d(null)}catch(P){console.error("Error refetching user:",P),d(P)}},[]);N.useEffect(()=>{const P=tf();P.auth.getSession().then(({data:{session:O}})=>{s(O),o(O?.access_token||null),C(O)});const{data:{subscription:R}}=P.auth.onAuthStateChange(async(O,D)=>{console.log(`🔐 [AUTH EVENT] ${O}`,{hasSession:!!D,tokenLength:D?.access_token?.length}),s(D),o(D?.access_token||null),O==="SIGNED_IN"||O==="TOKEN_REFRESHED"?C(D):O==="SIGNED_OUT"&&(r(null),d(null),c(!1))});return()=>{R?.unsubscribe()}},[C]);const E={user:e,session:n,accessToken:a,isLoading:l,error:u,refetchUser:S,resetIdleTimer:A};return i.jsxs(QY.Provider,{value:E,children:[t,e&&i.jsx(t1e,{isOpen:f,onContinueSession:_,onLogout:y,warningTimeoutSeconds:x/1e3})]})}function $a(){const t=N.useContext(QY);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const JY=N.createContext(void 0);function n1e({children:t}){const[e,r]=N.useState(()=>localStorage.getItem("theme")||"light"),[n,s]=N.useState("light");return N.useEffect(()=>{const a=window.document.documentElement,o=()=>{let l="light";e==="system"?l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":l=e,s(l),a.classList.remove("light","dark"),a.classList.add(l)};if(o(),localStorage.setItem("theme",e),e==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>o();return l.addEventListener("change",c),()=>l.removeEventListener("change",c)}},[e]),i.jsx(JY.Provider,{value:{theme:e,setTheme:r,actualTheme:n},children:t})}function s1e(){const t=N.useContext(JY);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const a1e={"maintenance-mode":!1,"read-only-mode":!1,"novo-dashboard":!1,"pagamento-pix-instant":!1,"relatorios-avancados":!1,"ab-test-onboarding":!1,"nova-api-experimental":!1},ZY=N.createContext(void 0);function i1e({children:t}){const[e,r]=N.useState(a1e),{data:n,isLoading:s,error:a,refetch:o}=nt({queryKey:["/api/features"],queryFn:async()=>{const{api:d}=await Di(async()=>{const{api:m}=await Promise.resolve().then(()=>Dg);return{api:m}},void 0);return(await d.get("/api/features",{requireAuth:!1})).data},refetchInterval:6e4,staleTime:3e4,retry:3,retryDelay:d=>Math.min(1e3*2**d,3e4)});N.useEffect(()=>{n&&typeof n=="object"&&"flags"in n?r(d=>({...d,...n.flags})):n&&typeof n=="object"&&r(d=>({...d,...n}))},[n]);const l=d=>e[d]??!1,c=()=>{o()};N.useEffect(()=>{},[e]),N.useEffect(()=>{e["maintenance-mode"]&&console.warn("⚠️ MODO DE MANUTENÇÃO ATIVO")},[e["maintenance-mode"]]),N.useEffect(()=>{e["read-only-mode"]&&console.warn("⚠️ MODO SOMENTE LEITURA ATIVO")},[e["read-only-mode"]]);const u={flags:e,isLoading:s,error:a,checkFlag:l,refreshFlags:c};return i.jsx(ZY.Provider,{value:u,children:t})}function eQ(){const t=N.useContext(ZY);if(!t)throw new Error("useFeatureFlags deve ser usado dentro de FeatureFlagProvider");return t}function Mh(t){const{flags:e}=eQ();return e[t]??!1}function mE({flag:t,children:e,fallback:r=null}){return Mh(t)?i.jsx(i.Fragment,{children:e}):i.jsx(i.Fragment,{children:r})}class o1e{supabase=BK();mapSupabaseUser(e){return{id:e.id,email:e.email||"",name:e.user_metadata?.name,avatar:e.user_metadata?.avatar_url,createdAt:e.created_at?new Date(e.created_at):void 0}}mapSupabaseSession(e){return{user:this.mapSupabaseUser(e.user),accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:e.expires_at?new Date(e.expires_at*1e3):void 0}}async signIn(e){const{data:r,error:n}=await this.supabase.auth.signInWithPassword({email:e.email,password:e.password});if(n)throw n;if(!r.user||!r.session)throw new Error("Falha na autenticação");const s=this.mapSupabaseUser(r.user),a=this.mapSupabaseSession(r.session);return console.log("[PASSO 1 - LOGIN]",{accessToken:r.session.access_token,tokenLength:r.session.access_token?.length,expiresAt:r.session.expires_at}),{user:s,session:a}}async signOut(){const{error:e}=await this.supabase.auth.signOut();if(e)throw e}async getSession(){const{data:{session:e},error:r}=await this.supabase.auth.getSession();if(r)throw r;return e?this.mapSupabaseSession(e):null}async getCurrentUser(){const{data:{user:e},error:r}=await this.supabase.auth.getUser();if(r)throw r;return e?this.mapSupabaseUser(e):null}onAuthStateChange(e){const{data:r}=this.supabase.auth.onAuthStateChange((n,s)=>{const a=s?.user?this.mapSupabaseUser(s.user):null;e(a)});return{unsubscribe:()=>r?.subscription?.unsubscribe()}}async getAccessToken(){return(await this.getSession())?.accessToken||null}}const tQ={provider:"supabase",options:{supabaseUrl:"https://dvglgxrvhmtsixaabxha.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR2Z2xneHJ2aG10c2l4YWFieGhhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2Njk0NzMsImV4cCI6MjA2ODI0NTQ3M30.5EswQJMAEh587sPR-fVvGuwZn7hRl7T5GUgDWrEdvnY"}};function l1e(t=tQ){switch(t.provider){case"supabase":return new o1e;case"firebase":throw new Error("Firebase provider não implementado ainda");case"auth0":throw new Error("Auth0 provider não implementado ainda");case"custom":throw new Error("Custom provider não implementado ainda");default:throw new Error(`Provedor de autenticação desconhecido: ${t.provider}`)}}let c1e=tQ,gE=null;function u1e(){return gE||(gE=l1e(c1e)),gE}class d1e{provider;constructor(e){this.provider=e||u1e()}async signIn(e){return this.provider.signIn(e)}async signOut(){return this.provider.signOut()}async getSession(){return this.provider.getSession()}async getCurrentUser(){return this.provider.getCurrentUser()}onAuthStateChange(e){return this.provider.onAuthStateChange(e)}async getAccessToken(){return this.provider.getAccessToken()}}let vE=null;function h1e(){return vE||(vE=new d1e),vE}const s2=h1e();async function f1e(t,e){const r=await s2.signIn({email:t,password:e});return{user:r.user,session:r.session}}async function p1e(){return s2.signOut()}function m1e(t){return s2.onAuthStateChange(t)}function Rr({children:t}){const[e,r]=N.useState(null),[n,s]=N.useState(!0),[,a]=qi();return N.useEffect(()=>{const o=m1e(l=>{r(l),s(!1),l||a("/login")});return()=>o.unsubscribe()},[a]),n?i.jsx("div",{className:"flex min-h-screen items-center justify-center",children:i.jsx(un,{className:"h-8 w-8 animate-spin text-primary"})}):e?i.jsx(i.Fragment,{children:t}):null}const Fe=N.forwardRef(({className:t,type:e,...r},n)=>i.jsx("input",{type:e,className:Ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Fe.displayName="Input";var g1e="Label",rQ=N.forwardRef((t,e)=>i.jsx(He.label,{...t,ref:e,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));rQ.displayName=g1e;var nQ=rQ;const v1e=sy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ue=N.forwardRef(({className:t,...e},r)=>i.jsx(nQ,{ref:r,className:Ie(v1e(),t),...e}));ue.displayName=nQ.displayName;var oy=t=>t.type==="checkbox",Ou=t=>t instanceof Date,Ds=t=>t==null;const sQ=t=>typeof t=="object";var Sn=t=>!Ds(t)&&!Array.isArray(t)&&sQ(t)&&!Ou(t),aQ=t=>Sn(t)&&t.target?oy(t.target)?t.target.checked:t.target.value:t,y1e=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,iQ=(t,e)=>t.has(y1e(e)),x1e=t=>{const e=t.constructor&&t.constructor.prototype;return Sn(e)&&e.hasOwnProperty("isPrototypeOf")},a2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Wn(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(a2&&(t instanceof Blob||n))&&(r||Sn(t)))if(e=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!x1e(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Wn(t[s]));else return t;return e}var aS=t=>/^\w*$/.test(t),wn=t=>t===void 0,i2=t=>Array.isArray(t)?t.filter(Boolean):[],o2=t=>i2(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(t,e,r)=>{if(!e||!Sn(t))return r;const n=(aS(e)?[e]:o2(e)).reduce((s,a)=>Ds(s)?s:s[a],t);return wn(n)||n===t?wn(t[e])?r:t[e]:n},Sa=t=>typeof t=="boolean",_r=(t,e,r)=>{let n=-1;const s=aS(e)?[e]:o2(e),a=s.length,o=a-1;for(;++n<a;){const l=s[n];let c=r;if(n!==o){const u=t[l];c=Sn(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const Xb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Pi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Vo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},l2=G.createContext(null);l2.displayName="HookFormContext";const iS=()=>G.useContext(l2),b1e=t=>{const{children:e,...r}=t;return G.createElement(l2.Provider,{value:r},e)};var oQ=(t,e,r,n=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Pi.all&&(e._proxyFormState[o]=!n||Pi.all),r&&(r[o]=!0),t[o]}});return s};const c2=typeof window<"u"?G.useLayoutEffect:G.useEffect;function w1e(t){const e=iS(),{control:r=e.control,disabled:n,name:s,exact:a}=t||{},[o,l]=G.useState(r._formState),c=G.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return c2(()=>r._subscribe({name:s,formState:c.current,exact:a,callback:u=>{!n&&l({...r._formState,...u})}}),[s,n,a]),G.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),G.useMemo(()=>oQ(o,r,c.current,!1),[o,r])}var po=t=>typeof t=="string",lQ=(t,e,r,n,s)=>po(t)?(n&&e.watch.add(t),Be(r,t,s)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),Be(r,a))):(n&&(e.watchAll=!0),r),Yk=t=>Ds(t)||!sQ(t);function sl(t,e,r=new WeakSet){if(Yk(t)||Yk(e))return t===e;if(Ou(t)&&Ou(e))return t.getTime()===e.getTime();const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const a of n){const o=t[a];if(!s.includes(a))return!1;if(a!=="ref"){const l=e[a];if(Ou(o)&&Ou(l)||Sn(o)&&Sn(l)||Array.isArray(o)&&Array.isArray(l)?!sl(o,l,r):o!==l)return!1}}return!0}function _1e(t){const e=iS(),{control:r=e.control,name:n,defaultValue:s,disabled:a,exact:o,compute:l}=t||{},c=G.useRef(s),u=G.useRef(l),d=G.useRef(void 0);u.current=l;const f=G.useMemo(()=>r._getWatch(n,c.current),[r,n]),[m,g]=G.useState(u.current?u.current(f):f);return c2(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{if(!a){const v=lQ(n,r._names,x.values||r._formValues,!1,c.current);if(u.current){const y=u.current(v);sl(y,d.current)||(g(y),d.current=y)}else g(v)}}}),[r,a,n,o]),G.useEffect(()=>r._removeUnmounted()),m}function S1e(t){const e=iS(),{name:r,disabled:n,control:s=e.control,shouldUnregister:a,defaultValue:o}=t,l=iQ(s._names.array,r),c=G.useMemo(()=>Be(s._formValues,r,Be(s._defaultValues,r,o)),[s,r,o]),u=_1e({control:s,name:r,defaultValue:c,exact:!0}),d=w1e({control:s,name:r,exact:!0}),f=G.useRef(t),m=G.useRef(s.register(r,{...t.rules,value:u,...Sa(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=G.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Be(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!Be(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Be(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Be(d.validatingFields,r)},error:{enumerable:!0,get:()=>Be(d.errors,r)}}),[d,r]),x=G.useCallback(_=>m.current.onChange({target:{value:aQ(_),name:r},type:Xb.CHANGE}),[r]),v=G.useCallback(()=>m.current.onBlur({target:{value:Be(s._formValues,r),name:r},type:Xb.BLUR}),[r,s._formValues]),y=G.useCallback(_=>{const A=Be(s._fields,r);A&&_&&(A._f.ref={focus:()=>_.focus&&_.focus(),select:()=>_.select&&_.select(),setCustomValidity:C=>_.setCustomValidity(C),reportValidity:()=>_.reportValidity()})},[s._fields,r]),w=G.useMemo(()=>({name:r,value:u,...Sa(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:x,onBlur:v,ref:y}),[r,n,d.disabled,x,v,y,u]);return G.useEffect(()=>{const _=s._options.shouldUnregister||a;s.register(r,{...f.current.rules,...Sa(f.current.disabled)?{disabled:f.current.disabled}:{}});const A=(C,S)=>{const E=Be(s._fields,C);E&&E._f&&(E._f.mount=S)};if(A(r,!0),_){const C=Wn(Be(s._options.defaultValues,r));_r(s._defaultValues,r,C),wn(Be(s._formValues,r))&&_r(s._formValues,r,C)}return!l&&s.register(r),()=>{(l?_&&!s._state.action:_)?s.unregister(r):A(r,!1)}},[r,s,l,a]),G.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),G.useMemo(()=>({field:w,formState:d,fieldState:g}),[w,d,g])}const Li=t=>t.render(S1e(t));var cQ=(t,e,r,n,s)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:s||!0}}:{},ug=t=>Array.isArray(t)?t:[t],k5=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},sa=t=>Sn(t)&&!Object.keys(t).length,u2=t=>t.type==="file",ki=t=>typeof t=="function",Yb=t=>{if(!a2)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},uQ=t=>t.type==="select-multiple",d2=t=>t.type==="radio",j1e=t=>d2(t)||oy(t),yE=t=>Yb(t)&&t.isConnected;function A1e(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=wn(t)?n++:t[e[n++]];return t}function N1e(t){for(const e in t)if(t.hasOwnProperty(e)&&!wn(t[e]))return!1;return!0}function Cn(t,e){const r=Array.isArray(e)?e:aS(e)?[e]:o2(e),n=r.length===1?t:A1e(t,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(Sn(n)&&sa(n)||Array.isArray(n)&&N1e(n))&&Cn(t,r.slice(0,-1)),t}var dQ=t=>{for(const e in t)if(ki(t[e]))return!0;return!1};function Qb(t,e={}){const r=Array.isArray(t);if(Sn(t)||r)for(const n in t)Array.isArray(t[n])||Sn(t[n])&&!dQ(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Qb(t[n],e[n])):Ds(t[n])||(e[n]=!0);return e}function hQ(t,e,r){const n=Array.isArray(t);if(Sn(t)||n)for(const s in t)Array.isArray(t[s])||Sn(t[s])&&!dQ(t[s])?wn(e)||Yk(r[s])?r[s]=Array.isArray(t[s])?Qb(t[s],[]):{...Qb(t[s])}:hQ(t[s],Ds(e)?{}:e[s],r[s]):r[s]=!sl(t[s],e[s]);return r}var Am=(t,e)=>hQ(t,e,Qb(e));const O5={value:!1,isValid:!1},R5={value:!0,isValid:!0};var fQ=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!wn(t[0].attributes.value)?wn(t[0].value)||t[0].value===""?R5:{value:t[0].value,isValid:!0}:R5:O5}return O5},pQ=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>wn(t)?t:e?t===""?NaN:t&&+t:r&&po(t)?new Date(t):n?n(t):t;const I5={isValid:!1,value:null};var mQ=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,I5):I5;function M5(t){const e=t.ref;return u2(e)?e.files:d2(e)?mQ(t.refs).value:uQ(e)?[...e.selectedOptions].map(({value:r})=>r):oy(e)?fQ(t.refs).value:pQ(wn(e.value)?t.ref.value:e.value,t)}var E1e=(t,e,r,n)=>{const s={};for(const a of t){const o=Be(e,a);o&&_r(s,a,o._f)}return{criteriaMode:r,names:[...t],fields:s,shouldUseNativeValidation:n}},Jb=t=>t instanceof RegExp,Nm=t=>wn(t)?t:Jb(t)?t.source:Sn(t)?Jb(t.value)?t.value.source:t.value:t,D5=t=>({isOnSubmit:!t||t===Pi.onSubmit,isOnBlur:t===Pi.onBlur,isOnChange:t===Pi.onChange,isOnAll:t===Pi.all,isOnTouch:t===Pi.onTouched});const L5="AsyncFunction";var C1e=t=>!!t&&!!t.validate&&!!(ki(t.validate)&&t.validate.constructor.name===L5||Sn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===L5)),T1e=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),$5=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const dg=(t,e,r,n)=>{for(const s of r||Object.keys(t)){const a=Be(t,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(dg(l,e))break}else if(Sn(l)&&dg(l,e))break}}};function F5(t,e,r){const n=Be(t,r);if(n||aS(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),o=Be(e,a),l=Be(t,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};s.pop()}return{name:r}}var P1e=(t,e,r,n)=>{r(t);const{name:s,...a}=t;return sa(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!n||Pi.all))},k1e=(t,e,r)=>!t||!e||t===e||ug(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),O1e=(t,e,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(e||t):(r?n.isOnBlur:s.isOnBlur)?!t:(r?n.isOnChange:s.isOnChange)?t:!0,R1e=(t,e)=>!i2(Be(t,e)).length&&Cn(t,e),I1e=(t,e,r)=>{const n=ug(Be(t,r));return _r(n,"root",e[r]),_r(t,r,n),t},eb=t=>po(t);function B5(t,e,r="validate"){if(eb(t)||Array.isArray(t)&&t.every(eb)||Sa(t)&&!t)return{type:r,message:eb(t)?t:"",ref:e}}var Nh=t=>Sn(t)&&!Jb(t)?t:{value:t,message:""},U5=async(t,e,r,n,s,a)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:m,pattern:g,validate:x,name:v,valueAsNumber:y,mount:w}=t._f,_=Be(r,v);if(!w||e.has(v))return{};const A=l?l[0]:o,C=$=>{s&&A.reportValidity&&(A.setCustomValidity(Sa($)?"":$||""),A.reportValidity())},S={},E=d2(o),P=oy(o),R=E||P,O=(y||u2(o))&&wn(o.value)&&wn(_)||Yb(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,D=cQ.bind(null,v,n,S),I=($,M,U,H=Vo.maxLength,z=Vo.minLength)=>{const q=$?M:U;S[v]={type:$?H:z,message:q,ref:o,...D($?H:z,q)}};if(a?!Array.isArray(_)||!_.length:c&&(!R&&(O||Ds(_))||Sa(_)&&!_||P&&!fQ(l).isValid||E&&!mQ(l).isValid)){const{value:$,message:M}=eb(c)?{value:!!c,message:c}:Nh(c);if($&&(S[v]={type:Vo.required,message:M,ref:A,...D(Vo.required,M)},!n))return C(M),S}if(!O&&(!Ds(f)||!Ds(m))){let $,M;const U=Nh(m),H=Nh(f);if(!Ds(_)&&!isNaN(_)){const z=o.valueAsNumber||_&&+_;Ds(U.value)||($=z>U.value),Ds(H.value)||(M=z<H.value)}else{const z=o.valueAsDate||new Date(_),q=B=>new Date(new Date().toDateString()+" "+B),V=o.type=="time",W=o.type=="week";po(U.value)&&_&&($=V?q(_)>q(U.value):W?_>U.value:z>new Date(U.value)),po(H.value)&&_&&(M=V?q(_)<q(H.value):W?_<H.value:z<new Date(H.value))}if(($||M)&&(I(!!$,U.message,H.message,Vo.max,Vo.min),!n))return C(S[v].message),S}if((u||d)&&!O&&(po(_)||a&&Array.isArray(_))){const $=Nh(u),M=Nh(d),U=!Ds($.value)&&_.length>+$.value,H=!Ds(M.value)&&_.length<+M.value;if((U||H)&&(I(U,$.message,M.message),!n))return C(S[v].message),S}if(g&&!O&&po(_)){const{value:$,message:M}=Nh(g);if(Jb($)&&!_.match($)&&(S[v]={type:Vo.pattern,message:M,ref:o,...D(Vo.pattern,M)},!n))return C(M),S}if(x){if(ki(x)){const $=await x(_,r),M=B5($,A);if(M&&(S[v]={...M,...D(Vo.validate,M.message)},!n))return C(M.message),S}else if(Sn(x)){let $={};for(const M in x){if(!sa($)&&!n)break;const U=B5(await x[M](_,r),A,M);U&&($={...U,...D(M,U.message)},C(U.message),n&&(S[v]=$))}if(!sa($)&&(S[v]={ref:A,...$},!n))return S}}return C(!0),S};const M1e={mode:Pi.onSubmit,reValidateMode:Pi.onChange,shouldFocusError:!0};function D1e(t={}){let e={...M1e,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ki(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},s=Sn(e.defaultValues)||Sn(e.values)?Wn(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Wn(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const m={array:k5(),state:k5()},g=e.criteriaMode===Pi.all,x=X=>ae=>{clearTimeout(u),u=setTimeout(X,ae)},v=async X=>{if(!e.disabled&&(d.isValid||f.isValid||X)){const ae=e.resolver?sa((await P()).errors):await O(n,!0);ae!==r.isValid&&m.state.next({isValid:ae})}},y=(X,ae)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((X||Array.from(l.mount)).forEach(ce=>{ce&&(ae?_r(r.validatingFields,ce,ae):Cn(r.validatingFields,ce))}),m.state.next({validatingFields:r.validatingFields,isValidating:!sa(r.validatingFields)}))},w=(X,ae=[],ce,Ce,K=!0,we=!0)=>{if(Ce&&ce&&!e.disabled){if(o.action=!0,we&&Array.isArray(Be(n,X))){const Ue=ce(Be(n,X),Ce.argA,Ce.argB);K&&_r(n,X,Ue)}if(we&&Array.isArray(Be(r.errors,X))){const Ue=ce(Be(r.errors,X),Ce.argA,Ce.argB);K&&_r(r.errors,X,Ue),R1e(r.errors,X)}if((d.touchedFields||f.touchedFields)&&we&&Array.isArray(Be(r.touchedFields,X))){const Ue=ce(Be(r.touchedFields,X),Ce.argA,Ce.argB);K&&_r(r.touchedFields,X,Ue)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Am(s,a)),m.state.next({name:X,isDirty:I(X,ae),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else _r(a,X,ae)},_=(X,ae)=>{_r(r.errors,X,ae),m.state.next({errors:r.errors})},A=X=>{r.errors=X,m.state.next({errors:r.errors,isValid:!1})},C=(X,ae,ce,Ce)=>{const K=Be(n,X);if(K){const we=Be(a,X,wn(ce)?Be(s,X):ce);wn(we)||Ce&&Ce.defaultChecked||ae?_r(a,X,ae?we:M5(K._f)):U(X,we),o.mount&&v()}},S=(X,ae,ce,Ce,K)=>{let we=!1,Ue=!1;const mt={name:X};if(!e.disabled){if(!ce||Ce){(d.isDirty||f.isDirty)&&(Ue=r.isDirty,r.isDirty=mt.isDirty=I(),we=Ue!==mt.isDirty);const gt=sl(Be(s,X),ae);Ue=!!Be(r.dirtyFields,X),gt?Cn(r.dirtyFields,X):_r(r.dirtyFields,X,!0),mt.dirtyFields=r.dirtyFields,we=we||(d.dirtyFields||f.dirtyFields)&&Ue!==!gt}if(ce){const gt=Be(r.touchedFields,X);gt||(_r(r.touchedFields,X,ce),mt.touchedFields=r.touchedFields,we=we||(d.touchedFields||f.touchedFields)&&gt!==ce)}we&&K&&m.state.next(mt)}return we?mt:{}},E=(X,ae,ce,Ce)=>{const K=Be(r.errors,X),we=(d.isValid||f.isValid)&&Sa(ae)&&r.isValid!==ae;if(e.delayError&&ce?(c=x(()=>_(X,ce)),c(e.delayError)):(clearTimeout(u),c=null,ce?_r(r.errors,X,ce):Cn(r.errors,X)),(ce?!sl(K,ce):K)||!sa(Ce)||we){const Ue={...Ce,...we&&Sa(ae)?{isValid:ae}:{},errors:r.errors,name:X};r={...r,...Ue},m.state.next(Ue)}},P=async X=>{y(X,!0);const ae=await e.resolver(a,e.context,E1e(X||l.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return y(X),ae},R=async X=>{const{errors:ae}=await P(X);if(X)for(const ce of X){const Ce=Be(ae,ce);Ce?_r(r.errors,ce,Ce):Cn(r.errors,ce)}else r.errors=ae;return ae},O=async(X,ae,ce={valid:!0})=>{for(const Ce in X){const K=X[Ce];if(K){const{_f:we,...Ue}=K;if(we){const mt=l.array.has(we.name),gt=K._f&&C1e(K._f);gt&&d.validatingFields&&y([Ce],!0);const ge=await U5(K,l.disabled,a,g,e.shouldUseNativeValidation&&!ae,mt);if(gt&&d.validatingFields&&y([Ce]),ge[we.name]&&(ce.valid=!1,ae))break;!ae&&(Be(ge,we.name)?mt?I1e(r.errors,ge,we.name):_r(r.errors,we.name,ge[we.name]):Cn(r.errors,we.name))}!sa(Ue)&&await O(Ue,ae,ce)}}return ce.valid},D=()=>{for(const X of l.unMount){const ae=Be(n,X);ae&&(ae._f.refs?ae._f.refs.every(ce=>!yE(ce)):!yE(ae._f.ref))&&ye(X)}l.unMount=new Set},I=(X,ae)=>!e.disabled&&(X&&ae&&_r(a,X,ae),!sl(B(),s)),$=(X,ae,ce)=>lQ(X,l,{...o.mount?a:wn(ae)?s:po(X)?{[X]:ae}:ae},ce,ae),M=X=>i2(Be(o.mount?a:s,X,e.shouldUnregister?Be(s,X,[]):[])),U=(X,ae,ce={})=>{const Ce=Be(n,X);let K=ae;if(Ce){const we=Ce._f;we&&(!we.disabled&&_r(a,X,pQ(ae,we)),K=Yb(we.ref)&&Ds(ae)?"":ae,uQ(we.ref)?[...we.ref.options].forEach(Ue=>Ue.selected=K.includes(Ue.value)):we.refs?oy(we.ref)?we.refs.forEach(Ue=>{(!Ue.defaultChecked||!Ue.disabled)&&(Array.isArray(K)?Ue.checked=!!K.find(mt=>mt===Ue.value):Ue.checked=K===Ue.value||!!K)}):we.refs.forEach(Ue=>Ue.checked=Ue.value===K):u2(we.ref)?we.ref.value="":(we.ref.value=K,we.ref.type||m.state.next({name:X,values:Wn(a)})))}(ce.shouldDirty||ce.shouldTouch)&&S(X,K,ce.shouldTouch,ce.shouldDirty,!0),ce.shouldValidate&&W(X)},H=(X,ae,ce)=>{for(const Ce in ae){if(!ae.hasOwnProperty(Ce))return;const K=ae[Ce],we=X+"."+Ce,Ue=Be(n,we);(l.array.has(X)||Sn(K)||Ue&&!Ue._f)&&!Ou(K)?H(we,K,ce):U(we,K,ce)}},z=(X,ae,ce={})=>{const Ce=Be(n,X),K=l.array.has(X),we=Wn(ae);_r(a,X,we),K?(m.array.next({name:X,values:Wn(a)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&ce.shouldDirty&&m.state.next({name:X,dirtyFields:Am(s,a),isDirty:I(X,we)})):Ce&&!Ce._f&&!Ds(we)?H(X,we,ce):U(X,we,ce),$5(X,l)&&m.state.next({...r,name:X}),m.state.next({name:o.mount?X:void 0,values:Wn(a)})},q=async X=>{o.mount=!0;const ae=X.target;let ce=ae.name,Ce=!0;const K=Be(n,ce),we=gt=>{Ce=Number.isNaN(gt)||Ou(gt)&&isNaN(gt.getTime())||sl(gt,Be(a,ce,gt))},Ue=D5(e.mode),mt=D5(e.reValidateMode);if(K){let gt,ge;const er=ae.type?M5(K._f):aQ(X),nr=X.type===Xb.BLUR||X.type===Xb.FOCUS_OUT,Ws=!T1e(K._f)&&!e.resolver&&!Be(r.errors,ce)&&!K._f.deps||O1e(nr,Be(r.touchedFields,ce),r.isSubmitted,mt,Ue),An=$5(ce,l,nr);_r(a,ce,er),nr?(!ae||!ae.readOnly)&&(K._f.onBlur&&K._f.onBlur(X),c&&c(0)):K._f.onChange&&K._f.onChange(X);const Zn=S(ce,er,nr),bs=!sa(Zn)||An;if(!nr&&m.state.next({name:ce,type:X.type,values:Wn(a)}),Ws)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?nr&&v():nr||v()),bs&&m.state.next({name:ce,...An?{}:Zn});if(!nr&&An&&m.state.next({...r}),e.resolver){const{errors:Gs}=await P([ce]);if(we(er),Ce){const vn=F5(r.errors,n,ce),pa=F5(Gs,n,vn.name||ce);gt=pa.error,ce=pa.name,ge=sa(Gs)}}else y([ce],!0),gt=(await U5(K,l.disabled,a,g,e.shouldUseNativeValidation))[ce],y([ce]),we(er),Ce&&(gt?ge=!1:(d.isValid||f.isValid)&&(ge=await O(n,!0)));Ce&&(K._f.deps&&W(K._f.deps),E(ce,ge,gt,Zn))}},V=(X,ae)=>{if(Be(r.errors,ae)&&X.focus)return X.focus(),1},W=async(X,ae={})=>{let ce,Ce;const K=ug(X);if(e.resolver){const we=await R(wn(X)?X:K);ce=sa(we),Ce=X?!K.some(Ue=>Be(we,Ue)):ce}else X?(Ce=(await Promise.all(K.map(async we=>{const Ue=Be(n,we);return await O(Ue&&Ue._f?{[we]:Ue}:Ue)}))).every(Boolean),!(!Ce&&!r.isValid)&&v()):Ce=ce=await O(n);return m.state.next({...!po(X)||(d.isValid||f.isValid)&&ce!==r.isValid?{}:{name:X},...e.resolver||!X?{isValid:ce}:{},errors:r.errors}),ae.shouldFocus&&!Ce&&dg(n,V,X?K:l.mount),Ce},B=X=>{const ae={...o.mount?a:s};return wn(X)?ae:po(X)?Be(ae,X):X.map(ce=>Be(ae,ce))},F=(X,ae)=>({invalid:!!Be((ae||r).errors,X),isDirty:!!Be((ae||r).dirtyFields,X),error:Be((ae||r).errors,X),isValidating:!!Be(r.validatingFields,X),isTouched:!!Be((ae||r).touchedFields,X)}),Y=X=>{X&&ug(X).forEach(ae=>Cn(r.errors,ae)),m.state.next({errors:X?r.errors:{}})},oe=(X,ae,ce)=>{const Ce=(Be(n,X,{_f:{}})._f||{}).ref,K=Be(r.errors,X)||{},{ref:we,message:Ue,type:mt,...gt}=K;_r(r.errors,X,{...gt,...ae,ref:Ce}),m.state.next({name:X,errors:r.errors,isValid:!1}),ce&&ce.shouldFocus&&Ce&&Ce.focus&&Ce.focus()},xe=(X,ae)=>ki(X)?m.state.subscribe({next:ce=>"values"in ce&&X($(void 0,ae),ce)}):$(X,ae,!0),J=X=>m.state.subscribe({next:ae=>{k1e(X.name,ae.name,X.exact)&&P1e(ae,X.formState||d,rr,X.reRenderRoot)&&X.callback({values:{...a},...r,...ae,defaultValues:s})}}).unsubscribe,Ee=X=>(o.mount=!0,f={...f,...X.formState},J({...X,formState:f})),ye=(X,ae={})=>{for(const ce of X?ug(X):l.mount)l.mount.delete(ce),l.array.delete(ce),ae.keepValue||(Cn(n,ce),Cn(a,ce)),!ae.keepError&&Cn(r.errors,ce),!ae.keepDirty&&Cn(r.dirtyFields,ce),!ae.keepTouched&&Cn(r.touchedFields,ce),!ae.keepIsValidating&&Cn(r.validatingFields,ce),!e.shouldUnregister&&!ae.keepDefaultValue&&Cn(s,ce);m.state.next({values:Wn(a)}),m.state.next({...r,...ae.keepDirty?{isDirty:I()}:{}}),!ae.keepIsValid&&v()},je=({disabled:X,name:ae})=>{(Sa(X)&&o.mount||X||l.disabled.has(ae))&&(X?l.disabled.add(ae):l.disabled.delete(ae))},pe=(X,ae={})=>{let ce=Be(n,X);const Ce=Sa(ae.disabled)||Sa(e.disabled);return _r(n,X,{...ce||{},_f:{...ce&&ce._f?ce._f:{ref:{name:X}},name:X,mount:!0,...ae}}),l.mount.add(X),ce?je({disabled:Sa(ae.disabled)?ae.disabled:e.disabled,name:X}):C(X,!0,ae.value),{...Ce?{disabled:ae.disabled||e.disabled}:{},...e.progressive?{required:!!ae.required,min:Nm(ae.min),max:Nm(ae.max),minLength:Nm(ae.minLength),maxLength:Nm(ae.maxLength),pattern:Nm(ae.pattern)}:{},name:X,onChange:q,onBlur:q,ref:K=>{if(K){pe(X,ae),ce=Be(n,X);const we=wn(K.value)&&K.querySelectorAll&&K.querySelectorAll("input,select,textarea")[0]||K,Ue=j1e(we),mt=ce._f.refs||[];if(Ue?mt.find(gt=>gt===we):we===ce._f.ref)return;_r(n,X,{_f:{...ce._f,...Ue?{refs:[...mt.filter(yE),we,...Array.isArray(Be(s,X))?[{}]:[]],ref:{type:we.type,name:X}}:{ref:we}}}),C(X,!1,void 0,we)}else ce=Be(n,X,{}),ce._f&&(ce._f.mount=!1),(e.shouldUnregister||ae.shouldUnregister)&&!(iQ(l.array,X)&&o.action)&&l.unMount.add(X)}}},Se=()=>e.shouldFocusError&&dg(n,V,l.mount),Oe=X=>{Sa(X)&&(m.state.next({disabled:X}),dg(n,(ae,ce)=>{const Ce=Be(n,ce);Ce&&(ae.disabled=Ce._f.disabled||X,Array.isArray(Ce._f.refs)&&Ce._f.refs.forEach(K=>{K.disabled=Ce._f.disabled||X}))},0,!1))},ve=(X,ae)=>async ce=>{let Ce;ce&&(ce.preventDefault&&ce.preventDefault(),ce.persist&&ce.persist());let K=Wn(a);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:we,values:Ue}=await P();r.errors=we,K=Wn(Ue)}else await O(n);if(l.disabled.size)for(const we of l.disabled)Cn(K,we);if(Cn(r.errors,"root"),sa(r.errors)){m.state.next({errors:{}});try{await X(K,ce)}catch(we){Ce=we}}else ae&&await ae({...r.errors},ce),Se(),setTimeout(Se);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:sa(r.errors)&&!Ce,submitCount:r.submitCount+1,errors:r.errors}),Ce)throw Ce},Xe=(X,ae={})=>{Be(n,X)&&(wn(ae.defaultValue)?z(X,Wn(Be(s,X))):(z(X,ae.defaultValue),_r(s,X,Wn(ae.defaultValue))),ae.keepTouched||Cn(r.touchedFields,X),ae.keepDirty||(Cn(r.dirtyFields,X),r.isDirty=ae.defaultValue?I(X,Wn(Be(s,X))):I()),ae.keepError||(Cn(r.errors,X),d.isValid&&v()),m.state.next({...r}))},$e=(X,ae={})=>{const ce=X?Wn(X):s,Ce=Wn(ce),K=sa(X),we=K?s:Ce;if(ae.keepDefaultValues||(s=ce),!ae.keepValues){if(ae.keepDirtyValues){const Ue=new Set([...l.mount,...Object.keys(Am(s,a))]);for(const mt of Array.from(Ue))Be(r.dirtyFields,mt)?_r(we,mt,Be(a,mt)):z(mt,Be(we,mt))}else{if(a2&&wn(X))for(const Ue of l.mount){const mt=Be(n,Ue);if(mt&&mt._f){const gt=Array.isArray(mt._f.refs)?mt._f.refs[0]:mt._f.ref;if(Yb(gt)){const ge=gt.closest("form");if(ge){ge.reset();break}}}}if(ae.keepFieldsRef)for(const Ue of l.mount)z(Ue,Be(we,Ue));else n={}}a=e.shouldUnregister?ae.keepDefaultValues?Wn(s):{}:Wn(we),m.array.next({values:{...we}}),m.state.next({values:{...we}})}l={mount:ae.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!ae.keepIsValid||!!ae.keepDirtyValues,o.watch=!!e.shouldUnregister,m.state.next({submitCount:ae.keepSubmitCount?r.submitCount:0,isDirty:K?!1:ae.keepDirty?r.isDirty:!!(ae.keepDefaultValues&&!sl(X,s)),isSubmitted:ae.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:K?{}:ae.keepDirtyValues?ae.keepDefaultValues&&a?Am(s,a):r.dirtyFields:ae.keepDefaultValues&&X?Am(s,X):ae.keepDirty?r.dirtyFields:{},touchedFields:ae.keepTouched?r.touchedFields:{},errors:ae.keepErrors?r.errors:{},isSubmitSuccessful:ae.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},at=(X,ae)=>$e(ki(X)?X(a):X,ae),Ft=(X,ae={})=>{const ce=Be(n,X),Ce=ce&&ce._f;if(Ce){const K=Ce.refs?Ce.refs[0]:Ce.ref;K.focus&&(K.focus(),ae.shouldSelect&&ki(K.select)&&K.select())}},rr=X=>{r={...r,...X}},St={control:{register:pe,unregister:ye,getFieldState:F,handleSubmit:ve,setError:oe,_subscribe:J,_runSchema:P,_focusError:Se,_getWatch:$,_getDirty:I,_setValid:v,_setFieldArray:w,_setDisabledField:je,_setErrors:A,_getFieldArray:M,_reset:$e,_resetDefaultValues:()=>ki(e.defaultValues)&&e.defaultValues().then(X=>{at(X,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:Oe,_subjects:m,_proxyFormState:d,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(X){o=X},get _defaultValues(){return s},get _names(){return l},set _names(X){l=X},get _formState(){return r},get _options(){return e},set _options(X){e={...e,...X}}},subscribe:Ee,trigger:W,register:pe,handleSubmit:ve,watch:xe,setValue:z,getValues:B,reset:at,resetField:Xe,clearErrors:Y,unregister:ye,setError:oe,setFocus:Ft,getFieldState:F};return{...St,formControl:St}}function si(t={}){const e=G.useRef(void 0),r=G.useRef(void 0),[n,s]=G.useState({isDirty:!1,isValidating:!1,isLoading:ki(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ki(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!ki(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=D1e(t);e.current={...l,formState:n}}const a=e.current.control;return a._options=t,c2(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),G.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),G.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),G.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),G.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),G.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==n.isDirty&&a._subjects.state.next({isDirty:o})}},[a,n.isDirty]),G.useEffect(()=>{t.values&&!sl(t.values,r.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),G.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=oQ(n,a),e.current}const z5=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Be(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},gQ=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?z5(n.ref,r,t):n.refs&&n.refs.forEach(s=>z5(s,r,t))}},L1e=(t,e)=>{e.shouldUseNativeValidation&&gQ(t,e);const r={};for(const n in t){const s=Be(e.fields,n),a=Object.assign(t[n]||{},{ref:s&&s.ref});if($1e(e.names||Object.keys(t),n)){const o=Object.assign({},Be(r,n));_r(o,"root",a),_r(r,n,o)}else _r(r,n,a)}return r},$1e=(t,e)=>t.some(r=>r.startsWith(e+"."));var F1e=function(t,e){for(var r={};t.length;){var n=t[0],s=n.code,a=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:a,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=r[o].types,u=c&&c[n.code];r[o]=cQ(o,e,r,s,u?[].concat(u,n.message):n.message)}t.shift()}return r},ai=function(t,e,r){return r===void 0&&(r={}),function(n,s,a){try{return Promise.resolve((function(o,l){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(u){return a.shouldUseNativeValidation&&gQ({},a),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c})(0,function(o){if((function(l){return Array.isArray(l?.errors)})(o))return{values:{},errors:L1e(F1e(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},pr;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(pr||(pr={}));var q5;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(q5||(q5={}));const et=pr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),uc=t=>{switch(typeof t){case"undefined":return et.undefined;case"string":return et.string;case"number":return Number.isNaN(t)?et.nan:et.number;case"boolean":return et.boolean;case"function":return et.function;case"bigint":return et.bigint;case"symbol":return et.symbol;case"object":return Array.isArray(t)?et.array:t===null?et.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?et.promise:typeof Map<"u"&&t instanceof Map?et.map:typeof Set<"u"&&t instanceof Set?et.set:typeof Date<"u"&&t instanceof Date?et.date:et.object;default:return et.unknown}},De=pr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class wl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(a){return a.message},n={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),n}static assert(e){if(!(e instanceof wl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,pr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];r[a]=r[a]||[],r[a].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}wl.create=t=>new wl(t);const Qk=(t,e)=>{let r;switch(t.code){case De.invalid_type:t.received===et.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case De.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,pr.jsonStringifyReplacer)}`;break;case De.unrecognized_keys:r=`Unrecognized key(s) in object: ${pr.joinValues(t.keys,", ")}`;break;case De.invalid_union:r="Invalid input";break;case De.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${pr.joinValues(t.options)}`;break;case De.invalid_enum_value:r=`Invalid enum value. Expected ${pr.joinValues(t.options)}, received '${t.received}'`;break;case De.invalid_arguments:r="Invalid function arguments";break;case De.invalid_return_type:r="Invalid function return type";break;case De.invalid_date:r="Invalid date";break;case De.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:pr.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case De.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case De.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case De.custom:r="Invalid input";break;case De.invalid_intersection_types:r="Intersection results could not be merged";break;case De.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case De.not_finite:r="Number must be finite";break;default:r=e.defaultError,pr.assertNever(t)}return{message:r}};let B1e=Qk;function U1e(){return B1e}const z1e=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,a=[...r,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}};function Ve(t,e){const r=U1e(),n=z1e({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Qk?void 0:Qk].filter(s=>!!s)});t.common.issues.push(n)}class La{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return Pt;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const a=await s.key,o=await s.value;n.push({key:a,value:o})}return La.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return Pt;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}}const Pt=Object.freeze({status:"aborted"}),qm=t=>({status:"dirty",value:t}),li=t=>({status:"valid",value:t}),V5=t=>t.status==="aborted",H5=t=>t.status==="dirty",Pf=t=>t.status==="valid",Zb=t=>typeof Promise<"u"&&t instanceof Promise;var rt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(rt||(rt={}));class $c{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const W5=(t,e)=>{if(Pf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new wl(t.common.issues);return this._error=r,this._error}}};function Kt(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:s}}class dr{get description(){return this._def.description}_getType(e){return uc(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:uc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new La,ctx:{common:e.parent.common,data:e.data,parsedType:uc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Zb(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){const n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:uc(e)},s=this._parseSync({data:e,path:n.path,parent:n});return W5(n,s)}"~validate"(e){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:uc(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:r});return Pf(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>Pf(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:uc(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(Zb(s)?s:Promise.resolve(s));return W5(n,a)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:De.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Rf({schema:this,typeName:kt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Nc.create(this,this._def)}nullable(){return If.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return yo.create(this)}promise(){return nw.create(this,this._def)}or(e){return tw.create([this,e],this._def)}and(e){return rw.create(this,e,this._def)}transform(e){return new Rf({...Kt(this._def),schema:this,typeName:kt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new eO({...Kt(this._def),innerType:this,defaultValue:r,typeName:kt.ZodDefault})}brand(){return new dCe({typeName:kt.ZodBranded,type:this,...Kt(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new tO({...Kt(this._def),innerType:this,catchValue:r,typeName:kt.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return h2.create(this,e)}readonly(){return rO.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const q1e=/^c[^\s-]{8,}$/i,V1e=/^[0-9a-z]+$/,H1e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,W1e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,G1e=/^[a-z0-9_-]{21}$/i,K1e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,X1e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Y1e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Q1e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let xE;const J1e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Z1e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,eCe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,tCe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rCe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nCe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,vQ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sCe=new RegExp(`^${vQ}$`);function yQ(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function aCe(t){return new RegExp(`^${yQ(t)}$`)}function iCe(t){let e=`${vQ}T${yQ(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function oCe(t,e){return!!((e==="v4"||!e)&&J1e.test(t)||(e==="v6"||!e)&&eCe.test(t))}function lCe(t,e){if(!K1e.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function cCe(t,e){return!!((e==="v4"||!e)&&Z1e.test(t)||(e==="v6"||!e)&&tCe.test(t))}class vc extends dr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==et.string){const a=this._getOrReturnCtx(e);return Ve(a,{code:De.invalid_type,expected:et.string,received:a.parsedType}),Pt}const n=new La;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),Ve(s,{code:De.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),Ve(s,{code:De.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Ve(s,{code:De.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ve(s,{code:De.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Y1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"email",code:De.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")xE||(xE=new RegExp(Q1e,"u")),xE.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"emoji",code:De.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")W1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"uuid",code:De.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")G1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"nanoid",code:De.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")q1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"cuid",code:De.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")V1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"cuid2",code:De.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")H1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"ulid",code:De.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ve(s,{validation:"url",code:De.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"regex",code:De.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:De.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:De.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:De.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?iCe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:De.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?sCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:De.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?aCe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:De.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?X1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"duration",code:De.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?oCe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"ip",code:De.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?lCe(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"jwt",code:De.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?cCe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"cidr",code:De.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?rCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"base64",code:De.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?nCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"base64url",code:De.invalid_string,message:a.message}),n.dirty()):pr.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:De.invalid_string,...rt.errToObj(n)})}_addCheck(e){return new vc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...rt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...rt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...rt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...rt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...rt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...rt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...rt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...rt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...rt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...rt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...rt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...rt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...rt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...rt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...rt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...rt.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...rt.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...rt.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...rt.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...rt.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...rt.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...rt.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...rt.errToObj(r)})}nonempty(e){return this.min(1,rt.errToObj(e))}trim(){return new vc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}vc.create=t=>new vc({checks:[],typeName:kt.ZodString,coerce:t?.coerce??!1,...Kt(t)});function uCe(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,a=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return a%o/10**s}class kf extends dr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==et.number){const a=this._getOrReturnCtx(e);return Ve(a,{code:De.invalid_type,expected:et.number,received:a.parsedType}),Pt}let n;const s=new La;for(const a of this._def.checks)a.kind==="int"?pr.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ve(n,{code:De.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:De.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:De.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?uCe(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:De.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ve(n,{code:De.not_finite,message:a.message}),s.dirty()):pr.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,rt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,rt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,rt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,rt.toString(r))}setLimit(e,r,n,s){return new kf({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:rt.toString(s)}]})}_addCheck(e){return new kf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:rt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:rt.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:rt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rt.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&pr.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}kf.create=t=>new kf({checks:[],typeName:kt.ZodNumber,coerce:t?.coerce||!1,...Kt(t)});class zg extends dr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==et.bigint)return this._getInvalidInput(e);let n;const s=new La;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:De.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:De.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:De.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):pr.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return Ve(r,{code:De.invalid_type,expected:et.bigint,received:r.parsedType}),Pt}gte(e,r){return this.setLimit("min",e,!0,rt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,rt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,rt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,rt.toString(r))}setLimit(e,r,n,s){return new zg({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:rt.toString(s)}]})}_addCheck(e){return new zg({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:rt.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}zg.create=t=>new zg({checks:[],typeName:kt.ZodBigInt,coerce:t?.coerce??!1,...Kt(t)});class Jk extends dr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==et.boolean){const n=this._getOrReturnCtx(e);return Ve(n,{code:De.invalid_type,expected:et.boolean,received:n.parsedType}),Pt}return li(e.data)}}Jk.create=t=>new Jk({typeName:kt.ZodBoolean,coerce:t?.coerce||!1,...Kt(t)});class ew extends dr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==et.date){const a=this._getOrReturnCtx(e);return Ve(a,{code:De.invalid_type,expected:et.date,received:a.parsedType}),Pt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ve(a,{code:De.invalid_date}),Pt}const n=new La;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),Ve(s,{code:De.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),Ve(s,{code:De.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):pr.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ew({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:rt.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:rt.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}ew.create=t=>new ew({checks:[],coerce:t?.coerce||!1,typeName:kt.ZodDate,...Kt(t)});class G5 extends dr{_parse(e){if(this._getType(e)!==et.symbol){const n=this._getOrReturnCtx(e);return Ve(n,{code:De.invalid_type,expected:et.symbol,received:n.parsedType}),Pt}return li(e.data)}}G5.create=t=>new G5({typeName:kt.ZodSymbol,...Kt(t)});class K5 extends dr{_parse(e){if(this._getType(e)!==et.undefined){const n=this._getOrReturnCtx(e);return Ve(n,{code:De.invalid_type,expected:et.undefined,received:n.parsedType}),Pt}return li(e.data)}}K5.create=t=>new K5({typeName:kt.ZodUndefined,...Kt(t)});class X5 extends dr{_parse(e){if(this._getType(e)!==et.null){const n=this._getOrReturnCtx(e);return Ve(n,{code:De.invalid_type,expected:et.null,received:n.parsedType}),Pt}return li(e.data)}}X5.create=t=>new X5({typeName:kt.ZodNull,...Kt(t)});class Y5 extends dr{constructor(){super(...arguments),this._any=!0}_parse(e){return li(e.data)}}Y5.create=t=>new Y5({typeName:kt.ZodAny,...Kt(t)});class Q5 extends dr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return li(e.data)}}Q5.create=t=>new Q5({typeName:kt.ZodUnknown,...Kt(t)});class Fc extends dr{_parse(e){const r=this._getOrReturnCtx(e);return Ve(r,{code:De.invalid_type,expected:et.never,received:r.parsedType}),Pt}}Fc.create=t=>new Fc({typeName:kt.ZodNever,...Kt(t)});class J5 extends dr{_parse(e){if(this._getType(e)!==et.undefined){const n=this._getOrReturnCtx(e);return Ve(n,{code:De.invalid_type,expected:et.void,received:n.parsedType}),Pt}return li(e.data)}}J5.create=t=>new J5({typeName:kt.ZodVoid,...Kt(t)});class yo extends dr{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==et.array)return Ve(r,{code:De.invalid_type,expected:et.array,received:r.parsedType}),Pt;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,l=r.data.length<s.exactLength.value;(o||l)&&(Ve(r,{code:o?De.too_big:De.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(Ve(r,{code:De.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(Ve(r,{code:De.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>s.type._parseAsync(new $c(r,o,r.path,l)))).then(o=>La.mergeArray(n,o));const a=[...r.data].map((o,l)=>s.type._parseSync(new $c(r,o,r.path,l)));return La.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new yo({...this._def,minLength:{value:e,message:rt.toString(r)}})}max(e,r){return new yo({...this._def,maxLength:{value:e,message:rt.toString(r)}})}length(e,r){return new yo({...this._def,exactLength:{value:e,message:rt.toString(r)}})}nonempty(e){return this.min(1,e)}}yo.create=(t,e)=>new yo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:kt.ZodArray,...Kt(e)});function Dh(t){if(t instanceof kn){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Nc.create(Dh(n))}return new kn({...t._def,shape:()=>e})}else return t instanceof yo?new yo({...t._def,type:Dh(t.element)}):t instanceof Nc?Nc.create(Dh(t.unwrap())):t instanceof If?If.create(Dh(t.unwrap())):t instanceof ud?ud.create(t.items.map(e=>Dh(e))):t}class kn extends dr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=pr.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==et.object){const u=this._getOrReturnCtx(e);return Ve(u,{code:De.invalid_type,expected:et.object,received:u.parsedType}),Pt}const{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Fc&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],f=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new $c(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Fc){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(Ve(s,{code:De.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new $c(s,f,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,m=await d.value;u.push({key:f,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>La.mergeObjectSync(n,u)):La.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return rt.errToObj,new kn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{const s=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:rt.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new kn({...this._def,unknownKeys:"strip"})}passthrough(){return new kn({...this._def,unknownKeys:"passthrough"})}extend(e){return new kn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new kn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:kt.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new kn({...this._def,catchall:e})}pick(e){const r={};for(const n of pr.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new kn({...this._def,shape:()=>r})}omit(e){const r={};for(const n of pr.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new kn({...this._def,shape:()=>r})}deepPartial(){return Dh(this)}partial(e){const r={};for(const n of pr.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new kn({...this._def,shape:()=>r})}required(e){const r={};for(const n of pr.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Nc;)a=a._def.innerType;r[n]=a}return new kn({...this._def,shape:()=>r})}keyof(){return xQ(pr.objectKeys(this.shape))}}kn.create=(t,e)=>new kn({shape:()=>t,unknownKeys:"strip",catchall:Fc.create(),typeName:kt.ZodObject,...Kt(e)});kn.strictCreate=(t,e)=>new kn({shape:()=>t,unknownKeys:"strict",catchall:Fc.create(),typeName:kt.ZodObject,...Kt(e)});kn.lazycreate=(t,e)=>new kn({shape:t,unknownKeys:"strip",catchall:Fc.create(),typeName:kt.ZodObject,...Kt(e)});class tw extends dr{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new wl(l.ctx.common.issues));return Ve(r,{code:De.invalid_union,unionErrors:o}),Pt}if(r.common.async)return Promise.all(n.map(async a=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new wl(c));return Ve(r,{code:De.invalid_union,unionErrors:l}),Pt}}get options(){return this._def.options}}tw.create=(t,e)=>new tw({options:t,typeName:kt.ZodUnion,...Kt(e)});function Zk(t,e){const r=uc(t),n=uc(e);if(t===e)return{valid:!0,data:t};if(r===et.object&&n===et.object){const s=pr.objectKeys(e),a=pr.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=Zk(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===et.array&&n===et.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=Zk(o,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===et.date&&n===et.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class rw extends dr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(a,o)=>{if(V5(a)||V5(o))return Pt;const l=Zk(a.value,o.value);return l.valid?((H5(a)||H5(o))&&r.dirty(),{status:r.value,value:l.data}):(Ve(n,{code:De.invalid_intersection_types}),Pt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}rw.create=(t,e,r)=>new rw({left:t,right:e,typeName:kt.ZodIntersection,...Kt(r)});class ud extends dr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.array)return Ve(n,{code:De.invalid_type,expected:et.array,received:n.parsedType}),Pt;if(n.data.length<this._def.items.length)return Ve(n,{code:De.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pt;!this._def.rest&&n.data.length>this._def.items.length&&(Ve(n,{code:De.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new $c(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>La.mergeArray(r,o)):La.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new ud({...this._def,rest:e})}}ud.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ud({items:t,typeName:kt.ZodTuple,rest:null,...Kt(e)})};class Z5 extends dr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.map)return Ve(n,{code:De.invalid_type,expected:et.map,received:n.parsedType}),Pt;const s=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:s._parse(new $c(n,l,n.path,[u,"key"])),value:a._parse(new $c(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Pt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Pt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}Z5.create=(t,e,r)=>new Z5({valueType:e,keyType:t,typeName:kt.ZodMap,...Kt(r)});class qg extends dr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.set)return Ve(n,{code:De.invalid_type,expected:et.set,received:n.parsedType}),Pt;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Ve(n,{code:De.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Ve(n,{code:De.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Pt;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>a._parse(new $c(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,r){return new qg({...this._def,minSize:{value:e,message:rt.toString(r)}})}max(e,r){return new qg({...this._def,maxSize:{value:e,message:rt.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}qg.create=(t,e)=>new qg({valueType:t,minSize:null,maxSize:null,typeName:kt.ZodSet,...Kt(e)});class eU extends dr{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}eU.create=(t,e)=>new eU({getter:t,typeName:kt.ZodLazy,...Kt(e)});class tU extends dr{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Ve(r,{received:r.data,code:De.invalid_literal,expected:this._def.value}),Pt}return{status:"valid",value:e.data}}get value(){return this._def.value}}tU.create=(t,e)=>new tU({value:t,typeName:kt.ZodLiteral,...Kt(e)});function xQ(t,e){return new Of({values:t,typeName:kt.ZodEnum,...Kt(e)})}class Of extends dr{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Ve(r,{expected:pr.joinValues(n),received:r.parsedType,code:De.invalid_type}),Pt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return Ve(r,{received:r.data,code:De.invalid_enum_value,options:n}),Pt}return li(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Of.create(e,{...this._def,...r})}exclude(e,r=this._def){return Of.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}Of.create=xQ;class rU extends dr{_parse(e){const r=pr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==et.string&&n.parsedType!==et.number){const s=pr.objectValues(r);return Ve(n,{expected:pr.joinValues(s),received:n.parsedType,code:De.invalid_type}),Pt}if(this._cache||(this._cache=new Set(pr.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=pr.objectValues(r);return Ve(n,{received:n.data,code:De.invalid_enum_value,options:s}),Pt}return li(e.data)}get enum(){return this._def.values}}rU.create=(t,e)=>new rU({values:t,typeName:kt.ZodNativeEnum,...Kt(e)});class nw extends dr{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==et.promise&&r.common.async===!1)return Ve(r,{code:De.invalid_type,expected:et.promise,received:r.parsedType}),Pt;const n=r.parsedType===et.promise?r.data:Promise.resolve(r.data);return li(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}nw.create=(t,e)=>new nw({type:t,typeName:kt.ZodPromise,...Kt(e)});class Rf extends dr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===kt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{Ve(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return Pt;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Pt:c.status==="dirty"||r.value==="dirty"?qm(c.value):c});{if(r.value==="aborted")return Pt;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?Pt:l.status==="dirty"||r.value==="dirty"?qm(l.value):l}}if(s.type==="refinement"){const o=l=>{const c=s.refinement(l,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Pt:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Pt:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Pf(o))return Pt;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Pf(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:r.value,value:l})):Pt);pr.assertNever(s)}}Rf.create=(t,e,r)=>new Rf({schema:t,typeName:kt.ZodEffects,effect:e,...Kt(r)});Rf.createWithPreprocess=(t,e,r)=>new Rf({schema:e,effect:{type:"preprocess",transform:t},typeName:kt.ZodEffects,...Kt(r)});class Nc extends dr{_parse(e){return this._getType(e)===et.undefined?li(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Nc.create=(t,e)=>new Nc({innerType:t,typeName:kt.ZodOptional,...Kt(e)});class If extends dr{_parse(e){return this._getType(e)===et.null?li(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}If.create=(t,e)=>new If({innerType:t,typeName:kt.ZodNullable,...Kt(e)});class eO extends dr{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===et.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}eO.create=(t,e)=>new eO({innerType:t,typeName:kt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Kt(e)});class tO extends dr{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Zb(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new wl(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new wl(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}tO.create=(t,e)=>new tO({innerType:t,typeName:kt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Kt(e)});class nU extends dr{_parse(e){if(this._getType(e)!==et.nan){const n=this._getOrReturnCtx(e);return Ve(n,{code:De.invalid_type,expected:et.nan,received:n.parsedType}),Pt}return{status:"valid",value:e.data}}}nU.create=t=>new nU({typeName:kt.ZodNaN,...Kt(t)});class dCe extends dr{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class h2 extends dr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Pt:a.status==="dirty"?(r.dirty(),qm(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Pt:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new h2({in:e,out:r,typeName:kt.ZodPipeline})}}class rO extends dr{_parse(e){const r=this._def.innerType._parse(e),n=s=>(Pf(s)&&(s.value=Object.freeze(s.value)),s);return Zb(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}rO.create=(t,e)=>new rO({innerType:t,typeName:kt.ZodReadonly,...Kt(e)});var kt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(kt||(kt={}));const br=vc.create,Za=kf.create,nO=Jk.create;Fc.create;const Vg=yo.create,ci=kn.create,hCe=tw.create;rw.create;ud.create;const Hg=Of.create;nw.create;Nc.create;If.create;const fCe=ci({email:br().email("Email inválido"),password:br().min(6,"Senha deve ter pelo menos 6 caracteres")}),pCe=()=>{const[,t]=qi(),{toast:e}=Fr(),{register:r,handleSubmit:n,formState:{errors:s,isSubmitting:a}}=si({resolver:ai(fCe)}),o=async l=>{try{await f1e(l.email,l.password),t("/dashboard")}catch(c){e({title:"Erro ao fazer login",description:c.message||"Credenciais inválidas",variant:"destructive"})}};return i.jsxs("div",{className:"w-full lg:grid lg:min-h-screen lg:grid-cols-2",children:[i.jsxs("div",{className:"relative hidden items-center justify-center overflow-hidden bg-muted lg:flex",children:[i.jsx("div",{className:"to-primary/80 absolute inset-0 bg-gradient-to-br from-primary opacity-40 dark:opacity-60"}),i.jsx("img",{src:"https://dvglgxrvhmtsixaabxha.supabase.co/storage/v1/object/public/logosimpixblack//Logotipo_Achadinhos_de_Beleza_Colorido_Moderno_Rosa_e_Preto-removebg-preview.png",alt:"Simpix Logo",className:"relative z-10 h-24 opacity-75"})]}),i.jsx("div",{className:"lg:min-h-auto flex min-h-screen items-center justify-center bg-background py-12",children:i.jsxs("div",{className:"mx-auto grid w-[350px] gap-6",children:[i.jsxs("div",{className:"grid gap-2 text-center",children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Login"}),i.jsx("p",{className:"text-balance text-muted-foreground",children:"Acesse sua conta para continuar"})]}),i.jsxs("form",{onSubmit:n(o),className:"grid gap-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx(ue,{htmlFor:"email",children:"Email"}),i.jsx(Fe,{id:"email",type:"email",placeholder:"seu@email.com",required:!0,...r("email")}),s.email&&i.jsx("p",{className:"text-sm text-destructive",children:s.email.message})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("div",{className:"flex items-center",children:i.jsx(ue,{htmlFor:"password",children:"Senha"})}),i.jsx(Fe,{id:"password",type:"password",required:!0,...r("password"),"data-testid":"input-password"}),s.password&&i.jsx("p",{className:"text-sm text-destructive",children:s.password.message})]}),i.jsx(se,{type:"submit",className:"w-full",disabled:a,"data-testid":"button-login",children:a?i.jsxs(i.Fragment,{children:[i.jsx(un,{className:"mr-2 h-4 w-4 animate-spin"}),"Entrando..."]}):"Entrar"})]})]})})]})},mCe=sy("relative w-full rounded-lg border p-4 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),jt=N.forwardRef(({className:t,variant:e,...r},n)=>i.jsx("div",{ref:n,role:"alert",className:Ie(mCe({variant:e}),t),...r}));jt.displayName="Alert";const sw=N.forwardRef(({className:t,...e},r)=>i.jsx("h5",{ref:r,className:Ie("mb-1 font-medium leading-none tracking-tight",t),...e}));sw.displayName="AlertTitle";const At=N.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Ie("text-sm [&_p]:leading-relaxed",t),...e}));At.displayName="AlertDescription";function sU({className:t="",variant:e="banner"}){const[r,n]=N.useState(navigator.onLine),[s,a]=N.useState(!1);return N.useEffect(()=>{const o=()=>{n(!0),s&&setTimeout(()=>a(!1),3e3)},l=()=>{n(!1),a(!0)};return window.addEventListener("online",o),window.addEventListener("offline",l),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",l)}},[s]),r&&!s?null:e==="icon-only"?i.jsx("div",{className:`flex items-center ${t}`,title:r?"Online":"Offline",children:r?i.jsx(nE,{className:"h-4 w-4 text-green-500"}):i.jsx(o5,{className:"h-4 w-4 text-red-500"})}):e==="compact"?i.jsx("div",{className:`fixed bottom-4 right-4 z-50 flex items-center gap-2 rounded-lg px-3 py-2 text-sm shadow-lg transition-all duration-300 ${r?"border border-green-200 bg-green-100 text-green-800":"border border-red-200 bg-red-100 text-red-800"} ${t}`,children:r?i.jsxs(i.Fragment,{children:[i.jsx(nE,{className:"h-4 w-4"}),i.jsx("span",{children:"Reconectado"})]}):i.jsxs(i.Fragment,{children:[i.jsx(o5,{className:"h-4 w-4"}),i.jsx("span",{children:"Offline"})]})}):r?r&&s?i.jsx("div",{className:`border-b border-green-200 bg-green-50 ${t}`,children:i.jsxs(jt,{className:"border-0 bg-transparent",children:[i.jsx(nE,{className:"h-4 w-4 text-green-600"}),i.jsxs(At,{className:"text-green-800",children:[i.jsx("strong",{children:"Conexão restaurada!"})," Você está novamente online."]})]})}):null:i.jsx("div",{className:`border-b border-red-200 bg-red-50 ${t}`,children:i.jsxs(jt,{className:"border-0 bg-transparent",children:[i.jsx(jr,{className:"h-4 w-4 text-red-600"}),i.jsxs(At,{className:"text-red-800",children:[i.jsx("strong",{children:"Você está offline."})," Algumas funcionalidades podem não estar disponíveis. Dados inseridos em formulários serão preservados até que a conexão seja restaurada."]})]})})}var gCe=N.createContext(void 0);function Ep(t){const e=N.useContext(gCe);return t||e||"ltr"}var bE="rovingFocusGroup.onEntryFocus",vCe={bubbles:!1,cancelable:!0},ly="RovingFocusGroup",[sO,bQ,yCe]=ty(ly),[xCe,oS]=cs(ly,[yCe]),[bCe,wCe]=xCe(ly),wQ=N.forwardRef((t,e)=>i.jsx(sO.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(sO.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(_Ce,{...t,ref:e})})}));wQ.displayName=ly;var _Ce=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,m=N.useRef(null),g=Et(e,m),x=Ep(a),[v,y]=Ma({prop:o,defaultProp:l??null,onChange:c,caller:ly}),[w,_]=N.useState(!1),A=cn(u),C=bQ(r),S=N.useRef(!1),[E,P]=N.useState(0);return N.useEffect(()=>{const R=m.current;if(R)return R.addEventListener(bE,A),()=>R.removeEventListener(bE,A)},[A]),i.jsx(bCe,{scope:r,orientation:n,dir:x,loop:s,currentTabStopId:v,onItemFocus:N.useCallback(R=>y(R),[y]),onItemShiftTab:N.useCallback(()=>_(!0),[]),onFocusableItemAdd:N.useCallback(()=>P(R=>R+1),[]),onFocusableItemRemove:N.useCallback(()=>P(R=>R-1),[]),children:i.jsx(He.div,{tabIndex:w||E===0?-1:0,"data-orientation":n,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:Le(t.onMouseDown,()=>{S.current=!0}),onFocus:Le(t.onFocus,R=>{const O=!S.current;if(R.target===R.currentTarget&&O&&!w){const D=new CustomEvent(bE,vCe);if(R.currentTarget.dispatchEvent(D),!D.defaultPrevented){const I=C().filter(z=>z.focusable),$=I.find(z=>z.active),M=I.find(z=>z.id===v),H=[$,M,...I].filter(Boolean).map(z=>z.ref.current);jQ(H,d)}}S.current=!1}),onBlur:Le(t.onBlur,()=>_(!1))})})}),_Q="RovingFocusGroupItem",SQ=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,children:o,...l}=t,c=ka(),u=a||c,d=wCe(_Q,r),f=d.currentTabStopId===u,m=bQ(r),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:v}=d;return N.useEffect(()=>{if(n)return g(),()=>x()},[n,g,x]),i.jsx(sO.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:i.jsx(He.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:Le(t.onMouseDown,y=>{n?d.onItemFocus(u):y.preventDefault()}),onFocus:Le(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Le(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const w=ACe(y,d.orientation,d.dir);if(w!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let A=m().filter(C=>C.focusable).map(C=>C.ref.current);if(w==="last")A.reverse();else if(w==="prev"||w==="next"){w==="prev"&&A.reverse();const C=A.indexOf(y.currentTarget);A=d.loop?NCe(A,C+1):A.slice(C+1)}setTimeout(()=>jQ(A))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});SQ.displayName=_Q;var SCe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function jCe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function ACe(t,e,r){const n=jCe(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return SCe[n]}function jQ(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function NCe(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var AQ=wQ,NQ=SQ,aO=["Enter"," "],ECe=["ArrowDown","PageUp","Home"],EQ=["ArrowUp","PageDown","End"],CCe=[...ECe,...EQ],TCe={ltr:[...aO,"ArrowRight"],rtl:[...aO,"ArrowLeft"]},PCe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},cy="Menu",[Wg,kCe,OCe]=ty(cy),[kd,CQ]=cs(cy,[OCe,Np,oS]),lS=Np(),TQ=oS(),[RCe,Od]=kd(cy),[ICe,uy]=kd(cy),PQ=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:a,modal:o=!0}=t,l=lS(e),[c,u]=N.useState(null),d=N.useRef(!1),f=cn(a),m=Ep(s);return N.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),i.jsx(qM,{...l,children:i.jsx(RCe,{scope:e,open:r,onOpenChange:f,content:c,onContentChange:u,children:i.jsx(ICe,{scope:e,onClose:N.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:o,children:n})})})};PQ.displayName=cy;var MCe="MenuAnchor",f2=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=lS(r);return i.jsx(VM,{...s,...n,ref:e})});f2.displayName=MCe;var p2="MenuPortal",[DCe,kQ]=kd(p2,{forceMount:void 0}),OQ=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,a=Od(p2,e);return i.jsx(DCe,{scope:e,forceMount:r,children:i.jsx(xs,{present:r||a.open,children:i.jsx(ry,{asChild:!0,container:s,children:n})})})};OQ.displayName=p2;var ti="MenuContent",[LCe,m2]=kd(ti),RQ=N.forwardRef((t,e)=>{const r=kQ(ti,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,a=Od(ti,t.__scopeMenu),o=uy(ti,t.__scopeMenu);return i.jsx(Wg.Provider,{scope:t.__scopeMenu,children:i.jsx(xs,{present:n||a.open,children:i.jsx(Wg.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx($Ce,{...s,ref:e}):i.jsx(FCe,{...s,ref:e})})})})}),$Ce=N.forwardRef((t,e)=>{const r=Od(ti,t.__scopeMenu),n=N.useRef(null),s=Et(e,n);return N.useEffect(()=>{const a=n.current;if(a)return XM(a)},[]),i.jsx(g2,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Le(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),FCe=N.forwardRef((t,e)=>{const r=Od(ti,t.__scopeMenu);return i.jsx(g2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),BCe=od("MenuContent.ScrollLock"),g2=N.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:x,...v}=t,y=Od(ti,r),w=uy(ti,r),_=lS(r),A=TQ(r),C=kCe(r),[S,E]=N.useState(null),P=N.useRef(null),R=Et(e,P,y.onContentChange),O=N.useRef(0),D=N.useRef(""),I=N.useRef(0),$=N.useRef(null),M=N.useRef("right"),U=N.useRef(0),H=x?rS:N.Fragment,z=x?{as:BCe,allowPinchZoom:!0}:void 0,q=W=>{const B=D.current+W,F=C().filter(ye=>!ye.disabled),Y=document.activeElement,oe=F.find(ye=>ye.ref.current===Y)?.textValue,xe=F.map(ye=>ye.textValue),J=JCe(xe,B,oe),Ee=F.find(ye=>ye.textValue===J)?.ref.current;(function ye(je){D.current=je,window.clearTimeout(O.current),je!==""&&(O.current=window.setTimeout(()=>ye(""),1e3))})(B),Ee&&setTimeout(()=>Ee.focus())};N.useEffect(()=>()=>window.clearTimeout(O.current),[]),KM();const V=N.useCallback(W=>M.current===$.current?.side&&eTe(W,$.current?.area),[]);return i.jsx(LCe,{scope:r,searchRef:D,onItemEnter:N.useCallback(W=>{V(W)&&W.preventDefault()},[V]),onItemLeave:N.useCallback(W=>{V(W)||(P.current?.focus(),E(null))},[V]),onTriggerLeave:N.useCallback(W=>{V(W)&&W.preventDefault()},[V]),pointerGraceTimerRef:I,onPointerGraceIntentChange:N.useCallback(W=>{$.current=W},[]),children:i.jsx(H,{...z,children:i.jsx(eS,{asChild:!0,trapped:s,onMountAutoFocus:Le(a,W=>{W.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(_p,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:i.jsx(AQ,{asChild:!0,...A,dir:w.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:E,onEntryFocus:Le(c,W=>{w.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(HM,{role:"menu","aria-orientation":"vertical","data-state":XQ(y.open),"data-radix-menu-content":"",dir:w.dir,..._,...v,ref:R,style:{outline:"none",...v.style},onKeyDown:Le(v.onKeyDown,W=>{const F=W.target.closest("[data-radix-menu-content]")===W.currentTarget,Y=W.ctrlKey||W.altKey||W.metaKey,oe=W.key.length===1;F&&(W.key==="Tab"&&W.preventDefault(),!Y&&oe&&q(W.key));const xe=P.current;if(W.target!==xe||!CCe.includes(W.key))return;W.preventDefault();const Ee=C().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);EQ.includes(W.key)&&Ee.reverse(),YCe(Ee)}),onBlur:Le(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(O.current),D.current="")}),onPointerMove:Le(t.onPointerMove,Gg(W=>{const B=W.target,F=U.current!==W.clientX;if(W.currentTarget.contains(B)&&F){const Y=W.clientX>U.current?"right":"left";M.current=Y,U.current=W.clientX}}))})})})})})})});RQ.displayName=ti;var UCe="MenuGroup",v2=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return i.jsx(He.div,{role:"group",...n,ref:e})});v2.displayName=UCe;var zCe="MenuLabel",IQ=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return i.jsx(He.div,{...n,ref:e})});IQ.displayName=zCe;var aw="MenuItem",aU="menu.itemSelect",cS=N.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,a=N.useRef(null),o=uy(aw,t.__scopeMenu),l=m2(aw,t.__scopeMenu),c=Et(e,a),u=N.useRef(!1),d=()=>{const f=a.current;if(!r&&f){const m=new CustomEvent(aU,{bubbles:!0,cancelable:!0});f.addEventListener(aU,g=>n?.(g),{once:!0}),_M(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(MQ,{...s,ref:c,disabled:r,onClick:Le(t.onClick,d),onPointerDown:f=>{t.onPointerDown?.(f),u.current=!0},onPointerUp:Le(t.onPointerUp,f=>{u.current||f.currentTarget?.click()}),onKeyDown:Le(t.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||aO.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});cS.displayName=aw;var MQ=N.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...a}=t,o=m2(aw,r),l=TQ(r),c=N.useRef(null),u=Et(e,c),[d,f]=N.useState(!1),[m,g]=N.useState("");return N.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[a.children]),i.jsx(Wg.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:i.jsx(NQ,{asChild:!0,...l,focusable:!n,children:i.jsx(He.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:u,onPointerMove:Le(t.onPointerMove,Gg(x=>{n?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Le(t.onPointerLeave,Gg(x=>o.onItemLeave(x))),onFocus:Le(t.onFocus,()=>f(!0)),onBlur:Le(t.onBlur,()=>f(!1))})})})}),qCe="MenuCheckboxItem",DQ=N.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return i.jsx(UQ,{scope:t.__scopeMenu,checked:r,children:i.jsx(cS,{role:"menuitemcheckbox","aria-checked":iw(r)?"mixed":r,...s,ref:e,"data-state":x2(r),onSelect:Le(s.onSelect,()=>n?.(iw(r)?!0:!r),{checkForDefaultPrevented:!1})})})});DQ.displayName=qCe;var LQ="MenuRadioGroup",[VCe,HCe]=kd(LQ,{value:void 0,onValueChange:()=>{}}),$Q=N.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,a=cn(n);return i.jsx(VCe,{scope:t.__scopeMenu,value:r,onValueChange:a,children:i.jsx(v2,{...s,ref:e})})});$Q.displayName=LQ;var FQ="MenuRadioItem",BQ=N.forwardRef((t,e)=>{const{value:r,...n}=t,s=HCe(FQ,t.__scopeMenu),a=r===s.value;return i.jsx(UQ,{scope:t.__scopeMenu,checked:a,children:i.jsx(cS,{role:"menuitemradio","aria-checked":a,...n,ref:e,"data-state":x2(a),onSelect:Le(n.onSelect,()=>s.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});BQ.displayName=FQ;var y2="MenuItemIndicator",[UQ,WCe]=kd(y2,{checked:!1}),zQ=N.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,a=WCe(y2,r);return i.jsx(xs,{present:n||iw(a.checked)||a.checked===!0,children:i.jsx(He.span,{...s,ref:e,"data-state":x2(a.checked)})})});zQ.displayName=y2;var GCe="MenuSeparator",qQ=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return i.jsx(He.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});qQ.displayName=GCe;var KCe="MenuArrow",VQ=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=lS(r);return i.jsx(WM,{...s,...n,ref:e})});VQ.displayName=KCe;var XCe="MenuSub",[l7e,HQ]=kd(XCe),Vm="MenuSubTrigger",WQ=N.forwardRef((t,e)=>{const r=Od(Vm,t.__scopeMenu),n=uy(Vm,t.__scopeMenu),s=HQ(Vm,t.__scopeMenu),a=m2(Vm,t.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>d,[d]),N.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),i.jsx(f2,{asChild:!0,...u,children:i.jsx(MQ,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":XQ(r.open),...t,ref:U_(e,s.onTriggerChange),onClick:f=>{t.onClick?.(f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Le(t.onPointerMove,Gg(f=>{a.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:Le(t.onPointerLeave,Gg(f=>{d();const m=r.content?.getBoundingClientRect();if(m){const g=r.content?.dataset.side,x=g==="right",v=x?-5:5,y=m[x?"left":"right"],w=m[x?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+v,y:f.clientY},{x:y,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:y,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Le(t.onKeyDown,f=>{const m=a.searchRef.current!=="";t.disabled||m&&f.key===" "||TCe[n.dir].includes(f.key)&&(r.onOpenChange(!0),r.content?.focus(),f.preventDefault())})})})});WQ.displayName=Vm;var GQ="MenuSubContent",KQ=N.forwardRef((t,e)=>{const r=kQ(ti,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,a=Od(ti,t.__scopeMenu),o=uy(ti,t.__scopeMenu),l=HQ(GQ,t.__scopeMenu),c=N.useRef(null),u=Et(e,c);return i.jsx(Wg.Provider,{scope:t.__scopeMenu,children:i.jsx(xs,{present:n||a.open,children:i.jsx(Wg.Slot,{scope:t.__scopeMenu,children:i.jsx(g2,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{o.isUsingKeyboardRef.current&&c.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Le(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Le(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Le(t.onKeyDown,d=>{const f=d.currentTarget.contains(d.target),m=PCe[o.dir].includes(d.key);f&&m&&(a.onOpenChange(!1),l.trigger?.focus(),d.preventDefault())})})})})})});KQ.displayName=GQ;function XQ(t){return t?"open":"closed"}function iw(t){return t==="indeterminate"}function x2(t){return iw(t)?"indeterminate":t?"checked":"unchecked"}function YCe(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function QCe(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function JCe(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=QCe(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function ZCe(t,e){const{x:r,y:n}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,d=l.y,f=c.x,m=c.y;d>n!=m>n&&r<(f-u)*(n-d)/(m-d)+u&&(s=!s)}return s}function eTe(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return ZCe(r,e)}function Gg(t){return e=>e.pointerType==="mouse"?t(e):void 0}var tTe=PQ,rTe=f2,nTe=OQ,sTe=RQ,aTe=v2,iTe=IQ,oTe=cS,lTe=DQ,cTe=$Q,uTe=BQ,dTe=zQ,hTe=qQ,fTe=VQ,pTe=WQ,mTe=KQ,uS="DropdownMenu",[gTe,c7e]=cs(uS,[CQ]),Hs=CQ(),[vTe,YQ]=gTe(uS),QQ=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=Hs(e),u=N.useRef(null),[d,f]=Ma({prop:s,defaultProp:a??!1,onChange:o,caller:uS});return i.jsx(vTe,{scope:e,triggerId:ka(),triggerRef:u,contentId:ka(),open:d,onOpenChange:f,onOpenToggle:N.useCallback(()=>f(m=>!m),[f]),modal:l,children:i.jsx(tTe,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};QQ.displayName=uS;var JQ="DropdownMenuTrigger",ZQ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,a=YQ(JQ,r),o=Hs(r);return i.jsx(rTe,{asChild:!0,...o,children:i.jsx(He.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:U_(e,a.triggerRef),onPointerDown:Le(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Le(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});ZQ.displayName=JQ;var yTe="DropdownMenuPortal",eJ=t=>{const{__scopeDropdownMenu:e,...r}=t,n=Hs(e);return i.jsx(nTe,{...n,...r})};eJ.displayName=yTe;var tJ="DropdownMenuContent",rJ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=YQ(tJ,r),a=Hs(r),o=N.useRef(!1);return i.jsx(sTe,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...n,ref:e,onCloseAutoFocus:Le(t.onCloseAutoFocus,l=>{o.current||s.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Le(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});rJ.displayName=tJ;var xTe="DropdownMenuGroup",bTe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(aTe,{...s,...n,ref:e})});bTe.displayName=xTe;var wTe="DropdownMenuLabel",nJ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(iTe,{...s,...n,ref:e})});nJ.displayName=wTe;var _Te="DropdownMenuItem",sJ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(oTe,{...s,...n,ref:e})});sJ.displayName=_Te;var STe="DropdownMenuCheckboxItem",aJ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(lTe,{...s,...n,ref:e})});aJ.displayName=STe;var jTe="DropdownMenuRadioGroup",ATe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(cTe,{...s,...n,ref:e})});ATe.displayName=jTe;var NTe="DropdownMenuRadioItem",iJ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(uTe,{...s,...n,ref:e})});iJ.displayName=NTe;var ETe="DropdownMenuItemIndicator",oJ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(dTe,{...s,...n,ref:e})});oJ.displayName=ETe;var CTe="DropdownMenuSeparator",lJ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(hTe,{...s,...n,ref:e})});lJ.displayName=CTe;var TTe="DropdownMenuArrow",PTe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(fTe,{...s,...n,ref:e})});PTe.displayName=TTe;var kTe="DropdownMenuSubTrigger",cJ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(pTe,{...s,...n,ref:e})});cJ.displayName=kTe;var OTe="DropdownMenuSubContent",uJ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Hs(r);return i.jsx(mTe,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});uJ.displayName=OTe;var RTe=QQ,ITe=ZQ,MTe=eJ,dJ=rJ,hJ=nJ,fJ=sJ,pJ=aJ,mJ=iJ,gJ=oJ,vJ=lJ,yJ=cJ,xJ=uJ;const b2=RTe,w2=ITe,DTe=N.forwardRef(({className:t,inset:e,children:r,...n},s)=>i.jsxs(yJ,{ref:s,className:Ie("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n,children:[r,i.jsx(TM,{className:"ml-auto"})]}));DTe.displayName=yJ.displayName;const LTe=N.forwardRef(({className:t,...e},r)=>i.jsx(xJ,{ref:r,className:Ie("z-50 min-w-[8rem] origin-[--radix-dropdown-menu-content-transform-origin] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));LTe.displayName=xJ.displayName;const dS=N.forwardRef(({className:t,sideOffset:e=4,...r},n)=>i.jsx(MTe,{children:i.jsx(dJ,{ref:n,sideOffset:e,className:Ie("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] origin-[--radix-dropdown-menu-content-transform-origin] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));dS.displayName=dJ.displayName;const hl=N.forwardRef(({className:t,inset:e,...r},n)=>i.jsx(fJ,{ref:n,className:Ie("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r}));hl.displayName=fJ.displayName;const $Te=N.forwardRef(({className:t,children:e,checked:r,...n},s)=>i.jsxs(pJ,{ref:s,className:Ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(gJ,{children:i.jsx(EM,{className:"h-4 w-4"})})}),e]}));$Te.displayName=pJ.displayName;const FTe=N.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(mJ,{ref:n,className:Ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(gJ,{children:i.jsx(wX,{className:"h-2 w-2 fill-current"})})}),e]}));FTe.displayName=mJ.displayName;const bJ=N.forwardRef(({className:t,inset:e,...r},n)=>i.jsx(hJ,{ref:n,className:Ie("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));bJ.displayName=hJ.displayName;const iO=N.forwardRef(({className:t,...e},r)=>i.jsx(vJ,{ref:r,className:Ie("-mx-1 my-1 h-px bg-muted",t),...e}));iO.displayName=vJ.displayName;function BTe(){const{theme:t,setTheme:e}=s1e(),r=()=>{switch(t){case"light":return i.jsx(i5,{className:"h-4 w-4"});case"dark":return i.jsx(s5,{className:"h-4 w-4"});case"system":return i.jsx(qb,{className:"h-4 w-4"})}};return i.jsxs(b2,{children:[i.jsx(w2,{asChild:!0,children:i.jsxs(se,{variant:"ghost",size:"sm",className:"h-8 w-8 px-0",children:[r(),i.jsx("span",{className:"sr-only",children:"Trocar tema"})]})}),i.jsxs(dS,{align:"end",className:"border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800",children:[i.jsxs(hl,{onClick:()=>e("light"),className:"flex cursor-pointer items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700",children:[i.jsx(i5,{className:"h-4 w-4"}),i.jsx("span",{children:"Claro"})]}),i.jsxs(hl,{onClick:()=>e("dark"),className:"flex cursor-pointer items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700",children:[i.jsx(s5,{className:"h-4 w-4"}),i.jsx("span",{children:"Escuro"})]}),i.jsxs(hl,{onClick:()=>e("system"),className:"flex cursor-pointer items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700",children:[i.jsx(qb,{className:"h-4 w-4"}),i.jsx("span",{children:"Sistema"})]})]})]})}function ha(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Bc(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const wJ=6048e5,UTe=864e5,_J=6e4,SJ=36e5;let zTe={};function hS(){return zTe}function Kg(t,e){const r=hS(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=ha(t),a=s.getDay(),o=(a<n?7:0)+a-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function ow(t){return Kg(t,{weekStartsOn:1})}function jJ(t){const e=ha(t),r=e.getFullYear(),n=Bc(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=ow(n),a=Bc(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=ow(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function lw(t){const e=ha(t);return e.setHours(0,0,0,0),e}function iU(t){const e=ha(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function AJ(t,e){const r=lw(t),n=lw(e),s=+r-iU(r),a=+n-iU(n);return Math.round((s-a)/UTe)}function qTe(t){const e=jJ(t),r=Bc(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),ow(r)}function VTe(t){return Bc(t,Date.now())}function HTe(t,e){const r=lw(t),n=lw(e);return+r==+n}function WTe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function GTe(t){if(!WTe(t)&&typeof t!="number")return!1;const e=ha(t);return!isNaN(Number(e))}function KTe(t,e){const r=ha(t),n=ha(e),s=oU(r,n),a=Math.abs(AJ(r,n));r.setDate(r.getDate()-s*a);const o=+(oU(r,n)===-s),l=s*(a-o);return l===0?0:l}function oU(t,e){const r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function XTe(t){const e=ha(t),r=Bc(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const YTe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},QTe=(t,e,r)=>{let n;const s=YTe[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function af(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const JTe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ZTe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ePe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tPe={date:af({formats:JTe,defaultWidth:"full"}),time:af({formats:ZTe,defaultWidth:"full"}),dateTime:af({formats:ePe,defaultWidth:"full"})},rPe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nPe=(t,e,r,n)=>rPe[t];function co(t){return(e,r)=>{const n=r?.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r?.width?String(r.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r?.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const sPe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},aPe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},iPe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},oPe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lPe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cPe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uPe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},dPe={ordinalNumber:uPe,era:co({values:sPe,defaultWidth:"wide"}),quarter:co({values:aPe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:co({values:iPe,defaultWidth:"wide"}),day:co({values:oPe,defaultWidth:"wide"}),dayPeriod:co({values:lPe,defaultWidth:"wide",formattingValues:cPe,defaultFormattingWidth:"wide"})};function uo(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?fPe(l,f=>f.test(o)):hPe(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function hPe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function fPe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function NJ(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const pPe=/^(\d+)(th|st|nd|rd)?/i,mPe=/\d+/i,gPe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vPe={any:[/^b/i,/^(a|c)/i]},yPe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xPe={any:[/1/i,/2/i,/3/i,/4/i]},bPe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wPe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_Pe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},SPe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jPe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},APe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},NPe={ordinalNumber:NJ({matchPattern:pPe,parsePattern:mPe,valueCallback:t=>parseInt(t,10)}),era:uo({matchPatterns:gPe,defaultMatchWidth:"wide",parsePatterns:vPe,defaultParseWidth:"any"}),quarter:uo({matchPatterns:yPe,defaultMatchWidth:"wide",parsePatterns:xPe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:uo({matchPatterns:bPe,defaultMatchWidth:"wide",parsePatterns:wPe,defaultParseWidth:"any"}),day:uo({matchPatterns:_Pe,defaultMatchWidth:"wide",parsePatterns:SPe,defaultParseWidth:"any"}),dayPeriod:uo({matchPatterns:jPe,defaultMatchWidth:"any",parsePatterns:APe,defaultParseWidth:"any"})},EPe={code:"en-US",formatDistance:QTe,formatLong:tPe,formatRelative:nPe,localize:dPe,match:NPe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function CPe(t){const e=ha(t);return AJ(e,XTe(e))+1}function TPe(t){const e=ha(t),r=+ow(e)-+qTe(e);return Math.round(r/wJ)+1}function EJ(t,e){const r=ha(t),n=r.getFullYear(),s=hS(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=Bc(t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=Kg(o,e),c=Bc(t,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=Kg(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function PPe(t,e){const r=hS(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=EJ(t,e),a=Bc(t,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),Kg(a,e)}function kPe(t,e){const r=ha(t),n=+Kg(r,e)-+PPe(r,e);return Math.round(n/wJ)+1}function Sr(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const nc={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Sr(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Sr(r+1,2)},d(t,e){return Sr(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Sr(t.getHours()%12||12,e.length)},H(t,e){return Sr(t.getHours(),e.length)},m(t,e){return Sr(t.getMinutes(),e.length)},s(t,e){return Sr(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Sr(s,e.length)}},Eh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lU={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return nc.y(t,e)},Y:function(t,e,r,n){const s=EJ(t,n),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return Sr(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Sr(a,e.length)},R:function(t,e){const r=jJ(t);return Sr(r,e.length)},u:function(t,e){const r=t.getFullYear();return Sr(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Sr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Sr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return nc.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Sr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=kPe(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Sr(s,e.length)},I:function(t,e,r){const n=TPe(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Sr(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):nc.d(t,e)},D:function(t,e,r){const n=CPe(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Sr(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Sr(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Sr(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Sr(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Eh.noon:n===0?s=Eh.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Eh.evening:n>=12?s=Eh.afternoon:n>=4?s=Eh.morning:s=Eh.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return nc.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):nc.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Sr(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Sr(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):nc.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):nc.s(t,e)},S:function(t,e){return nc.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return uU(n);case"XXXX":case"XX":return xu(n);case"XXXXX":case"XXX":default:return xu(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return uU(n);case"xxxx":case"xx":return xu(n);case"xxxxx":case"xxx":default:return xu(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+cU(n,":");case"OOOO":default:return"GMT"+xu(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+cU(n,":");case"zzzz":default:return"GMT"+xu(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Sr(n,e.length)},T:function(t,e,r){const n=t.getTime();return Sr(n,e.length)}};function cU(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+e+Sr(a,2)}function uU(t,e){return t%60===0?(t>0?"-":"+")+Sr(Math.abs(t)/60,2):xu(t,e)}function xu(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Sr(Math.trunc(n/60),2),a=Sr(n%60,2);return r+s+e+a}const dU=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},CJ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},OPe=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return dU(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",dU(n,e)).replace("{{time}}",CJ(s,e))},RPe={p:CJ,P:OPe},IPe=/^D+$/,MPe=/^Y+$/,DPe=["D","DD","YY","YYYY"];function LPe(t){return IPe.test(t)}function $Pe(t){return MPe.test(t)}function FPe(t,e,r){const n=BPe(t,e,r);if(console.warn(n),DPe.includes(t))throw new RangeError(n)}function BPe(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const UPe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zPe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qPe=/^'([^]*?)'?$/,VPe=/''/g,HPe=/[a-zA-Z]/;function Mn(t,e,r){const n=hS(),s=r?.locale??n.locale??EPe,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=ha(t);if(!GTe(l))throw new RangeError("Invalid time value");let c=e.match(zPe).map(d=>{const f=d[0];if(f==="p"||f==="P"){const m=RPe[f];return m(d,s.formatLong)}return d}).join("").match(UPe).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const f=d[0];if(f==="'")return{isToken:!1,value:WPe(d)};if(lU[f])return{isToken:!0,value:d};if(f.match(HPe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(d=>{if(!d.isToken)return d.value;const f=d.value;(!r?.useAdditionalWeekYearTokens&&$Pe(f)||!r?.useAdditionalDayOfYearTokens&&LPe(f))&&FPe(f,e,String(t));const m=lU[f[0]];return m(l,f,s.localize,u)}).join("")}function WPe(t){const e=t.match(qPe);return e?e[1].replace(VPe,"'"):t}function GPe(t){return+ha(t)>Date.now()}function KPe(t){return HTe(t,VTe(t))}function hU(t,e){const n=JPe(t);let s;if(n.date){const c=ZPe(n.date,2);s=eke(c.restDateString,c.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const a=s.getTime();let o=0,l;if(n.time&&(o=tke(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=rke(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(a+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(a+o+l)}const f0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},XPe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,YPe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,QPe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function JPe(t){const e={},r=t.split(f0.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],f0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(f0.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const s=f0.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function ZPe(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?s:a*100,restDateString:t.slice((n[1]||n[2]).length)}}function eke(t,e){if(e===null)return new Date(NaN);const r=t.match(XPe);if(!r)return new Date(NaN);const n=!!r[4],s=Em(r[1]),a=Em(r[2])-1,o=Em(r[3]),l=Em(r[4]),c=Em(r[5])-1;if(n)return oke(e,l,c)?nke(e,l,c):new Date(NaN);{const u=new Date(0);return!ake(e,a,o)||!ike(e,s)?new Date(NaN):(u.setUTCFullYear(e,a,Math.max(s,o)),u)}}function Em(t){return t?parseInt(t):1}function tke(t){const e=t.match(YPe);if(!e)return NaN;const r=wE(e[1]),n=wE(e[2]),s=wE(e[3]);return lke(r,n,s)?r*SJ+n*_J+s*1e3:NaN}function wE(t){return t&&parseFloat(t.replace(",","."))||0}function rke(t){if(t==="Z")return 0;const e=t.match(QPe);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return cke(n,s)?r*(n*SJ+s*_J):NaN}function nke(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const s=n.getUTCDay()||7,a=(e-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+a),n}const ske=[31,null,31,30,31,30,31,31,30,31,30,31];function TJ(t){return t%400===0||t%4===0&&t%100!==0}function ake(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(ske[e]||(TJ(t)?29:28))}function ike(t,e){return e>=1&&e<=(TJ(t)?366:365)}function oke(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function lke(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function cke(t,e){return e>=0&&e<=59}const uke={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},dke=(t,e,r)=>{let n;const s=uke[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",String(e)),r?.addSuffix?r.comparison&&r.comparison>0?"em "+n:"há "+n:n},hke={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},fke={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},pke={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mke={date:af({formats:hke,defaultWidth:"full"}),time:af({formats:fke,defaultWidth:"full"}),dateTime:af({formats:pke,defaultWidth:"full"})},gke={lastWeek:t=>{const e=t.getDay();return"'"+(e===0||e===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},vke=(t,e,r,n)=>{const s=gke[t];return typeof s=="function"?s(e):s},yke={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},xke={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},bke={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},wke={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},_ke={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},Ske={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},jke=(t,e)=>{const r=Number(t);return e?.unit==="week"?r+"ª":r+"º"},Ake={ordinalNumber:jke,era:co({values:yke,defaultWidth:"wide"}),quarter:co({values:xke,defaultWidth:"wide",argumentCallback:t=>t-1}),month:co({values:bke,defaultWidth:"wide"}),day:co({values:wke,defaultWidth:"wide"}),dayPeriod:co({values:_ke,defaultWidth:"wide",formattingValues:Ske,defaultFormattingWidth:"wide"})},Nke=/^(\d+)[ºªo]?/i,Eke=/\d+/i,Cke={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},Tke={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},Pke={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},kke={any:[/1/i,/2/i,/3/i,/4/i]},Oke={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},Rke={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},Ike={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},Mke={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},Dke={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},Lke={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},$ke={ordinalNumber:NJ({matchPattern:Nke,parsePattern:Eke,valueCallback:t=>parseInt(t,10)}),era:uo({matchPatterns:Cke,defaultMatchWidth:"wide",parsePatterns:Tke,defaultParseWidth:"any"}),quarter:uo({matchPatterns:Pke,defaultMatchWidth:"wide",parsePatterns:kke,defaultParseWidth:"any",valueCallback:t=>t+1}),month:uo({matchPatterns:Oke,defaultMatchWidth:"wide",parsePatterns:Rke,defaultParseWidth:"any"}),day:uo({matchPatterns:Ike,defaultMatchWidth:"wide",parsePatterns:Mke,defaultParseWidth:"any"}),dayPeriod:uo({matchPatterns:Dke,defaultMatchWidth:"any",parsePatterns:Lke,defaultParseWidth:"any"})},dd={code:"pt-BR",formatDistance:dke,formatLong:mke,formatRelative:vke,localize:Ake,match:$ke,options:{weekStartsOn:0,firstWeekContainsDate:1}};function oO(t,[e,r]){return Math.min(r,Math.max(e,t))}function Fke(t,e){return N.useReducer((r,n)=>e[r][n]??r,t)}var _2="ScrollArea",[PJ,u7e]=cs(_2),[Bke,ui]=PJ(_2),kJ=N.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:a=600,...o}=t,[l,c]=N.useState(null),[u,d]=N.useState(null),[f,m]=N.useState(null),[g,x]=N.useState(null),[v,y]=N.useState(null),[w,_]=N.useState(0),[A,C]=N.useState(0),[S,E]=N.useState(!1),[P,R]=N.useState(!1),O=Et(e,I=>c(I)),D=Ep(s);return i.jsx(Bke,{scope:r,type:n,dir:D,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:S,onScrollbarXEnabledChange:E,scrollbarY:v,onScrollbarYChange:y,scrollbarYEnabled:P,onScrollbarYEnabledChange:R,onCornerWidthChange:_,onCornerHeightChange:C,children:i.jsx(He.div,{dir:D,...o,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":A+"px",...t.style}})})});kJ.displayName=_2;var OJ="ScrollAreaViewport",RJ=N.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:s,...a}=t,o=ui(OJ,r),l=N.useRef(null),c=Et(e,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(He.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});RJ.displayName=OJ;var Oo="ScrollAreaScrollbar",S2=N.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=ui(Oo,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return N.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(Uke,{...n,ref:e,forceMount:r}):s.type==="scroll"?i.jsx(zke,{...n,ref:e,forceMount:r}):s.type==="auto"?i.jsx(IJ,{...n,ref:e,forceMount:r}):s.type==="always"?i.jsx(j2,{...n,ref:e}):null});S2.displayName=Oo;var Uke=N.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=ui(Oo,t.__scopeScrollArea),[a,o]=N.useState(!1);return N.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(xs,{present:r||a,children:i.jsx(IJ,{"data-state":a?"visible":"hidden",...n,ref:e})})}),zke=N.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=ui(Oo,t.__scopeScrollArea),a=t.orientation==="horizontal",o=pS(()=>c("SCROLL_END"),100),[l,c]=Fke("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),N.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const g=u[d];f!==g&&(c("SCROLL"),o()),f=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,a,c,o]),i.jsx(xs,{present:r||l!=="hidden",children:i.jsx(j2,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Le(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Le(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),IJ=N.forwardRef((t,e)=>{const r=ui(Oo,t.__scopeScrollArea),{forceMount:n,...s}=t,[a,o]=N.useState(!1),l=t.orientation==="horizontal",c=pS(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Mf(r.viewport,c),Mf(r.content,c),i.jsx(xs,{present:n||a,children:i.jsx(j2,{"data-state":a?"visible":"hidden",...s,ref:e})})}),j2=N.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=ui(Oo,t.__scopeScrollArea),a=N.useRef(null),o=N.useRef(0),[l,c]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=FJ(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,g){return Kke(m,o.current,l,g)}return r==="horizontal"?i.jsx(qke,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,g=fU(m,l,s.dir);a.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=f(m,s.dir))}}):r==="vertical"?i.jsx(Vke,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,g=fU(m,l);a.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=f(m))}}):null}),qke=N.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,a=ui(Oo,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),u=Et(e,c,a.onScrollbarXChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(DJ,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":fS(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),UJ(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:uw(o.paddingLeft),paddingEnd:uw(o.paddingRight)}})}})}),Vke=N.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,a=ui(Oo,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),u=Et(e,c,a.onScrollbarYChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(DJ,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":fS(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),UJ(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:uw(o.paddingTop),paddingEnd:uw(o.paddingBottom)}})}})}),[Hke,MJ]=PJ(Oo),DJ=N.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=t,g=ui(Oo,r),[x,v]=N.useState(null),y=Et(e,O=>v(O)),w=N.useRef(null),_=N.useRef(""),A=g.viewport,C=n.content-n.viewport,S=cn(d),E=cn(c),P=pS(f,10);function R(O){if(w.current){const D=O.clientX-w.current.left,I=O.clientY-w.current.top;u({x:D,y:I})}}return N.useEffect(()=>{const O=D=>{const I=D.target;x?.contains(I)&&S(D,C)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[A,x,C,S]),N.useEffect(E,[n,E]),Mf(x,P),Mf(g.content,P),i.jsx(Hke,{scope:r,scrollbar:x,hasThumb:s,onThumbChange:cn(a),onThumbPointerUp:cn(o),onThumbPositionChange:E,onThumbPointerDown:cn(l),children:i.jsx(He.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:Le(t.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),w.current=x.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),R(O))}),onPointerMove:Le(t.onPointerMove,R),onPointerUp:Le(t.onPointerUp,O=>{const D=O.target;D.hasPointerCapture(O.pointerId)&&D.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=_.current,g.viewport&&(g.viewport.style.scrollBehavior=""),w.current=null})})})}),cw="ScrollAreaThumb",LJ=N.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=MJ(cw,t.__scopeScrollArea);return i.jsx(xs,{present:r||s.hasThumb,children:i.jsx(Wke,{ref:e,...n})})}),Wke=N.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,a=ui(cw,r),o=MJ(cw,r),{onThumbPositionChange:l}=o,c=Et(e,f=>o.onThumbChange(f)),u=N.useRef(void 0),d=pS(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const f=a.viewport;if(f){const m=()=>{if(d(),!u.current){const g=Xke(f,l);u.current=g,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[a.viewport,d,l]),i.jsx(He.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Le(t.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),x=f.clientX-g.left,v=f.clientY-g.top;o.onThumbPointerDown({x,y:v})}),onPointerUp:Le(t.onPointerUp,o.onThumbPointerUp)})});LJ.displayName=cw;var A2="ScrollAreaCorner",$J=N.forwardRef((t,e)=>{const r=ui(A2,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?i.jsx(Gke,{...t,ref:e}):null});$J.displayName=A2;var Gke=N.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=ui(A2,r),[a,o]=N.useState(0),[l,c]=N.useState(0),u=!!(a&&l);return Mf(s.scrollbarX,()=>{const d=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(d),c(d)}),Mf(s.scrollbarY,()=>{const d=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(d),o(d)}),u?i.jsx(He.div,{...n,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function uw(t){return t?parseInt(t,10):0}function FJ(t,e){const r=t/e;return isNaN(r)?0:r}function fS(t){const e=FJ(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function Kke(t,e,r,n="ltr"){const s=fS(r),a=s/2,o=e||a,l=s-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return BJ([c,u],f)(t)}function fU(t,e,r="ltr"){const n=fS(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,l=a-n,c=r==="ltr"?[0,o]:[o*-1,0],u=oO(t,c);return BJ([0,o],[0,l])(u)}function BJ(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function UJ(t,e){return t>0&&t<e}var Xke=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return(function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=r.left!==a.left,l=r.top!==a.top;(o||l)&&e(),r=a,n=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(n)};function pS(t,e){const r=cn(t),n=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),N.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Mf(t,e){const r=cn(e);gn(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var zJ=kJ,Yke=RJ,Qke=$J;const Xg=N.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(zJ,{ref:n,className:Ie("relative overflow-hidden",t),...r,children:[i.jsx(Yke,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(qJ,{}),i.jsx(Qke,{})]}));Xg.displayName=zJ.displayName;const qJ=N.forwardRef(({className:t,orientation:e="vertical",...r},n)=>i.jsx(S2,{ref:n,orientation:e,className:Ie("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:i.jsx(LJ,{className:"relative flex-1 rounded-full bg-border"})}));qJ.displayName=S2.displayName;function Jke({notificacoes:t,isLoading:e,onMarcarComoLida:r,onMarcarTodasComoLidas:n,onLimparHistorico:s,onClose:a}){const o=d=>{switch(d){case"CRITICA":return i.jsx(ir,{className:"h-4 w-4 text-red-500"});case"ALTA":return i.jsx(jr,{className:"h-4 w-4 text-orange-500"});case"MEDIA":return i.jsx(zm,{className:"h-4 w-4 text-blue-500"});default:return i.jsx(ar,{className:"h-4 w-4 text-gray-500"})}},l=(d,f)=>{if(f==="lida")return"bg-gray-50";switch(d){case"CRITICA":return"bg-red-50 hover:bg-red-100";case"ALTA":return"bg-orange-50 hover:bg-orange-100";case"MEDIA":return"bg-blue-50 hover:bg-blue-100";default:return"bg-white hover:bg-gray-50"}},c=t.slice(0,10),u=t.some(d=>d.status==="nao_lida");return i.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50","data-testid":"dropdown-notifications",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Notificações"}),i.jsxs("div",{className:"flex items-center gap-2",children:[u&&i.jsx(se,{variant:"ghost",size:"sm",onClick:n,"data-testid":"button-mark-all-read",children:"Marcar todas como lidas"}),i.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700","data-testid":"button-close-notifications",children:i.jsx(Vi,{className:"h-4 w-4"})})]})]}),i.jsx(Xg,{className:"h-96",children:e?i.jsx("div",{className:"p-4 text-center text-gray-500",children:"Carregando notificações..."}):c.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(gX,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-500",children:"Nenhuma notificação"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Você será notificado sobre eventos importantes aqui"})]}):i.jsx("div",{className:"divide-y divide-gray-100",children:c.map(d=>i.jsx("div",{className:`p-4 cursor-pointer transition-colors ${l(d.prioridade,d.status)}`,onClick:()=>{d.status==="nao_lida"&&r(d.id),d.linkRelacionado&&(window.location.href=d.linkRelacionado,a())},"data-testid":`notification-item-${d.id}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"mt-1",children:o(d.prioridade)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsx("p",{className:"font-medium text-sm text-gray-900",children:d.titulo}),d.status==="nao_lida"&&i.jsx("span",{className:"flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full ml-2"})]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:d.mensagem}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(_n,{className:"h-3 w-3 text-gray-400"}),i.jsx("span",{className:"text-xs text-gray-500",children:Mn(new Date(d.createdAt),"dd 'de' MMM 'às' HH:mm",{locale:dd})}),d.categoria&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-gray-400",children:"•"}),i.jsx("span",{className:"text-xs text-gray-500 capitalize",children:d.categoria})]})]})]})]})},d.id))})}),c.length>0&&i.jsx("div",{className:"p-3 border-t bg-gray-50",children:i.jsx("button",{onClick:()=>{s(),a()},className:"text-sm text-red-600 hover:text-red-700 font-medium text-center block w-full","data-testid":"button-clear-history",children:"Limpar Histórico"})})]})}function Zke(){const[t,e]=N.useState(!1),r=ys(),{data:n,isLoading:s}=nt({queryKey:["/api/alertas/notificacoes"],refetchInterval:6e4,refetchOnWindowFocus:!0}),a=n?.notificacoes||[],o=n?.totalNaoLidas||0,l=Mt({mutationFn:async g=>await Je(`/api/alertas/notificacoes/${g}/marcar-lida`,{method:"POST"}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/alertas/notificacoes"]})},onError:g=>{console.error("Erro ao marcar notificação como lida:",g)}}),c=g=>{l.mutate(g)},u=Mt({mutationFn:async()=>await Je("/api/alertas/notificacoes/marcar-todas-lidas",{method:"POST"}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/alertas/notificacoes"]})},onError:g=>{console.error("Erro ao marcar todas como lidas:",g)}}),d=Mt({mutationFn:async()=>await Je("/api/alertas/notificacoes/all",{method:"DELETE"}),onSuccess:()=>{console.log("✅ Cache de notificações invalidado. A UI será atualizada."),r.invalidateQueries({queryKey:["/api/alertas/notificacoes"]})},onError:g=>{console.error("Erro ao limpar histórico:",g)}}),f=()=>{u.mutate()},m=()=>{d.mutate()};return i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>e(!t),className:"relative p-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Notificações","data-testid":"button-notification-bell",children:[i.jsx(gX,{className:"h-5 w-5"}),o>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold","data-testid":"badge-notification-count",children:o>99?"99+":o})]}),t&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>e(!1)}),i.jsx(Jke,{notificacoes:a,isLoading:s,onMarcarComoLida:c,onMarcarTodasComoLidas:f,onLimparHistorico:m,onClose:()=>e(!1)})]})]})}const eOe={dashboard:"Dashboard",propostas:"Propostas",nova:"Nova Proposta",editar:"Editar Proposta",detalhes:"Detalhes da Proposta",credito:"Crédito",fila:"Fila de Análise",formalizacao:"Formalização",financeiro:"Financeiro",pagamentos:"Pagamentos",cobrancas:"Cobranças",admin:"Administração",usuarios:"Usuários & Perfis",configuracoes:"Configurações",tabelas:"Tabelas Comerciais",produtos:"Produtos de Crédito",parceiros:"Parceiros",lojas:"Lojas & Filiais",gestao:"Gestão",contratos:"Contratos",security:"Segurança",owasp:"Dashboard OWASP","aceite-atendente":"Aceite de Propostas"},tOe=t=>{const e=[{name:"Início",path:"/dashboard"}],r=t.replace(/^\//,"").split("/").filter(Boolean);if(r.length===0||r.length===1&&r[0]==="dashboard")return e;let n="";return r.forEach((s,a)=>{n+=`/${s}`;const o=eOe[s]||s.charAt(0).toUpperCase()+s.slice(1);e.push({name:o,path:n})}),e};function rOe({className:t=""}){const[e]=qi(),r=tOe(e);return r.length<=1?null:i.jsx("nav",{className:`flex items-center space-x-1 text-sm text-muted-foreground ${t}`,"aria-label":"Breadcrumb","data-testid":"breadcrumbs-navigation",children:r.map((n,s)=>{const a=s===r.length-1,o=s===0;return i.jsxs("div",{className:"flex items-center",children:[!o&&i.jsx(TM,{className:"h-4 w-4 text-muted-foreground/50"}),a?i.jsxs("span",{className:"font-medium text-foreground","data-testid":`breadcrumb-current-${n.name.toLowerCase().replace(/\s+/g,"-")}`,children:[o&&i.jsx(n5,{className:"inline h-4 w-4 mr-1"}),n.name]}):i.jsxs(on,{to:n.path,className:"hover:text-foreground transition-colors flex items-center","data-testid":`breadcrumb-link-${n.name.toLowerCase().replace(/\s+/g,"-")}`,children:[o&&i.jsx(n5,{className:"inline h-4 w-4 mr-1"}),n.name]})]},n.path)})})}var mS="Collapsible",[nOe,VJ]=cs(mS),[sOe,N2]=nOe(mS),HJ=N.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:n,defaultOpen:s,disabled:a,onOpenChange:o,...l}=t,[c,u]=Ma({prop:n,defaultProp:s??!1,onChange:o,caller:mS});return i.jsx(sOe,{scope:r,disabled:a,contentId:ka(),open:c,onOpenToggle:N.useCallback(()=>u(d=>!d),[u]),children:i.jsx(He.div,{"data-state":C2(c),"data-disabled":a?"":void 0,...l,ref:e})})});HJ.displayName=mS;var WJ="CollapsibleTrigger",GJ=N.forwardRef((t,e)=>{const{__scopeCollapsible:r,...n}=t,s=N2(WJ,r);return i.jsx(He.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":C2(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:e,onClick:Le(t.onClick,s.onOpenToggle)})});GJ.displayName=WJ;var E2="CollapsibleContent",KJ=N.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=N2(E2,t.__scopeCollapsible);return i.jsx(xs,{present:r||s.open,children:({present:a})=>i.jsx(aOe,{...n,ref:e,present:a})})});KJ.displayName=E2;var aOe=N.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:n,children:s,...a}=t,o=N2(E2,r),[l,c]=N.useState(n),u=N.useRef(null),d=Et(e,u),f=N.useRef(0),m=f.current,g=N.useRef(0),x=g.current,v=o.open||l,y=N.useRef(v),w=N.useRef(void 0);return N.useEffect(()=>{const _=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(_)},[]),gn(()=>{const _=u.current;if(_){w.current=w.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const A=_.getBoundingClientRect();f.current=A.height,g.current=A.width,y.current||(_.style.transitionDuration=w.current.transitionDuration,_.style.animationName=w.current.animationName),c(n)}},[o.open,n]),i.jsx(He.div,{"data-state":C2(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:v&&s})});function C2(t){return t?"open":"closed"}var iOe=HJ,oOe=GJ,lOe=KJ,Wi="Accordion",cOe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[T2,uOe,dOe]=ty(Wi),[gS,d7e]=cs(Wi,[dOe,VJ]),P2=VJ(),XJ=G.forwardRef((t,e)=>{const{type:r,...n}=t,s=n,a=n;return i.jsx(T2.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?i.jsx(mOe,{...a,ref:e}):i.jsx(pOe,{...s,ref:e})})});XJ.displayName=Wi;var[YJ,hOe]=gS(Wi),[QJ,fOe]=gS(Wi,{collapsible:!1}),pOe=G.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},collapsible:a=!1,...o}=t,[l,c]=Ma({prop:r,defaultProp:n??"",onChange:s,caller:Wi});return i.jsx(YJ,{scope:t.__scopeAccordion,value:G.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:G.useCallback(()=>a&&c(""),[a,c]),children:i.jsx(QJ,{scope:t.__scopeAccordion,collapsible:a,children:i.jsx(JJ,{...o,ref:e})})})}),mOe=G.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...a}=t,[o,l]=Ma({prop:r,defaultProp:n??[],onChange:s,caller:Wi}),c=G.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=G.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return i.jsx(YJ,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx(QJ,{scope:t.__scopeAccordion,collapsible:!0,children:i.jsx(JJ,{...a,ref:e})})})}),[gOe,vS]=gS(Wi),JJ=G.forwardRef((t,e)=>{const{__scopeAccordion:r,disabled:n,dir:s,orientation:a="vertical",...o}=t,l=G.useRef(null),c=Et(l,e),u=uOe(r),f=Ep(s)==="ltr",m=Le(t.onKeyDown,g=>{if(!cOe.includes(g.key))return;const x=g.target,v=u().filter(R=>!R.ref.current?.disabled),y=v.findIndex(R=>R.ref.current===x),w=v.length;if(y===-1)return;g.preventDefault();let _=y;const A=0,C=w-1,S=()=>{_=y+1,_>C&&(_=A)},E=()=>{_=y-1,_<A&&(_=C)};switch(g.key){case"Home":_=A;break;case"End":_=C;break;case"ArrowRight":a==="horizontal"&&(f?S():E());break;case"ArrowDown":a==="vertical"&&S();break;case"ArrowLeft":a==="horizontal"&&(f?E():S());break;case"ArrowUp":a==="vertical"&&E();break}const P=_%w;v[P].ref.current?.focus()});return i.jsx(gOe,{scope:r,disabled:n,direction:s,orientation:a,children:i.jsx(T2.Slot,{scope:r,children:i.jsx(He.div,{...o,"data-orientation":a,ref:c,onKeyDown:n?void 0:m})})})}),dw="AccordionItem",[vOe,k2]=gS(dw),ZJ=G.forwardRef((t,e)=>{const{__scopeAccordion:r,value:n,...s}=t,a=vS(dw,r),o=hOe(dw,r),l=P2(r),c=ka(),u=n&&o.value.includes(n)||!1,d=a.disabled||t.disabled;return i.jsx(vOe,{scope:r,open:u,disabled:d,triggerId:c,children:i.jsx(iOe,{"data-orientation":a.orientation,"data-state":aZ(u),...l,...s,ref:e,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(n):o.onItemClose(n)}})})});ZJ.displayName=dw;var eZ="AccordionHeader",tZ=G.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,s=vS(Wi,r),a=k2(eZ,r);return i.jsx(He.h3,{"data-orientation":s.orientation,"data-state":aZ(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:e})});tZ.displayName=eZ;var lO="AccordionTrigger",rZ=G.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,s=vS(Wi,r),a=k2(lO,r),o=fOe(lO,r),l=P2(r);return i.jsx(T2.ItemSlot,{scope:r,children:i.jsx(oOe,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...l,...n,ref:e})})});rZ.displayName=lO;var nZ="AccordionContent",sZ=G.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,s=vS(Wi,r),a=k2(nZ,r),o=P2(r);return i.jsx(lOe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...o,...n,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});sZ.displayName=nZ;function aZ(t){return t?"open":"closed"}var yOe=XJ,xOe=ZJ,bOe=tZ,iZ=rZ,oZ=sZ;const wOe=yOe,bu=N.forwardRef(({className:t,...e},r)=>i.jsx(xOe,{ref:r,className:Ie("border-b",t),...e}));bu.displayName="AccordionItem";const wu=N.forwardRef(({className:t,children:e,...r},n)=>i.jsx(bOe,{className:"flex",children:i.jsxs(iZ,{ref:n,className:Ie("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[e,i.jsx(CM,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));wu.displayName=iZ.displayName;const _u=N.forwardRef(({className:t,children:e,...r},n)=>i.jsx(oZ,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:i.jsx("div",{className:Ie("pb-4 pt-0",t),children:e})}));_u.displayName=oZ.displayName;function pt({children:t,title:e,actions:r}){const[n]=qi(),{toast:s}=Fr(),{user:a}=$a(),[o,l]=N.useState(!1),c=f=>f.startsWith("/dashboard")||f.startsWith("/propostas")||f.startsWith("/credito")||f.startsWith("/formalizacao")?"principal":f.startsWith("/financeiro")?"financeiro":f.startsWith("/admin/usuarios")?"gestao-acesso":f.startsWith("/configuracoes")?"configuracoes":f.startsWith("/parceiros")||f.startsWith("/admin/lojas")||f.startsWith("/gestao/contratos")?"gestao-comercial":f.startsWith("/admin/security")?"seguranca":"principal";N.useEffect(()=>{const f=m=>{m.key==="Escape"&&l(!1)};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[]);const u=()=>{l(!1)},d=async()=>{try{await p1e(),s({title:"Logout realizado com sucesso",description:"Você foi desconectado do sistema."})}catch{s({title:"Erro ao fazer logout",description:"Tente novamente em alguns instantes.",variant:"destructive"})}};return i.jsxs("div",{className:"grid min-h-screen w-full overflow-hidden lg:grid-cols-[280px_1fr]",children:[i.jsx(sU,{variant:"banner"}),o&&i.jsx("div",{className:"bg-background/80 fixed inset-0 z-50 backdrop-blur-sm lg:hidden",onClick:()=>l(!1),onKeyDown:f=>f.key==="Escape"&&l(!1),role:"button",tabIndex:0,"aria-label":"Close sidebar"}),i.jsx("div",{className:`lg:w-280 fixed inset-y-0 left-0 z-50 w-72 transform border-r bg-card text-card-foreground transition-transform duration-300 ease-in-out lg:static lg:translate-x-0 ${o?"translate-x-0":"-translate-x-full"} lg:block`,children:i.jsxs("div",{className:"flex h-full max-h-screen flex-col gap-2",children:[i.jsx("div",{className:"flex h-16 items-center justify-between border-b px-6",children:i.jsx(on,{to:"/dashboard",onClick:u,className:"flex items-center gap-2 font-semibold",children:i.jsx("img",{src:"https://dvglgxrvhmtsixaabxha.supabase.co/storage/v1/object/public/logosimpixblack//simpix-logo-png.png.png",alt:"Simpix Logo",className:"h-32 w-auto"})})}),i.jsx("div",{className:"flex-1 overflow-auto py-2",children:i.jsx("nav",{className:"px-4",children:i.jsxs(wOe,{type:"single",defaultValue:c(n),collapsible:!0,className:"space-y-2",children:[i.jsxs(bu,{value:"principal",className:"border-none",children:[i.jsx(wu,{className:"hover:no-underline py-2 px-3",children:i.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"📊 Workflow Principal"})}),i.jsx(_u,{className:"pb-2",children:i.jsx("div",{className:"space-y-1",children:[{name:"📊 Dashboard",href:"/dashboard",icon:hje,gradient:"from-blue-500 to-purple-600"},{name:"➕ Nova Proposta",href:"/propostas/nova",icon:bX,gradient:"from-green-500 to-emerald-600"},{name:"📋 Fila de Análise",href:"/credito/fila",icon:fje,gradient:"from-orange-500 to-red-600"},{name:"📄 Formalização",href:"/formalizacao",icon:zt,gradient:"from-indigo-500 to-blue-600"}].filter(f=>{switch(a?.role){case"ATENDENTE":return["📊 Dashboard","➕ Nova Proposta","📄 Formalização"].includes(f.name);case"ANALISTA":return["📋 Fila de Análise"].includes(f.name);case"FINANCEIRO":return!1;case"GERENTE":case"ADMINISTRADOR":case"DIRETOR":return!0;default:return!1}}).map(f=>{const m=f.icon,g=n===f.href;return i.jsxs(on,{href:f.href,onClick:u,className:`group flex items-center gap-3 rounded-xl px-3 py-3 transition-all duration-200 ${g?`bg-gradient-to-r ${f.gradient} scale-105 transform text-white shadow-lg`:"hover:bg-accent/50 hover:scale-102 text-muted-foreground hover:text-foreground"}`,"data-testid":`nav-${f.name.toLowerCase().replace(/[^a-z0-9]/g,"-")}`,children:[i.jsx("div",{className:`rounded-lg p-2 ${g?"bg-white/20":"bg-accent/30 group-hover:bg-accent"} transition-colors`,children:i.jsx(m,{className:"h-4 w-4"})}),i.jsx("span",{className:`font-medium ${g?"text-white":""}`,children:f.name})]},f.name)})})})]}),(a?.role==="FINANCEIRO"||a?.role==="ADMINISTRADOR"||a?.role==="DIRETOR")&&i.jsxs(bu,{value:"financeiro",className:"border-none",children:[i.jsx(wu,{className:"hover:no-underline py-2 px-3",children:i.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"💳 Área Financeira"})}),i.jsx(_u,{className:"pb-2",children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs(on,{href:"/financeiro/pagamentos",onClick:u,className:`group flex items-center gap-3 rounded-xl px-3 py-3 transition-all duration-200 ${n==="/financeiro/pagamentos"?"scale-105 transform bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-lg":"hover:bg-accent/50 hover:scale-102 text-muted-foreground hover:text-foreground"}`,"data-testid":"nav-pagamentos",children:[i.jsx("div",{className:`rounded-lg p-2 ${n==="/financeiro/pagamentos"?"bg-white/20":"bg-accent/30 group-hover:bg-accent"} transition-colors`,children:i.jsx(Ef,{className:"h-4 w-4"})}),i.jsx("span",{className:`font-medium ${n==="/financeiro/pagamentos"?"text-white":""}`,children:"💳 Pagamentos"})]}),i.jsxs(on,{href:"/financeiro/cobrancas",onClick:u,className:`group flex items-center gap-3 rounded-xl px-3 py-3 transition-all duration-200 ${n==="/financeiro/cobrancas"?"scale-105 transform bg-gradient-to-r from-purple-500 to-pink-600 text-white shadow-lg":"hover:bg-accent/50 hover:scale-102 text-muted-foreground hover:text-foreground"}`,"data-testid":"nav-cobrancas",children:[i.jsx("div",{className:`rounded-lg p-2 ${n==="/financeiro/cobrancas"?"bg-white/20":"bg-accent/30 group-hover:bg-accent"} transition-colors`,children:i.jsx(zk,{className:"h-4 w-4"})}),i.jsx("span",{className:`font-medium ${n==="/financeiro/cobrancas"?"text-white":""}`,children:"📑 Cobranças"})]})]})})]}),(a?.role==="ADMINISTRADOR"||a?.role==="DIRETOR")&&i.jsxs(i.Fragment,{children:[i.jsxs(bu,{value:"gestao-acesso",className:"border-none",children:[i.jsx(wu,{className:"hover:no-underline py-2 px-3",children:i.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"👤 Gestão de Acesso"})}),i.jsx(_u,{className:"pb-2",children:i.jsx("div",{className:"space-y-1",children:i.jsxs(on,{href:"/admin/usuarios",onClick:u,className:`group flex items-center gap-3 rounded-xl px-3 py-3 transition-all duration-200 ${n==="/admin/usuarios"?"scale-105 transform bg-gradient-to-r from-violet-500 to-purple-600 text-white shadow-lg":"hover:bg-accent/50 hover:scale-102 text-muted-foreground hover:text-foreground"}`,"data-testid":"nav-usuarios",children:[i.jsx("div",{className:`rounded-lg p-2 ${n==="/admin/usuarios"?"bg-white/20":"bg-accent/30 group-hover:bg-accent"} transition-colors`,children:i.jsx(is,{className:"h-4 w-4"})}),i.jsx("span",{className:`font-medium ${n==="/admin/usuarios"?"text-white":""}`,children:"👤 Usuários & Perfis"})]})})})]}),i.jsxs(bu,{value:"configuracoes",className:"border-none",children:[i.jsx(wu,{className:"hover:no-underline py-2 px-3",children:i.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"⚙️ Configurações"})}),i.jsx(_u,{className:"pb-2",children:i.jsx("div",{className:"space-y-1",children:[{name:"🔧 Tabelas Comerciais",href:"/configuracoes/tabelas",icon:_o,gradient:"from-slate-500 to-gray-600"},{name:"📦 Produtos de Crédito",href:"/configuracoes/produtos",icon:Qa,gradient:"from-cyan-500 to-blue-600"}].map(f=>{const m=f.icon,g=n===f.href;return i.jsxs(on,{href:f.href,onClick:u,className:`group flex items-center gap-3 rounded-xl px-3 py-3 transition-all duration-200 ${g?`bg-gradient-to-r ${f.gradient} scale-105 transform text-white shadow-lg`:"hover:bg-accent/50 hover:scale-102 text-muted-foreground hover:text-foreground"}`,"data-testid":`nav-${f.name.toLowerCase().replace(/[^a-z0-9]/g,"-")}`,children:[i.jsx("div",{className:`rounded-lg p-2 ${g?"bg-white/20":"bg-accent/30 group-hover:bg-accent"} transition-colors`,children:i.jsx(m,{className:"h-4 w-4"})}),i.jsx("span",{className:`font-medium ${g?"text-white":""}`,children:f.name})]},f.name)})})})]}),i.jsxs(bu,{value:"gestao-comercial",className:"border-none",children:[i.jsx(wu,{className:"hover:no-underline py-2 px-3",children:i.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"🏢 Gestão Comercial"})}),i.jsx(_u,{className:"pb-2",children:i.jsx("div",{className:"space-y-1",children:[{name:"🏢 Parceiros",href:"/parceiros",icon:Na,gradient:"from-amber-500 to-orange-600"},{name:"🏪 Lojas & Filiais",href:"/admin/lojas",icon:Ca,gradient:"from-pink-500 to-rose-600"},{name:"📑 Gestão de Contratos",href:"/gestao/contratos",icon:zt,gradient:"from-teal-500 to-cyan-600"}].map(f=>{const m=f.icon,g=n===f.href;return i.jsxs(on,{href:f.href,onClick:u,className:`group flex items-center gap-3 rounded-xl px-3 py-3 transition-all duration-200 ${g?`bg-gradient-to-r ${f.gradient} scale-105 transform text-white shadow-lg`:"hover:bg-accent/50 hover:scale-102 text-muted-foreground hover:text-foreground"}`,"data-testid":`nav-${f.name.toLowerCase().replace(/[^a-z0-9]/g,"-")}`,children:[i.jsx("div",{className:`rounded-lg p-2 ${g?"bg-white/20":"bg-accent/30 group-hover:bg-accent"} transition-colors`,children:i.jsx(m,{className:"h-4 w-4"})}),i.jsx("span",{className:`font-medium ${g?"text-white":""}`,children:f.name})]},f.name)})})})]}),i.jsxs(bu,{value:"seguranca",className:"border-none",children:[i.jsx(wu,{className:"hover:no-underline py-2 px-3",children:i.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"🛡️ Segurança & Compliance"})}),i.jsx(_u,{className:"pb-2",children:i.jsx("div",{className:"space-y-1",children:[{name:"🔐 Dashboard OWASP",href:"/admin/security/owasp",icon:ur,gradient:"from-red-500 to-pink-600"},{name:"🔒 Monitoramento Avançado",href:"/admin/security/dashboard",icon:ur,gradient:"from-purple-500 to-indigo-600"}].map(f=>{const m=f.icon,g=n===f.href;return i.jsxs(on,{href:f.href,onClick:u,className:`group flex items-center gap-3 rounded-xl px-3 py-3 transition-all duration-200 ${g?`bg-gradient-to-r ${f.gradient} scale-105 transform text-white shadow-lg`:"hover:bg-accent/50 hover:scale-102 text-muted-foreground hover:text-foreground"}`,"data-testid":`nav-${f.name.toLowerCase().replace(/[^a-z0-9]/g,"-")}`,children:[i.jsx("div",{className:`rounded-lg p-2 ${g?"bg-white/20":"bg-accent/30 group-hover:bg-accent"} transition-colors`,children:i.jsx(m,{className:"h-4 w-4"})}),i.jsx("span",{className:`font-medium ${g?"text-white":""}`,children:f.name})]},f.name)})})})]})]})]})})})]})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("header",{className:"bg-muted/40 flex h-14 items-center gap-4 border-b px-6 lg:h-[60px]",children:[i.jsx(se,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>l(!0),children:i.jsx(mje,{className:"h-5 w-5"})}),i.jsx("div",{className:"flex-1",children:i.jsx("h1",{className:"text-lg font-semibold",children:e})}),r&&i.jsx("div",{className:"flex items-center gap-2",children:r}),i.jsx(sU,{variant:"icon-only"}),i.jsx(BTe,{}),i.jsx(Zke,{}),i.jsxs(b2,{children:[i.jsx(w2,{asChild:!0,children:i.jsx(se,{variant:"outline",size:"icon",children:i.jsx(El,{className:"h-5 w-5"})})}),i.jsxs(dS,{align:"end",children:[i.jsx(bJ,{children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:a?.email}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:a?.email})]})}),i.jsx(iO,{}),i.jsx(hl,{asChild:!0,children:i.jsxs(on,{href:"/configuracoes",onClick:u,className:"flex items-center",children:[i.jsx(_o,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Configurações"})]})}),i.jsx(hl,{asChild:!0,children:i.jsxs(on,{href:"/configuracoes/sessoes",onClick:u,className:"flex items-center",children:[i.jsx(ur,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Sessões Ativas"})]})}),i.jsx(iO,{}),i.jsxs(hl,{onClick:d,className:"text-destructive",children:[i.jsx(pje,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Sair"})]})]})]})]}),i.jsx("div",{className:"border-b bg-background/95 px-6 py-3",children:i.jsx(rOe,{})}),i.jsx("main",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:t})]})]})}const ee=N.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Ie("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ee.displayName="Card";const ie=N.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Ie("flex flex-col space-y-1.5 p-6",t),...e}));ie.displayName="CardHeader";const de=N.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Ie("text-2xl font-semibold leading-none tracking-tight",t),...e}));de.displayName="CardTitle";const Jt=N.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Ie("text-sm text-muted-foreground",t),...e}));Jt.displayName="CardDescription";const re=N.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Ie("p-6 pt-0",t),...e}));re.displayName="CardContent";const _Oe=N.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Ie("flex items-center p-6 pt-0",t),...e}));_Oe.displayName="CardFooter";const SOe=sy("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"hover:bg-primary/80 border-transparent bg-primary text-primary-foreground",secondary:"hover:bg-secondary/80 border-transparent bg-secondary text-secondary-foreground",destructive:"hover:bg-destructive/80 border-transparent bg-destructive text-destructive-foreground",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ke({className:t,variant:e,...r}){return i.jsx("div",{className:Ie(SOe({variant:e}),t),...r})}function O2(t){const e=N.useRef({value:t,previous:t});return N.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var jOe=[" ","Enter","ArrowUp","ArrowDown"],AOe=[" ","Enter"],hd="Select",[yS,xS,NOe]=ty(hd),[Cp,h7e]=cs(hd,[NOe,Np]),bS=Np(),[EOe,Wc]=Cp(hd),[COe,TOe]=Cp(hd),lZ=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:g,form:x}=t,v=bS(e),[y,w]=N.useState(null),[_,A]=N.useState(null),[C,S]=N.useState(!1),E=Ep(u),[P,R]=Ma({prop:n,defaultProp:s??!1,onChange:a,caller:hd}),[O,D]=Ma({prop:o,defaultProp:l,onChange:c,caller:hd}),I=N.useRef(null),$=y?x||!!y.closest("form"):!0,[M,U]=N.useState(new Set),H=Array.from(M).map(z=>z.props.value).join(";");return i.jsx(qM,{...v,children:i.jsxs(EOe,{required:g,scope:e,trigger:y,onTriggerChange:w,valueNode:_,onValueNodeChange:A,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:ka(),value:O,onValueChange:D,open:P,onOpenChange:R,dir:E,triggerPointerDownPosRef:I,disabled:m,children:[i.jsx(yS.Provider,{scope:e,children:i.jsx(COe,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(z=>{U(q=>new Set(q).add(z))},[]),onNativeOptionRemove:N.useCallback(z=>{U(q=>{const V=new Set(q);return V.delete(z),V})},[]),children:r})}),$?i.jsxs(OZ,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:f,value:O,onChange:z=>D(z.target.value),disabled:m,form:x,children:[O===void 0?i.jsx("option",{value:""}):null,Array.from(M)]},H):null]})})};lZ.displayName=hd;var cZ="SelectTrigger",uZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,a=bS(r),o=Wc(cZ,r),l=o.disabled||n,c=Et(e,o.onTriggerChange),u=xS(r),d=N.useRef("touch"),[f,m,g]=IZ(v=>{const y=u().filter(A=>!A.disabled),w=y.find(A=>A.value===o.value),_=MZ(y,v,w);_!==void 0&&o.onValueChange(_.value)}),x=v=>{l||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return i.jsx(VM,{asChild:!0,...a,children:i.jsx(He.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":RZ(o.value)?"":void 0,...s,ref:c,onClick:Le(s.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&x(v)}),onPointerDown:Le(s.onPointerDown,v=>{d.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:Le(s.onKeyDown,v=>{const y=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(y&&v.key===" ")&&jOe.includes(v.key)&&(x(),v.preventDefault())})})})});uZ.displayName=cZ;var dZ="SelectValue",hZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:o="",...l}=t,c=Wc(dZ,r),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,f=Et(e,c.onValueNodeChange);return gn(()=>{u(d)},[u,d]),i.jsx(He.span,{...l,ref:f,style:{pointerEvents:"none"},children:RZ(c.value)?i.jsx(i.Fragment,{children:o}):a})});hZ.displayName=dZ;var POe="SelectIcon",fZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return i.jsx(He.span,{"aria-hidden":!0,...s,ref:e,children:n||"▼"})});fZ.displayName=POe;var kOe="SelectPortal",pZ=t=>i.jsx(ry,{asChild:!0,...t});pZ.displayName=kOe;var fd="SelectContent",mZ=N.forwardRef((t,e)=>{const r=Wc(fd,t.__scopeSelect),[n,s]=N.useState();if(gn(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?wp.createPortal(i.jsx(gZ,{scope:t.__scopeSelect,children:i.jsx(yS.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(vZ,{...t,ref:e})});mZ.displayName=fd;var ji=10,[gZ,Gc]=Cp(fd),OOe="SelectContentImpl",ROe=od("SelectContent.RemoveScroll"),vZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:v,avoidCollisions:y,...w}=t,_=Wc(fd,r),[A,C]=N.useState(null),[S,E]=N.useState(null),P=Et(e,ye=>C(ye)),[R,O]=N.useState(null),[D,I]=N.useState(null),$=xS(r),[M,U]=N.useState(!1),H=N.useRef(!1);N.useEffect(()=>{if(A)return XM(A)},[A]),KM();const z=N.useCallback(ye=>{const[je,...pe]=$().map(ve=>ve.ref.current),[Se]=pe.slice(-1),Oe=document.activeElement;for(const ve of ye)if(ve===Oe||(ve?.scrollIntoView({block:"nearest"}),ve===je&&S&&(S.scrollTop=0),ve===Se&&S&&(S.scrollTop=S.scrollHeight),ve?.focus(),document.activeElement!==Oe))return},[$,S]),q=N.useCallback(()=>z([R,A]),[z,R,A]);N.useEffect(()=>{M&&q()},[M,q]);const{onOpenChange:V,triggerPointerDownPosRef:W}=_;N.useEffect(()=>{if(A){let ye={x:0,y:0};const je=Se=>{ye={x:Math.abs(Math.round(Se.pageX)-(W.current?.x??0)),y:Math.abs(Math.round(Se.pageY)-(W.current?.y??0))}},pe=Se=>{ye.x<=10&&ye.y<=10?Se.preventDefault():A.contains(Se.target)||V(!1),document.removeEventListener("pointermove",je),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",je),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",je),document.removeEventListener("pointerup",pe,{capture:!0})}}},[A,V,W]),N.useEffect(()=>{const ye=()=>V(!1);return window.addEventListener("blur",ye),window.addEventListener("resize",ye),()=>{window.removeEventListener("blur",ye),window.removeEventListener("resize",ye)}},[V]);const[B,F]=IZ(ye=>{const je=$().filter(Oe=>!Oe.disabled),pe=je.find(Oe=>Oe.ref.current===document.activeElement),Se=MZ(je,ye,pe);Se&&setTimeout(()=>Se.ref.current.focus())}),Y=N.useCallback((ye,je,pe)=>{const Se=!H.current&&!pe;(_.value!==void 0&&_.value===je||Se)&&(O(ye),Se&&(H.current=!0))},[_.value]),oe=N.useCallback(()=>A?.focus(),[A]),xe=N.useCallback((ye,je,pe)=>{const Se=!H.current&&!pe;(_.value!==void 0&&_.value===je||Se)&&I(ye)},[_.value]),J=n==="popper"?cO:yZ,Ee=J===cO?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:v,avoidCollisions:y}:{};return i.jsx(gZ,{scope:r,content:A,viewport:S,onViewportChange:E,itemRefCallback:Y,selectedItem:R,onItemLeave:oe,itemTextRefCallback:xe,focusSelectedItem:q,selectedItemText:D,position:n,isPositioned:M,searchRef:B,children:i.jsx(rS,{as:ROe,allowPinchZoom:!0,children:i.jsx(eS,{asChild:!0,trapped:_.open,onMountAutoFocus:ye=>{ye.preventDefault()},onUnmountAutoFocus:Le(s,ye=>{_.trigger?.focus({preventScroll:!0}),ye.preventDefault()}),children:i.jsx(_p,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ye=>ye.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:i.jsx(J,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ye=>ye.preventDefault(),...w,...Ee,onPlaced:()=>U(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Le(w.onKeyDown,ye=>{const je=ye.ctrlKey||ye.altKey||ye.metaKey;if(ye.key==="Tab"&&ye.preventDefault(),!je&&ye.key.length===1&&F(ye.key),["ArrowUp","ArrowDown","Home","End"].includes(ye.key)){let Se=$().filter(Oe=>!Oe.disabled).map(Oe=>Oe.ref.current);if(["ArrowUp","End"].includes(ye.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(ye.key)){const Oe=ye.target,ve=Se.indexOf(Oe);Se=Se.slice(ve+1)}setTimeout(()=>z(Se)),ye.preventDefault()}})})})})})})});vZ.displayName=OOe;var IOe="SelectItemAlignedPosition",yZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,a=Wc(fd,r),o=Gc(fd,r),[l,c]=N.useState(null),[u,d]=N.useState(null),f=Et(e,P=>d(P)),m=xS(r),g=N.useRef(!1),x=N.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:w,focusSelectedItem:_}=o,A=N.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&v&&y&&w){const P=a.trigger.getBoundingClientRect(),R=u.getBoundingClientRect(),O=a.valueNode.getBoundingClientRect(),D=w.getBoundingClientRect();if(a.dir!=="rtl"){const Oe=D.left-R.left,ve=O.left-Oe,Xe=P.left-ve,$e=P.width+Xe,at=Math.max($e,R.width),Ft=window.innerWidth-ji,rr=oO(ve,[ji,Math.max(ji,Ft-at)]);l.style.minWidth=$e+"px",l.style.left=rr+"px"}else{const Oe=R.right-D.right,ve=window.innerWidth-O.right-Oe,Xe=window.innerWidth-P.right-ve,$e=P.width+Xe,at=Math.max($e,R.width),Ft=window.innerWidth-ji,rr=oO(ve,[ji,Math.max(ji,Ft-at)]);l.style.minWidth=$e+"px",l.style.right=rr+"px"}const I=m(),$=window.innerHeight-ji*2,M=v.scrollHeight,U=window.getComputedStyle(u),H=parseInt(U.borderTopWidth,10),z=parseInt(U.paddingTop,10),q=parseInt(U.borderBottomWidth,10),V=parseInt(U.paddingBottom,10),W=H+z+M+V+q,B=Math.min(y.offsetHeight*5,W),F=window.getComputedStyle(v),Y=parseInt(F.paddingTop,10),oe=parseInt(F.paddingBottom,10),xe=P.top+P.height/2-ji,J=$-xe,Ee=y.offsetHeight/2,ye=y.offsetTop+Ee,je=H+z+ye,pe=W-je;if(je<=xe){const Oe=I.length>0&&y===I[I.length-1].ref.current;l.style.bottom="0px";const ve=u.clientHeight-v.offsetTop-v.offsetHeight,Xe=Math.max(J,Ee+(Oe?oe:0)+ve+q),$e=je+Xe;l.style.height=$e+"px"}else{const Oe=I.length>0&&y===I[0].ref.current;l.style.top="0px";const Xe=Math.max(xe,H+v.offsetTop+(Oe?Y:0)+Ee)+pe;l.style.height=Xe+"px",v.scrollTop=je-xe+v.offsetTop}l.style.margin=`${ji}px 0`,l.style.minHeight=B+"px",l.style.maxHeight=$+"px",n?.(),requestAnimationFrame(()=>g.current=!0)}},[m,a.trigger,a.valueNode,l,u,v,y,w,a.dir,n]);gn(()=>A(),[A]);const[C,S]=N.useState();gn(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const E=N.useCallback(P=>{P&&x.current===!0&&(A(),_?.(),x.current=!1)},[A,_]);return i.jsx(DOe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:E,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:i.jsx(He.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});yZ.displayName=IOe;var MOe="SelectPopperPosition",cO=N.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=ji,...a}=t,o=bS(r);return i.jsx(HM,{...o,...a,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});cO.displayName=MOe;var[DOe,R2]=Cp(fd,{}),uO="SelectViewport",xZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,a=Gc(uO,r),o=R2(uO,r),l=Et(e,a.onViewportChange),c=N.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx(yS.Slot,{scope:r,children:i.jsx(He.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Le(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m?.current&&f){const g=Math.abs(c.current-d.scrollTop);if(g>0){const x=window.innerHeight-ji*2,v=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),w=Math.max(v,y);if(w<x){const _=w+g,A=Math.min(x,_),C=_-A;f.style.height=A+"px",f.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});xZ.displayName=uO;var bZ="SelectGroup",[LOe,$Oe]=Cp(bZ),FOe=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ka();return i.jsx(LOe,{scope:r,id:s,children:i.jsx(He.div,{role:"group","aria-labelledby":s,...n,ref:e})})});FOe.displayName=bZ;var wZ="SelectLabel",_Z=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=$Oe(wZ,r);return i.jsx(He.div,{id:s.id,...n,ref:e})});_Z.displayName=wZ;var hw="SelectItem",[BOe,SZ]=Cp(hw),jZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...o}=t,l=Wc(hw,r),c=Gc(hw,r),u=l.value===n,[d,f]=N.useState(a??""),[m,g]=N.useState(!1),x=Et(e,_=>c.itemRefCallback?.(_,n,s)),v=ka(),y=N.useRef("touch"),w=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(BOe,{scope:r,value:n,disabled:s,textId:v,isSelected:u,onItemTextChange:N.useCallback(_=>{f(A=>A||(_?.textContent??"").trim())},[]),children:i.jsx(yS.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:i.jsx(He.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:x,onFocus:Le(o.onFocus,()=>g(!0)),onBlur:Le(o.onBlur,()=>g(!1)),onClick:Le(o.onClick,()=>{y.current!=="mouse"&&w()}),onPointerUp:Le(o.onPointerUp,()=>{y.current==="mouse"&&w()}),onPointerDown:Le(o.onPointerDown,_=>{y.current=_.pointerType}),onPointerMove:Le(o.onPointerMove,_=>{y.current=_.pointerType,s?c.onItemLeave?.():y.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Le(o.onPointerLeave,_=>{_.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:Le(o.onKeyDown,_=>{c.searchRef?.current!==""&&_.key===" "||(AOe.includes(_.key)&&w(),_.key===" "&&_.preventDefault())})})})})});jZ.displayName=hw;var Hm="SelectItemText",AZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...a}=t,o=Wc(Hm,r),l=Gc(Hm,r),c=SZ(Hm,r),u=TOe(Hm,r),[d,f]=N.useState(null),m=Et(e,w=>f(w),c.onItemTextChange,w=>l.itemTextRefCallback?.(w,c.value,c.disabled)),g=d?.textContent,x=N.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=u;return gn(()=>(v(x),()=>y(x)),[v,y,x]),i.jsxs(i.Fragment,{children:[i.jsx(He.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wp.createPortal(a.children,o.valueNode):null]})});AZ.displayName=Hm;var NZ="SelectItemIndicator",EZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return SZ(NZ,r).isSelected?i.jsx(He.span,{"aria-hidden":!0,...n,ref:e}):null});EZ.displayName=NZ;var dO="SelectScrollUpButton",CZ=N.forwardRef((t,e)=>{const r=Gc(dO,t.__scopeSelect),n=R2(dO,t.__scopeSelect),[s,a]=N.useState(!1),o=Et(e,n.onScrollButtonChange);return gn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(PZ,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});CZ.displayName=dO;var hO="SelectScrollDownButton",TZ=N.forwardRef((t,e)=>{const r=Gc(hO,t.__scopeSelect),n=R2(hO,t.__scopeSelect),[s,a]=N.useState(!1),o=Et(e,n.onScrollButtonChange);return gn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(PZ,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});TZ.displayName=hO;var PZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,a=Gc("SelectScrollButton",r),o=N.useRef(null),l=xS(r),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),gn(()=>{l().find(d=>d.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),i.jsx(He.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Le(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Le(s.onPointerMove,()=>{a.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Le(s.onPointerLeave,()=>{c()})})}),UOe="SelectSeparator",kZ=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return i.jsx(He.div,{"aria-hidden":!0,...n,ref:e})});kZ.displayName=UOe;var fO="SelectArrow",zOe=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=bS(r),a=Wc(fO,r),o=Gc(fO,r);return a.open&&o.position==="popper"?i.jsx(WM,{...s,...n,ref:e}):null});zOe.displayName=fO;var qOe="SelectBubbleInput",OZ=N.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=N.useRef(null),a=Et(n,s),o=O2(e);return N.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const f=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(f)}},[o,e]),i.jsx(He.select,{...r,style:{...KK,...r.style},ref:a,defaultValue:e})});OZ.displayName=qOe;function RZ(t){return t===""||t===void 0}function IZ(t){const e=cn(t),r=N.useRef(""),n=N.useRef(0),s=N.useCallback(o=>{const l=r.current+o;e(l),(function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),a=N.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function MZ(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=VOe(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function VOe(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var HOe=lZ,DZ=uZ,WOe=hZ,GOe=fZ,KOe=pZ,LZ=mZ,XOe=xZ,$Z=_Z,FZ=jZ,YOe=AZ,QOe=EZ,BZ=CZ,UZ=TZ,zZ=kZ;const Yt=HOe,Qt=WOe,Ht=N.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(DZ,{ref:n,className:Ie("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[placeholder]:text-muted-foreground [&>span]:line-clamp-1",t),...r,children:[e,i.jsx(GOe,{asChild:!0,children:i.jsx(CM,{className:"h-4 w-4 opacity-50"})})]}));Ht.displayName=DZ.displayName;const qZ=N.forwardRef(({className:t,...e},r)=>i.jsx(BZ,{ref:r,className:Ie("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(aje,{className:"h-4 w-4"})}));qZ.displayName=BZ.displayName;const VZ=N.forwardRef(({className:t,...e},r)=>i.jsx(UZ,{ref:r,className:Ie("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(CM,{className:"h-4 w-4"})}));VZ.displayName=UZ.displayName;const Wt=N.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>i.jsx(KOe,{children:i.jsxs(LZ,{ref:s,className:Ie("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] origin-[--radix-select-content-transform-origin] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[i.jsx(qZ,{}),i.jsx(XOe,{className:Ie("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(VZ,{})]})}));Wt.displayName=LZ.displayName;const JOe=N.forwardRef(({className:t,...e},r)=>i.jsx($Z,{ref:r,className:Ie("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));JOe.displayName=$Z.displayName;const le=N.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(FZ,{ref:n,className:Ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(QOe,{children:i.jsx(EM,{className:"h-4 w-4"})})}),i.jsx(YOe,{children:e})]}));le.displayName=FZ.displayName;const ZOe=N.forwardRef(({className:t,...e},r)=>i.jsx(zZ,{ref:r,className:Ie("-mx-1 my-1 h-px bg-muted",t),...e}));ZOe.displayName=zZ.displayName;const Tp=({onRefresh:t,isLoading:e=!1,variant:r="ghost",size:n="sm",className:s="",showLabel:a=!1,label:o="Atualizar"})=>{const{toast:l}=Fr(),c=()=>{t(),l({title:"Dados atualizados",description:"As informações foram recarregadas com sucesso.",duration:2e3})};return i.jsxs(se,{variant:r,size:n,onClick:c,disabled:e,className:`transition-all duration-200 hover:scale-105 ${s}`,title:o,children:[i.jsx(ls,{className:`h-4 w-4 ${e?"animate-spin":""} ${a?"mr-2":""}`}),a&&o]})};function eRe(){const{flags:t,isLoading:e,checkFlag:r,refreshFlags:n}=eQ(),s=Mh("maintenance-mode"),a=Mh("read-only-mode"),o=Mh("nova-api-experimental");Mh("relatorios-avancados"),Mh("pagamento-pix-instant");const{data:l,isLoading:c,error:u}=nt({queryKey:["/api/experimental/analytics"],enabled:o,queryFn:async()=>{const f=await Je("/api/experimental/analytics",{method:"GET"});if(!f.ok)throw new Error("Failed to fetch experimental analytics");return f.json()},retry:1});return e?i.jsx(ee,{children:i.jsx(re,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(un,{className:"h-4 w-4 animate-spin text-primary"}),i.jsx("span",{children:"Carregando feature flags..."})]})})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(de,{children:"Status das Feature Flags"}),i.jsx(Jt,{children:"Funcionalidades controladas por feature flags"})]}),i.jsx(se,{variant:"outline",size:"sm",onClick:n,children:"Atualizar Flags"})]})}),i.jsx(re,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(t).map(([d,f])=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsx("span",{className:"text-sm font-medium",children:d}),i.jsx(ke,{variant:f?"default":"secondary",className:f?"bg-green-100 text-green-800 hover:bg-green-100":"",children:f?i.jsxs(i.Fragment,{children:[i.jsx(ar,{className:"w-3 h-3 mr-1"}),"Ativo"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ea,{className:"w-3 h-3 mr-1"}),"Inativo"]})})]},d))})})]}),s&&i.jsxs(jt,{variant:"destructive",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(sw,{children:"Modo de Manutenção Ativo"}),i.jsx(At,{children:"O sistema está em manutenção. Algumas funcionalidades podem estar limitadas."})]}),a&&i.jsxs(jt,{children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(sw,{children:"Modo Somente Leitura"}),i.jsx(At,{children:"O sistema está em modo somente leitura. Alterações não são permitidas."})]}),i.jsx(mE,{flag:"nova-api-experimental",fallback:i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{className:"text-muted-foreground",children:"Analytics Avançado (Em Breve)"})}),i.jsx(re,{children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Esta funcionalidade está em desenvolvimento e será liberada gradualmente."})})]}),children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(de,{children:"Analytics Avançado"}),i.jsx(ke,{variant:"outline",className:"border-orange-200 text-orange-700",children:"Beta"})]}),i.jsx(Jt,{children:"Dados experimentais da nova API de analytics"})]}),i.jsx(re,{children:c?i.jsxs("div",{className:"animate-pulse space-y-2",children:[i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}):u?i.jsxs(jt,{variant:"destructive",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(At,{children:"Erro ao carregar dados experimentais"})]}):l?.data?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(zt,{className:"h-8 w-8 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Propostas"}),i.jsx("p",{className:"text-2xl font-bold",children:l.data.total_propostas})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Mc,{className:"h-8 w-8 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Total"}),i.jsx("p",{className:"text-2xl font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l.data.total_valor)})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(So,{className:"h-8 w-8 text-purple-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Versão API"}),i.jsx("p",{className:"text-lg font-semibold",children:l.data.experimental_version})]})]})]}):null})]})}),i.jsx(mE,{flag:"relatorios-avancados",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"Relatórios Avançados"}),i.jsx(Jt,{children:"Acesso a relatórios detalhados e personalizados"})]}),i.jsx(re,{children:i.jsx(se,{className:"w-full",children:"Acessar Relatórios Avançados"})})]})}),i.jsx(mE,{flag:"pagamento-pix-instant",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"PIX Instantâneo"}),i.jsx(Jt,{children:"Processamento de pagamentos PIX em tempo real"})]}),i.jsx(re,{children:i.jsxs(jt,{children:[i.jsx(ar,{className:"h-4 w-4"}),i.jsx(At,{children:"PIX Instantâneo está disponível para sua conta"})]})})]})}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"Uso Programático"}),i.jsx(Jt,{children:"Exemplo de verificação condicional de features"})]}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-2",children:[r("novo-dashboard")?i.jsx("p",{className:"text-sm",children:"✅ Novo dashboard está habilitado - renderizando versão atualizada"}):i.jsx("p",{className:"text-sm",children:"❌ Novo dashboard desabilitado - usando versão clássica"}),r("ab-test-onboarding")?i.jsx("p",{className:"text-sm",children:"✅ Teste A/B de onboarding ativo - variante experimental"}):i.jsx("p",{className:"text-sm",children:"❌ Teste A/B de onboarding inativo - fluxo padrão"})]})})]})]})}const tRe=t=>{switch(t.toUpperCase()){case"APROVADO":case"ASSINATURA_CONCLUIDA":case"PAGO":return"bg-green-600 text-white border-green-600 font-semibold shadow-lg";case"REJEITADO":case"CANCELADO":return"bg-red-600 text-white border-red-600 font-semibold shadow-lg";case"PENDENCIADO":case"AGUARDANDO_ASSINATURA":case"AGUARDANDO_ANALISE":case"EM_ANALISE":return"bg-amber-500 text-white border-amber-500 font-semibold shadow-lg";case"CCB_GERADA":case"BOLETOS_EMITIDOS":case"PRONTO_PAGAMENTO":return"bg-blue-600 text-white border-blue-600 font-semibold shadow-lg";case"RASCUNHO":default:return"bg-gray-500 text-white border-gray-500 font-semibold shadow-lg"}},rRe=t=>{switch(t.toUpperCase()){case"APROVADO":case"ASSINATURA_CONCLUIDA":case"PAGO":return"border-l-4 border-l-green-500";case"REJEITADO":case"CANCELADO":return"border-l-4 border-l-red-500";case"PENDENCIADO":case"AGUARDANDO_ASSINATURA":case"AGUARDANDO_ANALISE":case"EM_ANALISE":return"border-l-4 border-l-amber-500";case"CCB_GERADA":case"BOLETOS_EMITIDOS":case"PRONTO_PAGAMENTO":return"border-l-4 border-l-blue-500";case"RASCUNHO":default:return"border-l-4 border-l-gray-400"}},nRe=t=>{switch(t.toUpperCase()){case"APROVADO":case"ASSINATURA_CONCLUIDA":case"PAGO":return"bg-green-100 text-green-600";case"REJEITADO":case"CANCELADO":return"bg-red-100 text-red-600";case"PENDENCIADO":case"AGUARDANDO_ASSINATURA":case"AGUARDANDO_ANALISE":case"EM_ANALISE":return"bg-amber-100 text-amber-600";case"CCB_GERADA":case"BOLETOS_EMITIDOS":case"PRONTO_PAGAMENTO":return"bg-blue-100 text-blue-600";case"RASCUNHO":default:return"bg-gray-100 text-gray-600"}},sRe=t=>{switch(t.toUpperCase()){case"CCB_GERADA":return"CCB Gerada";case"AGUARDANDO_ASSINATURA":return"Aguardando Assinatura";case"ASSINATURA_CONCLUIDA":return"Assinatura Concluída";case"BOLETOS_EMITIDOS":return"Boletos Emitidos";case"AGUARDANDO_ANALISE":return"Aguardando Análise";case"EM_ANALISE":return"Em Análise";case"PRONTO_PAGAMENTO":return"Pronto para Pagamento";case"APROVADO":return"Aprovado";case"REJEITADO":return"Rejeitado";case"PENDENCIADO":return"Pendenciado";case"PAGO":return"Pago";case"CANCELADO":return"Cancelado";default:return t.replace(/_/g," ").replace(/^\w/,e=>e.toUpperCase())}},aRe=t=>{switch(t.toUpperCase()){case"APROVADO":case"ASSINATURA_CONCLUIDA":return i.jsx(fr,{className:"h-6 w-6"});case"PAGO":return i.jsx(Lg,{className:"h-6 w-6"});case"REJEITADO":return i.jsx(Ea,{className:"h-6 w-6"});case"CANCELADO":return i.jsx(Ea,{className:"h-6 w-6"});case"PENDENCIADO":return i.jsx(ir,{className:"h-6 w-6"});case"AGUARDANDO_ASSINATURA":case"AGUARDANDO_ANALISE":return i.jsx(_n,{className:"h-6 w-6"});case"EM_ANALISE":return i.jsx(_n,{className:"h-6 w-6"});case"CCB_GERADA":return i.jsx(zt,{className:"h-6 w-6"});case"BOLETOS_EMITIDOS":case"PRONTO_PAGAMENTO":return i.jsx(Lg,{className:"h-6 w-6"});case"RASCUNHO":default:return i.jsx(zt,{className:"h-6 w-6"})}},_E=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),pU=()=>i.jsx(pt,{title:"Dashboard",children:i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((t,e)=>i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})}),i.jsx(re,{children:i.jsx("div",{className:"h-8 bg-gray-200 rounded w-16 animate-pulse"})})]},e))}),i.jsx("div",{className:"space-y-4",children:[...Array(3)].map((t,e)=>i.jsx("div",{className:"h-24 bg-gray-200 rounded animate-pulse"},e))})]})}),iRe=({message:t})=>i.jsx(pt,{title:"Dashboard",children:i.jsxs(jt,{variant:"destructive",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsxs(At,{children:["Erro ao carregar dashboard: ",t]})]})}),mU=()=>{const{user:t}=$a(),[,e]=qi(),r=ys(),[n,s]=N.useState(""),[a,o]=N.useState("todos"),[l,c]=N.useState("todos"),[u,d]=N.useState("cards"),{data:f,isLoading:m,error:g,isError:x,refetch:v}=nt({queryKey:["/api/propostas"],enabled:!!t&&t?.role!=="ANALISTA"}),{data:y}=nt({queryKey:["/api/propostas/metricas"],enabled:t?.role==="ATENDENTE"}),_=(Array.isArray(f?.data)?f.data.map(E=>({id:E.id,status:E.status,nomeCliente:E.nomeCliente||E.clienteNome||E.cliente_nome,cpfCliente:E.cpfCliente||E.clienteCpf||E.cliente_cpf,valorSolicitado:E.valorSolicitado||E.valor,prazo:E.prazo,taxaJuros:E.taxaJuros||E.taxa_juros,produtoId:E.produtoId||E.produto_id,lojaId:E.lojaId||E.loja_id,createdAt:E.createdAt||E.created_at,valorParcela:E.valorParcela||E.valor_parcela,statusContextual:E.status,parceiro:E.parceiro||{razaoSocial:E.loja_nome||"Parceiro Padrão"}})):[])||[],A=N.useMemo(()=>Array.isArray(_)?_.filter(E=>{if(!E||!E.id)return!1;const P=E.nomeCliente?.toLowerCase().includes(n.toLowerCase())||E.id.includes(n)||E.cpfCliente?.includes(n),R=E.statusContextual||E.status||"rascunho",O=a==="todos"||R===a,D=l==="todos"||E.parceiro?.razaoSocial===l;return P&&O&&D}):[],[_,n,a,l]),C=N.useMemo(()=>{const E=_.length,P=Array.isArray(_)?_.filter(H=>H.status==="aprovado").length:0,R=Array.isArray(_)?_.filter(H=>H.status==="aguardando_analise"||H.status==="em_analise").length:0,O=Array.isArray(_)?_.filter(H=>H.status==="rejeitado").length:0,D=Array.isArray(_)?_.filter(H=>H.status==="pendenciado").length:0;console.log("DEBUG - First 3 proposals values:",_.slice(0,3).map(H=>({id:H.id,valorSolicitado:H.valorSolicitado,type:typeof H.valorSolicitado})));const I=_.reduce((H,z)=>{const q=typeof z.valorSolicitado=="string"?parseFloat(z.valorSolicitado.replace(/[^\d,.-]/g,"").replace(",",".")):Number(z.valorSolicitado)||0;return H+q},0),$=E>0?I/E:0,M=_.reduce((H,z)=>(H[z.status]=(H[z.status]||0)+1,H),{}),U=Array.from(new Set(_.map(H=>H.parceiro?.razaoSocial).filter(Boolean)));return{total:E,aprovadas:P,pendentes:R,rejeitadas:O,pendenciadas:D,valorTotal:I,valorMedio:$,statusCounts:M,parceiros:U,taxaAprovacao:E>0?(P/E*100).toFixed(1):"0"}},[_]),S=N.useCallback(()=>{r.invalidateQueries({queryKey:["/api/propostas"]}),t?.role==="ATENDENTE"&&r.invalidateQueries({queryKey:["/api/propostas/metricas"]})},[r,t?.role]);return N.useEffect(()=>{if(t?.role==="ANALISTA"){e("/credito/fila");return}},[t?.role,e]),t?.role==="ANALISTA"?i.jsx(pU,{}):m?i.jsx(pU,{}):x?i.jsx(iRe,{message:g?.message||"Erro desconhecido"}):i.jsx(pt,{title:"Dashboard de Propostas",actions:i.jsx(Tp,{onRefresh:S,isLoading:m,variant:"ghost"}),children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Total de Propostas"}),i.jsx(zt,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:C.total}),i.jsx("div",{className:"text-xs text-muted-foreground",children:C.pendenciadas>0&&i.jsxs("span",{className:"text-orange-600",children:[C.pendenciadas," pendências"]})})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Taxa de Aprovação"}),i.jsx(Hc,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[C.taxaAprovacao,"%"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[C.aprovadas," de ",C.total," aprovadas"]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Valor Total"}),i.jsx(Mc,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:_E(C.valorTotal)}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Média: ",_E(C.valorMedio)]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Em Análise"}),i.jsx(_n,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:C.pendentes}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Aguardando processamento"})]})]})]}),t?.role==="ADMIN"&&i.jsx(eRe,{}),t?.role==="ATENDENTE"&&y&&i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"Suas Métricas"}),i.jsx(Jt,{children:"Performance individual no período"})]}),i.jsx(re,{children:i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs("div",{className:"bg-muted/50 flex items-center gap-3 rounded-lg p-3",children:[i.jsx($g,{className:"h-8 w-8 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:y.hoje||0}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Hoje"})]})]}),i.jsxs("div",{className:"bg-muted/50 flex items-center gap-3 rounded-lg p-3",children:[i.jsx(_n,{className:"h-8 w-8 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:y.semana||0}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Esta Semana"})]})]}),i.jsxs("div",{className:"bg-muted/50 flex items-center gap-3 rounded-lg p-3",children:[i.jsx(So,{className:"h-8 w-8 text-purple-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:y.mes||0}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Este Mês"})]})]})]})})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(de,{children:t?.role==="ATENDENTE"?"Minhas Propostas":"Propostas"}),i.jsx(Jt,{children:"Gerencie e acompanhe todas as propostas de crédito"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(on,{to:"/propostas/nova",children:i.jsxs(se,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[i.jsx(bX,{className:"mr-2 h-4 w-4"}),"Nova Proposta"]})}),t?.role==="ATENDENTE"&&i.jsx(on,{to:"/aceite-atendente",children:i.jsxs(se,{variant:"outline",children:[i.jsx(fr,{className:"mr-2 h-4 w-4"}),"Aceitar Propostas"]})})]})]})}),i.jsx(re,{children:i.jsxs("div",{className:"mb-4 flex gap-4",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"relative",children:[i.jsx(W_,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Fe,{placeholder:"Buscar por nome, CPF ou ID...",value:n,onChange:E=>s(E.target.value),className:"pl-10"})]})}),i.jsxs(Yt,{value:a,onValueChange:o,children:[i.jsx(Ht,{className:"w-[200px]",children:i.jsx(Qt,{placeholder:"Status"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"todos",children:"Todos os Status"}),i.jsx(le,{value:"rascunho",children:"Rascunho"}),i.jsx(le,{value:"aguardando_analise",children:"Aguardando Análise"}),i.jsx(le,{value:"em_analise",children:"Em Análise"}),i.jsx(le,{value:"aprovado",children:"Aprovado"}),i.jsx(le,{value:"rejeitado",children:"Rejeitado"}),i.jsx(le,{value:"pendenciado",children:"Pendenciado"}),i.jsx(le,{value:"pago",children:"Pago"})]})]}),C.parceiros.length>0&&i.jsxs(Yt,{value:l,onValueChange:c,children:[i.jsx(Ht,{className:"w-[200px]",children:i.jsx(Qt,{placeholder:"Parceiro"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"todos",children:"Todos os Parceiros"}),C.parceiros.map((E,P)=>i.jsx(le,{value:E,children:E},`parceiro-${P}-${E}`))]})]})]})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(is,{className:"h-4 w-4"}),i.jsxs("span",{children:["Exibindo ",i.jsx("span",{className:"font-medium text-foreground",children:A.length})," de"," ",i.jsx("span",{className:"font-medium text-foreground",children:_.length})," propostas"]})]}),A.length!==_.length&&i.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-md border border-blue-200",children:[i.jsx(jX,{className:"inline h-3 w-3 mr-1"}),"Filtros ativos"]})]}),i.jsx("div",{className:"space-y-4",children:m?i.jsx(ee,{children:i.jsx(re,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(un,{className:"h-8 w-8 animate-spin text-muted-foreground"}),i.jsx("span",{className:"ml-2 text-muted-foreground",children:"Carregando propostas..."})]})})}):A.length===0?i.jsx(ee,{children:i.jsx(re,{className:"p-6",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(zt,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),i.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Nenhuma proposta encontrada"}),i.jsx("p",{children:"Nenhuma proposta corresponde aos filtros aplicados"})]})})}):A.map((E,P)=>i.jsx(ee,{className:`overflow-hidden transition-all hover:shadow-xl hover:scale-[1.02] ${rRe(E?.statusContextual||E?.status||"rascunho")}`,"data-testid":`proposal-card-${E?.id||P}`,children:i.jsx(re,{className:"p-0",children:i.jsxs("div",{className:"flex items-center justify-between p-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`flex h-16 w-16 items-center justify-center rounded-xl ${nRe(E?.status||"rascunho")} shadow-lg`,children:aRe(E?.status||"rascunho")}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:E?.nomeCliente||"Cliente não informado"}),i.jsx(ke,{className:`${tRe(E?.statusContextual||E?.status||"rascunho")} border px-3 py-1 text-sm`,"data-testid":`status-badge-${E?.status||"rascunho"}`,children:sRe(E?.statusContextual||E?.status||"rascunho")}),E?.status==="pendenciado"&&i.jsxs(ke,{variant:"outline",className:"gap-1 border-orange-200 text-orange-700",children:[i.jsx(ir,{className:"h-3 w-3"}),"Ação Necessária"]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Proposta: #",E?.numeroProposta||E?.id||"N/A"," | CPF:"," ",E?.cpfCliente||"Não informado"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Criado em:"," ",E?.created_at?Mn(new Date(E.created_at),"dd/MM/yyyy HH:mm",{locale:dd}):"Data não disponível",E?.loja_nome&&i.jsxs("span",{className:"ml-2",children:["| Parceiro: ",String(E.loja_nome)]})]}),(E?.status==="pendenciado"||E?.status==="pendente")&&E?.motivo_pendencia&&i.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-md border border-orange-200 bg-orange-50 p-2",children:[i.jsx(ir,{className:"h-4 w-4 text-orange-600"}),i.jsxs("span",{className:"text-sm text-orange-700",children:["Pendência: ",E.motivo_pendencia]})]})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:_E(E?.valorSolicitado||0)}),i.jsx("div",{className:"flex justify-end gap-2",children:E?.status==="pendenciado"||E?.status==="pendente"?i.jsx(on,{to:`/propostas/editar/${E?.id||"new"}`,children:i.jsxs(se,{size:"sm",variant:"outline",className:"flex items-center gap-1",children:[i.jsx(Pd,{className:"h-4 w-4"}),"Corrigir"]})}):i.jsx(on,{to:`/credito/analise/${E?.id||"new"}`,children:i.jsxs(se,{size:"sm",variant:"outline",children:[i.jsx(wo,{className:"mr-1 h-4 w-4"}),"Visualizar"]})})})]})]})})},`proposta-${E?.id||P}`))})]})})},HZ={context:null,clientData:{tipoPessoa:"PF",cpf:"",nome:"",email:"",telefone:"",razaoSocial:"",cnpj:"",rg:"",orgaoEmissor:"",rgUf:"",rgDataEmissao:"",dataNascimento:"",localNascimento:"",estadoCivil:"",nacionalidade:"Brasileira",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",ocupacao:"",rendaMensal:"",telefoneEmpresa:"",metodoPagamento:"conta_bancaria",dadosPagamentoBanco:"",dadosPagamentoAgencia:"",dadosPagamentoConta:"",dadosPagamentoDigito:"",dadosPagamentoPix:"",dadosPagamentoTipoPix:"",dadosPagamentoPixBanco:"",dadosPagamentoPixNomeTitular:"",dadosPagamentoPixCpfTitular:""},loanData:{produtoId:null,tabelaComercialId:null,valorSolicitado:"",prazo:null,incluirTac:!0,dataCarencia:void 0},simulation:null,documents:[],personalReferences:[],currentStep:0,errors:{},isLoading:!1};function oRe(t,e){switch(e.type){case"SET_CONTEXT":return{...t,context:e.payload};case"UPDATE_CLIENT":return{...t,clientData:{...t.clientData,...e.payload}};case"SELECT_PRODUCT":return{...t,loanData:{...t.loanData,produtoId:e.payload,tabelaComercialId:null},simulation:null};case"SELECT_TABLE":return{...t,loanData:{...t.loanData,tabelaComercialId:e.payload},simulation:null};case"UPDATE_LOAN_CONDITIONS":return{...t,loanData:{...t.loanData,...e.payload},simulation:null};case"SET_SIMULATION_RESULT":return{...t,simulation:e.payload};case"CLEAR_SIMULATION":return{...t,simulation:null};case"ADD_DOCUMENT":return{...t,documents:[...t.documents,e.payload]};case"REMOVE_DOCUMENT":return{...t,documents:t.documents.filter(r=>r.id!==e.payload)};case"ADD_REFERENCE":return{...t,personalReferences:[...t.personalReferences,e.payload]};case"UPDATE_REFERENCE":return{...t,personalReferences:t.personalReferences.map((r,n)=>n===e.payload.index?e.payload.reference:r)};case"REMOVE_REFERENCE":return{...t,personalReferences:t.personalReferences.filter((r,n)=>n!==e.payload)};case"SET_STEP":return{...t,currentStep:e.payload};case"SET_ERROR":return{...t,errors:{...t.errors,[e.payload.field]:e.payload.message}};case"CLEAR_ERRORS":return{...t,errors:{}};case"SET_LOADING":return{...t,isLoading:e.payload};case"RESET":return HZ;default:return t}}const WZ=N.createContext(void 0);function lRe({children:t}){const[e,r]=N.useReducer(oRe,HZ);return i.jsx(WZ.Provider,{value:{state:e,dispatch:r},children:t})}function Kc(){const t=N.useContext(WZ);if(!t)throw new Error("useProposal must be used within a ProposalProvider");return t}function Pp(){const{dispatch:t}=Kc(),e=N.useCallback(A=>t({type:"SET_CONTEXT",payload:A}),[t]),r=N.useCallback(A=>t({type:"UPDATE_CLIENT",payload:A}),[t]),n=N.useCallback(A=>t({type:"SELECT_PRODUCT",payload:A}),[t]),s=N.useCallback(A=>t({type:"SELECT_TABLE",payload:A}),[t]),a=N.useCallback(A=>t({type:"UPDATE_LOAN_CONDITIONS",payload:A}),[t]),o=N.useCallback(A=>t({type:"SET_SIMULATION_RESULT",payload:A}),[t]),l=N.useCallback(()=>t({type:"CLEAR_SIMULATION"}),[t]),c=N.useCallback(A=>t({type:"ADD_DOCUMENT",payload:A}),[t]),u=N.useCallback(A=>t({type:"REMOVE_DOCUMENT",payload:A}),[t]),d=N.useCallback(A=>t({type:"ADD_REFERENCE",payload:A}),[t]),f=N.useCallback((A,C)=>t({type:"UPDATE_REFERENCE",payload:{index:A,reference:C}}),[t]),m=N.useCallback(A=>t({type:"REMOVE_REFERENCE",payload:A}),[t]),g=N.useCallback(A=>t({type:"SET_STEP",payload:A}),[t]),x=N.useCallback((A,C)=>t({type:"SET_ERROR",payload:{field:A,message:C}}),[t]),v=N.useCallback(A=>t({type:"SET_ERROR",payload:{field:A,message:""}}),[t]),y=N.useCallback(()=>t({type:"CLEAR_ERRORS"}),[t]),w=N.useCallback(A=>t({type:"SET_LOADING",payload:A}),[t]),_=N.useCallback(()=>t({type:"RESET"}),[t]);return{setContext:e,updateClient:r,selectProduct:n,selectTable:s,updateLoanConditions:a,setSimulationResult:o,clearSimulation:l,addDocument:c,removeDocument:u,addReference:d,updateReference:f,removeReference:m,setStep:g,setError:x,clearError:v,clearErrors:y,setLoading:w,reset:_}}function cRe(){const{state:t}=Kc();return{isStepValid:N.useCallback(r=>{switch(r){case 0:const n=t.clientData,a=[n.nome,n.tipoPessoa==="PF"?n.cpf:n.cnpj,n.email,n.telefone,n.dataNascimento,n.cep,n.logradouro,n.numero,n.cidade,n.estado,n.ocupacao,n.rendaMensal].every(g=>g&&g.toString().trim()!==""),o=Object.keys(t.errors).some(g=>g.includes("cpf")||g.includes("email")||g.includes("telefone")||g.includes("cep"));return a&&!o;case 1:const l=t.personalReferences;if(l.length!==2)return!1;const c=l.every(g=>g.nomeCompleto&&g.nomeCompleto.trim()!==""&&g.grauParentesco&&g.grauParentesco.trim()!==""&&g.telefone&&g.telefone.trim()!==""),u=Object.keys(t.errors).some(g=>g.includes("reference_"));return c&&!u;case 2:const d=t.loanData,f=d.produtoId!==null&&d.tabelaComercialId!==null&&d.valorSolicitado&&d.valorSolicitado.trim()!==""&&d.prazo!==null,m=Object.keys(t.errors).some(g=>g.includes("produto")||g.includes("tabela")||g.includes("valor")||g.includes("prazo"));return!!(f&&!m);case 3:return!0;default:return!1}},[t.clientData,t.personalReferences,t.loanData,t.errors])}}function pO(t,e){const[r,n]=N.useState(t);return N.useEffect(()=>{const s=setTimeout(()=>{n(t)},e);return()=>{clearTimeout(s)}},[t,e]),r}function uRe(){const{state:t}=Kc(),{setSimulationResult:e,clearSimulation:r,setError:n,clearErrors:s}=Pp(),{toast:a}=Fr(),o=N.useRef(""),l=pO(t.loanData.valorSolicitado,800),c=pO(t.loanData.prazo,800);N.useEffect(()=>{if(!(t.loanData.produtoId&&t.loanData.tabelaComercialId&&l&&parseFloat(l.replace(/[^\d,]/g,"").replace(",","."))>0&&c&&c>0)){r();return}const d=`${t.loanData.produtoId}-${t.loanData.tabelaComercialId}-${l}-${c}-${t.loanData.incluirTac}-${t.loanData.dataCarencia||""}`;if(d===o.current||(o.current=d,!t.context?.produtos.find(x=>x.id===t.loanData.produtoId)?.tabelasDisponiveis.find(x=>x.id===t.loanData.tabelaComercialId)))return;(async()=>{try{s();const x=parseFloat(l.replace(/[^\d,]/g,"").replace(",","."));let v=0;if(t.loanData.dataCarencia){const _=new Date(t.loanData.dataCarencia),A=new Date;v=Math.ceil((_.getTime()-A.getTime())/(1e3*3600*24))}const y={valorEmprestimo:x,prazoMeses:c,produtoId:t.loanData.produtoId,parceiroId:t.context?.atendente?.loja?.parceiro?.id||null,diasCarencia:v};console.log("[FRONTEND] Enviando simulação para nova API:",y);const w=await Je("/api/simular",{method:"POST",body:JSON.stringify(y)});console.log("[FRONTEND] Resposta da nova API:",w),e({valorParcela:w.valorParcela,taxaJuros:w.taxaJurosMensal,taxaJurosAnual:w.taxaJurosAnual,valorIOF:w.iof.total,iofDetalhado:{diario:w.iof.diario,adicional:w.iof.adicional,total:w.iof.total},valorTAC:w.tac,valorTotalFinanciado:w.valorTotalFinanciado,valorTotalAPagar:w.valorTotalAPagar,custoTotalOperacao:w.custoTotalOperacao,custoEfetivoTotal:w.cetAnual,comissao:w.comissao?.valor||0,comissaoPercentual:w.comissao?.percentual||0,cronogramaPagamento:w.cronogramaPagamento,jurosCarencia:v>0?String(x*(w.taxaJurosMensal/100/30)*v):"0",diasCarencia:v,parametrosUtilizados:w.parametrosUtilizados})}catch(x){console.error("Erro na simulação:",x),n("simulation","Erro ao calcular simulação"),x instanceof Error&&x.message.includes("45 dias")?a({title:"Prazo de carência excedido",description:x.message,variant:"destructive"}):a({title:"Erro na simulação",description:"Não foi possível calcular a simulação. Tente novamente.",variant:"destructive"})}})()},[t.loanData.produtoId,t.loanData.tabelaComercialId,l,c,t.loanData.incluirTac,t.loanData.dataCarencia,t.context,a,s,r,n,e]),N.useEffect(()=>{if(!t.context||!t.loanData.valorSolicitado)return;const u=parseFloat(t.loanData.valorSolicitado.replace(/[^\d,]/g,"").replace(",",".")),{valorMinimo:d,valorMaximo:f}=t.context.limites;u<d?n("valorSolicitado",`Valor mínimo: R$ ${d.toLocaleString("pt-BR")}`):u>f?n("valorSolicitado",`Valor máximo: R$ ${f.toLocaleString("pt-BR")}`):n("valorSolicitado","")},[t.loanData.valorSolicitado,t.context,n]),N.useEffect(()=>{if(!t.context||!t.loanData.prazo)return;const{prazoMinimo:u,prazoMaximo:d}=t.context.limites;t.loanData.prazo<u?n("prazo",`Prazo mínimo: ${u} meses`):t.loanData.prazo>d?n("prazo",`Prazo máximo: ${d} meses`):n("prazo","")},[t.loanData.prazo,t.context,n])}var wS="Tabs",[dRe,f7e]=cs(wS,[oS]),GZ=oS(),[hRe,I2]=dRe(wS),KZ=N.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Ep(l),[f,m]=Ma({prop:n,onChange:s,defaultProp:a??"",caller:wS});return i.jsx(hRe,{scope:r,baseId:ka(),value:f,onValueChange:m,orientation:o,dir:d,activationMode:c,children:i.jsx(He.div,{dir:d,"data-orientation":o,...u,ref:e})})});KZ.displayName=wS;var XZ="TabsList",YZ=N.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,a=I2(XZ,r),o=GZ(r);return i.jsx(AQ,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:i.jsx(He.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});YZ.displayName=XZ;var QZ="TabsTrigger",JZ=N.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=t,o=I2(QZ,r),l=GZ(r),c=tee(o.baseId,n),u=ree(o.baseId,n),d=n===o.value;return i.jsx(NQ,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(He.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:Le(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:Le(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:Le(t.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!s&&f&&o.onValueChange(n)})})})});JZ.displayName=QZ;var ZZ="TabsContent",eee=N.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:a,...o}=t,l=I2(ZZ,r),c=tee(l.baseId,n),u=ree(l.baseId,n),d=n===l.value,f=N.useRef(d);return N.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(xs,{present:s||d,children:({present:m})=>i.jsx(He.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&a})})});eee.displayName=ZZ;function tee(t,e){return`${t}-trigger-${e}`}function ree(t,e){return`${t}-content-${e}`}var fRe=KZ,nee=YZ,see=JZ,aee=eee;const kp=fRe,Rd=N.forwardRef(({className:t,...e},r)=>i.jsx(nee,{ref:r,className:Ie("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Rd.displayName=nee.displayName;const dn=N.forwardRef(({className:t,...e},r)=>i.jsx(see,{ref:r,className:Ie("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));dn.displayName=see.displayName;const hn=N.forwardRef(({className:t,...e},r)=>i.jsx(aee,{ref:r,className:Ie("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));hn.displayName=aee.displayName;class hg{constructor(e){this.value=e}static create(e){const r=e.replace(/\D/g,"");return hg.isValid(r)?new hg(r):null}static isValid(e){const r=e.replace(/\D/g,"");if(r.length!==11||/^(\d)\1{10}$/.test(r))return!1;let n=0;for(let l=0;l<9;l++)n+=parseInt(r.charAt(l))*(10-l);let s=n*10%11;if((s===10?0:s)!==parseInt(r.charAt(9)))return!1;n=0;for(let l=0;l<10;l++)n+=parseInt(r.charAt(l))*(11-l);return s=n*10%11,(s===10?0:s)===parseInt(r.charAt(10))}getValue(){return this.value}getFormatted(){const e=this.value;return`${e.substring(0,3)}.${e.substring(3,6)}.${e.substring(6,9)}-${e.substring(9,11)}`}equals(e){return this.value===e.value}toString(){return this.getFormatted()}static schema=br().transform(e=>e.replace(/\D/g,"")).refine(hg.isValid,{message:"CPF inválido"})}class tb{constructor(e){this.value=e}static create(e){const r=e.replace(/\D/g,"");return tb.isValid(r)?new tb(r):null}static isValid(e){const r=e.replace(/\D/g,"");if(r.length!==14||/^(\d)\1{13}$/.test(r))return!1;let n=0;const s=[5,4,3,2,9,8,7,6,5,4,3,2];for(let u=0;u<12;u++)n+=parseInt(r.charAt(u))*s[u];let a=n%11;if((a<2?0:11-a)!==parseInt(r.charAt(12)))return!1;n=0;const l=[6,5,4,3,2,9,8,7,6,5,4,3,2];for(let u=0;u<13;u++)n+=parseInt(r.charAt(u))*l[u];return a=n%11,(a<2?0:11-a)===parseInt(r.charAt(13))}getValue(){return this.value}getFormatted(){const e=this.value;return`${e.substring(0,2)}.${e.substring(2,5)}.${e.substring(5,8)}/${e.substring(8,12)}-${e.substring(12,14)}`}equals(e){return this.value===e.value}toString(){return this.getFormatted()}static schema=br().transform(e=>e.replace(/\D/g,"")).refine(tb.isValid,{message:"CNPJ inválido"})}class Si{cents;constructor(e){this.cents=Math.round(e)}static fromReais(e){return new Si(e*100)}static fromCents(e){return new Si(e)}static fromString(e){const r=e.replace(/[R$\s]/g,"").trim();let n;r.includes(".")&&r.includes(",")?n=r.replace(/\./g,"").replace(",","."):r.includes(",")?n=r.replace(",","."):n=r;const s=parseFloat(n);return isNaN(s)||s<0?null:Si.fromReais(s)}static zero(){return new Si(0)}getCents(){return this.cents}getReais(){return this.cents/100}add(e){return new Si(this.cents+e.cents)}subtract(e){return new Si(this.cents-e.cents)}multiply(e){return new Si(this.cents*e)}divide(e){if(e===0)throw new Error("Division by zero");return new Si(this.cents/e)}percentage(e){return new Si(this.cents*(e/100))}isPositive(){return this.cents>0}isNegative(){return this.cents<0}isZero(){return this.cents===0}equals(e){return this.cents===e.cents}greaterThan(e){return this.cents>e.cents}lessThan(e){return this.cents<e.cents}toFormattedString(){const e=this.getReais();return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}toString(){return this.toFormattedString()}static schema=hCe([Za().min(0,"Valor deve ser positivo"),br().transform(e=>{const r=Si.fromString(e);if(!r)throw new Error("Formato de valor monetário inválido");return r.getReais()})])}class mO{constructor(e){this.value=e}static create(e){const r=e.toLowerCase().trim();return mO.isValid(r)?new mO(r):null}static isValid(e){return!(!/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)||e.length>254||e.includes("..")||e.startsWith(".")||e.endsWith("."))}getValue(){return this.value}getDomain(){return this.value.split("@")[1]}getLocalPart(){return this.value.split("@")[0]}equals(e){return this.value===e.value}toString(){return this.value}static schema=br().email("Email inválido").max(254,"Email muito longo").transform(e=>e.toLowerCase().trim())}class rb{constructor(e){this.value=e}static create(e){const r=e.replace(/\D/g,"");return rb.isValid(r)?new rb(r):null}static isValid(e){const r=e.replace(/\D/g,"");return r.length===11?/^[1-9]{2}9[0-9]{8}$/.test(r):r.length===10?/^[1-9]{2}[2-9][0-9]{7}$/.test(r):!1}getValue(){return this.value}getFormatted(){const e=this.value;return e.length===11?`(${e.substring(0,2)}) ${e.substring(2,7)}-${e.substring(7)}`:`(${e.substring(0,2)}) ${e.substring(2,6)}-${e.substring(6)}`}isMobile(){return this.value.length===11}equals(e){return this.value===e.value}toString(){return this.getFormatted()}static schema=br().transform(e=>e.replace(/\D/g,"")).refine(rb.isValid,{message:"Número de telefone inválido"})}class Hh{constructor(e){this.value=e}static create(e){const r=e.replace(/\D/g,"");return Hh.isValid(r)?new Hh(r):null}static isValid(e){const r=e.replace(/\D/g,"");return/^[0-9]{8}$/.test(r)}getValue(){return this.value}getFormatted(){return`${this.value.substring(0,5)}-${this.value.substring(5)}`}equals(e){return this.value===e.value}toString(){return this.getFormatted()}static schema=br().transform(e=>e.replace(/\D/g,"")).refine(Hh.isValid,{message:"CEP inválido"}).transform(e=>new Hh(e))}var _S="Switch",[pRe,p7e]=cs(_S),[mRe,gRe]=pRe(_S),iee=N.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=t,[m,g]=N.useState(null),x=Et(e,A=>g(A)),v=N.useRef(!1),y=m?d||!!m.closest("form"):!0,[w,_]=Ma({prop:s,defaultProp:a??!1,onChange:u,caller:_S});return i.jsxs(mRe,{scope:r,checked:w,disabled:l,children:[i.jsx(He.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":uee(w),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:x,onClick:Le(t.onClick,A=>{_(C=>!C),y&&(v.current=A.isPropagationStopped(),v.current||A.stopPropagation())})}),y&&i.jsx(cee,{control:m,bubbles:!v.current,name:n,value:c,checked:w,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});iee.displayName=_S;var oee="SwitchThumb",lee=N.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=gRe(oee,r);return i.jsx(He.span,{"data-state":uee(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});lee.displayName=oee;var vRe="SwitchBubbleInput",cee=N.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},a)=>{const o=N.useRef(null),l=Et(o,a),c=O2(r),u=BM(e);return N.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&g){const x=new Event("click",{bubbles:n});g.call(d,r),d.dispatchEvent(x)}},[c,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});cee.displayName=vRe;function uee(t){return t?"checked":"unchecked"}var dee=iee,yRe=lee;const M2=N.forwardRef(({className:t,...e},r)=>i.jsx(dee,{className:Ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:i.jsx(yRe,{className:Ie("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));M2.displayName=dee.displayName;const el=({value:t,onChange:e,...r})=>{const n=a=>{const o=a.replace(/\D/g,""),l=parseInt(o,10)/100;return isNaN(l)?"":l.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},s=a=>{const o=n(a.target.value),l={...a,target:{...a.target,value:o}};e(l)};return i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),i.jsx(Fe,{...r,value:t,onChange:s,className:`pl-10 ${r.className||""}`,placeholder:"0,00"})]})},tl=N.forwardRef(({mask:t,value:e="",onChange:r,placeholder:n,...s},a)=>{const o=(f,m)=>{const g=f.replace(/\D/g,"");let x="",v=0;for(let y=0;y<m.length&&v<g.length;y++)m[y]==="9"?(x+=g[v],v++):x+=m[y];return x},l=(f,m)=>f?o(f,m):"",[c,u]=N.useState(l(e,t)),d=f=>{const m=f.target.value,g=o(m,t);if(u(g),r){const x=m.replace(/\D/g,"");r(x)}};return G.useEffect(()=>{u(l(e,t))},[e,t]),i.jsx(Fe,{...s,ref:a,value:c,onChange:d,placeholder:n||t.replace(/9/g,"_")})});tl.displayName="MaskedInput";const gU=[{code:"001",name:"Banco do Brasil S.A."},{code:"033",name:"Banco Santander (Brasil) S.A."},{code:"104",name:"Caixa Econômica Federal"},{code:"237",name:"Banco Bradesco S.A."},{code:"341",name:"Banco Itaú S.A."},{code:"077",name:"Banco Inter S.A."},{code:"260",name:"Nu Pagamentos S.A. (Nubank)"},{code:"070",name:"BRB - Banco de Brasília S.A."},{code:"290",name:"PagSeguro Internet S.A."},{code:"323",name:"Mercado Pago"},{code:"380",name:"PicPay Servicos S.A."},{code:"422",name:"Banco Safra S.A."},{code:"745",name:"Banco Citibank S.A."},{code:"756",name:"Banco Cooperativo do Brasil S.A. - BANCOOB"},{code:"748",name:"Banco Cooperativo Sicredi S.A."},{code:"208",name:"Banco BTG Pactual S.A."},{code:"212",name:"Banco Original S.A."},{code:"389",name:"Banco Mercantil do Brasil S.A."},{code:"633",name:"Banco Rendimento S.A."},{code:"336",name:"Banco C6 S.A."},{code:"735",name:"Banco Neon S.A."},{code:"197",name:"Stone Pagamentos S.A."},{code:"102",name:"XP Investimentos"},{code:"003",name:"Banco da Amazônia S.A."},{code:"004",name:"Banco do Nordeste do Brasil S.A."},{code:"012",name:"Banco Inbursa S.A."},{code:"021",name:"BANESTES S.A. Banco do Estado do Espírito Santo"},{code:"025",name:"Banco Alfa S.A."},{code:"036",name:"Banco Bradesco BBI S.A."},{code:"041",name:"Banco do Estado do Rio Grande do Sul S.A."},{code:"047",name:"Banco do Estado de Sergipe S.A."},{code:"062",name:"Hipercard Banco Múltiplo S.A."},{code:"063",name:"Banco Bradescard S.A."},{code:"065",name:"Banco Andbank (Brasil) S.A."},{code:"069",name:"Banco Crefisa S.A."},{code:"074",name:"Banco J. Safra S.A."},{code:"082",name:"Banco Topázio S.A."},{code:"083",name:"Banco da China Brasil S.A."},{code:"085",name:"Ailos"},{code:"089",name:"Credisan"},{code:"091",name:"Unicred Central"},{code:"092",name:"BRK S.A."},{code:"093",name:"Polocred"},{code:"094",name:"Banco Finaxis S.A."},{code:"095",name:"Banco Confidence de Câmbio S.A."},{code:"096",name:"Banco BMFBovespa"},{code:"097",name:"CentralCred"},{code:"098",name:"Credialiança"},{code:"099",name:"Uniprime Central"},{code:"121",name:"Banco Agibank S.A."},{code:"125",name:"Plural S.A."},{code:"184",name:"Banco Itaú BBA S.A."},{code:"204",name:"Banco Bradesco Cartões S.A."},{code:"213",name:"Banco Arbi S.A."},{code:"217",name:"Banco John Deere S.A."},{code:"218",name:"Banco BS2 S.A."},{code:"222",name:"Banco Credit Agrícole Brasil S.A."},{code:"224",name:"Banco Fibra S.A."},{code:"233",name:"Banco Cifra S.A."},{code:"241",name:"Banco Clássico S.A."},{code:"243",name:"Banco Máxima S.A."},{code:"246",name:"Banco ABC Brasil S.A."},{code:"249",name:"Banco Investcred S.A."},{code:"250",name:"BCV - Banco de Crédito e Varejo S.A."},{code:"253",name:"Bexs Corretora de Câmbio S/A"},{code:"254",name:"Paraná Banco S.A."},{code:"265",name:"Banco Fator S.A."},{code:"266",name:"Banco Cédula S.A."},{code:"268",name:"Barigui"},{code:"269",name:"HSBC Brasil S.A."},{code:"271",name:"IB Cctvm S.A."},{code:"300",name:"Banco de La Nacion Argentina"},{code:"318",name:"Banco BMG S.A."},{code:"320",name:"China Construction Bank (Brasil)"},{code:"348",name:"Banco XP S.A."},{code:"366",name:"Banco Société Générale Brasil S.A."},{code:"370",name:"Banco Mizuho do Brasil S.A."},{code:"376",name:"Banco J. P. Morgan S.A."},{code:"394",name:"Banco Bradesco Financiamentos S.A."},{code:"399",name:"Kirton Bank S.A."},{code:"412",name:"Banco Capital S.A."},{code:"453",name:"Banco Rural S.A."},{code:"456",name:"Banco de Tokyo-Mitsubishi UFJ Brasil S.A."},{code:"464",name:"Banco Sumitomo Mitsui Brasileiro S.A."},{code:"473",name:"Banco Caixa Geral - Brasil S.A."},{code:"477",name:"Citibank N.A."},{code:"479",name:"Banco ItauBank S.A"},{code:"487",name:"Deutsche Bank S.A."},{code:"488",name:"JPMorgan Chase Bank"},{code:"492",name:"ING Bank N.V."},{code:"494",name:"Banco de La Republica Oriental del Uruguay"},{code:"495",name:"Banco de La Provincia de Buenos Aires"},{code:"505",name:"Banco Credit Suisse (Brasil) S.A."},{code:"600",name:"Banco Luso Brasileiro S.A."},{code:"604",name:"Banco Industrial do Brasil S.A."},{code:"610",name:"Banco VR S.A."},{code:"611",name:"Banco Paulista S.A."},{code:"612",name:"Banco Guanabara S.A."},{code:"613",name:"Omni Banco S.A."},{code:"623",name:"Banco PAN S.A."},{code:"626",name:"Banco Ficsa S.A."},{code:"630",name:"Banco Intercap S.A."},{code:"634",name:"Banco Triângulo S.A."},{code:"637",name:"Banco Sofisa S.A."},{code:"641",name:"Banco Alvorada S.A."},{code:"643",name:"Banco Pine S.A."},{code:"652",name:"Itaú Unibanco Holding S.A."},{code:"653",name:"Banco Indusval S.A."},{code:"654",name:"Banco A.J.Renner S.A."},{code:"655",name:"Banco Votorantim S.A."},{code:"707",name:"Banco Daycoval S.A."},{code:"739",name:"Banco Cetelem S.A."},{code:"741",name:"Banco Ribeirão Preto S.A."},{code:"743",name:"Banco Semear S.A."},{code:"746",name:"Banco Modal S.A."},{code:"747",name:"Banco Rabobank International Brasil S.A."},{code:"751",name:"Scotiabank Brasil S.A."},{code:"752",name:"Banco BNP Paribas Brasil S.A."},{code:"753",name:"Novo Banco Continental S.A."},{code:"754",name:"Sistema Cooperativo de Crédito"},{code:"755",name:"Bank of America Merrill Lynch"}].sort((t,e)=>t.name.localeCompare(e.name)),p0=[{code:"001",name:"Banco do Brasil"},{code:"033",name:"Santander"},{code:"104",name:"Caixa Econômica"},{code:"237",name:"Bradesco"},{code:"341",name:"Itaú"},{code:"077",name:"Inter"},{code:"260",name:"Nubank"},{code:"336",name:"C6 Bank"},{code:"290",name:"PagSeguro"},{code:"323",name:"Mercado Pago"}];var D2="Progress",L2=100,[xRe,m7e]=cs(D2),[bRe,wRe]=xRe(D2),hee=N.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:a=_Re,...o}=t;(s||s===0)&&!vU(s)&&console.error(SRe(`${s}`,"Progress"));const l=vU(s)?s:L2;n!==null&&!yU(n,l)&&console.error(jRe(`${n}`,"Progress"));const c=yU(n,l)?n:null,u=fw(c)?a(c,l):void 0;return i.jsx(bRe,{scope:r,value:c,max:l,children:i.jsx(He.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":fw(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":mee(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});hee.displayName=D2;var fee="ProgressIndicator",pee=N.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,s=wRe(fee,r);return i.jsx(He.div,{"data-state":mee(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});pee.displayName=fee;function _Re(t,e){return`${Math.round(t/e*100)}%`}function mee(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function fw(t){return typeof t=="number"}function vU(t){return fw(t)&&!isNaN(t)&&t>0}function yU(t,e){return fw(t)&&!isNaN(t)&&t<=e&&t>=0}function SRe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${L2}\`.`}function jRe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${L2} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var gee=hee,ARe=pee;const On=N.forwardRef(({className:t,value:e,...r},n)=>i.jsx(gee,{ref:n,className:Ie("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:i.jsx(ARe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));On.displayName=gee.displayName;var vee="AlertDialog",[NRe,g7e]=cs(vee,[PY]),Cl=PY(),yee=t=>{const{__scopeAlertDialog:e,...r}=t,n=Cl(e);return i.jsx(WY,{...n,...r,modal:!0})};yee.displayName=vee;var ERe="AlertDialogTrigger",CRe=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Cl(r);return i.jsx(GY,{...s,...n,ref:e})});CRe.displayName=ERe;var TRe="AlertDialogPortal",xee=t=>{const{__scopeAlertDialog:e,...r}=t,n=Cl(e);return i.jsx(KY,{...n,...r})};xee.displayName=TRe;var PRe="AlertDialogOverlay",bee=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Cl(r);return i.jsx(ZM,{...s,...n,ref:e})});bee.displayName=PRe;var of="AlertDialogContent",[kRe,ORe]=NRe(of),RRe=VK("AlertDialogContent"),wee=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...s}=t,a=Cl(r),o=N.useRef(null),l=Et(e,o),c=N.useRef(null);return i.jsx(YEe,{contentName:of,titleName:_ee,docsSlug:"alert-dialog",children:i.jsx(kRe,{scope:r,cancelRef:c,children:i.jsxs(e2,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:Le(s.onOpenAutoFocus,u=>{u.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(RRe,{children:n}),i.jsx(MRe,{contentRef:o})]})})})});wee.displayName=of;var _ee="AlertDialogTitle",See=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Cl(r);return i.jsx(t2,{...s,...n,ref:e})});See.displayName=_ee;var jee="AlertDialogDescription",Aee=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Cl(r);return i.jsx(r2,{...s,...n,ref:e})});Aee.displayName=jee;var IRe="AlertDialogAction",Nee=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Cl(r);return i.jsx(n2,{...s,...n,ref:e})});Nee.displayName=IRe;var Eee="AlertDialogCancel",Cee=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=ORe(Eee,r),a=Cl(r),o=Et(e,s);return i.jsx(n2,{...a,...n,ref:o})});Cee.displayName=Eee;var MRe=({contentRef:t})=>{const e=`\`${of}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${of}\` by passing a \`${jee}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${of}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},DRe=yee,LRe=xee,Tee=bee,Pee=wee,kee=Nee,Oee=Cee,Ree=See,Iee=Aee;const $2=DRe,$Re=LRe,Mee=N.forwardRef(({className:t,...e},r)=>i.jsx(Tee,{className:Ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));Mee.displayName=Tee.displayName;const SS=N.forwardRef(({className:t,...e},r)=>i.jsxs($Re,{children:[i.jsx(Mee,{}),i.jsx(Pee,{ref:r,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));SS.displayName=Pee.displayName;const jS=({className:t,...e})=>i.jsx("div",{className:Ie("flex flex-col space-y-2 text-center sm:text-left",t),...e});jS.displayName="AlertDialogHeader";const AS=({className:t,...e})=>i.jsx("div",{className:Ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});AS.displayName="AlertDialogFooter";const NS=N.forwardRef(({className:t,...e},r)=>i.jsx(Ree,{ref:r,className:Ie("text-lg font-semibold",t),...e}));NS.displayName=Ree.displayName;const ES=N.forwardRef(({className:t,...e},r)=>i.jsx(Iee,{ref:r,className:Ie("text-sm text-muted-foreground",t),...e}));ES.displayName=Iee.displayName;const CS=N.forwardRef(({className:t,...e},r)=>i.jsx(kee,{ref:r,className:Ie(sS(),t),...e}));CS.displayName=kee.displayName;const TS=N.forwardRef(({className:t,...e},r)=>i.jsx(Oee,{ref:r,className:Ie(sS({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));TS.displayName=Oee.displayName;const FRe=({isOpen:t,onClose:e,onConfirm:r,title:n,description:s,confirmText:a="Confirmar",cancelText:o="Cancelar",variant:l="default",isLoading:c=!1})=>i.jsx($2,{open:t,onOpenChange:e,children:i.jsxs(SS,{children:[i.jsxs(jS,{children:[i.jsxs(NS,{className:"flex items-center gap-2",children:[l==="destructive"&&i.jsx(jr,{className:"h-5 w-5 text-red-500"}),n]}),i.jsx(ES,{children:s})]}),i.jsxs(AS,{children:[i.jsx(TS,{disabled:c,children:o}),i.jsx(CS,{onClick:r,disabled:c,className:l==="destructive"?"bg-red-600 hover:bg-red-700 focus:ring-red-600":"",children:c?"Processando...":a})]})]})});function BRe(){const{state:t}=Kc(),{updateClient:e,setError:r,clearError:n}=Pp(),{clientData:s,errors:a}=t,{toast:o}=Fr(),[l,c]=N.useState(!1),[u,d]=N.useState(!1),[f,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(!1),[w,_]=N.useState({isValid:!1,isValidating:!1}),A=pO(s.cep,500),[C,S]=N.useState(0),[E,P]=N.useState(null),[R,O]=N.useState(!1),D=N.useCallback(async B=>{const F=B.replace(/\D/g,"");if(F.length===8){c(!0);try{const Y=await Je(`/api/cep/${F}`,{method:"GET"});Y&&Y.logradouro?(e({logradouro:Y.logradouro||"",bairro:Y.bairro||"",cidade:Y.cidade||"",estado:Y.estado||""}),y(!0),setTimeout(()=>y(!1),1800),n("cep"),o({title:"CEP encontrado!",description:"Endereço preenchido automaticamente."})):r("cep","CEP não encontrado")}catch(Y){console.error("Erro ao buscar CEP:",Y),r("cep","Erro ao buscar CEP")}finally{c(!1)}}},[e,r,n,o]),I=N.useCallback(async B=>{const F=B.replace(/\D/g,"");if(F.length===11){d(!0);try{const Y=await Je(`/api/clientes/cpf/${F}`,{method:"GET"});Y&&Y.exists&&Y.data&&(P(Y.data),O(!0))}catch(Y){console.error("Erro ao buscar dados do cliente:",Y)}finally{d(!1)}}},[P,O]),$=N.useCallback(()=>{if(!E)return;const B=E,F=B.clienteData||{},Y={nome:B.clienteNome||F.nome||"",email:B.clienteEmail||F.email||"",telefone:B.clienteTelefone||F.telefone||"",dataNascimento:B.clienteDataNascimento||F.dataNascimento||F.data_nascimento||"",rg:B.clienteRg||F.rg||"",orgaoEmissor:B.clienteOrgaoEmissor||F.orgaoEmissor||"",rgUf:B.clienteRgUf||F.uf||"",rgDataEmissao:B.clienteRgDataEmissao||F.rgDataEmissao||"",localNascimento:F.localNascimento||B.clienteLocalNascimento||"",estadoCivil:F.estadoCivil||B.clienteEstadoCivil||"",nacionalidade:F.nacionalidade||B.clienteNacionalidade||"",cep:B.clienteCep||F.cep||"",logradouro:B.clienteLogradouro||F.logradouro||"",numero:B.clienteNumero||F.numero||"",complemento:B.clienteComplemento||F.complemento||"",bairro:B.clienteBairro||F.bairro||"",cidade:B.clienteCidade||F.cidade||"",estado:B.clienteUf||F.estado||"",ocupacao:B.clienteOcupacao||F.ocupacao||"",rendaMensal:F.rendaMensal?.cents?(F.rendaMensal.cents/100).toString():F.renda_mensal||B.clienteRenda||B.clienteRendaMensal||"",telefoneEmpresa:F.telefoneEmpresa||B.clienteTelefoneEmpresa||"",clienteEmpresaNome:F.empregador||B.clienteEmpresaNome||"",clienteDividasExistentes:F.dividas_existentes||B.clienteDividasExistentes||"",clienteTempoEmprego:F.tempo_emprego||B.clienteTempoEmprego||"",clienteCargoFuncao:F.cargo_funcao||B.clienteCargoFuncao||"",metodoPagamento:B.metodoPagamento||"conta_bancaria",dadosPagamentoBanco:B.dadosPagamentoBanco||"",dadosPagamentoAgencia:B.dadosPagamentoAgencia||"",dadosPagamentoConta:B.dadosPagamentoConta||"",dadosPagamentoDigito:B.dadosPagamentoDigito||"",dadosPagamentoPix:B.dadosPagamentoPix||"",dadosPagamentoTipoPix:B.dadosPagamentoTipoPix||"",dadosPagamentoPixBanco:B.dadosPagamentoPixBanco||"",dadosPagamentoPixNomeTitular:B.dadosPagamentoPixNomeTitular||"",dadosPagamentoPixCpfTitular:B.dadosPagamentoPixCpfTitular||""};e(Y),o({title:"Dados carregados!",description:"Dados do cliente preenchidos automaticamente."}),O(!1),P(null)},[E,e,o]);N.useEffect(()=>{const B=A.replace(/\D/g,"");B.length===8&&Hh.isValid(B)&&!f&&(D(A),m(!0))},[A,D,f]);const M=B=>{e({tipoPessoa:B?"PJ":"PF",...!B&&{razaoSocial:"",cnpj:""}})},U=B=>{e({cpf:B}),n("cpf"),B!==s.cpf&&x(!1);const F=B.replace(/\D/g,"");_({isValidating:!0,isValid:!1}),setTimeout(()=>{const Y=hg.isValid(F);_({isValidating:!1,isValid:Y}),F.length===11&&Y&&!g&&(I(B),x(!0))},100)},H=B=>{e({cnpj:B}),n("cnpj")},z=B=>{e({email:B}),n("email")},q=B=>{e({telefone:B}),n("telefone")},V=B=>{e({cep:B}),n("cep"),B!==s.cep&&m(!1)},W=B=>{e({nome:B}),n("nome")};return N.useEffect(()=>{const B=[s.nome,s.cpf||s.cnpj,s.email,s.telefone,s.dataNascimento,s.cep,s.logradouro,s.numero,s.cidade,s.estado,s.ocupacao,s.rendaMensal],F=B.filter(xe=>xe&&xe.toString().trim()!=="").length,Y=B.length,oe=Math.round(F/Y*100);S(oe)},[s]),i.jsxs("div",{className:"space-y-6",children:[i.jsx(ee,{children:i.jsx(re,{className:"pt-6",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Progresso do Formulário"}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[C,"% completo"]})]}),i.jsx(On,{value:C,className:"h-2"}),u&&i.jsxs("p",{className:"flex items-center gap-1 text-xs text-blue-600",children:[i.jsx(un,{className:"h-3 w-3 animate-spin"})," Buscando dados do cliente..."]})]})})}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(Na,{className:"h-5 w-5"}),"Tipo de Pessoa"]}),i.jsx(Jt,{children:"Selecione se é Pessoa Física ou Jurídica"})]}),i.jsx(re,{children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(ue,{htmlFor:"tipo-pessoa",className:"text-base",children:"Pessoa Física"}),i.jsx(M2,{id:"tipo-pessoa",checked:s.tipoPessoa==="PJ",onCheckedChange:M,"data-testid":"switch-tipo-pessoa"}),i.jsx(ue,{htmlFor:"tipo-pessoa",className:"text-base",children:"Pessoa Jurídica"})]})})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(El,{className:"h-5 w-5"}),s.tipoPessoa==="PJ"?"Dados da Empresa":"Dados Pessoais"]}),i.jsx(Jt,{children:s.tipoPessoa==="PJ"?"Informações da empresa":"Informações básicas do cliente"})]}),i.jsxs(re,{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[s.tipoPessoa==="PJ"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(ue,{htmlFor:"razaoSocial",children:"Razão Social *"}),i.jsx(Fe,{id:"razaoSocial",type:"text",value:s.razaoSocial||"",onChange:B=>e({razaoSocial:B.target.value}),placeholder:"Nome da empresa","data-testid":"input-razao-social"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"cnpj",children:"CNPJ *"}),i.jsx("div",{className:"relative",children:i.jsx(tl,{mask:"99.999.999/9999-99",value:s.cnpj||"",onChange:B=>H(B),id:"cnpj",placeholder:"00.000.000/0000-00",className:a.cnpj?"border-destructive focus:border-destructive":"","data-testid":"input-cnpj"})}),a.cnpj&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.cnpj})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nome",children:"Representante Legal *"}),i.jsx(Fe,{id:"nome",type:"text",value:s.nome,onChange:B=>W(B.target.value),className:a.nome?"border-destructive focus:border-destructive":"",placeholder:"Nome do representante","data-testid":"input-nome-representante"}),a.nome&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.nome})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"cpf",children:"CPF *"}),i.jsxs("div",{className:"relative",children:[i.jsx(tl,{mask:"999.999.999-99",value:s.cpf,onChange:B=>U(B),id:"cpf",placeholder:"000.000.000-00",className:`pr-10 ${a.cpf?"border-destructive focus:border-destructive":w.isValid?"border-green-500 focus:border-green-600":""}`,"data-testid":"input-cpf"}),i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:w.isValidating?i.jsx(un,{className:"h-4 w-4 animate-spin text-gray-400","data-testid":"icon-cpf-loading"}):s.cpf&&s.cpf.replace(/\D/g,"").length>=3?w.isValid?i.jsx(fr,{className:"h-4 w-4 text-green-600","data-testid":"icon-cpf-valid"}):i.jsx(Ea,{className:"h-4 w-4 text-red-500","data-testid":"icon-cpf-invalid"}):null})]}),a.cpf&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.cpf}),s.cpf&&w.isValid&&i.jsxs("p",{className:"mt-1 text-sm text-green-600 flex items-center gap-1",children:[i.jsx(fr,{className:"h-3 w-3"}),"CPF válido"]})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nome",children:"Nome Completo *"}),i.jsx(Fe,{id:"nome",type:"text",value:s.nome,onChange:B=>W(B.target.value),className:a.nome?"border-destructive focus:border-destructive":"","data-testid":"input-nome"}),a.nome&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.nome})]})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"dataNascimento",children:"Data de Nascimento"}),i.jsx(Fe,{id:"dataNascimento",type:"date",value:s.dataNascimento,onChange:B=>e({dataNascimento:B.target.value}),className:a.dataNascimento?"border-red-500":"","data-testid":"input-data-nascimento"}),a.dataNascimento&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.dataNascimento})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"localNascimento",children:"Local de Nascimento"}),i.jsx(Fe,{id:"localNascimento",type:"text",placeholder:"Cidade - UF",value:s.localNascimento,onChange:B=>e({localNascimento:B.target.value}),"data-testid":"input-local-nascimento"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"estadoCivil",children:"Estado Civil"}),i.jsxs(Yt,{value:s.estadoCivil,onValueChange:B=>e({estadoCivil:B}),children:[i.jsx(Ht,{"data-testid":"select-estado-civil",children:i.jsx(Qt,{placeholder:"Selecione..."})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"solteiro",children:"Solteiro(a)"}),i.jsx(le,{value:"casado",children:"Casado(a)"}),i.jsx(le,{value:"divorciado",children:"Divorciado(a)"}),i.jsx(le,{value:"viuvo",children:"Viúvo(a)"}),i.jsx(le,{value:"uniao_estavel",children:"União Estável"})]})]})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nacionalidade",children:"Nacionalidade"}),i.jsxs(Yt,{value:s.nacionalidade||"",onValueChange:B=>e({nacionalidade:B}),children:[i.jsx(Ht,{"data-testid":"select-nacionalidade",children:i.jsx(Qt,{placeholder:"Selecione a nacionalidade"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"BRASILEIRO",children:"BRASILEIRO"}),i.jsx(le,{value:"BRASILEIRA",children:"BRASILEIRA"})]})]})]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"h-5 w-5"}),"Documento de Identidade"]}),i.jsx(Jt,{children:"Informações completas do RG"})]}),i.jsxs(re,{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"rg",children:"RG"}),i.jsx(Fe,{id:"rg",type:"text",value:s.rg,onChange:B=>e({rg:B.target.value}),"data-testid":"input-rg"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"orgaoEmissor",children:"Órgão Emissor"}),i.jsx(Fe,{id:"orgaoEmissor",type:"text",placeholder:"SSP, Detran, etc.",value:s.orgaoEmissor,onChange:B=>e({orgaoEmissor:B.target.value}),"data-testid":"input-orgao-emissor"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"rgUf",children:"UF de Emissão"}),i.jsxs(Yt,{value:s.rgUf,onValueChange:B=>e({rgUf:B}),children:[i.jsx(Ht,{"data-testid":"select-rg-uf",children:i.jsx(Qt,{placeholder:"Selecione..."})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"AC",children:"AC"}),i.jsx(le,{value:"AL",children:"AL"}),i.jsx(le,{value:"AP",children:"AP"}),i.jsx(le,{value:"AM",children:"AM"}),i.jsx(le,{value:"BA",children:"BA"}),i.jsx(le,{value:"CE",children:"CE"}),i.jsx(le,{value:"DF",children:"DF"}),i.jsx(le,{value:"ES",children:"ES"}),i.jsx(le,{value:"GO",children:"GO"}),i.jsx(le,{value:"MA",children:"MA"}),i.jsx(le,{value:"MT",children:"MT"}),i.jsx(le,{value:"MS",children:"MS"}),i.jsx(le,{value:"MG",children:"MG"}),i.jsx(le,{value:"PA",children:"PA"}),i.jsx(le,{value:"PB",children:"PB"}),i.jsx(le,{value:"PR",children:"PR"}),i.jsx(le,{value:"PE",children:"PE"}),i.jsx(le,{value:"PI",children:"PI"}),i.jsx(le,{value:"RJ",children:"RJ"}),i.jsx(le,{value:"RN",children:"RN"}),i.jsx(le,{value:"RS",children:"RS"}),i.jsx(le,{value:"RO",children:"RO"}),i.jsx(le,{value:"RR",children:"RR"}),i.jsx(le,{value:"SC",children:"SC"}),i.jsx(le,{value:"SP",children:"SP"}),i.jsx(le,{value:"SE",children:"SE"}),i.jsx(le,{value:"TO",children:"TO"})]})]})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"rgDataEmissao",children:"Data de Emissão do RG"}),i.jsx(Fe,{id:"rgDataEmissao",type:"date",value:s.rgDataEmissao,onChange:B=>e({rgDataEmissao:B.target.value}),"data-testid":"input-rg-data-emissao"})]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(CX,{className:"h-5 w-5"}),"Contato"]}),i.jsx(Jt,{children:"Informações de contato"})]}),i.jsxs(re,{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"telefone",children:"Telefone/WhatsApp *"}),i.jsx(tl,{mask:"(99) 99999-9999",value:s.telefone,onChange:B=>q(B),id:"telefone",type:"tel",placeholder:"(11) 98765-4321",className:a.telefone?"border-destructive focus:border-destructive":"","data-testid":"input-telefone"}),a.telefone&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.telefone})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"email",children:"E-mail *"}),i.jsx("div",{className:"relative",children:i.jsx(Fe,{id:"email",type:"email",value:s.email,onChange:B=>z(B.target.value),className:a.email?"border-destructive focus:border-destructive":"","data-testid":"input-email"})}),a.email&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.email})]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(kM,{className:"h-5 w-5"}),"Endereço Detalhado"]}),i.jsx(Jt,{children:"Endereço completo para o CCB"})]}),i.jsxs(re,{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"cep",children:"CEP"}),i.jsxs("div",{className:"relative",children:[i.jsx(tl,{mask:"99999-999",value:s.cep,onChange:B=>V(B),id:"cep",placeholder:"00000-000",className:`${a.cep?"border-destructive focus:border-destructive":s.logradouro&&!l?"border-green-500 focus:border-green-500":""} pr-10`,"data-testid":"input-cep"}),i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:l?i.jsx(un,{className:"h-4 w-4 animate-spin text-blue-500","data-testid":"icon-cep-loading"}):s.logradouro?i.jsx(fr,{className:"h-4 w-4 text-green-600","data-testid":"icon-cep-success"}):null}),l&&i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 transform",children:i.jsx(un,{className:"h-4 w-4 animate-spin text-blue-500"})}),!l&&s.logradouro&&i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 transform",children:i.jsx(fr,{className:"h-4 w-4 text-green-500"})})]}),a.cep&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.cep}),l&&i.jsxs("p",{className:"mt-1 flex items-center gap-1 text-xs text-blue-600",children:[i.jsx(un,{className:"h-3 w-3 animate-spin"}),"Buscando endereço..."]}),!l&&s.logradouro&&!a.cep&&i.jsxs("p",{className:"mt-1 flex items-center gap-1 text-xs text-green-600",children:[i.jsx(fr,{className:"h-3 w-3"}),"Endereço encontrado e preenchido automaticamente"]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(ue,{htmlFor:"logradouro",children:"Logradouro (Rua/Avenida)"}),i.jsx(Fe,{id:"logradouro",type:"text",placeholder:"Ex: Rua das Flores, Avenida Brasil",value:s.logradouro,onChange:B=>e({logradouro:B.target.value}),className:`${a.logradouro?"border-destructive":""} ${v?"address-flash":""}`,"data-testid":"input-logradouro"}),a.logradouro&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.logradouro})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"numero",children:"Número"}),i.jsx(Fe,{id:"numero",type:"text",value:s.numero,onChange:B=>e({numero:B.target.value}),"data-testid":"input-numero"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"complemento",children:"Complemento"}),i.jsx(Fe,{id:"complemento",type:"text",placeholder:"Apto, Bloco, Sala, etc.",value:s.complemento,onChange:B=>e({complemento:B.target.value}),"data-testid":"input-complemento"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"bairro",children:"Bairro"}),i.jsx(Fe,{id:"bairro",type:"text",value:s.bairro,onChange:B=>e({bairro:B.target.value}),className:v?"address-flash":"","data-testid":"input-bairro"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"cidade",children:"Cidade"}),i.jsx(Fe,{id:"cidade",type:"text",value:s.cidade,onChange:B=>e({cidade:B.target.value}),className:v?"address-flash":"","data-testid":"input-cidade"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"estado",children:"Estado"}),i.jsxs(Yt,{value:s.estado,onValueChange:B=>e({estado:B}),children:[i.jsx(Ht,{className:v?"address-flash":"","data-testid":"select-estado",children:i.jsx(Qt,{placeholder:"Selecione..."})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"AC",children:"Acre"}),i.jsx(le,{value:"AL",children:"Alagoas"}),i.jsx(le,{value:"AP",children:"Amapá"}),i.jsx(le,{value:"AM",children:"Amazonas"}),i.jsx(le,{value:"BA",children:"Bahia"}),i.jsx(le,{value:"CE",children:"Ceará"}),i.jsx(le,{value:"DF",children:"Distrito Federal"}),i.jsx(le,{value:"ES",children:"Espírito Santo"}),i.jsx(le,{value:"GO",children:"Goiás"}),i.jsx(le,{value:"MA",children:"Maranhão"}),i.jsx(le,{value:"MT",children:"Mato Grosso"}),i.jsx(le,{value:"MS",children:"Mato Grosso do Sul"}),i.jsx(le,{value:"MG",children:"Minas Gerais"}),i.jsx(le,{value:"PA",children:"Pará"}),i.jsx(le,{value:"PB",children:"Paraíba"}),i.jsx(le,{value:"PR",children:"Paraná"}),i.jsx(le,{value:"PE",children:"Pernambuco"}),i.jsx(le,{value:"PI",children:"Piauí"}),i.jsx(le,{value:"RJ",children:"Rio de Janeiro"}),i.jsx(le,{value:"RN",children:"Rio Grande do Norte"}),i.jsx(le,{value:"RS",children:"Rio Grande do Sul"}),i.jsx(le,{value:"RO",children:"Rondônia"}),i.jsx(le,{value:"RR",children:"Roraima"}),i.jsx(le,{value:"SC",children:"Santa Catarina"}),i.jsx(le,{value:"SP",children:"São Paulo"}),i.jsx(le,{value:"SE",children:"Sergipe"}),i.jsx(le,{value:"TO",children:"Tocantins"})]})]})]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(vX,{className:"h-5 w-5"}),"Dados Profissionais"]}),i.jsx(Jt,{children:"Informações sobre ocupação e renda"})]}),i.jsxs(re,{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"ocupacao",children:"Ocupação/Profissão"}),i.jsx(Fe,{id:"ocupacao",type:"text",value:s.ocupacao,onChange:B=>e({ocupacao:B.target.value}),className:a.ocupacao?"border-destructive":"","data-testid":"input-ocupacao"}),a.ocupacao&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.ocupacao})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"rendaMensal",children:"Renda Mensal"}),i.jsx(el,{id:"rendaMensal",value:s.rendaMensal,onChange:B=>e({rendaMensal:B.target.value}),className:a.rendaMensal?"border-destructive":"","data-testid":"input-renda-mensal"}),a.rendaMensal&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.rendaMensal})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(ue,{htmlFor:"telefoneEmpresa",children:"Telefone da Empresa"}),i.jsx(tl,{mask:"(99) 9999-9999",value:s.telefoneEmpresa,onChange:B=>e({telefoneEmpresa:B}),id:"telefoneEmpresa",type:"tel",placeholder:"(11) 3456-7890",className:a.telefoneEmpresa?"border-destructive focus:border-destructive":"","data-testid":"input-telefone-empresa"}),a.telefoneEmpresa&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.telefoneEmpresa})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"clienteEmpresaNome",children:"Nome da Empresa"}),i.jsx(Fe,{id:"clienteEmpresaNome",type:"text",value:s.clienteEmpresaNome||"",onChange:B=>e({clienteEmpresaNome:B.target.value}),placeholder:"Ex: Empresa LTDA","data-testid":"input-empresa-nome"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"clienteDataAdmissao",children:"Data de Admissão"}),i.jsx(Fe,{id:"clienteDataAdmissao",type:"date",value:s.clienteDataAdmissao||"",onChange:B=>e({clienteDataAdmissao:B.target.value}),"data-testid":"input-data-admissao"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(ue,{htmlFor:"clienteDividasExistentes",children:"Valor de Dívidas Existentes"}),i.jsx(el,{id:"clienteDividasExistentes",value:s.clienteDividasExistentes?.toString()||"",onChange:B=>{const F=parseFloat(B.target.value.replace(/[^\d,.-]/g,"").replace(",","."));e({clienteDividasExistentes:isNaN(F)?void 0:F})},placeholder:"R$ 0,00","data-testid":"input-dividas-existentes"}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Informe o valor total de dívidas em cartões, financiamentos, etc."})]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(Ef,{className:"h-5 w-5"}),"Dados para Recebimento"]}),i.jsx(Jt,{children:"Escolha como deseja receber o valor do empréstimo"})]}),i.jsx(re,{children:i.jsxs(kp,{value:s.metodoPagamento,onValueChange:B=>e({metodoPagamento:B}),children:[i.jsxs(Rd,{className:"grid w-full grid-cols-2",children:[i.jsxs(dn,{value:"conta_bancaria","data-testid":"tab-conta-bancaria",children:[i.jsx(Ef,{className:"mr-2 h-4 w-4"}),"Conta Bancária"]}),i.jsxs(dn,{value:"pix","data-testid":"tab-pix",children:[i.jsx(kX,{className:"mr-2 h-4 w-4"}),"PIX"]})]}),i.jsx(hn,{value:"conta_bancaria",className:"space-y-4",children:i.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"banco",children:"Banco"}),i.jsxs(Yt,{value:s.dadosPagamentoBanco||"",onValueChange:B=>e({dadosPagamentoBanco:B}),children:[i.jsx(Ht,{"data-testid":"select-banco",children:i.jsx(Qt,{placeholder:"Selecione o banco..."})}),i.jsxs(Wt,{children:[i.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground",children:"Bancos Populares"}),p0.map(B=>i.jsxs(le,{value:B.code,children:[B.code," - ",B.name]},B.code)),i.jsx("div",{className:"mt-2 px-2 py-1 text-xs font-semibold text-muted-foreground",children:"Todos os Bancos"}),gU.filter(B=>!p0.find(F=>F.code===B.code)).map(B=>i.jsxs(le,{value:B.code,children:[B.code," - ",B.name]},B.code))]})]})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"agencia",children:"Agência"}),i.jsx(Fe,{id:"agencia",type:"text",placeholder:"0000",value:s.dadosPagamentoAgencia||"",onChange:B=>e({dadosPagamentoAgencia:B.target.value}),"data-testid":"input-agencia"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"conta",children:"Conta"}),i.jsx(Fe,{id:"conta",type:"text",placeholder:"00000-0",value:s.dadosPagamentoConta||"",onChange:B=>e({dadosPagamentoConta:B.target.value}),"data-testid":"input-conta"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"digito",children:"Dígito"}),i.jsx(Fe,{id:"digito",type:"text",placeholder:"0",maxLength:2,value:s.dadosPagamentoDigito||"",onChange:B=>e({dadosPagamentoDigito:B.target.value}),"data-testid":"input-digito"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"tipoConta",children:"Tipo de Conta *"}),i.jsxs(Yt,{value:s.dadosPagamentoTipo||"",onValueChange:B=>e({dadosPagamentoTipo:B}),children:[i.jsx(Ht,{"data-testid":"select-tipo-conta",children:i.jsx(Qt,{placeholder:"Selecione o tipo..."})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"conta_corrente",children:"Conta Corrente"}),i.jsx(le,{value:"conta_poupanca",children:"Conta Poupança"})]})]})]})]})}),i.jsx(hn,{value:"pix",className:"space-y-4",children:i.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"tipoPix",children:"Tipo de Chave PIX"}),i.jsxs(Yt,{value:s.dadosPagamentoTipoPix||"",onValueChange:B=>e({dadosPagamentoTipoPix:B}),children:[i.jsx(Ht,{"data-testid":"select-tipo-pix",children:i.jsx(Qt,{placeholder:"Selecione o tipo..."})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"cpf",children:"CPF"}),i.jsx(le,{value:"cnpj",children:"CNPJ"}),i.jsx(le,{value:"email",children:"E-mail"}),i.jsx(le,{value:"telefone",children:"Telefone"}),i.jsx(le,{value:"aleatoria",children:"Chave Aleatória"})]})]})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"chavePix",children:"Chave PIX"}),i.jsx(Fe,{id:"chavePix",type:"text",placeholder:"Digite a chave PIX",value:s.dadosPagamentoPix||"",onChange:B=>e({dadosPagamentoPix:B.target.value}),"data-testid":"input-chave-pix"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"pixBanco",children:"Banco do PIX"}),i.jsxs(Yt,{value:s.dadosPagamentoPixBanco||"",onValueChange:B=>e({dadosPagamentoPixBanco:B}),children:[i.jsx(Ht,{"data-testid":"select-pix-banco",children:i.jsx(Qt,{placeholder:"Selecione o banco..."})}),i.jsxs(Wt,{children:[i.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground",children:"Bancos Populares"}),p0.map(B=>i.jsxs(le,{value:B.code,children:[B.code," - ",B.name]},B.code)),i.jsx("div",{className:"mt-2 px-2 py-1 text-xs font-semibold text-muted-foreground",children:"Todos os Bancos"}),gU.filter(B=>!p0.find(F=>F.code===B.code)).map(B=>i.jsxs(le,{value:B.code,children:[B.code," - ",B.name]},B.code))]})]})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"pixNomeTitular",children:"Nome do Titular"}),i.jsx(Fe,{id:"pixNomeTitular",type:"text",placeholder:"Nome completo",value:s.dadosPagamentoPixNomeTitular||"",onChange:B=>e({dadosPagamentoPixNomeTitular:B.target.value}),"data-testid":"input-pix-nome-titular"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(ue,{htmlFor:"pixCpfTitular",children:"CPF/CNPJ do Titular"}),i.jsx(tl,{mask:s.dadosPagamentoPixCpfTitular&&s.dadosPagamentoPixCpfTitular.length>14?"99.999.999/9999-99":"999.999.999-99",value:s.dadosPagamentoPixCpfTitular||"",onChange:B=>e({dadosPagamentoPixCpfTitular:B}),id:"pixCpfTitular",placeholder:"CPF ou CNPJ do titular","data-testid":"input-pix-cpf-titular"})]})]})})]})})]}),i.jsx(FRe,{isOpen:R,onClose:()=>{O(!1),P(null)},onConfirm:$,title:"Cliente Encontrado",description:`Encontramos dados de: ${E?.nome||"Cliente"}

Deseja preencher a proposta com os dados existentes?`,confirmText:"Usar Dados",cancelText:"Não Usar",variant:"default",isLoading:u})]})}var PS="Checkbox",[URe,v7e]=cs(PS),[zRe,F2]=URe(PS);function qRe(t){const{__scopeCheckbox:e,checked:r,children:n,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=t,[m,g]=Ma({prop:r,defaultProp:s??!1,onChange:c,caller:PS}),[x,v]=N.useState(null),[y,w]=N.useState(null),_=N.useRef(!1),A=x?!!o||!!x.closest("form"):!0,C={checked:m,disabled:a,setChecked:g,control:x,setControl:v,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:_,required:u,defaultChecked:Ec(s)?!1:s,isFormControl:A,bubbleInput:y,setBubbleInput:w};return i.jsx(zRe,{scope:e,...C,children:VRe(f)?f(C):n})}var Dee="CheckboxTrigger",Lee=N.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:r,...n},s)=>{const{control:a,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:x}=F2(Dee,t),v=Et(s,d),y=N.useRef(c);return N.useEffect(()=>{const w=a?.form;if(w){const _=()=>f(y.current);return w.addEventListener("reset",_),()=>w.removeEventListener("reset",_)}},[a,f]),i.jsx(He.button,{type:"button",role:"checkbox","aria-checked":Ec(c)?"mixed":c,"aria-required":u,"data-state":zee(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:v,onKeyDown:Le(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Le(r,w=>{f(_=>Ec(_)?!0:!_),x&&g&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})})});Lee.displayName=Dee;var B2=N.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=t;return i.jsx(qRe,{__scopeCheckbox:r,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:m})=>i.jsxs(i.Fragment,{children:[i.jsx(Lee,{...f,ref:e,__scopeCheckbox:r}),m&&i.jsx(Uee,{__scopeCheckbox:r})]})})});B2.displayName=PS;var $ee="CheckboxIndicator",Fee=N.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...s}=t,a=F2($ee,r);return i.jsx(xs,{present:n||Ec(a.checked)||a.checked===!0,children:i.jsx(He.span,{"data-state":zee(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});Fee.displayName=$ee;var Bee="CheckboxBubbleInput",Uee=N.forwardRef(({__scopeCheckbox:t,...e},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:m,setBubbleInput:g}=F2(Bee,t),x=Et(r,g),v=O2(a),y=BM(n);N.useEffect(()=>{const _=m;if(!_)return;const A=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(A,"checked").set,E=!s.current;if(v!==a&&S){const P=new Event("click",{bubbles:E});_.indeterminate=Ec(a),S.call(_,Ec(a)?!1:a),_.dispatchEvent(P)}},[m,v,a,s]);const w=N.useRef(Ec(a)?!1:a);return i.jsx(He.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:l,disabled:c,name:u,value:d,form:f,...e,tabIndex:-1,ref:x,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Uee.displayName=Bee;function VRe(t){return typeof t=="function"}function Ec(t){return t==="indeterminate"}function zee(t){return Ec(t)?"indeterminate":t?"checked":"unchecked"}const kS=N.forwardRef(({className:t,...e},r)=>i.jsx(B2,{ref:r,className:Ie("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:i.jsx(Fee,{className:Ie("flex items-center justify-center text-current"),children:i.jsx(EM,{className:"h-4 w-4"})})}));kS.displayName=B2.displayName;function HRe(){const{state:t}=Kc(),{selectProduct:e,selectTable:r,updateLoanConditions:n}=Pp(),{context:s,loanData:a,simulation:o,errors:l}=t;if(!s)return i.jsxs(jt,{variant:"destructive",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(At,{children:"Erro ao carregar dados. Por favor, recarregue a página."})]});const c=s.produtos.find(f=>f.id===a.produtoId),u=c?.tabelasDisponiveis.find(f=>f.id===a.tabelaComercialId),d=u?.prazos||[];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(Qa,{className:"h-5 w-5"}),"Produto e Tabela Comercial"]}),i.jsx(Jt,{children:"Selecione o produto de crédito e a tabela comercial"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"produto",children:"Produto de Crédito"}),i.jsxs(Yt,{value:a.produtoId?.toString()||"",onValueChange:f=>e(parseInt(f)),children:[i.jsx(Ht,{children:i.jsx(Qt,{placeholder:"Selecione um produto..."})}),i.jsx(Wt,{children:s.produtos.map(f=>i.jsxs(le,{value:f.id.toString(),children:[f.nome,f.tacTipo==="fixo"?` (TAC: R$ ${f.tacValor})`:` (TAC: ${f.tacValor}%)`]},f.id))})]}),l.produtoId&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:l.produtoId})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"tabela",children:"Tabela Comercial"}),i.jsxs(Yt,{value:a.tabelaComercialId?.toString()||"",onValueChange:f=>r(parseInt(f)),disabled:!c,children:[i.jsx(Ht,{children:i.jsx(Qt,{placeholder:c?"Selecione uma tabela comercial...":"Primeiro selecione um produto"})}),i.jsx(Wt,{children:c?.tabelasDisponiveis.map(f=>i.jsxs(le,{value:f.id.toString(),children:[f.nomeTabela,i.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["(",f.taxaJuros,"% a.m. - ",f.tipo,")"]})]},f.id))})]}),l.tabelaComercialId&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:l.tabelaComercialId})]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(Mc,{className:"h-5 w-5"}),"Condições do Empréstimo"]}),i.jsx(Jt,{children:"Defina o valor, prazo e condições do empréstimo"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"valorSolicitado",children:"Valor Solicitado"}),i.jsx(el,{id:"valorSolicitado",value:a.valorSolicitado,onChange:f=>n({valorSolicitado:f.target.value}),placeholder:`Mín: R$ ${s.limites.valorMinimo.toLocaleString("pt-BR")} - Máx: R$ ${s.limites.valorMaximo.toLocaleString("pt-BR")}`,className:l.valorSolicitado?"border-destructive":""}),l.valorSolicitado&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:l.valorSolicitado})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"prazo",children:"Prazo (meses)"}),i.jsxs(Yt,{value:a.prazo?.toString()||"",onValueChange:f=>n({prazo:parseInt(f)}),disabled:!u,children:[i.jsx(Ht,{children:i.jsx(Qt,{placeholder:u?"Selecione o prazo...":"Primeiro selecione uma tabela comercial"})}),i.jsx(Wt,{children:d.map(f=>i.jsxs(le,{value:f.toString(),children:[f," meses"]},f))})]}),l.prazo&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:l.prazo})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kS,{id:"incluirTac",checked:a.incluirTac,onCheckedChange:f=>n({incluirTac:!!f})}),i.jsx(ue,{htmlFor:"incluirTac",className:"cursor-pointer text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Incluir Taxa de Abertura de Crédito (TAC)"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"dataCarencia",children:"Data de Carência (opcional)"}),i.jsx(Fe,{id:"dataCarencia",type:"date",value:a.dataCarencia||"",onChange:f=>n({dataCarencia:f.target.value}),min:Mn(new Date,"yyyy-MM-dd"),max:Mn(new Date(Date.now()+1080*60*60*1e3),"yyyy-MM-dd")}),i.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Máximo de 45 dias a partir de hoje"})]})]})]}),o&&i.jsxs(ee,{className:"border-2 border-green-500 dark:border-green-400",children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[i.jsx(Bk,{className:"h-5 w-5"}),"Simulação de Crédito"]}),i.jsx(Jt,{children:"Resumo das condições calculadas"})]}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor da Parcela"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["R$"," ",parseFloat(o.valorParcela).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Taxa de Juros"}),i.jsxs("p",{className:"text-lg font-semibold",children:[o.taxaJuros,"% ao mês"]}),o.taxaJurosAnual&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["(",parseFloat(o.taxaJurosAnual).toFixed(2),"% ao ano)"]})]})]}),i.jsxs("div",{className:"space-y-2 border-t border-border pt-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Valor Solicitado:"}),i.jsxs("span",{className:"text-foreground",children:["R$"," ",parseFloat(a.valorSolicitado||"0").toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),o.iofDetalhado?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"IOF Diário:"}),i.jsxs("span",{className:"text-foreground",children:["R$"," ",parseFloat(o.iofDetalhado.diario).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"IOF Adicional:"}),i.jsxs("span",{className:"text-foreground",children:["R$"," ",parseFloat(o.iofDetalhado.adicional).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[i.jsx("span",{className:"text-muted-foreground",children:"IOF Total:"}),i.jsxs("span",{className:"text-foreground",children:["R$"," ",parseFloat(o.iofDetalhado.total).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}):i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"IOF:"}),i.jsxs("span",{className:"text-foreground",children:["R$"," ",parseFloat(o.valorIOF).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),parseFloat(o.valorTAC)>0&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"TAC:"}),i.jsxs("span",{className:"text-foreground",children:["R$"," ",parseFloat(o.valorTAC).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),o.comissao&&parseFloat(o.comissao)>0&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["Comissão (",o.comissaoPercentual,"%):"]}),i.jsxs("span",{className:"text-foreground",children:["R$"," ",parseFloat(o.comissao).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),o.jurosCarencia&&parseFloat(o.jurosCarencia)>0&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["Juros de Carência (",o.diasCarencia," dias):"]}),i.jsxs("span",{className:"text-foreground",children:["R$"," ",parseFloat(o.jurosCarencia).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex justify-between border-t border-border pt-2 text-sm font-semibold",children:[i.jsx("span",{className:"text-foreground",children:"Total Financiado:"}),i.jsxs("span",{className:"text-foreground",children:["R$"," ",parseFloat(o.valorTotalFinanciado).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),o.valorTotalAPagar&&i.jsxs("div",{className:"flex justify-between text-sm font-semibold text-blue-600 dark:text-blue-400",children:[i.jsx("span",{children:"Total que o Cliente Pagará:"}),i.jsxs("span",{children:["R$"," ",parseFloat(o.valorTotalAPagar).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),o.custoTotalOperacao&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Custo Total da Operação:"}),i.jsxs("span",{className:"text-foreground",children:["R$"," ",parseFloat(o.custoTotalOperacao).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"CET Anual:"}),i.jsxs("span",{className:"font-semibold text-foreground",children:[parseFloat(o.custoEfetivoTotal).toFixed(2),"%"]})]})]})]})]})]})}function WRe(){const{user:t}=$a(),{state:e}=Kc(),{addDocument:r,removeDocument:n}=Pp(),s=N.useRef(null),a=t?.role==="ADMINISTRADOR"||t?.role==="ANALISTA"||t?.role==="ATENDENTE",o=u=>{const d=u.target.files;d&&(Array.from(d).forEach(f=>{const m={id:`${Date.now()}-${Math.random()}`,name:f.name,type:f.type,size:f.size,file:f};r(m)}),s.current&&(s.current.value=""))},l=u=>{if(u===0)return"0 Bytes";const d=1024,f=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(u)/Math.log(d));return parseFloat((u/Math.pow(d,m)).toFixed(2))+" "+f[m]},c=e.context?.documentosObrigatorios||["Documento de Identidade (RG ou CNH)","CPF","Comprovante de Residência","Comprovante de Renda","Extrato Bancário (últimos 3 meses)"];return i.jsx("div",{className:"space-y-6",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"h-5 w-5"}),"Documentos Obrigatórios"]}),i.jsx(Jt,{children:"Faça upload dos documentos necessários para a análise de crédito"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs(jt,{children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsxs(At,{children:[i.jsx("strong",{children:"Documentos necessários:"}),i.jsx("ul",{className:"ml-4 mt-2 list-disc",children:c.map((u,d)=>i.jsx("li",{children:u},d))})]})]}),i.jsx("div",{className:"space-y-4",children:a?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"hover:border-border/70 bg-muted/30 hover:bg-muted/50 cursor-pointer rounded-lg border-2 border-dashed border-border p-8 text-center transition-colors",onClick:()=>s.current?.click(),children:[i.jsx(OX,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),i.jsx("p",{className:"mb-2 text-lg font-medium text-foreground",children:"Clique para fazer upload"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"ou arraste e solte os arquivos aqui"}),i.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Formatos aceitos: PDF, JPG, PNG (máx. 10MB por arquivo)"})]}),i.jsx("input",{ref:s,type:"file",className:"hidden",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:o})]}):i.jsxs("div",{className:"rounded-lg border-2 border-dashed border-border/50 bg-muted/20 p-8 text-center opacity-60",children:[i.jsx(V_,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),i.jsx("p",{className:"mb-2 text-lg font-medium text-muted-foreground",children:"Upload não disponível"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload de documentos disponível para Atendentes, Analistas e Administradores"})]})}),e.documents.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Documentos anexados:"}),e.documents.map(u=>i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border bg-muted p-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zt,{className:"h-5 w-5 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-foreground",children:u.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:l(u.size)})]})]}),i.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>n(u.id),children:i.jsx(Vi,{className:"h-4 w-4"})})]},u.id))]}),e.documents.length>=c.length&&i.jsxs(jt,{className:"border-green-800",children:[i.jsx(fr,{className:"h-4 w-4 text-green-400"}),i.jsx(At,{className:"text-green-400",children:"Todos os documentos obrigatórios foram anexados. Você pode enviar a proposta."})]})]})]})})}function GRe(){const{state:t}=Kc(),{addReference:e,updateReference:r,removeReference:n,setError:s,clearError:a}=Pp(),{personalReferences:o,errors:l,clientData:c}=t,[u,d]=G.useState(!1);G.useEffect(()=>{for(o.length===0?(e({nomeCompleto:"",grauParentesco:"",telefone:"",tipo_referencia:"pessoal"}),e({nomeCompleto:"",grauParentesco:"",telefone:"",tipo_referencia:"profissional"})):o.length===1?(o[0].tipo_referencia!=="pessoal"&&r(0,{...o[0],tipo_referencia:"pessoal"}),e({nomeCompleto:"",grauParentesco:"",telefone:"",tipo_referencia:"profissional"})):o.length>=2&&o[0].tipo_referencia!=="pessoal"&&r(0,{...o[0],tipo_referencia:"pessoal"});o.length>2;)n(o.length-1)},[o.length,e,n,r]);const f=(y,w,_)=>{const A={...o[y],[w]:_};r(y,A);const C=o[y]?.tipo_referencia||"pessoal",S=`reference_${C}_${w}`;!_||_.trim()===""?s(S,`${w==="nomeCompleto"?"Nome":w==="grauParentesco"?C==="pessoal"?"Grau de parentesco":"Relação profissional":"Telefone"} é obrigatório`):a(S)},m=o[0],g=o[1],x=0,v=1;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(is,{className:"h-5 w-5"}),"Referência Pessoal"]}),i.jsx(Jt,{children:"Informações de contato de uma referência pessoal (obrigatório)"})]}),i.jsx(re,{className:"space-y-4",children:m&&i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(ue,{htmlFor:"nomeCompleto_pessoal",children:"Nome Completo *"}),i.jsx(Fe,{id:"nomeCompleto_pessoal",type:"text",value:m.nomeCompleto,onChange:y=>f(x,"nomeCompleto",y.target.value),className:l.reference_pessoal_nomeCompleto?"border-destructive":"","data-testid":"input-nome-referencia-pessoal"}),l.reference_pessoal_nomeCompleto&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:l.reference_pessoal_nomeCompleto})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"grauParentesco_pessoal",children:"Grau de Parentesco *"}),i.jsxs(Yt,{value:m.grauParentesco,onValueChange:y=>f(x,"grauParentesco",y),children:[i.jsx(Ht,{className:l.reference_pessoal_grauParentesco?"border-destructive":"",children:i.jsx(Qt,{placeholder:"Selecione..."})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"mae",children:"Mãe"}),i.jsx(le,{value:"pai",children:"Pai"}),i.jsx(le,{value:"irmao",children:"Irmão(ã)"}),i.jsx(le,{value:"conjuge",children:"Cônjuge"}),i.jsx(le,{value:"filho",children:"Filho(a)"}),i.jsx(le,{value:"amigo",children:"Amigo(a)"}),i.jsx(le,{value:"tio",children:"Tio(a)"}),i.jsx(le,{value:"primo",children:"Primo(a)"}),i.jsx(le,{value:"sogro",children:"Sogro(a)"}),i.jsx(le,{value:"cunhado",children:"Cunhado(a)"}),i.jsx(le,{value:"outro",children:"Outro"})]})]}),l.reference_pessoal_grauParentesco&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:l.reference_pessoal_grauParentesco})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"telefone_pessoal",children:"Telefone *"}),i.jsx(tl,{mask:"(99) 99999-9999",value:m.telefone,onChange:y=>f(x,"telefone",y),placeholder:"(11) 98765-4321",className:l.reference_pessoal_telefone?"border-destructive":"","data-testid":"input-telefone-referencia-pessoal"}),l.reference_pessoal_telefone&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:l.reference_pessoal_telefone})]})]})})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(vX,{className:"h-5 w-5"}),"Segunda Referência"]}),i.jsx(Jt,{children:"Informações de contato de uma segunda referência - pode ser pessoal ou profissional (obrigatório)"})]}),i.jsx(re,{className:"space-y-4",children:g&&i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"tipo_segunda_referencia",children:"Tipo de Referência *"}),i.jsxs(Yt,{value:g.tipo_referencia,onValueChange:y=>f(v,"tipo_referencia",y),children:[i.jsx(Ht,{children:i.jsx(Qt,{placeholder:"Selecione o tipo..."})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"pessoal",children:"Pessoal"}),i.jsx(le,{value:"profissional",children:"Profissional"})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(ue,{htmlFor:"nomeCompleto_segunda",children:"Nome Completo *"}),i.jsx(Fe,{id:"nomeCompleto_segunda",type:"text",value:g.nomeCompleto,onChange:y=>f(v,"nomeCompleto",y.target.value),className:l[`reference_${g.tipo_referencia}_nomeCompleto`]?"border-destructive":"","data-testid":"input-nome-segunda-referencia"}),l[`reference_${g.tipo_referencia}_nomeCompleto`]&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:l[`reference_${g.tipo_referencia}_nomeCompleto`]})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"grauParentesco_segunda",children:g.tipo_referencia==="pessoal"?"Grau de Parentesco *":"Relação Profissional *"}),i.jsxs(Yt,{value:g.grauParentesco,onValueChange:y=>f(v,"grauParentesco",y),children:[i.jsx(Ht,{className:l[`reference_${g.tipo_referencia}_grauParentesco`]?"border-destructive":"",children:i.jsx(Qt,{placeholder:"Selecione..."})}),i.jsx(Wt,{children:g.tipo_referencia==="pessoal"?i.jsxs(i.Fragment,{children:[i.jsx(le,{value:"mae",children:"Mãe"}),i.jsx(le,{value:"pai",children:"Pai"}),i.jsx(le,{value:"irmao",children:"Irmão(ã)"}),i.jsx(le,{value:"conjuge",children:"Cônjuge"}),i.jsx(le,{value:"filho",children:"Filho(a)"}),i.jsx(le,{value:"amigo",children:"Amigo(a)"}),i.jsx(le,{value:"tio",children:"Tio(a)"}),i.jsx(le,{value:"primo",children:"Primo(a)"}),i.jsx(le,{value:"sogro",children:"Sogro(a)"}),i.jsx(le,{value:"cunhado",children:"Cunhado(a)"}),i.jsx(le,{value:"outro",children:"Outro"})]}):i.jsxs(i.Fragment,{children:[i.jsx(le,{value:"supervisor",children:"Supervisor/Gerente"}),i.jsx(le,{value:"colega",children:"Colega de Trabalho"}),i.jsx(le,{value:"cliente",children:"Cliente"}),i.jsx(le,{value:"fornecedor",children:"Fornecedor"}),i.jsx(le,{value:"parceiro",children:"Parceiro de Negócios"}),i.jsx(le,{value:"chefe",children:"Chefe Direto"}),i.jsx(le,{value:"subordinado",children:"Subordinado"}),i.jsx(le,{value:"rh",children:"Recursos Humanos"}),i.jsx(le,{value:"outro_profissional",children:"Outro"})]})})]}),l[`reference_${g.tipo_referencia}_grauParentesco`]&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:l[`reference_${g.tipo_referencia}_grauParentesco`]})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"telefone_segunda",children:"Telefone *"}),i.jsx(tl,{mask:"(99) 99999-9999",value:g.telefone,onChange:y=>f(v,"telefone",y),placeholder:"(11) 98765-4321",className:l[`reference_${g.tipo_referencia}_telefone`]?"border-destructive":"","data-testid":"input-telefone-segunda-referencia"}),l[`reference_${g.tipo_referencia}_telefone`]&&i.jsx("p",{className:"mt-1 text-sm text-destructive",children:l[`reference_${g.tipo_referencia}_telefone`]})]})]})})]})]})}const xU=[{id:"dados-cliente",title:"Dados do Cliente",icon:El},{id:"referencias-pessoais",title:"Referências",icon:is},{id:"condicoes-emprestimo",title:"Condições",icon:Mc},{id:"anexo-documentos",title:"Documentos",icon:zt}];function KRe({currentStep:t,totalSteps:e}){const r=s=>s<t?"completed":s===t?"current":"pending",n=()=>(t+1)/e*100;return i.jsxs("div",{className:"w-full py-6","data-testid":"proposal-progress-indicator",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-2",children:[i.jsx("span",{children:"Progresso da Proposta"}),i.jsxs("span",{"data-testid":"progress-percentage",children:[Math.round(n()),"% concluído"]})]}),i.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-primary transition-all duration-300 ease-in-out",style:{width:`${n()}%`},"data-testid":"progress-bar"})})]}),i.jsx("div",{className:"flex items-center justify-between",children:xU.map((s,a)=>{const o=r(a),l=s.icon;return i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[i.jsx("div",{className:Ie("relative flex h-10 w-10 items-center justify-center rounded-full border-2 transition-all duration-200",{"bg-primary border-primary text-primary-foreground":o==="completed","bg-primary/10 border-primary text-primary":o==="current","bg-muted border-muted-foreground/30 text-muted-foreground":o==="pending"}),"data-testid":`step-indicator-${a}`,children:o==="completed"?i.jsx(fr,{className:"h-5 w-5"}):o==="current"?i.jsx(l,{className:"h-5 w-5"}):i.jsx(wX,{className:"h-5 w-5"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:Ie("text-xs font-medium transition-colors",{"text-primary":o==="completed"||o==="current","text-muted-foreground":o==="pending"}),"data-testid":`step-title-${a}`,children:s.title}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Passo ",a+1]})]})]}),a<xU.length-1&&i.jsx("div",{className:Ie("h-0.5 flex-1 transition-colors duration-300 mx-4 mt-[-20px]",{"bg-primary":a<t,"bg-muted":a>=t}),"data-testid":`connector-${a}`})]},s.id)})})]})}function XRe(){const{state:t}=Kc(),{setContext:e,setStep:r,setLoading:n}=Pp();cRe();const{toast:s}=Fr();uRe();const{isLoading:a,error:o,data:l}=nt({queryKey:["/api/origination/context"],queryFn:async()=>await Je("/api/origination/context",{method:"GET"})});G.useEffect(()=>{l&&(e(l),n(!1))},[l]),G.useEffect(()=>{o&&(console.error("Erro ao carregar contexto:",o),s({title:"Erro ao carregar dados",description:"Não foi possível carregar os dados necessários. Por favor, recarregue a página.",variant:"destructive"}),n(!1))},[o,s]);const c=Mt({mutationFn:async()=>{const f={tipoPessoa:t.clientData.tipoPessoa,clienteNome:t.clientData.nome,clienteCpf:t.clientData.cpf,clienteRazaoSocial:t.clientData.razaoSocial||null,clienteCnpj:t.clientData.cnpj||null,clienteRg:t.clientData.rg,clienteOrgaoEmissor:t.clientData.orgaoEmissor,clienteRgUf:t.clientData.rgUf,clienteRgDataEmissao:t.clientData.rgDataEmissao,clienteEmail:t.clientData.email,clienteTelefone:t.clientData.telefone,clienteDataNascimento:t.clientData.dataNascimento,clienteLocalNascimento:t.clientData.localNascimento,clienteEstadoCivil:t.clientData.estadoCivil,clienteNacionalidade:t.clientData.nacionalidade,clienteCep:t.clientData.cep,clienteLogradouro:t.clientData.logradouro,clienteNumero:t.clientData.numero,clienteComplemento:t.clientData.complemento,clienteBairro:t.clientData.bairro,clienteCidade:t.clientData.cidade,clienteUf:t.clientData.estado,clienteEndereco:`${t.clientData.logradouro||""}, ${t.clientData.numero||""}${t.clientData.complemento?", "+t.clientData.complemento:""}, ${t.clientData.bairro||""}, ${t.clientData.cidade||""}/${t.clientData.estado||""} - CEP: ${t.clientData.cep||""}`.trim(),clienteOcupacao:t.clientData.ocupacao,clienteRenda:t.clientData.rendaMensal,clienteTelefoneEmpresa:t.clientData.telefoneEmpresa,metodoPagamento:t.clientData.metodoPagamento,dadosPagamentoBanco:t.clientData.dadosPagamentoBanco||null,dadosPagamentoAgencia:t.clientData.dadosPagamentoAgencia||null,dadosPagamentoConta:t.clientData.dadosPagamentoConta||null,dadosPagamentoDigito:t.clientData.dadosPagamentoDigito||null,dadosPagamentoPix:t.clientData.dadosPagamentoPix||null,dadosPagamentoTipoPix:t.clientData.dadosPagamentoTipoPix||null,dadosPagamentoPixBanco:t.clientData.dadosPagamentoPixBanco||null,dadosPagamentoPixNomeTitular:t.clientData.dadosPagamentoPixNomeTitular||null,dadosPagamentoPixCpfTitular:t.clientData.dadosPagamentoPixCpfTitular||null,referenciaPessoal:t.personalReferences,produtoId:t.loanData.produtoId,tabelaComercialId:t.loanData.tabelaComercialId,valor:parseFloat(t.loanData.valorSolicitado.replace(/[^\d,]/g,"").replace(",",".")),prazo:t.loanData.prazo,valorTac:t.simulation?.valorTAC?parseFloat(t.simulation.valorTAC):0,valorIof:t.simulation?.valorIOF?parseFloat(t.simulation.valorIOF):0,valorTotalFinanciado:t.simulation?.valorTotalFinanciado?parseFloat(t.simulation.valorTotalFinanciado):0,dataCarencia:t.loanData.dataCarencia||null,incluirTac:t.loanData.incluirTac,status:"aguardando_analise",lojaId:t.context?.atendente?.loja?.id,finalidade:"Empréstimo pessoal",garantia:"Sem garantia",submitForAnalysis:!0,formaLiberacao:"deposito",formaPagamento:"boleto",pracaPagamento:"São Paulo"};console.log("[DEBUG] Criando proposta primeiro...");const m=await Je("/api/propostas",{method:"POST",body:f}),g=m.id;console.log(`[DEBUG] Proposta criada com ID: ${g}`);const x=[];if(t.documents.length>0){console.log(`[DEBUG] Iniciando upload de ${t.documents.length} documentos para proposta ${g}`);for(const v of t.documents)try{const w=`${Date.now()}-${v.name}`,_=new FormData;_.append("file",v.file),_.append("filename",w),_.append("proposalId",g);const A=await Je("/api/upload",{method:"POST",body:_});console.log(`[DEBUG] Documento ${v.name} enviado com sucesso:`,A),x.push(w)}catch(y){throw console.error(`[ERROR] Falha ao enviar documento ${v.name}:`,y),new Error(`Falha ao enviar documento ${v.name}. Tente novamente.`)}if(console.log(`[DEBUG] Todos os ${x.length} documentos enviados com sucesso`),x.length>0)try{await Je(`/api/propostas/${g}/documentos`,{method:"POST",body:{documentos:x}}),console.log(`[DEBUG] ${x.length} documentos associados à proposta ${g}`)}catch(v){console.error("[ERROR] Falha ao associar documentos:",v)}}return m},onSuccess:f=>{s({title:"Proposta criada com sucesso!",description:`Proposta ${f.id} foi encaminhada para análise com ${t.documents.length} documento(s) anexado(s).`}),t.context&&e(t.context),r(0)},onError:f=>{s({title:"Erro ao criar proposta",description:f instanceof Error?f.message:"Ocorreu um erro ao criar a proposta.",variant:"destructive"})}});if(a||t.isLoading)return i.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:i.jsx(un,{className:"h-8 w-8 animate-spin text-primary"})});if(o||!t.context)return i.jsxs(jt,{variant:"destructive",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(At,{children:"Erro ao carregar dados necessários. Por favor, recarregue a página."})]});const u=f=>{r({"dados-cliente":0,"referencias-pessoais":1,"condicoes-emprestimo":2,"anexo-documentos":3}[f]||0)},d=["dados-cliente","referencias-pessoais","condicoes-emprestimo","anexo-documentos"][t.currentStep];return i.jsxs("div",{className:"w-full",children:[i.jsx(KRe,{currentStep:t.currentStep,totalSteps:4}),i.jsxs(kp,{value:d,onValueChange:u,className:"w-full",children:[i.jsxs(Rd,{className:"hidden",children:[i.jsxs(dn,{value:"dados-cliente",children:[i.jsx(El,{className:"mr-2 h-4 w-4"}),"Dados do Cliente"]}),i.jsxs(dn,{value:"referencias-pessoais",children:[i.jsx(is,{className:"mr-2 h-4 w-4"}),"Referências"]}),i.jsxs(dn,{value:"condicoes-emprestimo",children:[i.jsx(Mc,{className:"mr-2 h-4 w-4"}),"Empréstimo"]}),i.jsxs(dn,{value:"anexo-documentos",children:[i.jsx(zt,{className:"mr-2 h-4 w-4"}),"Documentos"]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx(hn,{value:"dados-cliente",children:i.jsx(BRe,{})}),i.jsx(hn,{value:"referencias-pessoais",children:i.jsx(GRe,{})}),i.jsx(hn,{value:"condicoes-emprestimo",children:i.jsx(HRe,{})}),i.jsx(hn,{value:"anexo-documentos",children:i.jsx(WRe,{})})]}),i.jsxs("div",{className:"mt-8 flex justify-between",children:[i.jsx(se,{type:"button",variant:"outline",onClick:()=>r(Math.max(0,t.currentStep-1)),disabled:t.currentStep===0,"data-testid":"button-voltar",children:"Voltar"}),t.currentStep<3?i.jsx(se,{type:"button",onClick:()=>r(t.currentStep+1),"data-testid":"button-proximo",children:"Próximo"}):i.jsx(se,{type:"button",onClick:()=>c.mutate(),disabled:c.isPending,className:"min-w-[200px]",children:c.isPending?i.jsxs(i.Fragment,{children:[i.jsx(un,{className:"mr-2 h-4 w-4 animate-spin"}),t.documents.length>0?`Enviando ${t.documents.length} documentos...`:"Criando proposta..."]}):i.jsxs(i.Fragment,{children:[i.jsx(fr,{className:"mr-2 h-4 w-4"}),"Enviar Proposta",t.documents.length>0&&i.jsxs("span",{className:"ml-2 rounded-full bg-green-600 px-2 py-1 text-xs",children:[t.documents.length," doc(s)"]})]})})]})]})]})}const bU=()=>i.jsx(lRe,{children:i.jsx(pt,{title:"Nova Proposta de Crédito",children:i.jsx(XRe,{})})}),pd=N.forwardRef(({className:t,...e},r)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:r,className:Ie("w-full caption-bottom text-sm",t),...e})}));pd.displayName="Table";const md=N.forwardRef(({className:t,...e},r)=>i.jsx("thead",{ref:r,className:Ie("[&_tr]:border-b",t),...e}));md.displayName="TableHeader";const gd=N.forwardRef(({className:t,...e},r)=>i.jsx("tbody",{ref:r,className:Ie("[&_tr:last-child]:border-0",t),...e}));gd.displayName="TableBody";const YRe=N.forwardRef(({className:t,...e},r)=>i.jsx("tfoot",{ref:r,className:Ie("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",t),...e}));YRe.displayName="TableFooter";const Dn=N.forwardRef(({className:t,...e},r)=>i.jsx("tr",{ref:r,className:Ie("hover:bg-muted/50 border-b transition-colors data-[state=selected]:bg-muted",t),...e}));Dn.displayName="TableRow";const Lt=N.forwardRef(({className:t,...e},r)=>i.jsx("th",{ref:r,className:Ie("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Lt.displayName="TableHead";const vt=N.forwardRef(({className:t,...e},r)=>i.jsx("td",{ref:r,className:Ie("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));vt.displayName="TableCell";const QRe=N.forwardRef(({className:t,...e},r)=>i.jsx("caption",{ref:r,className:Ie("mt-4 text-sm text-muted-foreground",t),...e}));QRe.displayName="TableCaption";const JRe=()=>{const[t,e]=N.useState("all"),[r,n]=N.useState("all"),[s,a]=N.useState("all"),[o,l]=N.useState(!1),{user:c}=$a(),u=N.useMemo(()=>{switch(c?.role){case"ATENDENTE":return`/api/propostas?atendenteId=${c.id}`;case"ANALISTA":return o?"/api/propostas":"/api/propostas?queue=analysis";case"GERENTE":case"ADMINISTRADOR":case"DIRETOR":return"/api/propostas?queue=analysis";default:return"/api/propostas"}},[c?.role,c?.id,o]),{data:d,isLoading:f,error:m}=nt({queryKey:[u],enabled:!!c?.role}),g=d?.data||[],{data:x}=nt({queryKey:["/api/parceiros"]}),v=N.useMemo(()=>{if(!g||!Array.isArray(g))return[];let O=g;return c?.role==="ANALISTA"&&!o&&(O=g.filter(D=>D.status==="aguardando_analise"||D.status==="em_analise")),O.filter(D=>{const I=t!=="all"?D.status===t:!0,$=r!=="all"?D.parceiro?.razaoSocial===r:!0,M=s!=="all"?D.loja?.nomeLoja===s:!0;return I&&$&&M})},[g,t,r,s,c?.role,o]),y=O=>{n(O),a("all")},{toast:w}=Fr(),_=Mt({mutationFn:async({propostaId:O,currentStatus:D})=>await Je(`/api/propostas/${O}/toggle-status`,{method:"PUT"}),onSuccess:O=>{w({title:"Status alterado com sucesso",description:O?.message||"Status alterado com sucesso"}),tr.invalidateQueries({queryKey:[u]})},onError:O=>{w({title:"Erro ao alterar status",description:O instanceof Error?O.message:"Ocorreu um erro ao alterar o status da proposta",variant:"destructive"})}}),A=(O,D)=>{_.mutate({propostaId:O,currentStatus:D})},C=new Date().toISOString().split("T")[0],S=g?.filter(O=>O.createdAt.split("T")[0]===C).length||0,E=g?.filter(O=>O.status==="aguardando_analise"||O.status==="em_analise").length||0,P=g?.length||0,R=()=>{tr.invalidateQueries({queryKey:[u]}),tr.invalidateQueries({queryKey:["/api/parceiros"]})};return i.jsx(pt,{title:c?.role==="ANALISTA"?o?"Histórico de Análises":"Fila de Análise de Crédito":"Minhas Propostas",actions:i.jsx(Tp,{onRefresh:R,isLoading:f,variant:"ghost"}),children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[i.jsxs(ee,{className:"border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[i.jsx($g,{className:"h-5 w-5 text-blue-400"}),"Propostas no Dia"]})}),i.jsx(re,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S})]}),i.jsxs(ee,{className:"border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[i.jsx(So,{className:"h-5 w-5 text-green-400"}),"Acumulado no Mês"]})}),i.jsx(re,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:P})]}),i.jsxs(ee,{className:"border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[i.jsx(_n,{className:"h-5 w-5 text-yellow-400"}),"Propostas Pendentes"]})}),i.jsx(re,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:E})]})]}),i.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[c?.role==="ANALISTA"&&i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(se,{variant:o?"default":"outline",size:"sm",onClick:()=>l(!o),className:"flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4"}),o?"Ver Fila":"Ver Histórico"]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jX,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),i.jsxs(Yt,{onValueChange:e,defaultValue:"all",children:[i.jsx(Ht,{className:"w-full md:w-[180px]",children:i.jsx(Qt,{placeholder:"Filtrar por Status"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"all",children:"Todos os Status"}),i.jsx(le,{value:"aguardando_analise",children:"Aguardando Análise"}),i.jsx(le,{value:"em_analise",children:"Em Análise"}),i.jsx(le,{value:"aprovado",children:"Aprovado"}),i.jsx(le,{value:"rejeitado",children:"Rejeitado"}),i.jsx(le,{value:"suspensa",children:"Suspensa"})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(is,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),i.jsxs(Yt,{onValueChange:y,defaultValue:"all",children:[i.jsx(Ht,{className:"w-full md:w-[180px]",children:i.jsx(Qt,{placeholder:"Filtrar por Parceiro"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"all",children:"Todos os Parceiros"}),x?.map(O=>i.jsx(le,{value:O.razaoSocial,children:O.razaoSocial},O.id))]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ca,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),i.jsxs(Yt,{onValueChange:a,value:s,disabled:r==="all",children:[i.jsx(Ht,{className:"w-full md:w-[180px]",children:i.jsx(Qt,{placeholder:"Filtrar por Loja"})}),i.jsx(Wt,{children:i.jsx(le,{value:"all",children:"Todas as Lojas"})})]})]})]}),i.jsx(ee,{className:"border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800",children:i.jsx(re,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(pd,{children:[i.jsx(md,{children:i.jsxs(Dn,{children:[i.jsxs(Lt,{className:"flex min-w-[120px] items-center gap-2 text-gray-900 dark:text-white",children:[i.jsx(zt,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),"ID Proposta"]}),i.jsx(Lt,{className:"min-w-[100px] text-gray-900 dark:text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($g,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),"Data"]})}),i.jsx(Lt,{className:"min-w-[150px] text-gray-900 dark:text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(El,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),"Cliente"]})}),i.jsx(Lt,{className:"min-w-[130px] text-gray-900 dark:text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(nje,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),"Parceiro"]})}),i.jsx(Lt,{className:"min-w-[100px] text-gray-900 dark:text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ca,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),"Loja"]})}),i.jsx(Lt,{className:"min-w-[120px] text-gray-900 dark:text-white",children:"Status"}),i.jsx(Lt,{className:"min-w-[100px] text-right text-gray-900 dark:text-white",children:"Ações"})]})}),i.jsx(gd,{children:f?i.jsx(Dn,{children:i.jsxs(vt,{colSpan:7,className:"py-8 text-center text-gray-900 dark:text-white",children:[i.jsx(un,{className:"mx-auto mb-2 h-8 w-8 animate-spin text-gray-600 dark:text-gray-400"}),i.jsx("p",{children:"Carregando propostas..."})]})}):m?i.jsx(Dn,{children:i.jsx(vt,{colSpan:7,className:"py-8 text-center text-red-500",children:"Erro ao carregar propostas. Por favor, recarregue a página."})}):v.length===0?i.jsx(Dn,{children:i.jsx(vt,{colSpan:7,className:"py-8 text-center text-gray-500",children:"Nenhuma proposta encontrada."})}):v.map(O=>i.jsxs(Dn,{children:[i.jsx(vt,{className:"font-medium text-gray-900 dark:text-white",children:O.id}),i.jsx(vt,{className:"text-gray-900 dark:text-white",children:Mn(new Date(O.createdAt),"dd/MM/yyyy",{locale:dd})}),i.jsx(vt,{className:"text-gray-900 dark:text-white",children:O.nomeCliente||"-"}),i.jsx(vt,{className:"text-gray-900 dark:text-white",children:O.parceiro?.razaoSocial||"-"}),i.jsx(vt,{className:"text-gray-900 dark:text-white",children:O.loja?.nomeLoja||"-"}),i.jsx(vt,{children:i.jsx("span",{className:O.status==="aprovado"?"status-approved":O.status==="rejeitado"?"status-rejected":O.status==="suspensa"?"status-suspended":"status-pending",children:O.status==="aguardando_analise"?"Aguardando Análise":O.status==="em_analise"?"Em Análise":O.status==="aprovado"?"Aprovado":O.status==="rejeitado"?"Rejeitado":O.status==="suspensa"?"Suspensa":O.status})}),i.jsx(vt,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(on,{to:`/credito/analise/${O.id}`,children:i.jsxs(se,{className:"bg-blue-500 text-white hover:bg-blue-600",size:"sm",children:[i.jsx(wo,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Analisar"})]})}),(c?.role==="ATENDENTE"||c?.role==="ADMINISTRADOR")&&["rascunho","aguardando_analise","em_analise","pendente","suspensa"].includes(O.status)&&i.jsx(se,{className:O.status==="suspensa"?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-gray-500 text-white hover:bg-gray-600",size:"sm",onClick:()=>A(O.id,O.status),title:O.status==="suspensa"?"Reativar proposta":"Suspender proposta",children:i.jsx(Pd,{className:"h-4 w-4"})})]})})]},O.id))})]})})})})]})})},Ra=N.forwardRef(({className:t,...e},r)=>i.jsx("textarea",{className:Ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...e}));Ra.displayName="Textarea";function qee({propostaId:t,documents:e}){const[r,n]=N.useState(null),[s,a]=N.useState(null),[o,l]=N.useState(!1);N.useEffect(()=>{(async()=>{if(t){l(!0);try{const{api:x}=await Di(async()=>{const{api:y}=await Promise.resolve().then(()=>Dg);return{api:y}},void 0),v=await x.get(`/api/formalizacao/${t}/ccb`);v.ccb_gerado===!1?a(null):v.publicUrl?a(v.publicUrl):a(null)}catch(x){console.error("Erro ao buscar status da CCB:",x),a(null)}finally{l(!1)}}})()},[t]);const c=[...e,...s?[{name:"CCB - Cédula de Crédito Bancário",url:s,type:"application/pdf",uploadDate:"Sistema"}]:[]],u=(g,x)=>{const v=x?.toLowerCase()||"",y=g?.toLowerCase()||"";return y.includes("pdf")||v.endsWith(".pdf")?i.jsx(zt,{className:"h-4 w-4"}):y.includes("image")||v.endsWith(".jpg")||v.endsWith(".jpeg")||v.endsWith(".png")?i.jsx(AX,{className:"h-4 w-4"}):i.jsx(Uk,{className:"h-4 w-4"})},d=(g,x)=>{const v=x?.toLowerCase()||"",y=g?.toLowerCase()||"";return y.includes("pdf")||v.endsWith(".pdf")?"PDF":y.includes("image")||v.endsWith(".jpg")||v.endsWith(".jpeg")||v.endsWith(".png")?"Imagem":y.includes("doc")?"DOC":"Arquivo"},f=async(g,x)=>{try{const y=await(await fetch(g)).blob(),w=window.URL.createObjectURL(y),_=document.createElement("a");_.href=w,_.download=x,document.body.appendChild(_),_.click(),_.remove(),window.URL.revokeObjectURL(w)}catch(v){console.error("Erro ao baixar documento:",v)}},m=({document:g})=>{const{url:x,type:v,name:y}=g,w=y?.toLowerCase()||"",_=v?.toLowerCase()||"",A=_.includes("pdf")||w.endsWith(".pdf"),C=_.includes("image")||w.endsWith(".jpg")||w.endsWith(".jpeg")||w.endsWith(".png");return A?i.jsx("div",{className:"h-[600px] w-full rounded border bg-gray-900",children:i.jsx("iframe",{src:x,className:"h-full w-full",title:y})}):C?i.jsx("div",{className:"flex max-h-[600px] w-full justify-center rounded bg-gray-900 p-4",children:i.jsx("img",{src:x,alt:y,className:"max-h-[550px] max-w-full object-contain"})}):i.jsx("div",{className:"flex h-48 w-full items-center justify-center rounded border bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Uk,{className:"mx-auto mb-2 h-12 w-12 text-gray-400"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Visualização não disponível"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Use o botão de download para acessar o arquivo"})]})})};return c.length===0?i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Documentos da Proposta"})}),i.jsx(re,{children:i.jsxs("div",{className:"py-8 text-center text-gray-500",children:[i.jsx(zt,{className:"mx-auto mb-2 h-12 w-12"}),i.jsx("p",{children:"Nenhum documento anexado"})]})})]}):i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Documentos da Proposta"})}),i.jsx(re,{className:"space-y-3",children:c.map((g,x)=>i.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 hover:bg-gray-50",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[u(g.type,g.name),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:g.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ke,{variant:"secondary",className:"text-xs",children:d(g.type,g.name)}),g.size&&i.jsx("span",{className:"text-xs text-gray-500",children:g.size}),g.uploadDate&&i.jsx("span",{className:"text-xs text-gray-500",children:g.uploadDate})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(mn,{children:[i.jsx(XY,{asChild:!0,children:i.jsxs(se,{variant:"outline",size:"sm",onClick:()=>n(g),disabled:g.url==="#loading"||g.url==="#error",children:[i.jsx(wo,{className:"mr-1 h-4 w-4"}),g.url==="#loading"?"Carregando...":"Visualizar"]})}),i.jsxs(tn,{className:"max-h-[90vh] max-w-4xl",children:[i.jsx(rn,{children:i.jsx(nn,{children:g.name})}),i.jsx("div",{className:"mt-4",children:i.jsx(m,{document:g})}),i.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[i.jsxs(se,{variant:"outline",onClick:()=>f(g.url,g.name),disabled:g.url==="#loading"||g.url==="#error",children:[i.jsx(oa,{className:"mr-1 h-4 w-4"}),"Baixar"]}),i.jsxs(se,{variant:"outline",onClick:()=>window.open(g.url,"_blank"),disabled:g.url==="#loading"||g.url==="#error",children:[i.jsx(PM,{className:"mr-1 h-4 w-4"}),"Abrir em Nova Aba"]})]})]})]}),i.jsx(se,{variant:"ghost",size:"sm",onClick:()=>f(g.url,g.name),disabled:g.url==="#loading"||g.url==="#error",children:i.jsx(oa,{className:"h-4 w-4"})})]})]},x))})]})}const Vee=({propostaId:t})=>{const{data:e,isLoading:r}=nt({queryKey:[`/api/propostas/${t}`],queryFn:async()=>(await xt.get(`/api/propostas/${t}`)).data,enabled:!!t,refetchOnWindowFocus:!1,refetchOnReconnect:!0,staleTime:3e5}),{data:n}=nt({queryKey:[`/api/propostas/${t}/observacoes`],queryFn:async()=>{try{return(await xt.get(`/api/propostas/${t}/observacoes`)).data}catch(a){return console.warn("Erro ao buscar logs de auditoria:",a),{logs:[]}}},enabled:!!t,refetchOnWindowFocus:!1,refetchOnReconnect:!0,staleTime:120*1e3});if(r)return i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(ir,{className:"h-5 w-5 text-blue-400"}),"Histórico de Comunicação"]})}),i.jsx(re,{children:i.jsx("div",{className:"py-4 text-center text-gray-400",children:"Carregando histórico..."})})]});const s=n?.logs||[];return i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(ir,{className:"h-5 w-5 text-blue-400"}),"Histórico de Comunicação"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start gap-3 rounded-lg bg-gray-800 p-3",children:[i.jsx("div",{className:"mt-2 h-2 w-2 flex-shrink-0 rounded-full bg-green-500"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm font-medium text-green-400",children:[i.jsx(ar,{className:"mr-1 inline h-4 w-4"}),"Proposta Criada"]}),i.jsx("p",{className:"text-xs text-gray-400",children:e?.created_at?new Date(e.created_at).toLocaleString("pt-BR"):"Data não disponível"}),i.jsxs("p",{className:"mt-1 text-sm text-gray-300",children:["Proposta criada pelo atendente da loja ",e?.loja?.nome_loja||"N/A"]})]})]}),s.length>0?s.map((a,o)=>{const l=a.status_novo==="pendenciado",c=a.status_novo==="aguardando_analise"&&a.status_anterior==="pendenciado",u=a.status_novo==="aprovado",d=a.status_novo==="rejeitado",f=a.profiles?.role,m=f==="ATENDENTE",g=f==="ANALISTA";let x="bg-gray-800",v="",y="text-gray-300",w="bg-gray-500",_=i.jsx(_n,{className:"mr-1 inline h-4 w-4"});return l?(x="bg-yellow-900/20",v="border border-yellow-600",y="text-yellow-400",w="bg-yellow-500",_=i.jsx(jr,{className:"mr-1 inline h-4 w-4"})):c?(x="bg-indigo-900/20",v="border border-indigo-600",y="text-indigo-400",w="bg-indigo-500",_=i.jsx(OM,{className:"mr-1 inline h-4 w-4"})):u?(x="bg-green-900/20",v="border border-green-600",y="text-green-400",w="bg-green-500",_=i.jsx(ar,{className:"mr-1 inline h-4 w-4"})):d&&(x="bg-red-900/20",v="border border-red-600",y="text-red-400",w="bg-red-500",_=i.jsx(Ea,{className:"mr-1 inline h-4 w-4"})),i.jsxs("div",{className:`flex items-start gap-3 p-3 ${x} ${v} rounded-lg`,children:[i.jsx("div",{className:`h-2 w-2 ${w} mt-2 flex-shrink-0 rounded-full`}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:`text-sm font-medium ${y}`,children:[_," ",c?"Proposta reenviada para análise":l?"Proposta pendenciada":u?"Proposta aprovada":d?"Proposta rejeitada":"Status alterado"]}),i.jsx("p",{className:"text-xs text-gray-400",children:a.created_at?new Date(a.created_at).toLocaleString("pt-BR"):"Data não disponível"}),(a.observacao||a.detalhes)&&i.jsxs("div",{className:`mt-2 rounded border-l-2 p-2 text-sm ${m?"border-indigo-400 bg-indigo-900/30 text-indigo-100":l?"border-yellow-400 bg-yellow-900/30 text-yellow-100":"border-gray-500 bg-gray-700/50 text-gray-200"}`,children:[m&&i.jsx("span",{className:"font-medium text-indigo-300",children:"💬 Observação do Atendente:"}),g&&l&&i.jsx("span",{className:"font-medium text-yellow-300",children:"⚠️ Motivo da Pendência:"}),g&&u&&i.jsx("span",{className:"font-medium text-green-300",children:"✅ Observação da Aprovação:"}),g&&d&&i.jsx("span",{className:"font-medium text-red-300",children:"❌ Motivo da Rejeição:"}),g&&!l&&!u&&!d&&i.jsx("span",{className:"font-medium text-gray-300",children:"📝 Observação do Analista:"}),i.jsxs("div",{className:m?"mt-1 italic":"mt-1",children:['"',a.detalhes||a.observacao,'"']})]})]})]},`${a.id}-${o}`)}):i.jsxs("div",{className:"py-4 text-center text-gray-400",children:[i.jsx(gje,{className:"mx-auto mb-2 h-8 w-8 opacity-50"}),i.jsx("p",{children:"Nenhuma comunicação registrada ainda"})]})]})})]})};class ZRe{static toViewModel(e){const r=e.data;let n={};if(r.cliente_data||r.clienteData){const s=r.cliente_data||r.clienteData;try{n=typeof s=="string"?JSON.parse(s):s}catch(a){console.warn("[PropostaMapper] Erro ao parsear cliente_data:",a),n={}}}return{id:r.id||"",numeroProposta:r.numero_proposta,status:r.status||"rascunho",cliente:{nome:this.extractValue([n?.nome,n?.nomeCompleto,n?.nome_completo,n?.clienteNome,r.cliente_nome,r.clienteNome,"Gabriel Santana Jesus Sa"]),cpf:this.extractValue([n?.cpf,n?.clienteCpf,r.cliente_cpf,r.clienteCpf,"123.456.789-00"]),email:this.extractValue([n?.email,n?.clienteEmail,r.cliente_email,r.clienteEmail,"cliente@example.com"]),telefone:this.extractValue([n?.telefone,n?.clienteTelefone,r.cliente_telefone,r.clienteTelefone,"(11) 98765-4321"]),dataNascimento:this.extractValue([n?.dataNascimento,n?.data_nascimento,n?.clienteDataNascimento,r.cliente_data_nascimento,r.clienteDataNascimento,"01/01/1990"]),rendaMensal:this.formatMoney(this.extractValue([n?.rendaMensal,n?.renda_mensal,n?.renda,r.cliente_renda,r.clienteRenda,5e3])),rg:this.extractValue([n?.rg,n?.clienteRg,r.cliente_rg,r.clienteRg,"12.345.678-9"]),orgaoEmissor:this.extractValue([n?.orgaoEmissor,n?.orgao_emissor,r.cliente_orgao_emissor,r.clienteOrgaoEmissor,"SSP"]),estadoCivil:this.extractValue([n?.estadoCivil,n?.estado_civil,r.cliente_estado_civil,r.clienteEstadoCivil,"Solteiro"]),nacionalidade:this.extractValue([n?.nacionalidade,r.cliente_nacionalidade,r.clienteNacionalidade,"Brasileira"]),cep:this.extractValue([n?.cep,r.cliente_cep,r.clienteCep,"01310-100"]),endereco:this.extractValue([n?.endereco,r.cliente_endereco,r.clienteEndereco,"Av. Paulista, 1578 - Bela Vista, São Paulo - SP"]),ocupacao:this.extractValue([n?.ocupacao,n?.profissao,r.cliente_ocupacao,r.clienteOcupacao,"Analista"])},condicoes:{valorSolicitado:this.formatMoney(this.extractValue([r.valor,r.valor_solicitado,r.valorSolicitado,5e4])),prazo:this.extractNumber([r.prazo,r.prazo_meses,12]),finalidade:this.extractValue([r.finalidade,"Capital de Giro"]),garantia:this.extractValue([r.garantia,"Sem Garantia"]),valorTac:this.formatMoney(this.extractValue([r.valor_tac,r.valorTac,500])),valorIof:this.formatMoney(this.extractValue([r.valor_iof,r.valorIof,200])),valorTotalFinanciado:this.formatMoney(this.extractValue([r.valor_total_financiado,r.valorTotalFinanciado,50700])),taxaJuros:this.extractNumber([r.taxa_juros,r.taxaJuros,r.tabela_comercial_taxa,2.5])},loja:{id:r.loja_id,nome:this.extractValue([r.loja_nome,"Loja Central Teste"])},produto:{id:r.produto_id,nome:this.extractValue([r.produto_nome,"Crédito Pessoal"])},tabelaComercial:{id:r.tabela_comercial_id,nome:this.extractValue([r.tabela_comercial_nome,"Tabela Padrão"]),taxa:r.tabela_comercial_taxa},createdAt:r.created_at||r.createdAt,updatedAt:r.updated_at||r.updatedAt,motivoPendencia:r.motivo_pendencia||r.motivoPendencia,motivoRejeicao:r.motivo_rejeicao||r.motivoRejeicao,observacoes:r.observacoes,documentos:r.documentos||[]}}static extractValue(e){for(const r of e)if(r!=null&&r!=="")return String(r);return"N/A"}static extractNumber(e){for(const r of e)if(r!=null&&!isNaN(Number(r)))return Number(r);return 0}static formatMoney(e){if(e==null||e==="N/A")return"N/A";if(typeof e=="object"&&e.cents){const n=e.cents/100;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n)}const r=Number(e);return isNaN(r)?String(e):new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r)}}const sc=t=>{if(t==null)return"N/A";if(typeof t=="string"||typeof t=="number")return String(t);if(typeof t=="object"){if(t.cents!==void 0){const e=t.cents/100;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}return t.value!==void 0?String(t.value):Array.isArray(t)?t.join(", "):JSON.stringify(t)}return String(t)},eIe=async t=>{if(!t)throw new Error("ID da proposta não fornecido.");try{const e=await xt.get(`/api/propostas/${t}`);console.log("[Análise] Resposta bruta da API:",e.data);const r=ZRe.toViewModel(e.data);return console.log("[Análise] ViewModel mapeado:",r),r}catch(e){throw console.error("[Análise] Erro ao carregar proposta:",e),new Error("Proposta não encontrada")}},tIe=async({id:t,status:e,observacao:r,motivoPendencia:n})=>{try{return(await xt.put(`/api/propostas/${t}/status`,{status:e,observacao:r,motivoPendencia:n})).data}catch(s){throw new Error(s.message||"Falha ao atualizar status")}},rIe=ci({status:Hg(["aprovado","rejeitado","pendenciado"]),observacao:br().optional()}).refine(t=>t.status==="pendenciado"?t.observacao&&t.observacao.trim().length>0:!0,{message:"Observação é obrigatória quando a proposta é pendenciada",path:["observacao"]}),nIe=()=>{const[t,e]=F_("/credito/analise/:id"),r=e?.id,{toast:n}=Fr(),s=ys(),{user:a}=$a(),{data:o,isLoading:l,isError:c}=nt({queryKey:["proposta",r],queryFn:()=>eIe(r),enabled:!!r,refetchOnWindowFocus:!1,refetchOnReconnect:!0,staleTime:300*1e3}),{register:u,handleSubmit:d,control:f}=si({resolver:ai(rIe)}),m=Mt({mutationFn:tIe,onSuccess:()=>{n({title:"Sucesso!",description:"O status da proposta foi atualizado."}),s.invalidateQueries({queryKey:["proposta",r]}),s.invalidateQueries({queryKey:["proposta_logs",r]}),s.invalidateQueries({queryKey:[`/api/propostas/${r}`]}),s.invalidateQueries({queryKey:[`/api/propostas/${r}/observacoes`]}),s.invalidateQueries({queryKey:["/api/propostas"]})},onError:v=>{n({title:"Erro!",description:v.message,variant:"destructive"})}}),g=v=>{if(!r)return;const y={id:r,status:v.status,observacao:v.observacao,...v.status==="pendenciado"&&{motivoPendencia:v.observacao}};m.mutate(y)};if(l)return i.jsx(pt,{title:"Análise Manual",children:i.jsx("p",{className:"p-6",children:"Carregando proposta..."})});if(c||!o)return i.jsx(pt,{title:"Erro",children:i.jsxs("p",{className:"p-6",children:["Proposta não encontrada."," ",i.jsx(on,{to:"/credito/fila",className:"text-blue-500 hover:underline",children:"Voltar para a fila."})]})});const x=()=>{s.invalidateQueries({queryKey:["proposta",r]}),s.invalidateQueries({queryKey:["proposta_logs",r]}),s.invalidateQueries({queryKey:[`/api/propostas/${r}`]}),s.invalidateQueries({queryKey:[`/api/propostas/${r}/observacoes`]})};return i.jsx(pt,{title:`Análise Manual - Proposta #${o.id}`,actions:i.jsx(Tp,{onRefresh:x,isLoading:l,variant:"ghost"}),children:i.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[i.jsxs("div",{className:"space-y-6 md:col-span-2",children:[i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Dados do Cliente"})}),i.jsxs(re,{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Nome:"})," ",o.cliente.nome]}),i.jsxs("p",{children:[i.jsx("strong",{children:"CPF:"})," ",o.cliente.cpf]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",o.cliente.email]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Telefone:"})," ",o.cliente.telefone]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Data de Nascimento:"})," ",o.cliente.dataNascimento]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Renda Mensal:"})," ",o.cliente.rendaMensal]}),i.jsxs("p",{children:[i.jsx("strong",{children:"RG:"})," ",o.cliente.rg]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Órgão Emissor:"})," ",o.cliente.orgaoEmissor]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Estado Civil:"})," ",o.cliente.estadoCivil]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Nacionalidade:"})," ",o.cliente.nacionalidade]}),i.jsxs("p",{children:[i.jsx("strong",{children:"CEP:"})," ",o.cliente.cep]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Endereço:"})," ",o.cliente.endereco]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Ocupação:"})," ",o.cliente.ocupacao]})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Condições do Empréstimo"})}),i.jsxs(re,{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Valor Solicitado:"})," ",sc(o.valor||o.valor_solicitado||o.valorSolicitado||o.condicoesData?.valor)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Prazo:"})," ",o.prazo||o.condicoesData?.prazo?`${sc(o.prazo||o.condicoesData.prazo)} meses`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Finalidade:"})," ",o.finalidade||o.condicoesData?.finalidade||"Não informado"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Garantia:"})," ",o.garantia||o.condicoesData?.garantia||"Não informado"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"TAC:"})," ",sc(o.valor_tac||o.valorTac||o.condicoesData?.valorTac)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"IOF:"})," ",sc(o.valor_iof||o.valorIof||o.condicoesData?.valorIof)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Valor Total Financiado:"})," ",sc(o.valor_total_financiado||o.valorTotalFinanciado||o.condicoesData?.valorTotalFinanciado)]})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Informações da Proposta"})}),i.jsxs(re,{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Status Atual:"})," ",sc(o.status)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Parceiro:"})," ",sc(o.parceiro?.razaoSocial||o.loja_nome||"Parceiro Padrão")]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Loja:"})," ",sc(o.loja_nome||o.loja?.nomeLoja||"N/A")]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Data de Criação:"})," ",o.createdAt?new Date(o.createdAt).toLocaleDateString("pt-BR"):"N/A"]}),o.ccbDocumentoUrl&&i.jsxs("p",{children:[i.jsx("strong",{children:"Documento CCB:"}),i.jsx("a",{href:o.ccbDocumentoUrl,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-500 hover:underline",children:"Visualizar Documento"})]})]})]}),i.jsx(qee,{propostaId:r,documents:o.documentos||[],ccbDocumentoUrl:o.ccbDocumentoUrl}),a&&(a.role==="ANALISTA"||a.role==="ADMINISTRADOR")?i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Painel de Decisão"})}),i.jsx(re,{children:i.jsxs("form",{onSubmit:d(g),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{children:"Decisão"}),i.jsx(Li,{name:"status",control:f,render:({field:v})=>i.jsxs(Yt,{onValueChange:v.onChange,defaultValue:v.value,children:[i.jsx(Ht,{children:i.jsx(Qt,{placeholder:"Selecione uma decisão..."})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"aprovado",children:"Aprovar Proposta"}),i.jsx(le,{value:"rejeitado",children:"Negar Proposta"}),i.jsx(le,{value:"pendenciado",children:"Pendenciar"})]})]})})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"observacao",children:"Observações (obrigatório se pendenciar)"}),i.jsx(Ra,{id:"observacao",...u("observacao")})]}),i.jsx(se,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?"Salvando...":"Confirmar Decisão"})]})})]}):i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Visualização da Proposta"})}),i.jsx(re,{children:i.jsx("p",{className:"text-muted-foreground",children:"Você está visualizando esta proposta em modo de leitura. Apenas analistas podem aprovar ou negar propostas."})})]})]}),i.jsx("div",{className:"md:col-span-1",children:i.jsx(Vee,{propostaId:r,context:"analise"})})]})})};var sIe="Separator",wU="horizontal",aIe=["horizontal","vertical"],Hee=N.forwardRef((t,e)=>{const{decorative:r,orientation:n=wU,...s}=t,a=iIe(n)?n:wU,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(He.div,{"data-orientation":a,...l,...s,ref:e})});Hee.displayName=sIe;function iIe(t){return aIe.includes(t)}var Wee=Hee;const Cu=N.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},s)=>i.jsx(Wee,{ref:s,decorative:r,orientation:e,className:Ie("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Cu.displayName=Wee.displayName;function oIe({isOpen:t,onClose:e,proposta:r,onConfirm:n}){const{toast:s}=Fr(),[a,o]=N.useState(!1),[l,c]=N.useState(""),[u,d]=N.useState(!1),[f,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(!1),[w,_]=N.useState(null),[A,C]=N.useState(""),S=Mt({mutationFn:async()=>{const I=r?.id;return console.log("[REVIEW MODAL] Confirmando veracidade para proposta:",I),await Je(`/api/pagamentos/${I}/confirmar-veracidade`,{method:"POST",body:JSON.stringify({observacoes:l})})},onSuccess:I=>{console.log("✅ [REVIEW MODAL] Veracidade confirmada com sucesso:",I),I.idempotent?(s({title:"Pagamento já autorizado",description:"Este pagamento já foi autorizado anteriormente.",className:"bg-blue-50 border-blue-200"}),m(!0)):s({title:"✅ Veracidade Confirmada",description:"Pagamento autorizado. Agora você pode proceder com o pagamento.",className:"bg-green-50 border-green-200"}),d(!0),m(!0),o(!1),tr.invalidateQueries({queryKey:["/api/pagamentos"]})},onError:I=>{console.error("❌ [REVIEW MODAL] Erro ao confirmar veracidade:",I),s({title:"Erro ao confirmar veracidade",description:I.message||"Não foi possível confirmar a veracidade.",variant:"destructive"})}}),E=Mt({mutationFn:async()=>{const I=new FormData;return I.append("observacoes",A),w&&I.append("comprovante",w),console.log("[MARCAR PAGO] Iniciando requisição para:",`${r?.id}`),await Je(`/api/pagamentos/${r?.id}/marcar-pago`,{method:"POST",body:I})},onSuccess:()=>{s({title:"✅ Pagamento Confirmado",description:"A proposta foi marcada como paga com sucesso.",className:"bg-green-50 border-green-200"}),x(!1),y(!1),_(null),C(""),tr.invalidateQueries({queryKey:["/api/pagamentos"]}),n(),e()},onError:I=>{s({title:"Erro ao marcar como pago",description:I.message||"Não foi possível marcar a proposta como paga.",variant:"destructive"})}}),P=I=>{navigator.clipboard.writeText(I),s({title:"Copiado!",description:"Chave PIX copiada para a área de transferência."})},R=async()=>{try{console.log("🔍 [CCB VIEW] Iniciando visualização da CCB para proposta:",r.id);const I=await Je(`/api/propostas/${r.id}/ccb`,{method:"GET"});console.log("✅ [CCB VIEW] Resposta recebida:",I),I.url?(window.open(I.url,"_blank"),s({title:"CCB aberta",description:`Documento ${I.nome} aberto em nova aba.`})):s({title:"CCB não disponível",description:"URL do documento não foi encontrada.",variant:"destructive"})}catch(I){console.error("❌ [CCB VIEW] Erro:",I),s({title:"Erro ao abrir CCB",description:I.message||"Não foi possível abrir o documento.",variant:"destructive"})}},O=I=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(I),D=I=>I?I.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):"";return r?i.jsxs(i.Fragment,{children:[i.jsx(mn,{open:t,onOpenChange:e,children:i.jsxs(tn,{className:"max-w-2xl",children:[i.jsxs(rn,{children:[i.jsxs(nn,{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-5 w-5 text-blue-600"}),"Confirmação de Pagamento"]}),i.jsx(qs,{children:"Verifique os dados essenciais antes de autorizar o pagamento"})]}),i.jsx("div",{className:"space-y-4 mt-4",children:i.jsx(ee,{children:i.jsxs(re,{className:"pt-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{children:"Valor Solicitado"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:O(Number(r.valor||0))})]}),i.jsx(Cu,{}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{children:"Nome do Cliente"}),i.jsx("p",{className:"font-medium",children:r.cliente_nome||r.clienteNome})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"CPF"}),i.jsx("p",{className:"font-medium",children:D(r.cliente_cpf||r.clienteCpf)})]})]}),i.jsx(Cu,{}),i.jsxs("div",{children:[i.jsx(ue,{children:"Dados Bancários para Pagamento"}),i.jsxs("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg space-y-1",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Banco:"})," ",r.dados_pagamento_banco||r.dadosPagamentoBanco||"Não informado"]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Agência:"})," ",r.dados_pagamento_agencia||r.dadosPagamentoAgencia||"Não informado"]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Conta:"})," ",r.dados_pagamento_conta||r.dadosPagamentoConta||"Não informado"]}),(r.dados_pagamento_pix||r.dadosPagamentoPix)&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"PIX:"})," ",r.dados_pagamento_pix||r.dadosPagamentoPix]})]})]}),i.jsx(Cu,{}),i.jsxs("div",{children:[i.jsx(ue,{children:"Documento CCB"}),i.jsxs("div",{className:"mt-2 flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"h-5 w-5 text-blue-600"}),i.jsx("span",{className:"text-sm",children:r.assinatura_eletronica_concluida||r.assinaturaEletronicaConcluida?"CCB Assinada Eletronicamente":"CCB Pendente de Assinatura"})]}),(r.assinatura_eletronica_concluida||r.assinaturaEletronicaConcluida)&&i.jsxs(se,{size:"sm",variant:"outline",onClick:R,children:[i.jsx(PM,{className:"mr-2 h-4 w-4"}),"Ver CCB"]})]})]}),!r.assinatura_eletronica_concluida&&!r.assinaturaEletronicaConcluida&&i.jsxs(jt,{variant:"destructive",children:[i.jsx(jr,{className:"h-4 w-4"}),i.jsx(At,{children:"A CCB deve estar assinada antes de autorizar o pagamento."})]}),u&&i.jsxs(jt,{className:"border-green-200 bg-green-50",children:[i.jsx(ar,{className:"h-4 w-4 text-green-600"}),i.jsx(At,{className:"text-green-800",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{children:"Pagamento autorizado! Chave PIX liberada:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("code",{className:"font-mono text-lg font-bold",children:r.dados_pagamento_pix||r.dadosPagamentoPix||r.cliente_cpf||r.clienteCpf}),i.jsx(se,{size:"sm",variant:"ghost",onClick:()=>P(r.dados_pagamento_pix||r.dadosPagamentoPix||r.cliente_cpf||r.clienteCpf),children:i.jsx(Nf,{className:"h-4 w-4"})})]})]})})]}),!u&&(r.status==="pronto_pagamento"||r.status==="em_processamento")&&i.jsxs("div",{children:[i.jsx(ue,{children:"Observações (opcional)"}),i.jsx(Ra,{placeholder:"Adicione observações sobre a verificação...",value:l,onChange:I=>c(I.target.value),className:"mt-2",rows:3})]})]})})}),i.jsx(ca,{children:!f&&(r.status==="pronto_pagamento"||r.status==="em_processamento")?i.jsxs(i.Fragment,{children:[i.jsx(se,{variant:"outline",onClick:e,children:"Cancelar"}),i.jsxs(se,{onClick:()=>o(!0),disabled:!r.assinatura_eletronica_concluida&&!r.assinaturaEletronicaConcluida,children:[i.jsx(ur,{className:"mr-2 h-4 w-4"}),"Confirmar Veracidade"]})]}):f?i.jsxs(i.Fragment,{children:[i.jsx(se,{variant:"outline",onClick:e,children:"Fechar"}),i.jsxs(se,{onClick:()=>x(!0),className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Ef,{className:"mr-2 h-4 w-4"}),"Fazer Pagamento"]})]}):i.jsx(se,{variant:"outline",onClick:e,children:"Fechar"})})]})}),i.jsx(mn,{open:a,onOpenChange:o,children:i.jsxs(tn,{children:[i.jsxs(rn,{children:[i.jsxs(nn,{className:"flex items-center gap-2",children:[i.jsx(jr,{className:"h-5 w-5 text-orange-600"}),"Confirmação Final"]}),i.jsx(qs,{children:"Esta ação autorizará o pagamento. Tem certeza?"})]}),i.jsxs(jt,{children:[i.jsx(NX,{className:"h-4 w-4"}),i.jsx(At,{children:"Ao confirmar, você atesta que todos os documentos foram verificados e o pagamento está autorizado."})]}),i.jsxs(ca,{children:[i.jsx(se,{variant:"outline",onClick:()=>o(!1),children:"Cancelar"}),i.jsx(se,{onClick:()=>{S.mutate()},disabled:S.isPending,children:S.isPending?"Confirmando...":i.jsxs(i.Fragment,{children:[i.jsx(ar,{className:"mr-2 h-4 w-4"}),"Autorizar Pagamento"]})})]})]})}),i.jsx(mn,{open:g,onOpenChange:x,children:i.jsxs(tn,{className:"max-w-lg",children:[i.jsxs(rn,{children:[i.jsxs(nn,{className:"flex items-center gap-2",children:[i.jsx(Ef,{className:"h-5 w-5 text-green-600"}),"Execução do Pagamento"]}),i.jsx(qs,{children:"Confirme o pagamento e anexe o comprovante (opcional)"})]}),i.jsxs("div",{className:"space-y-4 mt-4",children:[i.jsx(ee,{children:i.jsxs(re,{className:"pt-6 space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Cliente:"}),i.jsx("span",{className:"font-medium",children:r.cliente_nome||r.clienteNome})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"CPF:"}),i.jsx("span",{className:"font-medium",children:D(r.cliente_cpf||r.clienteCpf)})]}),i.jsx(Cu,{}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Valor a Pagar:"}),i.jsx("span",{className:"text-xl font-bold text-green-600",children:O(Number(r.valor||0))})]}),i.jsx(Cu,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ue,{className:"text-sm font-medium",children:"Dados para Pagamento:"}),i.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg space-y-1",children:r.dados_pagamento_pix||r.dadosPagamentoPix?i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm",children:[i.jsx("strong",{children:"PIX:"})," ",r.dados_pagamento_pix||r.dadosPagamentoPix]}),i.jsx(se,{size:"sm",variant:"ghost",onClick:()=>P(r.dados_pagamento_pix||r.dadosPagamentoPix),children:i.jsx(Nf,{className:"h-3 w-3"})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Banco:"})," ",r.dados_pagamento_banco||r.dadosPagamentoBanco]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Agência:"})," ",r.dados_pagamento_agencia||r.dadosPagamentoAgencia]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Conta:"})," ",r.dados_pagamento_conta||r.dadosPagamentoConta]})]})})]})]})}),v?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ue,{children:"Anexar Comprovante (Opcional)"}),i.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[i.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:I=>{const $=I.target.files?.[0];$&&(_($),s({title:"Arquivo selecionado",description:$.name}))},className:"w-full"}),w&&i.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["✓ ",w.name]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ue,{children:"Observações (Opcional)"}),i.jsx(Ra,{placeholder:"Adicione observações sobre o pagamento...",value:A,onChange:I=>C(I.target.value),rows:3})]}),i.jsxs(jt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(jr,{className:"h-4 w-4 text-orange-600"}),i.jsx(At,{className:"text-orange-800",children:'Ao clicar em "ESTÁ PAGO", a proposta será marcada como paga definitivamente.'})]}),i.jsx(se,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>E.mutate(),disabled:E.isPending,children:E.isPending?"Processando...":i.jsxs(i.Fragment,{children:[i.jsx(ar,{className:"mr-2 h-4 w-4"}),"ESTÁ PAGO"]})})]}):i.jsxs(se,{className:"w-full",onClick:()=>{y(!0),s({title:"Pagamento Confirmado",description:"Agora você pode anexar o comprovante (opcional)."})},children:[i.jsx(ar,{className:"mr-2 h-4 w-4"}),"Confirmar Pagamento"]})]}),i.jsx(ca,{children:i.jsx(se,{variant:"outline",onClick:()=>{x(!1),y(!1),_(null),C("")},children:"Cancelar"})})]})})]}):null}function lIe({isOpen:t,onClose:e,proposta:r,onConfirm:n}){const{toast:s}=Fr(),[a,o]=N.useState(""),[l,c]=N.useState(null),[u,d]=N.useState(!1),f=Mt({mutationFn:async()=>{const w=r.parcelas?.find(C=>C.status!=="pago");if(!w?.codigoSolicitacao)throw new Error("Nenhuma parcela elegível encontrada para marcação como paga");const _=new FormData;_.append("observacoes",a),l&&_.append("comprovante",l);const A=await fetch(`/api/cobrancas/parcelas/${w.codigoSolicitacao}/marcar-pago`,{method:"PATCH",credentials:"include",body:_});if(!A.ok){const C=await A.json();throw new Error(C.error||"Erro ao marcar como pago")}return A.json()},onSuccess:w=>{s({title:"✅ Pagamento Confirmado",description:"A proposta foi marcada como paga com sucesso.",className:"bg-green-50 border-green-200"}),o(""),c(null),d(!1),tr.invalidateQueries({queryKey:["/api/pagamentos"]}),tr.invalidateQueries({queryKey:["/api/cobrancas"]}),tr.invalidateQueries({queryKey:["/api/cobrancas/kpis"]}),n()},onError:w=>{s({title:"Erro ao marcar como pago",description:w.message||"Não foi possível marcar a proposta como paga.",variant:"destructive"})}}),m=w=>{const _=w.target.files?.[0];if(_){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(_.type)){s({title:"Tipo de arquivo inválido",description:"Por favor, selecione um arquivo PDF, JPG ou PNG.",variant:"destructive"});return}const C=5*1024*1024;if(_.size>C){s({title:"Arquivo muito grande",description:"O arquivo deve ter no máximo 5MB.",variant:"destructive"});return}c(_)}},g=()=>{c(null);const w=document.getElementById("comprovante-input");w&&(w.value="")},x=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w),v=w=>w?w.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):"",y=w=>w==="application/pdf"?i.jsx(zt,{className:"h-6 w-6 text-red-500"}):w.startsWith("image/")?i.jsx(AX,{className:"h-6 w-6 text-blue-500"}):i.jsx(Uk,{className:"h-6 w-6 text-gray-500"});return r?i.jsxs(i.Fragment,{children:[i.jsx(mn,{open:t&&!u,onOpenChange:e,children:i.jsxs(tn,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[i.jsxs(rn,{children:[i.jsxs(nn,{className:"flex items-center gap-2",children:[i.jsx(Lg,{className:"h-5 w-5 text-green-600"}),"Marcar como Pago"]}),i.jsx(qs,{children:"Confirme que o pagamento foi realizado ao cliente e registre o comprovante"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{className:"text-lg",children:"Resumo do Pagamento"})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{children:"Cliente"}),i.jsx("p",{className:"text-sm font-medium",children:r.clienteNome})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"CPF"}),i.jsx("p",{className:"text-sm font-medium",children:v(r.clienteCpf)})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Valor a Pagar"}),i.jsx("p",{className:"text-lg font-semibold text-green-600",children:x(Number(r.valor)-Number(r.valorTac)-Number(r.valorIof))})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Forma de Pagamento"}),i.jsx("p",{className:"text-sm",children:"PIX"})]})]}),i.jsx(Cu,{}),i.jsxs("div",{children:[i.jsx(ue,{children:"Chave PIX"}),i.jsx("p",{className:"rounded bg-gray-50 p-2 font-mono text-sm",children:r.dadosPagamentoPix||r.clienteCpf})]})]})]}),i.jsxs(jt,{children:[i.jsx(jr,{className:"h-4 w-4"}),i.jsxs(At,{children:[i.jsx("strong",{children:"Atenção:"})," Esta ação confirmará que o pagamento foi realizado ao cliente e a proposta será removida da lista de pagamentos pendentes. Esta ação é irreversível."]})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"comprovante-input",children:"Comprovante de Pagamento (Opcional)"}),i.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Anexe o comprovante do PIX ou transferência realizada (PDF, JPG ou PNG - máx. 5MB)"}),l?i.jsx("div",{className:"rounded-lg border border-gray-200 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[y(l.type),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:l.name}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(l.size/1024/1024).toFixed(2)," MB"]})]})]}),i.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:g,children:i.jsx(Vi,{className:"h-4 w-4"})})]})}):i.jsxs("div",{className:"rounded-lg border-2 border-dashed border-gray-200 p-6 text-center transition-colors hover:border-gray-300",children:[i.jsx(OX,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),i.jsx("div",{className:"mb-2 text-sm text-gray-600",children:"Clique para selecionar um arquivo ou arraste aqui"}),i.jsx(Fe,{id:"comprovante-input",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:m,className:"hidden"}),i.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("comprovante-input")?.click(),children:"Selecionar Arquivo"})]})]})}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"observacoes",children:"Observações (Opcional)"}),i.jsx(Ra,{id:"observacoes",placeholder:"Adicione observações sobre o pagamento realizado...",value:a,onChange:w=>o(w.target.value),className:"mt-2",rows:3})]})]}),i.jsxs(ca,{children:[i.jsx(se,{variant:"outline",onClick:e,children:"Cancelar"}),i.jsxs(se,{onClick:()=>d(!0),className:"bg-green-600 hover:bg-green-700",children:[i.jsx(ar,{className:"mr-2 h-4 w-4"}),"Marcar como Pago"]})]})]})}),i.jsx(mn,{open:u,onOpenChange:d,children:i.jsxs(tn,{children:[i.jsxs(rn,{children:[i.jsxs(nn,{className:"flex items-center gap-2",children:[i.jsx(jr,{className:"h-5 w-5 text-orange-600"}),"Confirmação Final"]}),i.jsx(qs,{children:"Esta ação é irreversível e será registrada no sistema."})]}),i.jsxs(jt,{variant:"destructive",children:[i.jsx(jr,{className:"h-4 w-4"}),i.jsxs(At,{children:["Você confirma que o pagamento de"," ",i.jsx("strong",{children:x(Number(r.valor)-Number(r.valorTac)-Number(r.valorIof))})," ","foi realizado via PIX para ",i.jsx("strong",{children:r.clienteNome}),"? Esta ação é irreversível e será registrada com seu nome e horário."]})]}),l&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("strong",{children:"Comprovante:"})," ",l.name," será anexado ao registro."]}),i.jsxs(ca,{children:[i.jsx(se,{variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),i.jsx(se,{variant:"default",onClick:()=>f.mutate(),disabled:f.isPending,className:"bg-green-600 hover:bg-green-700",children:f.isPending?i.jsxs(i.Fragment,{children:[i.jsx(un,{className:"mr-2 h-4 w-4 animate-spin"}),"Processando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ar,{className:"mr-2 h-4 w-4"}),"Sim, Confirmar Pagamento"]})})]})]})})]}):null}function cIe(){const[t,e]=qi(),{toast:r}=Fr(),[n,s]=N.useState(""),[a,o]=N.useState("todos"),[l,c]=N.useState("todos"),[u,d]=N.useState(null),[f,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(!1),[w,_]=N.useState(!1),[A,C]=N.useState(null),[S,E]=N.useState(!1),[P,R]=N.useState(null),[O,D]=N.useState(""),[I,$]=N.useState(""),[M,U]=N.useState(null),[H,z]=N.useState(""),[q,V]=N.useState(""),[W,B]=N.useState(!1),{data:F=[],isLoading:Y,error:oe,refetch:xe}=nt({queryKey:["/api/pagamentos",{status:a,periodo:l,mostrarPagos:W}],queryFn:async()=>{const _e=new URLSearchParams;a!=="todos"&&_e.append("status",a),l!=="todos"&&_e.append("periodo",l),W&&_e.append("incluir_pagos","true"),console.log("[PAGAMENTOS] Buscando pagamentos com filtros:",{statusFilter:a,periodoFilter:l,mostrarPagos:W});try{const St=await Je(`/api/pagamentos?${_e.toString()}`,{method:"GET"});return console.log("[PAGAMENTOS] Resposta recebida:",St),St}catch(St){throw console.error("[PAGAMENTOS] Erro ao buscar:",St),St}},retry:2,staleTime:1e3,refetchOnWindowFocus:!1,enabled:!0}),{data:J,isLoading:Ee}=nt({queryKey:["/api/pagamentos",u?.id,"verificar-documentos"],queryFn:async()=>u?.id?await Je(`/api/pagamentos/${u.id}/verificar-documentos`,{method:"GET"}):null,enabled:v&&!!u?.id}),ye=Mt({mutationFn:async({id:_e,observacao:St})=>await Je(`/api/pagamentos/${_e}/aprovar`,{method:"POST",body:JSON.stringify({observacao:St})}),onSuccess:()=>{r({title:"Pagamento aprovado",description:"O pagamento foi aprovado e será processado em breve."}),m(!1),$(""),tr.invalidateQueries({queryKey:["/api/pagamentos"]})},onError:()=>{r({title:"Erro ao aprovar",description:"Não foi possível aprovar o pagamento.",variant:"destructive"})}}),je=Mt({mutationFn:async({id:_e,senha:St,observacoes:X})=>await Je(`/api/pagamentos/${_e}/confirmar-desembolso`,{method:"POST",body:JSON.stringify({senha:St,observacoes:X})}),onSuccess:()=>{r({title:"Desembolso confirmado",description:"O pagamento foi realizado com sucesso ao cliente.",className:"bg-green-50 border-green-200"}),y(!1),z(""),V(""),tr.invalidateQueries({queryKey:["/api/pagamentos"]})},onError:_e=>{r({title:"Erro ao confirmar desembolso",description:_e.message||"Verifique as validações de segurança.",variant:"destructive"})}}),pe=Mt({mutationFn:async({id:_e,motivo:St})=>await Je(`/api/pagamentos/${_e}/rejeitar`,{method:"POST",body:JSON.stringify({motivo:St})}),onSuccess:()=>{r({title:"Pagamento rejeitado",description:"O pagamento foi rejeitado com sucesso."}),x(!1),D(""),tr.invalidateQueries({queryKey:["/api/pagamentos"]})},onError:()=>{r({title:"Erro ao rejeitar",description:"Não foi possível rejeitar o pagamento.",variant:"destructive"})}}),Se=Array.isArray(F)?F.filter(_e=>!n||n.trim()===""?!0:_e.nomeCliente.toLowerCase().includes(n.toLowerCase())||_e.numeroContrato.includes(n)||_e.cpfCliente.includes(n)||_e.propostaId.includes(n)):[];console.log("[PAGAMENTOS FRONTEND] Dados recebidos:",Array.isArray(F)?F?.length:"NOT_ARRAY",F),console.log("[PAGAMENTOS FRONTEND] Termo de busca:",n),console.log("[PAGAMENTOS FRONTEND] Dados filtrados:",Se?.length),Array.isArray(F)&&F?.length>0&&console.log("[PAGAMENTOS FRONTEND] Primeiro pagamento:",F[0]);const Oe={aguardandoAprovacao:Array.isArray(F)&&F?.filter(_e=>_e.status==="aguardando_aprovacao").length||0,aprovados:Array.isArray(F)&&F?.filter(_e=>_e.status==="aprovado").length||0,emProcessamento:Array.isArray(F)&&F?.filter(_e=>_e.status==="em_processamento").length||0,pagos:Array.isArray(F)&&F?.filter(_e=>_e.status==="pago").length||0,rejeitados:Array.isArray(F)&&F?.filter(_e=>_e.status==="rejeitado").length||0,valorTotalAguardando:Array.isArray(F)&&F?.filter(_e=>_e.status==="aguardando_aprovacao").reduce((_e,St)=>_e+St.valorLiquido,0)||0,valorTotalPago:Array.isArray(F)&&F?.filter(_e=>_e.status==="pago").reduce((_e,St)=>_e+St.valorLiquido,0)||0,valorTotalProcessando:Array.isArray(F)&&F?.filter(_e=>_e.status==="em_processamento"||_e.status==="aprovado").reduce((_e,St)=>_e+St.valorLiquido,0)||0},ve=_e=>{switch(_e){case"aguardando_aprovacao":return"bg-yellow-100 text-yellow-800";case"aprovado":return"bg-blue-100 text-blue-800";case"em_processamento":return"bg-purple-100 text-purple-800";case"pronto_pagamento":return"bg-indigo-100 text-indigo-800";case"pagamento_autorizado":return"bg-emerald-100 text-emerald-800";case"pago":return"bg-green-100 text-green-800";case"rejeitado":return"bg-red-100 text-red-800";case"cancelado":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Xe=_e=>{switch(_e){case"aguardando_aprovacao":return"Aguardando Aprovação";case"aprovado":return"Aprovado";case"em_processamento":return"Em Processamento";case"pronto_pagamento":return"Pronto para Pagamento";case"pagamento_autorizado":return"Pagamento Autorizado";case"pago":return"Pago";case"rejeitado":return"Rejeitado";case"cancelado":return"Cancelado";default:return _e}},$e=_e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(_e),at=_e=>_e?_e.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):"",Ft=_e=>`${_e.banco} | Ag: ${_e.agencia} | Conta: ${_e.conta} (${_e.tipoConta})`,rr=()=>!0;return Y?i.jsx(pt,{title:"Pagamentos",children:i.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-primary"}),i.jsx("p",{className:"text-muted-foreground",children:"Carregando pagamentos..."})]})})}):oe?i.jsx(pt,{title:"Pagamentos",children:i.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:i.jsxs(ee,{className:"w-full max-w-md",children:[i.jsx(ie,{children:i.jsx(de,{className:"text-red-600",children:"Erro ao carregar pagamentos"})}),i.jsxs(re,{children:[i.jsx("p",{className:"mb-4 text-muted-foreground",children:"Não foi possível carregar os dados de pagamentos. Por favor, tente novamente."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(se,{onClick:()=>xe(),children:[i.jsx(ls,{className:"mr-2 h-4 w-4"}),"Tentar novamente"]}),i.jsx(se,{variant:"outline",onClick:()=>e("/dashboard"),children:"Voltar ao Dashboard"})]})]})]})})}):i.jsx(pt,{title:"Pagamentos",children:i.jsxs("div",{className:"space-y-6",children:[i.jsx(oIe,{isOpen:w,onClose:()=>{_(!1),C(null)},proposta:A,onConfirm:()=>{xe(),_(!1),C(null)}}),i.jsx(lIe,{isOpen:S,onClose:()=>{E(!1),R(null)},proposta:P,onConfirm:()=>{xe(),E(!1),R(null)}}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Aguardando Aprovação"}),i.jsx(_n,{className:"h-4 w-4 text-yellow-600"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:Oe.aguardandoAprovacao}),i.jsx("div",{className:"text-xs text-muted-foreground",children:$e(Oe.valorTotalAguardando)}),i.jsx(On,{value:20,className:"mt-2"})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Em Processamento"}),i.jsx(tje,{className:"h-4 w-4 text-purple-600"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:Oe.aprovados+Oe.emProcessamento}),i.jsx("div",{className:"text-xs text-muted-foreground",children:$e(Oe.valorTotalProcessando)}),i.jsx(On,{value:50,className:"mt-2"})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Pagamentos Realizados"}),i.jsx(ar,{className:"h-4 w-4 text-green-600"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:Oe.pagos}),i.jsx("div",{className:"text-xs text-muted-foreground",children:$e(Oe.valorTotalPago)}),i.jsx(On,{value:100,className:"mt-2"})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Rejeitados"}),i.jsx(Ea,{className:"h-4 w-4 text-red-600"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:Oe.rejeitados}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Requerem nova análise"})]})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Filtros"})}),i.jsx(re,{children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"relative",children:[i.jsx(W_,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Fe,{placeholder:"Buscar por nome, CPF, contrato ou proposta...",value:n,onChange:_e=>s(_e.target.value),className:"pl-10"})]})}),i.jsxs(Yt,{value:a,onValueChange:o,children:[i.jsx(Ht,{className:"w-[250px]",children:i.jsx(Qt,{placeholder:"Status"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"todos",children:"Todos os Status"}),i.jsx(le,{value:"aguardando_aprovacao",children:"Aguardando Aprovação"}),i.jsx(le,{value:"aprovado",children:"Aprovado"}),i.jsx(le,{value:"em_processamento",children:"Em Processamento"}),i.jsx(le,{value:"pago",children:"Pago"}),i.jsx(le,{value:"rejeitado",children:"Rejeitado"})]})]}),i.jsxs(Yt,{value:l,onValueChange:c,children:[i.jsx(Ht,{className:"w-[200px]",children:i.jsx(Qt,{placeholder:"Período"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"todos",children:"Todos"}),i.jsx(le,{value:"hoje",children:"Hoje"}),i.jsx(le,{value:"semana",children:"Esta Semana"}),i.jsx(le,{value:"mes",children:"Este Mês"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(M2,{id:"mostrar-pagos",checked:W,onCheckedChange:B}),i.jsx(ue,{htmlFor:"mostrar-pagos",className:"text-sm",children:"📋 Mostrar Pagos (Auditoria)"})]}),i.jsxs(se,{variant:"outline",onClick:()=>xe(),children:[i.jsx(ls,{className:"mr-2 h-4 w-4"}),"Atualizar"]})]})})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"Solicitações de Pagamento"}),i.jsxs(Jt,{children:["Gestão de liberação de crédito para propostas aprovadas",W&&i.jsx("span",{className:"ml-2 inline-flex items-center rounded-full bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700",children:"📋 Incluindo propostas pagas para auditoria"})]})]}),i.jsx(re,{children:i.jsx(Xg,{className:"w-full",children:i.jsxs(pd,{children:[i.jsx(md,{children:i.jsxs(Dn,{children:[i.jsx(Lt,{children:"Contrato"}),i.jsx(Lt,{children:"Cliente"}),i.jsx(Lt,{className:"text-right",children:"Valor Líquido"}),i.jsx(Lt,{children:"Conta Destino"}),i.jsx(Lt,{className:"text-center",children:"Status"}),i.jsx(Lt,{className:"text-center",children:"Solicitado em"}),i.jsx(Lt,{children:"Solicitado por"}),i.jsx(Lt,{className:"text-right",children:"Ações"})]})}),i.jsx(gd,{children:Y?i.jsx(Dn,{children:i.jsx(vt,{colSpan:8,className:"py-8 text-center",children:"Carregando..."})}):Se?.length===0?i.jsx(Dn,{children:i.jsx(vt,{colSpan:8,className:"py-12 text-center",children:i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"mb-4 flex justify-center",children:i.jsx(ir,{className:"text-muted-foreground/50 h-12 w-12"})}),i.jsx("h3",{className:"text-lg font-medium",children:"Nenhum pagamento disponível"}),i.jsx("p",{className:"mx-auto max-w-md text-sm text-muted-foreground",children:"Para que uma proposta apareça aqui, ela precisa ter:"}),i.jsxs("ul",{className:"mx-auto max-w-sm space-y-1 text-left text-sm text-muted-foreground",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(ar,{className:"h-4 w-4 text-green-600"}),"CCB assinada eletronicamente"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(ar,{className:"h-4 w-4 text-green-600"}),"Boletos de cobrança gerados no Inter"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(ar,{className:"h-4 w-4 text-green-600"}),'Status "Pronto para Pagamento"']})]}),i.jsxs(se,{variant:"outline",size:"sm",onClick:()=>xe(),className:"mt-4",children:[i.jsx(ls,{className:"mr-2 h-4 w-4"}),"Verificar novamente"]})]})})}):Se?.map(_e=>i.jsxs(Dn,{className:"hover:bg-muted/50 cursor-pointer",children:[i.jsx(vt,{className:"font-medium",children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["#",_e.numeroContrato]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:_e.produto})]})}),i.jsx(vt,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{children:_e.nomeCliente}),i.jsx("div",{className:"text-xs text-muted-foreground",children:at(_e.cpfCliente)})]})}),i.jsx(vt,{className:"text-right",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"font-semibold",children:$e(_e.valorLiquido)}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Financ.: ",$e(_e.valorFinanciado)]})]})}),i.jsx(vt,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm",children:_e.contaBancaria.titular}),i.jsx("div",{className:"text-xs text-muted-foreground",children:Ft(_e.contaBancaria)})]})}),i.jsx(vt,{className:"text-center",children:i.jsx(ke,{className:ve(_e.status),children:Xe(_e.status)})}),i.jsx(vt,{className:"text-center",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm",children:Mn(new Date(_e.dataRequisicao),"dd/MM/yyyy")}),i.jsx("div",{className:"text-xs text-muted-foreground",children:Mn(new Date(_e.dataRequisicao),"HH:mm")})]})}),i.jsx(vt,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm",children:_e.requisitadoPor.nome}),i.jsx("div",{className:"text-xs text-muted-foreground",children:_e.requisitadoPor.papel})]})}),i.jsx(vt,{children:i.jsxs("div",{className:"flex justify-end gap-1",children:[i.jsx(se,{size:"sm",variant:"ghost",onClick:()=>d(_e),title:"Ver detalhes",children:i.jsx(wo,{className:"h-4 w-4"})}),_e.status==="em_processamento"&&rr()&&i.jsxs(se,{size:"sm",variant:"default",className:"gap-2",onClick:()=>{C(_e),_(!0)},title:"Confirmar Veracidade",children:[i.jsx(xje,{className:"h-4 w-4"}),"Confirmar Veracidade"]}),_e.status==="aprovado"&&rr()&&i.jsxs(se,{size:"sm",variant:"default",className:"gap-2 bg-green-600 hover:bg-green-700",onClick:()=>{R(_e),E(!0)},title:"Marcar como Pago",children:[i.jsx(Lg,{className:"h-4 w-4"}),"Marcar como Pago"]})]})})]},_e.id))})]})})})]}),u&&!f&&!g&&i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(de,{children:"Detalhes do Pagamento"}),i.jsx(se,{variant:"ghost",size:"sm",onClick:()=>d(null),children:"Fechar"})]})}),i.jsx(re,{children:i.jsxs(kp,{defaultValue:"geral",children:[i.jsxs(Rd,{className:"grid w-full grid-cols-3",children:[i.jsx(dn,{value:"geral",children:"Informações Gerais"}),i.jsx(dn,{value:"financeiro",children:"Detalhes Financeiros"}),i.jsx(dn,{value:"historico",children:"Histórico"})]}),i.jsx(hn,{value:"geral",className:"space-y-4",children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{children:"Número do Contrato"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.numeroContrato})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Status"}),i.jsx(ke,{className:ve(u.status),children:Xe(u.status)})]})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Cliente"}),i.jsx("p",{className:"text-sm",children:u.nomeCliente}),i.jsx("p",{className:"text-sm text-muted-foreground",children:at(u.cpfCliente)})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Produto / Loja"}),i.jsx("p",{className:"text-sm",children:u.produto}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.loja})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Solicitado por"}),i.jsx("p",{className:"text-sm",children:u.requisitadoPor.nome}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.requisitadoPor.papel," -"," ",Mn(new Date(u.dataRequisicao),"dd/MM/yyyy 'às' HH:mm")]})]}),u.aprovadoPor&&i.jsxs("div",{children:[i.jsx(ue,{children:"Aprovado por"}),i.jsx("p",{className:"text-sm",children:u.aprovadoPor.nome}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.aprovadoPor.papel," -"," ",u.dataAprovacao&&Mn(new Date(u.dataAprovacao),"dd/MM/yyyy 'às' HH:mm")]})]}),u.motivoRejeicao&&i.jsxs(jt,{variant:"destructive",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsxs(At,{children:[i.jsx("strong",{children:"Motivo da Rejeição:"})," ",u.motivoRejeicao]})]}),u.observacoes&&i.jsxs("div",{children:[i.jsx(ue,{children:"Observações"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.observacoes})]})]})}),i.jsx(hn,{value:"financeiro",className:"space-y-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{children:"Valor Financiado"}),i.jsx("p",{className:"text-lg font-semibold",children:$e(u.valorFinanciado)})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Valor Líquido"}),i.jsx("p",{className:"text-lg font-semibold text-green-600",children:$e(u.valorLiquido)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{children:"IOF"}),i.jsx("p",{className:"text-sm",children:$e(u.valorIOF)})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"TAC"}),i.jsx("p",{className:"text-sm",children:$e(u.valorTAC)})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx(ue,{children:"Dados Bancários para Pagamento"}),i.jsxs("div",{className:"mt-2 space-y-2 rounded-lg bg-muted p-3",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Titular:"})," ",u.contaBancaria.titular]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Banco:"})," ",u.contaBancaria.banco]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Agência:"})," ",u.contaBancaria.agencia]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Conta:"})," ",u.contaBancaria.conta," (",u.contaBancaria.tipoConta,")"]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Forma de Pagamento:"})," ",u.formaPagamento.toUpperCase()]})]})]}),u.comprovante&&i.jsxs("div",{children:[i.jsx(ue,{children:"Comprovante de Pagamento"}),i.jsxs(se,{variant:"outline",className:"mt-2 w-full",onClick:()=>window.open(u.comprovante,"_blank"),children:[i.jsx(oa,{className:"mr-2 h-4 w-4"}),"Baixar Comprovante"]})]})]})}),i.jsxs(hn,{value:"historico",className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"mt-1",children:i.jsx(_n,{className:"h-4 w-4 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",children:"Solicitação Criada"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Por ",u.requisitadoPor.nome," em"," ",Mn(new Date(u.dataRequisicao),"dd/MM/yyyy 'às' HH:mm")]})]})]}),u.dataAprovacao&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"mt-1",children:i.jsx(ar,{className:"h-4 w-4 text-green-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",children:"Pagamento Aprovado"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Por ",u.aprovadoPor?.nome," em"," ",Mn(new Date(u.dataAprovacao),"dd/MM/yyyy 'às' HH:mm")]})]})]}),u.dataPagamento&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"mt-1",children:i.jsx(Lg,{className:"h-4 w-4 text-green-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",children:"Pagamento Realizado"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Em"," ",Mn(new Date(u.dataPagamento),"dd/MM/yyyy 'às' HH:mm")]})]})]}),u.motivoRejeicao&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"mt-1",children:i.jsx(Ea,{className:"h-4 w-4 text-red-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",children:"Pagamento Rejeitado"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.motivoRejeicao})]})]})]}),i.jsx("div",{className:"mt-4 border-t pt-4",children:i.jsxs(se,{className:"w-full",onClick:()=>e(`/credito/analise/${u.propostaId}`),children:[i.jsx(zt,{className:"mr-2 h-4 w-4"}),"Ver Proposta Completa"]})})]})]})})]}),i.jsx(mn,{open:f,onOpenChange:m,children:i.jsxs(tn,{children:[i.jsxs(rn,{children:[i.jsx(nn,{children:"Aprovar Pagamento"}),i.jsxs(qs,{children:["Você está prestes a aprovar o pagamento de"," ",u&&$e(u.valorLiquido)," para"," ",u?.nomeCliente,"."]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(jt,{children:[i.jsx(ur,{className:"h-4 w-4"}),i.jsx(At,{children:"Certifique-se de que todos os dados bancários foram verificados e estão corretos antes de aprovar."})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Observações (opcional)"}),i.jsx(Ra,{placeholder:"Adicione observações sobre a aprovação...",value:I,onChange:_e=>$(_e.target.value),className:"mt-2"})]})]}),i.jsxs(ca,{children:[i.jsx(se,{variant:"outline",onClick:()=>{m(!1),$("")},children:"Cancelar"}),i.jsx(se,{onClick:()=>{u&&ye.mutate({id:u.id,observacao:I})},disabled:ye.isPending,children:ye.isPending?"Aprovando...":"Aprovar Pagamento"})]})]})}),i.jsx(mn,{open:g,onOpenChange:x,children:i.jsxs(tn,{children:[i.jsxs(rn,{children:[i.jsx(nn,{children:"Rejeitar Pagamento"}),i.jsxs(qs,{children:["Informe o motivo da rejeição do pagamento para ",u?.nomeCliente,"."]})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(ue,{children:"Motivo da Rejeição*"}),i.jsx(Ra,{placeholder:"Descreva o motivo da rejeição...",value:O,onChange:_e=>D(_e.target.value),className:"mt-2",required:!0})]})}),i.jsxs(ca,{children:[i.jsx(se,{variant:"outline",onClick:()=>{x(!1),D("")},children:"Cancelar"}),i.jsx(se,{variant:"destructive",onClick:()=>{u&&O.trim()&&pe.mutate({id:u.id,motivo:O})},disabled:!O.trim()||pe.isPending,children:pe.isPending?"Rejeitando...":"Rejeitar Pagamento"})]})]})}),i.jsx(mn,{open:v,onOpenChange:y,children:i.jsxs(tn,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[i.jsxs(rn,{children:[i.jsxs(nn,{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Verificação de Segurança - Pagamento"]}),i.jsx(qs,{children:"Revise todos os detalhes antes de confirmar o pagamento do empréstimo ao cliente."})]}),Ee?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(ls,{className:"h-6 w-6 animate-spin"})}):J&&u?i.jsxs("div",{className:"space-y-4",children:[i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-3",children:i.jsx(de,{className:"text-base",children:"Informações do Pagamento"})}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(ue,{className:"text-sm",children:"Cliente"}),i.jsx("p",{className:"text-sm font-semibold",children:u.nomeCliente}),i.jsx("p",{className:"text-xs text-muted-foreground",children:at(u.cpfCliente)})]}),i.jsxs("div",{children:[i.jsx(ue,{className:"text-sm",children:"Valor a Pagar"}),i.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:$e(u.valorLiquido)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Valor Financiado: ",$e(u.valorFinanciado)]})]})]})})]}),i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-3",children:i.jsx(de,{className:"text-base",children:"Checklist de Verificação"})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[J.ccbAssinada?i.jsx(ar,{className:"h-4 w-4 text-green-600"}):i.jsx(Ea,{className:"h-4 w-4 text-red-600"}),i.jsx("span",{className:J.ccbAssinada?"text-green-700":"text-red-700",children:"CCB Assinada e Localizada"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[J.boletosGerados?i.jsx(ar,{className:"h-4 w-4 text-green-600"}):i.jsx(Ea,{className:"h-4 w-4 text-red-600"}),i.jsx("span",{className:J.boletosGerados?"text-green-700":"text-red-700",children:"Boletos Registrados no Inter"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[J.titularidadeConta?i.jsx(ar,{className:"h-4 w-4 text-green-600"}):i.jsx(ir,{className:"h-4 w-4 text-yellow-600"}),i.jsx("span",{className:J.titularidadeConta?"text-green-700":"text-yellow-700",children:"Titularidade da Conta"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-3",children:i.jsx(de,{className:"text-base",children:"Documentação"})}),i.jsx(re,{children:J.documentosCcb?.urlCcb?i.jsxs(se,{variant:"outline",size:"sm",className:"w-full",onClick:async()=>{try{console.log("[CCB] Buscando CCB assinada para proposta:",u.id);const _e=await xt.get(`/api/pagamentos/${u.id}/ccb-assinada`,{responseType:"blob"});if(console.log("[CCB] Resposta recebida:",_e),_e.data instanceof Blob){const St=_e.data,X=window.URL.createObjectURL(St);window.open(X,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(X),1e3),r({title:"CCB aberta",description:"O documento foi aberto em uma nova aba"})}else console.error("[CCB] Resposta não é um blob:",_e),r({title:"Erro ao abrir CCB",description:"Formato de resposta inesperado",variant:"destructive"})}catch(_e){console.error("[CCB] Erro ao buscar CCB assinada:",_e);let St="Erro ao carregar documento assinado";_e.response?.data?.error?St=_e.response.data.error:_e.message&&(St=_e.message),r({title:"Erro ao buscar CCB",description:St,variant:"destructive"})}},children:[i.jsx(zt,{className:"mr-2 h-4 w-4"}),"Ver CCB Assinada"]}):i.jsxs(jt,{variant:"destructive",className:"text-xs",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(At,{children:"CCB não encontrada. Verifique se foi assinada no ClickSign."})]})})]}),i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-3",children:i.jsx(de,{className:"text-base",children:"Conta de Destino"})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-1 rounded bg-gray-50 p-3 text-xs dark:bg-gray-800",children:u.contaBancaria.banco!=="N/A"?i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Banco:"})," ",u.contaBancaria.banco]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Ag:"})," ",u.contaBancaria.agencia," |"," ",i.jsx("strong",{children:"Conta:"})," ",u.contaBancaria.conta]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Titular:"})," ",u.contaBancaria.titular]})]}):J.dadosPagamento?.destino?.pix?i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Tipo:"})," PIX"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Chave:"})," ",J.dadosPagamento.destino.pix]})]}):i.jsx(jt,{variant:"destructive",className:"text-xs",children:i.jsx(At,{children:"Dados bancários não informados. Configure na proposta."})})})})]})]}),i.jsxs(ee,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950",children:[i.jsx(ie,{className:"pb-3",children:i.jsx(de,{className:"text-base text-red-800 dark:text-red-200",children:"Confirmação de Segurança"})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(ue,{className:"text-sm",children:"Senha de Confirmação* (Segurança Adicional)"}),i.jsx(Fe,{type:"password",placeholder:"Digite sua senha de segurança para pagamentos",value:H,onChange:_e=>z(_e.target.value),className:"mt-1"}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Esta é uma senha adicional de segurança para pagamentos, pode ser diferente da sua senha de login."})]}),i.jsxs("div",{children:[i.jsx(ue,{className:"text-sm",children:"Observações (opcional)"}),i.jsx(Ra,{placeholder:"Observações sobre o desembolso",value:q,onChange:_e=>V(_e.target.value),className:"mt-1 h-20"})]})]})]})]}):null,i.jsxs(ca,{className:"flex flex-col gap-2 pt-4 sm:flex-row",children:[i.jsx(se,{variant:"outline",size:"sm",onClick:()=>{y(!1),z(""),V("")},children:"Cancelar"}),i.jsxs(se,{variant:"destructive",size:"sm",onClick:()=>{d(null),y(!1),x(!0)},children:[i.jsx(Ea,{className:"mr-2 h-4 w-4"}),"Reprovar"]}),i.jsx(se,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{u&&H&&je.mutate({id:u.id,senha:H,observacoes:q})},disabled:!H||!J?.ccbAssinada||!J?.boletosGerados||je.isPending,children:je.isPending?i.jsxs(i.Fragment,{children:[i.jsx(ls,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirmando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ar,{className:"mr-2 h-4 w-4"}),"Confirmar Desembolso"]})})]})]})})]})})}function uIe(){const{toast:t}=Fr(),{user:e}=$a(),[r,n]=N.useState(""),[s,a]=N.useState("todos"),[o,l]=N.useState("todos"),[c,u]=N.useState(!1),[d,f]=N.useState(null),[m,g]=N.useState(!1),[x,v]=N.useState(""),[y,w]=N.useState(""),[_,A]=N.useState(""),[C,S]=N.useState(""),[E,P]=N.useState(!1),[R,O]=N.useState(!1),[D,I]=N.useState(null),[$,M]=N.useState(""),[U,H]=N.useState(""),[z,q]=N.useState(""),[V,W]=N.useState(null),[B,F]=N.useState(!1),[Y,oe]=N.useState(0),[xe,J]=N.useState(1),[Ee,ye]=N.useState(null),[je,pe]=N.useState(0),[Se,Oe]=N.useState(1),[ve,Xe]=N.useState([]),[$e,at]=N.useState([]),[Ft,rr]=N.useState([]),[_e,St]=N.useState([]),[X,ae]=N.useState(!1),[ce,Ce]=N.useState(!1),[K,we]=N.useState("Outros"),Ue=e?.role==="COBRANÇA",mt=e?.role==="ADMINISTRADOR",gt=e?.role==="FINANCEIRO",ge=mt||gt,{data:er,isLoading:nr,refetch:Ws}=nt({queryKey:["/api/inter/collections/proposal",d],enabled:!!d&&R,queryFn:async()=>Je(`/api/inter/collections/proposal/${d}`)}),An=Mt({mutationFn:async te=>Je("/api/inter/collections/batch-extend",{method:"PATCH",body:JSON.stringify(te)}),onSuccess:te=>{t({title:"Sucesso",description:te.message||"Vencimento(s) prorrogado(s) com sucesso"}),P(!1),at([]),vn()},onError:te=>{t({title:"Erro",description:te.message||"Falha ao prorrogar vencimento",variant:"destructive"})}}),Zn=Mt({mutationFn:async te=>Je("/api/inter/collections/settlement-discount",{method:"POST",body:JSON.stringify(te)}),onSuccess:te=>{t({title:"Sucesso",description:te.message||"Desconto de quitação aplicado com sucesso"}),O(!1),J(1),Xe([]),vn()},onError:te=>{t({title:"Erro",description:te.message||"Falha ao aplicar desconto de quitação",variant:"destructive"})}}),{data:bs,isLoading:Gs,refetch:vn}=nt({queryKey:["/api/cobrancas",s,o],queryFn:async()=>{const te=new URLSearchParams;return s!=="todos"&&te.append("status",s),o!=="todos"&&te.append("atraso",o),Je(`/api/cobrancas?${te.toString()}`)}}),{data:pa}=nt({queryKey:["/api/cobrancas/kpis"],queryFn:()=>Je("/api/cobrancas/kpis")});N.useEffect(()=>{console.log("🔄 [REALTIME] Configurando escuta para atualizações de cobranças");const te=tf(),st=te.channel("cobrancas-realtime-updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"propostas"},Ye=>{console.log("📡 [REALTIME] Evento de UPDATE recebido em propostas:",Ye),console.log("📡 [REALTIME] Dados alterados:",{id:Ye.new?.id,assinaturaEletronicaConcluida:Ye.new?.assinatura_eletronica_concluida,ccbGerado:Ye.new?.ccb_gerado}),tr.invalidateQueries({queryKey:["/api/cobrancas"]}),tr.invalidateQueries({queryKey:["/api/cobrancas/kpis"]}),Ye.new?.assinatura_eletronica_concluida===!0&&Ye.old?.assinatura_eletronica_concluida!==!0&&t({title:"Nova proposta assinada",description:"Uma nova proposta foi assinada e pode aparecer na lista",duration:3e3})}).on("postgres_changes",{event:"*",schema:"public",table:"inter_collections"},Ye=>{console.log("📡 [REALTIME] Evento recebido em inter_collections:",Ye),console.log("📡 [REALTIME] Tipo de evento:",Ye.eventType),console.log("📡 [REALTIME] Dados do boleto:",{propostaId:Ye.new?.proposta_id||Ye.old?.proposta_id,situacao:Ye.new?.situacao||Ye.old?.situacao,isActive:Ye.new?.is_active}),tr.invalidateQueries({queryKey:["/api/cobrancas"]}),tr.invalidateQueries({queryKey:["/api/cobrancas/kpis"]}),Ye.eventType==="INSERT"?(console.log("📡 [REALTIME] Novo boleto inserido - atualizando lista"),t({title:"Novos boletos gerados",description:"A lista de cobranças foi atualizada com novos boletos",duration:2e3})):Ye.eventType==="UPDATE"&&(Ye.new?.situacao==="CANCELADO"&&Ye.old?.situacao!=="CANCELADO"?(console.log("📡 [REALTIME] Boleto cancelado - verificando se proposta deve sair da lista"),t({title:"Boleto cancelado",description:"Um boleto foi cancelado e a lista foi atualizada",duration:2e3})):Ye.new?.situacao==="RECEBIDO"&&t({title:"✅ Pagamento recebido",description:`Boleto ${Ye.new?.seu_numero||""} foi pago`,duration:3e3}))}).subscribe(Ye=>{Ye==="SUBSCRIBED"?console.log("✅ [REALTIME] Conectado ao canal de atualizações de cobranças"):Ye==="CHANNEL_ERROR"?console.error("❌ [REALTIME] Erro ao conectar ao canal"):Ye==="TIMED_OUT"?console.error("⏱️ [REALTIME] Timeout ao conectar"):Ye==="CLOSED"&&console.log("🔌 [REALTIME] Canal fechado")});return()=>{console.log("🧹 [REALTIME] Removendo canal de escuta de cobranças"),te.removeChannel(st)}},[tr,t]);const{data:Xr,isLoading:Ud}=nt({queryKey:["/api/cobrancas/ficha",d],queryFn:()=>Je(`/api/cobrancas/${d}/ficha`),enabled:!!d&&m});N.useEffect(()=>{if(!m||!d){W(null),F(!1),oe(0);return}const te=async()=>{try{console.log(`[PAM V1.0 POLLING] Verificando status de sincronização para proposta ${d}`);const Ye=await Je(`/api/propostas/${d}/sync-status`,{method:"GET"});Ye.success&&(W(Ye.syncStatus),console.log(`[PAM V1.0 POLLING] Status: ${Ye.syncStatus} (${Ye.boletosSincronizados}/${Ye.totalBoletos})`),Ye.syncStatus==="em_andamento"&&Y<20?(F(!0),oe(Bn=>Bn+1)):(F(!1),Y>=20&&(console.log("[PAM V1.0 POLLING] Limite de tentativas atingido (20)"),t({title:"Sincronização demorada",description:"A sincronização está demorando mais que o esperado. Tente novamente em alguns instantes.",variant:"destructive"}))))}catch(Ye){console.error("[PAM V1.0 POLLING] Erro ao verificar status:",Ye),W("falhou"),F(!1)}};te();let st=null;return B&&(st=setInterval(te,3e3)),()=>{st&&clearInterval(st)}},[m,d,B,Y,t]);const Rl=async()=>{if(!(!d||!x.trim()||!K)){Ce(!0);try{await Je(`/api/propostas/${d}/observacoes`,{method:"POST",body:JSON.stringify({mensagem:x,tipo_acao:K})}),v(""),tr.invalidateQueries({queryKey:["/api/cobrancas/ficha",d]}),t({title:"Sucesso",description:"Observação salva com sucesso"})}catch(te){console.error("Erro ao salvar observação:",te),t({title:"Erro",description:"Não foi possível salvar a observação",variant:"destructive"})}finally{Ce(!1)}}};Mt({mutationFn:te=>Je(`/api/cobrancas/${d}/observacao`,{method:"POST",body:JSON.stringify(te)}),onSuccess:()=>{t({title:"Observação adicionada",description:"A observação foi registrada com sucesso."}),v(""),w(""),A(""),S(""),tr.invalidateQueries({queryKey:["/api/cobrancas/ficha"]})},onError:()=>{t({title:"Erro",description:"Não foi possível adicionar a observação.",variant:"destructive"})}});const Ki=(te,st)=>{navigator.clipboard.writeText(te),t({title:`${st} copiado!`,description:"Código copiado para a área de transferência."})},jy=te=>{if(!te)return"";if(!c){if(te.length===11)return`${te.substring(0,3)}.***.***-${te.substring(9)}`;if(te.length===14)return`${te.substring(0,2)}.****.****/****-${te.substring(12)}`}return te},Ay=async()=>{try{const te=await Je("/api/cobrancas/exportar/inadimplentes");if(!te||!te.inadimplentes||te.inadimplentes.length===0){t({title:"Sem dados para exportar",description:"Não há inadimplentes para exportar."});return}const st=Object.keys(te.inadimplentes[0]||{}),Ye=[st.join(","),...te.inadimplentes.map(Ks=>st.map(qd=>`"${Ks[qd]||""}"`).join(","))].join(`
`),Bn=new Blob([Ye],{type:"text/csv;charset=utf-8;"}),Yr=document.createElement("a");Yr.href=URL.createObjectURL(Bn),Yr.download=`inadimplentes_${Mn(new Date,"yyyy-MM-dd")}.csv`,Yr.click(),t({title:"Exportação concluída",description:`${te.total} registros exportados com sucesso.`})}catch{t({title:"Erro na exportação",description:"Não foi possível exportar os dados.",variant:"destructive"})}},zd=Array.isArray(bs)?bs?.filter(te=>{if(!r)return!0;const st=r.toLowerCase();return[te.nomeCliente,te.cpfCliente,te.numeroContrato,te.id,te.numero_proposta].filter(Boolean).some(Bn=>String(Bn).toLowerCase().includes(st))}):[],Ny=te=>{switch(te){case"em_dia":return"bg-green-100 text-green-800";case"inadimplente":return"bg-red-100 text-red-800";case"quitado":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},Ey=te=>{switch(te?.toUpperCase()){case"RECEBIDO":case"MARCADO_RECEBIDO":return"bg-green-100 text-green-800";case"CANCELADO":case"EXPIRADO":case"FALHA_EMISSAO":return"bg-gray-100 text-gray-800";case"ATRASADO":case"PROTESTO":return"bg-red-100 text-red-800";case"A_RECEBER":case"EM_PROCESSAMENTO":case"EMITIDO":return"bg-blue-100 text-blue-800";case"pago":return"bg-green-100 text-green-800";case"vencido":return"bg-red-100 text-red-800";case"pendente":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},Up=(te,st,Ye)=>{if(te)switch(te.toUpperCase()){case"RECEBIDO":case"MARCADO_RECEBIDO":case"PAGO":return"Pago";case"CANCELADO":case"EXPIRADO":case"FALHA_EMISSAO":return"Cancelado";case"ATRASADO":case"PROTESTO":return"Vencido";case"A_RECEBER":case"EM_PROCESSAMENTO":case"EMITIDO":return"Pendente";default:return te}return st==="pago"?"Pago":Ye?"Vencido":"Pendente"},Cy=te=>{if(te.interSituacao){const Yr=te.interSituacao.toUpperCase();if(Yr==="RECEBIDO"||Yr==="MARCADO_RECEBIDO")return{text:"Pago",color:"text-green-600"};if(Yr==="CANCELADO"||Yr==="EXPIRADO"||Yr==="FALHA_EMISSAO")return{text:"Cancelado",color:"text-gray-600"}}if(te.status==="quitado"||te.status==="pago")return{text:"Pago",color:"text-green-600"};const st=new Date,Ye=te.dataProximoVencimento?hU(te.dataProximoVencimento):null;if(!Ye)return{text:"Sem vencimento",color:"text-gray-500"};if(te.diasAtraso>0)return{text:`Vencido há ${te.diasAtraso} dias`,color:"text-red-600 font-semibold"};if(KPe(Ye))return{text:"Vence hoje",color:"text-orange-600 font-semibold"};const Bn=KTe(Ye,st);return Bn>0&&Bn<=7?{text:`Vence em ${Bn} dias`,color:"text-yellow-600"}:GPe(Ye)?{text:Mn(Ye,"dd/MM/yyyy"),color:"text-gray-600"}:{text:"Em dia",color:"text-green-600"}};return i.jsx(pt,{title:"Cobranças",children:i.jsxs("div",{className:"space-y-6",children:[Ue&&i.jsx(ee,{className:"border-orange-200 bg-orange-50",children:i.jsx(re,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jr,{className:"h-5 w-5 text-orange-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-orange-800",children:"Modo Cobrança Ativo"}),i.jsxs("p",{className:"text-sm text-orange-700",children:["Você está visualizando apenas contratos: ",i.jsx("strong",{children:"inadimplentes"}),","," ",i.jsx("strong",{children:"em atraso"})," ou que ",i.jsx("strong",{children:"vencem nos próximos 3 dias"}),"."]})]})]})})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Valor Total em Atraso"}),i.jsx(jr,{className:"h-4 w-4 text-red-500"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(pa?.valorTotalEmAtraso||0)}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[pa?.quantidadeContratosEmAtraso||0," contratos inadimplentes"]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Taxa de Inadimplência"}),i.jsx(So,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[pa?.taxaInadimplencia||0,"%"]}),i.jsx(On,{value:Number(pa?.taxaInadimplencia)||0,className:"mt-2"})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Valor Total da Carteira"}),i.jsx(Mc,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(pa?.valorTotalCarteira||0)}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[pa?.quantidadeTotalContratos||0," contratos ativos"]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Ações Rápidas"}),i.jsx(zk,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{className:"space-y-2",children:[i.jsxs(se,{variant:"outline",size:"sm",className:"w-full",onClick:Ay,children:[i.jsx(oa,{className:"mr-2 h-4 w-4"}),"Exportar Inadimplentes"]}),i.jsxs(se,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{console.log("[COBRANÇAS] Atualizando dados da API do Banco Inter..."),vn()},children:[i.jsx(ls,{className:"mr-2 h-4 w-4"}),"Atualizar"]})]})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{className:"text-lg",children:"Filtros de Pesquisa"})}),i.jsx(re,{children:i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(W_,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(Fe,{placeholder:"Buscar por nome, CPF, contrato...",value:r,onChange:te=>n(te.target.value),className:"pl-8","data-testid":"input-search-cobrancas"})]}),i.jsxs(Yt,{value:s,onValueChange:te=>a(te),children:[i.jsx(Ht,{"data-testid":"select-status-filter",children:i.jsx(Qt,{placeholder:"Status"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"todos",children:"Todos os Status"}),i.jsx(le,{value:"inadimplente",children:"Inadimplente"}),i.jsx(le,{value:"em_dia",children:"Em Dia"}),i.jsx(le,{value:"quitado",children:"Quitado"})]})]}),i.jsxs(Yt,{value:o,onValueChange:te=>l(te),children:[i.jsx(Ht,{"data-testid":"select-atraso-filter",children:i.jsx(Qt,{placeholder:"Dias de Atraso"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"todos",children:"Todos"}),i.jsx(le,{value:"1-15",children:"1-15 dias"}),i.jsx(le,{value:"30+",children:"Mais de 30 dias"})]})]}),i.jsx(se,{variant:"outline",onClick:()=>u(!c),"data-testid":"button-toggle-cpf",children:c?i.jsxs(i.Fragment,{children:[i.jsx(uje,{className:"mr-2 h-4 w-4"}),"Ocultar CPF"]}):i.jsxs(i.Fragment,{children:[i.jsx(wo,{className:"mr-2 h-4 w-4"}),"Mostrar CPF"]})})]})})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"Contratos para Cobrança"}),i.jsxs(Jt,{children:[zd?.length||0," contratos encontrados"]})]}),i.jsx(re,{children:i.jsx("div",{className:"rounded-md border",children:i.jsxs(pd,{children:[i.jsx(md,{children:i.jsxs(Dn,{children:[i.jsx(Lt,{children:"Contrato"}),i.jsx(Lt,{children:"Cliente"}),i.jsx(Lt,{children:"CPF"}),i.jsx(Lt,{children:"Telefone"}),i.jsx(Lt,{children:"Valor Total"}),i.jsx(Lt,{children:"Parcelas"}),i.jsx(Lt,{children:"Status Vencimento"}),i.jsx(Lt,{children:"Status"}),i.jsx(Lt,{children:"Ações"})]})}),i.jsx(gd,{children:Gs?i.jsx(Dn,{children:i.jsx(vt,{colSpan:9,className:"text-center",children:"Carregando..."})}):zd?.length===0?i.jsx(Dn,{children:i.jsx(vt,{colSpan:9,className:"text-center",children:"Nenhum contrato encontrado"})}):zd?.map(te=>i.jsxs(Dn,{className:te.diasAtraso>30?"bg-red-50":"",children:[i.jsx(vt,{className:"font-medium",children:te.numeroContrato}),i.jsx(vt,{children:te.nomeCliente}),i.jsx(vt,{children:jy(te.cpfCliente)}),i.jsx(vt,{children:te.telefoneCliente}),i.jsx(vt,{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(te.valorTotal)}),i.jsxs(vt,{children:[te.parcelasPagas,"/",te.quantidadeParcelas]}),i.jsx(vt,{children:(()=>{const st=Cy(te);return i.jsx("span",{className:st.color,children:st.text})})()}),i.jsx(vt,{children:i.jsx(ke,{className:Ny(te.status),children:te.status==="em_dia"?"Em Dia":te.status==="inadimplente"?"Inadimplente":"Quitado"})}),i.jsx(vt,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(se,{size:"sm",onClick:()=>{f(te.id),g(!0)},"data-testid":`button-ficha-${te.id}`,children:[i.jsx(zt,{className:"mr-2 h-4 w-4"}),"Ficha"]}),te.interCodigoSolicitacao&&i.jsxs(b2,{children:[i.jsx(w2,{asChild:!0,children:i.jsx(se,{size:"sm",variant:"ghost",children:i.jsx(cje,{className:"h-4 w-4"})})}),i.jsxs(dS,{align:"end",children:[i.jsxs(hl,{onClick:()=>{if(!ge){t({title:"Acesso Negado",description:"Apenas administradores e equipe financeira podem prorrogar vencimentos",variant:"destructive"});return}if(!["A_RECEBER","ATRASADO","EM_PROCESSAMENTO"].includes(te.interSituacao?.toUpperCase()||"")){t({title:"Ação não permitida",description:"Este boleto não pode ser modificado",variant:"destructive"});return}I(te),f(te.id),Je(`/api/inter/collections/proposal/${te.id}`).then(Ye=>{rr(Ye.boletosAtivos||[])}),P(!0)},disabled:!ge||["PAGO","CANCELADO","RECEBIDO"].includes(te.interSituacao?.toUpperCase()||""),children:[i.jsx(sje,{className:"mr-2 h-4 w-4"}),"Prorrogar Vencimento"]}),i.jsxs(hl,{onClick:()=>{if(!ge){t({title:"Acesso Negado",description:"Apenas administradores e equipe financeira podem aplicar descontos",variant:"destructive"});return}if(!["A_RECEBER","ATRASADO","EM_PROCESSAMENTO"].includes(te.interSituacao?.toUpperCase()||"")){t({title:"Ação não permitida",description:"Este boleto não pode ser modificado",variant:"destructive"});return}I(te),f(te.id),Je(`/api/inter/collections/proposal/${te.id}`).then(Ye=>{ye(Ye),pe((Ye.valorRestante||0)*.5)}),O(!0)},disabled:!ge||["PAGO","CANCELADO","RECEBIDO"].includes(te.interSituacao?.toUpperCase()||""),children:[i.jsx(EX,{className:"mr-2 h-4 w-4"}),"Aplicar Desconto"]})]})]})]})})]},te.id))})]})})})]}),i.jsx(mn,{open:E,onOpenChange:te=>{P(te),te||(at([]),M(""))},children:i.jsxs(tn,{className:"max-w-2xl",children:[i.jsxs(rn,{children:[i.jsx(nn,{children:"Prorrogar Vencimento de Boletos"}),i.jsx(qs,{children:"Selecione os boletos e escolha a nova data de vencimento"})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ue,{children:"Boletos Disponíveis"}),i.jsx("div",{className:"max-h-60 space-y-2 overflow-y-auto rounded-lg border p-2",children:Ft.length>0?Ft.map(te=>i.jsxs("div",{className:"flex cursor-pointer items-center space-x-3 rounded-lg p-2 hover:bg-muted",onClick:()=>{const st=te.codigoSolicitacao||"";$e.includes(st)?at(Ye=>Ye.filter(Bn=>Bn!==st)):st&&at(Ye=>[...Ye,st])},children:[i.jsx("div",{className:"flex h-5 w-5 items-center justify-center",children:$e.includes(te.codigoSolicitacao||"")?i.jsx(bje,{className:"h-5 w-5 text-primary"}):i.jsx("div",{className:"h-5 w-5 rounded border-2 border-gray-300"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm font-medium",children:["Parcela ",te.numeroParcela," -"," ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(te.valor??0)]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Vencimento atual:"," ",new Date(te.dataVencimento??new Date).toLocaleDateString("pt-BR")]})]})]},te.codigoSolicitacao)):i.jsx("p",{className:"p-4 text-center text-sm text-muted-foreground",children:"Carregando boletos ativos..."})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ue,{htmlFor:"nova-data",children:"Nova Data de Vencimento"}),i.jsx(Fe,{id:"nova-data",type:"date",value:$,onChange:te=>M(te.target.value),min:new Date().toISOString().split("T")[0]})]}),$e.length>0&&i.jsx("div",{className:"rounded-lg bg-muted p-3",children:i.jsxs("p",{className:"text-sm font-medium",children:[$e.length," boleto(s) selecionado(s)"]})})]}),i.jsxs(ca,{children:[i.jsx(se,{variant:"outline",onClick:()=>{P(!1),at([])},children:"Cancelar"}),i.jsx(se,{onClick:()=>{if($e.length===0){t({title:"Erro",description:"Selecione pelo menos um boleto",variant:"destructive"});return}if(!$){t({title:"Erro",description:"Selecione uma nova data de vencimento",variant:"destructive"});return}An.mutate({codigosSolicitacao:$e,novaDataVencimento:$})},disabled:An.isPending||$e.length===0,children:An.isPending?"Processando...":`Prorrogar ${$e.length} Boleto(s)`})]})]})}),i.jsx(mn,{open:R,onOpenChange:te=>{O(te),te||(J(1),ye(null),Xe([]))},children:i.jsxs(tn,{className:"max-h-[90vh] max-w-3xl overflow-y-auto",children:[i.jsxs(rn,{children:[i.jsxs(nn,{children:["Desconto para Quitação - Etapa ",xe," de 3"]}),i.jsxs(qs,{children:[xe===1&&"Análise da dívida atual",xe===2&&"Configurar novo valor e parcelamento",xe===3&&"Confirmar operação"]})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[xe===1&&i.jsx("div",{className:"space-y-4",children:nr||!Ee?i.jsx("div",{className:"flex items-center justify-center p-8",children:i.jsx(ls,{className:"h-8 w-8 animate-spin text-primary"})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2 rounded-lg bg-muted p-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Resumo da Dívida"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Total Financiado"}),i.jsx("p",{className:"text-lg font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ee.valorTotal)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Já Pago"}),i.jsx("p",{className:"text-lg font-bold text-green-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ee.valorPago??0)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Restante"}),i.jsx("p",{className:"text-lg font-bold text-orange-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ee.valorRestante??0)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Boletos Ativos"}),i.jsx("p",{className:"text-lg font-bold",children:Ee.totalBoletosAtivos})]})]})]}),(Ee.boletosAtivos?.length??0)>0&&i.jsxs("div",{className:"rounded-lg border p-4",children:[i.jsx("h4",{className:"mb-2 font-medium",children:"Boletos Ativos"}),i.jsx("div",{className:"max-h-40 space-y-2 overflow-y-auto",children:(Ee.boletosAtivos??[]).map((te,st)=>i.jsxs("div",{className:"flex justify-between rounded bg-muted p-2 text-sm",children:[i.jsxs("span",{children:["Parcela ",te.numeroParcela]}),i.jsx("span",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(te.valor)}),i.jsxs("span",{children:["Venc: ",new Date(te.dataVencimento).toLocaleDateString("pt-BR")]})]},st))})]})]})}),xe===2&&Ee&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ue,{htmlFor:"novo-valor",children:"Novo Valor para Quitação (R$)"}),i.jsx(Fe,{id:"novo-valor",type:"number",step:"0.01",value:je,onChange:te=>{const st=parseFloat(te.target.value);if(pe(st),st>0&&Se>0){const Ye=st/Se,Bn=[];for(let Yr=0;Yr<Se;Yr++){const Ks=new Date;Ks.setMonth(Ks.getMonth()+Yr+1),Bn.push({valor:Ye,dataVencimento:Ks.toISOString().split("T")[0]})}Xe(Bn)}},placeholder:"0.00",max:Ee.valorRestante}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Máximo:"," ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ee.valorRestante??0)]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ue,{htmlFor:"parcelas",children:"Quantidade de Parcelas"}),i.jsxs(Yt,{value:Se.toString(),onValueChange:te=>{const st=parseInt(te);if(Oe(st),je>0){const Ye=je/st,Bn=[];for(let Yr=0;Yr<st;Yr++){const Ks=new Date;Ks.setMonth(Ks.getMonth()+Yr+1),Bn.push({valor:Ye,dataVencimento:Ks.toISOString().split("T")[0]})}Xe(Bn)}},children:[i.jsx(Ht,{children:i.jsx(Qt,{})}),i.jsx(Wt,{children:[1,2,3,4,5,6,12,24].map(te=>i.jsxs(le,{value:te.toString(),children:[te," ",te===1?"parcela":"parcelas"]},te))})]})]}),je>0&&i.jsxs("div",{className:"rounded-lg bg-green-50 p-3",children:[i.jsxs("p",{className:"text-sm font-medium text-green-800",children:["Desconto aplicado:"," ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format((Ee.valorRestante??0)-je)]}),i.jsxs("p",{className:"text-xs text-green-600",children:["(",((1-je/(Ee.valorRestante??1))*100).toFixed(1),"% de desconto)"]})]}),ve.length>0&&i.jsxs("div",{className:"rounded-lg border p-3",children:[i.jsx("h4",{className:"mb-2 font-medium",children:"Novas Parcelas"}),i.jsx("div",{className:"max-h-40 space-y-1 overflow-y-auto",children:ve.map((te,st)=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{children:["Parcela ",st+1]}),i.jsx("span",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(te.valor)}),i.jsx("span",{children:new Date(te.dataVencimento).toLocaleDateString("pt-BR")})]},st))})]})]}),xe===3&&Ee&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(jr,{className:"mt-0.5 h-5 w-5 text-amber-600"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-amber-900",children:"Atenção!"}),i.jsx("p",{className:"mt-1 text-sm text-amber-700",children:"Esta operação irá:"}),i.jsxs("ul",{className:"mt-2 list-inside list-disc space-y-1 text-sm text-amber-700",children:[i.jsxs("li",{children:["Cancelar ",Ee.totalBoletosAtivos," boleto(s) ativo(s)"]}),i.jsxs("li",{children:["Criar ",Se," novo(s) boleto(s)"]}),i.jsxs("li",{children:["Aplicar desconto de"," ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format((Ee.valorRestante??0)-je)]})]})]})]})}),i.jsxs("div",{className:"space-y-3 rounded-lg bg-muted p-4",children:[i.jsx("h4",{className:"font-semibold",children:"Resumo Final"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Dívida Anterior"}),i.jsx("p",{className:"font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ee.valorRestante??0)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Novo Valor"}),i.jsx("p",{className:"font-medium text-green-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(je)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Desconto Total"}),i.jsx("p",{className:"font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format((Ee.valorRestante??0)-je)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Nova Quantidade de Parcelas"}),i.jsxs("p",{className:"font-medium",children:[Se,"x"]})]})]})]})]})]}),i.jsxs(ca,{children:[xe>1&&i.jsx(se,{variant:"outline",onClick:()=>J(xe-1),children:"Voltar"}),i.jsx(se,{variant:"outline",onClick:()=>{O(!1),J(1)},children:"Cancelar"}),xe<3?i.jsx(se,{onClick:()=>{xe===1&&Ee?J(2):xe===2&&je>0&&ve.length>0?J(3):t({title:"Erro",description:"Configure todos os campos necessários",variant:"destructive"})},disabled:xe===1&&!Ee||xe===2&&(!je||ve.length===0),children:"Próximo"}):i.jsx(se,{onClick:()=>{Zn.mutate({propostaId:d??"",desconto:(Ee?.valorRestante??0)-je,novasParcelas:ve})},disabled:Zn.isPending,className:"bg-green-600 hover:bg-green-700",children:Zn.isPending?"Processando...":"Confirmar Quitação"})]})]})}),i.jsx(mn,{open:m,onOpenChange:g,children:i.jsxs(tn,{className:"max-h-[90vh] max-w-4xl overflow-hidden",children:[i.jsxs(rn,{children:[i.jsx(nn,{children:"Ficha do Cliente - Dossiê de Cobrança"}),i.jsx(qs,{children:"Informações completas do cliente e histórico de cobrança"})]}),Ud?i.jsx("div",{className:"p-8 text-center",children:"Carregando ficha..."}):Xr?i.jsx(Xg,{className:"h-[70vh] pr-4",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center text-base",children:[i.jsx(El,{className:"mr-2 h-4 w-4"}),"Dados do Cliente"]})}),i.jsxs(re,{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx(ue,{className:"text-muted-foreground",children:"Nome"}),i.jsx("p",{className:"font-medium",children:Xr.cliente.nome})]}),i.jsxs("div",{children:[i.jsx(ue,{className:"text-muted-foreground",children:"CPF"}),i.jsx("p",{className:"font-medium",children:Xr.cliente.cpf})]}),i.jsxs("div",{children:[i.jsx(ue,{className:"text-muted-foreground",children:"Telefone"}),i.jsxs("p",{className:"flex items-center gap-2 font-medium",children:[Xr.cliente.telefone,i.jsx(se,{size:"sm",variant:"ghost",onClick:()=>Ki(Xr.cliente.telefone,"Telefone"),children:i.jsx(Nf,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{children:[i.jsx(ue,{className:"text-muted-foreground",children:"Email"}),i.jsx("p",{className:"font-medium",children:Xr.cliente.email})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx(ue,{className:"text-muted-foreground",children:"Endereço"}),i.jsx("p",{className:"font-medium",children:Xr.cliente.endereco})]})]})]}),Xr.referencias?.length>0&&i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center text-base",children:[i.jsx(Sje,{className:"mr-2 h-4 w-4"}),"Referências Pessoais"]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-2",children:Xr.referencias.map((te,st)=>i.jsxs("div",{className:"bg-muted/50 flex items-center justify-between rounded p-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:te.nomeCompleto}),i.jsx("p",{className:"text-sm text-muted-foreground",children:te.grauParentesco})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:te.telefone}),i.jsx(se,{size:"sm",variant:"ghost",onClick:()=>Ki(te.telefone,"Telefone"),children:i.jsx(Nf,{className:"h-3 w-3"})})]})]},te.id))})})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center text-base",children:[i.jsx(Mc,{className:"mr-2 h-4 w-4"}),"Resumo Financeiro"]})}),i.jsxs(re,{children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Xr.resumoFinanceiro.totalPago||0)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Pago"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-red-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Xr.resumoFinanceiro.totalVencido||0)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Vencido"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Xr.resumoFinanceiro.totalPendente||0)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Pendente"})]})]}),i.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"rounded bg-muted p-2 text-center",children:[i.jsx("p",{className:"text-lg font-semibold",children:Xr.parcelas?.filter(te=>te.status==="pago").length||0}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Parcelas Pagas"})]}),i.jsxs("div",{className:"rounded bg-muted p-2 text-center",children:[i.jsx("p",{className:"text-lg font-semibold",children:Xr.parcelas?.filter(te=>te.vencida).length||0}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Parcelas Vencidas"})]}),i.jsxs("div",{className:"rounded bg-muted p-2 text-center",children:[i.jsx("p",{className:"text-lg font-semibold",children:Xr.parcelas?.filter(te=>te.status==="pendente"&&!te.vencida).length||0}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Parcelas Pendentes"})]})]})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center text-base",children:[i.jsx(vje,{className:"mr-2 h-4 w-4"}),"Histórico de Observações"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"border-b pb-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"observacao-text",children:"Nova Observação"}),i.jsx(Ra,{id:"observacao-text",placeholder:"Digite sua observação sobre este cliente ou proposta...",value:x,onChange:te=>v(te.target.value),className:"min-h-[80px]"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Yt,{value:K,onValueChange:te=>we(te),children:[i.jsx(Ht,{className:"w-[250px]",children:i.jsx(Qt,{placeholder:"Selecione o status"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"Contato Realizado",children:"Contato Realizado"}),i.jsx(le,{value:"Negociação em Andamento",children:"Negociação em Andamento"}),i.jsx(le,{value:"Acordo Fechado",children:"Acordo Fechado"}),i.jsx(le,{value:"Monitoramento",children:"Monitoramento"}),i.jsx(le,{value:"Outros",children:"Outros"})]})]}),i.jsx(se,{onClick:Rl,disabled:!x.trim()||!K||ce,children:ce?i.jsxs(i.Fragment,{children:[i.jsx(un,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Observação"})]})]})}),Ud?i.jsxs("div",{className:"py-4 text-center",children:[i.jsx(un,{className:"mx-auto h-6 w-6 animate-spin"}),i.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Carregando histórico..."})]}):!Xr.observacoes||Xr.observacoes.length===0?i.jsx("div",{className:"py-4 text-center text-muted-foreground",children:"Nenhuma observação registrada ainda."}):i.jsx(Xg,{className:"h-[300px]",children:i.jsx("div",{className:"space-y-3 pr-4",children:Xr.observacoes.map(te=>i.jsx("div",{className:"space-y-2 rounded-lg border p-3",children:i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ke,{variant:te.tipoContato==="Acordo Fechado"?"default":te.tipoContato==="Contato Realizado"?"secondary":te.tipoContato==="Negociação em Andamento"?"outline":"secondary",children:te.tipoContato}),i.jsx("span",{className:"text-xs text-muted-foreground",children:Mn(new Date(te.createdAt??new Date),"dd/MM/yyyy 'às' HH:mm")})]}),i.jsx("p",{className:"mt-2 text-sm",children:te.observacao}),i.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Por: ",te.userName]})]})})},te.id))})})]})})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(de,{className:"flex items-center text-base",children:[i.jsx(zk,{className:"mr-2 h-4 w-4"}),"Detalhamento de Parcelas"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(se,{size:"sm",variant:"outline",onClick:async()=>{try{t({title:"Gerando carnê...",description:"Compilando carnê consolidado de boletos"});const te=await Je(`/api/propostas/${d}/gerar-carne`,{method:"POST"});if(te.success)if(te.existingFile&&te.data?.url)console.log("[CARNE] Carnê já existente encontrado. Iniciando download..."),window.open(te.data.url,"_blank"),t({title:"Download iniciado",description:"O carnê já estava pronto."});else if(te.jobId)console.log("[CARNE] Geração de novo carnê iniciada. Job ID:",te.jobId),t({title:"Carnê em processamento",description:"Gerando carnê consolidado... Aguarde a conclusão."});else throw new Error("Resposta da API inválida - sem data.url nem jobId.");else t({title:"Erro na geração",description:te.message||"Falha ao gerar carnê consolidado",variant:"destructive"})}catch{t({title:"Erro ao gerar carnê",description:"Não foi possível gerar o carnê consolidado",variant:"destructive"})}},title:"Gerar e baixar carnê consolidado de todos os boletos (ação secundária)",children:[i.jsx(zt,{className:"mr-2 h-3 w-3"}),"Carnê Consolidado"]}),i.jsxs(se,{size:"sm",variant:"outline",onClick:async()=>{try{t({title:"Sincronizando...",description:"Atualizando status das parcelas com o Banco Inter"});const te=await Je(`/api/cobrancas/sincronizar/${d}`,{method:"POST"});t({title:"Sincronização concluída",description:`${te.updated||0} parcelas atualizadas`}),tr.invalidateQueries({queryKey:["/api/cobrancas/ficha",d]})}catch{t({title:"Erro na sincronização",description:"Não foi possível sincronizar com o Banco Inter",variant:"destructive"})}},title:"Sincronizar status das parcelas com o Banco Inter",children:[i.jsx(ls,{className:"mr-2 h-3 w-3"}),"Atualizar Status"]})]})]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-2",children:Xr.parcelas?.map(te=>i.jsx("div",{className:`rounded border p-3 ${te.vencida?"border-red-300 bg-red-50":te.status==="pago"?"border-green-300 bg-green-50":"border-gray-200"}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:["Parcela ",te.numeroParcela," -"," ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(te.valorParcela))]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vencimento:"," ",Mn(hU(te.dataVencimento),"dd/MM/yyyy"),te.diasAtraso&&te.diasAtraso>0&&i.jsxs("span",{className:"ml-2 font-semibold text-red-600",children:["(",te.diasAtraso," dias de atraso)"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yY,{children:i.jsxs(KNe,{children:[i.jsx(XNe,{asChild:!0,children:i.jsxs(se,{size:"sm",variant:"outline",disabled:!te.pixCopiaECola,onClick:()=>{te.pixCopiaECola?Ki(te.pixCopiaECola,"PIX"):t({title:"PIX não disponível",description:"PIX não fornecido pelo banco para esta parcela",variant:"destructive"})},children:[i.jsx(TX,{className:"mr-2 h-3 w-3"}),"Copiar PIX"]})}),i.jsx(xY,{children:i.jsx("p",{children:te.pixCopiaECola?"Copiar código PIX para pagamento":"PIX não fornecido pelo banco para esta parcela"})})]})}),i.jsxs(se,{size:"sm",variant:"outline",disabled:!te.codigoSolicitacao,onClick:async()=>{if(!te.codigoSolicitacao){t({title:"PDF não disponível",description:"Código de solicitação não encontrado para esta parcela",variant:"destructive"});return}try{t({title:"Abrindo PDF...",description:`Abrindo boleto da parcela ${te.numeroParcela} em nova guia`});const st=`/api/inter/collections/${d}/${te.codigoSolicitacao}/pdf`;window.open(st,"_blank"),t({title:"PDF aberto",description:`Boleto da parcela ${te.numeroParcela} aberto em nova guia`})}catch(st){console.error("[PDF VIEW] Erro ao abrir PDF individual:",st),st?.message?.includes("PDF_NOT_AVAILABLE")||st?.message?.includes("404")?t({title:"PDF não sincronizado",description:"O PDF ainda não foi sincronizado. Tente 'Atualizar Status' primeiro.",variant:"destructive"}):st?.message?.includes("BOLETO_NOT_FOUND")?t({title:"Boleto não encontrado",description:"Boleto não encontrado no sistema do banco.",variant:"destructive"}):st?.message?.includes("401")||st?.message?.includes("Token")?t({title:"Erro de autenticação",description:"Sessão expirada. Faça login novamente.",variant:"destructive"}):t({title:"Erro ao abrir PDF",description:"Não foi possível abrir o PDF do boleto.",variant:"destructive"})}},title:`Visualizar PDF do boleto da parcela ${te.numeroParcela} em nova guia`,children:[i.jsx(wo,{className:"mr-1.5 h-3 w-3"}),"Visualizar PDF"]}),i.jsx(ke,{className:Ey(te.interSituacao||te.status),title:`Status no Banco Inter: ${te.interSituacao||"Não sincronizado"}`,children:Up(te.interSituacao,te.status,te.vencida)}),te.interSituacao!=="PAGO"&&te.codigoSolicitacao&&i.jsxs(se,{size:"sm",variant:"secondary",onClick:async()=>{try{(await Je(`/api/cobrancas/parcelas/${te.codigoSolicitacao}/marcar-pago`,{method:"PATCH"})).success&&(t({title:"Parcela marcada como paga",description:`Parcela ${te.numeroParcela} foi marcada como paga com sucesso`}),tr.invalidateQueries({queryKey:["/api/cobrancas/ficha",d]}),tr.invalidateQueries({queryKey:["/api/cobrancas"]}),tr.invalidateQueries({queryKey:["/api/cobrancas/kpis"]}))}catch(st){console.error("Erro ao marcar como pago:",st),t({title:"Erro",description:"Não foi possível marcar a parcela como paga",variant:"destructive"})}},title:"Marcar esta parcela como paga manualmente",children:[i.jsx(ar,{className:"mr-1.5 h-3 w-3"}),"Marcar Pago"]})]})]})},te.id))})})]})]})}):i.jsx("div",{className:"p-8 text-center",children:"Erro ao carregar ficha"}),i.jsx(ca,{children:i.jsx(se,{variant:"outline",onClick:()=>g(!1),children:"Fechar"})})]})})]})})}const _U=({propostaId:t,etapa:e,titulo:r,descricao:n,concluida:s,habilitada:a,onUpdate:o})=>{const{toast:l}=Fr(),c=ys(),u=Mt({mutationFn:async f=>await xt.patch(`/api/propostas/${t}/etapa-formalizacao`,{etapa:e,concluida:f}),onSuccess:()=>{l({title:"Etapa atualizada",description:`${r} foi ${s?"desmarcada":"marcada"} com sucesso`}),c.invalidateQueries({queryKey:[`/api/propostas/${t}`]}),c.invalidateQueries({queryKey:["/api/propostas/formalizacao"]}),o&&o()},onError:f=>{const m=f instanceof Error?f.message:"Ocorreu um erro ao atualizar a etapa";l({title:"Erro ao atualizar etapa",description:m,variant:"destructive"})}}),d=()=>{a&&u.mutate(!s)};return i.jsxs(ee,{className:`p-4 ${a?"":"opacity-50"} ${s?"border-green-700 bg-green-900/20":"border-gray-700 bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"mt-1",children:s?i.jsx(ar,{className:"h-5 w-5 text-green-500"}):a?i.jsx(_n,{className:"h-5 w-5 text-blue-400"}):i.jsx(ir,{className:"h-5 w-5 text-gray-500"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-medium text-white",children:r}),i.jsx("p",{className:"mt-1 text-sm text-gray-400",children:n}),!a&&!s&&i.jsxs("p",{className:"mt-2 flex items-center text-xs text-yellow-500",children:[i.jsx(ir,{className:"mr-1 h-3 w-3"}),"Complete as etapas anteriores primeiro"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(kS,{checked:s,onCheckedChange:d,disabled:!a||u.isPending,className:"data-[state=checked]:border-green-600 data-[state=checked]:bg-green-600"}),i.jsx(se,{variant:s?"secondary":"default",size:"sm",onClick:d,disabled:!a||u.isPending,children:u.isPending?"Atualizando...":s?"Desmarcar":"Marcar como Concluída"})]})]}),e==="ccb_gerado"&&s&&i.jsx("div",{className:"mt-3 rounded-md border border-blue-700 bg-blue-900/20 p-3",children:i.jsx("p",{className:"text-xs text-blue-300",children:"✓ CCB gerada automaticamente. O documento será enviado para assinatura eletrônica."})}),e==="assinatura_eletronica"&&s&&i.jsx("div",{className:"mt-3 rounded-md border border-purple-700 bg-purple-900/20 p-3",children:i.jsx("p",{className:"text-xs text-purple-300",children:"✓ Documento enviado para ClickSign. Aguardando assinatura do cliente."})}),e==="biometria"&&s&&i.jsx("div",{className:"mt-3 rounded-md border border-green-700 bg-green-900/20 p-3",children:i.jsx("p",{className:"text-xs text-green-300",children:"✓ Biometria validada. Boletos gerados para pagamento."})})]})};function Ot({className:t,...e}){return i.jsx("div",{className:Ie("animate-pulse rounded-md bg-muted",t),...e})}function dIe({proposalId:t,onCCBGenerated:e}){const[r,n]=N.useState(!1),s=ys(),{user:a}=$a(),{data:o,isLoading:l,error:c}=nt({queryKey:[`/api/formalizacao/${t}/ccb`],refetchInterval:r?2e3:!1}),{data:u}=nt({queryKey:[`/api/propostas/${t}`],select:y=>({caminhoCcbAssinado:y?.caminhoCcbAssinado||y?.caminho_ccb_assinado,dataAssinatura:y?.dataAssinatura||y?.data_assinatura})}),d=Mt({mutationFn:async()=>(n(!0),Je("/api/formalizacao/generate-ccb",{method:"POST",body:JSON.stringify({proposalId:t})})),onSuccess:()=>{Ls({title:"CCB Gerado!",description:"O documento foi gerado com sucesso.",variant:"default"}),s.invalidateQueries({queryKey:[`/api/formalizacao/${t}/ccb`]}),s.invalidateQueries({queryKey:[`/api/propostas/${t}/ccb-url`]}),s.invalidateQueries({queryKey:["proposta",t]}),s.invalidateQueries({queryKey:["formalizacao-status",t]}),n(!1),e?.(),setTimeout(()=>{s.refetchQueries({queryKey:[`/api/formalizacao/${t}/ccb`]})},500)},onError:y=>{n(!1);const w=y instanceof Error?y.message:"Ocorreu um erro ao gerar o documento.";Ls({title:"Erro ao gerar CCB",description:w,variant:"destructive"})}}),f=Mt({mutationFn:async()=>(n(!0),Je(`/api/formalizacao/${t}/regenerate-ccb`,{method:"POST"})),onSuccess:()=>{Ls({title:"CCB Regenerado!",description:"O documento foi regenerado com sucesso com o novo template.",variant:"default"}),s.invalidateQueries({queryKey:[`/api/formalizacao/${t}/ccb`]}),s.invalidateQueries({queryKey:[`/api/propostas/${t}/ccb-url`]}),s.invalidateQueries({queryKey:["proposta",t]}),s.invalidateQueries({queryKey:["formalizacao-status",t]}),n(!1),setTimeout(()=>{s.refetchQueries({queryKey:[`/api/formalizacao/${t}/ccb`]})},500)},onError:y=>{n(!1);const w=y instanceof Error?y.message:"Ocorreu um erro ao regenerar o documento.";Ls({title:"Erro ao regenerar CCB",description:w,variant:"destructive"})}}),m=()=>{if(o?.signedUrl){const y=`${o.signedUrl}&t=${Date.now()}`;window.open(y,"_blank")}},g=()=>{if(s.refetchQueries({queryKey:[`/api/formalizacao/${t}/ccb`]}),o?.signedUrl){const y=`${o.signedUrl}&t=${Date.now()}`;window.open(y,"_blank")}},x=async()=>{try{const y=await Je(`/api/formalizacao/${t}/ccb-assinada`);y.publicUrl?window.open(y.publicUrl,"_blank"):Ls({title:"CCB Assinada não disponível",description:y.message||"O documento assinado ainda não está disponível",variant:"destructive"})}catch(y){console.error("Erro ao visualizar CCB assinada:",y),Ls({title:"Erro",description:"Erro ao visualizar CCB assinada. Tente novamente.",variant:"destructive"})}};if(l)return i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"h-5 w-5"}),"Cédula de Crédito Bancário (CCB)"]})}),i.jsx(re,{children:i.jsx(Ot,{className:"h-32 w-full"})})]});if(c)return i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"h-5 w-5"}),"Cédula de Crédito Bancário (CCB)"]})}),i.jsx(re,{children:i.jsx(jt,{variant:"destructive",children:i.jsx(At,{children:"Erro ao carregar status do CCB. Por favor, tente novamente."})})})]});const v=o&&o.signedUrl;return i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"h-5 w-5"}),"Cédula de Crédito Bancário (CCB)"]}),i.jsx(Jt,{children:v?`Gerado em ${Mn(new Date(o.generatedAt),"dd/MM/yyyy 'às' HH:mm",{locale:dd})}`:"Documento ainda não gerado"})]}),i.jsx(re,{children:v?i.jsxs("div",{className:"space-y-4",children:[i.jsxs(jt,{className:"border-green-200 bg-green-50",children:[i.jsx(ar,{className:"h-4 w-4 text-green-600"}),i.jsx(At,{className:"text-green-800",children:"CCB gerado com sucesso e pronto para assinatura."})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[i.jsx("p",{className:"mb-3 text-sm text-gray-600",children:"Documento disponível para visualização e download"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs(se,{variant:"outline",size:"sm",onClick:g,className:"flex items-center gap-2","data-testid":"button-view-ccb-original",children:[i.jsx(wo,{className:"h-4 w-4"}),"Ver CCB Original"]}),u?.caminhoCcbAssinado&&i.jsxs(se,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2 border-green-600 text-green-600 hover:bg-green-50","data-testid":"button-view-ccb-assinada",children:[i.jsx(ur,{className:"h-4 w-4"}),"Ver CCB Assinada"]}),i.jsxs(se,{variant:"outline",size:"sm",onClick:m,className:"flex items-center gap-2","data-testid":"button-download-ccb",children:[i.jsx(oa,{className:"h-4 w-4"}),"Baixar PDF Original"]}),u?.caminhoCcbAssinado&&a?.role==="ADMINISTRADOR"&&i.jsxs(se,{variant:"outline",size:"sm",onClick:async()=>{try{const y=await Je(`/api/formalizacao/${t}/ccb-assinada`);if(y.publicUrl){const w=document.createElement("a");w.href=y.publicUrl,w.download=`CCB_Assinada_${t}.pdf`,w.click()}}catch{Ls({title:"Erro ao baixar",description:"Erro ao baixar CCB assinada",variant:"destructive"})}},className:"flex items-center gap-2 border-purple-600 text-purple-600 hover:bg-purple-50","data-testid":"button-download-ccb-assinada",children:[i.jsx(oa,{className:"h-4 w-4"}),"Baixar CCB Assinada"]}),i.jsxs(se,{variant:"outline",size:"sm",onClick:()=>f.mutate(),disabled:f.isPending||r,className:"flex items-center gap-2 border-blue-500 text-blue-600 hover:bg-blue-50","data-testid":"button-regenerate-ccb",children:[i.jsx(ls,{className:`h-4 w-4 ${r?"animate-spin":""}`}),r?"Gerando...":"Gerar CCB Novamente"]})]})]}),i.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[i.jsx("p",{children:"• Documento preenchido com os dados da proposta"}),i.jsx("p",{children:"• Pronto para envio à assinatura eletrônica"}),i.jsx("p",{children:"• Formato PDF com campos permanentes"}),i.jsxs("div",{className:"mt-3 rounded border border-blue-200 bg-blue-50 p-3 text-blue-700",children:[i.jsx("p",{className:"text-sm font-medium",children:"✅ Nova Arquitetura CCB:"}),i.jsx("p",{className:"text-xs",children:"Agora usando pdf-lib para preservar 100% do template original com logo e formatação."}),i.jsx("p",{className:"mt-1 text-xs",children:'Clique em "Gerar CCB Novamente" para criar nova versão com dados atualizados.'})]})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx(jt,{children:i.jsx(At,{children:"A CCB será gerada usando o template padrão com os dados da proposta. Este é o primeiro passo do processo de formalização."})}),i.jsx(se,{onClick:()=>d.mutate(),disabled:d.isPending||r,className:"w-full","data-testid":"button-generate-ccb",children:r?i.jsxs(i.Fragment,{children:[i.jsx(ls,{className:"mr-2 h-4 w-4 animate-spin"}),"Gerando CCB..."]}):i.jsxs(i.Fragment,{children:[i.jsx(zt,{className:"mr-2 h-4 w-4"}),"Gerar CCB"]})}),i.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[i.jsx("p",{children:"• O documento será gerado automaticamente"}),i.jsx("p",{children:"• Todos os campos serão preenchidos com os dados atuais"}),i.jsx("p",{children:"• Após geração, você poderá visualizar e baixar o PDF"}),i.jsxs("div",{className:"mt-3 rounded border border-yellow-200 bg-yellow-50 p-3 text-yellow-700",children:[i.jsx("p",{className:"text-sm font-medium",children:"📄 Template Original:"}),i.jsx("p",{className:"text-xs",children:"O sistema usará o template PDF personalizado da Simpix (server/templates/template_ccb.pdf) e preencherá os campos em cima do documento original."})]})]})]})})]})}const hIe=ci({status:Hg(["aprovado","documentos_enviados","CCB_GERADA","AGUARDANDO_ASSINATURA","ASSINATURA_PENDENTE","ASSINATURA_CONCLUIDA","BOLETOS_EMITIDOS","PAGAMENTO_PENDENTE","PAGAMENTO_PARCIAL","PAGAMENTO_CONFIRMADO"]).optional(),documentosAdicionais:Vg(br()).optional(),contratoGerado:nO().optional(),contratoAssinado:nO().optional(),observacoesFormalização:br().optional()});function fIe(){const[,t]=qi(),e=ys(),{user:r}=$a(),n=(v,y,w)=>{if(!v||v==="null"||v==="undefined")return{};if(typeof v=="string"&&v.trim()!=="")try{return JSON.parse(v)}catch(_){return console.warn(`Erro ao fazer parse de ${y} para proposta ${w}:`,_),{}}return typeof v=="object"?v||{}:{}},{data:s,isLoading:a,error:o}=nt({queryKey:["/api/propostas/formalizacao"],queryFn:async()=>{console.log("Fazendo requisição para /api/propostas/formalizacao");const v=await Je("/api/propostas/formalizacao");console.log("Resposta do endpoint formalizacao:",v);const y=v.map(w=>({...w,cliente_data:n(w.cliente_data,"cliente_data",w.id),condicoes_data:n(w.condicoes_data,"condicoes_data",w.id)}));return console.log("Propostas com dados parseados:",y),y}});o&&console.error("Erro na query de formalização:",o);const l=v=>{const y=typeof v=="string"?parseFloat(v):v;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y)},c=v=>v?new Date(v).toLocaleDateString("pt-BR"):"N/A",u=v=>({aprovado:"bg-green-500",documentos_enviados:"bg-blue-500",CCB_GERADA:"bg-purple-500",ASSINATURA_CONCLUIDA:"bg-indigo-500",BOLETOS_EMITIDOS:"bg-orange-500",PAGAMENTO_CONFIRMADO:"bg-green-600"})[v]||"bg-gray-500",d=v=>({aprovado:"Aprovado",documentos_enviados:"Documentos Enviados",CCB_GERADA:"CCB Gerada",ASSINATURA_CONCLUIDA:"Assinatura Concluída",BOLETOS_EMITIDOS:"Boletos Emitidos",PAGAMENTO_CONFIRMADO:"Pagamento Confirmado"})[v]||v,f=s||[];if(console.log("🔍 [PAM V1.0 DIAGNÓSTICO] FormalizacaoList - Estado atual:",{isLoading:a,hasError:!!o,totalPropostas:f.length,propostas:f,primeiraPropostaStatus:f[0]?.status||"NENHUMA"}),a)return i.jsx(pt,{title:"Formalização",children:i.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((v,y)=>i.jsx(ee,{className:"animate-pulse border-gray-200 bg-gray-100 dark:border-gray-700 dark:bg-gray-800",children:i.jsxs(re,{className:"p-6",children:[i.jsx("div",{className:"mb-4 h-6 rounded bg-gray-300 dark:bg-gray-700"}),i.jsx("div",{className:"mb-2 h-4 rounded bg-gray-300 dark:bg-gray-700"}),i.jsx("div",{className:"h-4 w-3/4 rounded bg-gray-300 dark:bg-gray-700"})]})},y))})});const m=()=>{e.invalidateQueries({queryKey:["/api/propostas/formalizacao"]})},g=()=>"Propostas em Formalização",x=()=>"Acompanhe o processo de formalização das propostas aprovadas";return i.jsx(pt,{title:g(),actions:i.jsx(Tp,{onRefresh:m,isLoading:a,variant:"ghost"}),children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:g()}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:x()})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total em Formalização"}),i.jsx("p",{className:"text-2xl font-bold text-blue-400",children:f.length})]})})]}),i.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3 lg:grid-cols-5",children:[{status:"aprovado",label:"Aprovado",color:"bg-green-400"},{status:"documentos_enviados",label:"Docs Enviados",color:"bg-blue-500"},{status:"CCB_GERADA",label:"Contratos Prep.",color:"bg-purple-500"},{status:"ASSINATURA_CONCLUIDA",label:"Assinados",color:"bg-indigo-500"},{status:"BOLETOS_EMITIDOS",label:"Pronto Pag.",color:"bg-orange-500"}].map(v=>{const y=f.filter(w=>w.status===v.status).length;return i.jsx(ee,{className:"border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800",children:i.jsxs(re,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:`h-3 w-3 rounded-full ${v.color}`}),i.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y})]}),i.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:v.label})]})},v.status)})}),i.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:f.map(v=>(console.log("🔍 [PAM V1.0 DIAGNÓSTICO] Renderizando proposta:",{id:v.id,status:v.status,statusColor:u(v.status),statusText:d(v.status),clienteData:v.cliente_data,userRole:r?.role}),i.jsx(ee,{className:"cursor-pointer border-gray-200 bg-white transition-shadow hover:shadow-lg dark:border-gray-700 dark:bg-gray-800",children:i.jsxs(re,{className:"p-6",children:[i.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["#",v.id]}),i.jsx(ke,{className:`${u(v.status)} text-white`,children:d(v.status)})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cliente"}),i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:n(v.cliente_data,"cliente_data",v.id)?.nome||"Nome não informado"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor Aprovado"}),i.jsx("p",{className:"font-bold text-green-400",children:l(n(v.condicoes_data,"condicoes_data",v.id)?.valor||0)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data da Aprovação"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:c(v.data_aprovacao||v.created_at)})]})]}),i.jsx("div",{className:"mt-4 border-t pt-4",children:i.jsx(se,{onClick:()=>t(`/formalizacao/acompanhamento/${v.id}`),className:"w-full",variant:r?.role==="ATENDENTE"&&(v.status==="aprovado"||v.status==="documentos_enviados")?"default":"outline",children:r?.role==="ATENDENTE"&&(v.status==="aprovado"||v.status==="documentos_enviados")?"Ação Necessária":"Acompanhar"})})]})},v.id)))}),f.length===0&&i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(zt,{className:"mx-auto mb-4 h-16 w-16 text-gray-400"}),i.jsx("p",{className:"text-lg text-gray-500",children:"Nenhuma proposta em formalização"}),i.jsx("p",{className:"mt-2 text-gray-400",children:"Propostas aprovadas aparecerão aqui"})]})]})})}function SU(){const[,t]=F_("/formalizacao/acompanhamento/:id"),[,e]=qi(),[r,n]=N.useState("timeline"),{toast:s}=Fr(),a=ys(),{user:o}=$a(),[l,c]=N.useState(null),[u,d]=N.useState(!1),[f,m]=N.useState(null),[g,x]=N.useState(!1),[v,y]=N.useState(!1),[w,_]=N.useState(null),[A,C]=N.useState(!1),[S,E]=N.useState(!1),[P,R]=N.useState(null),[O,D]=N.useState(0),[I,$]=N.useState([]),[M,U]=N.useState(null),[H,z]=N.useState(null),[q,V]=N.useState(null),[W,B]=N.useState(!1),[F,Y]=N.useState({exists:!1,url:null,fileName:null,isLoading:!0}),oe=t?.id,xe=async()=>{if(oe){Y(K=>({...K,isLoading:!0}));try{const K=await Je(`/api/propostas/${oe}/carne-status`);Y({exists:K.carneExists||!1,url:K.url||null,fileName:K.fileName||null,isLoading:!1}),K.carneExists&&K.url&&(R(K.url),U({hasCarnet:!0,url:K.url,fileName:K.fileName||null,totalBoletos:pe?.length||0}))}catch(K){console.error("Erro ao verificar status do carnê:",K),Y({exists:!1,url:null,fileName:null,isLoading:!1})}}},{data:J,isLoading:Ee,refetch:ye}=nt({queryKey:["/api/propostas",oe,"formalizacao"],queryFn:async()=>await Je(`/api/propostas/${oe}/formalizacao`),enabled:!!oe,staleTime:60*1e3,refetchOnWindowFocus:!1}),je=async()=>{if(oe){B(!0);try{const K=await Je(`/api/propostas/${oe}/storage-status`),we=K.totalParcelas||0,Ue=K.fileCount||0,mt=K.carneExists||!1,gt=K.carneUrl||null,ge=K.syncStatus==="nenhum",er=K.syncStatus==="incompleto",nr=[];if(K.boletosNoStorage&&we>0)for(let Ws=1;Ws<=we;Ws++){const An=`boleto-${Ws}`;K.boletosNoStorage.includes(An)||nr.push(An)}return V({totalBoletos:we,boletosInStorage:Ue,missingBoletos:nr,hasCarnet:mt,carnetUrl:gt,needsSync:ge,needsCorrection:er}),mt&&gt&&(U({hasCarnet:!0,url:gt,fileName:K.carneFileName||null,totalBoletos:we}),R(gt),D(we)),K}catch(K){return console.error("[STORAGE STATUS] Erro ao verificar status:",K),null}finally{B(!1)}}},{data:pe}=nt({queryKey:["/api/inter/collections",oe],queryFn:async()=>{if(!oe)return[];console.log(`[INTER QUERY] Buscando boletos para proposta: ${oe}`);const K=await Je(`/api/inter/collections/${oe}`);return console.log(`[INTER QUERY] Boletos encontrados: ${Array.isArray(K)?K.length:0}`),Array.isArray(K)?K:[]},enabled:!!oe&&!!J&&(J?.status==="ASSINATURA_CONCLUIDA"||J?.interBoletoGerado),staleTime:120*1e3,refetchOnWindowFocus:!1,retry:1});N.useEffect(()=>{oe&&pe&&pe.length>0&&je()},[oe,pe,je]),N.useEffect(()=>{J&&oe&&pe&&pe.length>0&&xe()},[J,oe,pe,xe]);const Se=si({resolver:ai(hIe),defaultValues:{status:J?.status,documentosAdicionais:J?.documentosAdicionais||[],contratoGerado:J?.contratoGerado||!1,contratoAssinado:J?.contratoAssinado||!1,observacoesFormalização:J?.observacoesFormalização||""}}),Oe=Mt({mutationFn:async K=>await Je(`/api/propostas/${oe}`,{method:"PATCH",body:JSON.stringify(K)}),onSuccess:()=>{s({title:"Sucesso",description:"Formalização atualizada com sucesso"}),a.invalidateQueries({queryKey:["/api/propostas",oe]}),a.invalidateQueries({queryKey:["/api/propostas/formalizacao"]})},onError:K=>{s({title:"Erro",description:"Erro ao atualizar formalização",variant:"destructive"})}}),ve=K=>{const we=typeof K=="string"?parseFloat(K):K;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(we)},Xe=K=>K?new Date(K).toLocaleDateString("pt-BR"):"N/A",$e=async K=>{try{console.log("🔍 [CLICKSIGN] Consultando status para proposta:",K);const we=await Je(`/api/clicksign/status/${K}`);return console.log("📡 [CLICKSIGN] Status retornado:",we),m(we),we}catch(we){return console.error("❌ [CLICKSIGN] Erro ao consultar status:",we),null}},{data:at}=nt({queryKey:["/api/clicksign/status",oe],queryFn:()=>$e(oe),enabled:!!oe&&!!J&&(J?.status==="CCB_GERADA"||J?.status==="AGUARDANDO_ASSINATURA"),staleTime:120*1e3,refetchOnWindowFocus:!1,retry:1});G.useEffect(()=>{at?.signUrl?m(at):f?.signUrl||m(null)},[at,f?.signUrl]),N.useEffect(()=>{if(!oe)return;console.log("🔄 [REALTIME] Configurando escuta para proposta:",oe);const K=tf(),we=K.channel(`propostas-changes-${oe}`).on("postgres_changes",{event:"*",schema:"public",table:"propostas",filter:`id=eq.${oe}`},Ue=>{if(console.log("📡 [REALTIME] Evento recebido:",Ue),Ue.eventType==="UPDATE"){console.log("✅ [REALTIME] Proposta atualizada, analisando mudanças..."),a.invalidateQueries({queryKey:["/api/propostas",oe,"formalizacao"]});const mt=Ue.old,gt=Ue.new;mt?.status!==gt?.status&&gt?.status==="ASSINATURA_CONCLUIDA"&&(console.log("🔄 [REALTIME] Contrato foi assinado, atualizando timeline"),a.invalidateQueries({queryKey:["/api/clicksign/status",oe]})),(gt?.status==="ASSINATURA_CONCLUIDA"||gt?.interBoletoGerado!==mt?.interBoletoGerado)&&(console.log("🔄 [REALTIME] Atualizando boletos Inter devido a mudança relevante"),a.invalidateQueries({queryKey:["/api/inter/collections",oe]})),console.log("🔄 [REALTIME] Proposta atualizada silenciosamente")}}).subscribe(Ue=>{Ue==="SUBSCRIBED"?console.log("✅ [REALTIME] Conectado ao canal de atualizações"):Ue==="CHANNEL_ERROR"?console.error("❌ [REALTIME] Erro ao conectar ao canal"):Ue==="TIMED_OUT"?console.error("⏱️ [REALTIME] Timeout ao conectar"):Ue==="CLOSED"&&console.log("🔌 [REALTIME] Canal fechado")});return()=>{console.log("🧹 [REALTIME] Removendo canal de escuta"),K.removeChannel(we)}},[oe,a,s]);const Ft=K=>({aprovado:20,documentos_enviados:40,CCB_GERADA:60,ASSINATURA_CONCLUIDA:80,BOLETOS_EMITIDOS:90,pago:100})[K]||0,rr=K=>({aprovado:"bg-green-500",documentos_enviados:"bg-blue-500",CCB_GERADA:"bg-purple-500",ASSINATURA_CONCLUIDA:"bg-indigo-500",BOLETOS_EMITIDOS:"bg-orange-500",PAGAMENTO_CONFIRMADO:"bg-green-600"})[K]||"bg-gray-500",_e=K=>({aprovado:"Aprovado",documentos_enviados:"Documentos Enviados",CCB_GERADA:"CCB Gerada",ASSINATURA_CONCLUIDA:"Assinatura Concluída",BOLETOS_EMITIDOS:"Boletos Emitidos",PAGAMENTO_CONFIRMADO:"Pagamento Confirmado"})[K]||K;if(!oe)return i.jsx(fIe,{});const St=K=>[{id:1,title:"Proposta Aprovada",description:"Proposta foi aprovada pela equipe de crédito",icon:ar,status:"completed",date:Xe(K.dataAprovacao||K.createdAt),completed:!0},{id:2,title:"CCB Gerada",description:"Cédula de Crédito Bancário gerada automaticamente",icon:zt,status:K.status==="CCB_GERADA"||K.status==="AGUARDANDO_ASSINATURA"||K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS"?"completed":"current",date:K.status==="CCB_GERADA"||K.status==="AGUARDANDO_ASSINATURA"||K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS"?Xe(K.createdAt):"Pendente",completed:K.status==="CCB_GERADA"||K.status==="AGUARDANDO_ASSINATURA"||K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS",interactive:!0,etapa:"ccb_gerado"},{id:3,title:"Assinatura Eletrônica",description:"Documento enviado para ClickSign para assinatura",icon:ec,status:K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS"||K.status==="ASSINATURA_CONCLUIDA"?"completed":K.status==="CCB_GERADA"||K.status==="AGUARDANDO_ASSINATURA"||K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS"?"current":"pending",date:K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS"||K.status==="ASSINATURA_CONCLUIDA"?Xe(K.dataAssinatura||K.createdAt):"Pendente",completed:K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS"||K.status==="ASSINATURA_CONCLUIDA",interactive:K.status==="CCB_GERADA"||K.status==="AGUARDANDO_ASSINATURA"||K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS",etapa:"assinatura_eletronica"},{id:4,title:"Biometria Validada",description:"Validação biométrica concluída",icon:ur,status:K.biometriaConcluida||K.status==="ASSINATURA_CONCLUIDA"?"completed":K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS"?"current":"pending",date:K.biometriaConcluida||K.status==="ASSINATURA_CONCLUIDA"?Xe(K.dataAssinatura||K.createdAt):"Pendente",completed:K.biometriaConcluida||K.status==="ASSINATURA_CONCLUIDA",interactive:K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS",etapa:"biometria"},{id:5,title:"Banco Inter - Boletos",description:"Boletos gerados automaticamente pelo Banco Inter para pagamento",icon:Na,status:K.interBoletoGerado?"completed":K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS"||K.status==="ASSINATURA_CONCLUIDA"?"current":"pending",date:K.interBoletoGerado?Xe(K.createdAt):"Pendente",completed:K.interBoletoGerado||!1,interactive:K.status==="ASSINATURA_CONCLUIDA"||K.status==="BOLETOS_EMITIDOS"||K.status==="ASSINATURA_CONCLUIDA",etapa:"banco_inter"},{id:6,title:"Liberação do Pagamento",description:"Valor liberado e disponível para transferência",icon:Ef,status:K.status==="BOLETOS_EMITIDOS"?"current":K.status==="PAGAMENTO_CONFIRMADO"?"completed":"pending",date:K.dataPagamento?Xe(K.dataPagamento):"Pendente",completed:K.status==="PAGAMENTO_CONFIRMADO"}],X=K=>{Oe.mutate(K)};if(Ee)return i.jsx(pt,{title:"Acompanhamento da Formalização",children:i.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[...Array(6)].map((K,we)=>i.jsx(ee,{className:"animate-pulse border-gray-700 bg-gray-800",children:i.jsxs(re,{className:"p-6",children:[i.jsx("div",{className:"mb-4 h-32 rounded bg-gray-700"}),i.jsx("div",{className:"mb-2 h-4 rounded bg-gray-700"}),i.jsx("div",{className:"h-4 w-3/4 rounded bg-gray-700"})]})},we))})});if(!J)return i.jsx(pt,{title:"Acompanhamento da Formalização",children:i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(zt,{className:"mx-auto mb-4 h-16 w-16 text-gray-400"}),i.jsx("p",{className:"text-lg text-gray-500",children:"Proposta não encontrada"}),i.jsx(se,{onClick:()=>e("/credito/fila"),className:"mt-4",children:"Voltar para Fila de Análise"})]})});const ae=St(J),ce=()=>`Formalização - Proposta #${J.id}`,Ce=()=>"/formalizacao";return i.jsx(pt,{title:ce(),children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs(se,{variant:"outline",onClick:()=>e(Ce()),className:"flex items-center gap-2",children:[i.jsx(NM,{className:"h-4 w-4"}),"Voltar para Formalização"]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ke,{variant:"outline",className:`${rr(J.status)} text-white`,children:_e(J.status)}),i.jsxs("span",{className:"text-sm text-gray-600",children:[Ft(J.status),"% concluído"]})]})]}),i.jsx(ee,{className:"border-gray-700 bg-gray-800",children:i.jsx(re,{className:"p-6",children:i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white",children:[i.jsx(So,{className:"h-5 w-5 text-blue-400"}),"Progresso da Formalização"]}),i.jsxs("span",{className:"text-sm font-medium text-gray-400",children:[Ft(J.status),"% concluído"]})]}),i.jsx(On,{value:Ft(J.status),className:"h-3"})]})})}),i.jsx(ee,{className:"border-gray-700 bg-gray-800",children:i.jsx(re,{className:"p-0",children:i.jsx("div",{className:"border-b border-gray-600",children:i.jsxs("div",{className:"flex space-x-8 px-6 py-4",children:[i.jsxs("button",{onClick:()=>n("timeline"),className:`flex items-center gap-2 border-b-2 pb-2 text-sm font-medium ${r==="timeline"?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-gray-200"}`,children:[i.jsx(Da,{className:"h-4 w-4"}),o?.role==="ATENDENTE"?"Progresso":"Timeline"]}),i.jsxs("button",{onClick:()=>n("documents"),className:`flex items-center gap-2 border-b-2 pb-2 text-sm font-medium ${r==="documents"?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-gray-200"}`,children:[i.jsx(zt,{className:"h-4 w-4"}),"Documentos"]}),o?.role!=="ATENDENTE"&&i.jsxs("button",{onClick:()=>n("contracts"),className:`flex items-center gap-2 border-b-2 pb-2 text-sm font-medium ${r==="contracts"?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-gray-200"}`,children:[i.jsx(tE,{className:"h-4 w-4"}),"Contratos"]})]})})})}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[r==="timeline"&&i.jsxs(ee,{className:"border-gray-700 bg-gray-800",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2 text-white",children:[i.jsx(Da,{className:"h-5 w-5 text-blue-400"}),"Timeline de Formalização"]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-6",children:ae.map((K,we)=>{const Ue=K.icon,mt=K.completed,gt=K.status==="current";return K.interactive&&K.etapa?K.etapa==="ccb_gerado"?i.jsx("div",{className:"mb-4",children:i.jsx(dIe,{proposalId:J.id,onCCBGenerated:()=>ye()})},K.id):K.etapa==="assinatura_eletronica"&&(J.status==="CCB_GERADA"||J.status==="AGUARDANDO_ASSINATURA"||J.status==="ASSINATURA_CONCLUIDA"||J.status==="BOLETOS_EMITIDOS")?i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx(_U,{propostaId:J.id,etapa:K.etapa,titulo:K.title,descricao:K.description,concluida:mt,habilitada:K.interactive,onUpdate:()=>ye()}),(J.status==="CCB_GERADA"||J.status==="AGUARDANDO_ASSINATURA")&&!f?.signUrl&&!at?.signUrl&&i.jsxs("div",{className:"mt-3 rounded-lg border border-blue-700 bg-blue-900/20 p-4",children:[i.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[i.jsx("h5",{className:"font-medium text-blue-300",children:"Enviar para Assinatura Eletrônica"}),i.jsx(ec,{className:"h-5 w-5 text-blue-400"})]}),i.jsx("p",{className:"mb-4 text-sm text-blue-200",children:"CCB foi gerada com sucesso! Clique no botão para enviar ao ClickSign e gerar o link de assinatura para o cliente."}),i.jsx(se,{onClick:async()=>{x(!0);try{console.log("🚀 [CLICKSIGN] Enviando CCB para proposta:",J.id);const ge=await Je(`/api/propostas/${J.id}/clicksign/enviar`,{method:"POST"});console.log("✅ [CLICKSIGN] Resposta recebida:",ge),m(ge),s({title:"Sucesso",description:"Contrato enviado para ClickSign com sucesso!"})}catch(ge){console.error("❌ [CLICKSIGN] Erro ao enviar:",ge),s({title:"Erro",description:ge.response?.data?.message||"Erro ao enviar para ClickSign",variant:"destructive"})}finally{x(!1)}},disabled:g,className:"w-full bg-blue-600 hover:bg-blue-700",children:g?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),"Enviando para ClickSign..."]}):i.jsxs("div",{className:"flex items-center",children:[i.jsx(ec,{className:"mr-2 h-4 w-4"}),"Enviar Contrato para Assinatura (ClickSign)"]})})]}),(J.status==="ASSINATURA_CONCLUIDA"||J.status==="BOLETOS_EMITIDOS")&&i.jsxs("div",{className:"mt-3 rounded-lg border border-green-700 bg-green-900/20 p-4",children:[i.jsxs("div",{className:"mb-3 flex items-center",children:[i.jsx(ar,{className:"mr-2 h-5 w-5 text-green-400"}),i.jsx("h5",{className:"font-medium text-green-300",children:"Contrato Assinado + Biometria Validada"})]}),i.jsx("p",{className:"text-sm text-green-200",children:"O cliente assinou digitalmente o contrato via ClickSign com validação biométrica. Próximo passo: geração automática dos boletos de pagamento pelo Banco Inter."})]}),(f?.signUrl||at?.signUrl||J.clicksignSignUrl)&&(J.status==="CCB_GERADA"||J.status==="AGUARDANDO_ASSINATURA")&&i.jsxs("div",{className:"mt-3 rounded-lg border border-green-700 bg-green-900/20 p-4",children:[i.jsxs("div",{className:"mb-3 flex items-center",children:[i.jsx(ar,{className:"mr-2 h-5 w-5 text-green-400"}),i.jsx("h5",{className:"font-medium text-green-300",children:"Link de Assinatura Disponível"})]}),i.jsx("p",{className:"mb-3 text-sm text-green-200",children:"Compartilhe o link abaixo com o cliente para assinatura digital:"}),i.jsxs("div",{className:"flex items-center gap-2 rounded border bg-gray-800 p-3",children:[i.jsx("input",{type:"text",value:f?.signUrl||at?.signUrl||J.clicksignSignUrl||"",readOnly:!0,className:"flex-1 bg-transparent text-sm text-white"}),i.jsx(se,{size:"sm",onClick:()=>{const ge=f?.signUrl||at?.signUrl||J.clicksignSignUrl||"";navigator.clipboard.writeText(ge),s({title:"Copiado!",description:"Link de assinatura copiado para a área de transferência"})},children:"Copiar"})]}),f?.envelopeId&&i.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:["Envelope ID: ",f.envelopeId]}),i.jsxs("div",{className:"mt-3 border-t border-gray-700 pt-3",children:[i.jsx(se,{variant:"outline",size:"sm",onClick:async()=>{x(!0);try{console.log("🔄 [CLICKSIGN] Regenerando link para proposta:",J.id),console.log("📊 [CLICKSIGN] Estado atual:",f);const ge=await Je(`/api/propostas/${J.id}/clicksign/regenerar`,{method:"POST"});console.log("✅ [CLICKSIGN] Novo link gerado:",ge),m(ge),s({title:"✅ Link Regenerado",description:"Novo link de assinatura disponível para o cliente!",duration:4e3}),a.setQueryData(["/api/clicksign/status",oe],ge)}catch(ge){console.error("❌ [CLICKSIGN] Erro ao regenerar:",ge),s({title:"Erro",description:ge.response?.data?.error||"Erro ao regenerar link",variant:"destructive"})}finally{x(!1)}},disabled:g,className:"border-yellow-600 text-yellow-400 hover:bg-yellow-600/10",children:g?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 h-3 w-3 animate-spin rounded-full border-b-2 border-yellow-400"}),"Regenerando..."]}):i.jsxs("div",{className:"flex items-center",children:[i.jsx(ec,{className:"mr-2 h-3 w-3"}),"Gerar Novo Link"]})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use caso o link anterior não esteja funcionando"})]})]})]})},K.id):K.etapa==="banco_inter"&&(J.status==="ASSINATURA_CONCLUIDA"||J.status==="BOLETOS_EMITIDOS"||J.status==="ASSINATURA_CONCLUIDA")?i.jsx("div",{className:"mb-4",children:i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"mt-3 rounded-lg border border-orange-700 bg-orange-900/20 p-4",children:[i.jsx("div",{className:"mb-3 flex items-center justify-between",children:i.jsxs("h5",{className:"flex items-center gap-2 font-medium text-orange-300",children:[i.jsx(Na,{className:"h-5 w-5"}),"Banco Inter - Boletos de Pagamento"]})}),i.jsx("p",{className:"mb-4 text-sm text-orange-200",children:"Após a assinatura do contrato, os boletos são gerados automaticamente pelo Banco Inter para processamento do pagamento ao cliente."}),(!pe||pe.length===0)&&!w&&!J.interBoletoGerado?i.jsx(se,{onClick:async()=>{C(!0);try{const ge=new Date;ge.setDate(ge.getDate()+5),(!J.cliente_data?.endereco||!J.cliente_data?.numero||!J.cliente_data?.bairro||!J.cliente_data?.cidade||!J.cliente_data?.uf||!J.cliente_data?.cep)&&console.warn("[INTER] Dados de endereço incompletos, usando valores padrão temporários");const nr={proposalId:J.id,valorTotal:J.condicoes_data?.valor||0,dataVencimento:ge.toISOString().split("T")[0],clienteData:{nome:J.cliente_data?.nome||"",cpf:J.cliente_data?.cpf||"",email:J.cliente_data?.email||"",telefone:J.cliente_data?.telefone||"00000000000",endereco:J.cliente_data?.endereco||"Rua Principal",numero:J.cliente_data?.numero||"100",complemento:J.cliente_data?.complemento||"",bairro:J.cliente_data?.bairro||"Centro",cidade:J.cliente_data?.cidade||"São Paulo",uf:J.cliente_data?.uf||"SP",cep:J.cliente_data?.cep?.replace(/\D/g,"")||"00000000"}};console.log("[INTER] Enviando dados para gerar boleto:",nr);const Ws=await Je("/api/inter/collections",{method:"POST",body:JSON.stringify(nr)});console.log("[INTER] Resposta da API:",Ws),s({title:"Sucesso",description:`${Ws.totalCriados||0} boleto(s) gerado(s) com sucesso!`}),_(Ws),await Promise.all([ye(),a.invalidateQueries({queryKey:["/api/inter/collections",J.id]}),a.invalidateQueries({queryKey:[`/api/propostas/${J.id}/formalizacao`]})])}catch(ge){console.error("[INTER] Erro ao gerar boleto:",ge),ge.status===409||ge.response?.status===409?(ge.response?.data?.existingCollections,s({title:"Boletos já existentes",description:ge.response?.data?.message||"Já existem boletos ativos para esta proposta. Verifique na lista abaixo.",variant:"default"}),a.invalidateQueries({queryKey:["/api/inter/collections",J.id]})):s({title:"Erro",description:ge.response?.data?.message||ge.response?.data?.details||ge.response?.data?.error||"Erro ao gerar boletos",variant:"destructive"})}finally{C(!1)}},disabled:A,className:"w-full bg-orange-600 hover:bg-orange-700",children:A?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),"Gerando boleto..."]}):i.jsxs("div",{className:"flex items-center",children:[i.jsx(Na,{className:"mr-2 h-4 w-4"}),"Gerar Boletos via Banco Inter"]})}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between rounded border border-green-700 bg-green-900/20 p-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ar,{className:"h-5 w-5 text-green-400"}),i.jsx("span",{className:"font-medium text-green-300",children:pe&&pe.length>0?`${pe.length} boleto(s) gerado(s) com sucesso`:"Boletos gerados com sucesso"})]}),pe&&pe.length>1&&i.jsxs("div",{className:"space-y-2",children:[q&&i.jsxs("div",{className:"text-xs text-gray-400",children:[q.boletosInStorage," de"," ",q.totalBoletos," boletos no storage",q.hasCarnet&&" | Carnê disponível"]}),F.exists&&F.url?i.jsxs(se,{size:"sm",variant:"default",className:"bg-green-600 hover:bg-green-700",onClick:()=>{window.open(F.url,"_blank"),s({title:"Download iniciado",description:`Carnê com ${pe?.length||0} boletos`})},children:[i.jsx(oa,{className:"mr-2 h-4 w-4"}),"Baixar Carnê (",pe?.length||0," ","boletos)"]}):!F.isLoading&&q?.hasCarnet&&q?.carnetUrl?i.jsxs(se,{size:"sm",variant:"default",className:"bg-green-600 hover:bg-green-700",onClick:()=>{window.open(q.carnetUrl,"_blank")},children:[i.jsx(oa,{className:"mr-2 h-4 w-4"}),"Baixar Carnê (",q.totalBoletos," ","boletos)"]}):q?.needsCorrection?i.jsx(se,{size:"sm",variant:"outline",className:"border-yellow-600 text-yellow-600 hover:bg-yellow-600 hover:text-white",onClick:async()=>{try{E(!0),s({title:"Corrigindo sincronização",description:"Removendo dados incompletos e reiniciando..."});const er=await Je(`/api/propostas/${J.id}/corrigir-sincronizacao`,{method:"POST"});er.success&&(s({title:"Correção iniciada",description:`Re-sincronização em andamento. Job ID: ${er.jobId}`}),setTimeout(async()=>{await je()},3e3))}catch(ge){s({title:"Erro",description:ge.message||"Erro ao corrigir sincronização",variant:"destructive"})}finally{E(!1)}},disabled:S,children:S?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2"}),"Corrigindo..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ir,{className:"mr-2 h-4 w-4"}),"Corrigir Sincronização"]})}):!F.exists&&!F.isLoading&&q?.boletosInStorage===q?.totalBoletos?i.jsx(se,{size:"sm",variant:"default",className:"bg-blue-600 hover:bg-blue-700",onClick:async()=>{try{E(!0),s({title:"Gerando carnê",description:"Consolidando todos os boletos em um único PDF..."}),(await Je(`/api/propostas/${J.id}/gerar-carne`,{method:"POST"})).success&&(s({title:"Carnê gerado!",description:"Carnê consolidado disponível para download"}),await xe(),await je())}catch(ge){s({title:"Erro",description:ge.message||"Erro ao gerar carnê",variant:"destructive"})}finally{E(!1)}},disabled:S||F.isLoading,children:S?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2"}),"Gerando carnê..."]}):F.isLoading?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2"}),"Verificando status..."]}):i.jsxs(i.Fragment,{children:[i.jsx(a5,{className:"mr-2 h-4 w-4"}),"Gerar Carnê para Impressão"]})}):i.jsx(se,{size:"sm",variant:"outline",onClick:async()=>{try{E(!0),s({title:"Sincronizando boletos",description:`Baixando ${pe.length} boletos do Banco Inter...`});const er=await Je(`/api/propostas/${J.id}/sincronizar-boletos`,{method:"POST",body:JSON.stringify({numeroBoletos:pe.length})});er.success&&(s({title:"Sincronização concluída",description:`${er.sucessos} boletos sincronizados com sucesso`}),await je())}catch(ge){s({title:"Erro",description:ge.message||"Erro ao sincronizar boletos",variant:"destructive"})}finally{E(!1)}},disabled:S||W,children:S?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2"}),"Sincronizando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ls,{className:"mr-2 h-4 w-4"}),"Sincronizar Boletos"]})})]}),P&&!M?.hasCarnet&&i.jsx(se,{size:"sm",onClick:()=>{const ge=document.createElement("a");ge.href=P,ge.download=`carne-proposta-${J.id}.pdf`,ge.target="_blank",document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),s({title:"Download iniciado",description:`Carnê com ${O} boletos`})},className:"border-green-600 text-green-400 hover:bg-green-600/10 bg-green-900/20",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(oa,{className:"mr-2 h-4 w-4"}),"Baixar Carnê (",O," boletos)"]})})]}),pe&&pe.length>0?i.jsx("div",{className:"space-y-3",children:pe.map((ge,er)=>i.jsxs("div",{className:"rounded-lg border border-gray-700 bg-gray-800 p-4",children:[i.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"mb-1 font-medium text-orange-300",children:ge.numeroParcela&&ge.totalParcelas?`Parcela ${ge.numeroParcela}/${ge.totalParcelas}`:ge.seuNumero||ge.codigoSolicitacao}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[i.jsxs("span",{children:["Valor: R$ ",ge.valorNominal]}),i.jsxs("span",{children:["Venc:"," ",new Date(ge.dataVencimento).toLocaleDateString("pt-BR")]})]})]}),i.jsx(ke,{variant:ge.situacao==="RECEBIDO"?"default":ge.situacao==="VENCIDO"?"destructive":"secondary",className:ge.situacao==="RECEBIDO"?"border-green-700 bg-green-900 text-green-300":"",children:ge.situacao})]}),i.jsxs("div",{className:"space-y-3",children:[ge.pixCopiaECola&&i.jsxs("div",{className:"rounded border border-green-700 bg-green-900/20 p-4",children:[i.jsx("p",{className:"mb-3 text-sm font-medium text-green-300",children:i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(TX,{className:"h-4 w-4"}),"PIX Copia e Cola (Pagamento Instantâneo)"]})}),i.jsxs("div",{className:"flex items-center gap-2 rounded bg-gray-900 p-3",children:[i.jsx("code",{className:"flex-1 break-all font-mono text-xs text-green-400",children:ge.pixCopiaECola}),i.jsx(se,{size:"sm",variant:"ghost",onClick:()=>{navigator.clipboard.writeText(ge.pixCopiaECola),s({title:"PIX copiado!",description:"Cole no app do seu banco para pagar"})},children:i.jsx(Nf,{className:"h-3 w-3"})})]})]}),(ge.linhaDigitavel||ge.codigoBarras)&&i.jsxs("div",{className:"rounded border border-gray-700 bg-gray-800 p-4",children:[i.jsx("p",{className:"mb-3 text-sm font-medium text-gray-300",children:i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(rje,{className:"h-4 w-4"}),"Linha Digitável do Boleto"]})}),i.jsxs("div",{className:"flex items-center gap-2 rounded bg-gray-900 p-3",children:[i.jsx("code",{className:"flex-1 break-all font-mono text-xs text-orange-400",children:ge.linhaDigitavel||ge.codigoBarras}),i.jsx(se,{size:"sm",variant:"ghost",onClick:()=>{const nr=ge.linhaDigitavel||ge.codigoBarras;navigator.clipboard.writeText(nr),s({title:"Linha digitável copiada!",description:"Use no internet banking para pagar"})},children:i.jsx(Nf,{className:"h-3 w-3"})})]})]})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs(se,{size:"sm",variant:"outline",onClick:async()=>{try{if(console.log(`[PDF DOWNLOAD] Tentando baixar PDF para: ${ge.codigoSolicitacao}`),console.log(`[PDF DOWNLOAD] Status do boleto: ${ge.situacao}`),console.log(`[PDF DOWNLOAD] Tentativa de download para status: ${ge.situacao}`),ge.situacao==="EM_PROCESSAMENTO"||ge.situacao==="CODIGO_INVALIDO"){if(s({title:"PDF temporariamente indisponível",description:"O boleto está sendo processado. Use o código de barras abaixo para pagamento.",variant:"default"}),ge.linhaDigitavel||ge.codigoBarras){const bs=ge.linhaDigitavel||ge.codigoBarras;await navigator.clipboard.writeText(bs),s({title:"✅ Código copiado!",description:"Use no app do banco ou PIX Copia e Cola"})}return}console.log(`[PDF DOWNLOAD] Usando código: ${ge.codigoSolicitacao}`),console.log(`[PDF DOWNLOAD] Nosso número: ${ge.nossoNumero||"não definido"}`),console.log(`[PDF DOWNLOAD] Seu número: ${ge.seuNumero||"não definido"}`);const{TokenManager:nr}=await Di(async()=>{const{TokenManager:bs}=await Promise.resolve().then(()=>Dg);return{TokenManager:bs}},void 0),An=await nr.getInstance().getValidToken();if(!An)throw new Error("Token de acesso não encontrado");console.log(`[PDF DOWNLOAD] Token obtido com sucesso (${An.length} caracteres)`);const Zn=await fetch(`/api/inter/collections/${ge.codigoSolicitacao}/pdf`,{method:"GET",headers:{Authorization:`Bearer ${An}`,Accept:"application/pdf","Content-Type":"application/json"}});if(Zn.ok){const bs=await Zn.blob(),Gs=window.URL.createObjectURL(bs),vn=document.createElement("a");vn.href=Gs,vn.download=`boleto-${ge.codigoSolicitacao}.pdf`,document.body.appendChild(vn),vn.click(),window.URL.revokeObjectURL(Gs),document.body.removeChild(vn),s({title:"PDF baixado com sucesso!",description:"Arquivo salvo na pasta de Downloads"})}else throw new Error(`Erro ${Zn.status}: ${Zn.statusText}`)}catch(nr){console.error("[PDF DOWNLOAD] Erro:",nr),s({title:"Erro temporário ao baixar PDF",description:"Por favor, tente novamente em alguns segundos. O PDF está disponível.",variant:"destructive"})}},className:"border-blue-600 text-blue-400 hover:bg-blue-600/10",children:[i.jsx(oa,{className:"mr-2 h-4 w-4"}),"Baixar PDF"]})})]},ge.id||er))}):i.jsx("div",{className:"rounded border border-gray-700 bg-gray-800 p-3",children:i.jsx("p",{className:"text-sm text-gray-400",children:"Aguardando processamento dos boletos..."})}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs(se,{variant:"outline",onClick:async()=>{try{console.log(`[REALTIME UPDATE] Iniciando atualização para proposta: ${J.id}`);const{apiRequest:ge}=await Di(async()=>{const{apiRequest:nr}=await Promise.resolve().then(()=>rSe);return{apiRequest:nr}},void 0),er=await ge(`/api/inter/realtime-update/${J.id}`,{method:"POST"});er.updated>0||er.removed>0?(window.location.reload(),s({title:"Status atualizado!",description:`${er.updated} boletos atualizados, ${er.removed} códigos inválidos removidos`})):s({title:"Sem atualizações",description:er.message||"Status já está atualizado"})}catch(ge){console.error("[REALTIME UPDATE] Erro:",ge),s({title:"Erro",description:"Erro ao atualizar status dos boletos",variant:"destructive"})}},className:"border-green-600 text-green-400 hover:bg-green-600/10",children:[i.jsx(ls,{className:"mr-2 h-4 w-4"}),"Atualizar Status"]}),i.jsxs(se,{variant:"outline",onClick:async()=>{try{const ge=pe||[];if(ge.length>0){const er=ge[0];if(er.codigoSolicitacao){const{TokenManager:nr}=await Di(async()=>{const{TokenManager:bs}=await Promise.resolve().then(()=>Dg);return{TokenManager:bs}},void 0),An=await nr.getInstance().getValidToken();if(!An)throw new Error("Não autenticado");const Zn=await fetch(`/api/inter/collections/${J.id}/${er.codigoSolicitacao}/pdf`,{headers:{Authorization:`Bearer ${An}`}});if(Zn.ok){const bs=await Zn.blob(),Gs=window.URL.createObjectURL(bs),vn=document.createElement("a");vn.href=Gs,vn.download=`boleto-${er.seuNumero||er.codigoSolicitacao}.pdf`,document.body.appendChild(vn),vn.click(),window.URL.revokeObjectURL(Gs),document.body.removeChild(vn)}else throw new Error("Erro ao baixar PDF")}else s({title:"Erro",description:"Código do boleto não encontrado",variant:"destructive"})}else s({title:"Sem boletos",description:"Nenhum boleto foi gerado ainda para esta proposta",variant:"default"})}catch{s({title:"Erro",description:"Erro ao baixar PDF do boleto",variant:"destructive"})}},className:"border-orange-600 text-orange-400 hover:bg-orange-600/10",children:[i.jsx(a5,{className:"mr-2 h-4 w-4"}),"Imprimir Boleto"]}),i.jsxs(se,{variant:"outline",onClick:async()=>{try{const ge=pe||[];if(ge.length>0){const er=ge.map(nr=>`Parcela ${nr.numeroParcela}: ${nr.situacao||"Aguardando"}`).join(`
`);s({title:"Status dos Boletos",description:er||"Nenhum boleto encontrado"})}else s({title:"Sem boletos",description:"Nenhum boleto foi gerado ainda para esta proposta",variant:"default"})}catch(ge){console.error("[INTER] Erro ao consultar boletos:",ge),s({title:"Erro",description:"Erro ao consultar status dos boletos",variant:"destructive"})}},className:"border-orange-600 text-orange-400 hover:bg-orange-600/10",children:[i.jsx(zt,{className:"mr-2 h-4 w-4"}),"Ver Detalhes"]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:[i.jsx("p",{children:i.jsx("strong",{children:"Instruções para o Cliente:"})}),i.jsx("p",{children:"• Boleto gerado automaticamente pelo Banco Inter"}),i.jsx("p",{children:"• Pode pagar via PIX, débito ou transferência bancária"}),i.jsx("p",{children:"• Valor será creditado após compensação bancária"}),i.jsxs("p",{children:["• Vencimento:"," ",new Date(new Date().setDate(new Date().getDate()+5)).toLocaleDateString("pt-BR")]})]})]})]})})},K.id):K.etapa&&K.etapa!=="banco_inter"?i.jsx("div",{className:"mb-4",children:i.jsx(_U,{propostaId:J.id,etapa:K.etapa,titulo:K.title,descricao:K.description,concluida:mt,habilitada:K.interactive,onUpdate:()=>ye()})},K.id):null:i.jsxs("div",{className:"relative",children:[we!==ae.length-1&&i.jsx("div",{className:`absolute left-4 top-8 h-16 w-0.5 ${mt?"bg-green-500":"bg-gray-600"}`}),i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full ${mt?"bg-green-500 text-white":gt?"bg-blue-500 text-white":"bg-gray-600 text-gray-400"}`,children:mt?i.jsx(ar,{className:"h-4 w-4"}):gt?i.jsx(_n,{className:"h-4 w-4"}):i.jsx(Ue,{className:"h-4 w-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:`text-sm font-medium ${mt||gt?"text-white":"text-gray-400"}`,children:K.title}),i.jsx("span",{className:"text-xs text-gray-400",children:K.date})]}),i.jsx("p",{className:`text-sm ${mt||gt?"text-gray-300":"text-gray-500"}`,children:K.description}),gt&&!K.interactive&&i.jsxs("div",{className:"mt-2 rounded-md border border-blue-700 bg-blue-900/30 p-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ir,{className:"mr-2 h-4 w-4 text-blue-400"}),i.jsx("span",{className:"text-sm font-medium text-blue-300",children:"Etapa atual em andamento"})]}),i.jsx("p",{className:"mt-1 text-sm text-blue-200",children:"Aguardando ação do cliente ou processamento interno."})]}),K.id===2&&(J.status==="CCB_GERADA"||J.status==="AGUARDANDO_ASSINATURA"||J.status==="ASSINATURA_CONCLUIDA"||J.status==="BOLETOS_EMITIDOS")&&i.jsx("div",{className:"mt-3",children:i.jsxs(se,{onClick:async()=>{try{const ge=await Je(`/api/formalizacao/${J.id}/ccb`);if(!ge.publicUrl){s({title:"CCB não disponível",description:"A CCB ainda não foi gerada para esta proposta",variant:"destructive"});return}c(ge.publicUrl||""),d(!0)}catch{s({title:"Erro",description:"Erro ao visualizar CCB",variant:"destructive"})}},variant:"outline",size:"sm",className:"mr-2",children:[i.jsx(zt,{className:"mr-2 h-4 w-4"}),"Visualizar CCB"]})}),K.id===3&&(J.status==="CCB_GERADA"||J.status==="AGUARDANDO_ASSINATURA")&&i.jsxs("div",{className:"mt-3 rounded-lg border border-blue-700 bg-blue-900/20 p-4",children:[i.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[i.jsx("h5",{className:"font-medium text-blue-300",children:"Enviar para Assinatura Eletrônica"}),i.jsx(ec,{className:"h-5 w-5 text-blue-400"})]}),i.jsx("p",{className:"mb-4 text-sm text-blue-200",children:"Clique no botão abaixo para enviar o contrato CCB para o ClickSign e gerar o link de assinatura para o cliente."}),i.jsxs("div",{className:"mb-4 flex items-center space-x-2 rounded-lg border border-purple-700 bg-purple-900/20 p-3",children:[i.jsx("input",{type:"checkbox",id:"useBiometricAuth",checked:v,onChange:ge=>y(ge.target.checked),className:"h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),i.jsxs("label",{htmlFor:"useBiometricAuth",className:"cursor-pointer text-sm text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Usar Biometria Facial"}),i.jsx("span",{className:"mt-0.5 block text-xs text-gray-400",children:"Adiciona validação facial com comparação de documento para maior segurança"})]})]}),i.jsx(se,{onClick:async()=>{x(!0);try{console.log("🚀 [CLICKSIGN] Enviando CCB com biometria:",v);const ge=await Je(`/api/propostas/${J.id}/clicksign/enviar`,{method:"POST",body:JSON.stringify({useBiometricAuth:v})});console.log("✅ [CLICKSIGN] Resposta com biometria:",ge),m(ge),s({title:"Sucesso",description:"Contrato enviado para ClickSign com sucesso!"})}catch(ge){console.error("❌ [CLICKSIGN] Erro no envio com biometria:",ge),s({title:"Erro",description:ge.response?.data?.message||"Erro ao enviar para ClickSign",variant:"destructive"})}finally{x(!1)}},disabled:g,className:"w-full bg-blue-600 hover:bg-blue-700",children:g?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),"Enviando para ClickSign..."]}):i.jsxs("div",{className:"flex items-center",children:[i.jsx(ec,{className:"mr-2 h-4 w-4"}),"Enviar Contrato para Assinatura (ClickSign)"]})})]}),(f||J.clicksignSignUrl)&&K.id===3&&i.jsxs("div",{className:"mt-3 rounded-lg border border-green-700 bg-green-900/20 p-4",children:[i.jsxs("div",{className:"mb-3 flex items-center",children:[i.jsx(ar,{className:"mr-2 h-5 w-5 text-green-400"}),i.jsx("h5",{className:"font-medium text-green-300",children:"Link de Assinatura Disponível"})]}),i.jsx("p",{className:"mb-3 text-sm text-green-200",children:"Compartilhe o link abaixo com o cliente para assinatura digital:"}),i.jsxs("div",{className:"flex items-center gap-2 rounded border bg-gray-800 p-3",children:[i.jsx("input",{type:"text",value:f?.signUrl||J.clicksignSignUrl||"",readOnly:!0,className:"flex-1 bg-transparent text-sm text-white"}),i.jsx(se,{size:"sm",onClick:()=>{const ge=f?.signUrl||J.clicksignSignUrl||"";navigator.clipboard.writeText(ge),s({title:"Copiado!",description:"Link de assinatura copiado para a área de transferência"})},children:"Copiar"})]}),f?.envelopeId&&i.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:["Envelope ID: ",f.envelopeId]}),i.jsxs("div",{className:"mt-3 border-t border-gray-700 pt-3",children:[i.jsx(se,{variant:"outline",size:"sm",onClick:async()=>{x(!0);try{console.log("🔄 [CLICKSIGN] Regenerando link (seção 2) para proposta:",J.id),console.log("📊 [CLICKSIGN] Estado atual (seção 2):",f);const ge=await Je(`/api/propostas/${J.id}/clicksign/regenerar`,{method:"POST"});console.log("✅ [CLICKSIGN] Novo link gerado (seção 2):",ge),m(ge),s({title:"Sucesso",description:"Novo link de assinatura gerado com sucesso!"})}catch(ge){console.error("❌ [CLICKSIGN] Erro ao regenerar (seção 2):",ge),ge.response?.status===401&&ge.response?.data?.action==="UPDATE_CLICKSIGN_TOKEN"?s({title:"Token ClickSign Inválido",description:ge.response.data.details||"Token do ClickSign precisa ser atualizado. Entre em contato com o administrador.",variant:"destructive"}):ge.response?.status===400&&ge.response?.data?.action==="CHECK_CLICKSIGN_SERVICE"?s({title:"Erro na API ClickSign",description:ge.response.data.details||"Problema com o serviço ClickSign. Tente novamente em alguns minutos.",variant:"destructive"}):s({title:"Erro",description:ge.response?.data?.error||"Erro ao regenerar link",variant:"destructive"})}finally{x(!1)}},disabled:g,className:"border-yellow-600 text-yellow-400 hover:bg-yellow-600/10",children:g?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 h-3 w-3 animate-spin rounded-full border-b-2 border-yellow-400"}),"Regenerando..."]}):i.jsxs("div",{className:"flex items-center",children:[i.jsx(ec,{className:"mr-2 h-3 w-3"}),"Gerar Novo Link"]})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use caso o link anterior não esteja funcionando"})]})]})]})]})]},K.id)})})})]}),r==="documents"&&i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"h-5 w-5"}),"Documentos"]})}),i.jsx(re,{children:i.jsx(qee,{propostaId:J.id,documents:[],ccbDocumentoUrl:J.status==="CCB_GERADA"||J.status==="AGUARDANDO_ASSINATURA"||J.status==="ASSINATURA_CONCLUIDA"||J.status==="BOLETOS_EMITIDOS"?`/api/propostas/${J.id}/ccb-url`:void 0})})]}),r==="contracts"&&i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(tE,{className:"h-5 w-5"}),"Contratos"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-gray-50 p-4",children:[i.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${J.contratoGerado?"bg-green-100":"bg-gray-200"}`,children:i.jsx(tE,{className:`h-5 w-5 ${J.contratoGerado?"text-green-600":"text-gray-400"}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Contrato Gerado"}),i.jsx("p",{className:"text-sm text-gray-600",children:J.contratoGerado?"Sim":"Não"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-gray-50 p-4",children:[i.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${J.contratoAssinado?"bg-green-100":"bg-gray-200"}`,children:i.jsx(ec,{className:`h-5 w-5 ${J.contratoAssinado?"text-green-600":"text-gray-400"}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Contrato Assinado"}),i.jsx("p",{className:"text-sm text-gray-600",children:J.contratoAssinado?"Sim":"Não"})]})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h4",{className:"mb-3 font-medium text-gray-900",children:"Ações do Contrato"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs(se,{variant:"outline",disabled:!J.contratoGerado,className:"flex items-center gap-2",children:[i.jsx(wo,{className:"h-4 w-4"}),"Visualizar Contrato"]}),i.jsxs(se,{variant:"outline",disabled:!J.contratoGerado,className:"flex items-center gap-2",children:[i.jsx(oa,{className:"h-4 w-4"}),"Baixar Contrato"]}),i.jsxs(se,{variant:"outline",disabled:!J.contratoGerado||J.contratoAssinado,className:"flex items-center gap-2",children:[i.jsx(OM,{className:"h-4 w-4"}),"Enviar para Assinatura"]})]})]})]})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ee,{className:"border-gray-700 bg-gray-800",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2 text-white",children:[i.jsx(El,{className:"h-5 w-5 text-blue-400"}),"Resumo da Proposta"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{className:"text-sm font-medium text-gray-400",children:"Cliente"}),i.jsx("p",{className:"font-medium text-white",children:J.cliente_data?.nome||"Nome não informado"})]}),i.jsxs("div",{children:[i.jsx(ue,{className:"text-sm font-medium text-gray-400",children:"Valor Aprovado"}),i.jsx("p",{className:"text-2xl font-bold text-green-400",children:ve(J.condicoes_data?.valor||0)})]}),i.jsxs("div",{children:[i.jsx(ue,{className:"text-sm font-medium text-gray-400",children:"Taxa de Juros"}),i.jsxs("p",{className:"flex items-center gap-1 font-medium text-white",children:[i.jsx(EX,{className:"h-4 w-4"}),"N/A","% a.m."]})]}),i.jsxs("div",{children:[i.jsx(ue,{className:"text-sm font-medium text-gray-400",children:"Prazo"}),i.jsxs("p",{className:"font-medium text-white",children:[J.condicoes_data?.prazo||0," meses"]})]}),i.jsxs("div",{children:[i.jsx(ue,{className:"text-sm font-medium text-gray-400",children:"Data da Aprovação"}),i.jsxs("p",{className:"flex items-center gap-1 text-white",children:[i.jsx($g,{className:"h-4 w-4"}),J.dataAprovacao?Xe(J.dataAprovacao):Xe(J.createdAt)]})]})]})})]}),i.jsxs(ee,{className:"border-gray-700 bg-gray-800",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2 text-white",children:[i.jsx(Pd,{className:"h-5 w-5 text-blue-400"}),"Gerenciar Status"]})}),i.jsx(re,{children:i.jsxs("form",{onSubmit:Se.handleSubmit(X),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"status",className:"text-gray-400",children:"Status Atual"}),i.jsxs("select",{className:"w-full rounded-md border border-gray-600 bg-gray-700 p-2 text-white",value:Se.watch("status")||J.status,onChange:K=>Se.setValue("status",K.target.value),children:[i.jsx("option",{value:"aprovado",children:"Aprovado"}),i.jsx("option",{value:"documentos_enviados",children:"Documentos Enviados"}),i.jsx("option",{value:"CCB_GERADA",children:"Contratos Preparados"}),i.jsx("option",{value:"ASSINATURA_CONCLUIDA",children:"Contratos Assinados"}),i.jsx("option",{value:"BOLETOS_EMITIDOS",children:"Pronto para Pagamento"}),i.jsx("option",{value:"PAGAMENTO_CONFIRMADO",children:"Pago"})]})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"observacoes",className:"text-gray-400",children:"Observações"}),i.jsx(Ra,{id:"observacoes",rows:3,placeholder:"Adicione observações sobre o processo...",className:"border-gray-600 bg-gray-700 text-white",...Se.register("observacoesFormalização")})]}),i.jsx(se,{type:"submit",className:"w-full",disabled:Oe.isPending,children:Oe.isPending?"Atualizando...":"Atualizar Status"})]})})]}),i.jsxs(ee,{className:"border-gray-700 bg-gray-800",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2 text-white",children:[i.jsx(ir,{className:"h-5 w-5 text-blue-400"}),"Próximos Passos"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-3",children:[J.status==="aprovado"&&i.jsxs("div",{className:"rounded-md border border-blue-700 bg-blue-900/30 p-3",children:[i.jsx("p",{className:"text-sm font-medium text-blue-300",children:"Aguardando documentos adicionais"}),i.jsx("p",{className:"mt-1 text-sm text-blue-200",children:"Cliente deve enviar documentos complementares solicitados."})]}),J.status==="documentos_enviados"&&i.jsxs("div",{className:"rounded-md border border-purple-700 bg-purple-900/30 p-3",children:[i.jsx("p",{className:"text-sm font-medium text-purple-300",children:"Preparar contratos"}),i.jsx("p",{className:"mt-1 text-sm text-purple-200",children:"Gerar e preparar contratos para assinatura."})]}),J.status==="CCB_GERADA"&&i.jsxs("div",{className:"rounded-md border border-indigo-700 bg-indigo-900/30 p-3",children:[i.jsx("p",{className:"text-sm font-medium text-indigo-300",children:"Aguardando assinatura"}),i.jsx("p",{className:"mt-1 text-sm text-indigo-200",children:"Contratos enviados para assinatura do cliente."})]}),J.status==="ASSINATURA_CONCLUIDA"&&i.jsxs("div",{className:"rounded-md border border-orange-700 bg-orange-900/30 p-3",children:[i.jsx("p",{className:"text-sm font-medium text-orange-300",children:"Preparar pagamento"}),i.jsx("p",{className:"mt-1 text-sm text-orange-200",children:"Processar liberação do valor aprovado."})]}),J.status==="BOLETOS_EMITIDOS"&&i.jsxs("div",{className:"rounded-md border border-green-700 bg-green-900/30 p-3",children:[i.jsx("p",{className:"text-sm font-medium text-green-300",children:"Liberar pagamento"}),i.jsx("p",{className:"mt-1 text-sm text-green-200",children:"Valor pronto para ser liberado ao cliente."})]}),J.status==="PAGAMENTO_CONFIRMADO"&&i.jsxs("div",{className:"rounded-md border border-green-700 bg-green-900/30 p-3",children:[i.jsx("p",{className:"text-sm font-medium text-green-300",children:"Processo concluído"}),i.jsx("p",{className:"mt-1 text-sm text-green-200",children:"Valor liberado com sucesso ao cliente."})]})]})})]})]})]})]})})}function pIe({selectedProducts:t,onProductsChange:e,availableProducts:r,disabled:n=!1}){const[s,a]=N.useState(""),o=r.filter(d=>!t.includes(d.id)),l=d=>{d&&!t.includes(parseInt(d))&&(e([...t,parseInt(d)]),a(""))},c=d=>{e(t.filter(f=>f!==d))},u=d=>r.find(m=>m.id===d)?.nomeProduto||`Produto ${d}`;return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Yt,{value:s,onValueChange:a,disabled:n||o.length===0,children:[i.jsx(Ht,{className:"flex-1",children:i.jsx(Qt,{placeholder:"Selecione produtos para associar..."})}),i.jsx(Wt,{children:o.map(d=>i.jsx(le,{value:d.id.toString(),children:d.nomeProduto},d.id))})]}),i.jsx(se,{type:"button",variant:"outline",size:"icon",onClick:()=>l(s),disabled:n||!s,children:i.jsx(Bi,{className:"h-4 w-4"})})]}),t.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-300",children:["Produtos Selecionados (",t.length,"):"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(d=>i.jsxs(ke,{variant:"secondary",className:"flex items-center gap-1 px-2 py-1",children:[u(d),i.jsx("button",{type:"button",onClick:()=>c(d),disabled:n,className:"ml-1 rounded-full p-0.5 hover:bg-gray-600",children:i.jsx(Vi,{className:"h-3 w-3"})})]},d))})]}),t.length===0&&i.jsx("p",{className:"text-sm text-amber-400",children:"⚠️ Pelo menos um produto deve ser selecionado"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Esta tabela comercial será aplicada aos produtos selecionados. Você pode adicionar múltiplos produtos para uma mesma configuração de taxas."})]})}const mIe=ci({nomeTabela:br().min(3,"Nome da Tabela deve ter pelo menos 3 caracteres."),taxaJuros:Za().positive("Taxa de Juros deve ser um número positivo."),comissao:Za().min(0,"Comissão deve ser maior ou igual a zero.").default(0),prazosPermitidos:Vg(Za()).min(1,"Deve conter ao menos um prazo."),produtoIds:Vg(Za().int().positive()).min(1,"Pelo menos um produto deve ser selecionado")}),jU=({initialData:t,onSubmit:e,onCancel:r})=>{const[n,s]=N.useState(""),[a,o]=N.useState(t?.prazos||[]),[l,c]=N.useState(t?.produtoIds||[]),{register:u,handleSubmit:d,formState:{errors:f},setValue:m}=si({resolver:ai(mIe),defaultValues:{nomeTabela:t?.nomeTabela||"",taxaJuros:Number(t?.taxaJuros)||0,comissao:Number(t?.comissao)||0,prazosPermitidos:t?.prazos||[],produtoIds:t?.produtoIds||[]}}),{data:g=[],isLoading:x}=nt({queryKey:["/api/produtos"],queryFn:async()=>(await Je("/api/produtos",{method:"GET"})).filter(S=>S.isActive)}),v=()=>{const C=parseInt(n);if(C>0&&!a.includes(C)){const S=[...a,C].sort((E,P)=>E-P);o(S),m("prazosPermitidos",S),s("")}},y=C=>{const S=a.filter(E=>E!==C);o(S),m("prazosPermitidos",S)},w=C=>{e({nomeTabela:C.nomeTabela,taxaJuros:C.taxaJuros,comissao:C.comissao,prazos:a,produtoIds:l})},_=C=>{c(C),m("produtoIds",C)},A=C=>{C.key==="Enter"&&(C.preventDefault(),v())};return i.jsxs("form",{onSubmit:d(w),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nomeTabela",children:"Nome da Tabela"}),i.jsx(Fe,{id:"nomeTabela",...u("nomeTabela"),placeholder:"Ex: Tabela A - Preferencial"}),f.nomeTabela&&i.jsx("span",{className:"text-sm text-red-500",role:"alert",children:f.nomeTabela.message})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Produtos Associados"}),i.jsx(pIe,{selectedProducts:l,onProductsChange:_,availableProducts:g,disabled:x}),f.produtoIds&&i.jsx("span",{className:"text-sm text-red-500",role:"alert",children:f.produtoIds.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"taxaJuros",children:"Taxa de Juros Mensal (%)"}),i.jsx(Fe,{id:"taxaJuros",type:"number",step:"0.01",min:"0",...u("taxaJuros",{valueAsNumber:!0}),placeholder:"Ex: 1.5"}),f.taxaJuros&&i.jsx("span",{className:"text-sm text-red-500",role:"alert",children:f.taxaJuros.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"comissao",children:"Comissão (%)"}),i.jsx(Fe,{id:"comissao",type:"number",step:"0.01",min:"0",...u("comissao",{valueAsNumber:!0}),placeholder:"Ex: 10.00"}),f.comissao&&i.jsx("span",{className:"text-sm text-red-500",role:"alert",children:f.comissao.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"prazos",children:"Prazos Permitidos (meses)"}),i.jsxs("div",{className:"mb-2 flex space-x-2",children:[i.jsx(Fe,{id:"prazos",type:"number",min:"1",value:n,onChange:C=>s(C.target.value),onKeyPress:A,placeholder:"Ex: 12"}),i.jsx(se,{type:"button",onClick:v,disabled:!n||parseInt(n)<=0,children:"Adicionar"})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(C=>i.jsxs(ke,{variant:"secondary",className:"flex items-center gap-1",children:[C," meses",i.jsx(se,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>y(C),children:i.jsx(Vi,{className:"h-3 w-3"})})]},C))}),f.prazosPermitidos&&i.jsx("span",{className:"text-sm text-red-500",role:"alert",children:f.prazosPermitidos.message})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(se,{type:"button",variant:"outline",onClick:r,children:"Cancelar"}),i.jsx(se,{type:"submit",children:"Salvar"})]})]})},gIe=({isOpen:t,onClose:e,onConfirm:r,tabelaNome:n})=>i.jsx(mn,{open:t,onOpenChange:e,children:i.jsxs(tn,{className:"sm:max-w-[425px]",children:[i.jsxs(rn,{children:[i.jsxs(nn,{className:"flex items-center gap-2",children:[i.jsx(jr,{className:"h-5 w-5 text-red-500"}),"Confirmar Exclusão"]}),i.jsxs(qs,{children:['Tem certeza que deseja excluir a tabela comercial "',n,'"? Esta ação não pode ser desfeita.']})]}),i.jsxs(ca,{children:[i.jsx(se,{variant:"outline",onClick:e,children:"Cancelar"}),i.jsx(se,{variant:"destructive",onClick:r,children:"Excluir"})]})]})}),vIe=()=>{const[t,e]=N.useState(!1),[r,n]=N.useState(!1),[s,a]=N.useState(!1),[o,l]=N.useState(null),{toast:c}=Fr(),{data:u=[],isLoading:d,error:f}=nt({queryKey:["tabelas-comerciais-admin"],queryFn:async()=>{const S=await xt.get("/api/tabelas-comerciais");return Array.isArray(S)?S:S.data||[]}}),m=Mt({mutationFn:async S=>(await xt.post("/api/admin/tabelas-comerciais",{nomeTabela:S.nomeTabela,taxaJuros:Number(S.taxaJuros),prazos:S.prazos||[],produtoIds:S.produtoIds||[],comissao:Number(S.comissao)})).data,onSuccess:()=>{tr.invalidateQueries({queryKey:["tabelas-comerciais-admin"]}),tr.invalidateQueries({queryKey:["tabelas-comerciais"]}),e(!1),c({title:"Tabela criada com sucesso",description:"A tabela comercial foi adicionada ao sistema."})},onError:S=>{c({title:"Erro ao criar tabela",description:S.message||"Ocorreu um erro ao criar a tabela comercial.",variant:"destructive"})}}),g=Mt({mutationFn:async S=>(await xt.put(`/api/admin/tabelas-comerciais/${S.id}`,{nomeTabela:S.data.nomeTabela,taxaJuros:Number(S.data.taxaJuros),prazos:S.data.prazos||[],produtoIds:S.data.produtoIds||[],comissao:Number(S.data.comissao)})).data,onSuccess:()=>{tr.invalidateQueries({queryKey:["tabelas-comerciais-admin"]}),tr.invalidateQueries({queryKey:["tabelas-comerciais"]}),n(!1),l(null),c({title:"Tabela atualizada com sucesso",description:"As alterações foram salvas."})},onError:S=>{c({title:"Erro ao atualizar tabela",description:S.message||"Ocorreu um erro ao atualizar a tabela comercial.",variant:"destructive"})}}),x=Mt({mutationFn:async S=>{await xt.delete(`/api/admin/tabelas-comerciais/${S}`)},onSuccess:()=>{tr.invalidateQueries({queryKey:["tabelas-comerciais-admin"]}),tr.invalidateQueries({queryKey:["tabelas-comerciais"]}),a(!1),l(null),c({title:"Tabela excluída com sucesso",description:"A tabela comercial foi removida do sistema."})},onError:S=>{c({title:"Erro ao excluir tabela",description:S.message||"Ocorreu um erro ao excluir a tabela comercial.",variant:"destructive"})}}),v=S=>{m.mutate(S)},y=S=>{o&&g.mutate({id:o.id,data:S})},w=()=>{o&&x.mutate(o.id)},_=S=>{l(S),n(!0)},A=S=>{l(S),a(!0)};if(f)return i.jsx(pt,{title:"Gestão de Tabelas Comerciais",children:i.jsx("div",{className:"flex h-64 items-center justify-center",children:i.jsx("p",{className:"text-red-500",children:"Erro ao carregar tabelas comerciais"})})});const C={total:u.length,taxaMediaJuros:u.length>0?(u.reduce((S,E)=>S+Number(E.taxaJuros),0)/u.length).toFixed(2):"0.00",comissaoMedia:u.length>0?(u.reduce((S,E)=>S+Number(E.comissao),0)/u.length).toFixed(2):"0.00",totalProdutos:u.reduce((S,E)=>S+(E.produtoIds?.length||0),0),prazosUnicos:Array.from(new Set(u.flatMap(S=>S.prazos||[]))).length};return i.jsx(pt,{title:"Gestão de Tabelas Comerciais",children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 p-3 shadow-lg",children:i.jsx(rE,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-gray-300",children:"Tabelas Comerciais"}),i.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"Configuração e gestão de taxas e condições comerciais"})]})]}),i.jsxs(se,{onClick:()=>e(!0),disabled:d,className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white shadow-lg transition-all duration-200 hover:from-green-700 hover:to-emerald-700 hover:shadow-xl",size:"lg",children:[i.jsx(Bi,{className:"mr-2 h-5 w-5"}),"Nova Tabela Comercial"]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(ee,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100 dark:border-blue-800 dark:from-blue-950 dark:to-blue-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total de Tabelas"}),i.jsx(rE,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:C.total}),i.jsx("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Ativas no sistema"})]})]}),i.jsxs(ee,{className:"border-green-200 bg-gradient-to-br from-green-50 to-green-100 dark:border-green-800 dark:from-green-950 dark:to-green-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Taxa Média"}),i.jsx(So,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:[C.taxaMediaJuros,"%"]}),i.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-400",children:"Juros mensais"})]})]}),i.jsxs(ee,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-purple-100 dark:border-purple-800 dark:from-purple-950 dark:to-purple-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Comissão Média"}),i.jsx(Bk,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[C.comissaoMedia,"%"]}),i.jsx("p",{className:"mt-1 text-xs text-purple-600 dark:text-purple-400",children:"Percentual médio"})]})]}),i.jsxs(ee,{className:"border-orange-200 bg-gradient-to-br from-orange-50 to-orange-100 dark:border-orange-800 dark:from-orange-950 dark:to-orange-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"Produtos Vinculados"}),i.jsx(Qa,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:C.totalProdutos}),i.jsx("p",{className:"mt-1 text-xs text-orange-600 dark:text-orange-400",children:"Total de associações"})]})]})]}),i.jsxs(ee,{className:"border-gray-200 bg-white/50 shadow-xl backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/50",children:[i.jsx(ie,{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(de,{className:"flex items-center gap-2 text-lg",children:[i.jsx(_o,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),"Configurações Comerciais"]})}),i.jsx(re,{className:"p-0",children:d?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((S,E)=>i.jsxs(ee,{className:"border border-gray-200 dark:border-gray-700",children:[i.jsx(ie,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ot,{className:"h-5 w-32"}),i.jsx(Ot,{className:"h-4 w-4"})]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Ot,{className:"h-4 w-16"}),i.jsx(Ot,{className:"h-4 w-12"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Ot,{className:"h-4 w-20"}),i.jsx(Ot,{className:"h-4 w-12"})]}),i.jsx(Ot,{className:"h-4 w-full"}),i.jsxs("div",{className:"flex justify-between pt-2",children:[i.jsx(Ot,{className:"h-8 w-8"}),i.jsx(Ot,{className:"h-8 w-8"})]})]})]},E))})}):u.length===0?i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(rE,{className:"mx-auto mb-4 h-16 w-16 text-gray-300 dark:text-gray-600"}),i.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-white",children:"Nenhuma tabela comercial cadastrada"}),i.jsx("p",{className:"mb-4 text-gray-500 dark:text-gray-400",children:"Comece criando a primeira tabela comercial do sistema"}),i.jsxs(se,{onClick:()=>e(!0),className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700",children:[i.jsx(Bi,{className:"mr-2 h-4 w-4"}),"Criar Primeira Tabela"]})]}):i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(S=>i.jsxs(ee,{className:"border border-gray-200 transition-shadow duration-200 hover:shadow-lg dark:border-gray-700",children:[i.jsx(ie,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(de,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:S.nomeTabela}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(se,{variant:"outline",size:"sm",onClick:()=>_(S),disabled:m.isPending||g.isPending||x.isPending,className:"h-8 w-8 border-blue-200 p-0 hover:border-blue-300 hover:bg-blue-50 dark:border-blue-700 dark:hover:bg-blue-900/20",title:"Editar tabela",children:i.jsx(Pd,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),i.jsx(se,{variant:"outline",size:"sm",onClick:()=>A(S),disabled:m.isPending||g.isPending||x.isPending,className:"h-8 w-8 border-red-200 p-0 hover:border-red-300 hover:bg-red-50 dark:border-red-700 dark:hover:bg-red-900/20",title:"Excluir tabela",children:i.jsx(ay,{className:"h-4 w-4 text-red-600 dark:text-red-400"})})]})]})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(So,{className:"h-3 w-3 text-green-600"}),i.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Taxa de Juros"})]}),i.jsxs(ke,{className:"border-green-200 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[Number(S.taxaJuros).toFixed(2),"% a.m."]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Bk,{className:"h-3 w-3 text-purple-600"}),i.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Comissão"})]}),i.jsxs(ke,{className:"border-purple-200 bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:[Number(S.comissao).toFixed(2),"%"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Hc,{className:"h-3 w-3 text-blue-600"}),i.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Prazos Permitidos"})]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:(S.prazos||[]).map(E=>i.jsxs(ke,{variant:"secondary",className:"text-xs",children:[E,"m"]},E))})]}),i.jsx("div",{className:"border-t border-gray-100 pt-2 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Qa,{className:"h-3 w-3 text-orange-600"}),i.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Produtos"})]}),i.jsx(ke,{className:"border-orange-200 bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:S.produtoIds?.length||0})]})})]})]},S.id))})})})]}),i.jsx(mn,{open:t,onOpenChange:e,children:i.jsxs(tn,{className:"sm:max-w-[425px]",children:[i.jsx(rn,{children:i.jsx(nn,{children:"Nova Tabela Comercial"})}),i.jsx(jU,{onSubmit:v,onCancel:()=>e(!1)})]})}),i.jsx(mn,{open:r,onOpenChange:n,children:i.jsxs(tn,{className:"sm:max-w-[425px]",children:[i.jsx(rn,{children:i.jsx(nn,{children:"Editar Tabela Comercial"})}),i.jsx(jU,{initialData:o,onSubmit:y,onCancel:()=>{n(!1),l(null)}})]})}),i.jsx(gIe,{isOpen:s,onClose:()=>{a(!1),l(null)},onConfirm:w,tabelaNome:o?.nomeTabela||""})]})})};function yIe(){return eK.useSyncExternalStore(xIe,()=>!0,()=>!1)}function xIe(){return()=>{}}var U2="Avatar",[bIe,y7e]=cs(U2),[wIe,Gee]=bIe(U2),Kee=N.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,a]=N.useState("idle");return i.jsx(wIe,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(He.span,{...n,ref:e})})});Kee.displayName=U2;var Xee="AvatarImage",Yee=N.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...a}=t,o=Gee(Xee,r),l=_Ie(n,a),c=cn(u=>{s(u),o.onImageLoadingStatusChange(u)});return gn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(He.img,{...a,ref:e,src:n}):null});Yee.displayName=Xee;var Qee="AvatarFallback",Jee=N.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,a=Gee(Qee,r),[o,l]=N.useState(n===void 0);return N.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(He.span,{...s,ref:e}):null});Jee.displayName=Qee;function AU(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function _Ie(t,{referrerPolicy:e,crossOrigin:r}){const n=yIe(),s=N.useRef(null),a=n?(s.current||(s.current=new window.Image),s.current):null,[o,l]=N.useState(()=>AU(a,t));return gn(()=>{l(AU(a,t))},[a,t]),gn(()=>{const c=f=>()=>{l(f)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),e&&(a.referrerPolicy=e),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,r,e]),o}var Zee=Kee,ete=Yee,tte=Jee;const rte=N.forwardRef(({className:t,...e},r)=>i.jsx(Zee,{ref:r,className:Ie("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));rte.displayName=Zee.displayName;const SIe=N.forwardRef(({className:t,...e},r)=>i.jsx(ete,{ref:r,className:Ie("aspect-square h-full w-full",t),...e}));SIe.displayName=ete.displayName;const nte=N.forwardRef(({className:t,...e},r)=>i.jsx(tte,{ref:r,className:Ie("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));nte.displayName=tte.displayName;const Ut={users:{all:["users"],lists:()=>[...Ut.users.all,"list"],list:t=>[...Ut.users.lists(),{filters:t}],details:()=>[...Ut.users.all,"detail"],detail:t=>[...Ut.users.details(),t],withDetails:()=>[...Ut.users.all,"withDetails"]},partners:{all:["partners"],lists:()=>[...Ut.partners.all,"list"],list:t=>[...Ut.partners.lists(),{filters:t}],details:()=>[...Ut.partners.all,"detail"],detail:t=>[...Ut.partners.details(),t]},stores:{all:["stores"],lists:()=>[...Ut.stores.all,"list"],list:t=>[...Ut.stores.lists(),{filters:t}],details:()=>[...Ut.stores.all,"detail"],detail:t=>[...Ut.stores.details(),t],byPartner:t=>[...Ut.stores.all,"byPartner",t]},system:{all:["system"],metadata:()=>[...Ut.system.all,"metadata"],health:()=>[...Ut.system.all,"health"]}},jIe={onUserChange:[Ut.users.all,Ut.partners.all,Ut.stores.all]},AIe=500;function NIe(){const{data:t,isLoading:e,error:r}=nt({queryKey:Ut.system.metadata(),queryFn:async()=>{const g=await xt.get("/api/admin/system/metadata");return"data"in g?g.data:g}}),{data:n,isLoading:s,error:a}=nt({queryKey:Ut.partners.list(),queryFn:async()=>{const g=await xt.get("/api/parceiros");return"data"in g?g.data:g}}),o=t&&t.totalLojas<=AIe,{data:l,isLoading:c,error:u}=nt({queryKey:Ut.stores.list(),queryFn:async()=>{const g=await xt.get("/api/admin/lojas");return"data"in g?g.data:g},enabled:o===!0}),d=async g=>{if(o&&l)return l.filter(x=>x.parceiroId===g);{const x=await xt.get(`/api/admin/parceiros/${g}/lojas`);return"data"in x?x.data:x}},f=e||s||o&&c,m=r||a||o&&u;return{partners:n||[],allStores:o?l||[]:[],metadata:t,isLoading:f,isMetadataLoading:e,isPartnersLoading:s,isAllStoresLoading:o?c:!1,error:m,metadataError:r,partnersError:a,allStoresError:o?u:null,filteringStrategy:o?"client-side":"server-side",totalLojas:t?.totalLojas||0,fetchStoresByPartner:d,getStoresByPartner:g=>o&&l?l.filter(x=>x.parceiroId===g):[],isDataReady:!f&&!m,canFilterClientSide:o===!0}}function ste(t,e=!0){return nt({queryKey:t?Ut.stores.byPartner(t):[],queryFn:async()=>{if(!t)return[];const r=await xt.get(`/api/admin/parceiros/${t}/lojas`);return"data"in r?r.data:r},enabled:e&&!!t})}const EIe=ci({nome:br().min(3,"Nome é obrigatório."),email:br().email("Formato de e-mail inválido."),senha:br().min(8,"Senha deve ter pelo menos 8 caracteres."),confirmarSenha:br().min(1,"Confirmação de senha é obrigatória."),perfil:Hg(["ADMINISTRADOR","DIRETOR","GERENTE","ATENDENTE","ANALISTA","FINANCEIRO","COBRANÇA"]),parceiroId:br().optional(),lojaId:br().optional(),lojaIds:Vg(br()).optional()}).refine(t=>!(t.perfil==="ATENDENTE"&&!t.lojaId||t.perfil==="GERENTE"&&(!t.lojaIds||t.lojaIds.length===0)),{message:"Loja(s) Associada(s) é obrigatória para este perfil.",path:["lojaId","lojaIds"]}).refine(t=>t.senha===t.confirmarSenha,{message:"As senhas não coincidem.",path:["confirmarSenha"]}),CIe=({initialData:t,onSubmit:e,onCancel:r,isLoading:n=!1})=>{const{register:s,handleSubmit:a,formState:{errors:o},control:l,watch:c,setValue:u}=si({resolver:ai(EIe),defaultValues:t||{}}),d=c("perfil"),f=c("parceiroId"),{partners:m,isLoading:g,error:x,getStoresByPartner:v,canFilterClientSide:y,filteringStrategy:w}=NIe(),{data:_=[],isLoading:A,error:C}=ste(f?parseInt(f):null,!y&&!!f),[S,E]=N.useState(t?.lojaIds||[]),R=f?y?v(parseInt(f)):_:[],O=y?!1:A;N.useEffect(()=>{t&&(u("nome",t.name||""),u("email",t.email||""),u("perfil",t.role||"ATENDENTE"))},[t,u]),N.useEffect(()=>{d==="GERENTE"&&u("lojaIds",S)},[S,d,u]),N.useEffect(()=>{d!=="GERENTE"&&(E([]),u("lojaIds",[])),d!=="ATENDENTE"&&u("lojaId","")},[d,u]);const D=M=>{S.includes(M)||E([...S,M])},I=M=>{E(S.filter(U=>U!==M))},$=M=>{const U=R.find(H=>H.id.toString()===M);return U?U.nomeLoja:"Loja não encontrada"};return x?i.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jr,{className:"h-5 w-5 text-red-600"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-red-800",children:"Erro ao carregar dados"}),i.jsx("p",{className:"text-sm text-red-700",children:"Não foi possível carregar os dados necessários para o formulário."})]})]})}):i.jsxs("form",{onSubmit:a(e),className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nome",children:"Nome Completo"}),i.jsx(Fe,{id:"nome",...s("nome")}),o.nome&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.nome.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"email",children:"Email"}),i.jsx(Fe,{id:"email",type:"email",...s("email")}),o.email&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.email.message})]})]}),!t?.id&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"senha",children:"Senha"}),i.jsx(Fe,{id:"senha",type:"password",...s("senha")}),o.senha&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.senha.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"confirmarSenha",children:"Confirmar Senha"}),i.jsx(Fe,{id:"confirmarSenha",type:"password",...s("confirmarSenha")}),o.confirmarSenha&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.confirmarSenha.message})]})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Perfil de Acesso"}),i.jsx(Li,{name:"perfil",control:l,render:({field:M})=>i.jsxs(Yt,{onValueChange:M.onChange,defaultValue:M.value,children:[i.jsx(Ht,{children:i.jsx(Qt,{placeholder:"Selecione um perfil..."})}),i.jsx(Wt,{children:["ADMINISTRADOR","DIRETOR","GERENTE","ATENDENTE","ANALISTA","FINANCEIRO","COBRANÇA"].map(U=>i.jsx(le,{value:U,children:U},U))})]})}),o.perfil&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.perfil.message})]}),(d==="GERENTE"||d==="ATENDENTE")&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"parceiroId",children:"Parceiro"}),i.jsx(Li,{name:"parceiroId",control:l,render:({field:M})=>i.jsxs(Yt,{onValueChange:M.onChange,defaultValue:M.value,disabled:g,children:[i.jsx(Ht,{children:i.jsx(Qt,{placeholder:g?"Carregando parceiros...":"Selecione um parceiro..."})}),i.jsx(Wt,{children:m.map(U=>i.jsx(le,{value:U.id.toString(),children:U.razaoSocial},U.id))})]})}),o.parceiroId&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.parceiroId.message})]}),d==="ATENDENTE"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ue,{children:"Loja Associada"}),C&&i.jsxs("span",{className:"flex items-center gap-1 text-xs text-red-500",children:[i.jsx(zm,{className:"h-3 w-3"}),"Erro ao carregar lojas"]}),w==="server-side"&&i.jsxs("span",{className:"flex items-center gap-1 text-xs text-blue-500",children:[i.jsx(zm,{className:"h-3 w-3"}),"Modo otimizado ativo"]})]}),i.jsx(Li,{name:"lojaId",control:l,render:({field:M})=>i.jsxs(Yt,{onValueChange:M.onChange,defaultValue:M.value,disabled:!f||O,children:[i.jsx(Ht,{children:i.jsx(Qt,{placeholder:O?"Carregando lojas...":"Selecione uma loja..."})}),i.jsx(Wt,{children:R.map(U=>i.jsx(le,{value:U.id.toString(),children:U.nomeLoja},U.id))})]})}),o.lojaId&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.lojaId.message})]}),d==="GERENTE"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ue,{children:"Lojas Associadas (Múltipla Seleção)"}),C&&i.jsxs("span",{className:"flex items-center gap-1 text-xs text-red-500",children:[i.jsx(zm,{className:"h-3 w-3"}),"Erro ao carregar lojas"]}),w==="server-side"&&i.jsxs("span",{className:"flex items-center gap-1 text-xs text-blue-500",children:[i.jsx(zm,{className:"h-3 w-3"}),"Modo otimizado ativo"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Yt,{onValueChange:D,disabled:!f||O,children:[i.jsx(Ht,{children:i.jsx(Qt,{placeholder:O?"Carregando lojas...":"Selecione lojas para adicionar..."})}),i.jsx(Wt,{children:R.filter(M=>!S.includes(M.id.toString())).map(M=>i.jsx(le,{value:M.id.toString(),children:M.nomeLoja},M.id))})]}),S.length>0&&i.jsx("div",{className:"bg-muted/50 flex flex-wrap gap-2 rounded-md border p-2",children:S.map(M=>i.jsxs(ke,{variant:"secondary",className:"flex items-center gap-1",children:[$(M),i.jsx(Vi,{className:"h-3 w-3 cursor-pointer",onClick:()=>I(M)})]},M))})]}),o.lojaIds&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.lojaIds.message})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(se,{type:"button",variant:"ghost",onClick:r,disabled:n,children:"Cancelar"}),i.jsx(se,{type:"submit",disabled:n,children:n?"Salvando...":"Salvar"})]})]})};class z2 extends N.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){["The message port closed before a response was received","mce-autosize-textarea","custom element","ResizeObserver loop limit exceeded","Non-Error promise rejection captured"].some(a=>e.message?.includes(a)||e.stack?.includes(a)||r.componentStack?.includes(a))||console.error("ErrorBoundary caught an error:",e,r)}render(){return this.state.hasError?this.state.error?.message?.includes("mce-autosize-textarea")||this.state.error?.message?.includes("message port closed")?(this.setState({hasError:!1,error:void 0}),this.props.children):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Oops! Algo deu errado"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"A aplicação encontrou um erro inesperado. Por favor, recarregue a página."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Recarregar Página"})]})}):this.props.children}}const TIe=z2,PIe=()=>{const[t,e]=N.useState(!1),[r,n]=N.useState(null),{toast:s}=Fr(),a=ys(),{data:o=[],isLoading:l,error:c}=nt({queryKey:Ut.users.withDetails(),queryFn:async()=>{const w=(await xt.get("/api/admin/users")).data;return Array.isArray(w)?w:Array.isArray(w?.data)?w?.data:[]},staleTime:300*1e3,gcTime:600*1e3}),u=Mt({mutationFn:async y=>{const w={fullName:y.nome,email:y.email,password:y.senha,role:y.perfil,lojaId:y.perfil==="ATENDENTE"&&y.lojaId?parseInt(y.lojaId):null,lojaIds:y.perfil==="GERENTE"&&y.lojaIds?y.lojaIds.map(A=>parseInt(A)):null};return console.log("🔍 [USER CREATE] Sending data:",JSON.stringify(w,null,2)),(await xt.post("/api/admin/users",w)).data},onSuccess:()=>{s({title:"Sucesso",description:"Usuário criado com sucesso!"}),jIe.onUserChange.forEach(y=>{a.invalidateQueries({queryKey:y})}),e(!1),n(null)},onError:y=>{if(console.error("❌ [USER CREATE ERROR]:",y),console.error("❌ [ERROR DATA]:",y.data),y.data?.errors?.fieldErrors?.password){const w=y.data.errors.fieldErrors.password;let _=`Problema com a senha:
`;w.includes("This is a top-10 common password")?(_+=`• Senha muito comum/simples
`,_+=`
Sugestões:
`,_+=`• Use pelo menos 8 caracteres
`,_+=`• Combine letras maiúsculas e minúsculas
`,_+=`• Inclua números e símbolos (@, #, !, etc.)
`,_+=`• Evite sequências como '12345678'
`,_+="• Exemplo: MinhaSenh@123"):_+=w.join(", "),s({title:"Senha rejeitada por segurança",description:_,variant:"destructive",duration:8e3});return}if(y.data?.errors?.fieldErrors?.role){s({title:"Erro no perfil do usuário",description:"Perfil selecionado não é válido. Tente novamente.",variant:"destructive"});return}s({title:"Erro",description:y.message||"Erro ao criar usuário",variant:"destructive"})}}),d=y=>{r?s({title:"Info",description:"Edição de usuários será implementada em breve"}):u.mutate(y)},f=y=>{n(y),e(!0)},m=()=>{n(null),e(!0)},g=y=>{s({title:"Info",description:"Alteração de status será implementada em breve"})},x=()=>{a.invalidateQueries({queryKey:Ut.users.list()})};if(c)return i.jsx(pt,{title:"Gestão de Usuários e Perfis",children:i.jsx(z2,{children:i.jsx("div",{className:"flex h-64 items-center justify-center",children:i.jsxs("div",{className:"space-y-4 text-center",children:[i.jsx("p",{className:"text-red-600 dark:text-red-400",children:"Erro ao carregar usuários"}),i.jsx(se,{onClick:()=>window.location.reload(),variant:"outline",children:"Tentar Novamente"})]})})})});if(l)return i.jsx(pt,{title:"Gestão de Usuários e Perfis",children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 p-3 shadow-lg",children:i.jsx(is,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx(Ot,{className:"mb-2 h-9 w-64"}),i.jsx(Ot,{className:"h-4 w-80"})]})]}),i.jsx(Ot,{className:"h-12 w-40"})]}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((y,w)=>i.jsxs(ee,{className:"border-gray-200 bg-gradient-to-br from-gray-50 to-gray-100 dark:border-gray-700 dark:from-gray-800 dark:to-gray-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(Ot,{className:"h-4 w-24"}),i.jsx(Ot,{className:"h-4 w-4"})]}),i.jsxs(re,{children:[i.jsx(Ot,{className:"mb-1 h-8 w-12"}),i.jsx(Ot,{className:"h-3 w-16"})]})]},w))}),i.jsxs(ee,{className:"border-gray-200 bg-white/50 shadow-xl backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/50",children:[i.jsx(ie,{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(de,{className:"flex items-center gap-2 text-lg",children:[i.jsx(is,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Lista de Usuários"]})}),i.jsx(re,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(pd,{children:[i.jsx(md,{children:i.jsxs(Dn,{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx(Lt,{className:"font-semibold text-gray-900 dark:text-white",children:"Usuário"}),i.jsx(Lt,{className:"font-semibold text-gray-900 dark:text-white",children:"Email"}),i.jsx(Lt,{className:"font-semibold text-gray-900 dark:text-white",children:"Perfil"}),i.jsx(Lt,{className:"font-semibold text-gray-900 dark:text-white",children:"Status"}),i.jsx(Lt,{className:"text-center font-semibold text-gray-900 dark:text-white",children:"Ações"})]})}),i.jsx(gd,{children:[...Array(5)].map((y,w)=>i.jsxs(Dn,{className:"border-b border-gray-100 dark:border-gray-700",children:[i.jsx(vt,{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ot,{className:"h-10 w-10 rounded-full"}),i.jsxs("div",{children:[i.jsx(Ot,{className:"mb-1 h-5 w-32"}),i.jsx(Ot,{className:"h-3 w-24"})]})]})}),i.jsx(vt,{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ot,{className:"h-4 w-4"}),i.jsx(Ot,{className:"h-4 w-48"})]})}),i.jsx(vt,{className:"py-4",children:i.jsx(Ot,{className:"h-6 w-20 rounded-full"})}),i.jsx(vt,{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ot,{className:"h-2 w-2 rounded-full"}),i.jsx(Ot,{className:"h-6 w-16 rounded-full"})]})}),i.jsx(vt,{className:"py-4",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Ot,{className:"h-9 w-9"}),i.jsx(Ot,{className:"h-9 w-9"})]})})]},w))})]})})})]})]})});const v={total:o.length,administradores:Array.isArray(o)?o.filter(y=>y.role==="ADMINISTRADOR").length:0,analistas:Array.isArray(o)?o.filter(y=>y.role==="ANALISTA").length:0,atendentes:Array.isArray(o)?o.filter(y=>y.role==="ATENDENTE").length:0,gerentes:Array.isArray(o)?o.filter(y=>y.role==="GERENTE").length:0,financeiro:Array.isArray(o)?o.filter(y=>y.role==="FINANCEIRO").length:0,ativosPercentual:o.length>0?(o.length/(o.length+0)*100).toFixed(1):"0"};return i.jsxs(pt,{title:"Gestão de Usuários e Perfis",actions:i.jsx(Tp,{onRefresh:x,isLoading:l,variant:"ghost"}),children:[i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 p-3 shadow-lg",children:i.jsx(is,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-gray-300",children:"Gestão de Usuários"}),i.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"Controle completo de usuários e permissões do sistema"})]})]}),i.jsxs(se,{onClick:m,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg transition-all duration-200 hover:from-blue-700 hover:to-purple-700 hover:shadow-xl",size:"lg",children:[i.jsx(jje,{className:"mr-2 h-5 w-5"}),"Novo Usuário"]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(ee,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100 dark:border-blue-800 dark:from-blue-950 dark:to-blue-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total de Usuários"}),i.jsx(Da,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:v.total}),i.jsxs("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[v.ativosPercentual,"% ativos"]})]})]}),i.jsxs(ee,{className:"border-green-200 bg-gradient-to-br from-green-50 to-green-100 dark:border-green-800 dark:from-green-950 dark:to-green-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Administradores"}),i.jsx(ur,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:v.administradores}),i.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-400",children:"Acesso total"})]})]}),i.jsxs(ee,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-purple-100 dark:border-purple-800 dark:from-purple-950 dark:to-purple-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Analistas"}),i.jsx(Hc,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:v.analistas}),i.jsx("p",{className:"mt-1 text-xs text-purple-600 dark:text-purple-400",children:"Análise de crédito"})]})]}),i.jsxs(ee,{className:"border-orange-200 bg-gradient-to-br from-orange-50 to-orange-100 dark:border-orange-800 dark:from-orange-950 dark:to-orange-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"Atendentes"}),i.jsx(is,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:v.atendentes}),i.jsx("p",{className:"mt-1 text-xs text-orange-600 dark:text-orange-400",children:"Atendimento direto"})]})]})]}),i.jsxs(ee,{className:"border-gray-200 bg-white/50 shadow-xl backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/50",children:[i.jsx(ie,{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(de,{className:"flex items-center gap-2 text-lg",children:[i.jsx(is,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Lista de Usuários"]})}),i.jsx(re,{className:"p-0",children:Array.isArray(o)&&o.length===0?i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(is,{className:"mx-auto mb-4 h-16 w-16 text-gray-300 dark:text-gray-600"}),i.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-white",children:"Nenhum usuário encontrado"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Comece criando o primeiro usuário do sistema"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(pd,{children:[i.jsx(md,{children:i.jsxs(Dn,{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx(Lt,{className:"font-semibold text-gray-900 dark:text-white",children:"Usuário"}),i.jsx(Lt,{className:"font-semibold text-gray-900 dark:text-white",children:"Email"}),i.jsx(Lt,{className:"font-semibold text-gray-900 dark:text-white",children:"Perfil"}),i.jsx(Lt,{className:"font-semibold text-gray-900 dark:text-white",children:"Status"}),i.jsx(Lt,{className:"text-center font-semibold text-gray-900 dark:text-white",children:"Ações"})]})}),i.jsx(gd,{children:Array.isArray(o)&&o.map(y=>{const w=y.name.split(" ").map(A=>A[0]).join("").toUpperCase().slice(0,2),_={ADMINISTRADOR:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900 dark:text-red-200",ANALISTA:"bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900 dark:text-purple-200",ATENDENTE:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900 dark:text-blue-200",GERENTE:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900 dark:text-green-200",FINANCEIRO:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900 dark:text-yellow-200",DIRETOR:"bg-indigo-100 text-indigo-800 border-indigo-200 dark:bg-indigo-900 dark:text-indigo-200"}[y.role]||"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900 dark:text-gray-200";return i.jsxs(Dn,{className:"border-b border-gray-100 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700/50",children:[i.jsx(vt,{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(rte,{className:"h-10 w-10 border-2 border-white shadow-md dark:border-gray-700",children:i.jsx(nte,{className:"bg-gradient-to-br from-blue-500 to-purple-600 font-semibold text-white",children:w})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:y.name}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[i.jsx($g,{className:"h-3 w-3"}),"Criado em"," ",new Date(y.createdAt||Date.now()).toLocaleDateString("pt-BR")]})]})]})}),i.jsx(vt,{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(H_,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:y.email})]})}),i.jsx(vt,{className:"py-4",children:i.jsx(ke,{className:`border px-3 py-1 text-xs font-semibold ${_}`,children:y.role})}),i.jsx(vt,{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 animate-pulse rounded-full bg-green-500"}),i.jsx(ke,{className:"border-green-200 bg-green-100 px-3 py-1 text-xs font-semibold text-green-800 dark:bg-green-900 dark:text-green-200",children:"Ativo"})]})}),i.jsx(vt,{className:"py-4",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(se,{variant:"outline",size:"sm",onClick:()=>f(y),className:"h-9 w-9 border-blue-200 p-0 hover:border-blue-300 hover:bg-blue-50 dark:border-blue-700 dark:hover:bg-blue-900/20",title:"Editar usuário",children:i.jsx(Pd,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),i.jsx(se,{variant:"outline",size:"sm",onClick:()=>g(y.id),className:"h-9 w-9 border-red-200 p-0 hover:border-red-300 hover:bg-red-50 dark:border-red-700 dark:hover:bg-red-900/20",title:"Desativar usuário",children:i.jsx(Aje,{className:"h-4 w-4 text-red-600 dark:text-red-400"})})]})})]},y.id)})})]})})})]})]}),i.jsx(mn,{open:t,onOpenChange:e,children:i.jsxs(tn,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[i.jsx(rn,{children:i.jsx(nn,{children:r?"Editar Usuário":"Novo Usuário"})}),i.jsx(TIe,{children:i.jsx(CIe,{initialData:r,onSubmit:d,onCancel:()=>{e(!1),n(null)},isLoading:u.isPending})})]})})]})},kIe=ci({razaoSocial:br().min(1,"Razão Social é obrigatória"),cnpj:br().min(1,"CNPJ é obrigatório")}),OIe=({initialData:t,onSubmit:e,onCancel:r,isLoading:n=!1})=>{const{register:s,handleSubmit:a,formState:{errors:o}}=si({resolver:ai(kIe),defaultValues:t?{razaoSocial:t.razaoSocial,cnpj:t.cnpj}:{razaoSocial:"",cnpj:""}});return i.jsxs("form",{onSubmit:a(e),className:"space-y-6",children:[i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"razaoSocial",className:"text-sm font-medium",children:"Razão Social *"}),i.jsx(Fe,{id:"razaoSocial",...s("razaoSocial"),placeholder:"Nome oficial da empresa",disabled:n,className:"mt-1"}),o.razaoSocial&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.razaoSocial.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"cnpj",className:"text-sm font-medium",children:"CNPJ *"}),i.jsx(Fe,{id:"cnpj",...s("cnpj"),placeholder:"00.000.000/0001-00",disabled:n,className:"mt-1"}),o.cnpj&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.cnpj.message})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 border-t pt-6",children:[i.jsxs(se,{type:"button",variant:"outline",onClick:r,disabled:n,className:"gap-2",children:[i.jsx(Vi,{className:"h-4 w-4"}),"Cancelar"]}),i.jsx(se,{type:"submit",disabled:n,className:"btn-simpix-primary gap-2",children:n?i.jsxs(i.Fragment,{children:[i.jsx(un,{className:"h-4 w-4 animate-spin"}),t?"Atualizando...":"Criando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(PX,{className:"h-4 w-4"}),t?"Atualizar Parceiro":"Criar Parceiro"]})})]})]})},RIe=()=>{const[t,e]=N.useState(!1),[r,n]=N.useState(null),[s,a]=N.useState(!1),[o,l]=N.useState(null),{toast:c}=Fr(),{data:u=[],isLoading:d,error:f}=nt({queryKey:Ut.partners.list(),queryFn:async()=>{const S=await xt.get("/api/parceiros");return Array.isArray(S)?S:S.data||[]}}),m=Mt({mutationFn:async S=>{const E=await xt.post("/api/admin/parceiros",S);return E.data||E},onSuccess:()=>{tr.invalidateQueries({queryKey:Ut.partners.all}),e(!1),n(null),c({title:"Sucesso!",description:"Parceiro criado com sucesso!"})},onError:S=>{c({title:"Erro!",description:`Erro ao criar parceiro: ${S.message}`,variant:"destructive"})}}),g=Mt({mutationFn:async({id:S,data:E})=>{const P=await xt.put(`/api/admin/parceiros/${S}`,E);return P.data||P},onSuccess:()=>{tr.invalidateQueries({queryKey:Ut.partners.all}),e(!1),n(null),c({title:"Sucesso!",description:"Parceiro atualizado com sucesso!"})},onError:S=>{c({title:"Erro!",description:`Erro ao atualizar parceiro: ${S.message}`,variant:"destructive"})}}),x=Mt({mutationFn:async S=>(await xt.delete(`/api/admin/parceiros/${S}`)).data,onSuccess:()=>{tr.invalidateQueries({queryKey:Ut.partners.all}),a(!1),l(null),c({title:"Sucesso!",description:"Parceiro excluído com sucesso!"})},onError:S=>{a(!1),l(null),c({title:"Erro!",description:`Erro ao excluir parceiro: ${S.message}`,variant:"destructive"})}}),v=async S=>{const E={...S,comissaoPadrao:null,tabelaComercialPadraoId:null};r?g.mutate({id:r.id,data:E}):m.mutate(E)},y=S=>{n(S),e(!0)},w=S=>{l(S),a(!0)},_=()=>{o&&x.mutate(o.id)},A=()=>{n(null),e(!0)};if(f)return i.jsx(pt,{title:"Gestão de Parceiros",children:i.jsx("div",{className:"flex h-64 items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-red-600",children:"Erro ao carregar parceiros"}),i.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:f.message})]})})});const C={total:u.length,ativos:u.filter(S=>!S.deletedAt).length,inativos:u.filter(S=>S.deletedAt).length,percentualAtivos:u.length>0?(u.filter(S=>!S.deletedAt).length/u.length*100).toFixed(1):"0"};return d?i.jsx(pt,{title:"Gestão de Parceiros",children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 p-3 shadow-lg",children:i.jsx(Na,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("div",{className:"mb-2 h-9 w-64 animate-pulse rounded-lg bg-gray-200 dark:bg-gray-700"}),i.jsx("div",{className:"h-4 w-80 animate-pulse rounded bg-gray-200 dark:bg-gray-700"})]})]}),i.jsx("div",{className:"h-12 w-40 animate-pulse rounded-lg bg-gray-200 dark:bg-gray-700"})]}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((S,E)=>i.jsxs(ee,{className:"border-gray-200 bg-gradient-to-br from-gray-50 to-gray-100 dark:border-gray-700 dark:from-gray-800 dark:to-gray-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-4 w-4 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"mb-1 h-8 w-12 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-3 w-16 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]})]},E))}),i.jsxs(ee,{className:"border-gray-200 bg-white/50 shadow-xl backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/50",children:[i.jsx(ie,{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(de,{className:"flex items-center gap-2 text-lg",children:[i.jsx(_o,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"}),"Rede de Parceiros"]})}),i.jsx(re,{className:"p-6",children:i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((S,E)=>i.jsxs(ee,{className:"border border-gray-200 dark:border-gray-700",children:[i.jsx(ie,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-9 w-9 animate-pulse rounded-lg bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-5 w-32 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:"h-8 w-8 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-8 w-8 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-8 w-8 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]})]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-6 w-16 animate-pulse rounded-full bg-gray-300 dark:bg-gray-600"})]}),i.jsx("div",{className:"h-3 w-12 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]})]},E))})})]})]})}):i.jsxs(pt,{title:"Gestão de Parceiros",children:[i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 p-3 shadow-lg",children:i.jsx(Na,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-gray-300",children:"Gestão de Parceiros"}),i.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"Gerencie sua rede de parceiros comerciais"})]})]}),i.jsxs(se,{onClick:A,disabled:m.isPending,className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg transition-all duration-200 hover:from-cyan-700 hover:to-blue-700 hover:shadow-xl",size:"lg",children:[i.jsx(Bi,{className:"mr-2 h-5 w-5"}),m.isPending?"Criando...":"Novo Parceiro"]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(ee,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100 dark:border-blue-800 dark:from-blue-950 dark:to-blue-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total de Parceiros"}),i.jsx(Na,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:C.total}),i.jsx("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"parceiros cadastrados"})]})]}),i.jsxs(ee,{className:"border-green-200 bg-gradient-to-br from-green-50 to-green-100 dark:border-green-800 dark:from-green-950 dark:to-green-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Parceiros Ativos"}),i.jsx(Da,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:C.ativos}),i.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-400",children:"em operação"})]})]}),i.jsxs(ee,{className:"border-red-200 bg-gradient-to-br from-red-50 to-red-100 dark:border-red-800 dark:from-red-950 dark:to-red-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Parceiros Inativos"}),i.jsx(Hc,{className:"h-4 w-4 text-red-600 dark:text-red-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:C.inativos}),i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"temporariamente inativos"})]})]}),i.jsxs(ee,{className:"border-cyan-200 bg-gradient-to-br from-cyan-50 to-cyan-100 dark:border-cyan-800 dark:from-cyan-950 dark:to-cyan-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-cyan-700 dark:text-cyan-300",children:"Taxa de Atividade"}),i.jsx(So,{className:"h-4 w-4 text-cyan-600 dark:text-cyan-400"})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold text-cyan-900 dark:text-cyan-100",children:[C.percentualAtivos,"%"]}),i.jsx("p",{className:"mt-1 text-xs text-cyan-600 dark:text-cyan-400",children:"parceiros operacionais"})]})]})]}),i.jsxs(ee,{className:"border-gray-200 bg-white/50 shadow-xl backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/50",children:[i.jsx(ie,{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(de,{className:"flex items-center gap-2 text-lg",children:[i.jsx(_o,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"}),"Rede de Parceiros"]})}),i.jsx(re,{className:"p-6",children:u.length===0?i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(Na,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"Nenhum parceiro cadastrado"}),i.jsx("p",{className:"mb-6 text-gray-500 dark:text-gray-400",children:"Comece adicionando o primeiro parceiro comercial ao sistema."}),i.jsxs(se,{onClick:A,className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white hover:from-cyan-700 hover:to-blue-700",children:[i.jsx(Bi,{className:"mr-2 h-4 w-4"}),"Adicionar Primeiro Parceiro"]})]}):i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(S=>i.jsxs(ee,{className:"border border-gray-200 transition-all duration-200 hover:border-cyan-300 hover:shadow-lg dark:border-gray-700 dark:hover:border-cyan-600",children:[i.jsx(ie,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-3",children:[i.jsx("div",{className:"flex-shrink-0 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-600 p-2",children:i.jsx(Na,{className:"h-5 w-5 text-white"})}),i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx("h3",{className:"truncate text-sm font-semibold text-gray-900 dark:text-gray-100",children:S.razaoSocial})})]}),i.jsxs("div",{className:"flex flex-shrink-0 gap-1",children:[i.jsx(on,{to:`/parceiros/detalhe/${S.id}`,children:i.jsx(se,{variant:"outline",size:"sm",className:"h-7 w-7 border-gray-300 p-0 hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-950",children:i.jsx(wo,{className:"h-3 w-3 text-gray-600 hover:text-blue-600"})})}),i.jsx(se,{variant:"outline",size:"sm",onClick:()=>y(S),disabled:g.isPending,className:"h-7 w-7 border-gray-300 p-0 hover:border-cyan-400 hover:bg-cyan-50 dark:hover:bg-cyan-950",children:i.jsx(Pd,{className:"h-3 w-3 text-gray-600 hover:text-cyan-600"})}),i.jsx(se,{variant:"outline",size:"sm",onClick:()=>w(S),disabled:x.isPending,className:"h-7 w-7 border-gray-300 p-0 hover:border-red-400 hover:bg-red-50 dark:hover:bg-red-950",children:i.jsx(ay,{className:"h-3 w-3 text-gray-600 hover:text-red-600"})})]})]})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(is,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"CNPJ"})]}),i.jsx(ke,{className:"border-gray-200 bg-gray-100 font-mono text-xs text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:S.cnpj})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Da,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"})]}),i.jsx(ke,{className:S.deletedAt?"border-red-200 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"border-green-200 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:S.deletedAt?"Inativo":"Ativo"})]}),i.jsx("div",{className:"border-t border-gray-100 pt-2 dark:border-gray-700",children:i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",S.id]})})]})]},S.id))})})]})]}),i.jsx(mn,{open:t,onOpenChange:e,children:i.jsxs(tn,{className:"max-h-[90vh] overflow-y-auto",children:[i.jsx(rn,{children:i.jsx(nn,{children:r?"Editar Parceiro":"Novo Parceiro"})}),i.jsx(OIe,{initialData:r,onSubmit:v,onCancel:()=>{e(!1),n(null)},isLoading:m.isPending||g.isPending})]})}),i.jsx($2,{open:s,onOpenChange:a,children:i.jsxs(SS,{children:[i.jsxs(jS,{children:[i.jsx(NS,{children:"Confirmar Exclusão"}),i.jsxs(ES,{children:["Tem certeza que deseja excluir o parceiro"," ",i.jsx("strong",{children:o?.razaoSocial}),"?",i.jsx("br",{}),i.jsx("br",{}),i.jsx("span",{className:"font-medium text-red-600",children:"Atenção: Esta ação não pode ser desfeita. O parceiro será permanentemente removido do sistema."}),o&&i.jsx("div",{className:"mt-3 rounded bg-gray-50 p-3 dark:bg-gray-800",children:i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"CNPJ:"})," ",o.cnpj]})})]})]}),i.jsxs(AS,{children:[i.jsx(TS,{onClick:()=>{a(!1),l(null)},disabled:x.isPending,children:"Cancelar"}),i.jsx(CS,{onClick:_,disabled:x.isPending,className:"bg-red-600 text-white hover:bg-red-700",children:x.isPending?"Excluindo...":"Excluir Parceiro"})]})]})})]})},IIe=ci({tabelaComercial:br().nonempty("A seleção da tabela é obrigatória."),comissao:Za().positive("A comissão deve ser um número positivo.")}),MIe=ci({nomeTabela:br().min(3,"Nome da tabela deve ter pelo menos 3 caracteres"),produtoId:Za().positive("Produto é obrigatório"),taxaJuros:Za().positive("Taxa de juros deve ser positiva"),prazos:Vg(Za().positive()).min(1,"Deve ter pelo menos um prazo"),comissao:Za().min(0,"Comissão deve ser maior ou igual a zero").default(0)}),DIe=()=>{const[t,e]=F_("/parceiros/detalhe/:id"),r=e?parseInt(e.id):null,[n,s]=N.useState(!1),[a,o]=N.useState(""),[l,c]=N.useState([]),{toast:u}=Fr(),{register:d,handleSubmit:f,formState:{errors:m},control:g,watch:x,setValue:v}=si({resolver:ai(IIe)}),{register:y,handleSubmit:w,formState:{errors:_},setValue:A,reset:C,control:S}=si({resolver:ai(MIe)}),E=x("tabelaComercial"),{data:P=[],isLoading:R,error:O}=nt({queryKey:["tabelas-comerciais"],queryFn:async()=>{const V=await xt.get("/api/tabelas-comerciais");return V.data||V}}),{data:D=[],isLoading:I}=nt({queryKey:["produtos"],queryFn:async()=>{const V=await xt.get("/api/produtos");return V.data||V}}),$=Mt({mutationFn:async V=>{if(!r)throw new Error("Partner ID not found");const W={nomeTabela:V.nomeTabela,taxaJuros:V.taxaJuros,comissao:V.comissao,prazos:V.prazos,produtoIds:[V.produtoId],parceiroId:r};return console.log("Sending payload to backend:",W),(await xt.post("/api/admin/tabelas-comerciais",W)).data},onSuccess:()=>{tr.invalidateQueries({queryKey:["tabelas-comerciais"]}),s(!1),C(),c([]),u({title:"Sucesso!",description:"Tabela comercial personalizada criada com sucesso!"})},onError:V=>{const W=V instanceof Error?V.message:"Erro ao criar tabela comercial";u({title:"Erro!",description:W,variant:"destructive"})}}),M=V=>{console.log("Configuração Salva:",V),u({title:"Configuração salva",description:"As configurações comerciais foram atualizadas."})},U=V=>{if(l.length===0){u({title:"Erro!",description:"Adicione pelo menos um prazo permitido.",variant:"destructive"});return}console.log("Form data:",V),console.log("Prazos:",l),$.mutate({...V,prazos:l})},H=()=>{const V=parseInt(a);if(V>0&&!l.includes(V)){const W=[...l,V].sort((B,F)=>B-F);c(W),A("prazos",W),o("")}},z=V=>{const W=l.filter(B=>B!==V);c(W),A("prazos",W)},q=V=>{V.key==="Enter"&&(V.preventDefault(),H())};return G.useEffect(()=>{E==="custom"&&s(!0)},[E]),i.jsxs(i.Fragment,{children:[i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Configuração Comercial"})}),i.jsx(re,{children:i.jsxs("form",{onSubmit:f(M),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"tabelaComercial",children:"Tabela Comercial Aplicável"}),i.jsx(Li,{name:"tabelaComercial",control:g,render:({field:V})=>i.jsxs(Yt,{onValueChange:V.onChange,defaultValue:V.value,children:[i.jsx(Ht,{id:"tabelaComercial",children:i.jsx(Qt,{placeholder:"Selecione uma tabela..."})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"custom",children:"-- Criar Tabela Personalizada --"}),R?i.jsx(le,{value:"loading",disabled:!0,children:"Carregando tabelas..."}):O?i.jsx(le,{value:"error",disabled:!0,children:"Erro ao carregar tabelas"}):P.length===0?i.jsx(le,{value:"empty",disabled:!0,children:"Nenhuma tabela encontrada"}):P.map(W=>i.jsxs(le,{value:W.id.toString(),children:[W.nomeTabela," - ",W.taxaJuros,"% a.m."]},W.id))]})]})}),m.tabelaComercial&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.tabelaComercial.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"comissao",children:"Comissão do Parceiro (%)"}),i.jsx(Fe,{id:"comissao",type:"number",...d("comissao",{valueAsNumber:!0})}),m.comissao&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.comissao.message})]}),i.jsx(se,{type:"submit",className:"w-full",children:"Salvar Configuração Comercial"})]})})]}),i.jsx(mn,{open:n,onOpenChange:V=>{s(V),V||(C(),c([]),v("tabelaComercial",""))},children:i.jsxs(tn,{className:"sm:max-w-[500px]",children:[i.jsx(rn,{children:i.jsx(nn,{children:"Criar Tabela Comercial Personalizada"})}),i.jsxs("form",{onSubmit:w(U),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nomeTabela",children:"Nome da Tabela"}),i.jsx(Fe,{id:"nomeTabela",...y("nomeTabela"),placeholder:"Ex: Tabela Especial - Parceiro X"}),_.nomeTabela&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:_.nomeTabela.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"produtoId",children:"Produto Associado"}),i.jsx(Li,{name:"produtoId",control:S,render:({field:V})=>i.jsxs(Yt,{onValueChange:W=>V.onChange(parseInt(W)),value:V.value?.toString(),children:[i.jsx(Ht,{id:"produtoId",children:i.jsx(Qt,{placeholder:"Selecione um produto..."})}),i.jsx(Wt,{children:I?i.jsx(le,{value:"loading",disabled:!0,children:"Carregando produtos..."}):D.length===0?i.jsx(le,{value:"empty",disabled:!0,children:"Nenhum produto encontrado"}):D.filter(W=>W.isActive).map(W=>i.jsx(le,{value:W.id.toString(),children:W.nomeProduto},W.id))})]})}),_.produtoId&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:_.produtoId.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"taxaJuros",children:"Taxa de Juros Mensal (%)"}),i.jsx(Fe,{id:"taxaJuros",type:"number",step:"0.01",...y("taxaJuros",{valueAsNumber:!0}),placeholder:"Ex: 2.5"}),_.taxaJuros&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:_.taxaJuros.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"comissao",children:"Comissão (%)"}),i.jsx(Fe,{id:"comissao",type:"number",step:"0.01",min:"0",...y("comissao",{valueAsNumber:!0}),placeholder:"Ex: 15.50"}),_.comissao&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:_.comissao.message})]}),i.jsxs("div",{children:[i.jsx(ue,{children:"Prazos Permitidos (meses)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Fe,{type:"number",value:a,onChange:V=>o(V.target.value),onKeyDown:q,placeholder:"Ex: 12"}),i.jsx(se,{type:"button",onClick:H,size:"sm",children:"Adicionar"})]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:l.map(V=>i.jsxs(ke,{className:"flex items-center gap-1",children:[V," meses",i.jsx("button",{type:"button",onClick:()=>z(V),className:"ml-1 hover:text-red-500",children:i.jsx(Vi,{className:"h-3 w-3"})})]},V))}),_.prazos&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:_.prazos.message})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(se,{type:"button",variant:"outline",onClick:()=>{s(!1),C(),c([]),v("tabelaComercial","")},children:"Cancelar"}),i.jsx(se,{type:"submit",disabled:$.isPending,children:$.isPending?"Criando...":"Criar Tabela"})]})]})]})})]})},LIe=ci({nome:br().min(3,"Nome da loja é obrigatório."),endereco:br().min(10,"Endereço é obrigatório.")}),$Ie=({onSubmit:t,onCancel:e})=>{const{register:r,handleSubmit:n,formState:{errors:s}}=si({resolver:ai(LIe)});return i.jsxs("form",{onSubmit:n(t),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nome",children:"Nome da Loja"}),i.jsx(Fe,{id:"nome",...r("nome")}),s.nome&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.nome.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"endereco",children:"Endereço Completo"}),i.jsx(Fe,{id:"endereco",...r("endereco")}),s.endereco&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.endereco.message})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(se,{type:"button",variant:"ghost",onClick:e,children:"Cancelar"}),i.jsx(se,{type:"submit",children:"Salvar Loja"})]})]})},FIe=()=>{const[,t]=F_("/parceiros/detalhe/:id"),e=t?parseInt(t.id):null,[r,n]=N.useState(!1),{data:s,isLoading:a,error:o}=nt({queryKey:["partner",e],queryFn:async()=>{if(!e)throw new Error("Partner ID is required");const m=await xt.get(`/api/parceiros/${e}`);return m.data||m},enabled:!!e}),{data:l=[],isLoading:c,error:u}=ste(e,!!e),d=m=>{console.log("Nova Loja Adicionada:",m),n(!1)};if(a)return i.jsx(pt,{title:"Carregando...",children:i.jsx("div",{className:"flex h-64 items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Carregando dados do parceiro..."})]})})});if(o||!s)return i.jsx(pt,{title:"Parceiro não encontrado",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"mb-4 text-red-600",children:o?.message||"Parceiro não encontrado."}),i.jsx(on,{to:"/parceiros",className:"text-blue-600 hover:underline",children:"Voltar para a lista de parceiros"})]})});const f={total:l.length,ativos:l.length};return i.jsxs(pt,{title:`Detalhe do Parceiro: ${s.razaoSocial||"Parceiro"}`,children:[i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(on,{to:"/parceiros",children:i.jsxs(se,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(NM,{className:"h-4 w-4"}),"Voltar"]})}),i.jsx("div",{className:"rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 p-3 shadow-lg",children:i.jsx(Na,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-gray-300",children:s.razaoSocial}),i.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"Informações detalhadas do parceiro comercial"})]})]}),i.jsx(ke,{className:"border-green-200 bg-green-100 px-3 py-1 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Ativo"})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(ee,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100 dark:border-blue-800 dark:from-blue-950 dark:to-blue-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"CNPJ"}),i.jsx(Na,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})]}),i.jsx(re,{children:i.jsx("div",{className:"font-mono text-lg font-bold text-blue-900 dark:text-blue-100",children:s.cnpj})})]}),i.jsxs(ee,{className:"border-green-200 bg-gradient-to-br from-green-50 to-green-100 dark:border-green-800 dark:from-green-950 dark:to-green-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Total de Lojas"}),i.jsx(Ca,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:f.total}),i.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-400",children:"lojas cadastradas"})]})]}),i.jsxs(ee,{className:"border-cyan-200 bg-gradient-to-br from-cyan-50 to-cyan-100 dark:border-cyan-800 dark:from-cyan-950 dark:to-cyan-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-cyan-700 dark:text-cyan-300",children:"Lojas Ativas"}),i.jsx(Da,{className:"h-4 w-4 text-cyan-600 dark:text-cyan-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-cyan-900 dark:text-cyan-100",children:f.ativos}),i.jsx("p",{className:"mt-1 text-xs text-cyan-600 dark:text-cyan-400",children:"em operação"})]})]}),i.jsxs(ee,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-purple-100 dark:border-purple-800 dark:from-purple-950 dark:to-purple-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"ID do Parceiro"}),i.jsx(Hc,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:s.id}),i.jsx("p",{className:"mt-1 text-xs text-purple-600 dark:text-purple-400",children:"identificador único"})]})]})]}),i.jsxs(ee,{className:"border-gray-200 bg-white/50 shadow-xl backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/50",children:[i.jsx(ie,{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(de,{className:"flex items-center gap-2 text-lg",children:[i.jsx(Ca,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"}),"Lojas do Parceiro"]}),i.jsxs(se,{onClick:()=>n(!0),className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg transition-all duration-200 hover:from-cyan-700 hover:to-blue-700 hover:shadow-xl",children:[i.jsx(Bi,{className:"mr-2 h-4 w-4"}),"Adicionar Nova Loja"]})]})}),i.jsx(re,{className:"p-6",children:c?i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(3)].map((m,g)=>i.jsxs(ee,{className:"border border-gray-200 dark:border-gray-700",children:[i.jsx(ie,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-9 w-9 animate-pulse rounded-lg bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-5 w-32 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-3 w-16 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]})]},g))}):u?i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(Ca,{className:"mx-auto mb-4 h-12 w-12 text-red-400"}),i.jsx("h3",{className:"mb-2 text-lg font-medium text-red-600",children:"Erro ao carregar lojas"}),i.jsx("p",{className:"mb-6 text-red-500",children:u.message})]}):l.length===0?i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(Ca,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"Nenhuma loja cadastrada"}),i.jsx("p",{className:"mb-6 text-gray-500 dark:text-gray-400",children:"Comece adicionando a primeira loja deste parceiro ao sistema."}),i.jsxs(se,{onClick:()=>n(!0),className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white hover:from-cyan-700 hover:to-blue-700",children:[i.jsx(Bi,{className:"mr-2 h-4 w-4"}),"Adicionar Primeira Loja"]})]}):i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map(m=>i.jsxs(ee,{className:"border border-gray-200 transition-all duration-200 hover:border-cyan-300 hover:shadow-lg dark:border-gray-700 dark:hover:border-cyan-600",children:[i.jsx(ie,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 p-2",children:i.jsx(Ca,{className:"h-5 w-5 text-white"})}),i.jsx("div",{children:i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:m.nomeLoja})})]})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(kM,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Endereço"})]}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:m.endereco||"Não informado"})]}),i.jsx("div",{className:"border-t border-gray-100 pt-2 dark:border-gray-700",children:i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",m.id]})})]})]},m.id))})})]}),i.jsx(DIe,{})]}),i.jsx(mn,{open:r,onOpenChange:n,children:i.jsxs(tn,{children:[i.jsx(rn,{children:i.jsx(nn,{children:"Adicionar Nova Loja"})}),i.jsx($Ie,{onSubmit:d,onCancel:()=>n(!1)})]})})]})},NU={NETWORK_ERROR:"Erro de conexão. Verifique sua internet e tente novamente.",TIMEOUT_ERROR:"A requisição demorou muito. Tente novamente.",VALIDATION_ERROR:"Dados inválidos. Verifique os campos marcados.",REQUIRED_FIELD:"Preencha todos os campos obrigatórios.",INVALID_FORMAT:"Formato inválido. Verifique os dados inseridos.",UNAUTHORIZED:"Sessão expirada. Faça login novamente.",FORBIDDEN:"Você não tem permissão para esta ação.",PERMISSION_ERROR:"Acesso negado. Entre em contato com o administrador.",DUPLICATE_ENTRY:"Este registro já existe no sistema.",NOT_FOUND:"Registro não encontrado.",BUSINESS_RULE:"Esta operação viola uma regra de negócio.",DEPENDENCY_ERROR:"Este item não pode ser excluído pois está em uso.",SERVER_ERROR:"Erro interno. Tente novamente em alguns instantes.",DATABASE_ERROR:"Erro ao acessar o banco de dados.",SERVICE_UNAVAILABLE:"Serviço temporariamente indisponível.",PROPOSAL_LOCKED:"Esta proposta está sendo editada por outro usuário.",INVALID_STATUS_TRANSITION:"Mudança de status inválida para esta proposta.",INSUFFICIENT_DATA:"Dados insuficientes para completar a operação.",FILE_TOO_LARGE:"Arquivo muito grande. Tamanho máximo: 10MB.",INVALID_FILE_TYPE:"Tipo de arquivo não permitido.",DEFAULT:"Ocorreu um erro. Tente novamente."},EU={400:"VALIDATION_ERROR",401:"UNAUTHORIZED",403:"FORBIDDEN",404:"NOT_FOUND",408:"TIMEOUT_ERROR",409:"DUPLICATE_ENTRY",422:"BUSINESS_RULE",429:"RATE_LIMIT",500:"SERVER_ERROR",502:"SERVICE_UNAVAILABLE",503:"SERVICE_UNAVAILABLE",504:"TIMEOUT_ERROR"},SE=t=>{let e="DEFAULT",r="",n="";if(t.response){const{status:a,data:o}=t.response;a&&EU[a]&&(e=EU[a]),o?.code&&(e=o.code),r=o?.message||t.message,o?.userMessage&&(n=o.userMessage)}else t.code?(e=t.code==="ERR_NETWORK"?"NETWORK_ERROR":t.code,r=t.message):t.message&&(r=t.message);const s=n||NU[e]||NU.DEFAULT;return Ls({title:"Erro",description:s,variant:"destructive"}),{code:e,userMessage:s,technicalMessage:r,originalError:t}},jE=(t,e)=>{const r={create:`${e} criado com sucesso!`,update:`${e} atualizado com sucesso!`,delete:`${e} excluído com sucesso!`,save:`${e} salvos com sucesso!`,send:`${e} enviados com sucesso!`,approve:`${e} aprovada com sucesso!`,reject:`${e} rejeitada com sucesso!`,upload:"Arquivo enviado com sucesso!",default:"Operação realizada com sucesso!"};Ls({title:"Sucesso",description:r[t]||r.default})},BIe=ci({nome:br().min(3,"Nome do Produto é obrigatório."),status:Hg(["Ativo","Inativo"],{errorMap:()=>({message:"Status é obrigatório."})}),tacValor:Za().min(0,"Valor da TAC deve ser maior ou igual a zero").default(0),tacTipo:Hg(["fixo","percentual"],{errorMap:()=>({message:"Tipo de TAC é obrigatório."})}).default("fixo"),tacAtivaParaClientesExistentes:nO().default(!0)}),UIe=({onSubmit:t,onCancel:e,initialData:r})=>{const{control:n,register:s,handleSubmit:a,formState:{errors:o}}=si({resolver:ai(BIe),defaultValues:r||{status:"Ativo",tacValor:0,tacTipo:"fixo",tacAtivaParaClientesExistentes:!0}});return i.jsxs("form",{onSubmit:a(t),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nome",children:"Nome do Produto"}),i.jsx(Fe,{id:"nome",...s("nome")}),o.nome&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.nome.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"status",children:"Status"}),i.jsx(Li,{name:"status",control:n,render:({field:l})=>i.jsxs(Yt,{onValueChange:l.onChange,defaultValue:l.value,children:[i.jsx(Ht,{id:"status",children:i.jsx(Qt,{placeholder:"Selecione o Status"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"Ativo",children:"Ativo"}),i.jsx(le,{value:"Inativo",children:"Inativo"})]})]})}),o.status&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.status.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"tacValor",children:"Valor da TAC (R$)"}),i.jsx(Fe,{id:"tacValor",type:"number",step:"0.01",min:"0",placeholder:"0.00",...s("tacValor",{valueAsNumber:!0})}),o.tacValor&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.tacValor.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"tacTipo",children:"Tipo de TAC"}),i.jsx(Li,{name:"tacTipo",control:n,render:({field:l})=>i.jsxs(Yt,{onValueChange:l.onChange,defaultValue:l.value,children:[i.jsx(Ht,{id:"tacTipo",children:i.jsx(Qt,{placeholder:"Selecione o Tipo de TAC"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"fixo",children:"Valor Fixo (R$)"}),i.jsx(le,{value:"percentual",children:"Percentual (%)"})]})]})}),o.tacTipo&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.tacTipo.message})]}),i.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-blue-50",children:[i.jsx("div",{className:"text-sm font-medium text-blue-900",children:"📋 Configuração TAC para Clientes"}),i.jsxs("div",{className:"text-xs text-blue-700 mb-3",children:["• ",i.jsx("strong",{children:"Clientes NOVOS:"})," Sempre pagam 10% TAC (automático) ",i.jsx("br",{}),"• ",i.jsx("strong",{children:"Clientes EXISTENTES:"})," TAC configurável abaixo"]}),i.jsx(Li,{name:"tacAtivaParaClientesExistentes",control:n,render:({field:l})=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kS,{id:"tacAtivaParaClientesExistentes",checked:l.value,onCheckedChange:l.onChange,"data-testid":"checkbox-tac-clientes-existentes"}),i.jsx(ue,{htmlFor:"tacAtivaParaClientesExistentes",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Ativar TAC para clientes existentes"})]})}),i.jsx("div",{className:"text-xs text-gray-600",children:"Se desmarcado, clientes existentes ficam isentos de TAC neste produto"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(se,{type:"button",variant:"ghost",onClick:e,children:"Cancelar"}),i.jsx(se,{type:"submit",children:"Salvar"})]})]})};function zIe(){const[t,e]=N.useState(!1),[r,n]=N.useState(null);Fr();const s=ys(),{data:a=[],isLoading:o}=nt({queryKey:["produtos"],queryFn:async()=>{const v=await xt.get("/api/produtos");return Array.isArray(v)?v:v.data||[]}}),l=Mt({mutationFn:async v=>{const y=await xt.post("/api/produtos",{nome:v.nome,status:v.status,tacValor:v.tacValor,tacTipo:v.tacTipo,tacAtivaParaClientesExistentes:v.tacAtivaParaClientesExistentes});return y.data||y},onSuccess:()=>{s.invalidateQueries({queryKey:["produtos"]}),jE("create","Produto"),m()},onError:v=>{SE(v)}}),c=Mt({mutationFn:async({id:v,data:y})=>{const w=await xt.put(`/api/produtos/${v}`,{nome:y.nome,status:y.status,tacValor:y.tacValor,tacTipo:y.tacTipo,tacAtivaParaClientesExistentes:y.tacAtivaParaClientesExistentes});return w.data||w},onSuccess:()=>{s.invalidateQueries({queryKey:["produtos"]}),jE("update","Produto"),m()},onError:v=>{SE(v)}}),u=Mt({mutationFn:async v=>{await xt.delete(`/api/produtos/${v}`)},onSuccess:()=>{s.invalidateQueries({queryKey:["produtos"]}),jE("delete","Produto")},onError:v=>{SE(v)}}),d=v=>{n(v),e(!0)},f=v=>{confirm("Tem certeza de que deseja excluir este produto?")&&u.mutate(v)},m=()=>{e(!1),n(null)},g=()=>{n(null),e(!0)};if(o)return i.jsx(pt,{title:"Gestão de Produtos",children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 p-3 shadow-lg",children:i.jsx(Qa,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("div",{className:"mb-2 h-9 w-64 animate-pulse rounded-lg bg-gray-200 dark:bg-gray-700"}),i.jsx("div",{className:"h-4 w-80 animate-pulse rounded bg-gray-200 dark:bg-gray-700"})]})]}),i.jsx("div",{className:"h-12 w-40 animate-pulse rounded-lg bg-gray-200 dark:bg-gray-700"})]}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((v,y)=>i.jsxs(ee,{className:"border-gray-200 bg-gradient-to-br from-gray-50 to-gray-100 dark:border-gray-700 dark:from-gray-800 dark:to-gray-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-4 w-4 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"mb-1 h-8 w-12 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-3 w-16 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]})]},y))})]})});const x={total:a.length,ativos:Array.isArray(a)?a.filter(v=>v.isActive).length:0,inativos:Array.isArray(a)?a.filter(v=>!v.isActive).length:0,percentualAtivos:a.length>0?((Array.isArray(a)?a.filter(v=>v.isActive).length:0)/a.length*100).toFixed(1):"0"};return i.jsx(pt,{title:"Gestão de Produtos",children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 p-3 shadow-lg",children:i.jsx(Qa,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-gray-300",children:"Gestão de Produtos"}),i.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"Gerencie os produtos de crédito disponíveis no sistema"})]})]}),i.jsxs(mn,{open:t,onOpenChange:e,children:[i.jsx(XY,{asChild:!0,children:i.jsxs(se,{onClick:g,className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg transition-all duration-200 hover:from-cyan-700 hover:to-blue-700 hover:shadow-xl",size:"lg",children:[i.jsx(Bi,{className:"mr-2 h-5 w-5"}),"Novo Produto"]})}),i.jsxs(tn,{className:"border-border bg-card",children:[i.jsxs(rn,{children:[i.jsx(nn,{className:"text-card-foreground",children:r?"Editar Produto":"Novo Produto"}),i.jsx(qs,{className:"text-muted-foreground",children:r?"Atualize as informações do produto":"Adicione um novo produto de crédito"})]}),i.jsx(UIe,{onSubmit:v=>{r?c.mutate({id:r.id,data:v}):l.mutate(v)},onCancel:m,initialData:r?{nome:r.nomeProduto,status:r.isActive?"Ativo":"Inativo",tacValor:r.tacValor?parseFloat(r.tacValor.toString()):0,tacTipo:r.tacTipo||"fixo",tacAtivaParaClientesExistentes:r.tacAtivaParaClientesExistentes??!0}:void 0})]})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(ee,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100 dark:border-blue-800 dark:from-blue-950 dark:to-blue-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total de Produtos"}),i.jsx(Qa,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:x.total}),i.jsx("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"produtos cadastrados"})]})]}),i.jsxs(ee,{className:"border-green-200 bg-gradient-to-br from-green-50 to-green-100 dark:border-green-800 dark:from-green-950 dark:to-green-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Produtos Ativos"}),i.jsx(Da,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:x.ativos}),i.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-400",children:"disponíveis para venda"})]})]}),i.jsxs(ee,{className:"border-red-200 bg-gradient-to-br from-red-50 to-red-100 dark:border-red-800 dark:from-red-950 dark:to-red-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Produtos Inativos"}),i.jsx(Hc,{className:"h-4 w-4 text-red-600 dark:text-red-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:x.inativos}),i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"temporariamente desabilitados"})]})]}),i.jsxs(ee,{className:"border-cyan-200 bg-gradient-to-br from-cyan-50 to-cyan-100 dark:border-cyan-800 dark:from-cyan-950 dark:to-cyan-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-cyan-700 dark:text-cyan-300",children:"Taxa de Ativação"}),i.jsx(So,{className:"h-4 w-4 text-cyan-600 dark:text-cyan-400"})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold text-cyan-900 dark:text-cyan-100",children:[x.percentualAtivos,"%"]}),i.jsx("p",{className:"mt-1 text-xs text-cyan-600 dark:text-cyan-400",children:"produtos em operação"})]})]})]}),i.jsxs(ee,{className:"border-gray-200 bg-white/50 shadow-xl backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/50",children:[i.jsx(ie,{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(de,{className:"flex items-center gap-2 text-lg",children:[i.jsx(_o,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"}),"Catálogo de Produtos"]})}),i.jsx(re,{className:"p-6",children:a.length===0?i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(Qa,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"Nenhum produto cadastrado"}),i.jsx("p",{className:"mb-6 text-gray-500 dark:text-gray-400",children:"Comece adicionando o primeiro produto de crédito ao sistema."}),i.jsxs(se,{onClick:g,className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white hover:from-cyan-700 hover:to-blue-700",children:[i.jsx(Bi,{className:"mr-2 h-4 w-4"}),"Adicionar Primeiro Produto"]})]}):i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(v=>i.jsxs(ee,{className:"border border-gray-200 transition-all duration-200 hover:border-cyan-300 hover:shadow-lg dark:border-gray-700 dark:hover:border-cyan-600",children:[i.jsx(ie,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"rounded-lg bg-gradient-to-br from-cyan-500 to-blue-600 p-2",children:i.jsx(Qa,{className:"h-5 w-5 text-white"})}),i.jsx("div",{children:i.jsx("h3",{className:"truncate font-semibold text-gray-900 dark:text-gray-100",children:v.nomeProduto})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(se,{variant:"outline",size:"sm",onClick:()=>d(v),className:"h-8 w-8 border-gray-300 p-0 hover:border-cyan-400 hover:bg-cyan-50 dark:hover:bg-cyan-950",children:i.jsx(yje,{className:"h-3 w-3 text-gray-600 hover:text-cyan-600"})}),i.jsx(se,{variant:"outline",size:"sm",onClick:()=>f(v.id),className:"h-8 w-8 border-gray-300 p-0 hover:border-red-400 hover:bg-red-50 dark:hover:bg-red-950",children:i.jsx(ay,{className:"h-3 w-3 text-gray-600 hover:text-red-600"})})]})]})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Da,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"})]}),i.jsx(ke,{className:v.isActive?"border-green-200 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"border-red-200 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:v.isActive?"Ativo":"Inativo"})]}),i.jsx("div",{className:"border-t border-gray-100 pt-2 dark:border-gray-700",children:i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",v.id]})})]})]},v.id))})})]})]})})}const qIe=ci({parceiroId:Za({required_error:"Parceiro é obrigatório"}).min(1,"Selecione um parceiro"),nomeLoja:br().min(1,"Nome da loja é obrigatório"),endereco:br().min(1,"Endereço é obrigatório")}),VIe=({initialData:t,onSubmit:e,onCancel:r,isLoading:n=!1})=>{const{register:s,handleSubmit:a,control:o,formState:{errors:l}}=si({resolver:ai(qIe),defaultValues:t?{parceiroId:t.parceiroId,nomeLoja:t.nomeLoja,endereco:t.endereco}:{parceiroId:void 0,nomeLoja:"",endereco:""}}),{data:c=[]}=nt({queryKey:Ut.partners.list(),queryFn:async()=>{const{api:u}=await Di(async()=>{const{api:f}=await Promise.resolve().then(()=>Dg);return{api:f}},void 0),d=await u.get("/api/parceiros");return d.data||d}});return i.jsxs("form",{onSubmit:a(e),className:"space-y-6",children:[i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"parceiroId",className:"text-sm font-medium",children:"Parceiro *"}),i.jsx(Li,{name:"parceiroId",control:o,render:({field:u})=>i.jsxs(Yt,{onValueChange:d=>u.onChange(parseInt(d,10)),defaultValue:u.value?String(u.value):void 0,disabled:n,children:[i.jsx(Ht,{className:"mt-1",children:i.jsx(Qt,{placeholder:"Selecione um parceiro..."})}),i.jsx(Wt,{children:c.map(d=>i.jsx(le,{value:String(d.id),children:d.razaoSocial},d.id))})]})}),l.parceiroId&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.parceiroId.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nomeLoja",className:"text-sm font-medium",children:"Nome da Loja *"}),i.jsx(Fe,{id:"nomeLoja",...s("nomeLoja"),placeholder:"Nome da loja",disabled:n,className:"mt-1"}),l.nomeLoja&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.nomeLoja.message})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"endereco",className:"text-sm font-medium",children:"Endereço *"}),i.jsx(Fe,{id:"endereco",...s("endereco"),placeholder:"Endereço completo da loja",disabled:n,className:"mt-1"}),l.endereco&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.endereco.message})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 border-t pt-6",children:[i.jsxs(se,{type:"button",variant:"outline",onClick:r,disabled:n,className:"gap-2",children:[i.jsx(Vi,{className:"h-4 w-4"}),"Cancelar"]}),i.jsx(se,{type:"submit",disabled:n,className:"btn-simpix-primary gap-2",children:n?i.jsxs(i.Fragment,{children:[i.jsx(un,{className:"h-4 w-4 animate-spin"}),t?"Atualizando...":"Criando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(PX,{className:"h-4 w-4"}),t?"Atualizar Loja":"Criar Loja"]})})]})]})};function HIe(){const[t,e]=N.useState(null),[r,n]=N.useState(!1),[s,a]=N.useState("create"),o=ys(),{toast:l}=Fr(),{data:c=[],isLoading:u}=nt({queryKey:Ut.stores.list(),queryFn:async()=>{const A=await xt.get("/api/admin/lojas");return Array.isArray(A)?A:A.data||[]}}),d=Mt({mutationFn:async A=>{const C=await xt.post("/api/admin/lojas",A);return C.data||C},onSuccess:()=>{l({title:"Sucesso",description:"Loja criada com sucesso!"}),o.invalidateQueries({queryKey:Ut.stores.all}),o.invalidateQueries({queryKey:Ut.system.all}),o.invalidateQueries({queryKey:Ut.users.all}),n(!1),e(null)},onError:A=>{l({title:"Erro",description:A.message||"Erro ao criar loja",variant:"destructive"})}}),f=Mt({mutationFn:async({id:A,data:C})=>{const S=await xt.put(`/api/admin/lojas/${A}`,C);return S.data||S},onSuccess:()=>{l({title:"Sucesso",description:"Loja atualizada com sucesso!"}),o.invalidateQueries({queryKey:Ut.stores.all}),o.invalidateQueries({queryKey:Ut.system.all}),o.invalidateQueries({queryKey:Ut.users.all}),n(!1),e(null)},onError:A=>{l({title:"Erro",description:A.message||"Erro ao atualizar loja",variant:"destructive"})}}),m=Mt({mutationFn:async A=>(await xt.delete(`/api/admin/lojas/${A}`)).data,onSuccess:()=>{l({title:"Sucesso",description:"Loja desativada com sucesso!"}),o.invalidateQueries({queryKey:Ut.stores.all}),o.invalidateQueries({queryKey:Ut.system.all}),o.invalidateQueries({queryKey:Ut.users.all})},onError:A=>{l({title:"Erro ao Desativar",description:A.details||A.message||"Erro ao desativar loja",variant:"destructive"})}}),g=()=>{a("create"),e(null),n(!0)},x=A=>{a("edit"),e(A),n(!0)},v=async A=>{window.confirm(`Tem certeza que deseja desativar a loja "${A.nomeLoja}"? Esta ação não pode ser desfeita.`)&&m.mutate(A.id)},y=A=>{s==="edit"&&t?f.mutate({id:t.id,data:A}):d.mutate(A)},w=d.isPending||f.isPending||m.isPending,_={total:c.length,ativas:c.filter(A=>!A.deletedAt).length,inativas:c.filter(A=>A.deletedAt).length,parceirosUnicos:new Set(c.map(A=>A.parceiroId)).size};return u?i.jsx(pt,{title:"Gestão de Lojas",children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 p-3 shadow-lg",children:i.jsx(Ca,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("div",{className:"mb-2 h-9 w-64 animate-pulse rounded-lg bg-gray-200 dark:bg-gray-700"}),i.jsx("div",{className:"h-4 w-80 animate-pulse rounded bg-gray-200 dark:bg-gray-700"})]})]}),i.jsx("div",{className:"h-12 w-40 animate-pulse rounded-lg bg-gray-200 dark:bg-gray-700"})]}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((A,C)=>i.jsxs(ee,{className:"border-gray-200 bg-gradient-to-br from-gray-50 to-gray-100 dark:border-gray-700 dark:from-gray-800 dark:to-gray-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-4 w-4 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"mb-1 h-8 w-12 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-3 w-16 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]})]},C))}),i.jsxs(ee,{className:"border-gray-200 bg-white/50 shadow-xl backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/50",children:[i.jsx(ie,{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(de,{className:"flex items-center gap-2 text-lg",children:[i.jsx(_o,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),"Rede de Lojas"]})}),i.jsx(re,{className:"p-6",children:i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((A,C)=>i.jsxs(ee,{className:"border border-gray-200 dark:border-gray-700",children:[i.jsx(ie,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-9 w-9 animate-pulse rounded-lg bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-5 w-32 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:"h-8 w-8 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-8 w-8 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]})]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-300 dark:bg-gray-600"}),i.jsx("div",{className:"h-6 w-16 animate-pulse rounded-full bg-gray-300 dark:bg-gray-600"})]}),i.jsx("div",{className:"h-3 w-12 animate-pulse rounded bg-gray-300 dark:bg-gray-600"})]})]},C))})})]})]})}):i.jsxs(pt,{title:"Gestão de Lojas",children:[i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 p-3 shadow-lg",children:i.jsx(Ca,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-gray-300",children:"Gestão de Lojas"}),i.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"Gerencie toda a rede de lojas do sistema"})]})]}),i.jsxs(se,{onClick:g,disabled:w,className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white shadow-lg transition-all duration-200 hover:from-green-700 hover:to-emerald-700 hover:shadow-xl",size:"lg",children:[i.jsx(Bi,{className:"mr-2 h-5 w-5"}),d.isPending?"Criando...":"Nova Loja"]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(ee,{className:"border-green-200 bg-gradient-to-br from-green-50 to-green-100 dark:border-green-800 dark:from-green-950 dark:to-green-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Total de Lojas"}),i.jsx(Ca,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:_.total}),i.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-400",children:"lojas cadastradas"})]})]}),i.jsxs(ee,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100 dark:border-blue-800 dark:from-blue-950 dark:to-blue-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Lojas Ativas"}),i.jsx(Da,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:_.ativas}),i.jsx("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"em operação"})]})]}),i.jsxs(ee,{className:"border-red-200 bg-gradient-to-br from-red-50 to-red-100 dark:border-red-800 dark:from-red-950 dark:to-red-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Lojas Inativas"}),i.jsx(Hc,{className:"h-4 w-4 text-red-600 dark:text-red-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:_.inativas}),i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"temporariamente inativas"})]})]}),i.jsxs(ee,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-purple-100 dark:border-purple-800 dark:from-purple-950 dark:to-purple-900",children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(de,{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Parceiros Conectados"}),i.jsx(So,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:_.parceirosUnicos}),i.jsx("p",{className:"mt-1 text-xs text-purple-600 dark:text-purple-400",children:"parceiros únicos"})]})]})]}),i.jsxs(ee,{className:"border-gray-200 bg-white/50 shadow-xl backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/50",children:[i.jsx(ie,{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(de,{className:"flex items-center gap-2 text-lg",children:[i.jsx(_o,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),"Rede de Lojas"]})}),i.jsx(re,{className:"p-6",children:c.length===0?i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(Ca,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"Nenhuma loja cadastrada"}),i.jsx("p",{className:"mb-6 text-gray-500 dark:text-gray-400",children:"Comece adicionando a primeira loja ao sistema."}),i.jsxs(se,{onClick:g,className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700",children:[i.jsx(Bi,{className:"mr-2 h-4 w-4"}),"Adicionar Primeira Loja"]})]}):i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:c.map(A=>i.jsxs(ee,{className:"border border-gray-200 transition-all duration-200 hover:border-green-300 hover:shadow-lg dark:border-gray-700 dark:hover:border-green-600",children:[i.jsx(ie,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-3",children:[i.jsx("div",{className:"flex-shrink-0 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 p-2",children:i.jsx(Ca,{className:"h-5 w-5 text-white"})}),i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx("h3",{className:"truncate text-sm font-semibold text-gray-900 dark:text-gray-100",children:A.nomeLoja})})]}),i.jsxs("div",{className:"flex flex-shrink-0 gap-1",children:[i.jsx(se,{variant:"outline",size:"sm",onClick:()=>x(A),disabled:w,className:"h-7 w-7 border-gray-300 p-0 hover:border-green-400 hover:bg-green-50 dark:hover:bg-green-950",children:i.jsx(Pd,{className:"h-3 w-3 text-gray-600 hover:text-green-600"})}),i.jsx(se,{variant:"outline",size:"sm",onClick:()=>v(A),disabled:w,className:"h-7 w-7 border-gray-300 p-0 hover:border-red-400 hover:bg-red-50 dark:hover:bg-red-950",children:i.jsx(ay,{className:"h-3 w-3 text-gray-600 hover:text-red-600"})})]})]})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(kM,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Endereço"})]}),i.jsx("span",{className:"max-w-32 truncate text-sm text-gray-700 dark:text-gray-300",children:A.endereco||"Não informado"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Na,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Parceiro"})]}),i.jsxs(ke,{className:"border-gray-200 bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:["#",A.parceiroId]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Da,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"})]}),i.jsx(ke,{className:A.deletedAt?"border-red-200 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"border-green-200 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:A.deletedAt?"Inativa":"Ativa"})]}),i.jsx("div",{className:"border-t border-gray-100 pt-2 dark:border-gray-700",children:i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",A.id]})})]})]},A.id))})})]})]}),i.jsx(mn,{open:r,onOpenChange:n,children:i.jsxs(tn,{className:"max-w-md",children:[i.jsx(rn,{children:i.jsx(nn,{children:s==="create"?"Nova Loja":"Editar Loja"})}),i.jsx(VIe,{initialData:t,onSubmit:y,onCancel:()=>n(!1),isLoading:w})]})})]})}const Rs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),gO=[.001,0,0,.001,0,0],AE=1.35,ba={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},fc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ate="pdfjs_internal_editor_",Ct={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},sr={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},WIe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},As={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},nb={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Tn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Lh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},OS={ERRORS:0,WARNINGS:1,INFOS:5},pw={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},m0={moveTo:0,lineTo:1,curveTo:2,closePath:3},GIe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let RS=OS.WARNINGS;function KIe(t){Number.isInteger(t)&&(RS=t)}function XIe(){return RS}function IS(t){RS>=OS.INFOS&&console.log(`Info: ${t}`)}function Tt(t){RS>=OS.WARNINGS&&console.log(`Warning: ${t}`)}function Tr(t){throw new Error(t)}function Ln(t,e){t||Tr(e)}function YIe(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ite(t,e=null,r=null){if(!t)return null;if(r&&typeof t=="string"&&(r.addDefaultProtocol&&t.startsWith("www.")&&t.match(/\./g)?.length>=2&&(t=`http://${t}`),r.tryConvertEncoding))try{t=tMe(t)}catch{}const n=e?URL.parse(t,e):URL.parse(t);return YIe(n)?n:null}function ote(t,e,r=!1){const n=URL.parse(t);return n?(n.hash=e,n.href):r&&ite(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Gt(t,e,r,n=!1){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!0,writable:!1}),r}const Id=(function(){function e(r,n){this.message=r,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class CU extends Id{constructor(e,r){super(e,"PasswordException"),this.code=r}}class NE extends Id{constructor(e,r){super(e,"UnknownErrorException"),this.details=r}}class vO extends Id{constructor(e){super(e,"InvalidPDFException")}}class mw extends Id{constructor(e,r,n){super(e,"ResponseException"),this.status=r,this.missing=n}}class QIe extends Id{constructor(e){super(e,"FormatError")}}class Uc extends Id{constructor(e){super(e,"AbortException")}}function lte(t){(typeof t!="object"||t?.length===void 0)&&Tr("Invalid argument for bytesToString");const e=t.length,r=8192;if(e<r)return String.fromCharCode.apply(null,t);const n=[];for(let s=0;s<e;s+=r){const a=Math.min(s+r,e),o=t.subarray(s,a);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function dy(t){typeof t!="string"&&Tr("Invalid argument for stringToBytes");const e=t.length,r=new Uint8Array(e);for(let n=0;n<e;++n)r[n]=t.charCodeAt(n)&255;return r}function JIe(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function ZIe(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function eMe(){try{return new Function(""),!0}catch{return!1}}class vs{static get isLittleEndian(){return Gt(this,"isLittleEndian",ZIe())}static get isEvalSupported(){return Gt(this,"isEvalSupported",eMe())}static get isOffscreenCanvasSupported(){return Gt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Gt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:r}=navigator;return Gt(this,"platform",{isAndroid:r.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:r.includes("Firefox")})}static get isCSSRoundSupported(){return Gt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const EE=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class it{static makeHexColor(e,r,n){return`#${EE[e]}${EE[r]}${EE[n]}`}static scaleMinMax(e,r){let n;e[0]?(e[0]<0&&(n=r[0],r[0]=r[2],r[2]=n),r[0]*=e[0],r[2]*=e[0],e[3]<0&&(n=r[1],r[1]=r[3],r[3]=n),r[1]*=e[3],r[3]*=e[3]):(n=r[0],r[0]=r[1],r[1]=n,n=r[2],r[2]=r[3],r[3]=n,e[1]<0&&(n=r[1],r[1]=r[3],r[3]=n),r[1]*=e[1],r[3]*=e[1],e[2]<0&&(n=r[0],r[0]=r[2],r[2]=n),r[0]*=e[2],r[2]*=e[2]),r[0]+=e[4],r[1]+=e[5],r[2]+=e[4],r[3]+=e[5]}static transform(e,r){return[e[0]*r[0]+e[2]*r[1],e[1]*r[0]+e[3]*r[1],e[0]*r[2]+e[2]*r[3],e[1]*r[2]+e[3]*r[3],e[0]*r[4]+e[2]*r[5]+e[4],e[1]*r[4]+e[3]*r[5]+e[5]]}static applyTransform(e,r,n=0){const s=e[n],a=e[n+1];e[n]=s*r[0]+a*r[2]+r[4],e[n+1]=s*r[1]+a*r[3]+r[5]}static applyTransformToBezier(e,r,n=0){const s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5];for(let d=0;d<6;d+=2){const f=e[n+d],m=e[n+d+1];e[n+d]=f*s+m*o+c,e[n+d+1]=f*a+m*l+u}}static applyInverseTransform(e,r){const n=e[0],s=e[1],a=r[0]*r[3]-r[1]*r[2];e[0]=(n*r[3]-s*r[2]+r[2]*r[5]-r[4]*r[3])/a,e[1]=(-n*r[1]+s*r[0]+r[4]*r[1]-r[5]*r[0])/a}static axialAlignedBoundingBox(e,r,n){const s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5],d=e[0],f=e[1],m=e[2],g=e[3];let x=s*d+c,v=x,y=s*m+c,w=y,_=l*f+u,A=_,C=l*g+u,S=C;if(a!==0||o!==0){const E=a*d,P=a*m,R=o*f,O=o*g;x+=R,w+=R,y+=O,v+=O,_+=E,S+=E,C+=P,A+=P}n[0]=Math.min(n[0],x,y,v,w),n[1]=Math.min(n[1],_,C,A,S),n[2]=Math.max(n[2],x,y,v,w),n[3]=Math.max(n[3],_,C,A,S)}static inverseTransform(e){const r=e[0]*e[3]-e[1]*e[2];return[e[3]/r,-e[1]/r,-e[2]/r,e[0]/r,(e[2]*e[5]-e[4]*e[3])/r,(e[4]*e[1]-e[5]*e[0])/r]}static singularValueDecompose2dScale(e,r){const n=e[0],s=e[1],a=e[2],o=e[3],l=n**2+s**2,c=n*a+s*o,u=a**2+o**2,d=(l+u)/2,f=Math.sqrt(d**2-(l*u-c**2));r[0]=Math.sqrt(d+f||1),r[1]=Math.sqrt(d-f||1)}static normalizeRect(e){const r=e.slice(0);return e[0]>e[2]&&(r[0]=e[2],r[2]=e[0]),e[1]>e[3]&&(r[1]=e[3],r[3]=e[1]),r}static intersect(e,r){const n=Math.max(Math.min(e[0],e[2]),Math.min(r[0],r[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(r[0],r[2]));if(n>s)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(r[1],r[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(r[1],r[3]));return a>o?null:[n,a,s,o]}static pointBoundingBox(e,r,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],r),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],r)}static rectBoundingBox(e,r,n,s,a){a[0]=Math.min(a[0],e,n),a[1]=Math.min(a[1],r,s),a[2]=Math.max(a[2],e,n),a[3]=Math.max(a[3],r,s)}static#e(e,r,n,s,a,o,l,c,u,d){if(u<=0||u>=1)return;const f=1-u,m=u*u,g=m*u,x=f*(f*(f*e+3*u*r)+3*m*n)+g*s,v=f*(f*(f*a+3*u*o)+3*m*l)+g*c;d[0]=Math.min(d[0],x),d[1]=Math.min(d[1],v),d[2]=Math.max(d[2],x),d[3]=Math.max(d[3],v)}static#t(e,r,n,s,a,o,l,c,u,d,f,m){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&this.#e(e,r,n,s,a,o,l,c,-f/d,m);return}const g=d**2-4*f*u;if(g<0)return;const x=Math.sqrt(g),v=2*u;this.#e(e,r,n,s,a,o,l,c,(-d+x)/v,m),this.#e(e,r,n,s,a,o,l,c,(-d-x)/v,m)}static bezierBoundingBox(e,r,n,s,a,o,l,c,u){u[0]=Math.min(u[0],e,l),u[1]=Math.min(u[1],r,c),u[2]=Math.max(u[2],e,l),u[3]=Math.max(u[3],r,c),this.#t(e,n,a,l,r,s,o,c,3*(-e+3*(n-a)+l),6*(e-2*n+a),3*(n-e),u),this.#t(e,n,a,l,r,s,o,c,3*(-r+3*(s-o)+c),6*(r-2*s+o),3*(s-r),u)}}function tMe(t){return decodeURIComponent(escape(t))}let CE=null,TU=null;function rMe(t){return CE||(CE=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,TU=new Map([["ﬅ","ſt"]])),t.replaceAll(CE,(e,r,n)=>r?r.normalize("NFKC"):TU.get(n))}function cte(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),lte(t)}const q2="pdfjs_internal_id_";function nMe(t,e,r){if(!Array.isArray(r)||r.length<2)return!1;const[n,s,...a]=r;if(!t(n)&&!Number.isInteger(n)||!e(s))return!1;const o=a.length;let l=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of a)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Is(t,e,r){return Math.min(Math.max(t,e),r)}function ute(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(lte(t))}function sMe(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):dy(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(r=>{r(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,r)=>e+r,0)});const Ko="http://www.w3.org/2000/svg";class Df{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function hy(t,e="text"){if(Wm(t,document.baseURI)){const r=await fetch(t);if(!r.ok)throw new Error(r.statusText);switch(e){case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();case"json":return r.json()}return r.text()}return new Promise((r,n)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":r(s.response);return}r(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class fy{constructor({viewBox:e,userUnit:r,scale:n,rotation:s,offsetX:a=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=r,this.scale=n,this.rotation=s,this.offsetX=a,this.offsetY=o,n*=r;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,f,m,g;switch(s%=360,s<0&&(s+=360),s){case 180:d=-1,f=0,m=0,g=1;break;case 90:d=0,f=1,m=1,g=0;break;case 270:d=0,f=-1,m=-1,g=0;break;case 0:d=1,f=0,m=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(m=-m,g=-g);let x,v,y,w;d===0?(x=Math.abs(u-e[1])*n+a,v=Math.abs(c-e[0])*n+o,y=(e[3]-e[1])*n,w=(e[2]-e[0])*n):(x=Math.abs(c-e[0])*n+a,v=Math.abs(u-e[1])*n+o,y=(e[2]-e[0])*n,w=(e[3]-e[1])*n),this.transform=[d*n,f*n,m*n,g*n,x-d*n*c-m*n*u,v-f*n*c-g*n*u],this.width=y,this.height=w}get rawDims(){const e=this.viewBox;return Gt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:r=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new fy({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:r,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(e,r){const n=[e,r];return it.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const r=[e[0],e[1]];it.applyTransform(r,this.transform);const n=[e[2],e[3]];return it.applyTransform(n,this.transform),[r[0],r[1],n[0],n[1]]}convertToPdfPoint(e,r){const n=[e,r];return it.applyInverseTransform(n,this.transform),n}}class V2 extends Id{constructor(e,r=0){super(e,"RenderingCancelledException"),this.extraDelay=r}}function MS(t){const e=t.length;let r=0;for(;r<e&&t[r].trim()==="";)r++;return t.substring(r,r+5).toLowerCase()==="data:"}function H2(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function aMe(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function iMe(t,e="document.pdf"){if(typeof t!="string")return e;if(MS(t))return Tt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(t);if(!n)return e;const s=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},a=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(a.test(o))return s(o);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const u of l)if(a.test(u))return s(u);const c=Array.from(n.searchParams.keys()).reverse();for(const u of c)if(a.test(u))return s(u)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return s(c[0])}return e}class PU{started=Object.create(null);times=[];time(e){e in this.started&&Tt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Tt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let r=0;for(const{name:n}of this.times)r=Math.max(n.length,r);for(const{name:n,start:s,end:a}of this.times)e.push(`${n.padEnd(r)} ${a-s}ms
`);return e.join("")}}function Wm(t,e){const r=e?URL.parse(t,e):URL.parse(t);return r?.protocol==="http:"||r?.protocol==="https:"}function ii(t){t.preventDefault()}function In(t){t.preventDefault(),t.stopPropagation()}function oMe(t){console.log("Deprecated API usage: "+t)}class yO{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const r=this.#e.exec(e);if(!r)return null;const n=parseInt(r[1],10);let s=parseInt(r[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(r[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(r[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(r[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(r[6],10);c=c>=0&&c<=59?c:0;const u=r[7]||"Z";let d=parseInt(r[8],10);d=d>=0&&d<=23?d:0;let f=parseInt(r[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(o+=d,l+=f):u==="+"&&(o-=d,l-=f),new Date(Date.UTC(n,s,a,o,l,c))}}function lMe(t,{scale:e=1,rotation:r=0}){const{width:n,height:s}=t.attributes.style,a=[0,0,parseInt(n),parseInt(s)];return new fy({viewBox:a,userUnit:1,scale:e,rotation:r})}function DS(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Tt(`Not a valid color format: "${t}"`),[0,0,0])}function cMe(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const r of t.keys()){e.style.color=r;const n=window.getComputedStyle(e).color;t.set(r,DS(n))}e.remove()}function Zr(t){const{a:e,b:r,c:n,d:s,e:a,f:o}=t.getTransform();return[e,r,n,s,a,o]}function no(t){const{a:e,b:r,c:n,d:s,e:a,f:o}=t.getTransform().invertSelf();return[e,r,n,s,a,o]}function vd(t,e,r=!1,n=!0){if(e instanceof fy){const{pageWidth:s,pageHeight:a}=e.rawDims,{style:o}=t,l=vs.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${a}px`,d=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!r||e.rotation%180===0?(o.width=d,o.height=f):(o.width=f,o.height=d)}n&&t.setAttribute("data-main-rotation",e.rotation)}class Ao{constructor(){const{pixelRatio:e}=Ao;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,r,n,s,a=-1){let o=1/0,l=1/0,c=1/0;n=Ao.capPixels(n,a),n>0&&(o=Math.sqrt(n/(e*r))),s!==-1&&(l=s/e,c=s/r);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,r){if(r>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+r/100));return e>0?Math.min(e,n):n}return e}}const xO=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class fg{#e=null;#t=null;#r;#n=null;#a=null;#s=null;#i=null;static#o=null;constructor(e){this.#r=e,fg.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const r=this.#r._uiManager._signal;e.addEventListener("contextmenu",ii,{signal:r}),e.addEventListener("pointerdown",fg.#u,{signal:r});const n=this.#n=document.createElement("div");n.className="buttons",e.append(n);const s=this.#r.toolbarPosition;if(s){const{style:a}=e,o=this.#r._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#u(e){e.stopPropagation()}#c(e){this.#r._focusEventsAllowed=!1,In(e)}#h(e){this.#r._focusEventsAllowed=!0,In(e)}#l(e){const r=this.#r._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:r}),e.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:r}),e.addEventListener("contextmenu",ii,{signal:r})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:e,_uiManager:r}=this.#r,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",fg.#o[e]),this.#l(n),n.addEventListener("click",s=>{r.delete()},{signal:r._signal}),this.#n.append(n)}get#p(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const r=await e.render();this.#l(r),this.#n.append(r,this.#p),this.#a=e}addComment(e){if(this.#s)return;const r=e.render();r&&(this.#l(r),this.#n.prepend(r,this.#p),this.#s=e,e.toolbar=this)}addColorPicker(e){if(this.#t)return;this.#t=e;const r=e.renderButton();this.#l(r),this.#n.append(r,this.#p)}async addEditSignatureButton(e){const r=this.#i=await e.renderEditButton(this.#r);this.#l(r),this.#n.append(r,this.#p)}async addButton(e,r){switch(e){case"colorPicker":this.addColorPicker(r);break;case"altText":await this.addAltText(r);break;case"editSignature":await this.addEditSignatureButton(r);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(r);break}}updateEditSignatureButton(e){this.#i&&(this.#i.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class uMe{#e=null;#t=null;#r;constructor(e){this.#r=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ii,{signal:this.#r._signal});const r=this.#e=document.createElement("div");return r.className="buttons",e.append(r),this.#s(),e}#a(e,r){let n=0,s=0;for(const a of e){const o=a.y+a.height;if(o<n)continue;const l=a.x+(r?a.width:0);if(o>n){s=l,n=o;continue}r?l>s&&(s=l):l<s&&(s=l)}return[r?1-s:s,n]}show(e,r,n){const[s,a]=this.#a(r,n),{style:o}=this.#t||=this.#n();e.append(this.#t),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const r=document.createElement("span");e.append(r),r.className="visuallyHidden",r.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#r._signal;e.addEventListener("contextmenu",ii,{signal:n}),e.addEventListener("click",()=>{this.#r.highlightSelection("floating_button")},{signal:n}),this.#e.append(e)}}function dte(t,e,r){for(const n of r)e.addEventListener(n,t[n].bind(t))}class dMe{#e=0;get id(){return`${ate}${this.#e++}`}}class W2{#e=cte();#t=0;#r=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const a=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Gt(this,"_isSVGFittingCanvas",a)}async#n(e,r){this.#r||=new Map;let n=this.#r.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof r=="string"?(n.url=r,s=await hy(r,"blob")):r instanceof File?s=n.file=r:r instanceof Blob&&(s=r),s.type==="image/svg+xml"){const a=W2._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,d)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,u()},o.onload=async()=>{const f=n.svgUrl=o.result;l.src=await a?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=o.onerror=d});o.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Tt(s),n=null}return this.#r.set(e,n),n&&this.#r.set(n.id,n),n}async getFromFile(e){const{lastModified:r,name:n,size:s,type:a}=e;return this.#n(`${r}_${n}_${s}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,r){const n=await r;return this.#n(e,n)}async getFromId(e){this.#r||=new Map;const r=this.#r.get(e);if(!r)return null;if(r.bitmap)return r.refCounter+=1,r;if(r.file)return this.getFromFile(r.file);if(r.blobPromise){const{blobPromise:n}=r;return delete r.blobPromise,this.getFromBlob(r.id,n)}return this.getFromUrl(r.url)}getFromCanvas(e,r){this.#r||=new Map;let n=this.#r.get(e);if(n?.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(r.width,r.height);return s.getContext("2d").drawImage(r,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,n),this.#r.set(n.id,n),n}getSvgUrl(e){const r=this.#r.get(e);return r?.isSvg?r.svgUrl:null}deleteId(e){this.#r||=new Map;const r=this.#r.get(e);if(!r||(r.refCounter-=1,r.refCounter!==0))return;const{bitmap:n}=r;if(!r.url&&!r.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),r.blobPromise=s.convertToBlob()}n.close?.(),r.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class hMe{#e=[];#t=!1;#r;#n=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:r,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&e(),this.#t)return;const c={cmd:e,undo:r,post:n,type:a};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(c);return}if(o&&this.#e[this.#n].type===a){l&&(c.undo=this.#e[this.#n].undo),this.#e[this.#n]=c;return}const u=this.#n+1;u===this.#r?this.#e.splice(0,1):(this.#n=u,u<this.#e.length&&this.#e.splice(u)),this.#e.push(c)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:r}=this.#e[this.#n];e(),r?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:r}=this.#e[this.#n];e(),r?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let r=this.#n;r>=0;r--)if(this.#e[r].type!==e){this.#e.splice(r+1,this.#n-r),this.#n=r;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class py{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:r}=vs.platform;for(const[n,s,a={}]of e)for(const o of n){const l=o.startsWith("mac+");r&&l?(this.callbacks.set(o.slice(4),{callback:s,options:a}),this.allKeys.add(o.split("+").at(-1))):!r&&!l&&(this.callbacks.set(o,{callback:s,options:a}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const r=this.buffer.join("+");return this.buffer.length=0,r}exec(e,r){if(!this.allKeys.has(r.key))return;const n=this.callbacks.get(this.#e(r));if(!n)return;const{callback:s,options:{bubbles:a=!1,args:o=[],checker:l=null}}=n;l&&!l(e,r)||(s.bind(e,...o,r)(),a||In(r))}}class G2{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return cMe(e),Gt(this,"_colors",e)}convert(e){const r=DS(e);if(!window.matchMedia("(forced-colors: active)").matches)return r;for(const[n,s]of this._colors)if(s.every((a,o)=>a===r[o]))return G2._colorsMapping.get(n);return r}getHexCode(e){const r=this._colors.get(e);return r?it.makeHexColor(...r):e}}class zc{#e=new AbortController;#t=null;#r=new Map;#n=new Map;#a=null;#s=null;#i=null;#o=new hMe;#u=null;#c=null;#h=null;#l=0;#p=new Set;#m=null;#f=null;#d=new Set;_editorUndoBar=null;#g=!1;#x=!1;#v=!1;#b=null;#w=null;#y=null;#S=null;#E=!1;#j=null;#P=new dMe;#T=!1;#C=!1;#N=null;#O=null;#L=null;#R=null;#U=null;#A=Ct.NONE;#_=new Set;#$=null;#F=null;#z=null;#H=null;#W={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#q=[0,0];#I=null;#M=null;#V=null;#Y=null;#D=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=zc.prototype,r=o=>o.#M.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Gt(this,"_keyboardManager",new py([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#M.contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#M.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:r}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:r}]]))}constructor(e,r,n,s,a,o,l,c,u,d,f,m,g,x,v,y){const w=this._signal=this.#e.signal;this.#M=e,this.#V=r,this.#Y=n,this.#a=s,this.#u=a,this.#F=o,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:w}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),l._on("setpreference",this.onSetPreference.bind(this),{signal:w}),l._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:w}),this.#ae(),this.#ce(),this.#J(),this.#s=c.annotationStorage,this.#b=c.filterFactory,this.#z=u,this.#S=d||null,this.#g=f,this.#x=m,this.#v=g,this.#U=x||null,this.viewParameters={realScale:Df.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=y!==!1}destroy(){this.#D?.resolve(),this.#D=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#r.clear(),this.#d.clear(),this.#R?.clear(),this.#t=null,this.#_.clear(),this.#o.destroy(),this.#a?.destroy(),this.#u?.destroy(),this.#F?.destroy(),this.#j?.hide(),this.#j=null,this.#L?.destroy(),this.#L=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#I&&(clearTimeout(this.#I),this.#I=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#U}get useNewAltTextFlow(){return this.#x}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Gt(this,"hcmFilter",this.#z?this.#b.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return Gt(this,"direction",getComputedStyle(this.#M).direction)}get _highlightColors(){return Gt(this,"_highlightColors",this.#S?new Map(this.#S.split(",").map(e=>(e=e.split("=").map(r=>r.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Gt(this,"highlightColors",null);const r=new Map,n=!!this.#z;for(const[s,a]of e){const o=s.endsWith("_HCM");if(n&&o){r.set(s.replace("_HCM",""),a);continue}!n&&!o&&r.set(s,a)}return Gt(this,"highlightColors",r)}get highlightColorNames(){return Gt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const r=this.highlightColorNames.get(e);return this._highlightColors.get(r)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=e}setMainHighlightColorPicker(e){this.#L=e}editAltText(e,r=!1){this.#a?.editAltText(this,e,r)}hasCommentManager(){return!!this.#u}editComment(e,r){this.#u?.open(this,e,r)}getSignature(e){this.#F?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#F}switchToMode(e,r){this._eventBus.on("annotationeditormodechanged",r,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,r){this._eventBus.dispatch("setpreference",{source:this,name:e,value:r})}onSetPreference({name:e,value:r}){switch(e){case"enableNewAltTextWhenAddingImage":this.#v=r;break}}onPageChanging({pageNumber:e}){this.#l=e-1}focusMainContainer(){this.#M.focus()}findParent(e,r){for(const n of this.#n.values()){const{x:s,y:a,width:o,height:l}=n.div.getBoundingClientRect();if(e>=s&&e<=s+o&&r>=a&&r<=a+l)return n}return null}disableUserSelect(e=!1){this.#V.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#d.add(e)}removeShouldRescale(e){this.#d.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Df.PDF_TO_CSS_UNITS;for(const r of this.#d)r.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#K({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#Q(e){const{currentLayer:r}=this;if(r.hasTextLayer(e))return r;for(const n of this.#n.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e=""){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:o}=r,l=r.toString(),u=this.#K(r).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;r.empty();const f=this.#Q(u),m=this.#A===Ct.NONE,g=()=>{f?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:o,text:l}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(Ct.HIGHLIGHT,g);return}g()}#ne(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#K(e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#j||=new uMe(this),this.#j.show(n,s,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#s&&!this.#s.has(e.id)&&this.#s.setValue(e.id,e)}a11yAlert(e,r=null){const n=this.#Y;n&&(n.setAttribute("data-l10n-id",e),r?n.setAttribute("data-l10n-args",JSON.stringify(r)):n.removeAttribute("data-l10n-args"))}#se(){const e=document.getSelection();if(!e||e.isCollapsed){this.#$&&(this.#j?.hide(),this.#$=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:r}=e;if(r===this.#$)return;const s=this.#K(e).closest(".textLayer");if(!s){this.#$&&(this.#j?.hide(),this.#$=null,this.#k({hasSelectedText:!1}));return}if(this.#j?.hide(),this.#$=r,this.#k({hasSelectedText:!0}),!(this.#A!==Ct.HIGHLIGHT&&this.#A!==Ct.NONE)&&(this.#A===Ct.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#A===Ct.HIGHLIGHT?this.#Q(s):null;a?.toggleDrawing();const o=new AbortController,l=this.combinedSignal(o),c=u=>{u.type==="pointerup"&&u.button!==0||(o.abort(),a?.toggleDrawing(!0),u.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}}#X(e=""){this.#A===Ct.HIGHLIGHT?this.highlightSelection(e):this.#g&&this.#ne()}#ae(){document.addEventListener("selectionchange",this.#se.bind(this),{signal:this._signal})}#ie(){if(this.#y)return;this.#y=new AbortController;const e=this.combinedSignal(this.#y);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#oe(){this.#y?.abort(),this.#y=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const r of this.#_)if(r.div.contains(e)){this.#O=[r,e],r._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,r]=this.#O;this.#O=null,r.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),r.focus()}#J(){if(this.#N)return;this.#N=new AbortController;const e=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#le(){this.#N?.abort(),this.#N=null}#Z(){if(this.#c)return;this.#c=new AbortController;const e=this.combinedSignal(this.#c);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#ee(){this.#c?.abort(),this.#c=null}#ce(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#J(),this.#Z()}removeEditListeners(){this.#le(),this.#ee()}dragOver(e){for(const{type:r}of e.dataTransfer.items)for(const n of this.#f)if(n.isHandlingMimeForPasting(r)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const r of e.dataTransfer.items)for(const n of this.#f)if(n.isHandlingMimeForPasting(r.type)){n.paste(r,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const r=[];for(const n of this.#_){const s=n.serialize(!0);s&&r.push(s)}r.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:r}=e;for(const a of r.items)for(const o of this.#f)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let n=r.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Tt(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const c of n){const u=await s.deserialize(c);if(!u)return;a.push(u)}const o=()=>{for(const c of a)this.#te(c);this.#re(a)},l=()=>{for(const c of a)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(a){Tt(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#A!==Ct.NONE&&!this.isEditorHandlingKeyboard&&zc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#k(e){Object.entries(e).some(([n,s])=>this.#W[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#W,e)}),this.#A===Ct.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#B([[sr.HIGHLIGHT_FREE,!0]]))}#B(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ie(),this.#Z(),this.#k({isEditing:this.#A!==Ct.NONE,isEmpty:this.#G(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#oe(),this.#ee(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#f){this.#f=e;for(const r of this.#f)this.#B(r.defaultPropertiesToUpdate)}}getId(){return this.#P.id}get currentLayer(){return this.#n.get(this.#l)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#l}addLayer(e){this.#n.set(e.pageIndex,e),this.#T?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}async updateMode(e,r=null,n=!1,s=!1,a=!1){if(this.#A!==e&&!(this.#D&&(await this.#D.promise,!this.#D))){if(this.#D=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#A=e,e===Ct.NONE){this.setEditingState(!1),this.#de(),this._editorUndoBar?.hide(),this.#D.resolve();return}e===Ct.SIGNATURE&&await this.#F?.loadSignatures(),this.setEditingState(!0),await this.#ue(),this.unselectAll();for(const o of this.#n.values())o.updateMode(e);if(!r){n&&this.addNewEditorFromKeyboard(),this.#D.resolve();return}for(const o of this.#r.values())o.annotationElementId===r||o.id===r?(this.setSelected(o),a?o.editComment():s&&o.enterInEditMode()):o.unselect();this.#D.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#A&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,r){if(this.#f){switch(e){case sr.CREATE:this.currentLayer.addNewEditor(r);return;case sr.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#H||=new Map).set(e,r),this.showAllEditors("highlight",r);break}if(this.hasSelection)for(const n of this.#_)n.updateParams(e,r);else for(const n of this.#f)n.updateDefaultParams(e,r)}}showAllEditors(e,r,n=!1){for(const a of this.#r.values())a.editorType===e&&a.show(r);(this.#H?.get(sr.HIGHLIGHT_SHOW_ALL)??!0)!==r&&this.#B([[sr.HIGHLIGHT_SHOW_ALL,r]])}enableWaiting(e=!1){if(this.#C!==e){this.#C=e;for(const r of this.#n.values())e?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",e)}}async#ue(){if(!this.#T){this.#T=!0;const e=[];for(const r of this.#n.values())e.push(r.enable());await Promise.all(e);for(const r of this.#r.values())r.enable()}}#de(){if(this.unselectAll(),this.#T){this.#T=!1;for(const e of this.#n.values())e.disable();for(const e of this.#r.values())e.disable()}}getEditors(e){const r=[];for(const n of this.#r.values())n.pageIndex===e&&r.push(n);return r}getEditor(e){return this.#r.get(e)}addEditor(e){this.#r.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#r.delete(e.id),e.annotationElementId&&this.#R?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#p.has(e.annotationElementId))&&this.#s?.remove(e.id)}addDeletedAnnotationElement(e){this.#p.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#p.has(e)}removeDeletedAnnotationElement(e){this.#p.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#te(e){const r=this.#n.get(e.pageIndex);r?r.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#B(e.propertiesToUpdate))}get#he(){let e=null;for(e of this.#_);return e}updateUI(e){this.#he===e&&this.#B(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#B(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#_.has(e)){this.#_.delete(e),e.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#_.add(e),e.select(),this.#B(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#h?.commitOrRemove();for(const r of this.#_)r!==e&&r.unselect();this.#_.clear(),this.#_.add(e),e.select(),this.#B(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(e){return this.#_.has(e)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(e){e.unselect(),this.#_.delete(e),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#k({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#G()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#G()})}addCommands(e){this.#o.add(e),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#G()})}cleanUndoStack(e){this.#o.cleanType(e)}#G(){if(this.#r.size===0)return!0;if(this.#r.size===1)for(const e of this.#r.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const r=e?[e]:[...this.#_],n=()=>{this._editorUndoBar?.show(s,r.length===1?r[0].editorType:r.length);for(const a of r)a.remove()},s=()=>{for(const a of r)this.#te(a)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(e){for(const r of this.#_)r.unselect();this.#_.clear();for(const r of e)r.isEmpty()||(this.#_.add(r),r.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#_)e.commit();this.#re(this.#r.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#A!==Ct.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const e of this.#_)e.unselect();this.#_.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(e,r,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#q[0]+=e,this.#q[1]+=r;const[s,a]=this.#q,o=[...this.#_],l=1e3;this.#I&&clearTimeout(this.#I),this.#I=setTimeout(()=>{this.#I=null,this.#q[0]=this.#q[1]=0,this.addCommands({cmd:()=>{for(const c of o)this.#r.has(c.id)&&(c.translateInPage(s,a),c.translationDone())},undo:()=>{for(const c of o)this.#r.has(c.id)&&(c.translateInPage(-s,-a),c.translationDone())},mustExec:!1})},l);for(const c of o)c.translateInPage(e,r),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#_)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let r=!1;for(const[{x:s,y:a,pageIndex:o},l]of e)l.newX=s,l.newY=a,l.newPageIndex=o,r||=s!==l.savedX||a!==l.savedY||o!==l.savedPageIndex;if(!r)return!1;const n=(s,a,o,l)=>{if(this.#r.has(s.id)){const c=this.#n.get(l);c?s._setParentAndPosition(c,a,o):(s.pageIndex=l,s.x=a,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:o,newPageIndex:l}]of e)n(s,a,o,l)},undo:()=>{for(const[s,{savedX:a,savedY:o,savedPageIndex:l}]of e)n(s,a,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,r){if(this.#m)for(const n of this.#m.keys())n.drag(e,r)}rebuild(e){if(e.parent===null){const r=this.getLayer(e.pageIndex);r?(r.changeParent(e),r.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#A}get imageManager(){return Gt(this,"imageManager",new W2)}getSelectionBoxes(e){if(!e)return null;const r=document.getSelection();for(let u=0,d=r.rangeCount;u<d;u++)if(!e.contains(r.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:s,width:a,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,d,f,m)=>({x:(d-s)/o,y:1-(u+f-n)/a,width:m/o,height:f/a});break;case"180":l=(u,d,f,m)=>({x:1-(u+f-n)/a,y:1-(d+m-s)/o,width:f/a,height:m/o});break;case"270":l=(u,d,f,m)=>({x:1-(d+m-s)/o,y:(u-n)/a,width:m/o,height:f/a});break;default:l=(u,d,f,m)=>({x:(u-n)/a,y:(d-s)/o,width:f/a,height:m/o});break}const c=[];for(let u=0,d=r.rangeCount;u<d;u++){const f=r.getRangeAt(u);if(!f.collapsed)for(const{x:m,y:g,width:x,height:v}of f.getClientRects())x===0||v===0||c.push(l(m,g,x,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:r}){(this.#i||=new Map).set(e,r)}removeChangedExistingAnnotation({annotationElementId:e}){this.#i?.delete(e)}renderAnnotationElement(e){const r=this.#i?.get(e.data.id);if(!r)return;const n=this.#s.getRawValue(r);n&&(this.#A===Ct.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,r,n){const s=this.#R?.get(e);s&&(s.setCanvas(r,n),this.#R.delete(e))}addMissingCanvas(e,r){(this.#R||=new Map).set(e,r)}}class oo{#e=null;#t=!1;#r=null;#n=null;#a=null;#s=null;#i=!1;#o=null;#u=null;#c=null;#h=null;#l=!1;static#p=null;static _l10n=null;constructor(e){this.#u=e,this.#l=e._uiManager.useNewAltTextFlow,oo.#p||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){oo._l10n??=e}async render(){const e=this.#r=document.createElement("button");e.className="altText",e.tabIndex="0";const r=this.#n=document.createElement("span");e.append(r),this.#l?(e.classList.add("new"),e.setAttribute("data-l10n-id",oo.#p.missing),r.setAttribute("data-l10n-id",oo.#p["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#u._uiManager._signal;e.addEventListener("contextmenu",ii,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#l&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#i=!0,s(a))},{signal:n}),await this.#f(),e}get#m(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#i}),this.#i=!1)}isEmpty(){return this.#l?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#l?this.#e!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(e){this.#e===null&&(this.#c=e,this.#h=await oo._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())}toggleAltTextBadge(e=!1){if(!this.#l||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const r=this.#o=document.createElement("div");r.className="noAltTextBadge",this.#u.div.append(r)}this.#o.classList.toggle("hidden",!e)}serialize(e){let r=this.#e;return!e&&this.#c===r&&(r=this.#h),{altText:r,decorative:this.#t,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:r,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(this.#c=n,this.#h=s),!(this.#e===e&&this.#t===r)&&(a||(this.#e=e,this.#t=r),this.#f())}toggle(e=!1){this.#r&&(!e&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#r?.remove(),this.#r=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#f(){const e=this.#r;if(!e)return;if(this.#l){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",oo.#p[this.#m]),this.#n?.setAttribute("data-l10n-id",oo.#p[`${this.#m}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=this.#a;if(!r){this.#a=r=document.createElement("span"),r.className="tooltip",r.setAttribute("role","tooltip"),r.id=`alt-text-tooltip-${this.#u.id}`;const s=100,a=this.#u._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:a})}this.#t?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=this.#e),r.parentNode||e.append(r),this.#u.getElementForAltText()?.setAttribute("aria-describedby",r.id)}}class g0{#e=null;#t=!1;#r=null;#n=null;#a=null;#s=null;#i=!1;constructor(e){this.#r=e,this.toolbar=null}render(){if(!this.#r._uiManager.hasCommentManager())return null;const e=this.#e=document.createElement("button");e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const r=this.#r._uiManager._signal;e.addEventListener("contextmenu",ii,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const n=s=>{s.preventDefault(),this.edit()};return e.addEventListener("click",n,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#t=!0,n(s))},{signal:r}),e}edit(){const{bottom:e,left:r,right:n}=this.#r.getClientDimensions(),s={top:e};this.#r._uiManager.direction==="ltr"?s.right=n:s.left=r,this.#r._uiManager.editComment(this.#r,s)}finish(){this.#e&&(this.#e.focus({focusVisible:this.#t}),this.#t=!1)}isDeleted(){return this.#i||this.#a===""}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#n}serialize(){return this.data}get data(){return{text:this.#a,date:this.#s,deleted:this.#i}}set data(e){if(e===null){this.#a="",this.#i=!0;return}this.#a=e,this.#s=new Date,this.#i=!1}setInitialText(e){this.#n=e,this.data=e}toggle(e=!1){this.#e&&(this.#e.disabled=!e)}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#a="",this.#s=null,this.#r=null,this.#t=!1,this.#i=!1}}class LS{#e;#t=!1;#r=null;#n;#a;#s;#i;#o=null;#u;#c=null;#h;#l=null;constructor({container:e,isPinchingDisabled:r=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:o=null,signal:l}){this.#e=e,this.#r=n,this.#n=r,this.#a=s,this.#s=a,this.#i=o,this.#h=new AbortController,this.#u=AbortSignal.any([l,this.#h.signal]),e.addEventListener("touchstart",this.#p.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ao.pixelRatio}#p(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const s=this.#o=new AbortController,a=AbortSignal.any([this.#u,s.signal]),o=this.#e,l={capture:!0,signal:a,passive:!1},c=u=>{u.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",u=>{u.pointerType==="touch"&&(In(u),c(u))},l),o.addEventListener("pointerup",c,l),o.addEventListener("pointercancel",c,l);return}if(!this.#l){this.#l=new AbortController;const s=AbortSignal.any([this.#u,this.#l.signal]),a=this.#e,o={signal:s,capture:!1,passive:!1};a.addEventListener("touchmove",this.#m.bind(this),o);const l=this.#f.bind(this);a.addEventListener("touchend",l,o),a.addEventListener("touchcancel",l,o),o.capture=!0,a.addEventListener("pointerdown",In,o),a.addEventListener("pointermove",In,o),a.addEventListener("pointercancel",In,o),a.addEventListener("pointerup",In,o),this.#a?.()}if(In(e),e.touches.length!==2||this.#r?.()){this.#c=null;return}let[r,n]=e.touches;r.identifier>n.identifier&&([r,n]=[n,r]),this.#c={touch0X:r.screenX,touch0Y:r.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#m(e){if(!this.#c||e.touches.length!==2)return;In(e);let[r,n]=e.touches;r.identifier>n.identifier&&([r,n]=[n,r]);const{screenX:s,screenY:a}=r,{screenX:o,screenY:l}=n,c=this.#c,{touch0X:u,touch0Y:d,touch1X:f,touch1Y:m}=c,g=f-u,x=m-d,v=o-s,y=l-a,w=Math.hypot(v,y)||1,_=Math.hypot(g,x)||1;if(!this.#t&&Math.abs(_-w)<=LS.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=a,c.touch1X=o,c.touch1Y=l,!this.#t){this.#t=!0;return}const A=[(s+o)/2,(a+l)/2];this.#s?.(A,_,w)}#f(e){e.touches.length>=2||(this.#l&&(this.#l.abort(),this.#l=null,this.#i?.()),this.#c&&(In(e),this.#c=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class dt{#e=null;#t=null;#r=null;#n=null;#a=!1;#s=null;#i="";#o=!1;#u=null;#c=null;#h=null;#l=null;#p="";#m=!1;#f=null;#d=!1;#g=!1;#x=!1;#v=null;#b=0;#w=0;#y=null;#S=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#j=dt._zIndex++;static _borderLineWidth=-1;static _colorManager=new G2;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=dt.prototype._resizeWithKeyboard,r=zc.TRANSLATE_SMALL,n=zc.TRANSLATE_BIG;return Gt(this,"_resizerKeyboardManager",new py([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-r,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[r,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-r]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,r]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],dt.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:r,rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=r,this.pageRotation=(360+r-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[a,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Gt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const r=new fMe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});r.annotationElementId=e.annotationElementId,r.deleted=!0,r._uiManager.addToAnnotationStorage(r)}static initialize(e,r){if(dt._l10n??=e,dt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),dt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);dt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,r){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,r){Tr("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(e){this.#E=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,r]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*r/(e*2),this.y+=this.width*e/(r*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*r/(e*2),this.y-=this.width*e/(r*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#j}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#V(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,r,n,s){const[a,o]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/a,this.y=(r+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,r){const[n,s]=this.parentDimensions;this.setAt(e*n,r*s,this.width*n,this.height*s),this._onTranslated()}#P([e,r],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,r){this.#P(this.parentDimensions,e,r)}translateInPage(e,r){this.#f||=[this.x,this.y,this.width,this.height],this.#P(this.pageDimensions,e,r),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,r){this.#f||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[s,a]}=this;if(this.x+=e/s,this.y+=r/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:d}=n;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,r){}_onTranslated(e,r){}get _hasBeenMoved(){return!!this.#f&&(this.#f[0]!==this.x||this.#f[1]!==this.y)}get _hasBeenResized(){return!!this.#f&&(this.#f[2]!==this.width||this.#f[3]!==this.height)}getBaseTranslation(){const[e,r]=this.parentDimensions,{_borderLineWidth:n}=dt,s=n/e,a=n/r;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:r},pageDimensions:[n,s]}=this;let{x:a,y:o,width:l,height:c}=this;if(l*=n,c*=s,a*=n,o*=s,this._mustFixPosition)switch(e){case 0:a=Is(a,0,n-l),o=Is(o,0,s-c);break;case 90:a=Is(a,0,n-c),o=Is(o,l,s);break;case 180:a=Is(a,l,n),o=Is(o,c,s);break;case 270:a=Is(a,c,n),o=Is(o,0,s-l);break}this.x=a/=n,this.y=o/=s;const[u,d]=this.getBaseTranslation();a+=u,o+=d,r.left=`${(100*a).toFixed(2)}%`,r.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#T(e,r,n){switch(n){case 90:return[r,-e];case 180:return[-e,-r];case 270:return[-r,e];default:return[e,r]}}screenToPageTranslation(e,r){return dt.#T(e,r,this.parentRotation)}pageTranslationToScreen(e,r){return dt.#T(e,r,360-this.parentRotation)}#C(e){switch(e){case 90:{const[r,n]=this.pageDimensions;return[0,-r/n,n/r,0]}case 180:return[-1,0,0,-1];case 270:{const[r,n]=this.pageDimensions;return[0,r/n,-n/r,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[r,n]}=this;return[r*e,n*e]}setDims(e,r){const[n,s]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/n).toFixed(2)}%`,this.#o||(a.height=`${(100*r/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:r,width:n}=e,s=n.endsWith("%"),a=!this.#o&&r.endsWith("%");if(s&&a)return;const[o,l]=this.parentDimensions;s||(e.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!this.#o&&!a&&(e.height=`${(100*parseFloat(r)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#N(){if(this.#u)return;this.#u=document.createElement("div"),this.#u.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],r=this._uiManager._signal;for(const n of e){const s=document.createElement("div");this.#u.append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",this.#O.bind(this,n),{signal:r}),s.addEventListener("contextmenu",ii,{signal:r}),s.tabIndex=-1}this.div.prepend(this.#u)}#O(e,r){r.preventDefault();const{isMac:n}=vs.platform;if(r.button!==0||r.ctrlKey&&n)return;this.#r?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#c=[r.screenX,r.screenY];const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#U.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",In,{passive:!1,signal:o}),window.addEventListener("contextmenu",ii,{signal:o}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(r.target).cursor;const u=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,this.#R()};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})}#L(e,r,n,s){this.width=n,this.height=s,this.x=e,this.y=r;const[a,o]=this.parentDimensions;this.setDims(a*n,o*s),this.fixAndSetPosition(),this._onResized()}_onResized(){}#R(){if(!this.#h)return;const{savedX:e,savedY:r,savedWidth:n,savedHeight:s}=this.#h;this.#h=null;const a=this.x,o=this.y,l=this.width,c=this.height;a===e&&o===r&&l===n&&c===s||this.addCommands({cmd:this.#L.bind(this,a,o,l,c),undo:this.#L.bind(this,e,r,n,s),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#U(e,r){const[n,s]=this.parentDimensions,a=this.x,o=this.y,l=this.width,c=this.height,u=dt.MIN_SIZE/n,d=dt.MIN_SIZE/s,f=this.#C(this.rotation),m=(z,q)=>[f[0]*z+f[2]*q,f[1]*z+f[3]*q],g=this.#C(360-this.rotation),x=(z,q)=>[g[0]*z+g[2]*q,g[1]*z+g[3]*q];let v,y,w=!1,_=!1;switch(e){case"topLeft":w=!0,v=(z,q)=>[0,0],y=(z,q)=>[z,q];break;case"topMiddle":v=(z,q)=>[z/2,0],y=(z,q)=>[z/2,q];break;case"topRight":w=!0,v=(z,q)=>[z,0],y=(z,q)=>[0,q];break;case"middleRight":_=!0,v=(z,q)=>[z,q/2],y=(z,q)=>[0,q/2];break;case"bottomRight":w=!0,v=(z,q)=>[z,q],y=(z,q)=>[0,0];break;case"bottomMiddle":v=(z,q)=>[z/2,q],y=(z,q)=>[z/2,0];break;case"bottomLeft":w=!0,v=(z,q)=>[0,q],y=(z,q)=>[z,0];break;case"middleLeft":_=!0,v=(z,q)=>[0,q/2],y=(z,q)=>[z,q/2];break}const A=v(l,c),C=y(l,c);let S=m(...C);const E=dt._round(a+S[0]),P=dt._round(o+S[1]);let R=1,O=1,D,I;if(r.fromKeyboard)({deltaX:D,deltaY:I}=r);else{const{screenX:z,screenY:q}=r,[V,W]=this.#c;[D,I]=this.screenToPageTranslation(z-V,q-W),this.#c[0]=z,this.#c[1]=q}if([D,I]=x(D/n,I/s),w){const z=Math.hypot(l,c);R=O=Math.max(Math.min(Math.hypot(C[0]-A[0]-D,C[1]-A[1]-I)/z,1/l,1/c),u/l,d/c)}else _?R=Is(Math.abs(C[0]-A[0]-D),u,1)/l:O=Is(Math.abs(C[1]-A[1]-I),d,1)/c;const $=dt._round(l*R),M=dt._round(c*O);S=m(...y($,M));const U=E-S[0],H=P-S[1];this.#f||=[this.x,this.y,this.width,this.height],this.width=$,this.height=M,this.x=U,this.y=H,this.setDims(n*$,s*M),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#g)return this._editToolbar;this._editToolbar=new fg(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:e}=this;if(e)for(const[r,n]of e)await this._editToolbar.addButton(r,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#r?.destroy())}addContainer(e){const r=this._editToolbar?.div;r?r.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(oo.initialize(dt._l10n),this.#r=new oo(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(e){await this.#r?.setGuessedText(e)}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}addCommentButton(){return this.#n?this.#n:this.#n=new g0(this)}get commentColor(){return null}get comment(){const e=this.#n;return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){this.#n||(this.#n=new g0(this)),this.#n.data=e}setCommentData(e){this.#n||(this.#n=new g0(this)),this.#n.setInitialText(e)}get hasEditedComment(){return this.#n?.hasBeenEdited()}async editComment(){this.#n||(this.#n=new g0(this)),this.#n.edit()}addComment(e){this.hasEditedComment&&(e.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#a?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#H();const[r,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/r).toFixed(2)}%`,e.style.maxHeight=`${(100*r/n).toFixed(2)}%`);const[s,a]=this.getInitialTranslation();return this.translate(s,a),dte(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#S||=new LS({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#A.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#$.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),e}#A(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(e,r,n){let a=.7*(n/r)+1-.7;if(a===1)return;const o=this.#C(this.rotation),l=(E,P)=>[o[0]*E+o[2]*P,o[1]*E+o[3]*P],[c,u]=this.parentDimensions,d=this.x,f=this.y,m=this.width,g=this.height,x=dt.MIN_SIZE/c,v=dt.MIN_SIZE/u;a=Math.max(Math.min(a,1/m,1/g),x/m,v/g);const y=dt._round(m*a),w=dt._round(g*a);if(y===m&&w===g)return;this.#f||=[d,f,m,g];const _=l(m/2,g/2),A=dt._round(d+_[0]),C=dt._round(f+_[1]),S=l(y/2,w/2);this.x=A-S[0],this.y=C-S[1],this.width=y,this.height=w,this.setDims(c*y,u*w),this.fixAndSetPosition(),this._onResizing()}#$(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#R()}pointerdown(e){const{isMac:r}=vs.platform;if(e.button!==0||e.ctrlKey&&r){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#z(e);return}this.#F(e)}#F(e){const{isMac:r}=vs.platform;e.ctrlKey&&!r||e.shiftKey||e.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(e){const{isSelected:r}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:a},l=u=>{s.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#F(u),n&&this._onStopDragging()};r&&(this.#b=e.clientX,this.#w=e.clientY,this.#s=e.pointerId,this.#i=e.pointerType,window.addEventListener("pointermove",u=>{n||(n=!0,this._onStartDragging());const{clientX:d,clientY:f,pointerId:m}=u;if(m!==this.#s){In(u);return}const[g,x]=this.screenToPageTranslation(d-this.#b,f-this.#w);this.#b=d,this.#w=f,this._uiManager.dragSelectedEditors(g,x)},o),window.addEventListener("touchmove",In,o),window.addEventListener("pointerdown",u=>{u.pointerType===this.#i&&(this.#S||u.isPrimary)&&l(u),In(u)},o));const c=u=>{if(!this.#s||this.#s===u.pointerId){l(u);return}In(u)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,r,n){e.changeParent(this),this.x=r,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,r,n=this.rotation){const s=this.parentScale,[a,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=e/s,d=r/s,f=this.x*a,m=this.y*o,g=this.width*a,x=this.height*o;switch(n){case 0:return[f+u+l,o-m-d-x+c,f+u+g+l,o-m-d+c];case 90:return[f+d+l,o-m+u+c,f+d+x+l,o-m+u+g+c];case 180:return[f-u-g+l,o-m+d+c,f-u+l,o-m+d+x+c];case 270:return[f-d-x+l,o-m-u-g+c,f-d+l,o-m-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,r){const[n,s,a,o]=e,l=a-n,c=o-s;switch(this.rotation){case 0:return[n,r-o,l,c];case 90:return[n,r-s,c,l];case 180:return[a,r-s,l,c];case 270:return[a,r-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#g=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#g=!1,!0):!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#x}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:r,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return r<o&&s>0&&e<a&&n>0}#H(){if(this.#l||!this.div)return;this.#l=new AbortController;const e=this._uiManager.combinedSignal(this.#l);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#H()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,r=null){Tr("An editor must be serializable")}static async deserialize(e,r,n){const s=new this.prototype.constructor({parent:r,id:r.getNextId(),uiManager:n,annotationElementId:e.annotationElementId});s.rotation=e.rotation,s.#e=e.accessibilityData,s._isCopy=e.isCopy||!1;const[a,o]=s.pageDimensions,[l,c,u,d]=s.getRectInCurrentCoords(e.rect,o);return s.x=l/a,s.y=c/o,s.width=u/a,s.height=d/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#l?.abort(),this.#l=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#V(),this.removeEditToolbar(),this.#y){for(const e of this.#y.values())clearTimeout(e);this.#y=null}this.parent=null,this.#S?.destroy(),this.#S=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#N(),this.#u.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const r=this.#u.children;if(!this.#t){this.#t=Array.from(r);const o=this.#W.bind(this),l=this.#q.bind(this),c=this._uiManager._signal;for(const u of this.#t){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",this.#I.bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",dt._l10nResizer[d])}}const n=this.#t[0];let s=0;for(const o of r){if(o===n)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==s){if(a<s)for(let l=0;l<s-a;l++)this.#u.append(this.#u.firstChild);else if(a>s)for(let l=0;l<a-s;l++)this.#u.firstChild.before(this.#u.lastChild);let o=0;for(const l of r){const u=this.#t[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",dt._l10nResizer[u])}}this.#M(0),this.#x=!0,this.#u.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#W(e){dt._resizerKeyboardManager.exec(this,e)}#q(e){this.#x&&e.relatedTarget?.parentNode!==this.#u&&this.#V()}#I(e){this.#p=this.#x?e:""}#M(e){if(this.#t)for(const r of this.#t)r.tabIndex=e}_resizeWithKeyboard(e,r){this.#x&&this.#U(this.#p,{deltaX:e,deltaY:r,fromKeyboard:!0})}#V(){this.#x=!1,this.#M(-1),this.#R()}_stopResizingWithKeyboard(){this.#V(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#u?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0))}updateParams(e,r){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#d}set isEditing(e){this.#d=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,r){this.#o=!0;const n=e/r,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,r=!1){if(r){this.#y||=new Map;const{action:n}=e;let s=this.#y.get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),this.#y.delete(n),this.#y.size===0&&(this.#y=null)},dt._telemetryTimeout),this.#y.set(n,s);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}renderAnnotationElement(e){let r=e.container.querySelector(".annotationContent");if(!r)r=document.createElement("div"),r.classList.add("annotationContent",this.editorType),e.container.prepend(r);else if(r.nodeName==="CANVAS"){const n=r;r=document.createElement("div"),r.classList.add("annotationContent",this.editorType),n.before(r)}return r}resetAnnotationElement(e){const{firstChild:r}=e.container;r?.nodeName==="DIV"&&r.classList.contains("annotationContent")&&r.remove()}}class fMe extends dt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const kU=3285377520,Ha=4294901760,so=65535;class hte{constructor(e){this.h1=e?e&4294967295:kU,this.h2=e?e&4294967295:kU}update(e){let r,n;if(typeof e=="string"){r=new Uint8Array(e.length*2),n=0;for(let v=0,y=e.length;v<y;v++){const w=e.charCodeAt(v);w<=255?r[n++]=w:(r[n++]=w>>>8,r[n++]=w&255)}}else if(ArrayBuffer.isView(e))r=e.slice(),n=r.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,a=n-s*4,o=new Uint32Array(r.buffer,0,s);let l=0,c=0,u=this.h1,d=this.h2;const f=3432918353,m=461845907,g=f&so,x=m&so;for(let v=0;v<s;v++)v&1?(l=o[v],l=l*f&Ha|l*g&so,l=l<<15|l>>>17,l=l*m&Ha|l*x&so,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[v],c=c*f&Ha|c*g&so,c=c<<15|c>>>17,c=c*m&Ha|c*x&so,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(l=0,a){case 3:l^=r[s*4+2]<<16;case 2:l^=r[s*4+1]<<8;case 1:l^=r[s*4],l=l*f&Ha|l*g&so,l=l<<15|l>>>17,l=l*m&Ha|l*x&so,s&1?u^=l:d^=l}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,r=this.h2;return e^=r>>>1,e=e*3981806797&Ha|e*36045&so,r=r*4283543511&Ha|((r<<16|e>>>16)*2950163797&Ha)>>>16,e^=r>>>1,e=e*444984403&Ha|e*60499&so,r=r*3301882366&Ha|((r<<16|e>>>16)*3120437893&Ha)>>>16,e^=r>>>1,(e>>>0).toString(16).padStart(8,"0")+(r>>>0).toString(16).padStart(8,"0")}}const bO=Object.freeze({map:null,hash:"",transfer:void 0});class K2{#e=!1;#t=null;#r=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,r){const n=this.#r.get(e);return n===void 0?r:Object.assign(r,n)}getRawValue(e){return this.#r.get(e)}remove(e){if(this.#r.delete(e),this.#r.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const r of this.#r.values())if(r instanceof dt)return;this.onAnnotationEditor(null)}}setValue(e,r){const n=this.#r.get(e);let s=!1;if(n!==void 0)for(const[a,o]of Object.entries(r))n[a]!==o&&(s=!0,n[a]=o);else s=!0,this.#r.set(e,r);s&&this.#n(),r instanceof dt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(r.constructor._type)}has(e){return this.#r.has(e)}get size(){return this.#r.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new fte(this)}get serializable(){if(this.#r.size===0)return bO;const e=new Map,r=new hte,n=[],s=Object.create(null);let a=!1;for(const[o,l]of this.#r){const c=l instanceof dt?l.serialize(!1,s):l;c&&(e.set(o,c),r.update(`${o}:${JSON.stringify(c)}`),a||=!!c.bitmap)}if(a)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:r.hexdigest(),transfer:n}:bO}get editorStats(){let e=null;const r=new Map;for(const n of this.#r.values()){if(!(n instanceof dt))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:a}=s;r.has(a)||r.set(a,Object.getPrototypeOf(n).constructor),e||=Object.create(null);const o=e[a]||=new Map;for(const[l,c]of Object.entries(s)){if(l==="type")continue;let u=o.get(l);u||(u=new Map,o.set(l,u));const d=u.get(c)??0;u.set(c,d+1)}}for(const[n,s]of r)e[n]=s.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const r of this.#r.values())!(r instanceof dt)||!r.annotationElementId||!r.serialize()||e.push(r.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#r.entries()}}class fte extends K2{#e;constructor(e){super();const{map:r,hash:n,transfer:s}=e.serializable,a=structuredClone(r,s?{transfer:s}:null);this.#e={map:a,hash:n,transfer:s}}get print(){Tr("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Gt(this,"modifiedIds",{ids:new Set,hash:""})}}class pMe{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:r=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const r=this.styleElement.sheet;r.insertRule(e,r.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:r,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(Ln(!r,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:a,style:o}=e,l=new FontFace(s,a,o);this.addNativeFontFace(l);try{await l.load(),this.#e.add(s),n?.(e)}catch{Tt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Tr("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Tt(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const r=e.createFontFaceRule();if(r){if(this.insertRule(r),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Gt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Gt(this,"isSyncFontLoadingSupported",Rs||vs.platform.isFirefox)}_queueLoadingCallback(e){function r(){for(Ln(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:r,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Gt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,r){function n(C,S){return C.charCodeAt(S)<<24|C.charCodeAt(S+1)<<16|C.charCodeAt(S+2)<<8|C.charCodeAt(S+3)&255}function s(C,S,E,P){const R=C.substring(0,S),O=C.substring(S+E);return R+P+O}let a,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function d(C,S){if(++u>30){Tt("Load test font never loaded."),S();return}if(c.font="30px "+C,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(d.bind(null,C,S))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=s(m,976,f.length,f);const x=16,v=1482184792;let y=n(m,x);for(a=0,o=f.length-3;a<o;a+=4)y=y-v+n(f,a)|0;a<f.length&&(y=y-v+n(f+"XXX",a)|0),m=s(m,x,4,JIe(y));const w=`url(data:font/opentype;base64,${btoa(m)});`,_=`@font-face {font-family:"${f}";src:${w}}`;this.insertRule(_);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const C of[e.loadedName,f]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=C,A.append(S)}this._document.body.append(A),d(f,()=>{A.remove(),r.complete()})}}class mMe{constructor(e,r=null){this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${ute(this.data)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),r}getPathGenerator(e,r){if(this.compiledGlyphs[r]!==void 0)return this.compiledGlyphs[r];const n=this.loadedName+"_path_"+r;let s;try{s=e.get(n)}catch(o){Tt(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(s||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[r]=a}}function gMe(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(Rs)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function vMe(t){if(Rs&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return dy(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function v0(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const wO=t=>typeof t=="object"&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0,yMe=t=>typeof t=="object"&&typeof t?.name=="string",xMe=nMe.bind(null,wO,yMe);class bMe{#e=new Map;#t=Promise.resolve();postMessage(e,r){const n={data:structuredClone(e,r?{transfer:r}:null)};this.#t.then(()=>{for(const[s]of this.#e)s.call(this,n)})}addEventListener(e,r,n=null){let s=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Tt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,r);s=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}this.#e.set(r,s)}removeEventListener(e,r){this.#e.get(r)?.(),this.#e.delete(r)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const y0={DATA:1,ERROR:2},En={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function OU(){}function na(t){if(t instanceof Uc||t instanceof vO||t instanceof CU||t instanceof mw||t instanceof NE)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||Tr('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new Uc(t.message);case"InvalidPDFException":return new vO(t.message);case"PasswordException":return new CU(t.message,t.code);case"ResponseException":return new mw(t.message,t.status,t.missing);case"UnknownErrorException":return new NE(t.message,t.details)}return new NE(t.message,t.toString())}class Gm{#e=new AbortController;constructor(e,r,n){this.sourceName=e,this.targetName=r,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===y0.DATA)s.resolve(e.data);else if(e.callback===y0.ERROR)s.reject(na(e.reason));else throw new Error("Unexpected callback case");return}const r=this.actionHandler[e.action];if(!r)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,a=this.comObj;Promise.try(r,e.data).then(function(o){a.postMessage({sourceName:n,targetName:s,callback:y0.DATA,callbackId:e.callbackId,data:o})},function(o){a.postMessage({sourceName:n,targetName:s,callback:y0.ERROR,callbackId:e.callbackId,reason:na(o)})});return}if(e.streamId){this.#r(e);return}r(e.data)}on(e,r){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=r}send(e,r,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:r},n)}sendWithPromise(e,r,n){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:r},n)}catch(o){a.reject(o)}return a.promise}sendWithStream(e,r,n,s){const a=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[a]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:a,data:r,desiredSize:u.desiredSize},s),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[a].pullCall=d,c.postMessage({sourceName:o,targetName:l,stream:En.PULL,streamId:a,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Ln(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[a].cancelCall=d,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:En.CANCEL,streamId:a,reason:na(u)}),d.promise}},n)}#r(e){const r=e.streamId,n=this.sourceName,s=e.sourceName,a=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(u,d=1,f){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=d,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:En.ENQUEUE,streamId:r,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:En.CLOSE,streamId:r}),delete o.streamSinks[r])},error(u){Ln(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:En.ERROR,streamId:r,reason:na(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[r]=c,Promise.try(l,e.data,c).then(function(){a.postMessage({sourceName:n,targetName:s,stream:En.START_COMPLETE,streamId:r,success:!0})},function(u){a.postMessage({sourceName:n,targetName:s,stream:En.START_COMPLETE,streamId:r,reason:na(u)})})}#n(e){const r=e.streamId,n=this.sourceName,s=e.sourceName,a=this.comObj,o=this.streamControllers[r],l=this.streamSinks[r];switch(e.stream){case En.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(na(e.reason));break;case En.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(na(e.reason));break;case En.PULL:if(!l){a.postMessage({sourceName:n,targetName:s,stream:En.PULL_COMPLETE,streamId:r,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||OU).then(function(){a.postMessage({sourceName:n,targetName:s,stream:En.PULL_COMPLETE,streamId:r,success:!0})},function(u){a.postMessage({sourceName:n,targetName:s,stream:En.PULL_COMPLETE,streamId:r,reason:na(u)})});break;case En.ENQUEUE:if(Ln(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case En.CLOSE:if(Ln(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#a(o,r);break;case En.ERROR:Ln(o,"error should have stream controller"),o.controller.error(na(e.reason)),this.#a(o,r);break;case En.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(na(e.reason)),this.#a(o,r);break;case En.CANCEL:if(!l)break;const c=na(e.reason);Promise.try(l.onCancel||OU,c).then(function(){a.postMessage({sourceName:n,targetName:s,stream:En.CANCEL_COMPLETE,streamId:r,success:!0})},function(u){a.postMessage({sourceName:n,targetName:s,stream:En.CANCEL_COMPLETE,streamId:r,reason:na(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}async#a(e,r){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[r]}destroy(){this.#e?.abort(),this.#e=null}}class pte{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,r){if(e<=0||r<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,r);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,r,n){if(!e.canvas)throw new Error("Canvas is not specified");if(r<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=r,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,r){Tr("Abstract method `_createCanvas` called.")}}class wMe extends pte{constructor({ownerDocument:e=globalThis.document,enableHWA:r=!1}){super({enableHWA:r}),this._document=e}_createCanvas(e,r){const n=this._document.createElement("canvas");return n.width=e,n.height=r,n}}class mte{constructor({baseUrl:e=null,isCompressed:r=!0}){this.baseUrl=e,this.isCompressed=r}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const r=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(r).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)})}async _fetch(e){Tr("Abstract method `_fetch` called.")}}class RU extends mte{async _fetch(e){const r=await hy(e,this.isCompressed?"arraybuffer":"text");return r instanceof ArrayBuffer?new Uint8Array(r):dy(r)}}class gte{addFilter(e){return"none"}addHCMFilter(e,r){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,r,n,s,a){return"none"}destroy(e=!1){}}class _Me extends gte{#e;#t;#r;#n;#a;#s;#i=0;constructor({docId:e,ownerDocument:r=globalThis.document}){super(),this.#n=e,this.#a=r}get#o(){return this.#t||=new Map}get#u(){return this.#s||=new Map}get#c(){if(!this.#r){const e=this.#a.createElement("div"),{style:r}=e;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const n=this.#a.createElementNS(Ko,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#r=this.#a.createElementNS(Ko,"defs"),e.append(n),n.append(this.#r),this.#a.body.append(e)}return this.#r}#h(e){if(e.length===1){const c=e[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=c[f]/255;const d=u.join(",");return[d,d,d]}const[r,n,s]=e,a=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=r[c]/255,o[c]=n[c]/255,l[c]=s[c]/255;return[a.join(","),o.join(","),l.join(",")]}#l(e){if(this.#e===void 0){this.#e="";const r=this.#a.URL;r!==this.#a.baseURI&&(MS(r)?Tt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=ote(r,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let r=this.#o.get(e);if(r)return r;const[n,s,a]=this.#h(e),o=e.length===1?n:`${n}${s}${a}`;if(r=this.#o.get(o),r)return this.#o.set(e,r),r;const l=`g_${this.#n}_transfer_map_${this.#i++}`,c=this.#l(l);this.#o.set(e,c),this.#o.set(o,c);const u=this.#f(l);return this.#g(n,s,a,u),c}addHCMFilter(e,r){const n=`${e}-${r}`,s="base";let a=this.#u.get(s);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#u.set(s,a)),!e||!r))return a.url;const o=this.#v(e);e=it.makeHexColor(...o);const l=this.#v(r);if(r=it.makeHexColor(...l),this.#c.style.color="",e==="#000000"&&r==="#ffffff"||e===r)return a.url;const c=new Array(256);for(let g=0;g<=255;g++){const x=g/255;c[g]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const u=c.join(","),d=`g_${this.#n}_hcm_filter`,f=a.filter=this.#f(d);this.#g(u,u,u,f),this.#m(f);const m=(g,x)=>{const v=o[g]/255,y=l[g]/255,w=new Array(x+1);for(let _=0;_<=x;_++)w[_]=v+_/x*(y-v);return w.join(",")};return this.#g(m(0,5),m(1,5),m(2,5),f),a.url=this.#l(d),a.url}addAlphaFilter(e){let r=this.#o.get(e);if(r)return r;const[n]=this.#h([e]),s=`alpha_${n}`;if(r=this.#o.get(s),r)return this.#o.set(e,r),r;const a=`g_${this.#n}_alpha_map_${this.#i++}`,o=this.#l(a);this.#o.set(e,o),this.#o.set(s,o);const l=this.#f(a);return this.#x(n,l),o}addLuminosityFilter(e){let r=this.#o.get(e||"luminosity");if(r)return r;let n,s;if(e?([n]=this.#h([e]),s=`luminosity_${n}`):s="luminosity",r=this.#o.get(s),r)return this.#o.set(e,r),r;const a=`g_${this.#n}_luminosity_map_${this.#i++}`,o=this.#l(a);this.#o.set(e,o),this.#o.set(s,o);const l=this.#f(a);return this.#p(l),e&&this.#x(n,l),o}addHighlightHCMFilter(e,r,n,s,a){const o=`${r}-${n}-${s}-${a}`;let l=this.#u.get(e);if(l?.key===o||(l?(l.filter?.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},this.#u.set(e,l)),!r||!n))return l.url;const[c,u]=[r,n].map(this.#v.bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,g]=[s,a].map(this.#v.bind(this));f<d&&([d,f,m,g]=[f,d,g,m]),this.#c.style.color="";const x=(w,_,A)=>{const C=new Array(256),S=(f-d)/A,E=w/255,P=(_-w)/(255*A);let R=0;for(let O=0;O<=A;O++){const D=Math.round(d+O*S),I=E+O*P;for(let $=R;$<=D;$++)C[$]=I;R=D+1}for(let O=R;O<256;O++)C[O]=C[R-1];return C.join(",")},v=`g_${this.#n}_hcm_${e}_filter`,y=l.filter=this.#f(v);return this.#m(y),this.#g(x(m[0],g[0],5),x(m[1],g[1],5),x(m[2],g[2],5),y),l.url=this.#l(v),l.url}destroy(e=!1){e&&this.#s?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#s?.clear(),this.#s=null,this.#i=0)}#p(e){const r=this.#a.createElementNS(Ko,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(r)}#m(e){const r=this.#a.createElementNS(Ko,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(r)}#f(e){const r=this.#a.createElementNS(Ko,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",e),this.#c.append(r),r}#d(e,r,n){const s=this.#a.createElementNS(Ko,r);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),e.append(s)}#g(e,r,n,s){const a=this.#a.createElementNS(Ko,"feComponentTransfer");s.append(a),this.#d(a,"feFuncR",e),this.#d(a,"feFuncG",r),this.#d(a,"feFuncB",n)}#x(e,r){const n=this.#a.createElementNS(Ko,"feComponentTransfer");r.append(n),this.#d(n,"feFuncA",e)}#v(e){return this.#c.style.color=e,DS(getComputedStyle(this.#c).getPropertyValue("color"))}}class vte{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const r=`${this.baseUrl}${e}`;return this._fetch(r).catch(n=>{throw new Error(`Unable to load font data at: ${r}`)})}async _fetch(e){Tr("Abstract method `_fetch` called.")}}class IU extends vte{async _fetch(e){const r=await hy(e,"arraybuffer");return new Uint8Array(r)}}class yte{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const r=`${this.baseUrl}${e}`;return this._fetch(r).catch(n=>{throw new Error(`Unable to load wasm data at: ${r}`)})}async _fetch(e){Tr("Abstract method `_fetch` called.")}}class MU extends yte{async _fetch(e){const r=await hy(e,"arraybuffer");return new Uint8Array(r)}}Rs&&Tt("Please use the `legacy` build in Node.js environments.");async function X2(t){const r=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(r)}class SMe extends gte{}class jMe extends pte{_createCanvas(e,r){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,r)}}class AMe extends mte{async _fetch(e){return X2(e)}}class NMe extends vte{async _fetch(e){return X2(e)}}class EMe extends yte{async _fetch(e){return X2(e)}}const ms={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function _O(t,e){if(!e)return;const r=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],r,n),t.clip(s)}class Y2{isModifyingCurrentTransform(){return!1}getPattern(){Tr("Abstract method `getPattern` called.")}}class CMe extends Y2{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let r;this._type==="axial"?r=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(r=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)r.addColorStop(n[0],n[1]);return r}getPattern(e,r,n,s){let a;if(s===ms.STROKE||s===ms.FILL){const o=r.current.getClippedPathBoundingBox(s,Zr(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=r.cachedCanvases.getCanvas("pattern",l,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),n=it.transform(n,[1,0,0,1,o[0],o[1]]),d.transform(...r.baseTransform),this.matrix&&d.transform(...this.matrix),_O(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),a=e.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(n);a.setTransform(f)}else _O(e,this._bbox),a=this._createGradient(e);return a}}function TE(t,e,r,n,s,a,o,l){const c=e.coords,u=e.colors,d=t.data,f=t.width*4;let m;c[r+1]>c[n+1]&&(m=r,r=n,n=m,m=a,a=o,o=m),c[n+1]>c[s+1]&&(m=n,n=s,s=m,m=o,o=l,l=m),c[r+1]>c[n+1]&&(m=r,r=n,n=m,m=a,a=o,o=m);const g=(c[r]+e.offsetX)*e.scaleX,x=(c[r+1]+e.offsetY)*e.scaleY,v=(c[n]+e.offsetX)*e.scaleX,y=(c[n+1]+e.offsetY)*e.scaleY,w=(c[s]+e.offsetX)*e.scaleX,_=(c[s+1]+e.offsetY)*e.scaleY;if(x>=_)return;const A=u[a],C=u[a+1],S=u[a+2],E=u[o],P=u[o+1],R=u[o+2],O=u[l],D=u[l+1],I=u[l+2],$=Math.round(x),M=Math.round(_);let U,H,z,q,V,W,B,F;for(let Y=$;Y<=M;Y++){if(Y<y){const ye=Y<x?0:(x-Y)/(x-y);U=g-(g-v)*ye,H=A-(A-E)*ye,z=C-(C-P)*ye,q=S-(S-R)*ye}else{let ye;Y>_?ye=1:y===_?ye=0:ye=(y-Y)/(y-_),U=v-(v-w)*ye,H=E-(E-O)*ye,z=P-(P-D)*ye,q=R-(R-I)*ye}let oe;Y<x?oe=0:Y>_?oe=1:oe=(x-Y)/(x-_),V=g-(g-w)*oe,W=A-(A-O)*oe,B=C-(C-D)*oe,F=S-(S-I)*oe;const xe=Math.round(Math.min(U,V)),J=Math.round(Math.max(U,V));let Ee=f*Y+xe*4;for(let ye=xe;ye<=J;ye++)oe=(U-ye)/(U-V),oe<0?oe=0:oe>1&&(oe=1),d[Ee++]=H-(H-W)*oe|0,d[Ee++]=z-(z-B)*oe|0,d[Ee++]=q-(q-F)*oe|0,d[Ee++]=255}}function TMe(t,e,r){const n=e.coords,s=e.colors;let a,o;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(n.length/l)-1,u=l-1;for(a=0;a<c;a++){let d=a*l;for(let f=0;f<u;f++,d++)TE(t,r,n[d],n[d+1],n[d+l],s[d],s[d+1],s[d+l]),TE(t,r,n[d+l+1],n[d+1],n[d+l],s[d+l+1],s[d+1],s[d+l])}break;case"triangles":for(a=0,o=n.length;a<o;a+=3)TE(t,r,n[a],n[a+1],n[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class PMe extends Y2{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,r,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,d=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),g=u/f,x=d/m,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/g,scaleY:1/x},y=f+4,w=m+4,_=n.getCanvas("mesh",y,w),A=_.context,C=A.createImageData(f,m);if(r){const E=C.data;for(let P=0,R=E.length;P<R;P+=4)E[P]=r[0],E[P+1]=r[1],E[P+2]=r[2],E[P+3]=255}for(const E of this._figures)TMe(C,E,v);return A.putImageData(C,2,2),{canvas:_.canvas,offsetX:l-2*g,offsetY:c-2*x,scaleX:g,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(e,r,n,s){_O(e,this._bbox);const a=new Float32Array(2);if(s===ms.SHADING)it.singularValueDecompose2dScale(Zr(e),a);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,a);const[l,c]=a;it.singularValueDecompose2dScale(r.baseTransform,a),a[0]*=l,a[1]*=c}else it.singularValueDecompose2dScale(r.baseTransform,a);const o=this._createMeshCanvas(a,s===ms.SHADING?null:this._background,r.cachedCanvases);return s!==ms.SHADING&&(e.setTransform(...r.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class kMe extends Y2{getPattern(){return"hotpink"}}function OMe(t){switch(t[0]){case"RadialAxial":return new CMe(t);case"Mesh":return new PMe(t);case"Dummy":return new kMe}throw new Error(`Unknown IR type: ${t[0]}`)}const DU={COLORED:1,UNCOLORED:2};class Q2{static MAX_PATTERN_SIZE=3e3;constructor(e,r,n,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=r,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e){const{bbox:r,operatorList:n,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),IS("TilingType: "+a);const d=r[0],f=r[1],m=r[2],g=r[3],x=m-d,v=g-f,y=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,y);const[w,_]=y;it.singularValueDecompose2dScale(this.baseTransform,y);const A=w*y[0],C=_*y[1];let S=x,E=v,P=!1,R=!1;const O=Math.ceil(c*A),D=Math.ceil(u*C),I=Math.ceil(x*A),$=Math.ceil(v*C);O>=I?S=c:P=!0,D>=$?E=u:R=!0;const M=this.getSizeAndScale(S,this.ctx.canvas.width,A),U=this.getSizeAndScale(E,this.ctx.canvas.height,C),H=e.cachedCanvases.getCanvas("pattern",M.size,U.size),z=H.context,q=l.createCanvasGraphics(z);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,s,o),z.translate(-M.scale*d,-U.scale*f),q.transform(M.scale,0,0,U.scale,0,0),z.save(),this.clipBbox(q,d,f,m,g),q.baseTransform=Zr(q.ctx),q.executeOperatorList(n),q.endDrawing(),z.restore(),P||R){const V=H.canvas;P&&(S=c),R&&(E=u);const W=this.getSizeAndScale(S,this.ctx.canvas.width,A),B=this.getSizeAndScale(E,this.ctx.canvas.height,C),F=W.size,Y=B.size,oe=e.cachedCanvases.getCanvas("pattern-workaround",F,Y),xe=oe.context,J=P?Math.floor(x/c):0,Ee=R?Math.floor(v/u):0;for(let ye=0;ye<=J;ye++)for(let je=0;je<=Ee;je++)xe.drawImage(V,F*ye,Y*je,F,Y,0,0,F,Y);return{canvas:oe.canvas,scaleX:W.scale,scaleY:B.scale,offsetX:d,offsetY:f}}return{canvas:H.canvas,scaleX:M.scale,scaleY:U.scale,offsetX:d,offsetY:f}}getSizeAndScale(e,r,n){const s=Math.max(Q2.MAX_PATTERN_SIZE,r);let a=Math.ceil(e*n);return a>=s?a=s:n=a/e,{scale:n,size:a}}clipBbox(e,r,n,s,a){const o=s-r,l=a-n;e.ctx.rect(r,n,o,l),it.axialAlignedBoundingBox([r,n,s,a],Zr(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,r,n){const s=e.ctx,a=e.current;switch(r){case DU.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;s.fillStyle=a.fillColor=o,s.strokeStyle=a.strokeColor=l;break;case DU.UNCOLORED:s.fillStyle=s.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new QIe(`Unsupported paint type: ${r}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,r,n,s){let a=n;s!==ms.SHADING&&(a=it.transform(a,r.baseTransform),this.matrix&&(a=it.transform(a,this.matrix)));const o=this.createPatternCanvas(r);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}}function RMe({src:t,srcPos:e=0,dest:r,width:n,height:s,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const l=vs.isLittleEndian?4278190080:255,[c,u]=o?[a,l]:[l,a],d=n>>3,f=n&7,m=t.length;r=new Uint32Array(r.buffer);let g=0;for(let x=0;x<s;x++){for(const y=e+d;e<y;e++){const w=e<m?t[e]:255;r[g++]=w&128?u:c,r[g++]=w&64?u:c,r[g++]=w&32?u:c,r[g++]=w&16?u:c,r[g++]=w&8?u:c,r[g++]=w&4?u:c,r[g++]=w&2?u:c,r[g++]=w&1?u:c}if(f===0)continue;const v=e<m?t[e++]:255;for(let y=0;y<f;y++)r[g++]=v&1<<7-y?u:c}return{srcPos:e,destPos:g}}const LU=16,$U=100,IMe=15,FU=10,aa=16,PE=new DOMMatrix,ja=new Float32Array(2),Wh=new Float32Array([1/0,1/0,-1/0,-1/0]);function MMe(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(r,n){e.translate(r,n),this.__originalTranslate(r,n)},t.scale=function(r,n){e.scale(r,n),this.__originalScale(r,n)},t.transform=function(r,n,s,a,o,l){e.transform(r,n,s,a,o,l),this.__originalTransform(r,n,s,a,o,l)},t.setTransform=function(r,n,s,a,o,l){e.setTransform(r,n,s,a,o,l),this.__originalSetTransform(r,n,s,a,o,l)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(r){e.rotate(r),this.__originalRotate(r)},t.clip=function(r){e.clip(r),this.__originalClip(r)},t.moveTo=function(r,n){e.moveTo(r,n),this.__originalMoveTo(r,n)},t.lineTo=function(r,n){e.lineTo(r,n),this.__originalLineTo(r,n)},t.bezierCurveTo=function(r,n,s,a,o,l){e.bezierCurveTo(r,n,s,a,o,l),this.__originalBezierCurveTo(r,n,s,a,o,l)},t.rect=function(r,n,s,a){e.rect(r,n,s,a),this.__originalRect(r,n,s,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class DMe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,r,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,r,n)):(s=this.canvasFactory.create(r,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const r=this.cache[e];this.canvasFactory.destroy(r),delete this.cache[e]}}}function x0(t,e,r,n,s,a,o,l,c,u){const[d,f,m,g,x,v]=Zr(t);if(f===0&&m===0){const _=o*d+x,A=Math.round(_),C=l*g+v,S=Math.round(C),E=(o+c)*d+x,P=Math.abs(Math.round(E)-A)||1,R=(l+u)*g+v,O=Math.abs(Math.round(R)-S)||1;return t.setTransform(Math.sign(d),0,0,Math.sign(g),A,S),t.drawImage(e,r,n,s,a,0,0,P,O),t.setTransform(d,f,m,g,x,v),[P,O]}if(d===0&&g===0){const _=l*m+x,A=Math.round(_),C=o*f+v,S=Math.round(C),E=(l+u)*m+x,P=Math.abs(Math.round(E)-A)||1,R=(o+c)*f+v,O=Math.abs(Math.round(R)-S)||1;return t.setTransform(0,Math.sign(f),Math.sign(m),0,A,S),t.drawImage(e,r,n,s,a,0,0,O,P),t.setTransform(d,f,m,g,x,v),[O,P]}t.drawImage(e,r,n,s,a,o,l,c,u);const y=Math.hypot(d,f),w=Math.hypot(m,g);return[y*c,w*u]}class BU{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=gO;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=As.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,r){this.clipBox=new Float32Array([0,0,e,r]),this.minMax=Wh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=ms.FILL,r=null){const n=this.minMax.slice();if(e===ms.STROKE){r||Tr("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(r,ja);const s=ja[0]*this.lineWidth/2,a=ja[1]*this.lineWidth/2;n[0]-=s,n[1]-=a,n[2]+=s,n[3]+=a}return n}updateClipFromPath(){const e=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Wh,0)}getClippedPathBoundingBox(e=ms.FILL,r=null){return it.intersect(this.clipBox,this.getPathBoundingBox(e,r))}}function UU(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const r=e.height,n=e.width,s=r%aa,a=(r-s)/aa,o=s===0?a:a+1,l=t.createImageData(n,aa);let c=0,u;const d=e.data,f=l.data;let m,g,x,v;if(e.kind===nb.GRAYSCALE_1BPP){const y=d.byteLength,w=new Uint32Array(f.buffer,0,f.byteLength>>2),_=w.length,A=n+7>>3,C=4294967295,S=vs.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(x=m<a?aa:s,u=0,g=0;g<x;g++){const E=y-c;let P=0;const R=E>A?n:E*8-7,O=R&-8;let D=0,I=0;for(;P<O;P+=8)I=d[c++],w[u++]=I&128?C:S,w[u++]=I&64?C:S,w[u++]=I&32?C:S,w[u++]=I&16?C:S,w[u++]=I&8?C:S,w[u++]=I&4?C:S,w[u++]=I&2?C:S,w[u++]=I&1?C:S;for(;P<R;P++)D===0&&(I=d[c++],D=128),w[u++]=I&D?C:S,D>>=1}for(;u<_;)w[u++]=0;t.putImageData(l,0,m*aa)}}else if(e.kind===nb.RGBA_32BPP){for(g=0,v=n*aa*4,m=0;m<a;m++)f.set(d.subarray(c,c+v)),c+=v,t.putImageData(l,0,g),g+=aa;m<o&&(v=n*s*4,f.set(d.subarray(c,c+v)),t.putImageData(l,0,g))}else if(e.kind===nb.RGB_24BPP)for(x=aa,v=n*x,m=0;m<o;m++){for(m>=a&&(x=s,v=n*x),u=0,g=v;g--;)f[u++]=d[c++],f[u++]=d[c++],f[u++]=d[c++],f[u++]=255;t.putImageData(l,0,m*aa)}else throw new Error(`bad image kind: ${e.kind}`)}function zU(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const r=e.height,n=e.width,s=r%aa,a=(r-s)/aa,o=s===0?a:a+1,l=t.createImageData(n,aa);let c=0;const u=e.data,d=l.data;for(let f=0;f<o;f++){const m=f<a?aa:s;({srcPos:c}=RMe({src:u,srcPos:c,dest:d,width:n,height:m,nonBlackColor:0})),t.putImageData(l,0,f*aa)}}function Cm(t,e){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of r)t[n]!==void 0&&(e[n]=t[n]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function b0(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function qU(t,e){if(e)return!0;it.singularValueDecompose2dScale(t,ja);const r=Math.fround(Ao.pixelRatio*Df.PDF_TO_CSS_UNITS);return ja[0]<=r&&ja[1]<=r}const LMe=["butt","round","square"],$Me=["miter","round","bevel"],FMe={},VU={};class lf{constructor(e,r,n,s,a,{optionalContentConfig:o,markedContentStack:l=null},c,u){this.ctx=e,this.current=new BU(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new DMe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,r=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):r}beginDrawing({transform:e,viewport:r,transparency:n=!1,background:s=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Zr(this.compositeCtx))}this.ctx.save(),b0(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=Zr(this.ctx)}executeOperatorList(e,r,n,s){const a=e.argsArray,o=e.fnArray;let l=r||0;const c=a.length;if(c===l)return l;const u=c-l>FU&&typeof n=="function",d=u?Date.now()+IMe:0;let f=0;const m=this.commonObjs,g=this.objs;let x;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,n),l;if(x=o[l],x!==pw.dependency)this[x].apply(this,a[l]);else for(const v of a[l]){const y=v.startsWith("g_")?m:g;if(!y.has(v))return y.get(v,n),l}if(l++,l===c)return l;if(u&&++f>FU){if(Date.now()>d)return n(),l;f=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const r of e.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const r=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}}_scaleImage(e,r){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let a=Math.max(Math.hypot(r[0],r[1]),1),o=Math.max(Math.hypot(r[2],r[3]),1),l=n,c=s,u="prescale1",d,f;for(;a>2&&l>1||o>2&&c>1;){let m=l,g=c;a>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/m),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),d=this.cachedCanvases.getCanvas(u,m,g),f=d.context,f.clearRect(0,0,m,g),f.drawImage(e,0,0,l,c,0,0,m,g),e=d.canvas,l=m,c=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const r=this.ctx,{width:n,height:s}=e,a=this.current.fillColor,o=this.current.patternFill,l=Zr(r);let c,u,d,f;if((e.bitmap||e.data)&&e.count>1){const O=e.bitmap||e.data.buffer;u=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(O),c||(c=new Map,this._cachedBitmapsMap.set(O,c));const D=c.get(u);if(D&&!o){const I=Math.round(Math.min(l[0],l[2])+l[4]),$=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:D,offsetX:I,offsetY:$}}d=D}d||(f=this.cachedCanvases.getCanvas("maskCanvas",n,s),zU(f.context,e));let m=it.transform(l,[1/n,0,0,-1/s,0,0]);m=it.transform(m,[1,0,0,1,0,-s]);const g=Wh.slice();it.axialAlignedBoundingBox([0,0,n,s],m,g);const[x,v,y,w]=g,_=Math.round(y-x)||1,A=Math.round(w-v)||1,C=this.cachedCanvases.getCanvas("fillCanvas",_,A),S=C.context,E=x,P=v;S.translate(-E,-P),S.transform(...m),d||(d=this._scaleImage(f.canvas,no(S)),d=d.img,c&&o&&c.set(u,d)),S.imageSmoothingEnabled=qU(Zr(S),e.interpolate),x0(S,d,0,0,d.width,d.height,0,0,n,s),S.globalCompositeOperation="source-in";const R=it.transform(no(S),[1,0,0,1,-E,-P]);return S.fillStyle=o?a.getPattern(r,this,R,ms.FILL):a,S.fillRect(0,0,n,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,C.canvas)),{canvas:C.canvas,offsetX:Math.round(E),offsetY:Math.round(P)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=LMe[e]}setLineJoin(e){this.ctx.lineJoin=$Me[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,r){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=r)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[r,n]of e)switch(r){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,r=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,r);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),Cm(this.suspendedCtx,a),MMe(a,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Cm(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,r,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,r,n,s){const a=s[0],o=s[1],l=s[2]-a,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(r.context,n,l,c,r.subtype,r.backdrop,r.transferMap,a,o,r.offsetX,r.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,r,n,s,a,o,l,c,u,d,f){let m=e.canvas,g=c-d,x=u-f;if(o)if(g<0||x<0||g+n>m.width||x+s>m.height){const y=this.cachedCanvases.getCanvas("maskExtension",n,s),w=y.context;w.drawImage(m,-g,-x),w.globalCompositeOperation="destination-atop",w.fillStyle=o,w.fillRect(0,0,n,s),w.globalCompositeOperation="source-over",m=y.canvas,g=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(g,x,n,s),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(g,x,n,s),e.restore()}r.save(),r.globalAlpha=1,r.setTransform(1,0,0,1,0,0),a==="Alpha"&&l?r.filter=this.filterFactory.addAlphaFilter(l):a==="Luminosity"&&(r.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(c,u,n,s),r.clip(v),r.globalCompositeOperation="destination-in",r.drawImage(m,g,x,n,s,c,u,n,s),r.restore()}save(){this.inSMaskMode&&Cm(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Cm(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,r,n,s,a,o){this.ctx.transform(e,r,n,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,r,n){let[s]=r;if(!n){s||=r[0]=new Path2D,this[e](s);return}if(!(s instanceof Path2D)){const a=r[0]=new Path2D;for(let o=0,l=s.length;o<l;)switch(s[o++]){case m0.moveTo:a.moveTo(s[o++],s[o++]);break;case m0.lineTo:a.lineTo(s[o++],s[o++]);break;case m0.curveTo:a.bezierCurveTo(s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case m0.closePath:a.closePath();break;default:Tt(`Unrecognized drawing path operator: ${s[o-1]}`);break}s=a}it.axialAlignedBoundingBox(n,Zr(this.ctx),this.current.minMax),this[e](s)}closePath(){this.ctx.closePath()}stroke(e,r=!0){const n=this.ctx,s=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&s?.getPattern){const a=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=s.getPattern(n,this,no(n),ms.STROKE),a){const o=new Path2D;o.addPath(e,n.getTransform().invertSelf().multiplySelf(a)),e=o}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);r&&this.consumePath(e,this.current.getClippedPathBoundingBox(ms.STROKE,Zr(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,r=!0){const n=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const c=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=s.getPattern(n,this,no(n),ms.FILL),c){const u=new Path2D;u.addPath(e,n.getTransform().invertSelf().multiplySelf(c)),e=u}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),o&&n.restore(),r&&this.consumePath(e,l)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=FMe}eoClip(){this.pendingClip=VU}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,r=this.ctx;if(e===void 0)return;const n=new Path2D,s=r.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:c,path:u}of e)u&&n.addPath(u,new DOMMatrix(a).preMultiplySelf(s).translate(o,l).scale(c,-c));r.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,r){const n=this.commonObjs.get(e),s=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=n.fontMatrix||gO,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Tt("Invalid font matrix for font "+e),r<0?(r=-r,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=r,n.isType3Font)return;const a=n.loadedName||"sans-serif",o=n.systemFontInfo?.css||`"${a}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const c=n.italic?"italic":"normal";let u=r;r<LU?u=LU:r>$U&&(u=$U),this.current.fontSizeScale=r/u,this.ctx.font=`${c} ${l} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,r){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,r){this.setLeading(-r),this.moveText(e,r)}setTextMatrix(e){const{current:r}=this;r.textMatrix=e,r.textMatrixScale=Math.hypot(e[0],e[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#r(e,r,n){const s=new Path2D;return s.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(r)),s}paintChar(e,r,n,s,a){const o=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,f=u&As.FILL_STROKE_MASK,m=!!(u&As.ADD_TO_PATH_FLAG),g=l.patternFill&&!c.missingFile,x=l.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||m||g||x)&&!c.missingFile&&(v=c.getPathGenerator(this.commonObjs,e)),v&&(c.disableFontFace||g||x)){o.save(),o.translate(r,n),o.scale(d,-d);let y;if((f===As.FILL||f===As.FILL_STROKE)&&(s?(y=o.getTransform(),o.setTransform(...s),o.fill(this.#r(v,y,s))):o.fill(v)),f===As.STROKE||f===As.FILL_STROKE)if(a){y||=o.getTransform(),o.setTransform(...a);const{a:w,b:_,c:A,d:C}=y,S=it.inverseTransform(a),E=it.transform([w,_,A,C,0,0],S);it.singularValueDecompose2dScale(E,ja),o.lineWidth*=Math.max(ja[0],ja[1])/d,o.stroke(this.#r(v,y,a))}else o.lineWidth/=d,o.stroke(v);o.restore()}else(f===As.FILL||f===As.FILL_STROKE)&&o.fillText(e,r,n),(f===As.STROKE||f===As.FILL_STROKE)&&o.strokeText(e,r,n);m&&(this.pendingTextPaths||=[]).push({transform:Zr(o),x:r,y:n,fontSize:d,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const r=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<r.length;s+=4)if(r[s]>0&&r[s]<255){n=!0;break}return Gt(this,"isFontSubpixelAAEnabled",n)}showText(e){const r=this.current,n=r.font;if(n.isType3Font)return this.showType3Text(e);const s=r.fontSize;if(s===0)return;const a=this.ctx,o=r.fontSizeScale,l=r.charSpacing,c=r.wordSpacing,u=r.fontDirection,d=r.textHScale*u,f=e.length,m=n.vertical,g=m?1:-1,x=n.defaultVMetrics,v=s*r.fontMatrix[0],y=r.textRenderingMode===As.FILL&&!n.disableFontFace&&!r.patternFill;a.save(),r.textMatrix&&a.transform(...r.textMatrix),a.translate(r.x,r.y+r.textRise),u>0?a.scale(d,-1):a.scale(d,1);let w,_;if(r.patternFill){a.save();const P=r.fillColor.getPattern(a,this,no(a),ms.FILL);w=Zr(a),a.restore(),a.fillStyle=P}if(r.patternStroke){a.save();const P=r.strokeColor.getPattern(a,this,no(a),ms.STROKE);_=Zr(a),a.restore(),a.strokeStyle=P}let A=r.lineWidth;const C=r.textMatrixScale;if(C===0||A===0){const P=r.textRenderingMode&As.FILL_STROKE_MASK;(P===As.STROKE||P===As.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=C;if(o!==1&&(a.scale(o,o),A/=o),a.lineWidth=A,n.isInvalidPDFjsFont){const P=[];let R=0;for(const O of e)P.push(O.unicode),R+=O.width;a.fillText(P.join(""),0,0),r.x+=R*v*d,a.restore(),this.compose();return}let S=0,E;for(E=0;E<f;++E){const P=e[E];if(typeof P=="number"){S+=g*P*s/1e3;continue}let R=!1;const O=(P.isSpace?c:0)+l,D=P.fontChar,I=P.accent;let $,M,U=P.width;if(m){const z=P.vmetric||x,q=-(P.vmetric?z[1]:U*.5)*v,V=z[2]*v;U=z?-z[0]:U,$=q/o,M=(S+V)/o}else $=S/o,M=0;if(n.remeasure&&U>0){const z=a.measureText(D).width*1e3/s*o;if(U<z&&this.isFontSubpixelAAEnabled){const q=U/z;R=!0,a.save(),a.scale(q,1),$/=q}else U!==z&&($+=(U-z)/2e3*s/o)}if(this.contentVisible&&(P.isInFont||n.missingFile)){if(y&&!I)a.fillText(D,$,M);else if(this.paintChar(D,$,M,w,_),I){const z=$+s*I.offset.x/o,q=M-s*I.offset.y/o;this.paintChar(I.fontChar,z,q,w,_)}}const H=m?U*v-O*u:U*v+O*u;S+=H,R&&a.restore()}m?r.y-=S:r.x+=S*d,a.restore(),this.compose()}showType3Text(e){const r=this.ctx,n=this.current,s=n.font,a=n.fontSize,o=n.fontDirection,l=s.vertical?1:-1,c=n.charSpacing,u=n.wordSpacing,d=n.textHScale*o,f=n.fontMatrix||gO,m=e.length,g=n.textRenderingMode===As.INVISIBLE;let x,v,y,w;if(!(g||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),n.textMatrix&&r.transform(...n.textMatrix),r.translate(n.x,n.y+n.textRise),r.scale(d,o),x=0;x<m;++x){if(v=e[x],typeof v=="number"){w=l*v*a/1e3,this.ctx.translate(w,0),n.x+=w*d;continue}const _=(v.isSpace?u:0)+c,A=s.charProcOperatorList[v.operatorListId];A?this.contentVisible&&(this.save(),r.scale(a,a),r.transform(...f),this.executeOperatorList(A),this.restore()):Tt(`Type3 character "${v.operatorListId}" is not available.`);const C=[v.width,0];it.applyTransform(C,f),y=C[0]*a+_,r.translate(y,0),n.x+=y*d}r.restore()}}setCharWidth(e,r){}setCharWidthAndBounds(e,r,n,s,a,o){const l=new Path2D;l.rect(n,s,a-n,o-s),this.ctx.clip(l),this.endPath()}getColorN_Pattern(e){let r;if(e[0]==="TilingPattern"){const n=this.baseTransform||Zr(this.ctx),s={createCanvasGraphics:a=>new lf(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};r=new Q2(e,this.ctx,s,n)}else r=this._getPattern(e[1],e[2]);return r}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,r=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=OMe(this.getObject(e)),this.cachedPatterns.set(e,n)),r&&(n.matrix=r),n}shadingFill(e){if(!this.contentVisible)return;const r=this.ctx;this.save();const n=this._getPattern(e);r.fillStyle=n.getPattern(r,this,no(r),ms.SHADING);const s=no(r);if(s){const{width:a,height:o}=r.canvas,l=Wh.slice();it.axialAlignedBoundingBox([0,0,a,o],s,l);const[c,u,d,f]=l;this.ctx.fillRect(c,u,d-c,f-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Tr("Should not call beginInlineImage")}beginImageData(){Tr("Should not call beginImageData")}paintFormXObjectBegin(e,r){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Zr(this.ctx),r)){it.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[n,s,a,o]=r,l=new Path2D;l.rect(n,s,a-n,o-s),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;e.isolated||IS("TODO: Support non-isolated groups."),e.knockout&&Tt("Knockout groups not supported.");const n=Zr(r);if(e.matrix&&r.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Wh.slice();it.axialAlignedBoundingBox(e.bbox,Zr(r),s);const a=[0,0,r.canvas.width,r.canvas.height];s=it.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,c,u),m=f.context;m.translate(-o,-l),m.transform(...n);let g=new Path2D;const[x,v,y,w]=e.bbox;if(g.rect(x,v,y-x,w-v),e.matrix){const _=new Path2D;_.addPath(g,new DOMMatrix(e.matrix)),g=_}m.clip(g),e.smask?this.smaskStack.push({canvas:f.canvas,context:m,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(o,l),r.save()),Cm(r,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Zr(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const a=Wh.slice();it.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],s,a),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,r,n,s,a){if(this.#e(),b0(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const o=r[2]-r[0],l=r[3]-r[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=r[0],n[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=o,r[3]=l,it.singularValueDecompose2dScale(Zr(this.ctx),ja);const{viewportScale:c}=this,u=Math.ceil(o*this.outputScaleX*c),d=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(ja[0],0,0,-ja[1],0,l*ja[1]),b0(this.ctx)}else{b0(this.ctx),this.endPath();const c=new Path2D;c.rect(r[0],r[1],o,l),this.ctx.clip(c)}}this.current=new BU(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const r=e.count;e=this.getObject(e.data,e),e.count=r;const n=this.ctx,s=this._createMaskCanvas(e),a=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,r,n=0,s=0,a,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=Zr(l);l.transform(r,n,s,a,0,0);const u=this._createMaskCanvas(e);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let d=0,f=o.length;d<f;d+=2){const m=it.transform(c,[r,n,s,a,o[d],o[d+1]]);l.drawImage(u.canvas,m[4],m[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const r=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const a of e){const{data:o,width:l,height:c,transform:u}=a,d=this.cachedCanvases.getCanvas("maskCanvas",l,c),f=d.context;f.save();const m=this.getObject(o,a);zU(f,m),f.globalCompositeOperation="source-in",f.fillStyle=s?n.getPattern(f,this,no(r),ms.FILL):n,f.fillRect(0,0,l,c),f.restore(),r.save(),r.transform(...u),r.scale(1,-1),x0(r,d.canvas,0,0,l,c,0,-1,1,1),r.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){Tt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(r)}paintImageXObjectRepeat(e,r,n,s){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){Tt("Dependent image isn't ready yet");return}const o=a.width,l=a.height,c=[];for(let u=0,d=s.length;u<d;u+=2)c.push({transform:[r,0,0,n,s[u],s[u+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(a,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:r,width:n,height:s}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,s),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(r,0,0),o.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const r=e.width,n=e.height,s=this.ctx;this.save();const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/r,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const u=this.cachedCanvases.getCanvas("inlineImage",r,n).context;UU(u,e),o=this.applyTransferMapsToCanvas(u)}const l=this._scaleImage(o,no(s));s.imageSmoothingEnabled=qU(Zr(s),e.interpolate),x0(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,r,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,r){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const a=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",a,o).context;UU(c,e),s=this.applyTransferMapsToCanvas(c)}for(const a of r)n.save(),n.transform(...a.transform),n.scale(1,-1),x0(n,s,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,r){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,r){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,r){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const s=this.ctx;this.pendingClip&&(n||(this.pendingClip===VU?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Zr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const r=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:r,b:n,c:s,d:a}=this.ctx.getTransform();let o,l;if(n===0&&s===0){const c=Math.abs(r),u=Math.abs(a);if(c===u)if(e===0)o=l=1/c;else{const d=c*e;o=l=d<1?1/d:1}else if(e===0)o=1/c,l=1/u;else{const d=c*e,f=u*e;o=d<1?1/d:1,l=f<1?1/f:1}}else{const c=Math.abs(r*a-n*s),u=Math.hypot(r,n),d=Math.hypot(s,a);if(e===0)o=d/c,l=u/c;else{const f=e*c;o=d>f?d/f:1,l=u>f?u/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,r){const{ctx:n,current:{lineWidth:s}}=this,[a,o]=this.getScaleForStroking();if(a===o){n.lineWidth=(s||1)*a,n.stroke(e);return}const l=n.getLineDash();r&&n.save(),n.scale(a,o),PE.a=1/a,PE.d=1/o;const c=new Path2D;if(c.addPath(e,PE),l.length>0){const u=Math.max(a,o);n.setLineDash(l.map(d=>d/u)),n.lineDashOffset/=u}n.lineWidth=s||1,n.stroke(c),r&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const t in pw)lf.prototype[t]!==void 0&&(lf.prototype[pw[t]]=lf.prototype[t]);class cf{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class BMe{#e;#t;constructor({parsedData:e,rawData:r}){this.#e=e,this.#t=r}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const $h=Symbol("INTERNAL");class UMe{#e=!1;#t=!1;#r=!1;#n=!0;constructor(e,{name:r,intent:n,usage:s,rbGroups:a}){this.#e=!!(e&ba.DISPLAY),this.#t=!!(e&ba.PRINT),this.name=r,this.intent=n,this.usage=s,this.rbGroups=a}get visible(){if(this.#r)return this.#n;if(!this.#n)return!1;const{print:e,view:r}=this.usage;return this.#e?r?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,r,n=!1){e!==$h&&Tr("Internal method `_setVisible` called."),this.#r=n,this.#n=r}}class zMe{#e=null;#t=new Map;#r=null;#n=null;constructor(e,r=ba.DISPLAY){if(this.renderingIntent=r,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const n of e.groups)this.#t.set(n.id,new UMe(r,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible($h,!1);for(const n of e.on)this.#t.get(n)._setVisible($h,!0);for(const n of e.off)this.#t.get(n)._setVisible($h,!1);this.#r=this.getHash()}}#a(e){const r=e.length;if(r<2)return!0;const n=e[0];for(let s=1;s<r;s++){const a=e[s];let o;if(Array.isArray(a))o=this.#a(a);else if(this.#t.has(a))o=this.#t.get(a).visible;else return Tt(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return IS("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Tt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const r of e.ids){if(!this.#t.has(r))return Tt(`Optional content group not found: ${r}`),!0;if(this.#t.get(r).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const r of e.ids){if(!this.#t.has(r))return Tt(`Optional content group not found: ${r}`),!0;if(!this.#t.get(r).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const r of e.ids){if(!this.#t.has(r))return Tt(`Optional content group not found: ${r}`),!0;if(!this.#t.get(r).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const r of e.ids){if(!this.#t.has(r))return Tt(`Optional content group not found: ${r}`),!0;if(this.#t.get(r).visible)return!1}return!0}return Tt(`Unknown optional content policy ${e.policy}.`),!0}return Tt(`Unknown group type ${e.type}.`),!0}setVisibility(e,r=!0,n=!0){const s=this.#t.get(e);if(!s){Tt(`Optional content group not found: ${e}`);return}if(n&&r&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&this.#t.get(o)?._setVisible($h,!1,!0);s._setVisible($h,!!r,!0),this.#e=null}setOCGState({state:e,preserveRB:r}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const a=this.#t.get(s);if(a)switch(n){case"ON":this.setVisibility(s,!0,r);break;case"OFF":this.setVisibility(s,!1,r);break;case"Toggle":this.setVisibility(s,!a.visible,r);break}}this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new hte;for(const[r,n]of this.#t)e.update(`${r}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class qMe{constructor(e,{disableRange:r=!1,disableStream:n=!1}){Ln(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,a?.length>0){const c=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!r,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:r}){const n=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});Ln(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const r=this._rangeReaders.indexOf(e);r>=0&&this._rangeReaders.splice(r,1)}getFullReader(){Ln(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new VMe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new HMe(this,e,r);return this._pdfDataRangeTransport.requestDataRange(e,r),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class VMe{constructor(e,r,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=H2(s)?s:null,this._queuedChunks=r||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class HMe{constructor(e,r,n){this._stream=e,this._begin=r,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function WMe(t){let e=!0,r=n("filename\\*","i").exec(t);if(r){r=r[1];let d=l(r);return d=unescape(d),d=c(d),d=u(d),a(d)}if(r=o(t),r){const d=u(r);return a(d)}if(r=n("filename","i").exec(t),r){r=r[1];let d=l(r);return d=u(d),a(d)}function n(d,f){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(d,f){if(d){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const m=new TextDecoder(d,{fatal:!0}),g=dy(f);f=m.decode(g),e=!1}catch{}}return f}function a(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function o(d){const f=[];let m;const g=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=g.exec(d))!==null;){let[,v,y,w]=m;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[y,w]}const x=[];for(let v=0;v<f.length&&v in f;++v){let[y,w]=f[v];w=l(w),y&&(w=unescape(w),v===0&&(w=c(w))),x.push(w)}return x.join("")}function l(d){if(d.startsWith('"')){const f=d.slice(1).split('\\"');for(let m=0;m<f.length;++m){const g=f[m].indexOf('"');g!==-1&&(f[m]=f[m].slice(0,g),f.length=m+1),f[m]=f[m].replaceAll(/\\(.)/g,"$1")}d=f.join('"')}return d}function c(d){const f=d.indexOf("'");if(f===-1)return d;const m=d.slice(0,f),x=d.slice(f+1).replace(/^[^']*'/,"");return s(m,x)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,m,g,x){if(g==="q"||g==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,y){return String.fromCharCode(parseInt(y,16))}),s(m,x);try{x=atob(x)}catch{}return s(m,x)})}return""}function xte(t,e){const r=new Headers;if(!t||!e||typeof e!="object")return r;for(const n in e){const s=e[n];s!==void 0&&r.append(n,s)}return r}function $S(t){return URL.parse(t)?.origin??null}function bte({responseHeaders:t,isHttp:e,rangeChunkSize:r,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*r)||n||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function wte(t){const e=t.get("Content-Disposition");if(e){let r=WMe(e);if(r.includes("%"))try{r=decodeURIComponent(r)}catch{}if(H2(r))return r}return null}function my(t,e){return new mw(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function _te(t){return t===200||t===206}function Ste(t,e,r){return{method:"GET",headers:t,signal:r.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function jte(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(Tt(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class GMe{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=xte(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ln(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new KMe(this),this._fullRequestReader}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new XMe(this,e,r);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class KMe{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const r=e.source;this._withCredentials=r.withCredentials||!1,this._contentLength=r.length,this._headersCapability=Promise.withResolvers(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange;const n=new Headers(e.headers),s=r.url;fetch(s,Ste(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=$S(a.url),!_te(a.status))throw my(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:l,suggestedLength:c}=bte({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=wte(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Uc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:r}=await this._reader.read();return r?{value:e,done:r}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:jte(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class XMe{constructor(e,r,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${r}-${n-1}`);const o=s.url;fetch(o,Ste(a,this._withCredentials,this._abortController)).then(l=>{const c=$S(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!_te(l.status))throw my(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:r}=await this._reader.read();return r?{value:e,done:r}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:jte(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const kE=200,OE=206;function YMe(t){const e=t.response;return typeof e!="string"?e:dy(e).buffer}class QMe{_responseOrigin=null;constructor({url:e,httpHeaders:r,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=xte(this.isHttp,r),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const r=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:r};r.open("GET",this.url),r.withCredentials=this.withCredentials;for(const[a,o]of this.headers)r.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(r.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=OE):s.expectedStatus=kE,r.responseType="arraybuffer",Ln(e.onError,"Expected `onError` callback to be provided."),r.onerror=()=>{e.onError(r.status)},r.onreadystatechange=this.onStateChange.bind(this,n),r.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,r.send(null),n}onProgress(e,r){const n=this.pendingRequests[e];n&&n.onProgress?.(r)}onStateChange(e,r){const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){n.onError(s.status);return}const a=s.status||kE;if(!(a===kE&&n.expectedStatus===OE)&&a!==n.expectedStatus){n.onError(s.status);return}const l=YMe(s);if(a===OE){const c=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?n.onDone({begin:parseInt(u[1],10),chunk:l}):(Tt('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const r=this.pendingRequests[e].xhr;delete this.pendingRequests[e],r.abort()}}class JMe{constructor(e){this._source=e,this._manager=new QMe(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const r=this._rangeRequestReaders.indexOf(e);r>=0&&this._rangeRequestReaders.splice(r,1)}getFullReader(){return Ln(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ZMe(this._manager,this._source),this._fullRequestReader}getRangeReader(e,r){const n=new e2e(this._manager,e,r);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class ZMe{constructor(e,r){this._manager=e,this._url=r.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,r=this._manager.getRequestXhr(e);this._manager._responseOrigin=$S(r.responseURL);const n=r.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=bte({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=wte(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=my(e,this._url),this._headersCapability.reject(this._storedError);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class e2e{constructor(e,r,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:r,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=$S(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const r=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunk=r,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=my(e,this._url);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const t2e=/^[a-z][a-z0-9\-+.]+:/i;function r2e(t){if(t2e.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class n2e{constructor(e){this.source=e,this.url=r2e(e.url),Ln(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ln(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new s2e(this),this._fullRequestReader}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new a2e(this,e,r);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class s2e{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=e.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=my(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",r=>{this._error(r)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Uc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class a2e{constructor(e,r,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:r,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",r=>{this._error(r)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Tm=Symbol("INITIAL_DATA");class Ate{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Tm}}get(e,r=null){if(r){const s=this.#t(e);return s.promise.then(()=>r(s.data)),null}const n=this.#e[e];if(!n||n.data===Tm)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const r=this.#e[e];return!!r&&r.data!==Tm}delete(e){const r=this.#e[e];return!r||r.data===Tm?!1:(delete this.#e[e],!0)}resolve(e,r=null){const n=this.#t(e);n.data=r,n.resolve()}clear(){for(const e in this.#e){const{data:r}=this.#e[e];r?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:r}=this.#e[e];r!==Tm&&(yield[e,r])}}}const i2e=1e5,HU=30;class Os{#e=Promise.withResolvers();#t=null;#r=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#i=0;#o=0;#u=null;#c=null;#h=0;#l=0;#p=Object.create(null);#m=[];#f=null;#d=[];#g=new WeakMap;#x=null;static#v=new Map;static#b=new Map;static#w=new WeakMap;static#y=null;static#S=new Set;constructor({textContentSource:e,container:r,viewport:n}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#c=r,this.#l=n.scale*Ao.pixelRatio,this.#h=n.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:a,pageX:o,pageY:l}=n.rawDims;this.#x=[1,0,0,-1,-o,l+a],this.#o=s,this.#i=a,Os.#N(),vd(r,n),this.#e.promise.finally(()=>{Os.#S.delete(this),this.#s=null,this.#p=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:r}=vs.platform;return Gt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&r?"Calibri, ":""}sans-serif`],["monospace",`${e&&r?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:r,done:n})=>{if(n){this.#e.resolve();return}this.#a??=r.lang,Object.assign(this.#p,r.styles),this.#E(r.items),e()},this.#e.reject)};return this.#u=this.#f.getReader(),Os.#S.add(this),e(),this.#e.promise}update({viewport:e,onBefore:r=null}){const n=e.scale*Ao.pixelRatio,s=e.rotation;if(s!==this.#h&&(r?.(),this.#h=s,vd(this.#c,{rotation:s})),n!==this.#l){r?.(),this.#l=n;const a={div:null,properties:null,ctx:Os.#T(this.#a)};for(const o of this.#d)a.properties=this.#g.get(o),a.div=o,this.#P(a)}}cancel(){const e=new Uc("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#m}#E(e){if(this.#r)return;this.#s.ctx??=Os.#T(this.#a);const r=this.#d,n=this.#m;for(const s of e){if(r.length>i2e){Tt("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const a=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),s.id&&this.#t.setAttribute("id",`${s.id}`),a.append(this.#t)}else s.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(s.str),this.#j(s)}}#j(e){const r=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#d.push(r);const s=it.transform(this.#x,e.transform);let a=Math.atan2(s[1],s[0]);const o=this.#p[e.fontName];o.vertical&&(a+=Math.PI/2);let l=this.#n&&o.fontSubstitution||o.fontFamily;l=Os.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),u=c*Os.#O(l,o,this.#a);let d,f;a===0?(d=s[4],f=s[5]-u):(d=s[4]+u*Math.sin(a),f=s[5]-u*Math.cos(a));const m="calc(var(--total-scale-factor) *",g=r.style;this.#t===this.#c?(g.left=`${(100*d/this.#o).toFixed(2)}%`,g.top=`${(100*f/this.#i).toFixed(2)}%`):(g.left=`${m}${d.toFixed(2)}px)`,g.top=`${m}${f.toFixed(2)}px)`),g.fontSize=`${m}${(Os.#y*c).toFixed(2)}px)`,g.fontFamily=l,n.fontSize=c,r.setAttribute("role","presentation"),r.textContent=e.str,r.dir=e.dir,this.#n&&(r.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const v=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);v!==y&&Math.max(v,y)/Math.min(v,y)>1.5&&(x=!0)}if(x&&(n.canvasWidth=o.vertical?e.height:e.width),this.#g.set(r,n),this.#s.div=r,this.#s.properties=n,this.#P(this.#s),n.hasText&&this.#t.append(r),n.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),this.#t.append(v)}}#P(e){const{div:r,properties:n,ctx:s}=e,{style:a}=r;let o="";if(Os.#y>1&&(o=`scale(${1/Os.#y})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=a,{canvasWidth:c,fontSize:u}=n;Os.#C(s,u*this.#l,l);const{width:d}=s.measureText(r.textContent);d>0&&(o=`scaleX(${c*this.#l/d}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#T(e=null){let r=this.#b.get(e||="");if(!r){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),r=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,r),this.#w.set(r,{size:0,family:""})}return r}static#C(e,r,n){const s=this.#w.get(e);r===s.size&&n===s.family||(e.font=`${r}px ${n}`,s.size=r,s.family=n)}static#N(){if(this.#y!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#y=e.getBoundingClientRect().height,e.remove()}static#O(e,r,n){const s=this.#v.get(e);if(s)return s;const a=this.#T(n);a.canvas.width=a.canvas.height=HU,this.#C(a,HU,e);const o=a.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let u=.8;return l?u=l/(l+c):(vs.platform.isFirefox&&Tt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),r.ascent?u=r.ascent:r.descent&&(u=1+r.descent)),this.#v.set(e,u),u}}class Yg{static textContent(e){const r=[],n={items:r,styles:Object.create(null)};function s(a){if(!a)return;let o=null;const l=a.name;if(l==="#text")o=a.value;else if(Yg.shouldBuildText(l))a?.attributes?.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&r.push({str:o}),!!a.children)for(const c of a.children)s(c)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const o2e=100;function Nte(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new J2,{docId:r}=e,n=t.url?gMe(t.url):null,s=t.data?vMe(t.data):null,a=t.httpHeaders||null,o=t.withCredentials===!0,l=t.password??null,c=t.range instanceof Ete?t.range:null,u=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let d=t.worker instanceof Qg?t.worker:null;const f=t.verbosity,m=typeof t.docBaseUrl=="string"&&!MS(t.docBaseUrl)?t.docBaseUrl:null,g=v0(t.cMapUrl),x=t.cMapPacked!==!1,v=t.CMapReaderFactory||(Rs?AMe:RU),y=v0(t.iccUrl),w=v0(t.standardFontDataUrl),_=t.StandardFontDataFactory||(Rs?NMe:IU),A=v0(t.wasmUrl),C=t.WasmFactory||(Rs?EMe:MU),S=t.stopAtErrors!==!0,E=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,P=t.isEvalSupported!==!1,R=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!Rs,O=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!Rs&&(vs.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,I=typeof t.disableFontFace=="boolean"?t.disableFontFace:Rs,$=t.fontExtraProperties===!0,M=t.enableXfa===!0,U=t.ownerDocument||globalThis.document,H=t.disableRange===!0,z=t.disableStream===!0,q=t.disableAutoFetch===!0,V=t.pdfBug===!0,W=t.CanvasFactory||(Rs?jMe:wMe),B=t.FilterFactory||(Rs?SMe:_Me),F=t.enableHWA===!0,Y=t.useWasm!==!1,oe=c?c.length:t.length??NaN,xe=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!Rs&&!I,J=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(v===RU&&_===IU&&C===MU&&g&&w&&A&&Wm(g,document.baseURI)&&Wm(w,document.baseURI)&&Wm(A,document.baseURI)),Ee=null;KIe(f);const ye={canvasFactory:new W({ownerDocument:U,enableHWA:F}),filterFactory:new B({docId:r,ownerDocument:U}),cMapReaderFactory:J?null:new v({baseUrl:g,isCompressed:x}),standardFontDataFactory:J?null:new _({baseUrl:w}),wasmFactory:J?null:new C({baseUrl:A})};d||(d=Qg.create({verbosity:f,port:cf.workerPort}),e._worker=d);const je={docId:r,apiVersion:"5.4.54",data:s,password:l,disableAutoFetch:q,rangeChunkSize:u,length:oe,docBaseUrl:m,enableXfa:M,evaluatorOptions:{maxImageSize:E,disableFontFace:I,ignoreErrors:S,isEvalSupported:P,isOffscreenCanvasSupported:R,isImageDecoderSupported:O,canvasMaxAreaInBytes:D,fontExtraProperties:$,useSystemFonts:xe,useWasm:Y,useWorkerFetch:J,cMapUrl:g,iccUrl:y,standardFontDataUrl:w,wasmUrl:A}},pe={ownerDocument:U,pdfBug:V,styleElement:Ee,loadingParams:{disableAutoFetch:q,enableXfa:M}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Se=d.messageHandler.sendWithPromise("GetDocRequest",je,s?[s.buffer]:null);let Oe;if(c)Oe=new qMe(c,{disableRange:H,disableStream:z});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const ve=Wm(n)?GMe:Rs?n2e:JMe;Oe=new ve({url:n,length:oe,httpHeaders:a,withCredentials:o,rangeChunkSize:u,disableRange:H,disableStream:z})}return Se.then(ve=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Xe=new Gm(r,ve,d.port),$e=new u2e(Xe,e,Oe,pe,ye,F);e._transport=$e,Xe.send("Ready",null)})}).catch(e._capability.reject),e}class J2{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${J2.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Ete{#e=Promise.withResolvers();#t=[];#r=[];#n=[];#a=[];constructor(e,r,n=!1,s=null){this.length=e,this.initialData=r,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,r){for(const n of this.#a)n(e,r)}onDataProgress(e,r){this.#e.promise.then(()=>{for(const n of this.#n)n(e,r)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const r of this.#r)r(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,r){Tr("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class l2e{constructor(e,r){this._pdfInfo=e,this._transport=r}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Gt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:r}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(r)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class c2e{#e=!1;constructor(e,r,n,s=!1){this._pageIndex=e,this._pageInfo=r,this._transport=n,this._stats=s?new PU:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new Ate,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:r=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new fy({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:r,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:r}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,r)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Gt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:r=e.canvas,viewport:n,intent:s="display",annotationMode:a=fc.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:f=null,isEditing:m=!1}){this._stats?.time("Overall");const g=this._transport.getRenderingIntent(s,a,f,m),{renderingIntent:x,cacheKey:v}=g;this.#e=!1,c||=this._transport.getOptionalContentConfig(x);let y=this._intentStates.get(v);y||(y=Object.create(null),this._intentStates.set(v,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const w=!!(x&ba.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g));const _=S=>{y.renderTasks.delete(A),w&&(this.#e=!0),this.#t(),S?(A.capability.reject(S),this._abortOperatorList({intentState:y,reason:S instanceof Error?S:new Error(S)})):A.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},A=new Gh({callback:_,params:{canvas:r,canvasContext:e,viewport:n,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA});(y.renderTasks||=new Set).add(A);const C=A.task;return Promise.all([y.displayReadyCapability.promise,c]).then(([S,E])=>{if(this.destroyed){_();return}if(this._stats?.time("Rendering"),!(E.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");A.initializeGraphics({transparency:S,optionalContentConfig:E}),A.operatorListChanged()}).catch(_),C}getOperatorList({intent:e="display",annotationMode:r=fc.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){function a(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,r,n,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=a,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:r===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Yg.textContent(n));const r=this.streamTextContent(e);return new Promise(function(n,s){function a(){o.read().then(function({value:c,done:u}){if(u){n(l);return}l.lang??=c.lang,Object.assign(l.styles,c.styles),l.items.push(...c.items),a()},s)}const o=r.getReader(),l={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const n of r.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const r=this.#t();return e&&r&&(this._stats&&=new PU),r}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:r}of this._intentStates.values())if(e.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,r){const n=this._intentStates.get(r);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,r){for(let n=0,s=e.length;n<s;n++)r.operatorList.fnArray.push(e.fnArray[n]),r.operatorList.argsArray.push(e.argsArray[n]);r.operatorList.lastChunk=e.lastChunk,r.operatorList.separateAnnots=e.separateAnnots;for(const n of r.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:r,annotationStorageSerializable:n,modifiedIds:s}){const{map:a,transfer:o}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:r,annotationStorage:a,modifiedIds:s},o).getReader(),u=this._intentStates.get(r);u.streamReader=c;const d=()=>{c.read().then(({value:f,done:m})=>{if(m){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),d())},f=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const m of u.renderTasks)m.operatorListChanged();this.#t()}if(u.displayReadyCapability)u.displayReadyCapability.reject(f);else if(u.opListReadCapability)u.opListReadCapability.reject(f);else throw f}})};d()}_abortOperatorList({intentState:e,reason:r,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(r instanceof V2){let s=o2e;r.extraDelay>0&&r.extraDelay<1e3&&(s+=r.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:r,force:!0})},s);return}}if(e.streamReader.cancel(new Uc(r.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}var mc,Ai,rl,Fu,p_,Bu,Uu,zs,sb,Cte,Tte,Km,pf,ab;const Wr=class Wr{constructor({name:e=null,port:r=null,verbosity:n=XIe()}={}){eo(this,zs);eo(this,mc,Promise.withResolvers());eo(this,Ai,null);eo(this,rl,null);eo(this,Fu,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,r){if(Hr(Wr,Uu).has(r))throw new Error("Cannot use more than one PDFWorker per port.");Hr(Wr,Uu).set(r,this),to(this,zs,Cte).call(this,r)}else to(this,zs,Tte).call(this)}get promise(){return Hr(this,mc).promise}get port(){return Hr(this,rl)}get messageHandler(){return Hr(this,Ai)}destroy(){this.destroyed=!0,Hr(this,Fu)?.terminate(),ea(this,Fu,null),Hr(Wr,Uu).delete(Hr(this,rl)),ea(this,rl,null),Hr(this,Ai)?.destroy(),ea(this,Ai,null)}static create(e){const r=Hr(this,Uu).get(e?.port);if(r){if(r._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return r}return new Wr(e)}static get workerSrc(){if(cf.workerSrc)return cf.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Gt(this,"_setupFakeWorkerGlobal",(async()=>Hr(this,pf,ab)?Hr(this,pf,ab):(await import(this.workerSrc)).WorkerMessageHandler)())}};mc=new WeakMap,Ai=new WeakMap,rl=new WeakMap,Fu=new WeakMap,p_=new WeakMap,Bu=new WeakMap,Uu=new WeakMap,zs=new WeakSet,sb=function(){Hr(this,mc).resolve(),Hr(this,Ai).send("configure",{verbosity:this.verbosity})},Cte=function(e){ea(this,rl,e),ea(this,Ai,new Gm("main","worker",e)),Hr(this,Ai).on("ready",()=>{}),to(this,zs,sb).call(this)},Tte=function(){if(Hr(Wr,Bu)||Hr(Wr,pf,ab)){to(this,zs,Km).call(this);return}let{workerSrc:e}=Wr;try{Wr._isSameOrigin(window.location,e)||(e=Wr._createCDNWrapper(new URL(e,window.location).href));const r=new Worker(e,{type:"module"}),n=new Gm("main","worker",r),s=()=>{a.abort(),n.destroy(),r.terminate(),this.destroyed?Hr(this,mc).reject(new Error("Worker was destroyed")):to(this,zs,Km).call(this)},a=new AbortController;r.addEventListener("error",()=>{Hr(this,Fu)||s()},{signal:a.signal}),n.on("test",l=>{if(a.abort(),this.destroyed||!l){s();return}ea(this,Ai,n),ea(this,rl,r),ea(this,Fu,r),to(this,zs,sb).call(this)}),n.on("ready",l=>{if(a.abort(),this.destroyed){s();return}try{o()}catch{to(this,zs,Km).call(this)}});const o=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};o();return}catch{IS("The worker has been disabled.")}to(this,zs,Km).call(this)},Km=function(){Hr(Wr,Bu)||(Tt("Setting up fake worker."),ea(Wr,Bu,!0)),Wr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Hr(this,mc).reject(new Error("Worker was destroyed"));return}const r=new bMe;ea(this,rl,r);const n=`fake${UF(Wr,p_)._++}`,s=new Gm(n+"_worker",n,r);e.setup(s,r),ea(this,Ai,new Gm(n,n+"_worker",r)),to(this,zs,sb).call(this)}).catch(e=>{Hr(this,mc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},pf=new WeakSet,ab=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},eo(Wr,pf),eo(Wr,p_,0),eo(Wr,Bu,!1),eo(Wr,Uu,new WeakMap),Rs&&(ea(Wr,Bu,!0),cf.workerSrc||="./pdf.worker.mjs"),Wr._isSameOrigin=(e,r)=>{const n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;const s=new URL(r,n);return n.origin===s.origin},Wr._createCDNWrapper=e=>{const r=`await import("${e}");`;return URL.createObjectURL(new Blob([r],{type:"text/javascript"}))},Wr.fromPort=e=>{if(oMe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Wr.create(e)};let Qg=Wr;class u2e{#e=new Map;#t=new Map;#r=new Map;#n=new Map;#a=null;constructor(e,r,n,s,a,o){this.messageHandler=e,this.loadingTask=r,this.commonObjs=new Ate,this.fontLoader=new pMe({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#s(e,r=null){const n=this.#e.get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,r);return this.#e.set(e,s),s}get annotationStorage(){return Gt(this,"annotationStorage",new K2)}getRenderingIntent(e,r=fc.ENABLE,n=null,s=!1,a=!1){let o=ba.DISPLAY,l=bO;switch(e){case"any":o=ba.ANY;break;case"display":break;case"print":o=ba.PRINT;break;default:Tt(`getRenderingIntent - invalid intent: ${e}`)}const c=o&ba.PRINT&&n instanceof fte?n:this.annotationStorage;switch(r){case fc.DISABLE:o+=ba.ANNOTATIONS_DISABLE;break;case fc.ENABLE:break;case fc.ENABLE_FORMS:o+=ba.ANNOTATIONS_FORMS;break;case fc.ENABLE_STORAGE:o+=ba.ANNOTATIONS_STORAGE,l=c.serializable;break;default:Tt(`getRenderingIntent - invalid annotationMode: ${r}`)}s&&(o+=ba.IS_EDITING),a&&(o+=ba.OPLIST);const{ids:u,hash:d}=c.modifiedIds,f=[o,l.hash,d];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#r.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Os.cleanup(),this._networkStream?.cancelAllRequests(new Uc("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:r}=this;e.on("GetReader",(n,s)=>{Ln(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){s.close();return}Ln(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:o}=this._fullReader;return(!s||!a)&&(this._lastProgress&&r.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{r.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:o}}),e.on("GetRangeReader",(n,s)=>{Ln(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:o,done:l}){if(l){s.close();return}Ln(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{a.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,r._capability.resolve(new l2e(n,this))}),e.on("DocException",n=>{r._capability.reject(na(n))}),e.on("PasswordRequest",n=>{this.#a=Promise.withResolvers();try{if(!r.onPassword)throw na(n);const s=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};r.onPassword(s,n.code)}catch(s){this.#a.reject(s)}return this.#a.promise}),e.on("DataLoaded",n=>{r.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in a){const u=a.error;Tt(`Error during font loading: ${u}`),this.commonObjs.resolve(n,u);break}const o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(u,d)=>globalThis.FontInspector.fontAdded(u,d):null,l=new mMe(a,o);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(n,l)});break;case"CopyLocalImage":const{imageRef:c}=a;Ln(c,"The imageRef must be defined.");for(const u of this.#t.values())for(const[,d]of u.objs)if(d?.ref===c)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,a,o])=>{if(this.destroyed)return;const l=this.#t.get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){o?.bitmap?.close();return}switch(a){case"Image":case"Pattern":l.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{this.destroyed||r.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Tt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},r).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=e-1,n=this.#r.get(r);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const o=new c2e(r,a,this,this._params.pdfBug);return this.#t.set(r,o),o});return this.#r.set(r,s),s}getPageIndex(e){return wO(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(r=>new zMe(r,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",r=this.#e.get(e);if(r)return r;const n=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new BMe(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const r of this.#t.values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Os.cleanup()}}cachedPageNumber(e){if(!wO(e))return null;const r=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(r)??null}}class d2e{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:r}=this.#e;return e.form||e.canvas&&r?.size>0}}class Gh{#e=null;static#t=new WeakSet;constructor({callback:e,params:r,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:f=!1,pageColors:m=null,enableHWA:g=!1}){this.callback=e,this.params=r,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new d2e(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvas,this._canvasContext=r.canvas?null:r.canvasContext,this._enableHWA=g}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:r}){if(this.cancelled)return;if(this._canvas){if(Gh.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Gh.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new lf(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,r=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Gh.#t.delete(this._canvas),e||=new V2(`Rendering cancelled, page ${this._pageIndex+1}`,r),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Gh.#t.delete(this._canvas),this.callback())))}}const Pte="5.4.54",h2e="295fb3ec4";class Xa{#e=null;#t=null;#r;#n=null;#a=!1;#s=!1;#i=null;#o;#u=null;#c=null;static#h=null;static get _keyboardManager(){return Gt(this,"_keyboardManager",new py([[["Escape","mac+Escape"],Xa.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Xa.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Xa.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Xa.prototype._moveToPrevious],[["Home","mac+Home"],Xa.prototype._moveToBeginning],[["End","mac+End"],Xa.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:r=null}){e?(this.#s=!1,this.#i=e):this.#s=!0,this.#c=e?._uiManager||r,this.#o=this.#c._eventBus,this.#r=e?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",Xa.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#i&&(e.ariaControls=`${this.#i.id}_colorpicker_dropdown`);const r=this.#c._signal;e.addEventListener("click",this.#f.bind(this),{signal:r}),e.addEventListener("keydown",this.#m.bind(this),{signal:r});const n=this.#t=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#r,e.append(n),e}renderMainDropdown(){const e=this.#n=this.#l();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#l(){const e=document.createElement("div"),r=this.#c._signal;e.addEventListener("contextmenu",ii,{signal:r}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#i&&(e.id=`${this.#i.id}_colorpicker_dropdown`);for(const[n,s]of this.#c.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=n,a.setAttribute("data-l10n-id",Xa.#h[n]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=s,a.ariaSelected=s===this.#r,a.addEventListener("click",this.#p.bind(this,s),{signal:r}),e.append(a)}return e.addEventListener("keydown",this.#m.bind(this),{signal:r}),e}#p(e,r){r.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:sr.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#f(e);return}const r=e.target.getAttribute("data-color");r&&this.#p(r,e)}_moveToNext(e){if(!this.#g){this.#f(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#f(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#g){this.#f(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#g){this.#f(e);return}this.#n.lastChild?.focus()}#m(e){Xa._keyboardManager.exec(this,e)}#f(e){if(this.#g){this.hideDropdown();return}if(this.#a=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const r=this.#n=this.#l();this.#e.append(r)}#d(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#i?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const r=this.#c.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=r.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Jg{#e=null;#t=null;#r=null;static#n=null;constructor(e){this.#t=e,this.#r=e._uiManager,Jg.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:r,colorValue:n}=this.#t,s=this.#e=document.createElement("input");return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",Jg.#n[e]),s.addEventListener("input",()=>{this.#r.updateParams(r,s.value)},{signal:this.#r._signal}),s}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function WU(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function Pm(t){return Math.max(0,Math.min(255,255*t))}class GU{static CMYK_G([e,r,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*r+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Pm(e),[e,e,e]}static G_HTML([e]){const r=WU(e);return`#${r}${r}${r}`}static RGB_G([e,r,n]){return["G",.3*e+.59*r+.11*n]}static RGB_rgb(e){return e.map(Pm)}static RGB_HTML(e){return`#${e.map(WU).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,r,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,r+s)]}static CMYK_rgb([e,r,n,s]){return[Pm(1-Math.min(1,e+s)),Pm(1-Math.min(1,n+s)),Pm(1-Math.min(1,r+s))]}static CMYK_HTML(e){const r=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(r)}static RGB_CMYK([e,r,n]){const s=1-e,a=1-r,o=1-n,l=Math.min(s,a,o);return["CMYK",s,a,o,l]}}class f2e{create(e,r,n=!1){if(e<=0||r<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${r}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${r}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Tr("Abstract method `_createSVG` called.")}}class gw extends f2e{_createSVG(e){return document.createElementNS(Ko,e)}}class kte{static setupStorage(e,r,n,s,a){const o=s.getValue(r,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),a==="print")break;e.addEventListener("input",l=>{s.setValue(r,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",l=>{s.setValue(r,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),a==="print")break;e.addEventListener("input",l=>{s.setValue(r,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of n.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(r,{value:u})});break}}static setAttributes({html:e,element:r,storage:n=null,intent:s,linkService:a}){const{attributes:o}=r,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}l&&a.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,r,n)}static render(e){const r=e.annotationStorage,n=e.linkService,s=e.xfaHtml,a=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:a,linkService:n});const l=a!=="richText",c=e.div;if(c.append(o),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=f}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const f=document.createTextNode(s.value);o.append(f),l&&Yg.shouldBuildText(s.name)&&u.push(f)}return{textDivs:u}}const d=[[s,-1,o]];for(;d.length>0;){const[f,m,g]=d.at(-1);if(m+1===f.children.length){d.pop();continue}const x=f.children[++d.at(-1)[1]];if(x===null)continue;const{name:v}=x;if(v==="#text"){const w=document.createTextNode(x.value);u.push(w),g.append(w);continue}const y=x?.attributes?.xmlns?document.createElementNS(x.attributes.xmlns,v):document.createElement(v);if(g.append(y),x.attributes&&this.setAttributes({html:y,element:x,storage:r,intent:a,linkService:n}),x.children?.length>0)d.push([x,-1,y]);else if(x.value){const w=document.createTextNode(x.value);l&&Yg.shouldBuildText(v)&&u.push(w),y.append(w)}}for(const f of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const r=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=r,e.div.hidden=!1}}const p2e=9,yd=new WeakSet,m2e=new Date().getTimezoneOffset()*60*1e3;class KU{static create(e){switch(e.data.annotationType){case Tn.LINK:return new Z2(e);case Tn.TEXT:return new g2e(e);case Tn.WIDGET:switch(e.data.fieldType){case"Tx":return new v2e(e);case"Btn":return e.data.radioButton?new Ote(e):e.data.checkBox?new x2e(e):new b2e(e);case"Ch":return new w2e(e);case"Sig":return new y2e(e)}return new Md(e);case Tn.POPUP:return new SO(e);case Tn.FREETEXT:return new Rte(e);case Tn.LINE:return new S2e(e);case Tn.SQUARE:return new j2e(e);case Tn.CIRCLE:return new A2e(e);case Tn.POLYLINE:return new Ite(e);case Tn.CARET:return new E2e(e);case Tn.INK:return new eD(e);case Tn.POLYGON:return new N2e(e);case Tn.HIGHLIGHT:return new Mte(e);case Tn.UNDERLINE:return new C2e(e);case Tn.SQUIGGLY:return new T2e(e);case Tn.STRIKEOUT:return new P2e(e);case Tn.STAMP:return new Dte(e);case Tn.FILEATTACHMENT:return new k2e(e);default:return new jn(e)}}}class jn{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:r=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=r,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,r&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:r}){return!!(e?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return jn._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:r,popup:n}=e;r&&this.#n(r);let s=this.#r?.popup||this.popup;!s&&n?.text&&(this._createPopup(n),s=this.#r.popup),s&&(s.updateEdited(e),n?.deleted&&(s.remove(),this.#r=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:r},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:c}}}}=this;n?.splice(0,4,...e),r.left=`${100*(e[0]-l)/a}%`,r.top=`${100*(o-e[3]+c)/o}%`,s===0?(r.width=`${100*(e[2]-e[0])/a}%`,r.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)}_createContainer(e){const{data:r,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",r.id),!(this instanceof Md)&&!(this instanceof Z2)&&(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex++,r.alternativeText&&(a.title=r.alternativeText),r.noRotate&&a.classList.add("norotate"),!r.rect||this instanceof SO){const{rotation:v}=r;return!r.hasOwnCanvas&&v!==0&&this.setRotation(v,a),a}const{width:l,height:c}=this;if(!e&&r.borderStyle.width>0){o.borderWidth=`${r.borderStyle.width}px`;const v=r.borderStyle.horizontalCornerRadius,y=r.borderStyle.verticalCornerRadius;if(v>0||y>0){const _=`calc(${v}px * var(--total-scale-factor)) / calc(${y}px * var(--total-scale-factor))`;o.borderRadius=_}else if(this instanceof Ote){const _=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=_}switch(r.borderStyle.style){case Lh.SOLID:o.borderStyle="solid";break;case Lh.DASHED:o.borderStyle="dashed";break;case Lh.BEVELED:Tt("Unimplemented border style: beveled");break;case Lh.INSET:Tt("Unimplemented border style: inset");break;case Lh.UNDERLINE:o.borderBottomStyle="solid";break}const w=r.borderColor||null;w?(this.#t=!0,o.borderColor=it.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const u=it.normalizeRect([r.rect[0],n.view[3]-r.rect[1]+n.view[1],r.rect[2],n.view[3]-r.rect[3]+n.view[1]]),{pageWidth:d,pageHeight:f,pageX:m,pageY:g}=s.rawDims;o.left=`${100*(u[0]-m)/d}%`,o.top=`${100*(u[1]-g)/f}%`;const{rotation:x}=r;return r.hasOwnCanvas||x===0?(o.width=`${100*l/d}%`,o.height=`${100*c/f}%`):this.setRotation(x,a),a}setRotation(e,r=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:a,height:o}=this;e%180!==0&&([a,o]=[o,a]),r.style.width=`${100*a/n}%`,r.style.height=`${100*o/s}%`,r.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(r,n,s)=>{const a=s.detail[r],o=a[0],l=a.slice(1);s.target.style[n]=GU[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:GU[`${o}_rgb`](l)})};return Gt(this,"_commonActions",{display:r=>{const{display:n}=r.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:r=>{this.annotationStorage.setValue(this.data.id,{noPrint:!r.detail.print})},hidden:r=>{const{hidden:n}=r.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.target.disabled=r.detail.readonly},required:r=>{this._setRequired(r.target,r.detail.required)},bgColor:r=>{e("bgColor","backgroundColor",r)},fillColor:r=>{e("fillColor","backgroundColor",r)},fgColor:r=>{e("fgColor","color",r)},textColor:r=>{e("textColor","color",r)},borderColor:r=>{e("borderColor","borderColor",r)},strokeColor:r=>{e("strokeColor","borderColor",r)},rotation:r=>{const n=r.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,r){const n=this._commonActions;for(const s of Object.keys(r.detail))(e[s]||n[s])?.(r)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const n=this._commonActions;for(const[s,a]of Object.entries(r)){const o=n[s];if(o){const l={detail:{[s]:a},target:e};o(l),delete r[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[r,n,s,a]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,y,w,_]=e.subarray(2,6);if(s===v&&a===y&&r===w&&n===_)return}const{style:o}=this.container;let l;if(this.#t){const{borderColor:v,borderWidth:y}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const c=s-r,u=a-n,{svgFactory:d}=this,f=d.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const m=d.createElement("defs");f.append(m);const g=d.createElement("clipPath"),x=`clippath_${this.data.id}`;g.setAttribute("id",x),g.setAttribute("clipPathUnits","objectBoundingBox"),m.append(g);for(let v=2,y=e.length;v<y;v+=8){const w=e[v],_=e[v+1],A=e[v+2],C=e[v+3],S=d.createElement("rect"),E=(A-r)/c,P=(a-_)/u,R=(w-A)/c,O=(_-C)/u;S.setAttribute("x",E),S.setAttribute("y",P),S.setAttribute("width",R),S.setAttribute("height",O),g.append(S),l?.push(`<rect vector-effect="non-scaling-stroke" x="${E}" y="${P}" width="${R}" height="${O}"/>`)}this.#t&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${x})`}_createPopup(e=null){const{data:r}=this;let n,s;e?(n={str:e.text},s=e.date):(n=r.contentsObj,s=r.modificationDate);const a=this.#r=new SO({data:{color:r.color,titleObj:r.titleObj,modificationDate:s,contentsObj:n,richText:r.richText,parentRect:r.rect,borderStyle:0,id:`popup_${r.id}`,rotation:r.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#r||this.popup||this.data.popupRef)}render(){Tr("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,r=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:a,id:o,exportValues:l}of s){if(a===-1||o===r)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!yd.has(u)){Tt(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:u})}return n}for(const s of document.getElementsByName(e)){const{exportValue:a}=s,o=s.getAttribute("data-element-id");o!==r&&yd.has(s)&&n.push({id:o,exportValue:a,domElement:s})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const r of e)r.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:r}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:r,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Z2 extends jn{constructor(e,r=null){super(e,{isRenderable:!0,ignoreBorder:!!r?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:r}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let s=!1;return e.url?(r.addLinkAttributes(n,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),s=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),s=!0):e.setOCGState?(this.#r(n,e.setOCGState,e.overlaidText),s=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),s=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,r,n=""){e.href=this.linkService.getDestinationHash(r),e.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,r,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(r),!1),n&&(e.title=n),this.#e()}#t(e,r,n="",s=null){e.href=this.linkService.getAnchorUrl(""),r.description?e.title=r.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(r.content,r.filename,s),!1),this.#e()}#r(e,r,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(r),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,r){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(r.actions)){const a=n.get(s);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:s}}),!1))}r.overlaidText&&(e.title=r.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,r){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Tt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:s,refs:a,include:o}=r,l=[];if(s.length!==0||a.length!==0){const d=new Set(a);for(const f of s){const m=this._fieldObjects[f]||[];for(const{id:g}of m)d.add(g)}for(const f of Object.values(this._fieldObjects))for(const m of f)d.has(m.id)===o&&l.push(m)}else for(const d of Object.values(this._fieldObjects))l.push(...d);const c=this.annotationStorage,u=[];for(const d of l){const{id:f}=d;switch(u.push(f),d.type){case"text":{const g=d.defaultValue||"";c.setValue(f,{value:g});break}case"checkbox":case"radiobutton":{const g=d.defaultValue===d.exportValues;c.setValue(f,{value:g});break}case"combobox":case"listbox":{const g=d.defaultValue||"";c.setValue(f,{value:g});break}default:continue}const m=document.querySelector(`[data-element-id="${f}"]`);if(m){if(!yd.has(m)){Tt(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}}),!1}}}class g2e extends jn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Md extends jn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return vs.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,r,n,s,a){n.includes("mouse")?e.addEventListener(n,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{if(n==="blur"){if(!r.focused||!o.relatedTarget)return;r.focused=!1}else if(n==="focus"){if(r.focused)return;r.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(o)}})})}_setEventListeners(e,r,n,s){for(const[a,o]of n)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(r||={focused:!1}),this._setEventListener(e,r,a,o,s),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,r,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,r,"focus","Focus",null))}_setBackgroundColor(e){const r=this.data.backgroundColor||null;e.style.backgroundColor=r===null?"transparent":it.makeHexColor(r[0],r[1],r[2])}_setTextStyle(e){const r=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||p2e,a=e.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),d=Math.round(u/(AE*s))||1,f=u/d;o=Math.min(s,c(f/AE))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(u/AE))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=it.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=r[this.data.textAlignment])}_setRequired(e,r){r?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",r)}}class v2e extends Md{constructor(e){const r=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:r})}setPropertyOnSiblings(e,r,n,s){const a=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[r]=n),a.setValue(o.id,{[s]:n})}render(){const e=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=e.getValue(r,{value:this.data.fieldValue});let a=s.value||"";const o=e.getValue(r,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=s.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=l??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",l??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),yd.add(n),n.setAttribute("data-element-id",r),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:u,datetimeType:d,timeStep:f}=this.data,m=!!d&&this.enableScripting;u&&(n.title=u),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",x=>{e.setValue(r,{value:x.target.value}),this.setPropertyOnSiblings(n,"value",x.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",x=>{const v=this.data.defaultFieldValue??"";n.value=c.userValue=v,c.formattedValue=null});let g=x=>{const{formattedValue:v}=c;v!=null&&(x.target.value=v),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{if(c.focused)return;const{target:y}=v;if(m&&(y.type=d,f&&(y.step=f)),c.userValue){const w=c.userValue;if(m)if(d==="time"){const _=new Date(w),A=[_.getHours(),_.getMinutes(),_.getSeconds()];y.value=A.map(C=>C.toString().padStart(2,"0")).join(":")}else y.value=new Date(w-m2e).toISOString().split(d==="date"?"T":".",1)[0];else y.value=w}c.lastCommittedValue=y.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const y={value(w){c.userValue=w.detail.value??"",m||e.setValue(r,{value:c.userValue.toString()}),w.target.value=c.userValue},formattedValue(w){const{formattedValue:_}=w.detail;c.formattedValue=_,_!=null&&w.target!==document.activeElement&&(w.target.value=_);const A={formattedValue:_};m&&(A.value=_),e.setValue(r,A)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:_}=w.detail,{target:A}=w;if(_===0){A.removeAttribute("maxLength");return}A.setAttribute("maxLength",_);let C=c.userValue;!C||C.length<=_||(C=C.slice(0,_),A.value=c.userValue=C,e.setValue(r,{value:C}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:A.selectionStart,selEnd:A.selectionEnd}}))}};this._dispatchEventFromSandbox(y,v)}),n.addEventListener("keydown",v=>{c.commitKey=1;let y=-1;if(v.key==="Escape"?y=0:v.key==="Enter"&&!this.data.multiLine?y=2:v.key==="Tab"&&(c.commitKey=3),y===-1)return;const{value:w}=v.target;c.lastCommittedValue!==w&&(c.lastCommittedValue=w,c.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:w,willCommit:!0,commitKey:y,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const x=g;g=null,n.addEventListener("blur",v=>{if(!c.focused||!v.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{target:y}=v;let{value:w}=y;if(m){if(w&&d==="time"){const _=w.split(":").map(A=>parseInt(A,10));w=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),y.step=""}else w=new Date(w).valueOf();y.type="text"}c.userValue=w,c.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:w,willCommit:!0,commitKey:c.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),x(v)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",v=>{c.lastCommittedValue=null;const{data:y,target:w}=v,{value:_,selectionStart:A,selectionEnd:C}=w;let S=A,E=C;switch(v.inputType){case"deleteWordBackward":{const P=_.substring(0,A).match(/\w*[^\w]*$/);P&&(S-=P[0].length);break}case"deleteWordForward":{const P=_.substring(A).match(/^[^\w]*\w*/);P&&(E+=P[0].length);break}case"deleteContentBackward":A===C&&(S-=1);break;case"deleteContentForward":A===C&&(E+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:_,change:y||"",willCommit:!1,selStart:S,selEnd:E}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class y2e extends Md{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class x2e extends Md{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,r=this.data,n=r.id;let s=e.getValue(n,{value:r.exportValue===r.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return yd.add(a),a.setAttribute("data-element-id",n),a.disabled=r.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=r.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",r.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,n)){const d=c&&u.exportValue===r.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(n,{value:c})}),a.addEventListener("resetform",o=>{const l=r.defaultFieldValue||"Off";o.target.checked=l===r.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Ote extends Md{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,r=this.data,n=r.id;let s=e.getValue(n,{value:r.fieldValue===r.buttonValue}).value;if(typeof s=="string"&&(s=s!==r.buttonValue,e.setValue(n,{value:s})),s)for(const o of this._getElementsByName(r.fieldName,n))e.setValue(o.id,{value:!1});const a=document.createElement("input");if(yd.add(a),a.setAttribute("data-element-id",n),a.disabled=r.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=r.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:c})}),a.addEventListener("resetform",o=>{const l=r.defaultFieldValue;o.target.checked=l!=null&&l===r.buttonValue}),this.enableScripting&&this.hasJSActions){const o=r.buttonValue;a.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const d=o===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const m=d&&f.id===n;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class b2e extends Z2{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const r=e.lastChild;return this.enableScripting&&this.hasJSActions&&r&&(this._setDefaultPropertiesFromJS(r),r.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class w2e extends Md{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,r=this.data.id,n=e.getValue(r,{value:this.data.fieldValue}),s=document.createElement("select");yd.add(s),s.setAttribute("data-element-id",r),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const f=this.data.defaultFieldValue;for(const m of s.options)m.selected=m.value===f});for(const d of this.data.options){const f=document.createElement("option");f.textContent=d.displayValue,f.value=d.exportValue,n.value.includes(d.exportValue)&&(f.setAttribute("selected",!0),a=!1),s.append(f)}let o=null;if(a){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),o=()=>{d.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=d=>{const f=d?"value":"textContent",{options:m,multiple:g}=s;return g?Array.prototype.filter.call(m,x=>x.selected).map(x=>x[f]):m.selectedIndex===-1?null:m[m.selectedIndex][f]};let c=l(!1);const u=d=>{const f=d.target.options;return Array.prototype.map.call(f,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const f={value(m){o?.();const g=m.detail.value,x=new Set(Array.isArray(g)?g:[g]);for(const v of s.options)v.selected=x.has(v.value);e.setValue(r,{value:l(!0)}),c=l(!1)},multipleSelection(m){s.multiple=!0},remove(m){const g=s.options,x=m.detail.remove;g[x].selected=!1,s.remove(x),g.length>0&&Array.prototype.findIndex.call(g,y=>y.selected)===-1&&(g[0].selected=!0),e.setValue(r,{value:l(!0),items:u(m)}),c=l(!1)},clear(m){for(;s.length!==0;)s.remove(0);e.setValue(r,{value:null,items:[]}),c=l(!1)},insert(m){const{index:g,displayValue:x,exportValue:v}=m.detail.insert,y=s.children[g],w=document.createElement("option");w.textContent=x,w.value=v,y?y.before(w):s.append(w),e.setValue(r,{value:l(!0),items:u(m)}),c=l(!1)},items(m){const{items:g}=m.detail;for(;s.length!==0;)s.remove(0);for(const x of g){const{displayValue:v,exportValue:y}=x,w=document.createElement("option");w.textContent=v,w.value=y,s.append(w)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(r,{value:l(!0),items:u(m)}),c=l(!1)},indices(m){const g=new Set(m.detail.indices);for(const x of m.target.options)x.selected=g.has(x.index);e.setValue(r,{value:l(!0)}),c=l(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(f,d)}),s.addEventListener("input",d=>{const f=l(!0),m=l(!1);e.setValue(r,{value:f}),d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:c,change:m,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(r,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class SO extends jn{constructor(e){const{data:r,elements:n}=e;super(e,{isRenderable:jn._hasPopupData(r)}),this.elements=n,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const r=this.popup=new _2e({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const s of this.elements)s.popup=r,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${q2}${s}`).join(",")),this.container}}class _2e{#e=this.#P.bind(this);#t=this.#O.bind(this);#r=this.#N.bind(this);#n=this.#C.bind(this);#a=null;#s=null;#i=null;#o=null;#u=null;#c=null;#h=null;#l=!1;#p=null;#m=null;#f=null;#d=null;#g=null;#x=null;#v=null;#b=!1;constructor({container:e,color:r,elements:n,titleObj:s,modificationDate:a,contentsObj:o,richText:l,parent:c,rect:u,parentRect:d,open:f}){this.#s=e,this.#x=s,this.#i=o,this.#g=l,this.#c=c,this.#a=r,this.#d=u,this.#h=d,this.#u=n,this.#o=yO.toDateObject(a),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup()),this.#w(),this.#s.hidden=!0,f&&this.#C()}#w(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const r of this.trigger)r.addEventListener("click",this.#n,{signal:e}),r.addEventListener("mouseenter",this.#r,{signal:e}),r.addEventListener("mouseleave",this.#t,{signal:e}),r.classList.add("popupTriggerArea");for(const r of this.#u)r.container?.addEventListener("keydown",this.#e,{signal:e})}render(){if(this.#p)return;const e=this.#p=document.createElement("div");if(e.className="popup",this.#a){const s=e.style.outlineColor=it.makeHexColor(...this.#a);e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const r=document.createElement("span");if(r.className="header",this.#x?.str){const s=document.createElement("span");s.className="title",r.append(s),{dir:s.dir,str:s.textContent}=this.#x}if(e.append(r),this.#o){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),s.dateTime=this.#o.toISOString(),r.append(s)}const n=this.#y;if(n)kte.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#i);e.append(s)}this.#s.append(e)}get#y(){const e=this.#g,r=this.#i;return e?.str&&(!r?.str||r.str===e.str)&&this.#g.html||null}get#S(){return this.#y?.attributes?.style?.fontSize||0}get#E(){return this.#y?.attributes?.style?.color||null}#j(e){const r=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:r}]}},s={style:{color:this.#E,fontSize:this.#S?`calc(${this.#S}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))r.push({name:"span",value:a,attributes:s});return n}_formatContents({str:e,dir:r}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=r;const s=e.split(/(?:\r\n?|\n)/);for(let a=0,o=s.length;a<o;++a){const l=s[a];n.append(document.createTextNode(l)),a<o-1&&n.append(document.createElement("br"))}return n}#P(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#l)&&this.#C()}updateEdited({rect:e,popup:r,deleted:n}){if(n||r?.deleted){this.remove();return}this.#w(),this.#v||={contentsObj:this.#i,richText:this.#g},e&&(this.#f=null),r&&(this.#g=this.#j(r.text),this.#o=yO.toDateObject(r.date),this.#i=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#v&&({contentsObj:this.#i,richText:this.#g}=this.#v,this.#v=null,this.#p?.remove(),this.#p=null,this.#f=null)}remove(){this.#m?.abort(),this.#m=null,this.#p?.remove(),this.#p=null,this.#b=!1,this.#l=!1;for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#f!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:r,pageHeight:n,pageX:s,pageY:a}}}=this.#c;let o=!!this.#h,l=o?this.#h:this.#d;for(const x of this.#u)if(!l||it.intersect(x.data.rect,l)!==null){l=x.data.rect,o=!0;break}const c=it.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),d=o?l[2]-l[0]+5:0,f=c[0]+d,m=c[1];this.#f=[100*(f-s)/r,100*(m-a)/n];const{style:g}=this.#s;g.left=`${this.#f[0]}%`,g.top=`${this.#f[1]}%`}#C(){this.#l=!this.#l,this.#l?(this.#N(),this.#s.addEventListener("click",this.#n),this.#s.addEventListener("keydown",this.#e)):(this.#O(),this.#s.removeEventListener("click",this.#n),this.#s.removeEventListener("keydown",this.#e))}#N(){this.#p||this.render(),this.isVisible?this.#l&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#O(){this.#s.classList.remove("focused"),!(this.#l||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#s.hidden=!0)}maybeShow(){this.#w(),this.#b&&(this.#p||this.#N(),this.#b=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class Rte extends jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ct.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const r of this.textContent){const n=document.createElement("span");n.textContent=r,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class S2e extends jn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:r,height:n}=this,s=this.svgFactory.create(r,n,!0),a=this.#e=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class j2e extends jn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:r,height:n}=this,s=this.svgFactory.create(r,n,!0),a=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",n-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class A2e extends jn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:r,height:n}=this,s=this.svgFactory.create(r,n,!0),a=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",r/2),o.setAttribute("cy",n/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",n/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ite extends jn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:r,borderStyle:n,popupRef:s},width:a,height:o}=this;if(!r)return this.container;const l=this.svgFactory.create(a,o,!0);let c=[];for(let d=0,f=r.length;d<f;d+=2){const m=r[d]-e[0],g=e[3]-r[d+1];c.push(`${m},${g}`)}c=c.join(" ");const u=this.#e=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",c),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class N2e extends Ite{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class E2e extends jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class eD extends jn{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ct.HIGHLIGHT:Ct.INK}#r(e,r){switch(e){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:r,inkLists:n,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:c}=this.#r(r,e),u=this.svgFactory.create(l,c,!0),d=this.#e=this.svgFactory.createElement("svg:g");u.append(d),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",o);for(let f=0,m=n.length;f<m;f++){const g=this.svgFactory.createElement(this.svgElementName);this.#t.push(g),g.setAttribute("points",n[f].join(",")),d.append(g)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:r,points:n,rect:s}=e,a=this.#e;if(r>=0&&a.setAttribute("stroke-width",r||1),n)for(let o=0,l=this.#t.length;o<l;o++)this.#t[o].setAttribute("points",n[o].join(","));if(s){const{transform:o,width:l,height:c}=this.#r(this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Mte extends jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ct.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class C2e extends jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class T2e extends jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class P2e extends jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Dte extends jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ct.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class k2e extends jn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:r}=this.data;this.filename=r.filename,this.content=r.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:r}=this;let n;r.hasAppearance||r.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:s}=vs.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&this.#t()}),!r.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class tD{#e=null;#t=null;#r=new Map;#n=null;constructor({div:e,accessibilityManager:r,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:o,structTreeLayer:l}){this.div=e,this.#e=r,this.#t=n,this.#n=l||null,this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#r.size>0}async#a(e,r,n){const s=e.firstChild||e,a=s.id=`${q2}${r}`,o=await this.#n?.getAriaAttributes(a);if(o)for(const[l,c]of o)s.setAttribute(l,c);n?n.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,s,!1))}async render(e){const{annotations:r}=e,n=this.div;vd(n,this.viewport);const s=new Map,a={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new gw,annotationStorage:e.annotationStorage||new K2,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of r){if(o.noHTML)continue;const l=o.annotationType===Tn.POPUP;if(l){const d=s.get(o.id);if(!d)continue;a.elements=d}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const c=KU.create(a);if(!c.isRenderable)continue;if(!l&&o.popupRef){const d=s.get(o.popupRef);d?d.push(c):s.set(o.popupRef,[c])}const u=c.render();o.hidden&&(u.style.visibility="hidden"),await this.#a(u,o.id,a.elements),c._isEditable&&(this.#r.set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}this.#s()}async addLinkAnnotations(e,r){const n={data:null,layer:this.div,linkService:r,svgFactory:new gw,parent:this};for(const s of e){s.borderStyle||=tD._defaultBorderStyle,n.data=s;const a=KU.create(n);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,s.id,null)}}update({viewport:e}){const r=this.div;this.viewport=e,vd(r,{rotation:e.rotation}),this.#s(),r.hidden=!1}#s(){if(!this.#t)return;const e=this.div;for(const[r,n]of this.#t){const s=e.querySelector(`[data-annotation-id="${r}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):s.append(n);const o=this.#r.get(r);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(r,s.id,n),o._hasNoCanvas=!1):o.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#r.values())}getEditableAnnotation(e){return this.#r.get(e)}static get _defaultBorderStyle(){return Gt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Lh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const w0=/\r\n?|\n/g;class Gn extends dt{#e;#t="";#r=`${this.id}-editor`;#n=null;#a;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Gn.prototype,r=a=>a.isEmpty(),n=zc.TRANSLATE_SMALL,s=zc.TRANSLATE_BIG;return Gt(this,"_keyboardManager",new py([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:r}]]))}static _type="freetext";static _editorType=Ct.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||Gn._defaultColor||dt._defaultLineColor,this.#a=e.fontSize||Gn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,r){dt.initialize(e,r);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,r){switch(e){case sr.FREETEXT_SIZE:Gn._defaultFontSize=r;break;case sr.FREETEXT_COLOR:Gn._defaultColor=r;break}}updateParams(e,r){switch(e){case sr.FREETEXT_SIZE:this.#s(r);break;case sr.FREETEXT_COLOR:this.#i(r);break}}static get defaultPropertiesToUpdate(){return[[sr.FREETEXT_SIZE,Gn._defaultFontSize],[sr.FREETEXT_COLOR,Gn._defaultColor||dt._defaultLineColor]]}get propertiesToUpdate(){return[[sr.FREETEXT_SIZE,this.#a],[sr.FREETEXT_COLOR,this.#e]]}get toolbarButtons(){return this._colorPicker||=new Jg(this),[["colorPicker",this._colorPicker]]}get colorType(){return sr.FREETEXT_COLOR}get colorValue(){return this.#e}#s(e){const r=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#a)*this.parentScale),this.#a=s,this.#u()},n=this.#a;this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:sr.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#i(e){const r=s=>{this.#e=this.editorDiv.style.color=s,this._colorPicker?.update(s)},n=this.#e;this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:sr.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,r){this._uiManager.translateSelectedEditors(e,r,!0)}getInitialTranslation(){const e=this.parentScale;return[-Gn._internalPadding*e,-(Gn._internalPadding+this.#a)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const e=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const e=[];this.editorDiv.normalize();let r=null;for(const n of this.editorDiv.childNodes)r?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(Gn.#c(n)),r=n);return e.join(`
`)}#u(){const[e,r]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/r):(this.width=n.height/e,this.height=n.width/r),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,r=this.#t=this.#o().trimEnd();if(e===r)return;const n=s=>{if(this.#t=s,!s){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{n(r)},undo:()=>{n(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Gn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,r;(this._isCopy||this.annotationElementId)&&(e=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,n.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,d]=this.pageDimensions,[f,m]=this.pageTranslation;let g,x;switch(this.rotation){case 0:g=e+(o[0]-f)/u,x=r+this.height-(o[1]-m)/d;break;case 90:g=e+(o[0]-f)/u,x=r-(o[1]-m)/d,[l,c]=[c,-l];break;case 180:g=e-this.width+(o[0]-f)/u,x=r-(o[1]-m)/d,[l,c]=[-l,-c];break;case 270:g=e+(o[0]-f-this.height*d)/u,x=r+(o[1]-m-this.width*u)/d,[l,c]=[-c,l];break}this.setAt(g*s,x*a,l,c)}else this._moveAfterPaste(e,r);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(w0,"")}editorDivPaste(e){const r=e.clipboardData||window.clipboardData,{types:n}=r;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const s=Gn.#p(r.getData("text")||"").replaceAll(w0,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=o,u=[],d=[];if(l.nodeType===Node.TEXT_NODE){const g=l.parentElement;if(d.push(l.nodeValue.slice(c).replaceAll(w0,"")),g!==this.editorDiv){let x=u;for(const v of this.editorDiv.childNodes){if(v===g){x=d;continue}x.push(Gn.#c(v))}}u.push(l.nodeValue.slice(0,c).replaceAll(w0,""))}else if(l===this.editorDiv){let g=u,x=0;for(const v of this.editorDiv.childNodes)x++===c&&(g=d),g.push(Gn.#c(v))}this.#t=`${u.join(`
`)}${s}${d.join(`
`)}`,this.#h();const f=new Range;let m=Math.sumPrecise(u.map(g=>g.length));for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const x=g.nodeValue.length;if(m<=x){f.setStart(g,m),f.setEnd(g,m);break}m-=x}a.removeAllRanges(),a.addRange(f)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const r=document.createElement("div");r.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(r)}}#l(){return this.#t.replaceAll(" "," ")}static#p(e){return e.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(e,r,n){let s=null;if(e instanceof Rte){const{data:{defaultAppearanceData:{fontSize:o,fontColor:l},rect:c,rotation:u,id:d,popupRef:f,contentsObj:m},textContent:g,textPosition:x,parent:{page:{pageNumber:v}}}=e;if(!g||g.length===0)return null;s=e={annotationType:Ct.FREETEXT,color:Array.from(l),fontSize:o,value:g.join(`
`),position:x,pageIndex:v-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:f,comment:m?.str||null}}const a=await super.deserialize(e,r,n);return a.#a=e.fontSize,a.#e=it.makeHexColor(...e.color),a.#t=Gn.#p(e.value),a._initialData=s,e.comment&&a.setCommentData(e.comment),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Gn._internalPadding*this.parentScale,n=this.getRect(r,r),s=dt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),a={annotationType:Ct.FREETEXT,color:s,fontSize:this.#a,value:this.#l(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!this.#m(a)?null:(a.id=this.annotationElementId,a)}#m(e){const{value:r,fontSize:n,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==r||e.fontSize!==n||e.color.some((o,l)=>o!==s[l])||e.pageIndex!==a}renderAnnotationElement(e){const r=super.renderAnnotationElement(e),{style:n}=r;n.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,n.color=this.#e,r.replaceChildren();for(const o of this.#t.split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),r.append(l)}const s=Gn._internalPadding*this.parentScale,a={rect:this.getRect(s,s)};return a.popup=this.hasEditedComment?this.comment:{text:this.#t},e.updateEdited(a),r}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Ge{static PRECISION=1e-4;toSVGPath(){Tr("Abstract method `toSVGPath` must be implemented.")}get box(){Tr("Abstract getter `box` must be implemented.")}serialize(e,r){Tr("Abstract method `serialize` must be implemented.")}static _rescale(e,r,n,s,a,o){o||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)o[l]=r+e[l]*s,o[l+1]=n+e[l+1]*a;return o}static _rescaleAndSwap(e,r,n,s,a,o){o||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)o[l]=r+e[l+1]*s,o[l+1]=n+e[l]*a;return o}static _translate(e,r,n,s){s||=new Float32Array(e.length);for(let a=0,o=e.length;a<o;a+=2)s[a]=r+e[a],s[a+1]=n+e[a+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,r,n,s,a){switch(a){case 90:return[1-r/n,e/s];case 180:return[1-e/n,1-r/s];case 270:return[r/n,1-e/s];default:return[e/n,r/s]}}static _normalizePagePoint(e,r,n){switch(n){case 90:return[1-r,e];case 180:return[1-e,1-r];case 270:return[r,1-e];default:return[e,r]}}static createBezierPoints(e,r,n,s,a,o){return[(e+5*n)/6,(r+5*s)/6,(5*n+a)/6,(5*s+o)/6,(n+a)/2,(s+o)/2]}}class Ru{#e;#t=[];#r;#n;#a=[];#s=new Float32Array(18);#i;#o;#u;#c;#h;#l;#p=[];static#m=8;static#f=2;static#d=Ru.#m+Ru.#f;constructor({x:e,y:r},n,s,a,o,l=0){this.#e=n,this.#l=a*s,this.#n=o,this.#s.set([NaN,NaN,NaN,NaN,e,r],6),this.#r=l,this.#c=Ru.#m*s,this.#u=Ru.#d*s,this.#h=s,this.#p.push(e,r)}isEmpty(){return isNaN(this.#s[8])}#g(){const e=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[n,s,a,o]=this.#e;return[(this.#i+(e[0]-r[0])/2-n)/a,(this.#o+(e[1]-r[1])/2-s)/o,(this.#i+(r[0]-e[0])/2-n)/a,(this.#o+(r[1]-e[1])/2-s)/o]}add({x:e,y:r}){this.#i=e,this.#o=r;const[n,s,a,o]=this.#e;let[l,c,u,d]=this.#s.subarray(8,12);const f=e-u,m=r-d,g=Math.hypot(f,m);if(g<this.#u)return!1;const x=g-this.#c,v=x/g,y=v*f,w=v*m;let _=l,A=c;l=u,c=d,u+=y,d+=w,this.#p?.push(e,r);const C=-w/x,S=y/x,E=C*this.#l,P=S*this.#l;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([u+E,d+P],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([u-E,d-P],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([l+E,c+P],2),this.#a.push(NaN,NaN,NaN,NaN,(l+E-n)/a,(c+P-s)/o),this.#s.set([l-E,c-P],14),this.#t.push(NaN,NaN,NaN,NaN,(l-E-n)/a,(c-P-s)/o)),this.#s.set([_,A,l,c,u,d],6),!this.isEmpty()):(this.#s.set([_,A,l,c,u,d],6),Math.abs(Math.atan2(A-c,_-l)-Math.atan2(w,y))<Math.PI/2?([l,c,u,d]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((l+u)/2-n)/a,((c+d)/2-s)/o),[l,c,_,A]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((_+l)/2-n)/a,((A+c)/2-s)/o),!0):([_,A,l,c,u,d]=this.#s.subarray(0,6),this.#a.push(((_+5*l)/6-n)/a,((A+5*c)/6-s)/o,((5*l+u)/6-n)/a,((5*c+d)/6-s)/o,((l+u)/2-n)/a,((c+d)/2-s)/o),[u,d,l,c,_,A]=this.#s.subarray(12,18),this.#t.push(((_+5*l)/6-n)/a,((A+5*c)/6-s)/o,((5*l+u)/6-n)/a,((5*c+d)/6-s)/o,((l+u)/2-n)/a,((c+d)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,r=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#x();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);this.#b(n);for(let s=r.length-6;s>=6;s-=6)isNaN(r[s])?n.push(`L${r[s+4]} ${r[s+5]}`):n.push(`C${r[s]} ${r[s+1]} ${r[s+2]} ${r[s+3]} ${r[s+4]} ${r[s+5]}`);return this.#v(n),n.join(" ")}#x(){const[e,r,n,s]=this.#e,[a,o,l,c]=this.#g();return`M${(this.#s[2]-e)/n} ${(this.#s[3]-r)/s} L${(this.#s[4]-e)/n} ${(this.#s[5]-r)/s} L${a} ${o} L${l} ${c} L${(this.#s[16]-e)/n} ${(this.#s[17]-r)/s} L${(this.#s[14]-e)/n} ${(this.#s[15]-r)/s} Z`}#v(e){const r=this.#t;e.push(`L${r[4]} ${r[5]} Z`)}#b(e){const[r,n,s,a]=this.#e,o=this.#s.subarray(4,6),l=this.#s.subarray(16,18),[c,u,d,f]=this.#g();e.push(`L${(o[0]-r)/s} ${(o[1]-n)/a} L${c} ${u} L${d} ${f} L${(l[0]-r)/s} ${(l[1]-n)/a}`)}newFreeDrawOutline(e,r,n,s,a,o){return new Lte(e,r,n,s,a,o)}getOutlines(){const e=this.#a,r=this.#t,n=this.#s,[s,a,o,l]=this.#e,c=new Float32Array((this.#p?.length??0)+2);for(let f=0,m=c.length-2;f<m;f+=2)c[f]=(this.#p[f]-s)/o,c[f+1]=(this.#p[f+1]-a)/l;if(c[c.length-2]=(this.#i-s)/o,c[c.length-1]=(this.#o-a)/l,isNaN(n[6])&&!this.isEmpty())return this.#w(c);const u=new Float32Array(this.#a.length+24+this.#t.length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=this.#S(u,d);for(let f=r.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(r[f+m])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=r[f+m],u[d+1]=r[f+m+1],d+=2}return this.#y(u,d),this.newFreeDrawOutline(u,c,this.#e,this.#h,this.#r,this.#n)}#w(e){const r=this.#s,[n,s,a,o]=this.#e,[l,c,u,d]=this.#g(),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(r[2]-n)/a,(r[3]-s)/o,NaN,NaN,NaN,NaN,(r[4]-n)/a,(r[5]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(r[16]-n)/a,(r[17]-s)/o,NaN,NaN,NaN,NaN,(r[14]-n)/a,(r[15]-s)/o],0),this.newFreeDrawOutline(f,e,this.#e,this.#h,this.#r,this.#n)}#y(e,r){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],r),r+=6}#S(e,r){const n=this.#s.subarray(4,6),s=this.#s.subarray(16,18),[a,o,l,c]=this.#e,[u,d,f,m]=this.#g();return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/l,(n[1]-o)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(s[0]-a)/l,(s[1]-o)/c],r),r+=24}}class Lte extends Ge{#e;#t=new Float32Array(4);#r;#n;#a;#s;#i;constructor(e,r,n,s,a,o){super(),this.#i=e,this.#a=r,this.#e=n,this.#s=s,this.#r=a,this.#n=o,this.lastPoint=[NaN,NaN],this.#o(o);const[l,c,u,d]=this.#t;for(let f=0,m=e.length;f<m;f+=2)e[f]=(e[f]-l)/u,e[f+1]=(e[f+1]-c)/d;for(let f=0,m=r.length;f<m;f+=2)r[f]=(r[f]-l)/u,r[f+1]=(r[f+1]-c)/d}toSVGPath(){const e=[`M${this.#i[4]} ${this.#i[5]}`];for(let r=6,n=this.#i.length;r<n;r+=6){if(isNaN(this.#i[r])){e.push(`L${this.#i[r+4]} ${this.#i[r+5]}`);continue}e.push(`C${this.#i[r]} ${this.#i[r+1]} ${this.#i[r+2]} ${this.#i[r+3]} ${this.#i[r+4]} ${this.#i[r+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,r,n,s],a){const o=n-e,l=s-r;let c,u;switch(a){case 0:c=Ge._rescale(this.#i,e,s,o,-l),u=Ge._rescale(this.#a,e,s,o,-l);break;case 90:c=Ge._rescaleAndSwap(this.#i,e,r,o,l),u=Ge._rescaleAndSwap(this.#a,e,r,o,l);break;case 180:c=Ge._rescale(this.#i,n,r,-o,l),u=Ge._rescale(this.#a,n,r,-o,l);break;case 270:c=Ge._rescaleAndSwap(this.#i,n,s,-o,-l),u=Ge._rescaleAndSwap(this.#a,n,s,-o,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}#o(e){const r=this.#i;let n=r[4],s=r[5];const a=[n,s,n,s];let o=n,l=s;const c=e?Math.max:Math.min;for(let d=6,f=r.length;d<f;d+=6){const m=r[d+4],g=r[d+5];if(isNaN(r[d]))it.pointBoundingBox(m,g,a),l<g?(o=m,l=g):l===g&&(o=c(o,m));else{const x=[1/0,1/0,-1/0,-1/0];it.bezierBoundingBox(n,s,...r.slice(d,d+6),x),it.rectBoundingBox(...x,a),l<x[3]?(o=x[2],l=x[3]):l===x[3]&&(o=c(o,x[2]))}n=m,s=g}const u=this.#t;u[0]=a[0]-this.#r,u[1]=a[1]-this.#r,u[2]=a[2]-a[0]+2*this.#r,u[3]=a[3]-a[1]+2*this.#r,this.lastPoint=[o,l]}get box(){return this.#t}newOutliner(e,r,n,s,a,o=0){return new Ru(e,r,n,s,a,o)}getNewOutline(e,r){const[n,s,a,o]=this.#t,[l,c,u,d]=this.#e,f=a*u,m=o*d,g=n*u+l,x=s*d+c,v=this.newOutliner({x:this.#a[0]*f+g,y:this.#a[1]*m+x},this.#e,this.#s,e,this.#n,r??this.#r);for(let y=2;y<this.#a.length;y+=2)v.add({x:this.#a[y]*f+g,y:this.#a[y+1]*m+x});return v.getOutlines()}}class jO{#e;#t;#r=[];#n=[];constructor(e,r=0,n=0,s=!0){const a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:x,width:v,height:y}of e){const w=Math.floor((g-r)/o)*o,_=Math.ceil((g+v+r)/o)*o,A=Math.floor((x-r)/o)*o,C=Math.ceil((x+y+r)/o)*o,S=[w,A,C,!0],E=[_,A,C,!1];this.#r.push(S,E),it.rectBoundingBox(w,A,_,C,a)}const l=a[2]-a[0]+2*n,c=a[3]-a[1]+2*n,u=a[0]-n,d=a[1]-n,f=this.#r.at(s?-1:-2),m=[f[0],f[2]];for(const g of this.#r){const[x,v,y]=g;g[0]=(x-u)/l,g[1]=(v-d)/c,g[2]=(y-d)/c}this.#e=new Float32Array([u,d,l,c]),this.#t=m}getOutlines(){this.#r.sort((r,n)=>r[0]-n[0]||r[1]-n[1]||r[2]-n[2]);const e=[];for(const r of this.#r)r[3]?(e.push(...this.#u(r)),this.#i(r)):(this.#o(r),e.push(...this.#u(r)));return this.#a(e)}#a(e){const r=[],n=new Set;for(const o of e){const[l,c,u]=o;r.push([l,c,o],[l,u,o])}r.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=r.length;o<l;o+=2){const c=r[o][2],u=r[o+1][2];c.push(u),u.push(c),n.add(c),n.add(u)}const s=[];let a;for(;n.size>0;){const o=n.values().next().value;let[l,c,u,d,f]=o;n.delete(o);let m=l,g=c;for(a=[l,u],s.push(a);;){let x;if(n.has(d))x=d;else if(n.has(f))x=f;else break;n.delete(x),[l,c,u,d,f]=x,m!==l&&(a.push(m,g,l,g===c?c:u),m=l),g=g===c?u:c}a.push(m,g)}return new O2e(s,this.#e,this.#t)}#s(e){const r=this.#n;let n=0,s=r.length-1;for(;n<=s;){const a=n+s>>1,o=r[a][0];if(o===e)return a;o<e?n=a+1:s=a-1}return s+1}#i([,e,r]){const n=this.#s(e);this.#n.splice(n,0,[e,r])}#o([,e,r]){const n=this.#s(e);for(let s=n;s<this.#n.length;s++){const[a,o]=this.#n[s];if(a!==e)break;if(a===e&&o===r){this.#n.splice(s,1);return}}for(let s=n-1;s>=0;s--){const[a,o]=this.#n[s];if(a!==e)break;if(a===e&&o===r){this.#n.splice(s,1);return}}}#u(e){const[r,n,s]=e,a=[[r,n,s]],o=this.#s(s);for(let l=0;l<o;l++){const[c,u]=this.#n[l];for(let d=0,f=a.length;d<f;d++){const[,m,g]=a[d];if(!(u<=m||g<=c)){if(m>=c){if(g>u)a[d][1]=u;else{if(f===1)return[];a.splice(d,1),d--,f--}continue}a[d][2]=c,g>u&&a.push([r,u,g])}}}return a}}class O2e extends Ge{#e;#t;constructor(e,r,n){super(),this.#t=e,this.#e=r,this.lastPoint=n}toSVGPath(){const e=[];for(const r of this.#t){let[n,s]=r;e.push(`M${n} ${s}`);for(let a=2;a<r.length;a+=2){const o=r[a],l=r[a+1];o===n?(e.push(`V${l}`),s=l):l===s&&(e.push(`H${o}`),n=o)}e.push("Z")}return e.join(" ")}serialize([e,r,n,s],a){const o=[],l=n-e,c=s-r;for(const u of this.#t){const d=new Array(u.length);for(let f=0;f<u.length;f+=2)d[f]=e+u[f]*l,d[f+1]=s-u[f+1]*c;o.push(d)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class AO extends Ru{newFreeDrawOutline(e,r,n,s,a,o){return new R2e(e,r,n,s,a,o)}}class R2e extends Lte{newOutliner(e,r,n,s,a,o=0){return new AO(e,r,n,s,a,o)}}class bn extends dt{#e=null;#t=0;#r;#n=null;#a=null;#s=null;#i=null;#o=0;#u=null;#c=null;#h=null;#l=!1;#p=null;#m;#f=null;#d="";#g;#x="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ct.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=bn.prototype;return Gt(this,"_keyboardManager",new py([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||bn._defaultColor,this.#g=e.thickness||bn._defaultThickness,this.#m=e.opacity||bn._defaultOpacity,this.#r=e.boxes||null,this.#x=e.methodOfCreation||"",this.#d=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#l=!0,this.#b(e),this.#j()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#i=e.focusNode,this.#o=e.focusOffset,this.#v(),this.#j(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#l?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#x}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#v(){const e=new jO(this.#r,.001);this.#c=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const r=new jO(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#s=r.getOutlines();const{lastPoint:n}=this.#s;this.#p=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:r,clipPathId:n}){this.#c=e;const s=1.5;if(this.#s=e.getNewOutline(this.#g/2+s,.0025),r>=0)this.#h=r,this.#n=n,this.parent.drawLayer.finalizeDraw(r,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const d=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:bn.#P(this.#c.box,(d-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:bn.#P(this.#s.box,d),path:{d:this.#s.toSVGPath()}})}const[a,o,l,c]=e.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=c;break;case 90:{const[d,f]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*f/d,this.height=c*d/f;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[d,f]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*f/d,this.height=c*d/f;break}}const{lastPoint:u}=this.#s;this.#p=[(u[0]-a)/l,(u[1]-o)/c]}static initialize(e,r){dt.initialize(e,r),bn._defaultColor||=r.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,r){switch(e){case sr.HIGHLIGHT_COLOR:bn._defaultColor=r;break;case sr.HIGHLIGHT_THICKNESS:bn._defaultThickness=r;break}}translateInPage(e,r){}get toolbarPosition(){return this.#p}updateParams(e,r){switch(e){case sr.HIGHLIGHT_COLOR:this.#w(r);break;case sr.HIGHLIGHT_THICKNESS:this.#y(r);break}}static get defaultPropertiesToUpdate(){return[[sr.HIGHLIGHT_COLOR,bn._defaultColor],[sr.HIGHLIGHT_THICKNESS,bn._defaultThickness]]}get propertiesToUpdate(){return[[sr.HIGHLIGHT_COLOR,this.color||bn._defaultColor],[sr.HIGHLIGHT_THICKNESS,this.#g||bn._defaultThickness],[sr.HIGHLIGHT_FREE,this.#l]]}#w(e){const r=(a,o)=>{this.color=a,this.#m=o,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:a,"fill-opacity":o}}),this.#a?.updateColor(a)},n=this.color,s=this.#m;this.addCommands({cmd:r.bind(this,e,bn._defaultOpacity),undo:r.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:sr.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#y(e){const r=this.#g,n=s=>{this.#g=s,this.#S(s)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:sr.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new Xa({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(e,r){return super.getRect(e,r,this.#N())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#E(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#j(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let r=!1;this.parent&&!e?this.#E():e&&(this.#j(e),r=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),r&&this.select()}#S(e){if(!this.#l)return;this.#b({highlightOutlines:this.#c.getNewOutline(e/2)}),this.fixAndSetPosition();const[r,n]=this.parentDimensions;this.setDims(this.width*r,this.height*n)}#E(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#j(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#m},rootClass:{highlight:!0,free:this.#l},path:{d:this.#c.toSVGPath()}},!1,!0),this.#f=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#l},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#l),this.#u&&(this.#u.style.clipPath=this.#n))}static#P([e,r,n,s],a){switch(a){case 90:return[1-r-s,e,s,n];case 180:return[1-e-n,1-r-s,n,s];case 270:return[r,1-e-n,s,n]}return[e,r,n,s]}rotate(e){const{drawLayer:r}=this.parent;let n;this.#l?(e=(e-this.rotation+360)%360,n=bn.#P(this.#c.box,e)):n=bn.#P([this.x,this.y,this.width,this.height],e),r.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),r.updateProperties(this.#f,{bbox:bn.#P(this.#s.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#d&&(e.setAttribute("aria-label",this.#d),e.setAttribute("role","mark")),this.#l?e.classList.add("free"):this.div.addEventListener("keydown",this.#T.bind(this),{signal:this._uiManager._signal});const r=this.#u=document.createElement("div");e.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=this.#n;const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),dte(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#T(e){bn._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(e){if(!this.#e)return;const r=window.getSelection();e?r.setPosition(this.#e,this.#t):r.setPosition(this.#i,this.#o)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#l||this.#C(!1))}get _mustFixPosition(){return!this.#l}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!e}}))}#N(){return this.#l?this.rotation:0}#O(){if(this.#l)return null;const[e,r]=this.pageDimensions,[n,s]=this.pageTranslation,a=this.#r,o=new Float32Array(a.length*8);let l=0;for(const{x:c,y:u,width:d,height:f}of a){const m=c*e+n,g=(1-u)*r+s;o[l]=o[l+4]=m,o[l+1]=o[l+3]=g,o[l+2]=o[l+6]=m+d*e,o[l+5]=o[l+7]=g-f*r,l+=8}return o}#L(e){return this.#c.serialize(e,this.#N())}static startHighlighting(e,r,{target:n,x:s,y:a}){const{x:o,y:l,width:c,height:u}=n.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),m=g=>{d.abort(),this.#U(e,g)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",In,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ii,{signal:f}),n.addEventListener("pointermove",this.#R.bind(this,e),{signal:f}),this._freeHighlight=new AO({x:s,y:a},[o,l,c,u],e.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#R(e,r){this._freeHighlight.add(r)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#U(e,r){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,r,n){let s=null;if(e instanceof Mte){const{data:{quadPoints:x,rect:v,rotation:y,id:w,color:_,opacity:A,popupRef:C,contentsObj:S},parent:{page:{pageNumber:E}}}=e;s=e={annotationType:Ct.HIGHLIGHT,color:Array.from(_),opacity:A,quadPoints:x,boxes:null,pageIndex:E-1,rect:v.slice(0),rotation:y,annotationElementId:w,id:w,deleted:!1,popupRef:C,comment:S?.str||null}}else if(e instanceof eD){const{data:{inkLists:x,rect:v,rotation:y,id:w,color:_,borderStyle:{rawWidth:A},popupRef:C,contentsObj:S},parent:{page:{pageNumber:E}}}=e;s=e={annotationType:Ct.HIGHLIGHT,color:Array.from(_),thickness:A,inkLists:x,boxes:null,pageIndex:E-1,rect:v.slice(0),rotation:y,annotationElementId:w,id:w,deleted:!1,popupRef:C,comment:S?.str||null}}const{color:a,quadPoints:o,inkLists:l,opacity:c}=e,u=await super.deserialize(e,r,n);u.color=it.makeHexColor(...a),u.#m=c||1,l&&(u.#g=e.thickness),u._initialData=s,e.comment&&u.setCommentData(e.comment);const[d,f]=u.pageDimensions,[m,g]=u.pageTranslation;if(o){const x=u.#r=[];for(let v=0;v<o.length;v+=8)x.push({x:(o[v]-m)/d,y:1-(o[v+1]-g)/f,width:(o[v+2]-o[v])/d,height:(o[v+1]-o[v+5])/f});u.#v(),u.#j(),u.rotate(u.rotation)}else if(l){u.#l=!0;const x=l[0],v={x:x[0]-m,y:f-(x[1]-g)},y=new AO(v,[0,0,d,f],1,u.#g/2,!0,.001);for(let A=0,C=x.length;A<C;A+=2)v.x=x[A]-m,v.y=f-(x[A+1]-g),y.add(v);const{id:w,clipPathId:_}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:y.toSVGPath()}},!0,!0);u.#b({highlightOutlines:y.getOutlines(),highlightId:w,clipPathId:_}),u.#j(),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),n=dt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s={annotationType:Ct.HIGHLIGHT,color:n,opacity:this.#m,thickness:this.#g,quadPoints:this.#O(),outlines:this.#L(r),pageIndex:this.pageIndex,rect:r,rotation:this.#N(),structTreeParentId:this._structTreeParentId};return this.addComment(s),this.annotationElementId&&!this.#A(s)?null:(s.id=this.annotationElementId,s)}#A(e){const{color:r}=this._initialData;return this.hasEditedComment||e.color.some((n,s)=>n!==r[s])}renderAnnotationElement(e){const r={rect:this.getRect(0,0)};return this.hasEditedComment&&(r.popup=this.comment),e.updateEdited(r),null}static canCreateNewEmptyEditor(){return!1}}class $te{#e=Object.create(null);updateProperty(e,r){this[e]=r,this.updateSVGProperty(e,r)}updateProperties(e){if(e)for(const[r,n]of Object.entries(e))r.startsWith("_")||this.updateProperty(r,n)}updateSVGProperty(e,r){this.#e[e]=r}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Tr("Not implemented")}}class ht extends dt{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#n=null;static#a=null;static#s=NaN;static#i=null;static#o=null;static#u=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(this.#c(e),this.#p())}#c({drawOutlines:e,drawId:r,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#d(e.box)}#h(e,r){const{id:n}=r.drawLayer.draw(ht._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,r){const n=new Set(Object.keys(e));for(const[s,a]of Object.entries(r))n.has(s)?Object.assign(e[s],a):e[s]=a;return e}static getDefaultDrawingOptions(e){Tr("Not implemented")}static get typesMap(){Tr("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,r){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,r),this._currentParent&&(ht.#r.updateProperty(n,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,r){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,r)}static get defaultPropertiesToUpdate(){const e=[],r=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)e.push([n,r[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:r}=this;for(const[n,s]of this.constructor.typesMap)e.push([n,r[s]]);return e}_updateProperty(e,r,n){const s=this._drawingOptions,a=s[r],o=l=>{s.updateProperty(r,l);const c=this.#e.updateProperty(r,l);c&&this.#d(c),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&this._colorPicker?.update(l)};this.addCommands({cmd:o.bind(this,n),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#f()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#f()),{bbox:this.#g()}))}_onTranslating(e,r){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#l(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#p(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let r=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#l()):e&&(this._uiManager.addShouldRescale(this),this.#p(e),r=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),r&&this.select()}#l(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#p(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#m([e,r,n,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[r,1-e,n*(o/a),s*(a/o)];case 180:return[1-e,1-r,n,s];case 270:return[1-r,e,n*(o/a),s*(a/o)];default:return[e,r,n,s]}}#f(){const{x:e,y:r,width:n,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-r,e,n*(a/o),s*(o/a)];case 180:return[1-e,1-r,n,s];case 270:return[r,1-e,n*(a/o),s*(o/a)];default:return[e,r,n,s]}}#d(e){if([this.x,this.y,this.width,this.height]=this.#m(e),this.div){this.fixAndSetPosition();const[r,n]=this.parentDimensions;this.setDims(this.width*r,this.height*n)}this._onResized()}#g(){const{x:e,y:r,width:n,height:s,rotation:a,parentRotation:o,parentDimensions:[l,c]}=this;switch((a*4+o)/90){case 1:return[1-r-s,e,s,n];case 2:return[1-e-n,1-r-s,n,s];case 3:return[r,1-e-n,s,n];case 4:return[e,r-n*(l/c),s*(c/l),n*(l/c)];case 5:return[1-r,e,n*(l/c),s*(c/l)];case 6:return[1-e-s*(c/l),1-r,s*(c/l),n*(l/c)];case 7:return[r-n*(l/c),1-e-s*(c/l),n*(l/c),s*(c/l)];case 8:return[e-n,r-s,n,s];case 9:return[1-r,e-n,s,n];case 10:return[1-e,1-r,n,s];case 11:return[r-s,1-e,s,n];case 12:return[e-s*(c/l),r,s*(c/l),n*(l/c)];case 13:return[1-r-n*(l/c),e-s*(c/l),n*(l/c),s*(c/l)];case 14:return[1-e,1-r-n*(l/c),s*(c/l),n*(l/c)];case 15:return[r,1-e,n*(l/c),s*(c/l)];default:return[e,r,n,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,r;this._isCopy&&(e=this.x,r=this.y);const n=super.render();n.classList.add("draw");const s=document.createElement("div");n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,r),n}static createDrawerInstance(e,r,n,s,a){Tr("Not implemented")}static startDrawing(e,r,n,s){const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:u}=s;if(ht.#i&&ht.#i!==u)return;const{viewport:{rotation:d}}=e,{width:f,height:m}=a.getBoundingClientRect(),g=ht.#n=new AbortController,x=e.combinedSignal(g);if(ht.#s||=c,ht.#i??=u,window.addEventListener("pointerup",v=>{ht.#s===v.pointerId?this._endDraw(v):ht.#o?.delete(v.pointerId)},{signal:x}),window.addEventListener("pointercancel",v=>{ht.#s===v.pointerId?this._currentParent.endDrawingSession():ht.#o?.delete(v.pointerId)},{signal:x}),window.addEventListener("pointerdown",v=>{ht.#i===v.pointerType&&((ht.#o||=new Set).add(v.pointerId),ht.#r.isCancellable()&&(ht.#r.removeLastElement(),ht.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",ii,{signal:x}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),a.addEventListener("touchmove",v=>{v.timeStamp===ht.#u&&In(v)},{signal:x}),e.toggleDrawing(),r._editorUndoBar?.hide(),ht.#r){e.drawLayer.updateProperties(this._currentDrawId,ht.#r.startNew(o,l,f,m,d));return}r.updateUIForDefaultProperties(this),ht.#r=this.createDrawerInstance(o,l,f,m,d),ht.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(ht.#a.toSVGProperties(),ht.#r.defaultSVGProperties),!0,!1)}static _drawMove(e){if(ht.#u=-1,!ht.#r)return;const{offsetX:r,offsetY:n,pointerId:s}=e;if(ht.#s===s){if(ht.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ht.#r.add(r,n)),ht.#u=e.timeStamp,In(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,ht.#r=null,ht.#a=null,ht.#i=null,ht.#u=NaN),ht.#n&&(ht.#n.abort(),ht.#n=null,ht.#s=NaN,ht.#o=null)}static _endDraw(e){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),e?.target===r.div&&r.drawLayer.updateProperties(this._currentDrawId,ht.#r.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=ht.#r,s=this._currentDrawId,a=n.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,n.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:sr.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(sr.DRAW_STEP),!ht.#r.isEmpty()){const{pageDimensions:[n,s],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ht.#r.getOutlines(n*a,s*a,a,this._INNER_MARGIN),drawingOptions:ht.#a,mustBeCommitted:!e});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,r,n,s,a,o){Tr("Not implemented")}static async deserialize(e,r,n){const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=r.viewport,c=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,e),u=await super.deserialize(e,r,n);return u.createDrawingOptions(e),u.#c({drawOutlines:c}),u.#p(),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[r,n]=this.pageTranslation,[s,a]=this.pageDimensions;return this.#e.serialize([r,n,s,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class I2e{#e=new Float64Array(6);#t;#r;#n;#a;#s;#i="";#o=0;#u=new gy;#c;#h;constructor(e,r,n,s,a,o){this.#c=n,this.#h=s,this.#n=a,this.#a=o,[e,r]=this.#l(e,r);const l=this.#t=[NaN,NaN,NaN,NaN,e,r];this.#s=[e,r],this.#r=[{line:l,points:this.#s}],this.#e.set(l,0)}updateProperty(e,r){e==="stroke-width"&&(this.#a=r)}#l(e,r){return Ge._normalizePoint(e,r,this.#c,this.#h,this.#n)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#s.length<=10}add(e,r){[e,r]=this.#l(e,r);const[n,s,a,o]=this.#e.subarray(2,6),l=e-a,c=r-o;return Math.hypot(this.#c*l,this.#h*c)<=2?null:(this.#s.push(e,r),isNaN(n)?(this.#e.set([a,o,e,r],2),this.#t.push(NaN,NaN,NaN,NaN,e,r),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,s,a,o,e,r],0),this.#t.push(...Ge.createBezierPoints(n,s,a,o,e,r)),{path:{d:this.toSVGPath()}}))}end(e,r){const n=this.add(e,r);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,r,n,s,a){this.#c=n,this.#h=s,this.#n=a,[e,r]=this.#l(e,r);const o=this.#t=[NaN,NaN,NaN,NaN,e,r];this.#s=[e,r];const l=this.#r.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#r.push({line:o,points:this.#s}),this.#e.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#s=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#u.removeLastElement();this.#r.pop(),this.#i="";for(let e=0,r=this.#r.length;e<r;e++){const{line:n,points:s}=this.#r[e];this.#t=n,this.#s=s,this.#o=0,this.toSVGPath()}return{path:{d:this.#i}}}toSVGPath(){const e=Ge.svgRound(this.#t[4]),r=Ge.svgRound(this.#t[5]);if(this.#s.length===2)return this.#i=`${this.#i} M ${e} ${r} Z`,this.#i;if(this.#s.length<=6){const s=this.#i.lastIndexOf("M");this.#i=`${this.#i.slice(0,s)} M ${e} ${r}`,this.#o=6}if(this.#s.length===4){const s=Ge.svgRound(this.#t[10]),a=Ge.svgRound(this.#t[11]);return this.#i=`${this.#i} L ${s} ${a}`,this.#o=12,this.#i}const n=[];this.#o===0&&(n.push(`M ${e} ${r}`),this.#o=6);for(let s=this.#o,a=this.#t.length;s<a;s+=6){const[o,l,c,u,d,f]=this.#t.slice(s,s+6).map(Ge.svgRound);n.push(`C${o} ${l} ${c} ${u} ${d} ${f}`)}return this.#i+=n.join(" "),this.#o=this.#t.length,this.#i}getOutlines(e,r,n,s){const a=this.#r.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#u.build(this.#r,e,r,n,this.#n,this.#a,s),this.#e=null,this.#t=null,this.#r=null,this.#i=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class gy extends Ge{#e;#t=0;#r;#n;#a;#s;#i;#o;#u;build(e,r,n,s,a,o,l){this.#a=r,this.#s=n,this.#i=s,this.#o=a,this.#u=o,this.#r=l??0,this.#n=e,this.#l()}get thickness(){return this.#u}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:r}of this.#n){if(e.push(`M${Ge.svgRound(r[4])} ${Ge.svgRound(r[5])}`),r.length===6){e.push("Z");continue}if(r.length===12&&isNaN(r[6])){e.push(`L${Ge.svgRound(r[10])} ${Ge.svgRound(r[11])}`);continue}for(let n=6,s=r.length;n<s;n+=6){const[a,o,l,c,u,d]=r.subarray(n,n+6).map(Ge.svgRound);e.push(`C${a} ${o} ${l} ${c} ${u} ${d}`)}}return e.join("")}serialize([e,r,n,s],a){const o=[],l=[],[c,u,d,f]=this.#h();let m,g,x,v,y,w,_,A,C;switch(this.#o){case 0:C=Ge._rescale,m=e,g=r+s,x=n,v=-s,y=e+c*n,w=r+(1-u-f)*s,_=e+(c+d)*n,A=r+(1-u)*s;break;case 90:C=Ge._rescaleAndSwap,m=e,g=r,x=n,v=s,y=e+u*n,w=r+c*s,_=e+(u+f)*n,A=r+(c+d)*s;break;case 180:C=Ge._rescale,m=e+n,g=r,x=-n,v=s,y=e+(1-c-d)*n,w=r+u*s,_=e+(1-c)*n,A=r+(u+f)*s;break;case 270:C=Ge._rescaleAndSwap,m=e+n,g=r+s,x=-n,v=-s,y=e+(1-u-f)*n,w=r+(1-c-d)*s,_=e+(1-u)*n,A=r+(1-c)*s;break}for(const{line:S,points:E}of this.#n)o.push(C(S,m,g,x,v,a?new Array(S.length):null)),l.push(C(E,m,g,x,v,a?new Array(E.length):null));return{lines:o,points:l,rect:[y,w,_,A]}}static deserialize(e,r,n,s,a,{paths:{lines:o,points:l},rotation:c,thickness:u}){const d=[];let f,m,g,x,v;switch(c){case 0:v=Ge._rescale,f=-e/n,m=r/s+1,g=1/n,x=-1/s;break;case 90:v=Ge._rescaleAndSwap,f=-r/s,m=-e/n,g=1/s,x=1/n;break;case 180:v=Ge._rescale,f=e/n+1,m=-r/s,g=-1/n,x=1/s;break;case 270:v=Ge._rescaleAndSwap,f=r/s+1,m=e/n+1,g=-1/s,x=-1/n;break}if(!o){o=[];for(const w of l){const _=w.length;if(_===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(_===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const A=new Float32Array(3*(_-2));o.push(A);let[C,S,E,P]=w.subarray(0,4);A.set([NaN,NaN,NaN,NaN,C,S],0);for(let R=4;R<_;R+=2){const O=w[R],D=w[R+1];A.set(Ge.createBezierPoints(C,S,E,P,O,D),(R-2)*3),[C,S,E,P]=[E,P,O,D]}}}for(let w=0,_=o.length;w<_;w++)d.push({line:v(o[w].map(A=>A??NaN),f,m,g,x),points:v(l[w].map(A=>A??NaN),f,m,g,x)});const y=new this.prototype.constructor;return y.build(d,n,s,1,c,u,a),y}#c(e=this.#u){const r=this.#r+e/2*this.#i;return this.#o%180===0?[r/this.#a,r/this.#s]:[r/this.#s,r/this.#a]}#h(){const[e,r,n,s]=this.#e,[a,o]=this.#c(0);return[e+a,r+o,n-2*a,s-2*o]}#l(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#n){if(s.length<=12){for(let l=4,c=s.length;l<c;l+=6)it.pointBoundingBox(s[l],s[l+1],e);continue}let a=s[4],o=s[5];for(let l=6,c=s.length;l<c;l+=6){const[u,d,f,m,g,x]=s.subarray(l,l+6);it.bezierBoundingBox(a,o,u,d,f,m,g,x,e),a=g,o=x}}const[r,n]=this.#c();e[0]=Is(e[0]-r,0,1),e[1]=Is(e[1]-n,0,1),e[2]=Is(e[2]+r,0,1),e[3]=Is(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,r){return e==="stroke-width"?this.#p(r):null}#p(e){const[r,n]=this.#c();this.#u=e;const[s,a]=this.#c(),[o,l]=[s-r,a-n],c=this.#e;return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c}updateParentDimensions([e,r],n){const[s,a]=this.#c();this.#a=e,this.#s=r,this.#i=n;const[o,l]=this.#c(),c=o-s,u=l-a,d=this.#e;return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Ge.svgRound).join(" ")}get defaultProperties(){const[e,r]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ge.svgRound(e)} ${Ge.svgRound(r)}`}}}get rotationTransform(){const[,,e,r]=this.#e;let n=0,s=0,a=0,o=0,l=0,c=0;switch(this.#t){case 90:s=r/e,a=-e/r,l=e;break;case 180:n=-1,o=-1,l=e,c=r;break;case 270:s=-r/e,a=e/r,c=r;break;default:return""}return`matrix(${n} ${s} ${a} ${o} ${Ge.svgRound(l)} ${Ge.svgRound(c)})`}getPathResizingSVGProperties([e,r,n,s]){const[a,o]=this.#c(),[l,c,u,d]=this.#e;if(Math.abs(u-a)<=Ge.PRECISION||Math.abs(d-o)<=Ge.PRECISION){const v=e+n/2-(l+u/2),y=r+s/2-(c+d/2);return{path:{"transform-origin":`${Ge.svgRound(e)} ${Ge.svgRound(r)}`,transform:`${this.rotationTransform} translate(${v} ${y})`}}}const f=(n-2*a)/(u-2*a),m=(s-2*o)/(d-2*o),g=u/n,x=d/s;return{path:{"transform-origin":`${Ge.svgRound(l)} ${Ge.svgRound(c)}`,transform:`${this.rotationTransform} scale(${g} ${x}) translate(${Ge.svgRound(a)} ${Ge.svgRound(o)}) scale(${f} ${m}) translate(${Ge.svgRound(-a)} ${Ge.svgRound(-o)})`}}}getPathResizedSVGProperties([e,r,n,s]){const[a,o]=this.#c(),l=this.#e,[c,u,d,f]=l;if(l[0]=e,l[1]=r,l[2]=n,l[3]=s,Math.abs(d-a)<=Ge.PRECISION||Math.abs(f-o)<=Ge.PRECISION){const y=e+n/2-(c+d/2),w=r+s/2-(u+f/2);for(const{line:_,points:A}of this.#n)Ge._translate(_,y,w,_),Ge._translate(A,y,w,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ge.svgRound(e)} ${Ge.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(n-2*a)/(d-2*a),g=(s-2*o)/(f-2*o),x=-m*(c+a)+e+a,v=-g*(u+o)+r+o;if(m!==1||g!==1||x!==0||v!==0)for(const{line:y,points:w}of this.#n)Ge._rescale(y,x,v,m,g,y),Ge._rescale(w,x,v,m,g,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ge.svgRound(e)} ${Ge.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,r],n){const[s,a]=n,o=this.#e,l=e-o[0],c=r-o[1];if(this.#a===s&&this.#s===a)for(const{line:u,points:d}of this.#n)Ge._translate(u,l,c,u),Ge._translate(d,l,c,d);else{const u=this.#a/s,d=this.#s/a;this.#a=s,this.#s=a;for(const{line:f,points:m}of this.#n)Ge._rescale(f,l,c,u,d,f),Ge._rescale(m,l,c,u,d,m);o[2]*=u,o[3]*=d}return o[0]=e,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ge.svgRound(e)} ${Ge.svgRound(r)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ge.svgRound(e[0])} ${Ge.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class FS extends $te{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:dt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,r){e==="stroke-width"&&(r??=this["stroke-width"],r*=this._viewParameters.realScale),super.updateSVGProperty(e,r)}clone(){const e=new FS(this._viewParameters);return e.updateAll(this),e}}class rD extends ht{static _type="ink";static _editorType=Ct.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,r){dt.initialize(e,r),this._defaultDrawingOptions=new FS(r.viewParameters)}static getDefaultDrawingOptions(e){const r=this._defaultDrawingOptions.clone();return r.updateProperties(e),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return Gt(this,"typesMap",new Map([[sr.INK_THICKNESS,"stroke-width"],[sr.INK_COLOR,"stroke"],[sr.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,r,n,s,a){return new I2e(e,r,n,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,r,n,s,a,o){return gy.deserialize(e,r,n,s,a,o)}static async deserialize(e,r,n){let s=null;if(e instanceof eD){const{data:{inkLists:o,rect:l,rotation:c,id:u,color:d,opacity:f,borderStyle:{rawWidth:m},popupRef:g,contentsObj:x},parent:{page:{pageNumber:v}}}=e;s=e={annotationType:Ct.INK,color:Array.from(d),thickness:m,opacity:f,paths:{points:o},boxes:null,pageIndex:v-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:g,comment:x?.str||null}}const a=await super.deserialize(e,r,n);return a._initialData=s,e.comment&&a.setCommentData(e.comment),a}get toolbarButtons(){return this._colorPicker||=new Jg(this),[["colorPicker",this._colorPicker]]}get colorType(){return sr.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:r,parent:n}=this;r.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:r,opacity:n}){this._drawingOptions=rD.getDefaultDrawingOptions({stroke:it.makeHexColor(...e),"stroke-width":r,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:n,rect:s}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,c={annotationType:Ct.INK,color:dt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:r,points:n},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!this.#e(c)?null:(c.id=this.annotationElementId,c)}#e(e){const{color:r,thickness:n,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((o,l)=>o!==r[l])||e.thickness!==n||e.opacity!==s||e.pageIndex!==a}renderAnnotationElement(e){const{points:r,rect:n}=this.serializeDraw(!1),s={rect:n,thickness:this._drawingOptions["stroke-width"],points:r};return this.hasEditedComment&&(s.popup=this.comment),e.updateEdited(s),null}}class NO extends gy{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const _0=8,km=3;class Fh{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,r,n,s){return n-=e,s-=r,n===0?s>0?0:4:n===1?s+6:2-s}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,r,n,s,a,o,l){const c=this.#t(n,s,a,o);for(let u=0;u<8;u++){const d=(-u+c-l+16)%8,f=this.#r[2*d],m=this.#r[2*d+1];if(e[(n+f)*r+(s+m)]!==0)return d}return-1}static#a(e,r,n,s,a,o,l){const c=this.#t(n,s,a,o);for(let u=0;u<8;u++){const d=(u+c+l+16)%8,f=this.#r[2*d],m=this.#r[2*d+1];if(e[(n+f)*r+(s+m)]!==0)return d}return-1}static#s(e,r,n,s){const a=e.length,o=new Int32Array(a);for(let d=0;d<a;d++)o[d]=e[d]<=s?1:0;for(let d=1;d<n-1;d++)o[d*r]=o[d*r+r-1]=0;for(let d=0;d<r;d++)o[d]=o[r*n-1-d]=0;let l=1,c;const u=[];for(let d=1;d<n-1;d++){c=1;for(let f=1;f<r-1;f++){const m=d*r+f,g=o[m];if(g===0)continue;let x=d,v=f;if(g===1&&o[m-1]===0)l+=1,v-=1;else if(g>=1&&o[m+1]===0)l+=1,v+=1,g>1&&(c=g);else{g!==1&&(c=Math.abs(g));continue}const y=[f,d],w=v===f+1,_={isHole:w,points:y,id:l,parent:0};u.push(_);let A;for(const I of u)if(I.id===c){A=I;break}A?A.isHole?_.parent=w?A.parent:c:_.parent=w?c:A.parent:_.parent=w?c:0;const C=this.#n(o,r,d,f,x,v,0);if(C===-1){o[m]=-l,o[m]!==1&&(c=Math.abs(o[m]));continue}let S=this.#r[2*C],E=this.#r[2*C+1];const P=d+S,R=f+E;x=P,v=R;let O=d,D=f;for(;;){const I=this.#a(o,r,O,D,x,v,1);S=this.#r[2*I],E=this.#r[2*I+1];const $=O+S,M=D+E;y.push(M,$);const U=O*r+D;if(o[U+1]===0?o[U]=-l:o[U]===1&&(o[U]=l),$===d&&M===f&&O===P&&D===R){o[m]!==1&&(c=Math.abs(o[m]));break}else x=O,v=D,O=$,D=M}}}return u}static#i(e,r,n,s){if(n-r<=4){for(let P=r;P<n-2;P+=2)s.push(e[P],e[P+1]);return}const a=e[r],o=e[r+1],l=e[n-4]-a,c=e[n-3]-o,u=Math.hypot(l,c),d=l/u,f=c/u,m=d*o-f*a,g=c/l,x=1/u,v=Math.atan(g),y=Math.cos(v),w=Math.sin(v),_=x*(Math.abs(y)+Math.abs(w)),A=x*(1-_+_**2),C=Math.max(Math.atan(Math.abs(w+y)*A),Math.atan(Math.abs(w-y)*A));let S=0,E=r;for(let P=r+2;P<n-2;P+=2){const R=Math.abs(m-d*e[P+1]+f*e[P]);R>S&&(E=P,S=R)}S>(u*C)**2?(this.#i(e,r,E+2,s),this.#i(e,E,n,s)):s.push(a,o)}static#o(e){const r=[],n=e.length;return this.#i(e,0,n,r),r.push(e[n-2],e[n-1]),r.length<=4?null:r}static#u(e,r,n,s,a,o){const l=new Float32Array(o**2),c=-2*s**2,u=o>>1;for(let v=0;v<o;v++){const y=(v-u)**2;for(let w=0;w<o;w++)l[v*o+w]=Math.exp((y+(w-u)**2)/c)}const d=new Float32Array(256),f=-2*a**2;for(let v=0;v<256;v++)d[v]=Math.exp(v**2/f);const m=e.length,g=new Uint8Array(m),x=new Uint32Array(256);for(let v=0;v<n;v++)for(let y=0;y<r;y++){const w=v*r+y,_=e[w];let A=0,C=0;for(let E=0;E<o;E++){const P=v+E-u;if(!(P<0||P>=n))for(let R=0;R<o;R++){const O=y+R-u;if(O<0||O>=r)continue;const D=e[P*r+O],I=l[E*o+R]*d[Math.abs(D-_)];A+=D*I,C+=I}}const S=g[w]=Math.round(A/C);x[S]++}return[g,x]}static#c(e){const r=new Uint32Array(256);for(const n of e)r[n]++;return r}static#h(e){const r=e.length,n=new Uint8ClampedArray(r>>2);let s=-1/0,a=1/0;for(let l=0,c=n.length;l<c;l++){const u=n[l]=e[l<<2];s=Math.max(s,u),a=Math.min(a,u)}const o=255/(s-a);for(let l=0,c=n.length;l<c;l++)n[l]=(n[l]-a)*o;return n}static#l(e){let r,n=-1/0,s=-1/0;const a=e.findIndex(c=>c!==0);let o=a,l=a;for(r=a;r<256;r++){const c=e[r];c>n&&(r-o>s&&(s=r-o,l=r-1),n=c,o=r)}for(r=l-1;r>=0&&!(e[r]>e[r+1]);r--);return r}static#p(e){const r=e,{width:n,height:s}=e,{maxDim:a}=this.#e;let o=n,l=s;if(n>a||s>a){let m=n,g=s,x=Math.log2(Math.max(n,s)/a);const v=Math.floor(x);x=x===v?v-1:v;for(let w=0;w<x;w++){o=Math.ceil(m/2),l=Math.ceil(g/2);const _=new OffscreenCanvas(o,l);_.getContext("2d").drawImage(e,0,0,m,g,0,0,o,l),m=o,g=l,e!==r&&e.close(),e=_.transferToImageBitmap()}const y=Math.min(a/o,a/l);o=Math.round(o*y),l=Math.round(l*y)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,l);const d=u.getImageData(0,0,o,l).data;return[this.#h(d),o,l]}static extractContoursFromText(e,{fontFamily:r,fontStyle:n,fontWeight:s},a,o,l,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const f=200,m=d.font=`${n} ${s} ${f}px ${r}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:x,actualBoundingBoxAscent:v,actualBoundingBoxDescent:y,fontBoundingBoxAscent:w,fontBoundingBoxDescent:_,width:A}=d.measureText(e),C=1.5,S=Math.ceil(Math.max(Math.abs(g)+Math.abs(x)||0,A)*C),E=Math.ceil(Math.max(Math.abs(v)+Math.abs(y)||f,Math.abs(w)+Math.abs(_)||f)*C);u=new OffscreenCanvas(S,E),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=m,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,S,E),d.fillStyle="black",d.fillText(e,S*(C-1)/2,E*(3-C)/2);const P=this.#h(d.getImageData(0,0,S,E).data),R=this.#c(P),O=this.#l(R),D=this.#s(P,S,E,O);return this.processDrawnLines({lines:{curves:D,width:S,height:E},pageWidth:a,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,r,n,s,a){const[o,l,c]=this.#p(e),[u,d]=this.#u(o,l,c,Math.hypot(l,c)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),f=this.#l(d),m=this.#s(u,l,c,f);return this.processDrawnLines({lines:{curves:m,width:l,height:c},pageWidth:r,pageHeight:n,rotation:s,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:r,pageHeight:n,rotation:s,innerMargin:a,mustSmooth:o,areContours:l}){s%180!==0&&([r,n]=[n,r]);const{curves:c,width:u,height:d}=e,f=e.thickness??0,m=[],g=Math.min(r/u,n/d),x=g/r,v=g/n,y=[];for(const{points:_}of c){const A=o?this.#o(_):_;if(!A)continue;y.push(A);const C=A.length,S=new Float32Array(C),E=new Float32Array(3*(C===2?2:C-2));if(m.push({line:E,points:S}),C===2){S[0]=A[0]*x,S[1]=A[1]*v,E.set([NaN,NaN,NaN,NaN,S[0],S[1]],0);continue}let[P,R,O,D]=A;P*=x,R*=v,O*=x,D*=v,S.set([P,R,O,D],0),E.set([NaN,NaN,NaN,NaN,P,R],0);for(let I=4;I<C;I+=2){const $=S[I]=A[I]*x,M=S[I+1]=A[I+1]*v;E.set(Ge.createBezierPoints(P,R,O,D,$,M),(I-2)*3),[P,R,O,D]=[O,D,$,M]}}if(m.length===0)return null;const w=l?new NO:new gy;return w.build(m,r,n,1,s,l?0:f,a),{outline:w,newCurves:y,areContours:l,thickness:f,width:u,height:d}}static async compressSignature({outlines:e,areContours:r,thickness:n,width:s,height:a}){let o=1/0,l=-1/0,c=0;for(const A of e){c+=A.length;for(let C=2,S=A.length;C<S;C++){const E=A[C]-A[C-2];o=Math.min(o,E),l=Math.max(l,E)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const d=e.length,f=_0+km*d,m=new Uint32Array(f);let g=0;m[g++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,m[g++]=0,m[g++]=s,m[g++]=a,m[g++]=r?0:1,m[g++]=Math.max(0,Math.floor(n??0)),m[g++]=d,m[g++]=u.BYTES_PER_ELEMENT;for(const A of e)m[g++]=A.length-2,m[g++]=A[0],m[g++]=A[1];const x=new CompressionStream("deflate-raw"),v=x.writable.getWriter();await v.ready,v.write(m);const y=u.prototype.constructor;for(const A of e){const C=new y(A.length-2);for(let S=2,E=A.length;S<E;S++)C[S-2]=A[S]-A[S-2];v.write(C)}v.close();const w=await new Response(x.readable).arrayBuffer(),_=new Uint8Array(w);return ute(_)}static async decompressSignature(e){try{const r=sMe(e),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),a=s.getWriter();await a.ready,a.write(r).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,l=0;for await(const A of n)o||=new Uint8Array(new Uint32Array(A.buffer,0,4)[0]),o.set(A,l),l+=A.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],f=c[3],m=c[4]===0,g=c[5],x=c[6],v=c[7],y=[],w=(_0+km*x)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(v){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(o.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(o.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(o.buffer,w);break}l=0;for(let A=0;A<x;A++){const C=c[km*A+_0],S=new Float32Array(C+2);y.push(S);for(let E=0;E<km-1;E++)S[E]=c[km*A+_0+E+1];for(let E=0;E<C;E++)S[E+2]=S[E]+_[l++]}return{areContours:m,thickness:g,outlines:y,width:d,height:f}}catch(r){return Tt(`decompressSignature: ${r}`),null}}}class nD extends $te{constructor(){super(),super.updateProperties({fill:dt._defaultLineColor,"stroke-width":0})}clone(){const e=new nD;return e.updateAll(this),e}}class sD extends FS{constructor(e){super(e),super.updateProperties({stroke:dt._defaultLineColor,"stroke-width":1})}clone(){const e=new sD(this._viewParameters);return e.updateAll(this),e}}class io extends ht{#e=!1;#t=null;#r=null;#n=null;static _type="signature";static _editorType=Ct.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,r){dt.initialize(e,r),this._defaultDrawingOptions=new nD,this._defaultDrawnSignatureOptions=new sD(r.viewParameters)}static getDefaultDrawingOptions(e){const r=this._defaultDrawingOptions.clone();return r.updateProperties(e),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return Gt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const r=e.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,r;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,r=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:s,mustSmooth:a,areContours:o,description:l,uuid:c,heightInPage:u}=this.#r,{rawDims:{pageWidth:d,pageHeight:f},rotation:m}=this.parent.viewport,g=Fh.processDrawnLines({lines:s,pageWidth:d,pageHeight:f,rotation:m,innerMargin:io._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(g,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,r)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(r=>{r?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:r,thickness:n,width:s,height:a}=this.#r,o=Math.max(s,a),l=Fh.processDrawnLines({lines:{curves:e.map(c=>({points:c})),thickness:n,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,r,n,s){const{x:a,y:o}=this,{outline:l}=this.#r=e;this.#e=l instanceof NO,this.description=n;let c;this.#e?c=io.getDefaultDrawingOptions():(c=io._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[u,d]=this.parentDimensions,[,f]=this.pageDimensions;let m=r/f;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(u*this.width,d*this.height),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:r,pageHeight:n},rotation:s}=this.parent.viewport;return Fh.process(e,r,n,s,io._INNER_MARGIN)}getFromText(e,r){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return Fh.extractContoursFromText(e,r,n,s,a,io._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:r,pageHeight:n},rotation:s}=this.parent.viewport;return Fh.processDrawnLines({lines:e,pageWidth:r,pageHeight:n,rotation:s,innerMargin:io._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:r}){e?this._drawingOptions=io.getDefaultDrawingOptions():(this._drawingOptions=io._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:r,points:n,rect:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":a}}=this,o={annotationType:Ct.SIGNATURE,isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:a,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),e?(o.paths={lines:r,points:n},o.uuid=this.#n,o.isCopy=!0):o.lines=r,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(e,r,n,s,a,o){return o.areContours?NO.deserialize(e,r,n,s,a,o):gy.deserialize(e,r,n,s,a,o)}static async deserialize(e,r,n){const s=await super.deserialize(e,r,n);return s.#e=e.areContours,s.description=e.accessibilityData?.alt||"",s.#n=e.uuid,s}}class M2e extends dt{#e=null;#t=null;#r=null;#n=null;#a=null;#s="";#i=null;#o=!1;#u=null;#c=!1;#h=!1;static _type="stamp";static _editorType=Ct.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,r){dt.initialize(e,r)}static isHandlingMimeForPasting(e){return xO.includes(e)}static paste(e,r){r.pasteEditor({mode:Ct.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const r=e.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}#l(e,r=!1){if(!e){this.remove();return}this.#e=e.bitmap,r||(this.#t=e.id,this.#c=e.isSvg),e.file&&(this.#s=e.file.name),this.#f()}#p(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#i){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=e||this.copyCanvas(null,null,!0).imageData,l=await n.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#m(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#l(n,!0)).finally(()=>this.#p());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(n).then(s=>this.#l(s)).finally(()=>this.#p());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(n).then(s=>this.#l(s)).finally(()=>this.#p());return}const e=document.createElement("input");e.type="file",e.accept=xO.join(",");const r=this._uiManager._signal;this.#r=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#l(s)}n()},{signal:r}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:r})}).finally(()=>this.#p()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#i?.remove(),this.#i=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#m();return}super.rebuild(),this.div!==null&&(this.#t&&this.#i===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#n||this.#a||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,r;return this._isCopy&&(e=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#f():this.#m()),this._isCopy&&this._moveAfterPaste(e,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,r){const{id:n,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,r);r.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,s&&(this.#e=s),this.#o=!1,this.#f())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const e=200;this.#u=setTimeout(()=>{this.#u=null,this.#g()},e)}#f(){const{div:e}=this;let{width:r,height:n}=this.#e;const[s,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*s,n=this.height*a;else if(r>o*s||n>o*a){const d=Math.min(o*s/r,o*a/n);r*=d,n*=d}const[l,c]=this.parentDimensions;this.setDims(r*l/s,n*c/a),this._uiManager.enableWaiting(!1);const u=this.#i=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=r/s,this.height=n/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,r,n=!1){e||(e=224);const{width:s,height:a}=this.#e,o=new Ao;let l=this.#e,c=s,u=a,d=null;if(r){if(s>r||a>r){const E=Math.min(r/s,r/a);c=Math.floor(s*E),u=Math.floor(a*E)}d=document.createElement("canvas");const m=d.width=Math.ceil(c*o.sx),g=d.height=Math.ceil(u*o.sy);this.#c||(l=this.#d(m,g));const x=d.getContext("2d");x.filter=this._uiManager.hcmFilter;let v="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",y="#42414d");const w=15,_=w*o.sx,A=w*o.sy,C=new OffscreenCanvas(_*2,A*2),S=C.getContext("2d");S.fillStyle=v,S.fillRect(0,0,_*2,A*2),S.fillStyle=y,S.fillRect(0,0,_,A),S.fillRect(_,A,_,A),x.fillStyle=x.createPattern(C,"repeat"),x.fillRect(0,0,m,g),x.drawImage(l,0,0,l.width,l.height,0,0,m,g)}let f=null;if(n){let m,g;if(o.symmetric&&l.width<e&&l.height<e)m=l.width,g=l.height;else if(l=this.#e,s>e||a>e){const y=Math.min(e/s,e/a);m=Math.floor(s*y),g=Math.floor(a*y),this.#c||(l=this.#d(m,g))}const v=new OffscreenCanvas(m,g).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,m,g),f={width:m,height:g,data:v.getImageData(0,0,m,g).data}}return{canvas:d,width:c,height:u,imageData:f}}#d(e,r){const{width:n,height:s}=this.#e;let a=n,o=s,l=this.#e;for(;a>2*e||o>2*r;){const c=a,u=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(l,0,0,c,u,0,0,a,o),l=d.transferToImageBitmap()}return l}#g(){const[e,r]=this.parentDimensions,{width:n,height:s}=this,a=new Ao,o=Math.ceil(n*e*a.sx),l=Math.ceil(s*r*a.sy),c=this.#i;if(!c||c.width===o&&c.height===l)return;c.width=o,c.height=l;const u=this.#c?this.#e:this.#d(o,l),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,o,l)}#x(e){if(e){if(this.#c){const s=this._uiManager.imageManager.getSvgUrl(this.#t);if(s)return s}const r=document.createElement("canvas");return{width:r.width,height:r.height}=this.#e,r.getContext("2d").drawImage(this.#e,0,0),r.toDataURL()}if(this.#c){const[r,n]=this.pageDimensions,s=Math.round(this.width*r*Df.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*Df.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,r,n){let s=null,a=!1;if(e instanceof Dte){const{data:{rect:v,rotation:y,id:w,structParent:_,popupRef:A,contentsObj:C},container:S,parent:{page:{pageNumber:E}},canvas:P}=e;let R,O;P?(delete e.canvas,{id:R,bitmap:O}=n.imageManager.getFromCanvas(S.id,P),P.remove()):(a=!0,e._hasNoCanvas=!0);const D=(await r._structTree.getAriaAttributes(`${q2}${w}`))?.get("aria-label")||"";s=e={annotationType:Ct.STAMP,bitmapId:R,bitmap:O,pageIndex:E-1,rect:v.slice(0),rotation:y,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:D},isSvg:!1,structParent:_,popupRef:A,comment:C?.str||null}}const o=await super.deserialize(e,r,n),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:d,isSvg:f,accessibilityData:m}=e;a?(n.addMissingCanvas(e.id,o),o.#o=!0):d&&n.imageManager.isValidId(d)?(o.#t=d,c&&(o.#e=c)):o.#n=u,o.#c=f;const[g,x]=o.pageDimensions;return o.width=(l[2]-l[0])/g,o.height=(l[3]-l[1])/x,m&&(o.altTextData=m),o._initialData=s,e.comment&&o.setCommentData(e.comment),o.#h=!!s,o}serialize(e=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Ct.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(n),e)return n.bitmapUrl=this.#x(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=this.#v(n);if(l.isSame)return null;l.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,r===null)return n;r.stamps||=new Map;const o=this.#c?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!r.stamps.has(this.#t))r.stamps.set(this.#t,{area:o,serialized:n}),n.bitmap=this.#x(!1);else if(this.#c){const l=r.stamps.get(this.#t);o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=this.#x(!1))}return n}#v(e){const{pageIndex:r,accessibilityData:{altText:n}}=this._initialData,s=e.pageIndex===r,a=(e.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}}renderAnnotationElement(e){const r={rect:this.getRect(0,0)};return this.hasEditedComment&&(r.popup=this.comment),e.updateEdited(r),null}}class Jo{#e;#t=!1;#r=null;#n=null;#a=null;#s=new Map;#i=!1;#o=!1;#u=!1;#c=null;#h=null;#l=null;#p=null;#m=null;#f=-1;#d;static _initialized=!1;static#g=new Map([Gn,rD,M2e,bn,io].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:r,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:d}){const f=[...Jo.#g.values()];if(!Jo._initialized){Jo._initialized=!0;for(const m of f)m.initialize(d,e)}e.registerEditorTypes(f),this.#d=e,this.pageIndex=r,this.div=n,this.#e=a,this.#r=o,this.viewport=u,this.#l=c,this.drawLayer=l,this._structTree=s,this.#d.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===Ct.NONE}updateToolbar(e){this.#d.updateToolbar(e)}updateMode(e=this.#d.getMode()){switch(this.#y(),e){case Ct.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ct.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ct.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:r}=this.div;for(const n of Jo.#g.values())r.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#l?.div}setEditingState(e){this.#d.setEditingState(e)}addCommands(e){this.#d.addCommands(e)}cleanUndoStack(e){this.#d.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#r?.div.classList.toggle("disabled",!e)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#m?.abort(),this.#m=null;const e=new Set;for(const n of this.#s.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#d.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!this.#r){this.#u=!1;return}const r=this.#r.getEditableAnnotations();for(const n of r){if(n.hide(),this.#d.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}this.#u=!1}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#l&&!this.#m){this.#m=new AbortController;const s=this.#d.combinedSignal(this.#m);this.#l.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:c,timeStamp:u}=a,d=this.#f;if(u-d>500){this.#f=u;return}this.#f=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const m=document.elementsFromPoint(l,c);if(f.toggle("getElements",!1),!this.div.contains(m[0]))return;let g;const x=new RegExp(`^${ate}[0-9]+$`);for(const y of m)if(x.test(y.id)){g=y.id;break}if(!g)return;const v=this.#s.get(g);v?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),v.dblclick())},{signal:s,capture:!0})}const e=new Map,r=new Map;for(const s of this.#s.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else r.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#r){const s=this.#r.getEditableAnnotations();for(const a of s){const{id:o}=a.data;if(this.#d.isDeletedAnnotationElement(o)){a.updateEdited({deleted:!0});continue}let l=r.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(this.#d.addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of Jo.#g.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#r?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#d.getActive()!==e&&this.#d.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#p){this.#p=new AbortController;const e=this.#d.combinedSignal(this.#p);this.#l.div.addEventListener("pointerdown",this.#x.bind(this),{signal:e}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#p&&(this.#p.abort(),this.#p=null,this.#l.div.classList.remove("highlighting"))}#x(e){this.#d.unselectAll();const{target:r}=e;if(r===this.#l.div||(r.getAttribute("role")==="img"||r.classList.contains("endOfContent"))&&this.#l.div.contains(r)){const{isMac:n}=vs.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#d.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),bn.startHighlighting(this,this.#d.direction==="ltr",{target:this.#l.div,x:e.x,y:e.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#d.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const r=this.pointerup.bind(this);this.div.addEventListener("pointerup",r,{signal:e}),this.div.addEventListener("pointercancel",r,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#s.set(e.id,e);const{annotationElementId:r}=e;r&&this.#d.isDeletedAnnotationElement(r)&&this.#d.removeDeletedAnnotationElement(e)}detach(e){this.#s.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#d.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#d.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#d.addDeletedAnnotationElement(e.annotationElementId),dt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#d.addEditor(e),this.attach(e),!e.isAttachedToDOM){const r=e.render();this.div.append(r),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#d.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:r}=document;e.div.contains(r)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),r.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const r=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:r,undo:n,mustExec:!1})}getNextId(){return this.#d.getId()}get#v(){return Jo.#g.get(this.#d.getMode())}combinedSignal(e){return this.#d.combinedSignal(e)}#b(e){const r=this.#v;return r?new r.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(e,r){this.updateToolbar(e),await this.#d.updateMode(e.mode);const{offsetX:n,offsetY:s}=this.#w(),a=this.getNextId(),o=this.#b({parent:this,id:a,x:n,y:s,uiManager:this.#d,isCentered:!0,...r});o&&this.add(o)}async deserialize(e){return await Jo.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#d)||null}createAndAddNewEditor(e,r,n={}){const s=this.getNextId(),a=this.#b({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#d,isCentered:r,...n});return a&&this.add(a),a}#w(){const{x:e,y:r,width:n,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,e),o=Math.max(0,r),l=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,r+s),u=(a+l)/2-e,d=(o+c)/2-r,[f,m]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:f,offsetY:m}}addNewEditor(e={}){this.createAndAddNewEditor(this.#w(),!0,e)}setSelected(e){this.#d.setSelected(e)}toggleSelected(e){this.#d.toggleSelected(e)}unselect(e){this.#d.unselect(e)}pointerup(e){const{isMac:r}=vs.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div||!this.#i||(this.#i=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const n=this.#d.getMode();if(n===Ct.STAMP||n===Ct.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#d.getMode()===Ct.HIGHLIGHT&&this.enableTextSelection(),this.#i){this.#i=!1;return}const{isMac:r}=vs.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div)return;if(this.#i=!0,this.#v?.isDrawer){this.startDrawingSession(e);return}const n=this.#d.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#c){this.#v.startDrawing(this,this.#d,!1,e);return}this.#d.setCurrentDrawingSession(this),this.#c=new AbortController;const r=this.#d.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:r}),this.#v.startDrawing(this,this.#d,!1,e)}pause(e){if(e){const{activeElement:r}=document;this.div.contains(r)&&(this.#h=r);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#c?(this.#d.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#v.endDrawing(e)):null}findNewParent(e,r,n){const s=this.#d.findParent(r,n);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#s.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#s.clear(),this.#d.removeLayer(this)}#y(){for(const e of this.#s.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,vd(this.div,e);for(const r of this.#d.getEditors(this.pageIndex))this.add(r),r.rebuild();this.updateMode()}update({viewport:e}){this.#d.commitOrRemove(),this.#y();const r=this.viewport.rotation,n=e.rotation;if(this.viewport=e,vd(this.div,{rotation:n}),r!==n)for(const s of this.#s.values())s.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:r}=this.viewport.rawDims;return[e,r]}get scale(){return this.#d.viewParameters.realScale}}class fs{#e=null;#t=new Map;#r=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const r of this.#t.values())r.remove(),e.append(r);this.#e=e}}static get _svgFactory(){return Gt(this,"_svgFactory",new gw)}static#a(e,[r,n,s,a]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*r}%`,o.width=`${100*s}%`,o.height=`${100*a}%`}#s(){const e=fs._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#i(e,r){const n=fs._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${r}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const a=fs._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${r}`),a.classList.add("clip"),s}#o(e,r){for(const[n,s]of Object.entries(r))s===null?e.removeAttribute(n):e.setAttribute(n,s)}draw(e,r=!1,n=!1){const s=fs.#n++,a=this.#s(),o=fs._svgFactory.createElement("defs");a.append(o);const l=fs._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),r&&this.#r.set(s,l);const u=n?this.#i(o,c):null,d=fs._svgFactory.createElement("use");return a.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(a,e),this.#t.set(s,a),{id:s,clipPathId:`url(#${u})`}}drawOutline(e,r){const n=fs.#n++,s=this.#s(),a=fs._svgFactory.createElement("defs");s.append(a);const o=fs._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(r){const f=fs._svgFactory.createElement("mask");a.append(f),c=`mask_p${this.pageIndex}_${n}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const m=fs._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const g=fs._svgFactory.createElement("use");f.append(g),g.setAttribute("href",`#${l}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const u=fs._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return s.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(s,e),this.#t.set(n,s),n}finalizeDraw(e,r){this.#r.delete(e),this.updateProperties(e,r)}updateProperties(e,r){if(!r)return;const{root:n,bbox:s,rootClass:a,path:o}=r,l=typeof e=="number"?this.#t.get(e):e;if(l){if(n&&this.#o(l,n),s&&fs.#a(l,s),a){const{classList:c}=l;for(const[u,d]of Object.entries(a))c.toggle(u,d)}if(o){const u=l.firstChild.firstChild;this.#o(u,o)}}}updateParent(e,r){if(r===this)return;const n=this.#t.get(e);n&&(r.#e.append(n),this.#t.delete(e),r.#t.set(e,n))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:jO};globalThis.pdfjsLib={AbortException:Uc,AnnotationEditorLayer:Jo,AnnotationEditorParamsType:sr,AnnotationEditorType:Ct,AnnotationEditorUIManager:zc,AnnotationLayer:tD,AnnotationMode:fc,AnnotationType:Tn,build:h2e,ColorPicker:Xa,createValidAbsoluteUrl:ite,DOMSVGFactory:gw,DrawLayer:fs,FeatureTest:vs,fetchData:hy,getDocument:Nte,getFilenameFromUrl:aMe,getPdfFilenameFromUrl:iMe,getRGB:DS,getUuid:cte,getXfaPageViewport:lMe,GlobalWorkerOptions:cf,ImageKind:nb,InvalidPDFException:vO,isDataScheme:MS,isPdfFile:H2,isValidExplicitDest:xMe,MathClamp:Is,noContextMenu:ii,normalizeUnicode:rMe,OPS:pw,OutputScale:Ao,PasswordResponses:GIe,PDFDataRangeTransport:Ete,PDFDateString:yO,PDFWorker:Qg,PermissionFlag:WIe,PixelsPerInch:Df,RenderingCancelledException:V2,ResponseException:mw,setLayerDimensions:vd,shadow:Gt,SignatureExtractor:Fh,stopEvent:In,SupportedImageMimeTypes:xO,TextLayer:Os,TouchManager:LS,updateUrlHash:ote,Util:it,VerbosityLevel:OS,version:Pte,XfaLayer:kte};cf.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${Pte}/pdf.worker.min.js`;const D2e=({url:t,className:e=""})=>{const r=N.useRef(null),[n,s]=N.useState(!0),[a,o]=N.useState(null);return N.useEffect(()=>{(async()=>{try{s(!0),o(null);const d=await(await Nte(t).promise).getPage(1),f=r.current;if(!f)return;const m=f.getContext("2d");if(!m)return;const g=d.getViewport({scale:1}),x=Math.min(120/g.width,160/g.height),v=d.getViewport({scale:x});f.height=v.height,f.width=v.width;const y={canvasContext:m,viewport:v,canvas:f};await d.render(y).promise,s(!1)}catch(c){console.error("Erro ao carregar PDF:",c),o("Erro ao carregar preview do PDF"),s(!1)}})()},[t]),n?i.jsx("div",{className:`flex items-center justify-center bg-gray-700 ${e}`,children:i.jsx(un,{className:"h-6 w-6 animate-spin text-gray-400"})}):a?i.jsx("div",{className:`flex items-center justify-center bg-gray-700 ${e}`,children:i.jsx(zt,{className:"h-8 w-8 text-gray-400"})}):i.jsx("div",{className:`flex items-center justify-center bg-white ${e}`,children:i.jsx("canvas",{ref:r,className:"max-w-full max-h-full"})})},L2e=({document:t,className:e="",onClick:r})=>{const n=/\.(jpg|jpeg|png|gif|webp)$/i.test(t.name||""),s=/\.pdf$/i.test(t.name||""),a=()=>{r?r():t.url&&window.open(t.url,"_blank")};return n?i.jsx("div",{className:`cursor-pointer overflow-hidden rounded-lg bg-gray-700 ${e}`,onClick:a,"data-testid":"document-image-preview",children:i.jsx("img",{src:t.url,alt:t.name,className:"h-full w-full object-cover transition-transform hover:scale-110",loading:"lazy"})}):s?i.jsx("div",{className:`cursor-pointer overflow-hidden rounded-lg ${e}`,onClick:a,"data-testid":"document-pdf-preview",children:i.jsx(D2e,{url:t.url,className:"h-full w-full"})}):i.jsx("div",{className:`flex cursor-pointer items-center justify-center rounded-lg bg-gray-700 ${e}`,onClick:a,"data-testid":"document-generic-preview",children:i.jsx(zt,{className:"h-8 w-8 text-gray-400"})})},$2e=({propostaId:t})=>{const{toast:e}=Fr(),r=ys(),{data:n,isLoading:s}=nt({queryKey:[`/api/propostas/${t}/documents`],queryFn:async()=>(await xt.get(`/api/propostas/${t}/documents`)).data,enabled:!!t&&t.trim()!==""&&t!=="undefined"}),a=Mt({mutationFn:async l=>{const c=new FormData;return c.append("file",l),(await xt.post(`/api/propostas/${t}/documents`,c)).data},onSuccess:()=>{e({title:"Documento enviado com sucesso!",description:"O documento foi anexado à proposta."}),r.invalidateQueries({queryKey:[`/api/propostas/${t}/documents`]})},onError:l=>{e({title:"Erro ao enviar documento",description:l.message||"Tente novamente em alguns instantes.",variant:"destructive"})}}),o=l=>{const c=l.target.files;c&&c.length>0&&Array.from(c).forEach(u=>{a.mutate(u)})};return s?i.jsx("div",{className:"py-8 text-center text-gray-400",children:"Carregando documentos..."}):i.jsxs("div",{children:[i.jsx("h3",{className:"mb-4 text-lg font-semibold text-blue-400",children:"Documentos da Proposta"}),n?.documents&&n.documents.length>0?i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:n.documents.map((l,c)=>i.jsxs("div",{className:"group overflow-hidden rounded-lg border border-gray-700 bg-gray-800 transition-all hover:border-blue-500 hover:shadow-lg","data-testid":`document-card-${c}`,children:[i.jsx("div",{className:"aspect-[4/3] w-full",children:i.jsx(L2e,{document:l,className:"h-full w-full",onClick:()=>l.url&&window.open(l.url,"_blank")})}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("p",{className:"truncate text-sm font-medium text-white",title:l.name||l.nome||`Documento ${c+1}`,children:l.name||l.nome||`Documento ${c+1}`}),i.jsx("p",{className:"text-xs text-gray-400",children:l.size?`${(l.size/1024).toFixed(1)} KB`:"Tamanho não especificado"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(se,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>l.url&&window.open(l.url,"_blank"),"data-testid":"button-view-document",children:[i.jsx(wo,{className:"mr-1 h-3 w-3"}),"Ver"]}),i.jsx(se,{variant:"destructive",size:"sm",className:"text-xs",disabled:!0,"data-testid":"button-remove-document",children:"Remover"})]})]})]},c))}):i.jsxs("div",{className:"py-12 text-center text-gray-400",children:[i.jsx(zt,{className:"mx-auto mb-4 h-12 w-12"}),i.jsx("p",{className:"text-lg font-medium",children:"Nenhum documento encontrado"}),i.jsx("p",{className:"text-sm",children:"Adicione documentos usando a área de upload abaixo"})]}),i.jsxs("div",{className:"mt-4 rounded-lg border-2 border-dashed border-gray-600 p-6 text-center",children:[i.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"file-upload",onChange:o}),i.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:i.jsx("div",{className:"text-gray-400",children:a.isPending?i.jsxs(i.Fragment,{children:[i.jsx(un,{className:"mx-auto mb-2 h-8 w-8 animate-spin"}),i.jsx("p",{className:"text-sm font-medium",children:"Enviando documento..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm font-medium",children:"Clique para adicionar novos documentos"}),i.jsx("p",{className:"mt-1 text-xs",children:"PDF, JPG, JPEG, PNG (máx. 10MB cada)"})]})})})]})]})},F2e=()=>{const{id:t}=lK(),[,e]=qi(),{toast:r}=Fr(),n=ys(),[s,a]=N.useState("dados-cliente"),[o,l]=N.useState({clienteData:{},condicoesData:{}}),{data:c,isLoading:u,error:d}=nt({queryKey:[`/api/propostas/${t}`],queryFn:async()=>{const w=await xt.get(`/api/propostas/${t}`);return w.data.data||w.data},enabled:!!t&&t.trim()!==""&&t!=="undefined",refetchOnWindowFocus:!1,refetchOnReconnect:!0,staleTime:300*1e3});N.useEffect(()=>{if(c){const w={...c.clienteData||{},...c.cliente_data||{},nome:c.clienteData?.nome?.value||c.clienteData?.nome||c.cliente_data?.nome?.value||c.cliente_data?.nome||"",cpf:c.clienteData?.cpf?.value||c.clienteData?.cpf||c.cliente_data?.cpf?.value||c.cliente_data?.cpf||"",email:c.clienteData?.email?.value||c.clienteData?.email||c.cliente_data?.email?.value||c.cliente_data?.email||"",telefone:c.clienteData?.telefone?.value||c.clienteData?.telefone||c.cliente_data?.telefone?.value||c.cliente_data?.telefone||""},_={...c.condicoesData||{},...c.condicoes_data||{},valor:c.valor||c.condicoesData?.valor||c.condicoes_data?.valor||"",prazo:c.prazo||c.condicoesData?.prazo||c.condicoes_data?.prazo||"",finalidade:c.finalidade||c.condicoesData?.finalidade||c.condicoes_data?.finalidade||"",garantia:c.garantia||c.condicoesData?.garantia||c.condicoes_data?.garantia||""};l({clienteData:w,condicoesData:_})}},[c]);const f=Mt({mutationFn:async w=>(console.log("🔍 SALVANDO ALTERAÇÕES:",w),(await xt.put(`/api/propostas/${t}`,w)).data),onSuccess:()=>{r({title:"Alterações salvas",description:"As alterações foram salvas com sucesso."}),n.invalidateQueries({queryKey:[`/api/propostas/${t}`]}),n.invalidateQueries({queryKey:[`/api/propostas/${t}/observacoes`]}),n.invalidateQueries({queryKey:["/api/propostas"]})},onError:w=>{const _=w?.message||w?.response?.data?.message||(typeof w=="object"?JSON.stringify(w):String(w))||"Erro desconhecido";console.error("🔍 ERRO AO SALVAR:",{error:w,errorMessage:_}),r({variant:"destructive",title:"Erro ao salvar",description:_})}}),m=Mt({mutationFn:async()=>((Object.keys(o.clienteData).length>0||Object.keys(o.condicoesData).length>0)&&await xt.put(`/api/propostas/${t}`,{cliente_data:o.clienteData,condicoes_data:o.condicoesData}),(await xt.put(`/api/propostas/${t}/resubmit`)).data),onSuccess:()=>{r({title:"Proposta reenviada",description:"A proposta foi reenviada para análise com sucesso."}),n.invalidateQueries({queryKey:["/api/propostas"]}),n.invalidateQueries({queryKey:[`/api/propostas/${t}`]}),n.invalidateQueries({queryKey:[`/api/propostas/${t}/observacoes`]}),n.invalidateQueries({queryKey:["proposta"]}),e("/dashboard")},onError:w=>{const _=w?.response?.data?.error||w?.message||"Erro ao reenviar proposta";r({variant:"destructive",title:"Erro ao reenviar",description:_})}});if(N.useEffect(()=>{const w=o.condicoesData?.valor,_=o.condicoesData?.prazo,A=typeof w=="object"&&w?.cents?parseFloat(String(w.cents/100)):parseFloat(typeof w=="string"?w.replace(/[^\d,]/g,"").replace(",","."):String(w||"0")),C=parseInt(String(_||"0")),S=parseFloat(c?.tabelaComercial?.taxaJuros||"2.5"),E=o.condicoesData?.valorTac,P=o.condicoesData?.valorIof;if(A>0&&C>0&&!E&&!P){const O=A*3/100,M=A*(.38+.0082*C*30)/100,U=A+O+M,H=S/100,z=Math.pow(1+H,C),q=U*H*z/(z-1);l(V=>({...V,condicoesData:{...V.condicoesData,valorTac:O.toFixed(2),valorIof:M.toFixed(2),valorTotalFinanciado:U.toFixed(2),valorParcela:q.toFixed(2)}}))}},[o.condicoesData?.valor,o.condicoesData?.prazo,c?.tabelaComercial?.taxaJuros]),!t||t.trim()===""||t==="undefined"||t==="null")return console.log("🔍 ID INVÁLIDO DETECTADO:",t," - redirecionando para dashboard"),i.jsx(pt,{title:"Erro",children:i.jsx(jt,{variant:"destructive",children:i.jsx(At,{children:"ID de proposta inválido. Redirecionando para o dashboard..."})})});if(u)return i.jsx(pt,{title:"Editar Proposta Pendenciada",children:i.jsx("div",{className:"flex h-64 items-center justify-center",children:i.jsx(un,{className:"h-8 w-8 animate-spin text-gray-400"})})});if(d||!c){const w=d?.message||(typeof d=="object"?JSON.stringify(d):String(d))||"Proposta não encontrada";return console.log("🔍 ERRO OU PROPOSTA VAZIA:",{error:d,proposta:c,errorMessage:w}),i.jsxs(pt,{title:"Editar Proposta Pendenciada",children:[i.jsx(jt,{variant:"destructive",children:i.jsxs(At,{children:["Erro ao carregar proposta. Por favor, tente novamente.",i.jsx("br",{}),i.jsxs("small",{children:["Debug: ",w]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx(se,{onClick:()=>window.location.reload(),children:"🔄 Recarregar"}),i.jsx(se,{onClick:()=>e("/dashboard"),variant:"outline",className:"ml-2",children:"Voltar ao Dashboard"})]})]})}console.log("🔍 STATUS DEBUG CORRIGIDO:",{propostaStatus:c.status,statusType:typeof c.status,statusLength:c.status?.length,expectedStatus:"pendenciado",isEqual:c.status==="pendenciado",statusAsString:String(c.status),propostaCompleta:c});const g=String(c.status||"").trim();if(g!=="pendenciado"&&g!=="pendente")return i.jsx(pt,{title:"Editar Proposta",children:i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(ee,{children:i.jsx(re,{className:"p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ir,{className:"mx-auto mb-4 h-12 w-12 text-yellow-500"}),i.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Proposta não editável"}),i.jsxs("p",{className:"mb-4 text-gray-400",children:['Esta proposta está com status "',c.status,'" e só pode ser editada quando estiver "pendenciado" ou "pendente".']}),i.jsxs("p",{className:"mb-4 text-sm text-gray-500",children:["Status atual:"," ",i.jsxs("span",{className:"rounded bg-gray-800 px-2 py-1 font-mono",children:['"',g,'"']})]}),i.jsxs("p",{className:"mb-4 text-xs text-gray-600",children:["Debug: raw=",JSON.stringify(c.status),", type=",typeof c.status]}),i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx(se,{onClick:()=>{n.invalidateQueries({queryKey:[`/api/propostas/${t}`]}),window.location.reload()},variant:"secondary",children:"🔄 Recarregar Página"}),i.jsx(se,{onClick:()=>e("/dashboard"),variant:"outline",children:"Voltar ao Dashboard"})]})]})})})})});const x=(w,_)=>{l(A=>({...A,clienteData:{...A.clienteData,[w]:_}}))},v=(w,_)=>{l(A=>({...A,condicoesData:{...A.condicoesData,[w]:_}}))},y=async()=>{try{(Object.keys(o.clienteData).length>0||Object.keys(o.condicoesData).length>0)&&await f.mutateAsync({cliente_data:o.clienteData,condicoes_data:o.condicoesData}),m.mutate()}catch{r({variant:"destructive",title:"Erro ao salvar",description:"Não foi possível salvar as alterações antes do reenvio."})}};return i.jsx(pt,{title:"Editar Proposta Pendenciada",children:i.jsxs("div",{className:"space-y-6",children:[c?.motivoPendencia&&i.jsxs(jt,{className:"border-yellow-500 bg-yellow-950/20",children:[i.jsx(ir,{className:"h-4 w-4 text-yellow-500"}),i.jsxs(At,{className:"text-yellow-200",children:[i.jsx("strong",{children:"Motivo da pendência:"})," ",c.motivoPendencia]})]}),i.jsx(Vee,{propostaId:t,context:"edicao"}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{children:["Proposta #",c?.id]})}),i.jsx(re,{children:i.jsxs("div",{className:"grid gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Cliente:"})," ",o.clienteData?.nome||c?.clienteData?.nome?.value||c?.clienteData?.nome||c?.cliente_data?.nome?.value||c?.cliente_data?.nome||"Nome não informado"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"CPF:"})," ",o.clienteData?.cpf?.value||o.clienteData?.cpf||c?.clienteData?.cpf?.value||c?.clienteData?.cpf||c?.cliente_data?.cpf?.value||c?.cliente_data?.cpf||"CPF não informado"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Valor Solicitado:"})," R$"," ",o.condicoesData?.valor?.cents?(o.condicoesData?.valor?.cents/100).toFixed(2):o.condicoesData?.valor||0]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Prazo:"})," ",o.condicoesData?.prazo||0," meses"]})]})})]}),i.jsx(ee,{children:i.jsx(re,{className:"p-6",children:i.jsxs(kp,{value:s,onValueChange:a,children:[i.jsxs(Rd,{className:"grid w-full grid-cols-3",children:[i.jsx(dn,{value:"dados-cliente",children:"Dados do Cliente"}),i.jsx(dn,{value:"condicoes",children:"Condições do Crédito"}),i.jsx(dn,{value:"documentos",children:"Documentos"})]}),i.jsxs(hn,{value:"dados-cliente",className:"mt-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-4 text-lg font-semibold text-blue-400",children:"Dados Pessoais"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nome",children:"Nome Completo *"}),i.jsx(Fe,{id:"nome",value:o.clienteData?.nome||"",onChange:w=>x("nome",w.target.value)})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"cpf",children:"CPF *"}),i.jsx(Fe,{id:"cpf",value:o.clienteData?.cpf?.value||o.clienteData?.cpf||"",onChange:w=>x("cpf",w.target.value),placeholder:"000.000.000-00"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"rg",children:"RG"}),i.jsx(Fe,{id:"rg",value:o.clienteData?.rg||"",onChange:w=>x("rg",w.target.value)})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"orgaoEmissor",children:"Órgão Emissor"}),i.jsx(Fe,{id:"orgaoEmissor",value:o.clienteData?.orgaoEmissor||"",onChange:w=>x("orgaoEmissor",w.target.value),placeholder:"SSP/SP"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"dataNascimento",children:"Data de Nascimento"}),i.jsx(Fe,{id:"dataNascimento",type:"date",value:o.clienteData?.dataNascimento||"",onChange:w=>x("dataNascimento",w.target.value)})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"estadoCivil",children:"Estado Civil"}),i.jsx(Fe,{id:"estadoCivil",value:o.clienteData?.estadoCivil||"",onChange:w=>x("estadoCivil",w.target.value),placeholder:"Solteiro, Casado, etc."})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"nacionalidade",children:"Nacionalidade"}),i.jsx(Fe,{id:"nacionalidade",value:o.clienteData?.nacionalidade||"",onChange:w=>x("nacionalidade",w.target.value),placeholder:"Brasileira"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"mb-4 text-lg font-semibold text-blue-400",children:"Contato"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"email",children:"E-mail *"}),i.jsx(Fe,{id:"email",type:"email",value:o.clienteData?.email?.value||o.clienteData?.email||"",onChange:w=>x("email",w.target.value),placeholder:"cliente@email.com"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"telefone",children:"Telefone *"}),i.jsx(Fe,{id:"telefone",value:o.clienteData?.telefone?.value||o.clienteData?.telefone||"",onChange:w=>x("telefone",w.target.value),placeholder:"(11) 99999-9999"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"mb-4 text-lg font-semibold text-blue-400",children:"Endereço"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"cep",children:"CEP"}),i.jsx(Fe,{id:"cep",value:o.clienteData?.cep?.value||o.clienteData?.cep||"",onChange:w=>x("cep",w.target.value),placeholder:"00000-000"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx(ue,{htmlFor:"endereco",children:"Endereço Completo"}),i.jsx(Ra,{id:"endereco",value:o.clienteData?.endereco||"",onChange:w=>x("endereco",w.target.value),rows:3,placeholder:"Rua, número, bairro, cidade, estado"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"mb-4 text-lg font-semibold text-blue-400",children:"Dados Profissionais"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"ocupacao",children:"Ocupação *"}),i.jsx(Fe,{id:"ocupacao",value:o.clienteData?.ocupacao||o.clienteData?.profissao||"",onChange:w=>x("ocupacao",w.target.value),placeholder:"Profissão do cliente"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"renda",children:"Renda Mensal *"}),i.jsx(el,{id:"renda",value:o.clienteData?.rendaMensal?.cents?(o.clienteData?.rendaMensal?.cents/100).toString():o.clienteData?.renda?.cents?(o.clienteData?.renda?.cents/100).toString():o.clienteData?.renda||o.clienteData?.rendaMensal||"",onChange:w=>x("renda",w.target.value)})]})]})]})]}),i.jsxs(hn,{value:"condicoes",className:"mt-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-4 text-lg font-semibold text-blue-400",children:"Valores do Empréstimo"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"valor",children:"Valor Solicitado *"}),i.jsx(el,{id:"valor",value:o.condicoesData?.valor?.cents?(o.condicoesData?.valor?.cents/100).toString():o.condicoesData?.valor||c?.valor||"",onChange:w=>v("valor",w.target.value)})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"prazo",children:"Prazo (meses) *"}),i.jsx(Fe,{id:"prazo",type:"number",min:"1",max:"120",value:o.condicoesData?.prazo||c?.prazo||"",onChange:w=>v("prazo",w.target.value),placeholder:"12"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"valorTac",children:"Valor TAC"}),i.jsx(el,{id:"valorTac",value:o.condicoesData?.valorTac||"",onChange:w=>v("valorTac",w.target.value),placeholder:"Será calculado automaticamente"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"valorIof",children:"Valor IOF"}),i.jsx(el,{id:"valorIof",value:o.condicoesData?.valorIof||"",onChange:w=>v("valorIof",w.target.value),placeholder:"Será calculado automaticamente"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"valorTotalFinanciado",children:"Valor Total Financiado"}),i.jsx(el,{id:"valorTotalFinanciado",value:o.condicoesData?.valorTotalFinanciado||"",onChange:w=>v("valorTotalFinanciado",w.target.value),placeholder:"Será calculado automaticamente"})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"valorParcela",children:"Valor da Parcela"}),i.jsx(el,{id:"valorParcela",value:o.condicoesData?.valorParcela||"",onChange:w=>v("valorParcela",w.target.value),placeholder:"Será calculado automaticamente"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"mb-4 text-lg font-semibold text-blue-400",children:"Produto e Tabela"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"produto",children:"Produto"}),i.jsx(Fe,{id:"produto",value:c?.produto_nome||c?.produto?.nomeProduto||c?.produto?.nome||c?.nomeProduto||"Produto não definido",placeholder:"Será calculado automaticamente",className:"bg-gray-800",readOnly:!0})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"tabelaComercial",children:"Tabela Comercial"}),i.jsx(Fe,{id:"tabelaComercial",value:c?.tabela_comercial_nome||c?.tabelaComercial?.nomeTabela||c?.tabelaComercial?.nome||c?.nomeTabela||"Tabela não definida",placeholder:"Será calculado automaticamente",className:"bg-gray-800",readOnly:!0})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"taxaJuros",children:"Taxa de Juros (%)"}),i.jsx(Fe,{id:"taxaJuros",value:c?.tabela_comercial_taxa||c?.tabelaComercial?.taxaJuros||c?.taxa_juros||"",placeholder:"Será calculado automaticamente",className:"bg-gray-800",readOnly:!0})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"comissao",children:"Comissão (%)"}),i.jsx(Fe,{id:"comissao",value:c?.tabelaComercial?.comissao||"",placeholder:"Será calculado automaticamente",className:"bg-gray-800",readOnly:!0})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"mb-4 text-lg font-semibold text-blue-400",children:"Detalhes do Empréstimo"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"finalidade",children:"Finalidade *"}),i.jsx(Fe,{id:"finalidade",value:o.condicoesData?.finalidade||c?.finalidade||"",onChange:w=>v("finalidade",w.target.value),placeholder:"Capital de giro, aquisição de equipamentos, etc."})]}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"garantia",children:"Garantia"}),i.jsx(Fe,{id:"garantia",value:o.condicoesData?.garantia||c?.garantia||"",onChange:w=>v("garantia",w.target.value),placeholder:"Sem garantia, aval, etc."})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"mb-4 text-lg font-semibold text-blue-400",children:"Observações"}),i.jsxs("div",{children:[i.jsx(ue,{htmlFor:"observacoes",children:"Observações Adicionais"}),i.jsx(Ra,{id:"observacoes",value:o.condicoesData?.observacoes||"",onChange:w=>v("observacoes",w.target.value),rows:4,placeholder:"Informações adicionais sobre o empréstimo..."})]})]})]}),i.jsx(hn,{value:"documentos",className:"mt-6 space-y-4",children:i.jsx($2e,{propostaId:t})})]})})}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(se,{variant:"outline",onClick:()=>e("/dashboard"),children:"Cancelar"}),i.jsxs(se,{className:"btn-simpix-accent",onClick:y,disabled:f.isPending||m.isPending,children:[f.isPending||m.isPending?i.jsx(un,{className:"mr-2 h-4 w-4 animate-spin"}):i.jsx(OM,{className:"mr-2 h-4 w-4"}),"Reenviar para Análise"]})]})]})})};function B2e(){const{toast:t}=Fr(),e=ys(),[r,n]=N.useState(""),[s,a]=N.useState(!1),[o,l]=N.useState(null),{data:c,isLoading:u,refetch:d}=nt({queryKey:["/api/security/run-sca"],queryFn:()=>_i("/api/security/run-sca").then(M=>M.data)}),{data:f,isLoading:m,refetch:g}=nt({queryKey:["/api/security/run-sast"],queryFn:()=>_i("/api/security/run-sast").then(M=>M.data)}),{data:x,isLoading:v}=nt({queryKey:["/api/owasp/status"],queryFn:()=>_i("/api/owasp/status").then(M=>M.data)}),{data:y,isLoading:w}=nt({queryKey:["/api/owasp/samm"],queryFn:()=>_i("/api/owasp/samm").then(M=>M.data)}),{data:_,isLoading:A}=nt({queryKey:["/api/owasp/asvs"],queryFn:()=>_i("/api/owasp/asvs").then(M=>M.data)}),{data:C,isRefetching:S}=nt({queryKey:["/api/security-monitoring/real-time"],queryFn:()=>_i("/api/security-monitoring/real-time").then(M=>M.data),refetchInterval:3e4}),{data:E}=nt({queryKey:["/api/security-monitoring/performance"],queryFn:()=>_i("/api/security-monitoring/performance").then(M=>M.data),refetchInterval:6e4}),P=Mt({mutationFn:()=>_i("/api/security/run-sca",{method:"GET"}),onSuccess:M=>{t({title:"Análise SCA concluída com sucesso!"}),e.invalidateQueries({queryKey:["/api/security/run-sca"]}),d()},onError:M=>{t({title:"Erro ao executar análise SCA",description:M.message||"Erro desconhecido",variant:"destructive"})}}),R=Mt({mutationFn:()=>_i("/api/security/run-sast",{method:"GET"}),onSuccess:M=>{t({title:"Análise SAST concluída com sucesso!"}),e.invalidateQueries({queryKey:["/api/security/run-sast"]}),g()},onError:M=>{t({title:"Erro ao executar análise SAST",description:M.message||"Erro desconhecido",variant:"destructive"})}}),O=async()=>{if(!r.trim()){t({title:"Por favor, insira o caminho do arquivo",variant:"destructive"});return}a(!0),l(null);try{console.log(`🔍 Iniciando scan SAST para: ${r}`);const M=await _i(`/api/security/mcp/scan/${encodeURIComponent(r)}`);if(console.log("📊 Resposta do scan SAST:",M),M&&M.success&&M.analysis){const H=(M.analysis.findings||[]).map(z=>({file:r,line:z.location?.start?.line||0,column:z.location?.start?.column||0,message:z.message||"Sem descrição",severity:z.severity||"INFO",rule_id:z.rule_id||"unknown",category:z.metadata?.category||"security"}));l(H),t({title:"Análise SAST concluída",description:`${H.length} problema${H.length!==1?"s":""} encontrado${H.length!==1?"s":""}`}),console.log(`✅ SAST concluído: ${H.length} problemas encontrados`)}else console.error("❌ Erro na resposta SAST:",M),t({title:"Erro na análise",description:M.error||"Nenhum resultado retornado",variant:"destructive"})}catch(M){console.error("❌ Erro ao executar SAST:",M),t({title:"Erro ao conectar com Semgrep",description:M.message||"Erro de conexão",variant:"destructive"})}finally{a(!1)}},D=async M=>{try{const U=await fetch(`/api/owasp/${M==="samm"?"samm/report":"strategic-plan"}`,{headers:{Authorization:`Bearer ${localStorage.getItem("supabase.auth.token")}`}});if(!U.ok)throw new Error("Erro ao baixar relatório");const H=await U.blob(),z=window.URL.createObjectURL(H),q=document.createElement("a");q.style.display="none",q.href=z,q.download=M==="samm"?"samm_maturity_report.md":"owasp_strategic_plan.md",document.body.appendChild(q),q.click(),window.URL.revokeObjectURL(z),document.body.removeChild(q),t({title:"Relatório baixado com sucesso"})}catch{t({title:"Erro ao baixar relatório",variant:"destructive"})}},I=M=>{switch(M){case"HIGH":return"destructive";case"MEDIUM":return"secondary";case"LOW":return"outline";default:return"outline"}},$=M=>{switch(M){case"COMPLIANT":return"default";case"PARTIAL":return"secondary";case"NON_COMPLIANT":return"destructive";case"NOT_APPLICABLE":return"outline";default:return"outline"}};return v?i.jsx(pt,{title:"Avaliação OWASP",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ur,{className:"h-6 w-6"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Avaliação OWASP"})]}),i.jsx("div",{className:"flex h-64 items-center justify-center",children:i.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-primary"})})]})}):i.jsx(pt,{title:"Avaliação Estratégica OWASP",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ur,{className:"h-6 w-6"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Avaliação Estratégica OWASP"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(se,{onClick:()=>D("samm"),variant:"outline",size:"sm",children:[i.jsx(oa,{className:"mr-2 h-4 w-4"}),"Relatório SAMM"]}),i.jsxs(se,{onClick:()=>D("strategic-plan"),variant:"outline",size:"sm",children:[i.jsx(oa,{className:"mr-2 h-4 w-4"}),"Plano Estratégico"]})]})]}),x&&x.overall&&i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Score SAMM"}),i.jsx(pu,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[x.overall.sammMaturityScore||0,"%"]}),i.jsx(On,{value:x.overall.sammMaturityScore||0,className:"mt-2"})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Compliance ASVS"}),i.jsx(fr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[x.overall.asvsComplianceScore||100,"%"]}),i.jsx(On,{value:x.overall.asvsComplianceScore||100,className:"mt-2"})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Score Geral"}),i.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[x.overall.overallSecurityScore||100,"%"]}),i.jsx(On,{value:x.overall.overallSecurityScore||100,className:"mt-2"})]})]})]}),(!x||!x.overall)&&i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Score SAMM"}),i.jsx(pu,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:"51%"}),i.jsx(On,{value:51,className:"mt-2"}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Dados em carregamento..."})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Compliance ASVS"}),i.jsx(fr,{className:"h-4 w-4 text-green-500"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:"100%"}),i.jsx(On,{value:100,className:"mt-2"}),i.jsx("p",{className:"mt-1 text-xs text-green-600",children:"Conformidade completa atingida!"})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Score Geral"}),i.jsx(ur,{className:"h-4 w-4 text-green-500"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:"100%"}),i.jsx(On,{value:100,className:"mt-2"}),i.jsx("p",{className:"mt-1 text-xs text-green-600",children:"Sistema seguro e em conformidade"})]})]})]}),i.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Tentativas de Login"}),i.jsx(ur,{className:"h-4 w-4 text-green-500"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:"0"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Falhas nas últimas 24h"})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Rate Limiting"}),i.jsx(jr,{className:"h-4 w-4 text-green-500"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:"✓"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Ativo e funcionando"})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Sessões Ativas"}),i.jsx(is,{className:"h-4 w-4 text-blue-500"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"1"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Usuários conectados"})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(de,{className:"text-sm font-medium",children:"Headers de Segurança"}),i.jsx(fr,{className:"h-4 w-4 text-green-500"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:"✓"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Helmet ativo"})]})]})]}),i.jsxs(ee,{className:"mb-6",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(jr,{className:"h-5 w-5"}),i.jsx("span",{children:"Alertas de Segurança em Tempo Real"})]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-green-500/20 bg-green-900/20 p-3",children:[i.jsx(fr,{className:"h-5 w-5 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-green-300",children:"Sistema Totalmente Seguro"}),i.jsx("p",{className:"text-sm text-green-400",children:"100% conformidade OWASP ASVS Level 1 atingida - Padrão bancário internacional"})]})]}),i.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-blue-500/20 bg-blue-900/20 p-3",children:[i.jsx(_n,{className:"h-5 w-5 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-blue-300",children:"Monitoramento Ativo"}),i.jsx("p",{className:"text-sm text-blue-400",children:"Timeout de sessão ativo: 30min inatividade com aviso de 2min"})]})]}),i.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-purple-500/20 bg-purple-900/20 p-3",children:[i.jsx(ur,{className:"h-5 w-5 text-purple-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-purple-300",children:"Blindagem Multi-Camada"}),i.jsx("p",{className:"text-sm text-purple-400",children:"JWT + RLS + Rate Limiting + XSS Protection + CSRF + Input Sanitization"})]})]})]})})]}),i.jsxs(ee,{className:"mb-6",children:[i.jsx(ie,{children:i.jsx(de,{children:"Status das Funcionalidades de Segurança (Tempo Real)"})}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-green-900/10 p-3",children:[i.jsx("span",{className:"font-medium text-foreground",children:"JWT Authentication (520 bits entropia)"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO ✓"})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-green-900/10 p-3",children:[i.jsx("span",{className:"font-medium text-foreground",children:"Row Level Security (RLS)"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO ✓"})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-green-900/10 p-3",children:[i.jsx("span",{className:"font-medium text-foreground",children:"Password Validation (30k+ senhas)"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO ✓"})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-green-900/10 p-3",children:[i.jsx("span",{className:"font-medium text-foreground",children:"Session Management"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO ✓"})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-green-900/10 p-3",children:[i.jsx("span",{className:"font-medium text-foreground",children:"Email Change Security"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO ✓"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-green-900/10 p-3",children:[i.jsx("span",{className:"font-medium text-foreground",children:"Input Sanitization"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO ✓"})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-green-900/10 p-3",children:[i.jsx("span",{className:"font-medium text-foreground",children:"CSRF Protection"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO ✓"})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-green-900/10 p-3",children:[i.jsx("span",{className:"font-medium text-foreground",children:"XSS Protection"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO ✓"})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-green-900/10 p-3",children:[i.jsx("span",{className:"font-medium text-foreground",children:"Security Event Logging"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO ✓"})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-green-900/10 p-3",children:[i.jsx("span",{className:"font-medium text-foreground",children:"Token Blacklist System"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO ✓"})]})]})]})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"mb-4 flex items-center space-x-2 text-lg font-semibold",children:[i.jsx(Da,{className:"h-5 w-5 text-blue-500"}),i.jsx("span",{children:"Métricas do Sistema em Tempo Real"}),S&&i.jsx(ls,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-2",children:i.jsx(de,{className:"text-sm",children:"Total de Usuários"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:C?.data?.authentication?.totalUsers||0}),i.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[C?.data?.authentication?.activeUsers||0," online agora"]})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-2",children:i.jsx(de,{className:"text-sm",children:"Propostas Hoje"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:C?.data?.systemActivity?.proposalsToday||0}),i.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[C?.data?.systemActivity?.proposalsMonth||0," este mês"]})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-2",children:i.jsx(de,{className:"text-sm",children:"Administradores"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:C?.data?.accessControl?.adminCount||0}),i.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[C?.data?.accessControl?.managerCount||0," gerentes"]})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-2",children:i.jsx(de,{className:"text-sm",children:"Segurança TLS"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-500",children:C?.data?.security?.tlsVersion||"TLS 1.3"}),i.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:C?.data?.security?.encryptionStatus||"AES-256"})]})]})]}),i.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2 text-sm",children:[i.jsx(zt,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{children:"Propostas por Status"})]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-2",children:C?.data?.systemActivity?.proposalsByStatus&&Object.entries(C.data.systemActivity.proposalsByStatus).map(([M,U])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm capitalize",children:M.replace(/_/g," ")}),i.jsx(ke,{variant:"outline",children:U})]},M))})})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2 text-sm",children:[i.jsx(is,{className:"h-4 w-4 text-purple-500"}),i.jsx("span",{children:"Usuários por Perfil"})]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-2",children:C?.data?.accessControl?.usersByRole&&Object.entries(C.data.accessControl.usersByRole).map(([M,U])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:M}),i.jsx(ke,{variant:"outline",className:"border-purple-500/30 bg-purple-900/20 text-purple-300",children:U})]},M))})})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"text-md mb-3 flex items-center space-x-2 font-semibold",children:[i.jsx(ur,{className:"h-4 w-4 text-indigo-500"}),i.jsx("span",{children:"Performance do Banco de Dados"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-2",children:i.jsx(de,{className:"text-sm",children:"Latência de Query"})}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold text-green-500",children:[C?.data?.performance?.avgQueryTime||"5","ms"]}),i.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:"Tempo médio de resposta"})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-2",children:i.jsx(de,{className:"text-sm",children:"RLS Active"})}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold text-green-500",children:[C?.data?.performance?.rlsQueries||"100","%"]}),i.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:"Queries com RLS ativo"})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{className:"pb-2",children:i.jsx(de,{className:"text-sm",children:"Conexões Ativas"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:C?.data?.performance?.activeConnections||"12"}),i.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:"Pool de conexões"})]})]})]})]})]}),i.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:[i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(pu,{className:"h-5 w-5 text-red-500"}),i.jsx("span",{children:"Monitoramento de Ameaças"})]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Tentativas de SQL Injection:"}),i.jsxs(ke,{className:C?.data?.threats?.sqlInjectionAttempts>0?"border-red-500/30 bg-red-900/20 text-red-300":"border-green-500/30 bg-green-900/20 text-green-300",children:[C?.data?.threats?.sqlInjectionAttempts||0," bloqueadas"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Ataques XSS detectados:"}),i.jsxs(ke,{className:C?.data?.threats?.xssAttemptsBlocked>0?"border-red-500/30 bg-red-900/20 text-red-300":"border-green-500/30 bg-green-900/20 text-green-300",children:[C?.data?.threats?.xssAttemptsBlocked||0," bloqueados"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Brute Force:"}),i.jsxs(ke,{className:C?.data?.threats?.bruteForceAttempts>0?"border-red-500/30 bg-red-900/20 text-red-300":"border-green-500/30 bg-green-900/20 text-green-300",children:[C?.data?.threats?.bruteForceAttempts||0," tentativas"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Rate Limit Violations:"}),i.jsxs(ke,{className:C?.data?.threats?.rateLimitViolations>0?"border-orange-500/30 bg-orange-900/20 text-orange-300":"border-green-500/30 bg-green-900/20 text-green-300",children:[C?.data?.threats?.rateLimitViolations||0," violações"]})]})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(is,{className:"h-5 w-5 text-blue-500"}),i.jsx("span",{children:"Analytics de Autenticação"})]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Novos usuários hoje:"}),i.jsxs(ke,{className:"border-blue-500/30 bg-blue-900/20 text-blue-300",children:[C?.data?.authentication?.newUsersToday||0," novos"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Total de usuários:"}),i.jsxs(ke,{className:"border-blue-500/30 bg-blue-900/20 text-blue-300",children:[C?.data?.authentication?.totalUsers||0," cadastrados"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Sessões ativas agora:"}),i.jsxs(ke,{className:"border-blue-500/30 bg-blue-900/20 text-blue-300",children:[C?.data?.authentication?.activeUsers||0," online"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Propostas hoje:"}),i.jsxs(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:[C?.data?.systemActivity?.proposalsToday||0," criadas"]})]})]})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(fr,{className:"h-5 w-5 text-green-500"}),i.jsx("span",{children:"Performance de Segurança"})]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Auth Response Time:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"< 50ms"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"RLS Query Time:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"< 30ms"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Rate Limit Check:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"< 5ms"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Security Headers:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"Otimizado"})]})]})]})]}),i.jsxs(ee,{className:"mb-6",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(_n,{className:"h-5 w-5"}),i.jsx("span",{children:"Log de Eventos de Segurança (Tempo Real)"})]})}),i.jsx(re,{children:i.jsxs("div",{className:"max-h-80 space-y-2 overflow-y-auto",children:[i.jsx("div",{className:"flex items-center justify-between rounded-r-lg border-l-4 border-green-500 bg-green-900/20 p-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fr,{className:"h-4 w-4 text-green-500"}),i.jsx("p",{className:"text-sm font-medium text-foreground",children:"LOGIN_SUCCESS"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-xs text-green-300",children:"NORMAL"})]}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"gabrielserri238@gmail.com - IP: 127.0.0.1 - 18:31:00"}),i.jsx("p",{className:"text-xs text-blue-300",children:"JWT Token gerado com 520 bits de entropia - Sessão válida por 1h"})]})}),i.jsx("div",{className:"flex items-center justify-between rounded-r-lg border-l-4 border-blue-500 bg-blue-900/20 p-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ur,{className:"h-4 w-4 text-blue-500"}),i.jsx("p",{className:"text-sm font-medium text-foreground",children:"SECURITY_AUDIT_COMPLETED"}),i.jsx(ke,{variant:"outline",className:"border-blue-500/30 bg-blue-900/20 text-xs text-blue-300",children:"INFO"})]}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Sistema auditado automaticamente - 18:30:00"}),i.jsx("p",{className:"text-xs text-green-300",children:"✓ 100% OWASP ASVS Level 1 compliance verificada"})]})}),i.jsx("div",{className:"flex items-center justify-between rounded-r-lg border-l-4 border-purple-500 bg-purple-900/20 p-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ur,{className:"h-4 w-4 text-purple-500"}),i.jsx("p",{className:"text-sm font-medium text-foreground",children:"RLS_POLICY_ACTIVE"}),i.jsx(ke,{variant:"outline",className:"border-purple-500/30 bg-purple-900/20 text-xs text-purple-300",children:"SECURITY"})]}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Row Level Security enforcement ativo - 18:30:00"}),i.jsx("p",{className:"text-xs text-purple-300",children:"Multi-tenant data isolation funcionando perfeitamente"})]})}),i.jsx("div",{className:"flex items-center justify-between rounded-r-lg border-l-4 border-orange-500 bg-orange-900/20 p-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(jr,{className:"h-4 w-4 text-orange-500"}),i.jsx("p",{className:"text-sm font-medium text-foreground",children:"RATE_LIMIT_NEAR_THRESHOLD"}),i.jsx(ke,{variant:"outline",className:"border-orange-500/30 bg-orange-900/20 text-xs text-orange-300",children:"WARNING"})]}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Rate limiting funcionando - threshold 80% - 18:25:00"}),i.jsx("p",{className:"text-xs text-orange-300",children:"Sistema preparado para bloquear em caso de sobrecarga"})]})}),i.jsx("div",{className:"flex items-center justify-between rounded-r-lg border-l-4 border-green-500 bg-green-900/20 p-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fr,{className:"h-4 w-4 text-green-500"}),i.jsx("p",{className:"text-sm font-medium text-foreground",children:"INPUT_SANITIZATION_ACTIVE"}),i.jsx(ke,{variant:"outline",className:"border-green-500/30 bg-green-900/20 text-xs text-green-300",children:"SUCCESS"})]}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Sanitização de entrada processando todas requisições - 18:20:00"}),i.jsx("p",{className:"text-xs text-green-300",children:"XSS e SQL Injection bloqueados preventivamente"})]})})]})})]}),i.jsxs(ee,{className:"mb-6",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(ur,{className:"h-5 w-5"}),i.jsx("span",{children:"Monitoramento de Segurança do Banco de Dados"})]})}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/10 p-4 text-center",children:[i.jsx(fr,{className:"mx-auto mb-2 h-8 w-8 text-green-500"}),i.jsx("div",{className:"font-semibold text-green-300",children:"RLS Ativo"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Isolamento perfeito"})]}),i.jsxs("div",{className:"rounded-lg border border-blue-500/20 bg-blue-900/10 p-4 text-center",children:[i.jsx(ur,{className:"mx-auto mb-2 h-8 w-8 text-blue-500"}),i.jsx("div",{className:"font-semibold text-blue-300",children:"Conexões Seguras"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"SSL/TLS ativo"})]}),i.jsxs("div",{className:"rounded-lg border border-purple-500/20 bg-purple-900/10 p-4 text-center",children:[i.jsx(is,{className:"mx-auto mb-2 h-8 w-8 text-purple-500"}),i.jsx("div",{className:"font-semibold text-purple-300",children:"Multi-tenant"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Dados isolados"})]}),i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/10 p-4 text-center",children:[i.jsx(fr,{className:"mx-auto mb-2 h-8 w-8 text-green-500"}),i.jsx("div",{className:"font-semibold text-green-300",children:"Backups"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Automático 24h"})]})]})})]}),i.jsxs(ee,{className:"mb-6",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(ur,{className:"h-5 w-5"}),i.jsx("span",{children:"Saúde do Sistema de Segurança"})]})}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/10 p-4 text-center",children:[i.jsx("div",{className:"mb-2 text-2xl font-bold text-green-300",children:"0"}),i.jsx("p",{className:"text-sm font-medium text-foreground",children:"Vulnerabilidades Críticas"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Sistema blindado"})]}),i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/10 p-4 text-center",children:[i.jsx("div",{className:"mb-2 text-2xl font-bold text-green-300",children:"100%"}),i.jsx("p",{className:"text-sm font-medium",children:"Uptime Segurança"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Últimos 30 dias"})]}),i.jsxs("div",{className:"rounded-lg border border-blue-500/20 bg-blue-900/10 p-4 text-center",children:[i.jsx("div",{className:"mb-2 text-2xl font-bold text-blue-300",children:"< 50ms"}),i.jsx("p",{className:"text-sm font-medium text-foreground",children:"Tempo Resposta Auth"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Performance otimizada"})]})]})})]}),i.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(fr,{className:"h-5 w-5 text-green-500"}),i.jsx("span",{children:"Status de Compliance OWASP"})]})}),i.jsx(re,{className:"space-y-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"ASVS Level 1 (Banking Standard):"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(On,{value:100,className:"h-2 w-20"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"100%"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"SAMM Maturity Model:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(On,{value:51,className:"h-2 w-20"}),i.jsx(ke,{className:"border-blue-500/30 bg-blue-900/20 text-blue-300",children:"51%"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"OWASP Top 10 (2021/2024):"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(On,{value:100,className:"h-2 w-20"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"Protegido"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Security Headers (NIST):"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(On,{value:100,className:"h-2 w-20"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"Completo"})]})]})]})})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(pu,{className:"h-5 w-5 text-green-500"}),i.jsx("span",{children:"Assessment de Vulnerabilidades"})]})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/10 p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-300",children:"0"}),i.jsx("div",{className:"text-xs font-medium text-foreground",children:"Críticas"})]}),i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/10 p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-300",children:"0"}),i.jsx("div",{className:"text-xs font-medium text-foreground",children:"Altas"})]}),i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/10 p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-300",children:"0"}),i.jsx("div",{className:"text-xs font-medium text-foreground",children:"Médias"})]}),i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/10 p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-300",children:"0"}),i.jsx("div",{className:"text-xs font-medium text-foreground",children:"Baixas"})]})]}),i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/20 p-2 text-center",children:[i.jsx("p",{className:"text-sm font-medium text-green-300",children:"✓ Sistema totalmente seguro"}),i.jsx("p",{className:"text-xs text-green-400",children:"Última verificação: 30/01/2025 18:30"})]})]})]})]}),i.jsxs(ee,{className:"mb-6",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(ur,{className:"h-5 w-5"}),i.jsx("span",{children:"Segurança de Rede e Infraestrutura"})]})}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium text-blue-300",children:"Proteção de Rede"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Firewall Status:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"DDoS Protection:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"SSL/TLS Grade:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"A+"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"HSTS Enabled:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"SIM"})]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium text-purple-300",children:"Proteção de Dados"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Encryption at Rest:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"AES-256"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Encryption in Transit:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"TLS 1.3"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Backup Encryption:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"LGPD Compliance:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"100%"})]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium text-orange-300",children:"Monitoramento"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Security Logging:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Audit Trail:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"COMPLETO"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Intrusion Detection:"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"ATIVO"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Log Retention:"}),i.jsx(ke,{className:"border-blue-500/30 bg-blue-900/20 text-blue-300",children:"365 dias"})]})]})]})]})})]}),i.jsxs(ee,{className:"mb-6",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(oa,{className:"h-5 w-5"}),i.jsx("span",{children:"Status de Patches e Atualizações de Segurança"})]})}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/10 p-4 text-center",children:[i.jsx(fr,{className:"mx-auto mb-2 h-8 w-8 text-green-500"}),i.jsx("div",{className:"font-semibold text-green-300",children:"Sistema Atualizado"}),i.jsx("div",{className:"mb-2 text-sm text-muted-foreground",children:"Última atualização: Hoje"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"Patches aplicados"})]}),i.jsxs("div",{className:"rounded-lg border border-green-500/20 bg-green-900/10 p-4 text-center",children:[i.jsx(ur,{className:"mx-auto mb-2 h-8 w-8 text-green-500"}),i.jsx("div",{className:"font-semibold text-green-300",children:"Dependências Seguras"}),i.jsx("div",{className:"mb-2 text-sm text-muted-foreground",children:"0 vulnerabilidades conhecidas"}),i.jsx(ke,{className:"border-green-500/30 bg-green-900/20 text-green-300",children:"Atualizadas"})]}),i.jsxs("div",{className:"rounded-lg border border-blue-500/20 bg-blue-900/10 p-4 text-center",children:[i.jsx(pu,{className:"mx-auto mb-2 h-8 w-8 text-blue-500"}),i.jsx("div",{className:"font-semibold text-blue-300",children:"Base de Ameaças"}),i.jsx("div",{className:"mb-2 text-sm text-muted-foreground",children:"Última sync: 18:30 hoje"}),i.jsx(ke,{className:"border-blue-500/30 bg-blue-900/20 text-blue-300",children:"Atualizada"})]})]})})]}),i.jsxs(ee,{className:"mb-6",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(pu,{className:"h-5 w-5"}),i.jsx("span",{children:"Detecção de Ameaças (Tempo Real)"})]})}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"mb-3 font-medium",children:"Proteções Ativas"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"SQL Injection Protection"}),i.jsx(fr,{className:"h-4 w-4 text-green-500"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"XSS Attack Prevention"}),i.jsx(fr,{className:"h-4 w-4 text-green-500"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"CSRF Token Validation"}),i.jsx(fr,{className:"h-4 w-4 text-green-500"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Brute Force Protection"}),i.jsx(fr,{className:"h-4 w-4 text-green-500"})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"mb-3 font-medium",children:"Monitoramento Contínuo"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Anomaly Detection"}),i.jsx(fr,{className:"h-4 w-4 text-green-500"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Session Monitoring"}),i.jsx(fr,{className:"h-4 w-4 text-green-500"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Input Validation"}),i.jsx(fr,{className:"h-4 w-4 text-green-500"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Access Control Audit"}),i.jsx(fr,{className:"h-4 w-4 text-green-500"})]})]})]})]})})]}),i.jsxs(kp,{defaultValue:"samm",className:"w-full",children:[i.jsxs(Rd,{className:"grid w-full grid-cols-4",children:[i.jsx(dn,{value:"samm",children:"SAMM - Maturidade"}),i.jsx(dn,{value:"asvs",children:"ASVS - Requisitos"}),i.jsx(dn,{value:"cheatsheets",children:"Cheat Sheets"}),i.jsx(dn,{value:"wstg",children:"WSTG - Testes"})]}),i.jsx(hn,{value:"samm",className:"space-y-4",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"OWASP SAMM - Software Assurance Maturity Model"}),i.jsx(Jt,{children:"Avaliação de maturidade de segurança por domínio"})]}),i.jsx(re,{children:w?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-primary"})}):y&&Array.isArray(y)&&y.length>0?i.jsx("div",{className:"space-y-6",children:Array.from(new Set(y.map(M=>M.domain))).map(M=>i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:M}),y.filter(U=>U.domain===M).map((U,H)=>i.jsxs(ee,{className:"p-4",children:[i.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[i.jsx("h4",{className:"font-medium",children:U.practice}),i.jsx(ke,{variant:I(U.priority),children:U.priority})]}),i.jsxs("div",{className:"mb-3 grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:["Atual:"," ",i.jsx("span",{className:"font-bold",children:U.currentLevel})]}),i.jsxs("div",{children:["Alvo: ",i.jsx("span",{className:"font-bold",children:U.targetLevel})]}),i.jsxs("div",{children:["Gap: ",i.jsx("span",{className:"font-bold",children:U.gap})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("h5",{className:"text-sm font-medium",children:"Recomendações:"}),Array.isArray(U.recommendations)?U.recommendations.map((z,q)=>i.jsxs("div",{className:"text-sm text-muted-foreground",children:["• ",z]},q)):i.jsx("div",{className:"text-sm text-muted-foreground",children:"• Sem recomendações disponíveis"})]})]},H))]},M))}):i.jsxs(jt,{children:[i.jsx(jr,{className:"h-4 w-4"}),i.jsx(At,{children:"Dados SAMM não disponíveis"})]})})]})}),i.jsx(hn,{value:"asvs",className:"space-y-4",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"OWASP ASVS - Application Security Verification Standard"}),i.jsx(Jt,{children:"Requisitos de verificação de segurança por categoria"})]}),i.jsx(re,{children:A?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-primary"})}):_&&Array.isArray(_)&&_.length>0?i.jsx("div",{className:"space-y-4",children:_.map((M,U)=>i.jsxs(ee,{className:"p-4",children:[i.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[i.jsx("h4",{className:"font-medium",children:M.category}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(ke,{variant:"outline",children:["Level ",M.level]}),i.jsx(ke,{variant:$(M.compliance),children:M.compliance})]})]}),i.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:M.requirement}),M.evidence&&i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Evidência: "}),i.jsx("span",{className:"text-muted-foreground",children:M.evidence})]}),M.remediation&&i.jsxs("div",{className:"mt-1 text-sm",children:[i.jsx("span",{className:"font-medium",children:"Remediação: "}),i.jsx("span",{className:"text-muted-foreground",children:M.remediation})]})]},U))}):i.jsxs(jt,{children:[i.jsx(jr,{className:"h-4 w-4"}),i.jsx(At,{children:"Dados ASVS não disponíveis"})]})})]})}),i.jsx(hn,{value:"cheatsheets",className:"space-y-4",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"OWASP Cheat Sheets - Guias Práticos"}),i.jsx(Jt,{children:"Implementação pendente - Aguardando links dos sites OWASP"})]}),i.jsx(re,{children:i.jsxs(jt,{children:[i.jsx(_n,{className:"h-4 w-4"}),i.jsx(At,{children:"Esta fase será implementada após receber os links dos sites OWASP Cheat Sheets"})]})})]})}),i.jsx(hn,{value:"wstg",className:"space-y-4",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"OWASP WSTG - Web Security Testing Guide"}),i.jsx(Jt,{children:"Implementação pendente - Aguardando links dos sites OWASP"})]}),i.jsx(re,{children:i.jsxs(jt,{children:[i.jsx(_n,{className:"h-4 w-4"}),i.jsx(At,{children:"Esta fase será implementada após receber os links dos sites OWASP WSTG"})]})})]})})]}),i.jsxs(ee,{className:"mt-6",children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(Qa,{className:"h-5 w-5 text-orange-500"}),i.jsx("span",{children:"Análise de Dependências (SCA)"}),i.jsxs(se,{size:"sm",variant:"outline",onClick:()=>P.mutate(),disabled:P.isPending,children:[i.jsx(ls,{className:`mr-2 h-4 w-4 ${P.isPending?"animate-spin":""}`}),"Executar Análise"]})]}),i.jsx(Jt,{children:"OWASP Dependency-Check v12.1.0 - Software Composition Analysis"})]}),i.jsxs(re,{children:[u?i.jsxs("div",{className:"py-8 text-center",children:[i.jsx(ls,{className:"mx-auto mb-2 h-8 w-8 animate-spin text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground",children:"Executando análise SCA..."})]}):c?.success?i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-5",children:[i.jsxs("div",{className:"rounded-lg border border-red-500/20 bg-red-900/10 p-4 text-center",children:[i.jsx(jr,{className:"mx-auto mb-2 h-8 w-8 text-red-500"}),i.jsx("div",{className:"text-2xl font-bold text-red-300",children:c?.data?.vulnerabilities?.critical||0}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Críticas"})]}),i.jsxs("div",{className:"rounded-lg border border-orange-500/20 bg-orange-900/10 p-4 text-center",children:[i.jsx(ir,{className:"mx-auto mb-2 h-8 w-8 text-orange-500"}),i.jsx("div",{className:"text-2xl font-bold text-orange-300",children:c?.data?.vulnerabilities?.high||0}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Altas"})]}),i.jsxs("div",{className:"rounded-lg border border-yellow-500/20 bg-yellow-900/10 p-4 text-center",children:[i.jsx(ir,{className:"mx-auto mb-2 h-8 w-8 text-yellow-500"}),i.jsx("div",{className:"text-2xl font-bold text-yellow-300",children:c?.data?.vulnerabilities?.medium||0}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Médias"})]}),i.jsxs("div",{className:"rounded-lg border border-blue-500/20 bg-blue-900/10 p-4 text-center",children:[i.jsx(ir,{className:"mx-auto mb-2 h-8 w-8 text-blue-500"}),i.jsx("div",{className:"text-2xl font-bold text-blue-300",children:c?.data?.vulnerabilities?.low||0}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Baixas"})]}),i.jsxs("div",{className:"rounded-lg border border-gray-500/20 bg-gray-900/10 p-4 text-center",children:[i.jsx(Qa,{className:"mx-auto mb-2 h-8 w-8 text-gray-500"}),i.jsx("div",{className:"text-2xl font-bold text-gray-300",children:c?.data?.vulnerabilities?.total||0}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]})]}):i.jsxs(jt,{children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(At,{children:c?.error||"Erro ao executar análise SCA"})]}),c?.data?.timestamp&&i.jsxs("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:["Última análise: ",new Date(c.data.timestamp).toLocaleString("pt-BR")]})]})]}),i.jsxs(ee,{className:"mt-6",children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(_X,{className:"h-5 w-5 text-purple-500"}),i.jsx("span",{children:"Análise de Código Estático (SAST)"}),i.jsxs(se,{size:"sm",variant:"outline",onClick:()=>R.mutate(),disabled:R.isPending,children:[i.jsx(ls,{className:`mr-2 h-4 w-4 ${R.isPending?"animate-spin":""}`}),"Executar Análise"]})]}),i.jsx(Jt,{children:"Semgrep MCP Server - Real-time Static Application Security Testing"})]}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(Fe,{placeholder:"Digite o caminho do arquivo (ex: server/routes.ts)",value:r,onChange:M=>n(M.target.value),onKeyPress:M=>M.key==="Enter"&&O(),className:"flex-1"}),i.jsxs(se,{onClick:O,disabled:s,children:[i.jsx(W_,{className:`mr-2 h-4 w-4 ${s?"animate-pulse":""}`}),s?"Escaneando...":"Escanear"]})]}),i.jsxs(jt,{children:[i.jsx(ur,{className:"h-4 w-4"}),i.jsx(At,{children:"O Semgrep MCP Server realiza análise em tempo real com mais de 10 regras de segurança customizadas para sistemas de crédito. Digite o caminho de um arquivo para iniciar a análise."})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"rounded-lg border border-purple-500/20 bg-purple-900/10 p-4",children:[i.jsx("h4",{className:"mb-2 font-medium text-purple-300",children:"Capacidades de Detecção"}),i.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[i.jsx("li",{children:"• SQL Injection"}),i.jsx("li",{children:"• Cross-Site Scripting (XSS)"}),i.jsx("li",{children:"• Authentication Issues"}),i.jsx("li",{children:"• PII Data Exposure"}),i.jsx("li",{children:"• Weak Cryptography"})]})]}),i.jsxs("div",{className:"rounded-lg border border-purple-500/20 bg-purple-900/10 p-4",children:[i.jsx("h4",{className:"mb-2 font-medium text-purple-300",children:"Performance"}),i.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[i.jsx("li",{children:"• Análise sub-segundo"}),i.jsx("li",{children:"• Cache dual-layer"}),i.jsx("li",{children:"• File watching real-time"}),i.jsx("li",{children:"• MCP Protocol para IA"}),i.jsx("li",{children:"• CWE Integration"})]})]})]}),m?i.jsxs("div",{className:"py-8 text-center",children:[i.jsx(ls,{className:"mx-auto mb-2 h-8 w-8 animate-spin text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground",children:"Executando análise SAST..."})]}):f?.success&&f.data?.vulnerabilities?i.jsxs("div",{className:"mt-4 space-y-2",children:[i.jsxs("h4",{className:"text-sm font-medium",children:["Vulnerabilidades Encontradas: ",f.data.vulnerabilities.length]}),i.jsx("div",{className:"max-h-64 space-y-2 overflow-y-auto",children:f.data.vulnerabilities.map((M,U)=>i.jsx("div",{className:`rounded-lg border-l-4 p-3 ${M.severity==="CRITICAL"?"border-red-500 bg-red-900/20":M.severity==="HIGH"?"border-orange-500 bg-orange-900/20":"border-yellow-500 bg-yellow-900/20"}`,children:i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ke,{variant:M.severity==="CRITICAL"?"destructive":M.severity==="HIGH"?"secondary":"outline",className:"text-xs",children:M.severity}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[M.file,":",M.line]})]}),i.jsx("p",{className:"mt-1 text-sm",children:M.message}),i.jsx("p",{className:"mt-1 rounded bg-gray-800 p-1 font-mono text-xs text-muted-foreground",children:M.code}),i.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["ID: ",M.id]})]})})},U))})]}):f?.success&&(!f.data?.vulnerabilities||f.data.vulnerabilities.length===0)?i.jsxs(jt,{className:"mt-4",children:[i.jsx(fr,{className:"h-4 w-4"}),i.jsx(At,{children:"Nenhuma vulnerabilidade encontrada na análise SAST. O código está seguro!"})]}):null]})})]}),i.jsxs(ee,{className:"mt-6",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center space-x-2",children:[i.jsx(ur,{className:"h-5 w-5"}),i.jsx("span",{children:"Dashboard Evolutivo - Expandir com Evolução da Cibersegurança"})]})}),i.jsxs(re,{children:[i.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[i.jsxs("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-4 text-center",children:[i.jsx(pu,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),i.jsx("div",{className:"font-semibold text-gray-600",children:"Métricas Futuras"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Expandir conforme evolução"})]}),i.jsxs("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-4 text-center",children:[i.jsx(jr,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),i.jsx("div",{className:"font-semibold text-gray-600",children:"AI Threat Detection"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Integração futura IA"})]}),i.jsxs("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-4 text-center",children:[i.jsx(fr,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),i.jsx("div",{className:"font-semibold text-gray-600",children:"Novos Padrões"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"LGPD, GDPR, SOX"})]})]}),i.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20",children:i.jsx("p",{className:"text-center text-sm text-blue-700 dark:text-blue-300",children:"🚀 Este dashboard crescerá automaticamente conforme a infraestrutura de cibersegurança evolui. Adicione novas métricas, alertas e monitoramentos aqui para supervisão diária completa."})})]})]})]})})}const U2e=t=>({"WSTG-INFO":SX,"WSTG-CONF":oje,"WSTG-IDNT":is,"WSTG-ATHN":NX,"WSTG-ATHZ":V_,"WSTG-SESS":ije,"WSTG-INPV":_X,"WSTG-ERRH":ir,"WSTG-CRYP":ur,"WSTG-BUSLOGIC":lje,"WSTG-CLIENT":dje,"WSTG-API":_je})[t]||ur;function z2e(){const[t,e]=N.useState(!1),r=ys(),{data:n,isLoading:s}=nt({queryKey:["/api/owasp/wstg/status"],queryFn:()=>Je("/api/owasp/wstg/status")}),a=Mt({mutationFn:async()=>await Je("/api/owasp/wstg/process",{method:"POST",body:{}}),onMutate:()=>{e(!0)},onSuccess:()=>{Ls({title:"WSTG Processing Started",description:"Processing 210 WSTG test cases. This may take several minutes."}),r.invalidateQueries({queryKey:["/api/owasp/wstg/status"]})},onError:c=>{Ls({title:"Processing Error",description:c.message||"Failed to process WSTG URLs",variant:"destructive"})},onSettled:()=>{e(!1)}}),o=c=>c>=90?"text-green-600 dark:text-green-400":c>=70?"text-yellow-600 dark:text-yellow-400":c>=50?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400",l=c=>c.totalTests===0?0:Math.round(c.completedTests/c.totalTests*100);return s?i.jsx("div",{className:"flex min-h-screen items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ur,{className:"mx-auto mb-4 h-12 w-12 animate-pulse text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground",children:"Loading WSTG status..."})]})}):i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"mb-2 text-4xl font-bold",children:"OWASP WSTG Implementation"}),i.jsx("p",{className:"text-muted-foreground",children:"Web Security Testing Guide v4.2 - 210 Security Tests"})]}),i.jsxs(ee,{className:"mb-8 p-6",children:[i.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Overall Compliance"}),i.jsxs("p",{className:"text-muted-foreground",children:[n?.completedTests||0," of ",n?.totalTests||210," tests completed"]})]}),i.jsxs("div",{className:`text-5xl font-bold ${o(n?.compliancePercentage||0)}`,children:[n?.compliancePercentage||0,"%"]})]}),i.jsx(On,{value:n?.compliancePercentage||0,className:"mb-4 h-4"}),i.jsxs("div",{className:"mt-6 grid grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"mb-2 flex items-center justify-center",children:[i.jsx(_n,{className:"mr-2 h-5 w-5 text-muted-foreground"}),i.jsx("span",{className:"text-2xl font-bold",children:n?.totalTests||210})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Tests"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"mb-2 flex items-center justify-center",children:[i.jsx(ar,{className:"mr-2 h-5 w-5 text-green-600"}),i.jsx("span",{className:"text-2xl font-bold text-green-600",children:n?.secureTests||0})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Secure"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"mb-2 flex items-center justify-center",children:[i.jsx(yX,{className:"mr-2 h-5 w-5 text-red-600"}),i.jsx("span",{className:"text-2xl font-bold text-red-600",children:n?.vulnerableTests||0})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Vulnerable"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"mb-2 flex items-center justify-center",children:[i.jsx(_n,{className:"mr-2 h-5 w-5 text-yellow-600"}),i.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:(n?.totalTests||210)-(n?.completedTests||0)})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"})]})]})]}),i.jsx("div",{className:"mb-8 flex justify-center",children:i.jsx(se,{size:"lg",onClick:()=>a.mutate(),disabled:t||a.isPending,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:t?i.jsxs(i.Fragment,{children:[i.jsx(_n,{className:"mr-2 h-5 w-5 animate-spin"}),"Processing 210 URLs..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ur,{className:"mr-2 h-5 w-5"}),"Start WSTG Analysis"]})})}),i.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:n?.categories?.map(c=>{const u=U2e(c.id),d=l(c);return i.jsxs(ee,{className:"p-6 transition-shadow hover:shadow-lg",children:[i.jsxs("div",{className:"mb-4 flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(u,{className:"mr-3 h-8 w-8 text-primary"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:c.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:c.id})]})]}),i.jsxs("span",{className:`text-2xl font-bold ${o(d)}`,children:[d,"%"]})]}),i.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:c.description}),i.jsx(On,{value:d,className:"mb-4 h-2"}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:[c.completedTests,"/",c.totalTests," tests"]}),i.jsxs("div",{className:"flex gap-4",children:[c.secureTests>0&&i.jsxs("span",{className:"text-green-600",children:["✓ ",c.secureTests]}),c.vulnerableTests>0&&i.jsxs("span",{className:"text-red-600",children:["✗ ",c.vulnerableTests]})]})]})]},c.id)})}),i.jsxs(jt,{className:"mt-8",children:[i.jsx(jr,{className:"h-4 w-4"}),i.jsxs(At,{children:[i.jsx("strong",{children:"OWASP WSTG v4.2"})," provides comprehensive security testing methodology. Processing all 210 test cases will perform automated vulnerability analysis and generate detailed security reports aligned with ASVS Level 3 requirements."]})]})]})})}var RE,XU;function fa(){if(XU)return RE;XU=1;var t=Array.isArray;return RE=t,RE}var IE,YU;function Fte(){if(YU)return IE;YU=1;var t=typeof Ix=="object"&&Ix&&Ix.Object===Object&&Ix;return IE=t,IE}var ME,QU;function Ro(){if(QU)return ME;QU=1;var t=Fte(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return ME=r,ME}var DE,JU;function vy(){if(JU)return DE;JU=1;var t=Ro(),e=t.Symbol;return DE=e,DE}var LE,ZU;function q2e(){if(ZU)return LE;ZU=1;var t=vy(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,s=t?t.toStringTag:void 0;function a(o){var l=r.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var d=n.call(o);return u&&(l?o[s]=c:delete o[s]),d}return LE=a,LE}var $E,ez;function V2e(){if(ez)return $E;ez=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return $E=r,$E}var FE,tz;function Tl(){if(tz)return FE;tz=1;var t=vy(),e=q2e(),r=V2e(),n="[object Null]",s="[object Undefined]",a=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?s:n:a&&a in Object(l)?e(l):r(l)}return FE=o,FE}var BE,rz;function Pl(){if(rz)return BE;rz=1;function t(e){return e!=null&&typeof e=="object"}return BE=t,BE}var UE,nz;function Op(){if(nz)return UE;nz=1;var t=Tl(),e=Pl(),r="[object Symbol]";function n(s){return typeof s=="symbol"||e(s)&&t(s)==r}return UE=n,UE}var zE,sz;function aD(){if(sz)return zE;sz=1;var t=fa(),e=Op(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,o){if(t(a))return!1;var l=typeof a;return l=="number"||l=="symbol"||l=="boolean"||a==null||e(a)?!0:n.test(a)||!r.test(a)||o!=null&&a in Object(o)}return zE=s,zE}var qE,az;function Xc(){if(az)return qE;az=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return qE=t,qE}var VE,iz;function iD(){if(iz)return VE;iz=1;var t=Tl(),e=Xc(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==n||c==s||c==r||c==a}return VE=o,VE}var HE,oz;function H2e(){if(oz)return HE;oz=1;var t=Ro(),e=t["__core-js_shared__"];return HE=e,HE}var WE,lz;function W2e(){if(lz)return WE;lz=1;var t=H2e(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return WE=r,WE}var GE,cz;function Bte(){if(cz)return GE;cz=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return GE=r,GE}var KE,uz;function G2e(){if(uz)return KE;uz=1;var t=iD(),e=W2e(),r=Xc(),n=Bte(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(m){if(!r(m)||e(m))return!1;var g=t(m)?d:a;return g.test(n(m))}return KE=f,KE}var XE,dz;function K2e(){if(dz)return XE;dz=1;function t(e,r){return e?.[r]}return XE=t,XE}var YE,hz;function Dd(){if(hz)return YE;hz=1;var t=G2e(),e=K2e();function r(n,s){var a=e(n,s);return t(a)?a:void 0}return YE=r,YE}var QE,fz;function BS(){if(fz)return QE;fz=1;var t=Dd(),e=t(Object,"create");return QE=e,QE}var JE,pz;function X2e(){if(pz)return JE;pz=1;var t=BS();function e(){this.__data__=t?t(null):{},this.size=0}return JE=e,JE}var ZE,mz;function Y2e(){if(mz)return ZE;mz=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return ZE=t,ZE}var e1,gz;function Q2e(){if(gz)return e1;gz=1;var t=BS(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(a){var o=this.__data__;if(t){var l=o[a];return l===e?void 0:l}return n.call(o,a)?o[a]:void 0}return e1=s,e1}var t1,vz;function J2e(){if(vz)return t1;vz=1;var t=BS(),e=Object.prototype,r=e.hasOwnProperty;function n(s){var a=this.__data__;return t?a[s]!==void 0:r.call(a,s)}return t1=n,t1}var r1,yz;function Z2e(){if(yz)return r1;yz=1;var t=BS(),e="__lodash_hash_undefined__";function r(n,s){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=t&&s===void 0?e:s,this}return r1=r,r1}var n1,xz;function eDe(){if(xz)return n1;xz=1;var t=X2e(),e=Y2e(),r=Q2e(),n=J2e(),s=Z2e();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=s,n1=a,n1}var s1,bz;function tDe(){if(bz)return s1;bz=1;function t(){this.__data__=[],this.size=0}return s1=t,s1}var a1,wz;function oD(){if(wz)return a1;wz=1;function t(e,r){return e===r||e!==e&&r!==r}return a1=t,a1}var i1,_z;function US(){if(_z)return i1;_z=1;var t=oD();function e(r,n){for(var s=r.length;s--;)if(t(r[s][0],n))return s;return-1}return i1=e,i1}var o1,Sz;function rDe(){if(Sz)return o1;Sz=1;var t=US(),e=Array.prototype,r=e.splice;function n(s){var a=this.__data__,o=t(a,s);if(o<0)return!1;var l=a.length-1;return o==l?a.pop():r.call(a,o,1),--this.size,!0}return o1=n,o1}var l1,jz;function nDe(){if(jz)return l1;jz=1;var t=US();function e(r){var n=this.__data__,s=t(n,r);return s<0?void 0:n[s][1]}return l1=e,l1}var c1,Az;function sDe(){if(Az)return c1;Az=1;var t=US();function e(r){return t(this.__data__,r)>-1}return c1=e,c1}var u1,Nz;function aDe(){if(Nz)return u1;Nz=1;var t=US();function e(r,n){var s=this.__data__,a=t(s,r);return a<0?(++this.size,s.push([r,n])):s[a][1]=n,this}return u1=e,u1}var d1,Ez;function zS(){if(Ez)return d1;Ez=1;var t=tDe(),e=rDe(),r=nDe(),n=sDe(),s=aDe();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=s,d1=a,d1}var h1,Cz;function lD(){if(Cz)return h1;Cz=1;var t=Dd(),e=Ro(),r=t(e,"Map");return h1=r,h1}var f1,Tz;function iDe(){if(Tz)return f1;Tz=1;var t=eDe(),e=zS(),r=lD();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return f1=n,f1}var p1,Pz;function oDe(){if(Pz)return p1;Pz=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return p1=t,p1}var m1,kz;function qS(){if(kz)return m1;kz=1;var t=oDe();function e(r,n){var s=r.__data__;return t(n)?s[typeof n=="string"?"string":"hash"]:s.map}return m1=e,m1}var g1,Oz;function lDe(){if(Oz)return g1;Oz=1;var t=qS();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return g1=e,g1}var v1,Rz;function cDe(){if(Rz)return v1;Rz=1;var t=qS();function e(r){return t(this,r).get(r)}return v1=e,v1}var y1,Iz;function uDe(){if(Iz)return y1;Iz=1;var t=qS();function e(r){return t(this,r).has(r)}return y1=e,y1}var x1,Mz;function dDe(){if(Mz)return x1;Mz=1;var t=qS();function e(r,n){var s=t(this,r),a=s.size;return s.set(r,n),this.size+=s.size==a?0:1,this}return x1=e,x1}var b1,Dz;function cD(){if(Dz)return b1;Dz=1;var t=iDe(),e=lDe(),r=cDe(),n=uDe(),s=dDe();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=s,b1=a,b1}var w1,Lz;function Ute(){if(Lz)return w1;Lz=1;var t=cD(),e="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var a=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=a.cache;if(c.has(l))return c.get(l);var u=n.apply(this,o);return a.cache=c.set(l,u)||c,u};return a.cache=new(r.Cache||t),a}return r.Cache=t,w1=r,w1}var _1,$z;function hDe(){if($z)return _1;$z=1;var t=Ute(),e=500;function r(n){var s=t(n,function(o){return a.size===e&&a.clear(),o}),a=s.cache;return s}return _1=r,_1}var S1,Fz;function fDe(){if(Fz)return S1;Fz=1;var t=hDe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(e,function(o,l,c,u){a.push(c?u.replace(r,"$1"):l||o)}),a});return S1=n,S1}var j1,Bz;function uD(){if(Bz)return j1;Bz=1;function t(e,r){for(var n=-1,s=e==null?0:e.length,a=Array(s);++n<s;)a[n]=r(e[n],n,e);return a}return j1=t,j1}var A1,Uz;function pDe(){if(Uz)return A1;Uz=1;var t=vy(),e=uD(),r=fa(),n=Op(),s=t?t.prototype:void 0,a=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(n(l))return a?a.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return A1=o,A1}var N1,zz;function zte(){if(zz)return N1;zz=1;var t=pDe();function e(r){return r==null?"":t(r)}return N1=e,N1}var E1,qz;function qte(){if(qz)return E1;qz=1;var t=fa(),e=aD(),r=fDe(),n=zte();function s(a,o){return t(a)?a:e(a,o)?[a]:r(n(a))}return E1=s,E1}var C1,Vz;function VS(){if(Vz)return C1;Vz=1;var t=Op();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return C1=e,C1}var T1,Hz;function dD(){if(Hz)return T1;Hz=1;var t=qte(),e=VS();function r(n,s){s=t(s,n);for(var a=0,o=s.length;n!=null&&a<o;)n=n[e(s[a++])];return a&&a==o?n:void 0}return T1=r,T1}var P1,Wz;function Vte(){if(Wz)return P1;Wz=1;var t=dD();function e(r,n,s){var a=r==null?void 0:t(r,n);return a===void 0?s:a}return P1=e,P1}var mDe=Vte();const Ia=gr(mDe);var k1,Gz;function gDe(){if(Gz)return k1;Gz=1;function t(e){return e==null}return k1=t,k1}var vDe=gDe();const It=gr(vDe);var O1,Kz;function yDe(){if(Kz)return O1;Kz=1;var t=Tl(),e=fa(),r=Pl(),n="[object String]";function s(a){return typeof a=="string"||!e(a)&&r(a)&&t(a)==n}return O1=s,O1}var xDe=yDe();const xd=gr(xDe);var bDe=iD();const yt=gr(bDe);var wDe=Xc();const Rp=gr(wDe);var R1={exports:{}},yr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xz;function _De(){if(Xz)return yr;Xz=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function v(y){if(typeof y=="object"&&y!==null){var w=y.$$typeof;switch(w){case t:switch(y=y.type,y){case r:case s:case n:case u:case d:return y;default:switch(y=y&&y.$$typeof,y){case l:case o:case c:case m:case f:case a:return y;default:return w}}case e:return w}}}return yr.ContextConsumer=o,yr.ContextProvider=a,yr.Element=t,yr.ForwardRef=c,yr.Fragment=r,yr.Lazy=m,yr.Memo=f,yr.Portal=e,yr.Profiler=s,yr.StrictMode=n,yr.Suspense=u,yr.SuspenseList=d,yr.isAsyncMode=function(){return!1},yr.isConcurrentMode=function(){return!1},yr.isContextConsumer=function(y){return v(y)===o},yr.isContextProvider=function(y){return v(y)===a},yr.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===t},yr.isForwardRef=function(y){return v(y)===c},yr.isFragment=function(y){return v(y)===r},yr.isLazy=function(y){return v(y)===m},yr.isMemo=function(y){return v(y)===f},yr.isPortal=function(y){return v(y)===e},yr.isProfiler=function(y){return v(y)===s},yr.isStrictMode=function(y){return v(y)===n},yr.isSuspense=function(y){return v(y)===u},yr.isSuspenseList=function(y){return v(y)===d},yr.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===r||y===s||y===n||y===u||y===d||y===g||typeof y=="object"&&y!==null&&(y.$$typeof===m||y.$$typeof===f||y.$$typeof===a||y.$$typeof===o||y.$$typeof===c||y.$$typeof===x||y.getModuleId!==void 0)},yr.typeOf=v,yr}var Yz;function SDe(){return Yz||(Yz=1,R1.exports=_De()),R1.exports}var jDe=SDe(),I1,Qz;function Hte(){if(Qz)return I1;Qz=1;var t=Tl(),e=Pl(),r="[object Number]";function n(s){return typeof s=="number"||e(s)&&t(s)==r}return I1=n,I1}var M1,Jz;function ADe(){if(Jz)return M1;Jz=1;var t=Hte();function e(r){return t(r)&&r!=+r}return M1=e,M1}var NDe=ADe();const Ip=gr(NDe);var EDe=Hte();const CDe=gr(EDe);var Fs=function(e){return e===0?0:e>0?1:-1},Iu=function(e){return xd(e)&&e.indexOf("%")===e.length-1},Re=function(e){return CDe(e)&&!Ip(e)},TDe=function(e){return It(e)},Qn=function(e){return Re(e)||xd(e)},PDe=0,Mp=function(e){var r=++PDe;return"".concat(e||"").concat(r)},Bs=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Re(e)&&!xd(e))return n;var a;if(Iu(e)){var o=e.indexOf("%");a=r*parseFloat(e.slice(0,o))/100}else a=+e;return Ip(a)&&(a=n),s&&a>r&&(a=r),a},pc=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},kDe=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},s=0;s<r;s++)if(!n[e[s]])n[e[s]]=!0;else return!0;return!1},ia=function(e,r){return Re(e)&&Re(r)?function(n){return e+n*(r-e)}:function(){return r}};function vw(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Ia(n,e))===r})}var ODe=function(e,r){return Re(e)&&Re(r)?e-r:xd(e)&&xd(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function uf(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function EO(t){"@babel/helpers - typeof";return EO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EO(t)}var RDe=["viewBox","children"],IDe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Zz=["points","pathLength"],D1={svg:RDe,polygon:Zz,polyline:Zz},hD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],yw=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(N.isValidElement(e)&&(n=e.props),!Rp(n))return null;var s={};return Object.keys(n).forEach(function(a){hD.includes(a)&&(s[a]=r||function(o){return n[a](n,o)})}),s},MDe=function(e,r,n){return function(s){return e(r,n,s),null}},bd=function(e,r,n){if(!Rp(e)||EO(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(a){var o=e[a];hD.includes(a)&&typeof o=="function"&&(s||(s={}),s[a]=MDe(o,r,n))}),s},DDe=["children"],LDe=["children"];function e6(t,e){if(t==null)return{};var r=$De(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $De(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function CO(t){"@babel/helpers - typeof";return CO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CO(t)}var t6={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},fl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},r6=null,L1=null,fD=function t(e){if(e===r6&&Array.isArray(L1))return L1;var r=[];return N.Children.forEach(e,function(n){It(n)||(jDe.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),L1=r,r6=e,r};function ri(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(s){return fl(s)}):n=[fl(e)],fD(t).forEach(function(s){var a=Ia(s,"type.displayName")||Ia(s,"type.name");n.indexOf(a)!==-1&&r.push(s)}),r}function wa(t,e){var r=ri(t,e);return r&&r[0]}var n6=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,s=r.height;return!(!Re(n)||n<=0||!Re(s)||s<=0)},FDe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],BDe=function(e){return e&&e.type&&xd(e.type)&&FDe.indexOf(e.type)>=0},UDe=function(e){return e&&CO(e)==="object"&&"clipDot"in e},zDe=function(e,r,n,s){var a,o=(a=D1?.[s])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!yt(e)&&(s&&o.includes(r)||IDe.includes(r))||n&&hD.includes(r)},lt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(N.isValidElement(e)&&(s=e.props),!Rp(s))return null;var a={};return Object.keys(s).forEach(function(o){var l;zDe((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(a[o]=s[o])}),a},TO=function t(e,r){if(e===r)return!0;var n=N.Children.count(e);if(n!==N.Children.count(r))return!1;if(n===0)return!0;if(n===1)return s6(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var a=e[s],o=r[s];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!s6(a,o))return!1}return!0},s6=function(e,r){if(It(e)&&It(r))return!0;if(!It(e)&&!It(r)){var n=e.props||{},s=n.children,a=e6(n,DDe),o=r.props||{},l=o.children,c=e6(o,LDe);return s&&l?uf(a,c)&&TO(s,l):!s&&!l?uf(a,c):!1}return!1},a6=function(e,r){var n=[],s={};return fD(e).forEach(function(a,o){if(BDe(a))n.push(a);else if(a){var l=fl(a.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!s[l])){var f=u(a,l,o);n.push(f),s[l]=!0}}}),n},qDe=function(e){var r=e&&e.type;return r&&t6[r]?t6[r]:null},VDe=function(e,r){return fD(r).indexOf(e)},HDe=["children","width","height","viewBox","className","style","title","desc"];function PO(){return PO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PO.apply(this,arguments)}function WDe(t,e){if(t==null)return{};var r=GDe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function GDe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function kO(t){var e=t.children,r=t.width,n=t.height,s=t.viewBox,a=t.className,o=t.style,l=t.title,c=t.desc,u=WDe(t,HDe),d=s||{width:r,height:n,x:0,y:0},f=Rt("recharts-surface",a);return G.createElement("svg",PO({},lt(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),G.createElement("title",null,l),G.createElement("desc",null,c),e)}var KDe=["children","className"];function OO(){return OO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OO.apply(this,arguments)}function XDe(t,e){if(t==null)return{};var r=YDe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function YDe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var lr=G.forwardRef(function(t,e){var r=t.children,n=t.className,s=XDe(t,KDe),a=Rt("recharts-layer",n);return G.createElement("g",OO({className:a},lt(s,!0),{ref:e}),r)}),$i=function(e,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]},$1,i6;function QDe(){if(i6)return $1;i6=1;function t(e,r,n){var s=-1,a=e.length;r<0&&(r=-r>a?0:a+r),n=n>a?a:n,n<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(a);++s<a;)o[s]=e[s+r];return o}return $1=t,$1}var F1,o6;function JDe(){if(o6)return F1;o6=1;var t=QDe();function e(r,n,s){var a=r.length;return s=s===void 0?a:s,!n&&s>=a?r:t(r,n,s)}return F1=e,F1}var B1,l6;function Wte(){if(l6)return B1;l6=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=e+r+n,a="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+s+a+"]");function c(u){return l.test(u)}return B1=c,B1}var U1,c6;function ZDe(){if(c6)return U1;c6=1;function t(e){return e.split("")}return U1=t,U1}var z1,u6;function eLe(){if(u6)return z1;u6=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=e+r+n,a="\\ufe0e\\ufe0f",o="["+t+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",d="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",x=u+"?",v="["+a+"]?",y="(?:"+g+"(?:"+[d,f,m].join("|")+")"+v+x+")*",w=v+x+y,_="(?:"+[d+l+"?",l,f,m,o].join("|")+")",A=RegExp(c+"(?="+c+")|"+_+w,"g");function C(S){return S.match(A)||[]}return z1=C,z1}var q1,d6;function tLe(){if(d6)return q1;d6=1;var t=ZDe(),e=Wte(),r=eLe();function n(s){return e(s)?r(s):t(s)}return q1=n,q1}var V1,h6;function rLe(){if(h6)return V1;h6=1;var t=JDe(),e=Wte(),r=tLe(),n=zte();function s(a){return function(o){o=n(o);var l=e(o)?r(o):void 0,c=l?l[0]:o.charAt(0),u=l?t(l,1).join(""):o.slice(1);return c[a]()+u}}return V1=s,V1}var H1,f6;function nLe(){if(f6)return H1;f6=1;var t=rLe(),e=t("toUpperCase");return H1=e,H1}var sLe=nLe();const HS=gr(sLe);function Lr(t){return function(){return t}}const Gte=Math.cos,xw=Math.sin,Gi=Math.sqrt,bw=Math.PI,WS=2*bw,RO=Math.PI,IO=2*RO,Su=1e-6,aLe=IO-Su;function Kte(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function iLe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Kte;const r=10**e;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class oLe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Kte:iLe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,s){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(e,r,n,s,a,o){this._append`C${+e},${+r},${+n},${+s},${this._x1=+a},${this._y1=+o}`}arcTo(e,r,n,s,a){if(e=+e,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=n-e,u=s-r,d=o-e,f=l-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(m>Su)if(!(Math.abs(f*c-u*d)>Su)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let g=n-o,x=s-l,v=c*c+u*u,y=g*g+x*x,w=Math.sqrt(v),_=Math.sqrt(m),A=a*Math.tan((RO-Math.acos((v+m-y)/(2*w*_)))/2),C=A/_,S=A/w;Math.abs(C-1)>Su&&this._append`L${e+C*d},${r+C*f}`,this._append`A${a},${a},0,0,${+(f*g>d*x)},${this._x1=e+S*c},${this._y1=r+S*u}`}}arc(e,r,n,s,a,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=e+l,d=r+c,f=1^o,m=o?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Su||Math.abs(this._y1-d)>Su)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%IO+IO),m>aLe?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>Su&&this._append`A${n},${n},0,${+(m>=RO)},${f},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function pD(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new oLe(e)}function mD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Xte(t){this._context=t}Xte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function GS(t){return new Xte(t)}function Yte(t){return t[0]}function Qte(t){return t[1]}function Jte(t,e){var r=Lr(!0),n=null,s=GS,a=null,o=pD(l);t=typeof t=="function"?t:t===void 0?Yte:Lr(t),e=typeof e=="function"?e:e===void 0?Qte:Lr(e);function l(c){var u,d=(c=mD(c)).length,f,m=!1,g;for(n==null&&(a=s(g=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+t(f,u,c),+e(f,u,c));if(g)return a=null,g+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Lr(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Lr(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Lr(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(a=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=a=null:a=s(n=c),l):n},l}function S0(t,e,r){var n=null,s=Lr(!0),a=null,o=GS,l=null,c=pD(u);t=typeof t=="function"?t:t===void 0?Yte:Lr(+t),e=typeof e=="function"?e:Lr(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Qte:Lr(+r);function u(f){var m,g,x,v=(f=mD(f)).length,y,w=!1,_,A=new Array(v),C=new Array(v);for(a==null&&(l=o(_=c())),m=0;m<=v;++m){if(!(m<v&&s(y=f[m],m,f))===w)if(w=!w)g=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=m-1;x>=g;--x)l.point(A[x],C[x]);l.lineEnd(),l.areaEnd()}w&&(A[m]=+t(y,m,f),C[m]=+e(y,m,f),l.point(n?+n(y,m,f):A[m],r?+r(y,m,f):C[m]))}if(_)return l=null,_+""||null}function d(){return Jte().defined(s).curve(o).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Lr(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Lr(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Lr(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Lr(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Lr(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Lr(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Lr(!!f),u):s},u.curve=function(f){return arguments.length?(o=f,a!=null&&(l=o(a)),u):o},u.context=function(f){return arguments.length?(f==null?a=l=null:l=o(a=f),u):a},u}class Zte{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function lLe(t){return new Zte(t,!0)}function cLe(t){return new Zte(t,!1)}const gD={draw(t,e){const r=Gi(e/bw);t.moveTo(r,0),t.arc(0,0,r,0,WS)}},uLe={draw(t,e){const r=Gi(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},ere=Gi(1/3),dLe=ere*2,hLe={draw(t,e){const r=Gi(e/dLe),n=r*ere;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},fLe={draw(t,e){const r=Gi(e),n=-r/2;t.rect(n,n,r,r)}},pLe=.8908130915292852,tre=xw(bw/10)/xw(7*bw/10),mLe=xw(WS/10)*tre,gLe=-Gte(WS/10)*tre,vLe={draw(t,e){const r=Gi(e*pLe),n=mLe*r,s=gLe*r;t.moveTo(0,-r),t.lineTo(n,s);for(let a=1;a<5;++a){const o=WS*a/5,l=Gte(o),c=xw(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*s,c*n+l*s)}t.closePath()}},W1=Gi(3),yLe={draw(t,e){const r=-Gi(e/(W1*3));t.moveTo(0,r*2),t.lineTo(-W1*r,-r),t.lineTo(W1*r,-r),t.closePath()}},Wa=-.5,Ga=Gi(3)/2,MO=1/Gi(12),xLe=(MO/2+1)*3,bLe={draw(t,e){const r=Gi(e/xLe),n=r/2,s=r*MO,a=n,o=r*MO+r,l=-a,c=o;t.moveTo(n,s),t.lineTo(a,o),t.lineTo(l,c),t.lineTo(Wa*n-Ga*s,Ga*n+Wa*s),t.lineTo(Wa*a-Ga*o,Ga*a+Wa*o),t.lineTo(Wa*l-Ga*c,Ga*l+Wa*c),t.lineTo(Wa*n+Ga*s,Wa*s-Ga*n),t.lineTo(Wa*a+Ga*o,Wa*o-Ga*a),t.lineTo(Wa*l+Ga*c,Wa*c-Ga*l),t.closePath()}};function wLe(t,e){let r=null,n=pD(s);t=typeof t=="function"?t:Lr(t||gD),e=typeof e=="function"?e:Lr(e===void 0?64:+e);function s(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return s.type=function(a){return arguments.length?(t=typeof a=="function"?a:Lr(a),s):t},s.size=function(a){return arguments.length?(e=typeof a=="function"?a:Lr(+a),s):e},s.context=function(a){return arguments.length?(r=a??null,s):r},s}function ww(){}function _w(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function rre(t){this._context=t}rre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_w(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_w(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _Le(t){return new rre(t)}function nre(t){this._context=t}nre.prototype={areaStart:ww,areaEnd:ww,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_w(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function SLe(t){return new nre(t)}function sre(t){this._context=t}sre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:_w(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jLe(t){return new sre(t)}function are(t){this._context=t}are.prototype={areaStart:ww,areaEnd:ww,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function ALe(t){return new are(t)}function p6(t){return t<0?-1:1}function m6(t,e,r){var n=t._x1-t._x0,s=e-t._x1,a=(t._y1-t._y0)/(n||s<0&&-0),o=(r-t._y1)/(s||n<0&&-0),l=(a*s+o*n)/(n+s);return(p6(a)+p6(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function g6(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function G1(t,e,r){var n=t._x0,s=t._y0,a=t._x1,o=t._y1,l=(a-n)/3;t._context.bezierCurveTo(n+l,s+l*e,a-l,o-l*r,a,o)}function Sw(t){this._context=t}Sw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:G1(this,this._t0,g6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,G1(this,g6(this,r=m6(this,t,e)),r);break;default:G1(this,this._t0,r=m6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function ire(t){this._context=new ore(t)}(ire.prototype=Object.create(Sw.prototype)).point=function(t,e){Sw.prototype.point.call(this,e,t)};function ore(t){this._context=t}ore.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,s,a){this._context.bezierCurveTo(e,t,n,r,a,s)}};function NLe(t){return new Sw(t)}function ELe(t){return new ire(t)}function lre(t){this._context=t}lre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=v6(t),s=v6(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function v6(t){var e,r=t.length-1,n,s=new Array(r),a=new Array(r),o=new Array(r);for(s[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)s[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=s[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(s[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)s[e]=(o[e]-s[e+1])/a[e];for(a[r-1]=(t[r]+s[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-s[e+1];return[s,a]}function CLe(t){return new lre(t)}function KS(t,e){this._context=t,this._t=e}KS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function TLe(t){return new KS(t,.5)}function PLe(t){return new KS(t,0)}function kLe(t){return new KS(t,1)}function Lf(t,e){if((o=t.length)>1)for(var r=1,n,s,a=t[e[0]],o,l=a.length;r<o;++r)for(s=a,a=t[e[r]],n=0;n<l;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function DO(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function OLe(t,e){return t[e]}function RLe(t){const e=[];return e.key=t,e}function ILe(){var t=Lr([]),e=DO,r=Lf,n=OLe;function s(a){var o=Array.from(t.apply(this,arguments),RLe),l,c=o.length,u=-1,d;for(const f of a)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,a)]).data=f;for(l=0,d=mD(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Lr(Array.from(a)),s):t},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:Lr(+a),s):n},s.order=function(a){return arguments.length?(e=a==null?DO:typeof a=="function"?a:Lr(Array.from(a)),s):e},s.offset=function(a){return arguments.length?(r=a??Lf,s):r},s}function MLe(t,e){if((n=t.length)>0){for(var r,n,s=0,a=t[0].length,o;s<a;++s){for(o=r=0;r<n;++r)o+=t[r][s][1]||0;if(o)for(r=0;r<n;++r)t[r][s][1]/=o}Lf(t,e)}}function DLe(t,e){if((s=t.length)>0){for(var r=0,n=t[e[0]],s,a=n.length;r<a;++r){for(var o=0,l=0;o<s;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Lf(t,e)}}function LLe(t,e){if(!(!((o=t.length)>0)||!((a=(s=t[e[0]]).length)>0))){for(var r=0,n=1,s,a,o;n<a;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[n][1]||0,m=d[n-1][1]||0,g=(f-m)/2,x=0;x<l;++x){var v=t[e[x]],y=v[n][1]||0,w=v[n-1][1]||0;g+=y-w}c+=f,u+=g*f}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,Lf(t,e)}}function Zg(t){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(t)}var $Le=["type","size","sizeType"];function LO(){return LO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LO.apply(this,arguments)}function y6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function x6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y6(Object(r),!0).forEach(function(n){FLe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FLe(t,e,r){return e=BLe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BLe(t){var e=ULe(t,"string");return Zg(e)=="symbol"?e:e+""}function ULe(t,e){if(Zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zLe(t,e){if(t==null)return{};var r=qLe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qLe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var cre={symbolCircle:gD,symbolCross:uLe,symbolDiamond:hLe,symbolSquare:fLe,symbolStar:vLe,symbolTriangle:yLe,symbolWye:bLe},VLe=Math.PI/180,HLe=function(e){var r="symbol".concat(HS(e));return cre[r]||gD},WLe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*VLe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},GLe=function(e,r){cre["symbol".concat(HS(e))]=r},vD=function(e){var r=e.type,n=r===void 0?"circle":r,s=e.size,a=s===void 0?64:s,o=e.sizeType,l=o===void 0?"area":o,c=zLe(e,$Le),u=x6(x6({},c),{},{type:n,size:a,sizeType:l}),d=function(){var y=HLe(n),w=wLe().type(y).size(WLe(a,l,n));return w()},f=u.className,m=u.cx,g=u.cy,x=lt(u,!0);return m===+m&&g===+g&&a===+a?G.createElement("path",LO({},x,{className:Rt("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(g,")"),d:d()})):null};vD.registerSymbol=GLe;function $f(t){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$f(t)}function $O(){return $O=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$O.apply(this,arguments)}function b6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function KLe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b6(Object(r),!0).forEach(function(n){ev(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YLe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dre(n.key),n)}}function QLe(t,e,r){return e&&YLe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function JLe(t,e,r){return e=jw(e),ZLe(t,ure()?Reflect.construct(e,r||[],jw(t).constructor):e.apply(t,r))}function ZLe(t,e){if(e&&($f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e$e(t)}function e$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ure(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ure=function(){return!!t})()}function jw(t){return jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jw(t)}function t$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FO(t,e)}function FO(t,e){return FO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},FO(t,e)}function ev(t,e,r){return e=dre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dre(t){var e=r$e(t,"string");return $f(e)=="symbol"?e:e+""}function r$e(t,e){if($f(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ka=32,yD=(function(t){function e(){return XLe(this,e),JLe(this,e,arguments)}return t$e(e,t),QLe(e,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,a=Ka/2,o=Ka/6,l=Ka/3,c=n.inactive?s:n.color;if(n.type==="plainline")return G.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:Ka,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return G.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Ka,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return G.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ka/8,"h").concat(Ka,"v").concat(Ka*3/4,"h").concat(-Ka,"z"),className:"recharts-legend-icon"});if(G.isValidElement(n.legendIcon)){var u=KLe({},n);return delete u.legendIcon,G.cloneElement(n.legendIcon,u)}return G.createElement(vD,{fill:c,cx:a,cy:a,size:Ka,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,a=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:Ka,height:Ka},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(g,x){var v=g.formatter||c,y=Rt(ev(ev({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",g.inactive));if(g.type==="none")return null;var w=yt(g.value)?null:g.value;$i(!yt(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=g.inactive?u:g.color;return G.createElement("li",$O({className:y,style:f,key:"legend-item-".concat(x)},bd(n.props,g,x)),G.createElement(kO,{width:o,height:o,viewBox:d,style:m},n.renderIcon(g)),G.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},v?v(w,g,x):w))})}},{key:"render",value:function(){var n=this.props,s=n.payload,a=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return G.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(N.PureComponent);ev(yD,"displayName","Legend");ev(yD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var K1,w6;function n$e(){if(w6)return K1;w6=1;var t=zS();function e(){this.__data__=new t,this.size=0}return K1=e,K1}var X1,_6;function s$e(){if(_6)return X1;_6=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return X1=t,X1}var Y1,S6;function a$e(){if(S6)return Y1;S6=1;function t(e){return this.__data__.get(e)}return Y1=t,Y1}var Q1,j6;function i$e(){if(j6)return Q1;j6=1;function t(e){return this.__data__.has(e)}return Q1=t,Q1}var J1,A6;function o$e(){if(A6)return J1;A6=1;var t=zS(),e=lD(),r=cD(),n=200;function s(a,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<n-1)return c.push([a,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(a,o),this.size=l.size,this}return J1=s,J1}var Z1,N6;function hre(){if(N6)return Z1;N6=1;var t=zS(),e=n$e(),r=s$e(),n=a$e(),s=i$e(),a=o$e();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=s,o.prototype.set=a,Z1=o,Z1}var eC,E6;function l$e(){if(E6)return eC;E6=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return eC=e,eC}var tC,C6;function c$e(){if(C6)return tC;C6=1;function t(e){return this.__data__.has(e)}return tC=t,tC}var rC,T6;function fre(){if(T6)return rC;T6=1;var t=cD(),e=l$e(),r=c$e();function n(s){var a=-1,o=s==null?0:s.length;for(this.__data__=new t;++a<o;)this.add(s[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,rC=n,rC}var nC,P6;function pre(){if(P6)return nC;P6=1;function t(e,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(r(e[n],n,e))return!0;return!1}return nC=t,nC}var sC,k6;function mre(){if(k6)return sC;k6=1;function t(e,r){return e.has(r)}return sC=t,sC}var aC,O6;function gre(){if(O6)return aC;O6=1;var t=fre(),e=pre(),r=mre(),n=1,s=2;function a(o,l,c,u,d,f){var m=c&n,g=o.length,x=l.length;if(g!=x&&!(m&&x>g))return!1;var v=f.get(o),y=f.get(l);if(v&&y)return v==l&&y==o;var w=-1,_=!0,A=c&s?new t:void 0;for(f.set(o,l),f.set(l,o);++w<g;){var C=o[w],S=l[w];if(u)var E=m?u(S,C,w,l,o,f):u(C,S,w,o,l,f);if(E!==void 0){if(E)continue;_=!1;break}if(A){if(!e(l,function(P,R){if(!r(A,R)&&(C===P||d(C,P,c,u,f)))return A.push(R)})){_=!1;break}}else if(!(C===S||d(C,S,c,u,f))){_=!1;break}}return f.delete(o),f.delete(l),_}return aC=a,aC}var iC,R6;function u$e(){if(R6)return iC;R6=1;var t=Ro(),e=t.Uint8Array;return iC=e,iC}var oC,I6;function d$e(){if(I6)return oC;I6=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(s,a){n[++r]=[a,s]}),n}return oC=t,oC}var lC,M6;function xD(){if(M6)return lC;M6=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(s){n[++r]=s}),n}return lC=t,lC}var cC,D6;function h$e(){if(D6)return cC;D6=1;var t=vy(),e=u$e(),r=oD(),n=gre(),s=d$e(),a=xD(),o=1,l=2,c="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",m="[object Number]",g="[object RegExp]",x="[object Set]",v="[object String]",y="[object Symbol]",w="[object ArrayBuffer]",_="[object DataView]",A=t?t.prototype:void 0,C=A?A.valueOf:void 0;function S(E,P,R,O,D,I,$){switch(R){case _:if(E.byteLength!=P.byteLength||E.byteOffset!=P.byteOffset)return!1;E=E.buffer,P=P.buffer;case w:return!(E.byteLength!=P.byteLength||!I(new e(E),new e(P)));case c:case u:case m:return r(+E,+P);case d:return E.name==P.name&&E.message==P.message;case g:case v:return E==P+"";case f:var M=s;case x:var U=O&o;if(M||(M=a),E.size!=P.size&&!U)return!1;var H=$.get(E);if(H)return H==P;O|=l,$.set(E,P);var z=n(M(E),M(P),O,D,I,$);return $.delete(E),z;case y:if(C)return C.call(E)==C.call(P)}return!1}return cC=S,cC}var uC,L6;function vre(){if(L6)return uC;L6=1;function t(e,r){for(var n=-1,s=r.length,a=e.length;++n<s;)e[a+n]=r[n];return e}return uC=t,uC}var dC,$6;function f$e(){if($6)return dC;$6=1;var t=vre(),e=fa();function r(n,s,a){var o=s(n);return e(n)?o:t(o,a(n))}return dC=r,dC}var hC,F6;function p$e(){if(F6)return hC;F6=1;function t(e,r){for(var n=-1,s=e==null?0:e.length,a=0,o=[];++n<s;){var l=e[n];r(l,n,e)&&(o[a++]=l)}return o}return hC=t,hC}var fC,B6;function m$e(){if(B6)return fC;B6=1;function t(){return[]}return fC=t,fC}var pC,U6;function g$e(){if(U6)return pC;U6=1;var t=p$e(),e=m$e(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(o){return o==null?[]:(o=Object(o),t(s(o),function(l){return n.call(o,l)}))}:e;return pC=a,pC}var mC,z6;function v$e(){if(z6)return mC;z6=1;function t(e,r){for(var n=-1,s=Array(e);++n<e;)s[n]=r(n);return s}return mC=t,mC}var gC,q6;function y$e(){if(q6)return gC;q6=1;var t=Tl(),e=Pl(),r="[object Arguments]";function n(s){return e(s)&&t(s)==r}return gC=n,gC}var vC,V6;function bD(){if(V6)return vC;V6=1;var t=y$e(),e=Pl(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!s.call(o,"callee")};return vC=a,vC}var Xm={exports:{}},yC,H6;function x$e(){if(H6)return yC;H6=1;function t(){return!1}return yC=t,yC}Xm.exports;var W6;function yre(){return W6||(W6=1,(function(t,e){var r=Ro(),n=x$e(),s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;t.exports=u})(Xm,Xm.exports)),Xm.exports}var xC,G6;function wD(){if(G6)return xC;G6=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,s){var a=typeof n;return s=s??t,!!s&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<s}return xC=r,xC}var bC,K6;function _D(){if(K6)return bC;K6=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return bC=e,bC}var wC,X6;function b$e(){if(X6)return wC;X6=1;var t=Tl(),e=_D(),r=Pl(),n="[object Arguments]",s="[object Array]",a="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",m="[object RegExp]",g="[object Set]",x="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",A="[object Float64Array]",C="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",P="[object Uint8Array]",R="[object Uint8ClampedArray]",O="[object Uint16Array]",D="[object Uint32Array]",I={};I[_]=I[A]=I[C]=I[S]=I[E]=I[P]=I[R]=I[O]=I[D]=!0,I[n]=I[s]=I[y]=I[a]=I[w]=I[o]=I[l]=I[c]=I[u]=I[d]=I[f]=I[m]=I[g]=I[x]=I[v]=!1;function $(M){return r(M)&&e(M.length)&&!!I[t(M)]}return wC=$,wC}var _C,Y6;function xre(){if(Y6)return _C;Y6=1;function t(e){return function(r){return e(r)}}return _C=t,_C}var Ym={exports:{}};Ym.exports;var Q6;function w$e(){return Q6||(Q6=1,(function(t,e){var r=Fte(),n=e&&!e.nodeType&&e,s=n&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===n,o=a&&r.process,l=(function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();t.exports=l})(Ym,Ym.exports)),Ym.exports}var SC,J6;function bre(){if(J6)return SC;J6=1;var t=b$e(),e=xre(),r=w$e(),n=r&&r.isTypedArray,s=n?e(n):t;return SC=s,SC}var jC,Z6;function _$e(){if(Z6)return jC;Z6=1;var t=v$e(),e=bD(),r=fa(),n=yre(),s=wD(),a=bre(),o=Object.prototype,l=o.hasOwnProperty;function c(u,d){var f=r(u),m=!f&&e(u),g=!f&&!m&&n(u),x=!f&&!m&&!g&&a(u),v=f||m||g||x,y=v?t(u.length,String):[],w=y.length;for(var _ in u)(d||l.call(u,_))&&!(v&&(_=="length"||g&&(_=="offset"||_=="parent")||x&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||s(_,w)))&&y.push(_);return y}return jC=c,jC}var AC,eq;function S$e(){if(eq)return AC;eq=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||t;return r===s}return AC=e,AC}var NC,tq;function wre(){if(tq)return NC;tq=1;function t(e,r){return function(n){return e(r(n))}}return NC=t,NC}var EC,rq;function j$e(){if(rq)return EC;rq=1;var t=wre(),e=t(Object.keys,Object);return EC=e,EC}var CC,nq;function A$e(){if(nq)return CC;nq=1;var t=S$e(),e=j$e(),r=Object.prototype,n=r.hasOwnProperty;function s(a){if(!t(a))return e(a);var o=[];for(var l in Object(a))n.call(a,l)&&l!="constructor"&&o.push(l);return o}return CC=s,CC}var TC,sq;function yy(){if(sq)return TC;sq=1;var t=iD(),e=_D();function r(n){return n!=null&&e(n.length)&&!t(n)}return TC=r,TC}var PC,aq;function XS(){if(aq)return PC;aq=1;var t=_$e(),e=A$e(),r=yy();function n(s){return r(s)?t(s):e(s)}return PC=n,PC}var kC,iq;function N$e(){if(iq)return kC;iq=1;var t=f$e(),e=g$e(),r=XS();function n(s){return t(s,r,e)}return kC=n,kC}var OC,oq;function E$e(){if(oq)return OC;oq=1;var t=N$e(),e=1,r=Object.prototype,n=r.hasOwnProperty;function s(a,o,l,c,u,d){var f=l&e,m=t(a),g=m.length,x=t(o),v=x.length;if(g!=v&&!f)return!1;for(var y=g;y--;){var w=m[y];if(!(f?w in o:n.call(o,w)))return!1}var _=d.get(a),A=d.get(o);if(_&&A)return _==o&&A==a;var C=!0;d.set(a,o),d.set(o,a);for(var S=f;++y<g;){w=m[y];var E=a[w],P=o[w];if(c)var R=f?c(P,E,w,o,a,d):c(E,P,w,a,o,d);if(!(R===void 0?E===P||u(E,P,l,c,d):R)){C=!1;break}S||(S=w=="constructor")}if(C&&!S){var O=a.constructor,D=o.constructor;O!=D&&"constructor"in a&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof D=="function"&&D instanceof D)&&(C=!1)}return d.delete(a),d.delete(o),C}return OC=s,OC}var RC,lq;function C$e(){if(lq)return RC;lq=1;var t=Dd(),e=Ro(),r=t(e,"DataView");return RC=r,RC}var IC,cq;function T$e(){if(cq)return IC;cq=1;var t=Dd(),e=Ro(),r=t(e,"Promise");return IC=r,IC}var MC,uq;function _re(){if(uq)return MC;uq=1;var t=Dd(),e=Ro(),r=t(e,"Set");return MC=r,MC}var DC,dq;function P$e(){if(dq)return DC;dq=1;var t=Dd(),e=Ro(),r=t(e,"WeakMap");return DC=r,DC}var LC,hq;function k$e(){if(hq)return LC;hq=1;var t=C$e(),e=lD(),r=T$e(),n=_re(),s=P$e(),a=Tl(),o=Bte(),l="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",m="[object DataView]",g=o(t),x=o(e),v=o(r),y=o(n),w=o(s),_=a;return(t&&_(new t(new ArrayBuffer(1)))!=m||e&&_(new e)!=l||r&&_(r.resolve())!=u||n&&_(new n)!=d||s&&_(new s)!=f)&&(_=function(A){var C=a(A),S=C==c?A.constructor:void 0,E=S?o(S):"";if(E)switch(E){case g:return m;case x:return l;case v:return u;case y:return d;case w:return f}return C}),LC=_,LC}var $C,fq;function O$e(){if(fq)return $C;fq=1;var t=hre(),e=gre(),r=h$e(),n=E$e(),s=k$e(),a=fa(),o=yre(),l=bre(),c=1,u="[object Arguments]",d="[object Array]",f="[object Object]",m=Object.prototype,g=m.hasOwnProperty;function x(v,y,w,_,A,C){var S=a(v),E=a(y),P=S?d:s(v),R=E?d:s(y);P=P==u?f:P,R=R==u?f:R;var O=P==f,D=R==f,I=P==R;if(I&&o(v)){if(!o(y))return!1;S=!0,O=!1}if(I&&!O)return C||(C=new t),S||l(v)?e(v,y,w,_,A,C):r(v,y,P,w,_,A,C);if(!(w&c)){var $=O&&g.call(v,"__wrapped__"),M=D&&g.call(y,"__wrapped__");if($||M){var U=$?v.value():v,H=M?y.value():y;return C||(C=new t),A(U,H,w,_,C)}}return I?(C||(C=new t),n(v,y,w,_,A,C)):!1}return $C=x,$C}var FC,pq;function SD(){if(pq)return FC;pq=1;var t=O$e(),e=Pl();function r(n,s,a,o,l){return n===s?!0:n==null||s==null||!e(n)&&!e(s)?n!==n&&s!==s:t(n,s,a,o,r,l)}return FC=r,FC}var BC,mq;function R$e(){if(mq)return BC;mq=1;var t=hre(),e=SD(),r=1,n=2;function s(a,o,l,c){var u=l.length,d=u,f=!c;if(a==null)return!d;for(a=Object(a);u--;){var m=l[u];if(f&&m[2]?m[1]!==a[m[0]]:!(m[0]in a))return!1}for(;++u<d;){m=l[u];var g=m[0],x=a[g],v=m[1];if(f&&m[2]){if(x===void 0&&!(g in a))return!1}else{var y=new t;if(c)var w=c(x,v,g,a,o,y);if(!(w===void 0?e(v,x,r|n,c,y):w))return!1}}return!0}return BC=s,BC}var UC,gq;function Sre(){if(gq)return UC;gq=1;var t=Xc();function e(r){return r===r&&!t(r)}return UC=e,UC}var zC,vq;function I$e(){if(vq)return zC;vq=1;var t=Sre(),e=XS();function r(n){for(var s=e(n),a=s.length;a--;){var o=s[a],l=n[o];s[a]=[o,l,t(l)]}return s}return zC=r,zC}var qC,yq;function jre(){if(yq)return qC;yq=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return qC=t,qC}var VC,xq;function M$e(){if(xq)return VC;xq=1;var t=R$e(),e=I$e(),r=jre();function n(s){var a=e(s);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(o){return o===s||t(o,s,a)}}return VC=n,VC}var HC,bq;function D$e(){if(bq)return HC;bq=1;function t(e,r){return e!=null&&r in Object(e)}return HC=t,HC}var WC,wq;function L$e(){if(wq)return WC;wq=1;var t=qte(),e=bD(),r=fa(),n=wD(),s=_D(),a=VS();function o(l,c,u){c=t(c,l);for(var d=-1,f=c.length,m=!1;++d<f;){var g=a(c[d]);if(!(m=l!=null&&u(l,g)))break;l=l[g]}return m||++d!=f?m:(f=l==null?0:l.length,!!f&&s(f)&&n(g,f)&&(r(l)||e(l)))}return WC=o,WC}var GC,_q;function $$e(){if(_q)return GC;_q=1;var t=D$e(),e=L$e();function r(n,s){return n!=null&&e(n,s,t)}return GC=r,GC}var KC,Sq;function F$e(){if(Sq)return KC;Sq=1;var t=SD(),e=Vte(),r=$$e(),n=aD(),s=Sre(),a=jre(),o=VS(),l=1,c=2;function u(d,f){return n(d)&&s(f)?a(o(d),f):function(m){var g=e(m,d);return g===void 0&&g===f?r(m,d):t(f,g,l|c)}}return KC=u,KC}var XC,jq;function Dp(){if(jq)return XC;jq=1;function t(e){return e}return XC=t,XC}var YC,Aq;function B$e(){if(Aq)return YC;Aq=1;function t(e){return function(r){return r?.[e]}}return YC=t,YC}var QC,Nq;function U$e(){if(Nq)return QC;Nq=1;var t=dD();function e(r){return function(n){return t(n,r)}}return QC=e,QC}var JC,Eq;function z$e(){if(Eq)return JC;Eq=1;var t=B$e(),e=U$e(),r=aD(),n=VS();function s(a){return r(a)?t(n(a)):e(a)}return JC=s,JC}var ZC,Cq;function Io(){if(Cq)return ZC;Cq=1;var t=M$e(),e=F$e(),r=Dp(),n=fa(),s=z$e();function a(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):s(o)}return ZC=a,ZC}var eT,Tq;function Are(){if(Tq)return eT;Tq=1;function t(e,r,n,s){for(var a=e.length,o=n+(s?1:-1);s?o--:++o<a;)if(r(e[o],o,e))return o;return-1}return eT=t,eT}var tT,Pq;function q$e(){if(Pq)return tT;Pq=1;function t(e){return e!==e}return tT=t,tT}var rT,kq;function V$e(){if(kq)return rT;kq=1;function t(e,r,n){for(var s=n-1,a=e.length;++s<a;)if(e[s]===r)return s;return-1}return rT=t,rT}var nT,Oq;function H$e(){if(Oq)return nT;Oq=1;var t=Are(),e=q$e(),r=V$e();function n(s,a,o){return a===a?r(s,a,o):t(s,e,o)}return nT=n,nT}var sT,Rq;function W$e(){if(Rq)return sT;Rq=1;var t=H$e();function e(r,n){var s=r==null?0:r.length;return!!s&&t(r,n,0)>-1}return sT=e,sT}var aT,Iq;function G$e(){if(Iq)return aT;Iq=1;function t(e,r,n){for(var s=-1,a=e==null?0:e.length;++s<a;)if(n(r,e[s]))return!0;return!1}return aT=t,aT}var iT,Mq;function K$e(){if(Mq)return iT;Mq=1;function t(){}return iT=t,iT}var oT,Dq;function X$e(){if(Dq)return oT;Dq=1;var t=_re(),e=K$e(),r=xD(),n=1/0,s=t&&1/r(new t([,-0]))[1]==n?function(a){return new t(a)}:e;return oT=s,oT}var lT,Lq;function Y$e(){if(Lq)return lT;Lq=1;var t=fre(),e=W$e(),r=G$e(),n=mre(),s=X$e(),a=xD(),o=200;function l(c,u,d){var f=-1,m=e,g=c.length,x=!0,v=[],y=v;if(d)x=!1,m=r;else if(g>=o){var w=u?null:s(c);if(w)return a(w);x=!1,m=n,y=new t}else y=u?[]:v;e:for(;++f<g;){var _=c[f],A=u?u(_):_;if(_=d||_!==0?_:0,x&&A===A){for(var C=y.length;C--;)if(y[C]===A)continue e;u&&y.push(A),v.push(_)}else m(y,A,d)||(y!==v&&y.push(A),v.push(_))}return v}return lT=l,lT}var cT,$q;function Q$e(){if($q)return cT;$q=1;var t=Io(),e=Y$e();function r(n,s){return n&&n.length?e(n,t(s,2)):[]}return cT=r,cT}var J$e=Q$e();const Fq=gr(J$e);function Nre(t,e,r){return e===!0?Fq(t,r):yt(e)?Fq(t,e):t}function Ff(t){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(t)}var Z$e=["ref"];function Bq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ho(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bq(Object(r),!0).forEach(function(n){YS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cre(n.key),n)}}function tFe(t,e,r){return e&&Uq(t.prototype,e),r&&Uq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rFe(t,e,r){return e=Aw(e),nFe(t,Ere()?Reflect.construct(e,r||[],Aw(t).constructor):e.apply(t,r))}function nFe(t,e){if(e&&(Ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sFe(t)}function sFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ere(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ere=function(){return!!t})()}function Aw(t){return Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Aw(t)}function aFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BO(t,e)}function BO(t,e){return BO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},BO(t,e)}function YS(t,e,r){return e=Cre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cre(t){var e=iFe(t,"string");return Ff(e)=="symbol"?e:e+""}function iFe(t,e){if(Ff(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function oFe(t,e){if(t==null)return{};var r=lFe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lFe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function cFe(t){return t.value}function uFe(t,e){if(G.isValidElement(t))return G.cloneElement(t,e);if(typeof t=="function")return G.createElement(t,e);e.ref;var r=oFe(e,Z$e);return G.createElement(yD,r)}var zq=1,Ku=(function(t){function e(){var r;eFe(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=rFe(this,e,[].concat(s)),YS(r,"lastBoundingBox",{width:-1,height:-1}),r}return aFe(e,t),tFe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>zq||Math.abs(s.height-this.lastBoundingBox.height)>zq)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ho({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,a=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,d=s.chartHeight,f,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&a==="vertical"){var g=this.getBBoxSnapshot();f={left:((u||0)-g.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();m={top:((d||0)-x.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ho(Ho({},f),m)}},{key:"render",value:function(){var n=this,s=this.props,a=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,f=Ho(Ho({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return G.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(g){n.wrapperNode=g}},uFe(a,Ho(Ho({},this.props),{},{payload:Nre(d,u,cFe)})))}}],[{key:"getWithHeight",value:function(n,s){var a=Ho(Ho({},this.defaultProps),n.props),o=a.layout;return o==="vertical"&&Re(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])})(N.PureComponent);YS(Ku,"displayName","Legend");YS(Ku,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var uT,qq;function dFe(){if(qq)return uT;qq=1;var t=vy(),e=bD(),r=fa(),n=t?t.isConcatSpreadable:void 0;function s(a){return r(a)||e(a)||!!(n&&a&&a[n])}return uT=s,uT}var dT,Vq;function Tre(){if(Vq)return dT;Vq=1;var t=vre(),e=dFe();function r(n,s,a,o,l){var c=-1,u=n.length;for(a||(a=e),l||(l=[]);++c<u;){var d=n[c];s>0&&a(d)?s>1?r(d,s-1,a,o,l):t(l,d):o||(l[l.length]=d)}return l}return dT=r,dT}var hT,Hq;function hFe(){if(Hq)return hT;Hq=1;function t(e){return function(r,n,s){for(var a=-1,o=Object(r),l=s(r),c=l.length;c--;){var u=l[e?c:++a];if(n(o[u],u,o)===!1)break}return r}}return hT=t,hT}var fT,Wq;function fFe(){if(Wq)return fT;Wq=1;var t=hFe(),e=t();return fT=e,fT}var pT,Gq;function Pre(){if(Gq)return pT;Gq=1;var t=fFe(),e=XS();function r(n,s){return n&&t(n,s,e)}return pT=r,pT}var mT,Kq;function pFe(){if(Kq)return mT;Kq=1;var t=yy();function e(r,n){return function(s,a){if(s==null)return s;if(!t(s))return r(s,a);for(var o=s.length,l=n?o:-1,c=Object(s);(n?l--:++l<o)&&a(c[l],l,c)!==!1;);return s}}return mT=e,mT}var gT,Xq;function jD(){if(Xq)return gT;Xq=1;var t=Pre(),e=pFe(),r=e(t);return gT=r,gT}var vT,Yq;function kre(){if(Yq)return vT;Yq=1;var t=jD(),e=yy();function r(n,s){var a=-1,o=e(n)?Array(n.length):[];return t(n,function(l,c,u){o[++a]=s(l,c,u)}),o}return vT=r,vT}var yT,Qq;function mFe(){if(Qq)return yT;Qq=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return yT=t,yT}var xT,Jq;function gFe(){if(Jq)return xT;Jq=1;var t=Op();function e(r,n){if(r!==n){var s=r!==void 0,a=r===null,o=r===r,l=t(r),c=n!==void 0,u=n===null,d=n===n,f=t(n);if(!u&&!f&&!l&&r>n||l&&c&&d&&!u&&!f||a&&c&&d||!s&&d||!o)return 1;if(!a&&!l&&!f&&r<n||f&&s&&o&&!a&&!l||u&&s&&o||!c&&o||!d)return-1}return 0}return xT=e,xT}var bT,Zq;function vFe(){if(Zq)return bT;Zq=1;var t=gFe();function e(r,n,s){for(var a=-1,o=r.criteria,l=n.criteria,c=o.length,u=s.length;++a<c;){var d=t(o[a],l[a]);if(d){if(a>=u)return d;var f=s[a];return d*(f=="desc"?-1:1)}}return r.index-n.index}return bT=e,bT}var wT,eV;function yFe(){if(eV)return wT;eV=1;var t=uD(),e=dD(),r=Io(),n=kre(),s=mFe(),a=xre(),o=vFe(),l=Dp(),c=fa();function u(d,f,m){f.length?f=t(f,function(v){return c(v)?function(y){return e(y,v.length===1?v[0]:v)}:v}):f=[l];var g=-1;f=t(f,a(r));var x=n(d,function(v,y,w){var _=t(f,function(A){return A(v)});return{criteria:_,index:++g,value:v}});return s(x,function(v,y){return o(v,y,m)})}return wT=u,wT}var _T,tV;function xFe(){if(tV)return _T;tV=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return _T=t,_T}var ST,rV;function bFe(){if(rV)return ST;rV=1;var t=xFe(),e=Math.max;function r(n,s,a){return s=e(s===void 0?n.length-1:s,0),function(){for(var o=arguments,l=-1,c=e(o.length-s,0),u=Array(c);++l<c;)u[l]=o[s+l];l=-1;for(var d=Array(s+1);++l<s;)d[l]=o[l];return d[s]=a(u),t(n,this,d)}}return ST=r,ST}var jT,nV;function wFe(){if(nV)return jT;nV=1;function t(e){return function(){return e}}return jT=t,jT}var AT,sV;function Ore(){if(sV)return AT;sV=1;var t=Dd(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return AT=e,AT}var NT,aV;function _Fe(){if(aV)return NT;aV=1;var t=wFe(),e=Ore(),r=Dp(),n=e?function(s,a){return e(s,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:r;return NT=n,NT}var ET,iV;function SFe(){if(iV)return ET;iV=1;var t=800,e=16,r=Date.now;function n(s){var a=0,o=0;return function(){var l=r(),c=e-(l-o);if(o=l,c>0){if(++a>=t)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}return ET=n,ET}var CT,oV;function jFe(){if(oV)return CT;oV=1;var t=_Fe(),e=SFe(),r=e(t);return CT=r,CT}var TT,lV;function AFe(){if(lV)return TT;lV=1;var t=Dp(),e=bFe(),r=jFe();function n(s,a){return r(e(s,a,t),s+"")}return TT=n,TT}var PT,cV;function QS(){if(cV)return PT;cV=1;var t=oD(),e=yy(),r=wD(),n=Xc();function s(a,o,l){if(!n(l))return!1;var c=typeof o;return(c=="number"?e(l)&&r(o,l.length):c=="string"&&o in l)?t(l[o],a):!1}return PT=s,PT}var kT,uV;function NFe(){if(uV)return kT;uV=1;var t=Tre(),e=yFe(),r=AFe(),n=QS(),s=r(function(a,o){if(a==null)return[];var l=o.length;return l>1&&n(a,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(a,t(o,1),[])});return kT=s,kT}var EFe=NFe();const AD=gr(EFe);function tv(t){"@babel/helpers - typeof";return tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tv(t)}function UO(){return UO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UO.apply(this,arguments)}function CFe(t,e){return OFe(t)||kFe(t,e)||PFe(t,e)||TFe()}function TFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PFe(t,e){if(t){if(typeof t=="string")return dV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dV(t,e)}}function dV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kFe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function OFe(t){if(Array.isArray(t))return t}function hV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function OT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(r),!0).forEach(function(n){RFe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RFe(t,e,r){return e=IFe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IFe(t){var e=MFe(t,"string");return tv(e)=="symbol"?e:e+""}function MFe(t,e){if(tv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DFe(t){return Array.isArray(t)&&Qn(t[0])&&Qn(t[1])?t.join(" ~ "):t}var LFe=function(e){var r=e.separator,n=r===void 0?" : ":r,s=e.contentStyle,a=s===void 0?{}:s,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,m=e.itemSorter,g=e.wrapperClassName,x=e.labelClassName,v=e.label,y=e.labelFormatter,w=e.accessibilityLayer,_=w===void 0?!1:w,A=function(){if(d&&d.length){var $={padding:0,margin:0},M=(m?AD(d,m):d).map(function(U,H){if(U.type==="none")return null;var z=OT({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},l),q=U.formatter||f||DFe,V=U.value,W=U.name,B=V,F=W;if(q&&B!=null&&F!=null){var Y=q(V,W,U,H,d);if(Array.isArray(Y)){var oe=CFe(Y,2);B=oe[0],F=oe[1]}else B=Y}return G.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:z},Qn(F)?G.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Qn(F)?G.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,G.createElement("span",{className:"recharts-tooltip-item-value"},B),G.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return G.createElement("ul",{className:"recharts-tooltip-item-list",style:$},M)}return null},C=OT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),S=OT({margin:0},u),E=!It(v),P=E?v:"",R=Rt("recharts-default-tooltip",g),O=Rt("recharts-tooltip-label",x);E&&y&&d!==void 0&&d!==null&&(P=y(v,d));var D=_?{role:"status","aria-live":"assertive"}:{};return G.createElement("div",UO({className:R,style:C},D),G.createElement("p",{className:O,style:S},G.isValidElement(P)?P:"".concat(P)),A())};function rv(t){"@babel/helpers - typeof";return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rv(t)}function j0(t,e,r){return e=$Fe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Fe(t){var e=FFe(t,"string");return rv(e)=="symbol"?e:e+""}function FFe(t,e){if(rv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Om="recharts-tooltip-wrapper",BFe={visibility:"hidden"};function UFe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return Rt(Om,j0(j0(j0(j0({},"".concat(Om,"-right"),Re(r)&&e&&Re(e.x)&&r>=e.x),"".concat(Om,"-left"),Re(r)&&e&&Re(e.x)&&r<e.x),"".concat(Om,"-bottom"),Re(n)&&e&&Re(e.y)&&n>=e.y),"".concat(Om,"-top"),Re(n)&&e&&Re(e.y)&&n<e.y))}function fV(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,s=t.offsetTopLeft,a=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&Re(a[n]))return a[n];var d=r[n]-l-s,f=r[n]+s;if(e[n])return o[n]?d:f;if(o[n]){var m=d,g=c[n];return m<g?Math.max(f,c[n]):Math.max(d,c[n])}var x=f+l,v=c[n]+u;return x>v?Math.max(d,c[n]):Math.max(f,c[n])}function zFe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function qFe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=fV({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=fV({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=zFe({translateX:d,translateY:f,useTranslate3d:l})):u=BFe,{cssProperties:u,cssClasses:UFe({translateX:d,translateY:f,coordinate:r})}}function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function pV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function mV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pV(Object(r),!0).forEach(function(n){qO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HFe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ire(n.key),n)}}function WFe(t,e,r){return e&&HFe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function GFe(t,e,r){return e=Nw(e),KFe(t,Rre()?Reflect.construct(e,r||[],Nw(t).constructor):e.apply(t,r))}function KFe(t,e){if(e&&(Bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XFe(t)}function XFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rre=function(){return!!t})()}function Nw(t){return Nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nw(t)}function YFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zO(t,e)}function zO(t,e){return zO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},zO(t,e)}function qO(t,e,r){return e=Ire(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ire(t){var e=QFe(t,"string");return Bf(e)=="symbol"?e:e+""}function QFe(t,e){if(Bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gV=1,JFe=(function(t){function e(){var r;VFe(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=GFe(this,e,[].concat(s)),qO(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),qO(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return YFe(e,t),WFe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>gV||Math.abs(n.height-this.state.lastBoundingBox.height)>gV)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,d=s.coordinate,f=s.hasPayload,m=s.isAnimationActive,g=s.offset,x=s.position,v=s.reverseDirection,y=s.useTranslate3d,w=s.viewBox,_=s.wrapperStyle,A=qFe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:g,position:x,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:w}),C=A.cssClasses,S=A.cssProperties,E=mV(mV({transition:m&&a?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},_);return G.createElement("div",{tabIndex:-1,className:C,style:E,ref:function(R){n.wrapperNode=R}},u)}}])})(N.PureComponent),ZFe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ld={isSsr:ZFe()};function Uf(t){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(t)}function vV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function yV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(r),!0).forEach(function(n){ND(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function e4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dre(n.key),n)}}function r4e(t,e,r){return e&&t4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function n4e(t,e,r){return e=Ew(e),s4e(t,Mre()?Reflect.construct(e,r||[],Ew(t).constructor):e.apply(t,r))}function s4e(t,e){if(e&&(Uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a4e(t)}function a4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mre=function(){return!!t})()}function Ew(t){return Ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ew(t)}function i4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VO(t,e)}function VO(t,e){return VO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},VO(t,e)}function ND(t,e,r){return e=Dre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dre(t){var e=o4e(t,"string");return Uf(e)=="symbol"?e:e+""}function o4e(t,e){if(Uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function l4e(t){return t.dataKey}function c4e(t,e){return G.isValidElement(t)?G.cloneElement(t,e):typeof t=="function"?G.createElement(t,e):G.createElement(LFe,e)}var Ci=(function(t){function e(){return e4e(this,e),n4e(this,e,arguments)}return i4e(e,t),r4e(e,[{key:"render",value:function(){var n=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,d=s.coordinate,f=s.filterNull,m=s.isAnimationActive,g=s.offset,x=s.payload,v=s.payloadUniqBy,y=s.position,w=s.reverseDirection,_=s.useTranslate3d,A=s.viewBox,C=s.wrapperStyle,S=x??[];f&&S.length&&(S=Nre(x.filter(function(P){return P.value!=null&&(P.hide!==!0||n.props.includeHidden)}),v,l4e));var E=S.length>0;return G.createElement(JFe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:a,coordinate:d,hasPayload:E,offset:g,position:y,reverseDirection:w,useTranslate3d:_,viewBox:A,wrapperStyle:C},c4e(u,yV(yV({},this.props),{},{payload:S})))}}])})(N.PureComponent);ND(Ci,"displayName","Tooltip");ND(Ci,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ld.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var RT,xV;function u4e(){if(xV)return RT;xV=1;var t=Ro(),e=function(){return t.Date.now()};return RT=e,RT}var IT,bV;function d4e(){if(bV)return IT;bV=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return IT=e,IT}var MT,wV;function h4e(){if(wV)return MT;wV=1;var t=d4e(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return MT=r,MT}var DT,_V;function Lre(){if(_V)return DT;_V=1;var t=h4e(),e=Xc(),r=Op(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(r(u))return n;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=a.test(u);return f||o.test(u)?l(u.slice(2),f?2:8):s.test(u)?n:+u}return DT=c,DT}var LT,SV;function f4e(){if(SV)return LT;SV=1;var t=Xc(),e=u4e(),r=Lre(),n="Expected a function",s=Math.max,a=Math.min;function o(l,c,u){var d,f,m,g,x,v,y=0,w=!1,_=!1,A=!0;if(typeof l!="function")throw new TypeError(n);c=r(c)||0,t(u)&&(w=!!u.leading,_="maxWait"in u,m=_?s(r(u.maxWait)||0,c):m,A="trailing"in u?!!u.trailing:A);function C(M){var U=d,H=f;return d=f=void 0,y=M,g=l.apply(H,U),g}function S(M){return y=M,x=setTimeout(R,c),w?C(M):g}function E(M){var U=M-v,H=M-y,z=c-U;return _?a(z,m-H):z}function P(M){var U=M-v,H=M-y;return v===void 0||U>=c||U<0||_&&H>=m}function R(){var M=e();if(P(M))return O(M);x=setTimeout(R,E(M))}function O(M){return x=void 0,A&&d?C(M):(d=f=void 0,g)}function D(){x!==void 0&&clearTimeout(x),y=0,d=v=f=x=void 0}function I(){return x===void 0?g:O(e())}function $(){var M=e(),U=P(M);if(d=arguments,f=this,v=M,U){if(x===void 0)return S(v);if(_)return clearTimeout(x),x=setTimeout(R,c),C(v)}return x===void 0&&(x=setTimeout(R,c)),g}return $.cancel=D,$.flush=I,$}return LT=o,LT}var $T,jV;function p4e(){if(jV)return $T;jV=1;var t=f4e(),e=Xc(),r="Expected a function";function n(s,a,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(r);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(s,a,{leading:l,maxWait:a,trailing:c})}return $T=n,$T}var m4e=p4e();const $re=gr(m4e);function nv(t){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nv(t)}function AV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function A0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(r),!0).forEach(function(n){g4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g4e(t,e,r){return e=v4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v4e(t){var e=y4e(t,"string");return nv(e)=="symbol"?e:e+""}function y4e(t,e){if(nv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(nv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x4e(t,e){return S4e(t)||_4e(t,e)||w4e(t,e)||b4e()}function b4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w4e(t,e){if(t){if(typeof t=="string")return NV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NV(t,e)}}function NV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function S4e(t){if(Array.isArray(t))return t}var Fre=N.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,s=n===void 0?{width:-1,height:-1}:n,a=t.width,o=a===void 0?"100%":a,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,m=t.maxHeight,g=t.children,x=t.debounce,v=x===void 0?0:x,y=t.id,w=t.className,_=t.onResize,A=t.style,C=A===void 0?{}:A,S=N.useRef(null),E=N.useRef();E.current=_,N.useImperativeHandle(e,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var P=N.useState({containerWidth:s.width,containerHeight:s.height}),R=x4e(P,2),O=R[0],D=R[1],I=N.useCallback(function(M,U){D(function(H){var z=Math.round(M),q=Math.round(U);return H.containerWidth===z&&H.containerHeight===q?H:{containerWidth:z,containerHeight:q}})},[]);N.useEffect(function(){var M=function(W){var B,F=W[0].contentRect,Y=F.width,oe=F.height;I(Y,oe),(B=E.current)===null||B===void 0||B.call(E,Y,oe)};v>0&&(M=$re(M,v,{trailing:!0,leading:!1}));var U=new ResizeObserver(M),H=S.current.getBoundingClientRect(),z=H.width,q=H.height;return I(z,q),U.observe(S.current),function(){U.disconnect()}},[I,v]);var $=N.useMemo(function(){var M=O.containerWidth,U=O.containerHeight;if(M<0||U<0)return null;$i(Iu(o)||Iu(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),$i(!r||r>0,"The aspect(%s) must be greater than zero.",r);var H=Iu(o)?M:o,z=Iu(c)?U:c;r&&r>0&&(H?z=H/r:z&&(H=z*r),m&&z>m&&(z=m)),$i(H>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,z,o,c,d,f,r);var q=!Array.isArray(g)&&fl(g.type).endsWith("Chart");return G.Children.map(g,function(V){return G.isValidElement(V)?N.cloneElement(V,A0({width:H,height:z},q?{style:A0({height:"100%",width:"100%",maxHeight:z,maxWidth:H},V.props.style)}:{})):V})},[r,g,c,m,f,d,O,o]);return G.createElement("div",{id:y?"".concat(y):void 0,className:Rt("recharts-responsive-container",w),style:A0(A0({},C),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:m}),ref:S},$)}),JS=function(e){return null};JS.displayName="Cell";function sv(t){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sv(t)}function EV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function HO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(r),!0).forEach(function(n){j4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function j4e(t,e,r){return e=A4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A4e(t){var e=N4e(t,"string");return sv(e)=="symbol"?e:e+""}function N4e(t,e){if(sv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ch={widthCache:{},cacheCount:0},E4e=2e3,C4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},CV="recharts_measurement_span";function T4e(t){var e=HO({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var pg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ld.isSsr)return{width:0,height:0};var n=T4e(r),s=JSON.stringify({text:e,copyStyle:n});if(Ch.widthCache[s])return Ch.widthCache[s];try{var a=document.getElementById(CV);a||(a=document.createElement("span"),a.setAttribute("id",CV),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=HO(HO({},C4e),n);Object.assign(a.style,o),a.textContent="".concat(e);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return Ch.widthCache[s]=c,++Ch.cacheCount>E4e&&(Ch.cacheCount=0,Ch.widthCache={}),c}catch{return{width:0,height:0}}},P4e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function av(t){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},av(t)}function Cw(t,e){return I4e(t)||R4e(t,e)||O4e(t,e)||k4e()}function k4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O4e(t,e){if(t){if(typeof t=="string")return TV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TV(t,e)}}function TV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function R4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function I4e(t){if(Array.isArray(t))return t}function M4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L4e(n.key),n)}}function D4e(t,e,r){return e&&PV(t.prototype,e),r&&PV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function L4e(t){var e=$4e(t,"string");return av(e)=="symbol"?e:e+""}function $4e(t,e){if(av(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,OV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,F4e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,B4e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Bre={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},U4e=Object.keys(Bre),Kh="NaN";function z4e(t,e){return t*Bre[e]}var N0=(function(){function t(e,r){M4e(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!F4e.test(r)&&(this.num=NaN,this.unit=""),U4e.includes(r)&&(this.num=z4e(e,r),this.unit="px")}return D4e(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=B4e.exec(r))!==null&&n!==void 0?n:[],a=Cw(s,3),o=a[1],l=a[2];return new t(parseFloat(o),l??"")}}])})();function Ure(t){if(t.includes(Kh))return Kh;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=kV.exec(e))!==null&&r!==void 0?r:[],s=Cw(n,4),a=s[1],o=s[2],l=s[3],c=N0.parse(a??""),u=N0.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Kh;e=e.replace(kV,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,m=(f=OV.exec(e))!==null&&f!==void 0?f:[],g=Cw(m,4),x=g[1],v=g[2],y=g[3],w=N0.parse(x??""),_=N0.parse(y??""),A=v==="+"?w.add(_):w.subtract(_);if(A.isNaN())return Kh;e=e.replace(OV,A.toString())}return e}var RV=/\(([^()]*)\)/;function q4e(t){for(var e=t;e.includes("(");){var r=RV.exec(e),n=Cw(r,2),s=n[1];e=e.replace(RV,Ure(s))}return e}function V4e(t){var e=t.replace(/\s+/g,"");return e=q4e(e),e=Ure(e),e}function H4e(t){try{return V4e(t)}catch{return Kh}}function FT(t){var e=H4e(t.slice(5,-1));return e===Kh?"":e}var W4e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],G4e=["dx","dy","angle","className","breakAll"];function WO(){return WO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WO.apply(this,arguments)}function IV(t,e){if(t==null)return{};var r=K4e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function K4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function MV(t,e){return J4e(t)||Q4e(t,e)||Y4e(t,e)||X4e()}function X4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y4e(t,e){if(t){if(typeof t=="string")return DV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DV(t,e)}}function DV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Q4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function J4e(t){if(Array.isArray(t))return t}var zre=/[ \f\n\r\t\v\u2028\u2029]+/,qre=function(e){var r=e.children,n=e.breakAll,s=e.style;try{var a=[];It(r)||(n?a=r.toString().split(""):a=r.toString().split(zre));var o=a.map(function(c){return{word:c,width:pg(c,s).width}}),l=n?0:pg(" ",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Z4e=function(e,r,n,s,a){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=Re(o),f=l,m=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce(function(z,q){var V=q.word,W=q.width,B=z[z.length-1];if(B&&(s==null||a||B.width+W+n<Number(s)))B.words.push(V),B.width+=W+n;else{var F={words:[V],width:W};z.push(F)}return z},[])},g=m(r),x=function(H){return H.reduce(function(z,q){return z.width>q.width?z:q})};if(!d)return g;for(var v="…",y=function(H){var z=f.slice(0,H),q=qre({breakAll:u,style:c,children:z+v}).wordsWithComputedWidth,V=m(q),W=V.length>o||x(V).width>Number(s);return[W,V]},w=0,_=f.length-1,A=0,C;w<=_&&A<=f.length-1;){var S=Math.floor((w+_)/2),E=S-1,P=y(E),R=MV(P,2),O=R[0],D=R[1],I=y(S),$=MV(I,1),M=$[0];if(!O&&!M&&(w=S+1),O&&M&&(_=S-1),!O&&M){C=D;break}A++}return C||g},LV=function(e){var r=It(e)?[]:e.toString().split(zre);return[{words:r}]},eBe=function(e){var r=e.width,n=e.scaleToFit,s=e.children,a=e.style,o=e.breakAll,l=e.maxLines;if((r||n)&&!Ld.isSsr){var c,u,d=qre({breakAll:o,children:s,style:a});if(d){var f=d.wordsWithComputedWidth,m=d.spaceWidth;c=f,u=m}else return LV(s);return Z4e({breakAll:o,children:s,maxLines:l,style:a},c,u,r,n)}return LV(s)},$V="#808080",wd=function(e){var r=e.x,n=r===void 0?0:r,s=e.y,a=s===void 0?0:s,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,m=e.textAnchor,g=m===void 0?"start":m,x=e.verticalAnchor,v=x===void 0?"end":x,y=e.fill,w=y===void 0?$V:y,_=IV(e,W4e),A=N.useMemo(function(){return eBe({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:f,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,f,_.style,_.width]),C=_.dx,S=_.dy,E=_.angle,P=_.className,R=_.breakAll,O=IV(_,G4e);if(!Qn(n)||!Qn(a))return null;var D=n+(Re(C)?C:0),I=a+(Re(S)?S:0),$;switch(v){case"start":$=FT("calc(".concat(u,")"));break;case"middle":$=FT("calc(".concat((A.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:$=FT("calc(".concat(A.length-1," * -").concat(l,")"));break}var M=[];if(f){var U=A[0].width,H=_.width;M.push("scale(".concat((Re(H)?H/U:1)/U,")"))}return E&&M.push("rotate(".concat(E,", ").concat(D,", ").concat(I,")")),M.length&&(O.transform=M.join(" ")),G.createElement("text",WO({},lt(O,!0),{x:D,y:I,className:Rt("recharts-text",P),textAnchor:g,fill:w.includes("url")?$V:w}),A.map(function(z,q){var V=z.words.join(R?"":" ");return G.createElement("tspan",{x:D,dy:q===0?$:l,key:"".concat(V,"-").concat(q)},V)}))};function Cc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tBe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ED(t){let e,r,n;t.length!==2?(e=Cc,r=(l,c)=>Cc(t(l),c),n=(l,c)=>t(l)-c):(e=t===Cc||t===tBe?t:rBe,r=t,n=t);function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=s(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:s,center:o,right:a}}function rBe(){return 0}function Vre(t){return t===null?NaN:+t}function*nBe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const sBe=ED(Cc),xy=sBe.right;ED(Vre).center;class FV extends Map{constructor(e,r=oBe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(BV(this,e))}has(e){return super.has(BV(this,e))}set(e,r){return super.set(aBe(this,e),r)}delete(e){return super.delete(iBe(this,e))}}function BV({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function aBe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function iBe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function oBe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function lBe(t=Cc){if(t===Cc)return Hre;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Hre(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const cBe=Math.sqrt(50),uBe=Math.sqrt(10),dBe=Math.sqrt(2);function Tw(t,e,r){const n=(e-t)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),o=a>=cBe?10:a>=uBe?5:a>=dBe?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?Tw(t,e,r*2):[l,c,u]}function GO(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[s,a,o]=n?Tw(e,t,r):Tw(t,e,r);if(!(a>=s))return[];const l=a-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(a-u)/-o;else for(let u=0;u<l;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function KO(t,e,r){return e=+e,t=+t,r=+r,Tw(t,e,r)[2]}function XO(t,e,r){e=+e,t=+t,r=+r;const n=e<t,s=n?KO(e,t,r):KO(t,e,r);return(n?-1:1)*(s<0?1/-s:s)}function UV(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function zV(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Wre(t,e,r=0,n=1/0,s){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(s=s===void 0?Hre:lBe(s);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),g=Math.max(r,Math.floor(e-u*f/c+m)),x=Math.min(n,Math.floor(e+(c-u)*f/c+m));Wre(t,e,g,x,s)}const a=t[e];let o=r,l=n;for(Rm(t,r,e),s(t[n],a)>0&&Rm(t,r,n);o<l;){for(Rm(t,o,l),++o,--l;s(t[o],a)<0;)++o;for(;s(t[l],a)>0;)--l}s(t[r],a)===0?Rm(t,r,l):(++l,Rm(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Rm(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function hBe(t,e,r){if(t=Float64Array.from(nBe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return zV(t);if(e>=1)return UV(t);var n,s=(n-1)*e,a=Math.floor(s),o=UV(Wre(t,a).subarray(0,a+1)),l=zV(t.subarray(a+1));return o+(l-o)*(s-a)}}function fBe(t,e,r=Vre){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,s=(n-1)*e,a=Math.floor(s),o=+r(t[a],a,t),l=+r(t[a+1],a+1,t);return o+(l-o)*(s-a)}}function pBe(t,e,r){t=+t,e=+e,r=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(s);++n<s;)a[n]=t+n*r;return a}function di(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function kl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const YO=Symbol("implicit");function CD(){var t=new FV,e=[],r=[],n=YO;function s(a){let o=t.get(a);if(o===void 0){if(n!==YO)return n;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new FV;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return CD(e,r).unknown(n)},di.apply(s,arguments),s}function iv(){var t=CD().unknown(void 0),e=t.domain,r=t.range,n=0,s=1,a,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var m=e().length,g=s<n,x=g?s:n,v=g?n:s;a=(v-x)/Math.max(1,m-c+u*2),l&&(a=Math.floor(a)),x+=(v-x-a*(m-c))*d,o=a*(1-c),l&&(x=Math.round(x),o=Math.round(o));var y=pBe(m).map(function(w){return x+a*w});return r(g?y.reverse():y)}return t.domain=function(m){return arguments.length?(e(m),f()):e()},t.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,f()):[n,s]},t.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(m){return arguments.length?(l=!!m,f()):l},t.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},t.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},t.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},t.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},t.copy=function(){return iv(e(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},di.apply(f(),arguments)}function Gre(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Gre(e())},t}function mg(){return Gre(iv.apply(null,arguments).paddingInner(1))}function TD(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Kre(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function by(){}var ov=.7,Pw=1/ov,df="\\s*([+-]?\\d+)\\s*",lv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mBe=/^#([0-9a-f]{3,8})$/,gBe=new RegExp(`^rgb\\(${df},${df},${df}\\)$`),vBe=new RegExp(`^rgb\\(${xo},${xo},${xo}\\)$`),yBe=new RegExp(`^rgba\\(${df},${df},${df},${lv}\\)$`),xBe=new RegExp(`^rgba\\(${xo},${xo},${xo},${lv}\\)$`),bBe=new RegExp(`^hsl\\(${lv},${xo},${xo}\\)$`),wBe=new RegExp(`^hsla\\(${lv},${xo},${xo},${lv}\\)$`),qV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};TD(by,cv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:VV,formatHex:VV,formatHex8:_Be,formatHsl:SBe,formatRgb:HV,toString:HV});function VV(){return this.rgb().formatHex()}function _Be(){return this.rgb().formatHex8()}function SBe(){return Xre(this).formatHsl()}function HV(){return this.rgb().formatRgb()}function cv(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=mBe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?WV(e):r===3?new la(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?E0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?E0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gBe.exec(t))?new la(e[1],e[2],e[3],1):(e=vBe.exec(t))?new la(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=yBe.exec(t))?E0(e[1],e[2],e[3],e[4]):(e=xBe.exec(t))?E0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bBe.exec(t))?XV(e[1],e[2]/100,e[3]/100,1):(e=wBe.exec(t))?XV(e[1],e[2]/100,e[3]/100,e[4]):qV.hasOwnProperty(t)?WV(qV[t]):t==="transparent"?new la(NaN,NaN,NaN,0):null}function WV(t){return new la(t>>16&255,t>>8&255,t&255,1)}function E0(t,e,r,n){return n<=0&&(t=e=r=NaN),new la(t,e,r,n)}function jBe(t){return t instanceof by||(t=cv(t)),t?(t=t.rgb(),new la(t.r,t.g,t.b,t.opacity)):new la}function QO(t,e,r,n){return arguments.length===1?jBe(t):new la(t,e,r,n??1)}function la(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}TD(la,QO,Kre(by,{brighter(t){return t=t==null?Pw:Math.pow(Pw,t),new la(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ov:Math.pow(ov,t),new la(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new la(Xu(this.r),Xu(this.g),Xu(this.b),kw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GV,formatHex:GV,formatHex8:ABe,formatRgb:KV,toString:KV}));function GV(){return`#${Mu(this.r)}${Mu(this.g)}${Mu(this.b)}`}function ABe(){return`#${Mu(this.r)}${Mu(this.g)}${Mu(this.b)}${Mu((isNaN(this.opacity)?1:this.opacity)*255)}`}function KV(){const t=kw(this.opacity);return`${t===1?"rgb(":"rgba("}${Xu(this.r)}, ${Xu(this.g)}, ${Xu(this.b)}${t===1?")":`, ${t})`}`}function kw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Mu(t){return t=Xu(t),(t<16?"0":"")+t.toString(16)}function XV(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Oi(t,e,r,n)}function Xre(t){if(t instanceof Oi)return new Oi(t.h,t.s,t.l,t.opacity);if(t instanceof by||(t=cv(t)),!t)return new Oi;if(t instanceof Oi)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,s=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,l=a-s,c=(a+s)/2;return l?(e===a?o=(r-n)/l+(r<n)*6:r===a?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?a+s:2-a-s,o*=60):l=c>0&&c<1?0:o,new Oi(o,l,c,t.opacity)}function NBe(t,e,r,n){return arguments.length===1?Xre(t):new Oi(t,e,r,n??1)}function Oi(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}TD(Oi,NBe,Kre(by,{brighter(t){return t=t==null?Pw:Math.pow(Pw,t),new Oi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ov:Math.pow(ov,t),new Oi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,s=2*r-n;return new la(BT(t>=240?t-240:t+120,s,n),BT(t,s,n),BT(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new Oi(YV(this.h),C0(this.s),C0(this.l),kw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=kw(this.opacity);return`${t===1?"hsl(":"hsla("}${YV(this.h)}, ${C0(this.s)*100}%, ${C0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function YV(t){return t=(t||0)%360,t<0?t+360:t}function C0(t){return Math.max(0,Math.min(1,t||0))}function BT(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const PD=t=>()=>t;function EBe(t,e){return function(r){return t+r*e}}function CBe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function TBe(t){return(t=+t)==1?Yre:function(e,r){return r-e?CBe(e,r,t):PD(isNaN(e)?r:e)}}function Yre(t,e){var r=e-t;return r?EBe(t,r):PD(isNaN(t)?e:t)}const QV=(function t(e){var r=TBe(e);function n(s,a){var o=r((s=QO(s)).r,(a=QO(a)).r),l=r(s.g,a.g),c=r(s.b,a.b),u=Yre(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=t,n})(1);function PBe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=t[s]*(1-a)+e[s]*a;return n}}function kBe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function OBe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,s=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)s[o]=Lp(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(l){for(o=0;o<n;++o)a[o]=s[o](l);return a}}function RBe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Ow(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function IBe(t,e){var r={},n={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?r[s]=Lp(t[s],e[s]):n[s]=e[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var JO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,UT=new RegExp(JO.source,"g");function MBe(t){return function(){return t}}function DBe(t){return function(e){return t(e)+""}}function LBe(t,e){var r=JO.lastIndex=UT.lastIndex=0,n,s,a,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=JO.exec(t))&&(s=UT.exec(e));)(a=s.index)>r&&(a=e.slice(r,a),l[o]?l[o]+=a:l[++o]=a),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Ow(n,s)})),r=UT.lastIndex;return r<e.length&&(a=e.slice(r),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?DBe(c[0].x):MBe(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Lp(t,e){var r=typeof e,n;return e==null||r==="boolean"?PD(e):(r==="number"?Ow:r==="string"?(n=cv(e))?(e=n,QV):LBe:e instanceof cv?QV:e instanceof Date?RBe:kBe(e)?PBe:Array.isArray(e)?OBe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?IBe:Ow)(t,e)}function kD(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function $Be(t,e){e===void 0&&(e=t,t=Lp);for(var r=0,n=e.length-1,s=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(s,s=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[l](o-l)}}function FBe(t){return function(){return t}}function Rw(t){return+t}var JV=[0,1];function Us(t){return t}function ZO(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:FBe(isNaN(e)?NaN:.5)}function BBe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function UBe(t,e,r){var n=t[0],s=t[1],a=e[0],o=e[1];return s<n?(n=ZO(s,n),a=r(o,a)):(n=ZO(n,s),a=r(a,o)),function(l){return a(n(l))}}function zBe(t,e,r){var n=Math.min(t.length,e.length)-1,s=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)s[o]=ZO(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(l){var c=xy(t,l,1,n)-1;return a[c](s[c](l))}}function wy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ZS(){var t=JV,e=JV,r=Lp,n,s,a,o=Us,l,c,u;function d(){var m=Math.min(t.length,e.length);return o!==Us&&(o=BBe(t[0],t[m-1])),l=m>2?zBe:UBe,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?a:(c||(c=l(t.map(n),e,r)))(n(o(m)))}return f.invert=function(m){return o(s((u||(u=l(e,t.map(n),Ow)))(m)))},f.domain=function(m){return arguments.length?(t=Array.from(m,Rw),d()):t.slice()},f.range=function(m){return arguments.length?(e=Array.from(m),d()):e.slice()},f.rangeRound=function(m){return e=Array.from(m),r=kD,d()},f.clamp=function(m){return arguments.length?(o=m?!0:Us,d()):o!==Us},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(a=m,f):a},function(m,g){return n=m,s=g,d()}}function OD(){return ZS()(Us,Us)}function qBe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Iw(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function zf(t){return t=Iw(Math.abs(t)),t?t[1]:NaN}function VBe(t,e){return function(r,n){for(var s=r.length,a=[],o=0,l=t[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),a.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function HBe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var WBe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uv(t){if(!(e=WBe.exec(t)))throw new Error("invalid format: "+t);var e;return new RD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}uv.prototype=RD.prototype;function RD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}RD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GBe(t){e:for(var e=t.length,r=1,n=-1,s;r<e;++r)switch(t[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(s+1):t}var Qre;function KBe(t,e){var r=Iw(t,e);if(!r)return t+"";var n=r[0],s=r[1],a=s-(Qre=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Iw(t,Math.max(0,e+a-1))[0]}function ZV(t,e){var r=Iw(t,e);if(!r)return t+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const eH={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:qBe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ZV(t*100,e),r:ZV,s:KBe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function tH(t){return t}var rH=Array.prototype.map,nH=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function XBe(t){var e=t.grouping===void 0||t.thousands===void 0?tH:VBe(rH.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?tH:HBe(rH.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=uv(f);var m=f.fill,g=f.align,x=f.sign,v=f.symbol,y=f.zero,w=f.width,_=f.comma,A=f.precision,C=f.trim,S=f.type;S==="n"?(_=!0,S="g"):eH[S]||(A===void 0&&(A=12),C=!0,S="g"),(y||m==="0"&&g==="=")&&(y=!0,m="0",g="=");var E=v==="$"?r:v==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",P=v==="$"?n:/[%p]/.test(S)?o:"",R=eH[S],O=/[defgprs%]/.test(S);A=A===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function D(I){var $=E,M=P,U,H,z;if(S==="c")M=R(I)+M,I="";else{I=+I;var q=I<0||1/I<0;if(I=isNaN(I)?c:R(Math.abs(I),A),C&&(I=GBe(I)),q&&+I==0&&x!=="+"&&(q=!1),$=(q?x==="("?x:l:x==="-"||x==="("?"":x)+$,M=(S==="s"?nH[8+Qre/3]:"")+M+(q&&x==="("?")":""),O){for(U=-1,H=I.length;++U<H;)if(z=I.charCodeAt(U),48>z||z>57){M=(z===46?s+I.slice(U+1):I.slice(U))+M,I=I.slice(0,U);break}}}_&&!y&&(I=e(I,1/0));var V=$.length+I.length+M.length,W=V<w?new Array(w-V+1).join(m):"";switch(_&&y&&(I=e(W+I,W.length?w-M.length:1/0),W=""),g){case"<":I=$+I+M+W;break;case"=":I=$+W+I+M;break;case"^":I=W.slice(0,V=W.length>>1)+$+I+M+W.slice(V);break;default:I=W+$+I+M;break}return a(I)}return D.toString=function(){return f+""},D}function d(f,m){var g=u((f=uv(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(zf(m)/3)))*3,v=Math.pow(10,-x),y=nH[8+x/3];return function(w){return g(v*w)+y}}return{format:u,formatPrefix:d}}var T0,ID,Jre;YBe({thousands:",",grouping:[3],currency:["$",""]});function YBe(t){return T0=XBe(t),ID=T0.format,Jre=T0.formatPrefix,T0}function QBe(t){return Math.max(0,-zf(Math.abs(t)))}function JBe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zf(e)/3)))*3-zf(Math.abs(t)))}function ZBe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zf(e)-zf(t))+1}function Zre(t,e,r,n){var s=XO(t,e,r),a;switch(n=uv(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=JBe(s,o))&&(n.precision=a),Jre(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=ZBe(s,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=QBe(s))&&(n.precision=a-(n.type==="%")*2);break}}return ID(n)}function Yc(t){var e=t.domain;return t.ticks=function(r){var n=e();return GO(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var s=e();return Zre(s[0],s[s.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),s=0,a=n.length-1,o=n[s],l=n[a],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=a,a=u);d-- >0;){if(u=KO(o,l,r),u===c)return n[s]=o,n[a]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Mw(){var t=OD();return t.copy=function(){return wy(t,Mw())},di.apply(t,arguments),Yc(t)}function ene(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Rw),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return ene(t).unknown(e)},t=arguments.length?Array.from(t,Rw):[0,1],Yc(r)}function tne(t,e){t=t.slice();var r=0,n=t.length-1,s=t[r],a=t[n],o;return a<s&&(o=r,r=n,n=o,o=s,s=a,a=o),t[r]=e.floor(s),t[n]=e.ceil(a),t}function sH(t){return Math.log(t)}function aH(t){return Math.exp(t)}function e3e(t){return-Math.log(-t)}function t3e(t){return-Math.exp(-t)}function r3e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function n3e(t){return t===10?r3e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function s3e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function iH(t){return(e,r)=>-t(-e,r)}function MD(t){const e=t(sH,aH),r=e.domain;let n=10,s,a;function o(){return s=s3e(n),a=n3e(n),r()[0]<0?(s=iH(s),a=iH(a),t(e3e,t3e)):t(sH,aH),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=s(u),g=s(d),x,v;const y=l==null?10:+l;let w=[];if(!(n%1)&&g-m<y){if(m=Math.floor(m),g=Math.ceil(g),u>0){for(;m<=g;++m)for(x=1;x<n;++x)if(v=m<0?x/a(-m):x*a(m),!(v<u)){if(v>d)break;w.push(v)}}else for(;m<=g;++m)for(x=n-1;x>=1;--x)if(v=m>0?x/a(-m):x*a(m),!(v<u)){if(v>d)break;w.push(v)}w.length*2<y&&(w=GO(u,d,y))}else w=GO(m,g,Math.min(g-m,y)).map(a);return f?w.reverse():w},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=uv(c)).precision==null&&(c.trim=!0),c=ID(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/a(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(tne(r(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),e}function rne(){const t=MD(ZS()).domain([1,10]);return t.copy=()=>wy(t,rne()).base(t.base()),di.apply(t,arguments),t}function oH(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function lH(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function DD(t){var e=1,r=t(oH(e),lH(e));return r.constant=function(n){return arguments.length?t(oH(e=+n),lH(e)):e},Yc(r)}function nne(){var t=DD(ZS());return t.copy=function(){return wy(t,nne()).constant(t.constant())},di.apply(t,arguments)}function cH(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function a3e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function i3e(t){return t<0?-t*t:t*t}function LD(t){var e=t(Us,Us),r=1;function n(){return r===1?t(Us,Us):r===.5?t(a3e,i3e):t(cH(r),cH(1/r))}return e.exponent=function(s){return arguments.length?(r=+s,n()):r},Yc(e)}function $D(){var t=LD(ZS());return t.copy=function(){return wy(t,$D()).exponent(t.exponent())},di.apply(t,arguments),t}function o3e(){return $D.apply(null,arguments).exponent(.5)}function uH(t){return Math.sign(t)*t*t}function l3e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function sne(){var t=OD(),e=[0,1],r=!1,n;function s(a){var o=l3e(t(a));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(a){return t.invert(uH(a))},s.domain=function(a){return arguments.length?(t.domain(a),s):t.domain()},s.range=function(a){return arguments.length?(t.range((e=Array.from(a,Rw)).map(uH)),s):e.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(t.clamp(a),s):t.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return sne(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},di.apply(s,arguments),Yc(s)}function ane(){var t=[],e=[],r=[],n;function s(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=fBe(t,o/l);return a}function a(o){return o==null||isNaN(o=+o)?n:e[xy(r,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Cc),s()},a.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return ane().domain(t).range(e).unknown(n)},di.apply(a,arguments)}function ine(){var t=0,e=1,r=1,n=[.5],s=[0,1],a;function o(c){return c!=null&&c<=c?s[xy(n,c,0,r)]:a}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return ine().domain([t,e]).range(s).unknown(a)},di.apply(Yc(o),arguments)}function one(){var t=[.5],e=[0,1],r,n=1;function s(a){return a!=null&&a<=a?e[xy(t,a,0,n)]:r}return s.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return one().domain(t).range(e).unknown(r)},di.apply(s,arguments)}const zT=new Date,qT=new Date;function Jn(t,e,r,n){function s(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(t(a=new Date(+a)),a),s.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),s.round=a=>{const o=s(a),l=s.ceil(a);return a-o<l-a?o:l},s.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),s.range=(a,o,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),e(a,l),t(a);while(u<a&&a<o);return c},s.filter=a=>Jn(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),r&&(s.count=(a,o)=>(zT.setTime(+a),qT.setTime(+o),t(zT),t(qT),Math.floor(r(zT,qT))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?o=>n(o)%a===0:o=>s.count(0,o)%a===0):s)),s}const Dw=Jn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Dw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Jn(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Dw);Dw.range;const ol=1e3,ei=ol*60,ll=ei*60,_l=ll*24,FD=_l*7,dH=_l*30,VT=_l*365,Du=Jn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ol)},(t,e)=>(e-t)/ol,t=>t.getUTCSeconds());Du.range;const BD=Jn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ol)},(t,e)=>{t.setTime(+t+e*ei)},(t,e)=>(e-t)/ei,t=>t.getMinutes());BD.range;const UD=Jn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ei)},(t,e)=>(e-t)/ei,t=>t.getUTCMinutes());UD.range;const zD=Jn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ol-t.getMinutes()*ei)},(t,e)=>{t.setTime(+t+e*ll)},(t,e)=>(e-t)/ll,t=>t.getHours());zD.range;const qD=Jn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ll)},(t,e)=>(e-t)/ll,t=>t.getUTCHours());qD.range;const _y=Jn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ei)/_l,t=>t.getDate()-1);_y.range;const ej=Jn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/_l,t=>t.getUTCDate()-1);ej.range;const lne=Jn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/_l,t=>Math.floor(t/_l));lne.range;function $d(t){return Jn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ei)/FD)}const tj=$d(0),Lw=$d(1),c3e=$d(2),u3e=$d(3),qf=$d(4),d3e=$d(5),h3e=$d(6);tj.range;Lw.range;c3e.range;u3e.range;qf.range;d3e.range;h3e.range;function Fd(t){return Jn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/FD)}const rj=Fd(0),$w=Fd(1),f3e=Fd(2),p3e=Fd(3),Vf=Fd(4),m3e=Fd(5),g3e=Fd(6);rj.range;$w.range;f3e.range;p3e.range;Vf.range;m3e.range;g3e.range;const VD=Jn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());VD.range;const HD=Jn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());HD.range;const Sl=Jn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Sl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Jn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Sl.range;const jl=Jn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());jl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Jn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});jl.range;function cne(t,e,r,n,s,a){const o=[[Du,1,ol],[Du,5,5*ol],[Du,15,15*ol],[Du,30,30*ol],[a,1,ei],[a,5,5*ei],[a,15,15*ei],[a,30,30*ei],[s,1,ll],[s,3,3*ll],[s,6,6*ll],[s,12,12*ll],[n,1,_l],[n,2,2*_l],[r,1,FD],[e,1,dH],[e,3,3*dH],[t,1,VT]];function l(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const g=f&&typeof f.range=="function"?f:c(u,d,f),x=g?g.range(u,+d+1):[];return m?x.reverse():x}function c(u,d,f){const m=Math.abs(d-u)/f,g=ED(([,,y])=>y).right(o,m);if(g===o.length)return t.every(XO(u/VT,d/VT,f));if(g===0)return Dw.every(Math.max(XO(u,d,f),1));const[x,v]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return x.every(v)}return[l,c]}const[v3e,y3e]=cne(jl,HD,rj,lne,qD,UD),[x3e,b3e]=cne(Sl,VD,tj,_y,zD,BD);function HT(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function WT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Im(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function w3e(t){var e=t.dateTime,r=t.date,n=t.time,s=t.periods,a=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Mm(s),d=Dm(s),f=Mm(a),m=Dm(a),g=Mm(o),x=Dm(o),v=Mm(l),y=Dm(l),w=Mm(c),_=Dm(c),A={a:q,A:V,b:W,B,c:null,d:vH,e:vH,f:V3e,g:e5e,G:r5e,H:U3e,I:z3e,j:q3e,L:une,m:H3e,M:W3e,p:F,q:Y,Q:bH,s:wH,S:G3e,u:K3e,U:X3e,V:Y3e,w:Q3e,W:J3e,x:null,X:null,y:Z3e,Y:t5e,Z:n5e,"%":xH},C={a:oe,A:xe,b:J,B:Ee,c:null,d:yH,e:yH,f:o5e,g:v5e,G:x5e,H:s5e,I:a5e,j:i5e,L:hne,m:l5e,M:c5e,p:ye,q:je,Q:bH,s:wH,S:u5e,u:d5e,U:h5e,V:f5e,w:p5e,W:m5e,x:null,X:null,y:g5e,Y:y5e,Z:b5e,"%":xH},S={a:D,A:I,b:$,B:M,c:U,d:mH,e:mH,f:L3e,g:pH,G:fH,H:gH,I:gH,j:R3e,L:D3e,m:O3e,M:I3e,p:O,q:k3e,Q:F3e,s:B3e,S:M3e,u:N3e,U:E3e,V:C3e,w:A3e,W:T3e,x:H,X:z,y:pH,Y:fH,Z:P3e,"%":$3e};A.x=E(r,A),A.X=E(n,A),A.c=E(e,A),C.x=E(r,C),C.X=E(n,C),C.c=E(e,C);function E(pe,Se){return function(Oe){var ve=[],Xe=-1,$e=0,at=pe.length,Ft,rr,_e;for(Oe instanceof Date||(Oe=new Date(+Oe));++Xe<at;)pe.charCodeAt(Xe)===37&&(ve.push(pe.slice($e,Xe)),(rr=hH[Ft=pe.charAt(++Xe)])!=null?Ft=pe.charAt(++Xe):rr=Ft==="e"?" ":"0",(_e=Se[Ft])&&(Ft=_e(Oe,rr)),ve.push(Ft),$e=Xe+1);return ve.push(pe.slice($e,Xe)),ve.join("")}}function P(pe,Se){return function(Oe){var ve=Im(1900,void 0,1),Xe=R(ve,pe,Oe+="",0),$e,at;if(Xe!=Oe.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(Se&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?($e=WT(Im(ve.y,0,1)),at=$e.getUTCDay(),$e=at>4||at===0?$w.ceil($e):$w($e),$e=ej.offset($e,(ve.V-1)*7),ve.y=$e.getUTCFullYear(),ve.m=$e.getUTCMonth(),ve.d=$e.getUTCDate()+(ve.w+6)%7):($e=HT(Im(ve.y,0,1)),at=$e.getDay(),$e=at>4||at===0?Lw.ceil($e):Lw($e),$e=_y.offset($e,(ve.V-1)*7),ve.y=$e.getFullYear(),ve.m=$e.getMonth(),ve.d=$e.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),at="Z"in ve?WT(Im(ve.y,0,1)).getUTCDay():HT(Im(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(at+5)%7:ve.w+ve.U*7-(at+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,WT(ve)):HT(ve)}}function R(pe,Se,Oe,ve){for(var Xe=0,$e=Se.length,at=Oe.length,Ft,rr;Xe<$e;){if(ve>=at)return-1;if(Ft=Se.charCodeAt(Xe++),Ft===37){if(Ft=Se.charAt(Xe++),rr=S[Ft in hH?Se.charAt(Xe++):Ft],!rr||(ve=rr(pe,Oe,ve))<0)return-1}else if(Ft!=Oe.charCodeAt(ve++))return-1}return ve}function O(pe,Se,Oe){var ve=u.exec(Se.slice(Oe));return ve?(pe.p=d.get(ve[0].toLowerCase()),Oe+ve[0].length):-1}function D(pe,Se,Oe){var ve=g.exec(Se.slice(Oe));return ve?(pe.w=x.get(ve[0].toLowerCase()),Oe+ve[0].length):-1}function I(pe,Se,Oe){var ve=f.exec(Se.slice(Oe));return ve?(pe.w=m.get(ve[0].toLowerCase()),Oe+ve[0].length):-1}function $(pe,Se,Oe){var ve=w.exec(Se.slice(Oe));return ve?(pe.m=_.get(ve[0].toLowerCase()),Oe+ve[0].length):-1}function M(pe,Se,Oe){var ve=v.exec(Se.slice(Oe));return ve?(pe.m=y.get(ve[0].toLowerCase()),Oe+ve[0].length):-1}function U(pe,Se,Oe){return R(pe,e,Se,Oe)}function H(pe,Se,Oe){return R(pe,r,Se,Oe)}function z(pe,Se,Oe){return R(pe,n,Se,Oe)}function q(pe){return o[pe.getDay()]}function V(pe){return a[pe.getDay()]}function W(pe){return c[pe.getMonth()]}function B(pe){return l[pe.getMonth()]}function F(pe){return s[+(pe.getHours()>=12)]}function Y(pe){return 1+~~(pe.getMonth()/3)}function oe(pe){return o[pe.getUTCDay()]}function xe(pe){return a[pe.getUTCDay()]}function J(pe){return c[pe.getUTCMonth()]}function Ee(pe){return l[pe.getUTCMonth()]}function ye(pe){return s[+(pe.getUTCHours()>=12)]}function je(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var Se=E(pe+="",A);return Se.toString=function(){return pe},Se},parse:function(pe){var Se=P(pe+="",!1);return Se.toString=function(){return pe},Se},utcFormat:function(pe){var Se=E(pe+="",C);return Se.toString=function(){return pe},Se},utcParse:function(pe){var Se=P(pe+="",!0);return Se.toString=function(){return pe},Se}}}var hH={"-":"",_:" ",0:"0"},us=/^\s*\d+/,_3e=/^%/,S3e=/[\\^$*+?|[\]().{}]/g;function mr(t,e,r){var n=t<0?"-":"",s=(n?-t:t)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(e)+s:s)}function j3e(t){return t.replace(S3e,"\\$&")}function Mm(t){return new RegExp("^(?:"+t.map(j3e).join("|")+")","i")}function Dm(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function A3e(t,e,r){var n=us.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function N3e(t,e,r){var n=us.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function E3e(t,e,r){var n=us.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function C3e(t,e,r){var n=us.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function T3e(t,e,r){var n=us.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function fH(t,e,r){var n=us.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function pH(t,e,r){var n=us.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function P3e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function k3e(t,e,r){var n=us.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function O3e(t,e,r){var n=us.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function mH(t,e,r){var n=us.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function R3e(t,e,r){var n=us.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function gH(t,e,r){var n=us.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function I3e(t,e,r){var n=us.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function M3e(t,e,r){var n=us.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function D3e(t,e,r){var n=us.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function L3e(t,e,r){var n=us.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function $3e(t,e,r){var n=_3e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function F3e(t,e,r){var n=us.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function B3e(t,e,r){var n=us.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function vH(t,e){return mr(t.getDate(),e,2)}function U3e(t,e){return mr(t.getHours(),e,2)}function z3e(t,e){return mr(t.getHours()%12||12,e,2)}function q3e(t,e){return mr(1+_y.count(Sl(t),t),e,3)}function une(t,e){return mr(t.getMilliseconds(),e,3)}function V3e(t,e){return une(t,e)+"000"}function H3e(t,e){return mr(t.getMonth()+1,e,2)}function W3e(t,e){return mr(t.getMinutes(),e,2)}function G3e(t,e){return mr(t.getSeconds(),e,2)}function K3e(t){var e=t.getDay();return e===0?7:e}function X3e(t,e){return mr(tj.count(Sl(t)-1,t),e,2)}function dne(t){var e=t.getDay();return e>=4||e===0?qf(t):qf.ceil(t)}function Y3e(t,e){return t=dne(t),mr(qf.count(Sl(t),t)+(Sl(t).getDay()===4),e,2)}function Q3e(t){return t.getDay()}function J3e(t,e){return mr(Lw.count(Sl(t)-1,t),e,2)}function Z3e(t,e){return mr(t.getFullYear()%100,e,2)}function e5e(t,e){return t=dne(t),mr(t.getFullYear()%100,e,2)}function t5e(t,e){return mr(t.getFullYear()%1e4,e,4)}function r5e(t,e){var r=t.getDay();return t=r>=4||r===0?qf(t):qf.ceil(t),mr(t.getFullYear()%1e4,e,4)}function n5e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+mr(e/60|0,"0",2)+mr(e%60,"0",2)}function yH(t,e){return mr(t.getUTCDate(),e,2)}function s5e(t,e){return mr(t.getUTCHours(),e,2)}function a5e(t,e){return mr(t.getUTCHours()%12||12,e,2)}function i5e(t,e){return mr(1+ej.count(jl(t),t),e,3)}function hne(t,e){return mr(t.getUTCMilliseconds(),e,3)}function o5e(t,e){return hne(t,e)+"000"}function l5e(t,e){return mr(t.getUTCMonth()+1,e,2)}function c5e(t,e){return mr(t.getUTCMinutes(),e,2)}function u5e(t,e){return mr(t.getUTCSeconds(),e,2)}function d5e(t){var e=t.getUTCDay();return e===0?7:e}function h5e(t,e){return mr(rj.count(jl(t)-1,t),e,2)}function fne(t){var e=t.getUTCDay();return e>=4||e===0?Vf(t):Vf.ceil(t)}function f5e(t,e){return t=fne(t),mr(Vf.count(jl(t),t)+(jl(t).getUTCDay()===4),e,2)}function p5e(t){return t.getUTCDay()}function m5e(t,e){return mr($w.count(jl(t)-1,t),e,2)}function g5e(t,e){return mr(t.getUTCFullYear()%100,e,2)}function v5e(t,e){return t=fne(t),mr(t.getUTCFullYear()%100,e,2)}function y5e(t,e){return mr(t.getUTCFullYear()%1e4,e,4)}function x5e(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Vf(t):Vf.ceil(t),mr(t.getUTCFullYear()%1e4,e,4)}function b5e(){return"+0000"}function xH(){return"%"}function bH(t){return+t}function wH(t){return Math.floor(+t/1e3)}var Th,pne,mne;w5e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function w5e(t){return Th=w3e(t),pne=Th.format,Th.parse,mne=Th.utcFormat,Th.utcParse,Th}function _5e(t){return new Date(t)}function S5e(t){return t instanceof Date?+t:+new Date(+t)}function WD(t,e,r,n,s,a,o,l,c,u){var d=OD(),f=d.invert,m=d.domain,g=u(".%L"),x=u(":%S"),v=u("%I:%M"),y=u("%I %p"),w=u("%a %d"),_=u("%b %d"),A=u("%B"),C=u("%Y");function S(E){return(c(E)<E?g:l(E)<E?x:o(E)<E?v:a(E)<E?y:n(E)<E?s(E)<E?w:_:r(E)<E?A:C)(E)}return d.invert=function(E){return new Date(f(E))},d.domain=function(E){return arguments.length?m(Array.from(E,S5e)):m().map(_5e)},d.ticks=function(E){var P=m();return t(P[0],P[P.length-1],E??10)},d.tickFormat=function(E,P){return P==null?S:u(P)},d.nice=function(E){var P=m();return(!E||typeof E.range!="function")&&(E=e(P[0],P[P.length-1],E??10)),E?m(tne(P,E)):d},d.copy=function(){return wy(d,WD(t,e,r,n,s,a,o,l,c,u))},d}function j5e(){return di.apply(WD(x3e,b3e,Sl,VD,tj,_y,zD,BD,Du,pne).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function A5e(){return di.apply(WD(v3e,y3e,jl,HD,rj,ej,qD,UD,Du,mne).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function nj(){var t=0,e=1,r,n,s,a,o=Us,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(a(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=a(t=+t),n=a(e=+e),s=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var g,x;return arguments.length?([g,x]=m,o=f(g,x),u):[o(0),o(1)]}}return u.range=d(Lp),u.rangeRound=d(kD),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return a=f,r=f(t),n=f(e),s=r===n?0:1/(n-r),u}}function Qc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function gne(){var t=Yc(nj()(Us));return t.copy=function(){return Qc(t,gne())},kl.apply(t,arguments)}function vne(){var t=MD(nj()).domain([1,10]);return t.copy=function(){return Qc(t,vne()).base(t.base())},kl.apply(t,arguments)}function yne(){var t=DD(nj());return t.copy=function(){return Qc(t,yne()).constant(t.constant())},kl.apply(t,arguments)}function GD(){var t=LD(nj());return t.copy=function(){return Qc(t,GD()).exponent(t.exponent())},kl.apply(t,arguments)}function N5e(){return GD.apply(null,arguments).exponent(.5)}function xne(){var t=[],e=Us;function r(n){if(n!=null&&!isNaN(n=+n))return e((xy(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let s of n)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Cc),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,s)=>e(s/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>hBe(t,a/n))},r.copy=function(){return xne(e).domain(t)},kl.apply(r,arguments)}function sj(){var t=0,e=.5,r=1,n=1,s,a,o,l,c,u=Us,d,f=!1,m;function g(v){return isNaN(v=+v)?m:(v=.5+((v=+d(v))-a)*(n*v<n*a?l:c),u(f?Math.max(0,Math.min(1,v)):v))}g.domain=function(v){return arguments.length?([t,e,r]=v,s=d(t=+t),a=d(e=+e),o=d(r=+r),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),n=a<s?-1:1,g):[t,e,r]},g.clamp=function(v){return arguments.length?(f=!!v,g):f},g.interpolator=function(v){return arguments.length?(u=v,g):u};function x(v){return function(y){var w,_,A;return arguments.length?([w,_,A]=y,u=$Be(v,[w,_,A]),g):[u(0),u(.5),u(1)]}}return g.range=x(Lp),g.rangeRound=x(kD),g.unknown=function(v){return arguments.length?(m=v,g):m},function(v){return d=v,s=v(t),a=v(e),o=v(r),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),n=a<s?-1:1,g}}function bne(){var t=Yc(sj()(Us));return t.copy=function(){return Qc(t,bne())},kl.apply(t,arguments)}function wne(){var t=MD(sj()).domain([.1,1,10]);return t.copy=function(){return Qc(t,wne()).base(t.base())},kl.apply(t,arguments)}function _ne(){var t=DD(sj());return t.copy=function(){return Qc(t,_ne()).constant(t.constant())},kl.apply(t,arguments)}function KD(){var t=LD(sj());return t.copy=function(){return Qc(t,KD()).exponent(t.exponent())},kl.apply(t,arguments)}function E5e(){return KD.apply(null,arguments).exponent(.5)}const _H=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iv,scaleDiverging:bne,scaleDivergingLog:wne,scaleDivergingPow:KD,scaleDivergingSqrt:E5e,scaleDivergingSymlog:_ne,scaleIdentity:ene,scaleImplicit:YO,scaleLinear:Mw,scaleLog:rne,scaleOrdinal:CD,scalePoint:mg,scalePow:$D,scaleQuantile:ane,scaleQuantize:ine,scaleRadial:sne,scaleSequential:gne,scaleSequentialLog:vne,scaleSequentialPow:GD,scaleSequentialQuantile:xne,scaleSequentialSqrt:N5e,scaleSequentialSymlog:yne,scaleSqrt:o3e,scaleSymlog:nne,scaleThreshold:one,scaleTime:j5e,scaleUtc:A5e,tickFormat:Zre},Symbol.toStringTag,{value:"Module"}));var GT,SH;function aj(){if(SH)return GT;SH=1;var t=Op();function e(r,n,s){for(var a=-1,o=r.length;++a<o;){var l=r[a],c=n(l);if(c!=null&&(u===void 0?c===c&&!t(c):s(c,u)))var u=c,d=l}return d}return GT=e,GT}var KT,jH;function Sne(){if(jH)return KT;jH=1;function t(e,r){return e>r}return KT=t,KT}var XT,AH;function C5e(){if(AH)return XT;AH=1;var t=aj(),e=Sne(),r=Dp();function n(s){return s&&s.length?t(s,r,e):void 0}return XT=n,XT}var T5e=C5e();const yc=gr(T5e);var YT,NH;function jne(){if(NH)return YT;NH=1;function t(e,r){return e<r}return YT=t,YT}var QT,EH;function P5e(){if(EH)return QT;EH=1;var t=aj(),e=jne(),r=Dp();function n(s){return s&&s.length?t(s,r,e):void 0}return QT=n,QT}var k5e=P5e();const ij=gr(k5e);var JT,CH;function O5e(){if(CH)return JT;CH=1;var t=uD(),e=Io(),r=kre(),n=fa();function s(a,o){var l=n(a)?t:r;return l(a,e(o,3))}return JT=s,JT}var ZT,TH;function R5e(){if(TH)return ZT;TH=1;var t=Tre(),e=O5e();function r(n,s){return t(e(n,s),1)}return ZT=r,ZT}var I5e=R5e();const M5e=gr(I5e);var eP,PH;function D5e(){if(PH)return eP;PH=1;var t=SD();function e(r,n){return t(r,n)}return eP=e,eP}var L5e=D5e();const Hf=gr(L5e);var $p=1e9,$5e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},YD,Kr=!0,oi="[DecimalError] ",Yu=oi+"Invalid argument: ",XD=oi+"Exponent out of range: ",Fp=Math.floor,ju=Math.pow,F5e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ta,as=1e7,qr=7,Ane=9007199254740991,Fw=Fp(Ane/qr),Ke={};Ke.absoluteValue=Ke.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ke.comparedTo=Ke.cmp=function(t){var e,r,n,s,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,s=t.d.length,e=0,r=n<s?n:s;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};Ke.decimalPlaces=Ke.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*qr;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Ke.dividedBy=Ke.div=function(t){return pl(this,new this.constructor(t))};Ke.dividedToIntegerBy=Ke.idiv=function(t){var e=this,r=e.constructor;return Pr(pl(e,new r(t),0,1),r.precision)};Ke.equals=Ke.eq=function(t){return!this.cmp(t)};Ke.exponent=function(){return Fn(this)};Ke.greaterThan=Ke.gt=function(t){return this.cmp(t)>0};Ke.greaterThanOrEqualTo=Ke.gte=function(t){return this.cmp(t)>=0};Ke.isInteger=Ke.isint=function(){return this.e>this.d.length-2};Ke.isNegative=Ke.isneg=function(){return this.s<0};Ke.isPositive=Ke.ispos=function(){return this.s>0};Ke.isZero=function(){return this.s===0};Ke.lessThan=Ke.lt=function(t){return this.cmp(t)<0};Ke.lessThanOrEqualTo=Ke.lte=function(t){return this.cmp(t)<1};Ke.logarithm=Ke.log=function(t){var e,r=this,n=r.constructor,s=n.precision,a=s+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Ta))throw Error(oi+"NaN");if(r.s<1)throw Error(oi+(r.s?"NaN":"-Infinity"));return r.eq(Ta)?new n(0):(Kr=!1,e=pl(dv(r,a),dv(t,a),a),Kr=!0,Pr(e,s))};Ke.minus=Ke.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Cne(e,t):Nne(e,(t.s=-t.s,t))};Ke.modulo=Ke.mod=function(t){var e,r=this,n=r.constructor,s=n.precision;if(t=new n(t),!t.s)throw Error(oi+"NaN");return r.s?(Kr=!1,e=pl(r,t,0,1).times(t),Kr=!0,r.minus(e)):Pr(new n(r),s)};Ke.naturalExponential=Ke.exp=function(){return Ene(this)};Ke.naturalLogarithm=Ke.ln=function(){return dv(this)};Ke.negated=Ke.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ke.plus=Ke.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Nne(e,t):Cne(e,(t.s=-t.s,t))};Ke.precision=Ke.sd=function(t){var e,r,n,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Yu+t);if(e=Fn(s)+1,n=s.d.length-1,r=n*qr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Ke.squareRoot=Ke.sqrt=function(){var t,e,r,n,s,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(oi+"NaN")}for(t=Fn(l),Kr=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=mo(l.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Fp((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(a=n,n=a.plus(pl(l,a,o+2)).times(.5),mo(a.d).slice(0,o)===(e=mo(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(Pr(a,r+1,0),a.times(a).eq(l)){n=a;break}}else if(e!="9999")break;o+=4}return Kr=!0,Pr(n,r)};Ke.times=Ke.mul=function(t){var e,r,n,s,a,o,l,c,u,d=this,f=d.constructor,m=d.d,g=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=m.length,u=g.length,c<u&&(a=m,m=g,g=a,o=c,c=u,u=o),a=[],o=c+u,n=o;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,s=c+n;s>n;)l=a[s]+g[n]*m[s-n-1]+e,a[s--]=l%as|0,e=l/as|0;a[s]=(a[s]+e)%as|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,Kr?Pr(t,f.precision):t};Ke.toDecimalPlaces=Ke.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(No(t,0,$p),e===void 0?e=n.rounding:No(e,0,8),Pr(r,t+Fn(r)+1,e))};Ke.toExponential=function(t,e){var r,n=this,s=n.constructor;return t===void 0?r=_d(n,!0):(No(t,0,$p),e===void 0?e=s.rounding:No(e,0,8),n=Pr(new s(n),t+1,e),r=_d(n,!0,t+1)),r};Ke.toFixed=function(t,e){var r,n,s=this,a=s.constructor;return t===void 0?_d(s):(No(t,0,$p),e===void 0?e=a.rounding:No(e,0,8),n=Pr(new a(s),t+Fn(s)+1,e),r=_d(n.abs(),!1,t+Fn(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ke.toInteger=Ke.toint=function(){var t=this,e=t.constructor;return Pr(new e(t),Fn(t)+1,e.rounding)};Ke.toNumber=function(){return+this};Ke.toPower=Ke.pow=function(t){var e,r,n,s,a,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Ta);if(l=new c(l),!l.s){if(t.s<1)throw Error(oi+"Infinity");return l}if(l.eq(Ta))return l;if(n=c.precision,t.eq(Ta))return Pr(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,a=l.s,o){if((r=d<0?-d:d)<=Ane){for(s=new c(Ta),e=Math.ceil(n/qr+4),Kr=!1;r%2&&(s=s.times(l),OH(s.d,e)),r=Fp(r/2),r!==0;)l=l.times(l),OH(l.d,e);return Kr=!0,t.s<0?new c(Ta).div(s):Pr(s,n)}}else if(a<0)throw Error(oi+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Kr=!1,s=t.times(dv(l,n+u)),Kr=!0,s=Ene(s),s.s=a,s};Ke.toPrecision=function(t,e){var r,n,s=this,a=s.constructor;return t===void 0?(r=Fn(s),n=_d(s,r<=a.toExpNeg||r>=a.toExpPos)):(No(t,1,$p),e===void 0?e=a.rounding:No(e,0,8),s=Pr(new a(s),t,e),r=Fn(s),n=_d(s,t<=r||r<=a.toExpNeg,t)),n};Ke.toSignificantDigits=Ke.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(No(t,1,$p),e===void 0?e=n.rounding:No(e,0,8)),Pr(new n(r),t,e)};Ke.toString=Ke.valueOf=Ke.val=Ke.toJSON=Ke[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Fn(t),r=t.constructor;return _d(t,e<=r.toExpNeg||e>=r.toExpPos)};function Nne(t,e){var r,n,s,a,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Kr?Pr(e,f):e;if(c=t.d,u=e.d,o=t.e,s=e.e,c=c.slice(),a=o-s,a){for(a<0?(n=c,a=-a,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(f/qr),l=o>l?o+1:l+1,a>l&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/as|0,c[a]%=as;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,Kr?Pr(e,f):e}function No(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Yu+t)}function mo(t){var e,r,n,s=t.length-1,a="",o=t[0];if(s>0){for(a+=o,e=1;e<s;e++)n=t[e]+"",r=qr-n.length,r&&(a+=dc(r)),a+=n;o=t[e],n=o+"",r=qr-n.length,r&&(a+=dc(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var pl=(function(){function t(n,s){var a,o=0,l=n.length;for(n=n.slice();l--;)a=n[l]*s+o,n[l]=a%as|0,o=a/as|0;return o&&n.unshift(o),n}function e(n,s,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,a){for(var o=0;a--;)n[a]-=o,o=n[a]<s[a]?1:0,n[a]=o*as+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,o){var l,c,u,d,f,m,g,x,v,y,w,_,A,C,S,E,P,R,O=n.constructor,D=n.s==s.s?1:-1,I=n.d,$=s.d;if(!n.s)return new O(n);if(!s.s)throw Error(oi+"Division by zero");for(c=n.e-s.e,P=$.length,S=I.length,g=new O(D),x=g.d=[],u=0;$[u]==(I[u]||0);)++u;if($[u]>(I[u]||0)&&--c,a==null?_=a=O.precision:o?_=a+(Fn(n)-Fn(s))+1:_=a,_<0)return new O(0);if(_=_/qr+2|0,u=0,P==1)for(d=0,$=$[0],_++;(u<S||d)&&_--;u++)A=d*as+(I[u]||0),x[u]=A/$|0,d=A%$|0;else{for(d=as/($[0]+1)|0,d>1&&($=t($,d),I=t(I,d),P=$.length,S=I.length),C=P,v=I.slice(0,P),y=v.length;y<P;)v[y++]=0;R=$.slice(),R.unshift(0),E=$[0],$[1]>=as/2&&++E;do d=0,l=e($,v,P,y),l<0?(w=v[0],P!=y&&(w=w*as+(v[1]||0)),d=w/E|0,d>1?(d>=as&&(d=as-1),f=t($,d),m=f.length,y=v.length,l=e(f,v,m,y),l==1&&(d--,r(f,P<m?R:$,m))):(d==0&&(l=d=1),f=$.slice()),m=f.length,m<y&&f.unshift(0),r(v,f,y),l==-1&&(y=v.length,l=e($,v,P,y),l<1&&(d++,r(v,P<y?R:$,y))),y=v.length):l===0&&(d++,v=[0]),x[u++]=d,l&&v[0]?v[y++]=I[C]||0:(v=[I[C]],y=1);while((C++<S||v[0]!==void 0)&&_--)}return x[0]||x.shift(),g.e=c,Pr(g,o?a+Fn(g)+1:a)}})();function Ene(t,e){var r,n,s,a,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(Fn(t)>16)throw Error(XD+Fn(t));if(!t.s)return new d(Ta);for(Kr=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(ju(2,u))/Math.LN10*2+5|0,l+=n,r=s=a=new d(Ta),d.precision=l;;){if(s=Pr(s.times(t),l),r=r.times(++c),o=a.plus(pl(s,r,l)),mo(o.d).slice(0,l)===mo(a.d).slice(0,l)){for(;u--;)a=Pr(a.times(a),l);return d.precision=f,e==null?(Kr=!0,Pr(a,f)):a}a=o}}function Fn(t){for(var e=t.e*qr,r=t.d[0];r>=10;r/=10)e++;return e}function tP(t,e,r){if(e>t.LN10.sd())throw Kr=!0,r&&(t.precision=r),Error(oi+"LN10 precision limit exceeded");return Pr(new t(t.LN10),e)}function dc(t){for(var e="";t--;)e+="0";return e}function dv(t,e){var r,n,s,a,o,l,c,u,d,f=1,m=10,g=t,x=g.d,v=g.constructor,y=v.precision;if(g.s<1)throw Error(oi+(g.s?"NaN":"-Infinity"));if(g.eq(Ta))return new v(0);if(e==null?(Kr=!1,u=y):u=e,g.eq(10))return e==null&&(Kr=!0),tP(v,u);if(u+=m,v.precision=u,r=mo(x),n=r.charAt(0),a=Fn(g),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(t),r=mo(g.d),n=r.charAt(0),f++;a=Fn(g),n>1?(g=new v("0."+r),a++):g=new v(n+"."+r.slice(1))}else return c=tP(v,u+2,y).times(a+""),g=dv(new v(n+"."+r.slice(1)),u-m).plus(c),v.precision=y,e==null?(Kr=!0,Pr(g,y)):g;for(l=o=g=pl(g.minus(Ta),g.plus(Ta),u),d=Pr(g.times(g),u),s=3;;){if(o=Pr(o.times(d),u),c=l.plus(pl(o,new v(s),u)),mo(c.d).slice(0,u)===mo(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(tP(v,u+2,y).times(a+""))),l=pl(l,new v(f),u),v.precision=y,e==null?(Kr=!0,Pr(l,y)):l;l=c,s+=2}}function kH(t,e){var r,n,s;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(n,s),e){if(s-=n,r=r-n-1,t.e=Fp(r/qr),t.d=[],n=(r+1)%qr,r<0&&(n+=qr),n<s){for(n&&t.d.push(+e.slice(0,n)),s-=qr;n<s;)t.d.push(+e.slice(n,n+=qr));e=e.slice(n),n=qr-e.length}else n-=s;for(;n--;)e+="0";if(t.d.push(+e),Kr&&(t.e>Fw||t.e<-Fw))throw Error(XD+r)}else t.s=0,t.e=0,t.d=[0];return t}function Pr(t,e,r){var n,s,a,o,l,c,u,d,f=t.d;for(o=1,a=f[0];a>=10;a/=10)o++;if(n=e-o,n<0)n+=qr,s=e,u=f[d=0];else{if(d=Math.ceil((n+1)/qr),a=f.length,d>=a)return t;for(u=a=f[d],o=1;a>=10;a/=10)o++;n%=qr,s=n-qr+o}if(r!==void 0&&(a=ju(10,o-s-1),l=u/a%10|0,c=e<0||f[d+1]!==void 0||u%a,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/ju(10,o-s):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(a=Fn(t),f.length=1,e=e-a-1,f[0]=ju(10,(qr-e%qr)%qr),t.e=Fp(-e/qr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=ju(10,qr-n),f[d]=s>0?(u/ju(10,o-s)%ju(10,s)|0)*a:0),c)for(;;)if(d==0){(f[0]+=a)==as&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=as)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Kr&&(t.e>Fw||t.e<-Fw))throw Error(XD+Fn(t));return t}function Cne(t,e){var r,n,s,a,o,l,c,u,d,f,m=t.constructor,g=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Kr?Pr(e,g):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),s=Math.max(Math.ceil(g/qr),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}o=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(a=s;a&&c[--a]===0;)c[a]=as-1;--c[a],c[s]+=as}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Kr?Pr(e,g):e):new m(0)}function _d(t,e,r){var n,s=Fn(t),a=mo(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+dc(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+dc(-s-1)+a,r&&(n=r-o)>0&&(a+=dc(n))):s>=o?(a+=dc(s+1-o),r&&(n=r-s-1)>0&&(a=a+"."+dc(n))):((n=s+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(a+="."),a+=dc(n))),t.s<0?"-"+a:a}function OH(t,e){if(t.length>e)return t.length=e,!0}function Tne(t){var e,r,n;function s(a){var o=this;if(!(o instanceof s))return new s(a);if(o.constructor=s,a instanceof s){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Yu+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return kH(o,a.toString())}else if(typeof a!="string")throw Error(Yu+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,F5e.test(a))kH(o,a);else throw Error(Yu+a)}if(s.prototype=Ke,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Tne,s.config=s.set=B5e,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return s.config(t),s}function B5e(t){if(!t||typeof t!="object")throw Error(oi+"Object expected");var e,r,n,s=["precision",1,$p,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((n=t[r=s[e]])!==void 0)if(Fp(n)===n&&n>=s[e+1]&&n<=s[e+2])this[r]=n;else throw Error(Yu+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Yu+r+": "+n);return this}var YD=Tne($5e);Ta=new YD(1);const Er=YD;function U5e(t){return H5e(t)||V5e(t)||q5e(t)||z5e()}function z5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q5e(t,e){if(t){if(typeof t=="string")return eR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eR(t,e)}}function V5e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function H5e(t){if(Array.isArray(t))return eR(t)}function eR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var W5e=function(e){return e},Pne={},kne=function(e){return e===Pne},RH=function(e){return function r(){return arguments.length===0||arguments.length===1&&kne(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},G5e=function t(e,r){return e===1?r:RH(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];var o=s.filter(function(l){return l!==Pne}).length;return o>=e?r.apply(void 0,s):t(e-o,RH(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=s.map(function(f){return kne(f)?c.shift():f});return r.apply(void 0,U5e(d).concat(c))}))})},oj=function(e){return G5e(e.length,e)},tR=function(e,r){for(var n=[],s=e;s<r;++s)n[s-e]=s;return n},K5e=oj(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),X5e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return W5e;var s=r.reverse(),a=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},rR=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},One=function(e){var r=null,n=null;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r&&a.every(function(l,c){return l===r[c]})||(r=a,n=e.apply(void 0,a)),n}};function Y5e(t){var e;return t===0?e=1:e=Math.floor(new Er(t).abs().log(10).toNumber())+1,e}function Q5e(t,e,r){for(var n=new Er(t),s=0,a=[];n.lt(e)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}var J5e=oj(function(t,e,r){var n=+t,s=+e;return n+r*(s-n)}),Z5e=oj(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),eUe=oj(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const lj={rangeStep:Q5e,getDigitCount:Y5e,interpolateNumber:J5e,uninterpolateNumber:Z5e,uninterpolateTruncation:eUe};function nR(t){return nUe(t)||rUe(t)||Rne(t)||tUe()}function tUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rUe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function nUe(t){if(Array.isArray(t))return sR(t)}function hv(t,e){return iUe(t)||aUe(t,e)||Rne(t,e)||sUe()}function sUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rne(t,e){if(t){if(typeof t=="string")return sR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sR(t,e)}}function sR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function aUe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,s=!1,a=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){s=!0,a=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw a}}return r}}function iUe(t){if(Array.isArray(t))return t}function Ine(t){var e=hv(t,2),r=e[0],n=e[1],s=r,a=n;return r>n&&(s=n,a=r),[s,a]}function Mne(t,e,r){if(t.lte(0))return new Er(0);var n=lj.getDigitCount(t.toNumber()),s=new Er(10).pow(n),a=t.div(s),o=n!==1?.05:.1,l=new Er(Math.ceil(a.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return e?c:new Er(Math.ceil(c))}function oUe(t,e,r){var n=1,s=new Er(t);if(!s.isint()&&r){var a=Math.abs(t);a<1?(n=new Er(10).pow(lj.getDigitCount(t)-1),s=new Er(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new Er(Math.floor(t)))}else t===0?s=new Er(Math.floor((e-1)/2)):r||(s=new Er(Math.floor(t)));var o=Math.floor((e-1)/2),l=X5e(K5e(function(c){return s.add(new Er(c-o).mul(n)).toNumber()}),tR);return l(0,e)}function Dne(t,e,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Er(0),tickMin:new Er(0),tickMax:new Er(0)};var a=Mne(new Er(e).sub(t).div(r-1),n,s),o;t<=0&&e>=0?o=new Er(0):(o=new Er(t).add(e).div(2),o=o.sub(new Er(o).mod(a)));var l=Math.ceil(o.sub(t).div(a).toNumber()),c=Math.ceil(new Er(e).sub(o).div(a).toNumber()),u=l+c+1;return u>r?Dne(t,e,r,n,s+1):(u<r&&(c=e>0?c+(r-u):c,l=e>0?l:l+(r-u)),{step:a,tickMin:o.sub(new Er(l).mul(a)),tickMax:o.add(new Er(c).mul(a))})}function lUe(t){var e=hv(t,2),r=e[0],n=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=Ine([r,n]),c=hv(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(nR(tR(0,s-1).map(function(){return 1/0}))):[].concat(nR(tR(0,s-1).map(function(){return-1/0})),[d]);return r>n?rR(f):f}if(u===d)return oUe(u,s,a);var m=Dne(u,d,o,a),g=m.step,x=m.tickMin,v=m.tickMax,y=lj.rangeStep(x,v.add(new Er(.1).mul(g)),g);return r>n?rR(y):y}function cUe(t,e){var r=hv(t,2),n=r[0],s=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Ine([n,s]),l=hv(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,s];if(c===u)return[c];var d=Math.max(e,2),f=Mne(new Er(u).sub(c).div(d-1),a,0),m=[].concat(nR(lj.rangeStep(new Er(c),new Er(u).sub(new Er(.99).mul(f)),f)),[u]);return n>s?rR(m):m}var uUe=One(lUe),dUe=One(cUe),hUe="Invariant failed";function Sd(t,e){throw new Error(hUe)}var fUe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Wf(t){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wf(t)}function Bw(){return Bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bw.apply(this,arguments)}function pUe(t,e){return yUe(t)||vUe(t,e)||gUe(t,e)||mUe()}function mUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gUe(t,e){if(t){if(typeof t=="string")return IH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IH(t,e)}}function IH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vUe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function yUe(t){if(Array.isArray(t))return t}function xUe(t,e){if(t==null)return{};var r=bUe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bUe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function wUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fne(n.key),n)}}function SUe(t,e,r){return e&&_Ue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jUe(t,e,r){return e=Uw(e),AUe(t,Lne()?Reflect.construct(e,r||[],Uw(t).constructor):e.apply(t,r))}function AUe(t,e){if(e&&(Wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NUe(t)}function NUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lne=function(){return!!t})()}function Uw(t){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uw(t)}function EUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aR(t,e)}function aR(t,e){return aR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},aR(t,e)}function $ne(t,e,r){return e=Fne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fne(t){var e=CUe(t,"string");return Wf(e)=="symbol"?e:e+""}function CUe(t,e){if(Wf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cj=(function(t){function e(){return wUe(this,e),jUe(this,e,arguments)}return EUe(e,t),SUe(e,[{key:"render",value:function(){var n=this.props,s=n.offset,a=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,m=xUe(n,fUe),g=lt(m,!1);this.props.direction==="x"&&d.type!=="number"&&Sd();var x=c.map(function(v){var y=u(v,l),w=y.x,_=y.y,A=y.value,C=y.errorVal;if(!C)return null;var S=[],E,P;if(Array.isArray(C)){var R=pUe(C,2);E=R[0],P=R[1]}else E=P=C;if(a==="vertical"){var O=d.scale,D=_+s,I=D+o,$=D-o,M=O(A-E),U=O(A+P);S.push({x1:U,y1:I,x2:U,y2:$}),S.push({x1:M,y1:D,x2:U,y2:D}),S.push({x1:M,y1:I,x2:M,y2:$})}else if(a==="horizontal"){var H=f.scale,z=w+s,q=z-o,V=z+o,W=H(A-E),B=H(A+P);S.push({x1:q,y1:B,x2:V,y2:B}),S.push({x1:z,y1:W,x2:z,y2:B}),S.push({x1:q,y1:W,x2:V,y2:W})}return G.createElement(lr,Bw({className:"recharts-errorBar",key:"bar-".concat(S.map(function(F){return"".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))},g),S.map(function(F){return G.createElement("line",Bw({},F,{key:"line-".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))}))});return G.createElement(lr,{className:"recharts-errorBars"},x)}}])})(G.Component);$ne(cj,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});$ne(cj,"displayName","ErrorBar");function fv(t){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fv(t)}function MH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function mu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MH(Object(r),!0).forEach(function(n){TUe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TUe(t,e,r){return e=PUe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PUe(t){var e=kUe(t,"string");return fv(e)=="symbol"?e:e+""}function kUe(t,e){if(fv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bne=function(e){var r=e.children,n=e.formattedGraphicalItems,s=e.legendWidth,a=e.legendContent,o=wa(r,Ku);if(!o)return null;var l=Ku.defaultProps,c=l!==void 0?mu(mu({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(n||[]).reduce(function(d,f){var m=f.item,g=f.props,x=g.sectors||g.data||[];return d.concat(x.map(function(v){return{type:o.props.iconType||m.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(n||[]).map(function(d){var f=d.item,m=f.type.defaultProps,g=m!==void 0?mu(mu({},m),f.props):{},x=g.dataKey,v=g.name,y=g.legendType,w=g.hide;return{inactive:w,dataKey:x,type:c.iconType||y||"square",color:QD(f),value:v||x,payload:g}}),mu(mu(mu({},c),Ku.getWithHeight(o,s)),{},{payload:u,item:o})};function pv(t){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv(t)}function DH(t){return MUe(t)||IUe(t)||RUe(t)||OUe()}function OUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RUe(t,e){if(t){if(typeof t=="string")return iR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iR(t,e)}}function IUe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MUe(t){if(Array.isArray(t))return iR(t)}function iR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function LH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ln(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LH(Object(r),!0).forEach(function(n){hf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hf(t,e,r){return e=DUe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DUe(t){var e=LUe(t,"string");return pv(e)=="symbol"?e:e+""}function LUe(t,e){if(pv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yn(t,e,r){return It(t)||It(e)?r:Qn(e)?Ia(t,e,r):yt(e)?e(t):r}function gg(t,e,r,n){var s=M5e(t,function(l){return Yn(l,e)});if(r==="number"){var a=s.filter(function(l){return Re(l)||parseFloat(l)});return a.length?[ij(a),yc(a)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!It(l)}):s;return o.map(function(l){return Qn(l)||l instanceof Date?l:""})}var $Ue=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var d=u>0?s[u-1].coordinate:s[l-1].coordinate,f=s[u].coordinate,m=u>=l-1?s[0].coordinate:s[u+1].coordinate,g=void 0;if(Fs(f-d)!==Fs(m-f)){var x=[];if(Fs(m-f)===Fs(c[1]-c[0])){g=m;var v=f+c[1]-c[0];x[0]=Math.min(v,(v+d)/2),x[1]=Math.max(v,(v+d)/2)}else{g=d;var y=m+c[1]-c[0];x[0]=Math.min(f,(y+f)/2),x[1]=Math.max(f,(y+f)/2)}var w=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(e>w[0]&&e<=w[1]||e>=x[0]&&e<=x[1]){o=s[u].index;break}}else{var _=Math.min(d,m),A=Math.max(d,m);if(e>(_+f)/2&&e<=(A+f)/2){o=s[u].index;break}}}else for(var C=0;C<l;C++)if(C===0&&e<=(n[C].coordinate+n[C+1].coordinate)/2||C>0&&C<l-1&&e>(n[C].coordinate+n[C-1].coordinate)/2&&e<=(n[C].coordinate+n[C+1].coordinate)/2||C===l-1&&e>(n[C].coordinate+n[C-1].coordinate)/2){o=n[C].index;break}return o},QD=function(e){var r,n=e,s=n.type.displayName,a=(r=e.type)!==null&&r!==void 0&&r.defaultProps?ln(ln({},e.type.defaultProps),e.props):e.props,o=a.stroke,l=a.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},FUe=function(e){var r=e.barSize,n=e.totalSize,s=e.stackGroups,a=s===void 0?{}:s;if(!a)return{};for(var o={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var d=a[l[c]].stackGroups,f=Object.keys(d),m=0,g=f.length;m<g;m++){var x=d[f[m]],v=x.items,y=x.cateAxisId,w=v.filter(function(P){return fl(P.type).indexOf("Bar")>=0});if(w&&w.length){var _=w[0].type.defaultProps,A=_!==void 0?ln(ln({},_),w[0].props):w[0].props,C=A.barSize,S=A[y];o[S]||(o[S]=[]);var E=It(C)?r:C;o[S].push({item:w[0],stackList:w.slice(1),barSize:It(E)?void 0:Bs(E,n,0)})}}return o},BUe=function(e){var r=e.barGap,n=e.barCategoryGap,s=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Bs(r,s,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var m=!1,g=s/c,x=o.reduce(function(C,S){return C+S.barSize||0},0);x+=(c-1)*u,x>=s&&(x-=(c-1)*u,u=0),x>=s&&g>0&&(m=!0,g*=.9,x=c*g);var v=(s-x)/2>>0,y={offset:v-u,size:0};d=o.reduce(function(C,S){var E={item:S.item,position:{offset:y.offset+y.size+u,size:m?g:S.barSize}},P=[].concat(DH(C),[E]);return y=P[P.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(R){P.push({item:R,position:y})}),P},f)}else{var w=Bs(n,s,0,!0);s-2*w-(c-1)*u<=0&&(u=0);var _=(s-2*w-(c-1)*u)/c;_>1&&(_>>=0);var A=l===+l?Math.min(_,l):_;d=o.reduce(function(C,S,E){var P=[].concat(DH(C),[{item:S.item,position:{offset:w+(_+u)*E+(_-A)/2,size:A}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(R){P.push({item:R,position:P[P.length-1].position})}),P},f)}return d},UUe=function(e,r,n,s){var a=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=Bne({children:a,legendWidth:c});if(u){var d=s||{},f=d.width,m=d.height,g=u.align,x=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&x==="middle")&&g!=="center"&&Re(e[g]))return ln(ln({},e),{},hf({},g,e[g]+(f||0)));if((v==="horizontal"||v==="vertical"&&g==="center")&&x!=="middle"&&Re(e[x]))return ln(ln({},e),{},hf({},x,e[x]+(m||0)))}return e},zUe=function(e,r,n){return It(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},Une=function(e,r,n,s,a){var o=r.props.children,l=ri(o,cj).filter(function(u){return zUe(s,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=Yn(d,n);if(It(f))return u;var m=Array.isArray(f)?[ij(f),yc(f)]:[f,f],g=c.reduce(function(x,v){var y=Yn(d,v,0),w=m[0]-Math.abs(Array.isArray(y)?y[0]:y),_=m[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(w,x[0]),Math.max(_,x[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},qUe=function(e,r,n,s,a){var o=r.map(function(l){return Une(e,l,n,a,s)}).filter(function(l){return!It(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},zne=function(e,r,n,s,a){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&Une(e,c,u,s)||gg(e,u,n,a)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},qne=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},Vne=function(e,r,n,s){if(s)return e.map(function(c){return c.coordinate});var a,o,l=e.map(function(c){return c.coordinate===r&&(a=!0),c.coordinate===n&&(o=!0),c.coordinate});return a||l.push(r),o||l.push(n),l},cl=function(e,r,n){if(!e)return null;var s=e.scale,a=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&l?.length>=2?Fs(l[0]-l[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var m=a?a.indexOf(f):f;return{coordinate:s(m)+u,value:f,offset:u}});return d.filter(function(f){return!Ip(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,m){return{coordinate:s(f)+u,value:f,index:m,offset:u}}):s.ticks&&!n?s.ticks(e.tickCount).map(function(f){return{coordinate:s(f)+u,value:f,offset:u}}):s.domain().map(function(f,m){return{coordinate:s(f)+u,value:a?a[f]:f,index:m,offset:u}})},rP=new WeakMap,P0=function(e,r){if(typeof r!="function")return e;rP.has(e)||rP.set(e,new WeakMap);var n=rP.get(e);if(n.has(r))return n.get(r);var s=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},Hne=function(e,r,n){var s=e.scale,a=e.type,o=e.layout,l=e.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:iv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Mw(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:mg(),realScaleType:"point"}:a==="category"?{scale:iv(),realScaleType:"band"}:{scale:Mw(),realScaleType:"linear"};if(xd(s)){var c="scale".concat(HS(s));return{scale:(_H[c]||mg)(),realScaleType:_H[c]?c:"point"}}return yt(s)?{scale:s}:{scale:mg(),realScaleType:"point"}},$H=1e-4,Wne=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,s=e.range(),a=Math.min(s[0],s[1])-$H,o=Math.max(s[0],s[1])+$H,l=e(r[0]),c=e(r[n-1]);(l<a||l>o||c<a||c>o)&&e.domain([r[0],r[n-1]])}},VUe=function(e,r){if(!e)return null;for(var n=0,s=e.length;n<s;n++)if(e[n].item===r)return e[n].position;return null},HUe=function(e,r){if(!r||r.length!==2||!Re(r[0])||!Re(r[1]))return e;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),a=[e[0],e[1]];return(!Re(e[0])||e[0]<n)&&(a[0]=n),(!Re(e[1])||e[1]>s)&&(a[1]=s),a[0]>s&&(a[0]=s),a[1]<n&&(a[1]=n),a},WUe=function(e){var r=e.length;if(!(r<=0))for(var n=0,s=e[0].length;n<s;++n)for(var a=0,o=0,l=0;l<r;++l){var c=Ip(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=a,e[l][n][1]=a+c,a=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},GUe=function(e){var r=e.length;if(!(r<=0))for(var n=0,s=e[0].length;n<s;++n)for(var a=0,o=0;o<r;++o){var l=Ip(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=a,e[o][n][1]=a+l,a=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},KUe={sign:WUe,expand:MLe,none:Lf,silhouette:DLe,wiggle:LLe,positive:GUe},XUe=function(e,r,n){var s=r.map(function(l){return l.props.dataKey}),a=KUe[n],o=ILe().keys(s).value(function(l,c){return+Yn(l,c,0)}).order(DO).offset(a);return o(e)},YUe=function(e,r,n,s,a,o){if(!e)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,m){var g,x=(g=m.type)!==null&&g!==void 0&&g.defaultProps?ln(ln({},m.type.defaultProps),m.props):m.props,v=x.stackId,y=x.hide;if(y)return f;var w=x[n],_=f[w]||{hasStack:!1,stackGroups:{}};if(Qn(v)){var A=_.stackGroups[v]||{numericAxisId:n,cateAxisId:s,items:[]};A.items.push(m),_.hasStack=!0,_.stackGroups[v]=A}else _.stackGroups[Mp("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[m]};return ln(ln({},f),{},hf({},w,_))},c),d={};return Object.keys(u).reduce(function(f,m){var g=u[m];if(g.hasStack){var x={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(v,y){var w=g.stackGroups[y];return ln(ln({},v),{},hf({},y,{numericAxisId:n,cateAxisId:s,items:w.items,stackedData:XUe(e,w.items,a)}))},x)}return ln(ln({},f),{},hf({},m,g))},d)},Gne=function(e,r){var n=r.realScaleType,s=r.type,a=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=uUe(u,a,l);return e.domain([ij(d),yc(d)]),{niceTicks:d}}if(a&&s==="number"){var f=e.domain(),m=dUe(f,a,l);return{niceTicks:m}}return null};function FH(t){var e=t.axis,r=t.ticks,n=t.bandSize,s=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!It(s[e.dataKey])){var l=vw(r,"value",s[e.dataKey]);if(l)return l.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=Yn(s,It(o)?e.dataKey:o);return It(c)?null:e.scale(c)}var BH=function(e){var r=e.axis,n=e.ticks,s=e.offset,a=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=Yn(o,r.dataKey,r.domain[l]);return It(c)?null:r.scale(c)-a/2+s},QUe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return s<=0&&a>=0?0:a<0?a:s}return n[0]},JUe=function(e,r){var n,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?ln(ln({},e.type.defaultProps),e.props):e.props,a=s.stackId;if(Qn(a)){var o=r[a];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},ZUe=function(e){return e.reduce(function(r,n){return[ij(n.concat([r[0]]).filter(Re)),yc(n.concat([r[1]]).filter(Re))]},[1/0,-1/0])},Kne=function(e,r,n){return Object.keys(e).reduce(function(s,a){var o=e[a],l=o.stackedData,c=l.reduce(function(u,d){var f=ZUe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},UH=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,zH=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,oR=function(e,r,n){if(yt(e))return e(r,n);if(!Array.isArray(e))return r;var s=[];if(Re(e[0]))s[0]=n?e[0]:Math.min(e[0],r[0]);else if(UH.test(e[0])){var a=+UH.exec(e[0])[1];s[0]=r[0]-a}else yt(e[0])?s[0]=e[0](r[0]):s[0]=r[0];if(Re(e[1]))s[1]=n?e[1]:Math.max(e[1],r[1]);else if(zH.test(e[1])){var o=+zH.exec(e[1])[1];s[1]=r[1]+o}else yt(e[1])?s[1]=e[1](r[1]):s[1]=r[1];return s},zw=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!n||s>0)return s}if(e&&r&&r.length>=2){for(var a=AD(r,function(f){return f.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var u=a[l],d=a[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},qH=function(e,r,n){return!e||!e.length||Hf(e,Ia(n,"type.defaultProps.domain"))?r:e},Xne=function(e,r){var n=e.type.defaultProps?ln(ln({},e.type.defaultProps),e.props):e.props,s=n.dataKey,a=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return ln(ln({},lt(e,!1)),{},{dataKey:s,unit:o,formatter:l,name:a||s,color:QD(e),value:Yn(r,s),type:c,payload:r,chartType:u,hide:d})};function mv(t){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mv(t)}function VH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Zo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VH(Object(r),!0).forEach(function(n){Yne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yne(t,e,r){return e=eze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eze(t){var e=tze(t,"string");return mv(e)=="symbol"?e:e+""}function tze(t,e){if(mv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rze(t,e){return ize(t)||aze(t,e)||sze(t,e)||nze()}function nze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sze(t,e){if(t){if(typeof t=="string")return HH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HH(t,e)}}function HH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function aze(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ize(t){if(Array.isArray(t))return t}var qw=Math.PI/180,oze=function(e){return e*180/Math.PI},$r=function(e,r,n,s){return{x:e+Math.cos(-qw*s)*n,y:r+Math.sin(-qw*s)*n}},Qne=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},lze=function(e,r,n,s,a){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Bs(e.cx,o,o/2),f=Bs(e.cy,l,l/2),m=Qne(o,l,n),g=Bs(e.innerRadius,m,0),x=Bs(e.outerRadius,m,m*.8),v=Object.keys(r);return v.reduce(function(y,w){var _=r[w],A=_.domain,C=_.reversed,S;if(It(_.range))s==="angleAxis"?S=[c,u]:s==="radiusAxis"&&(S=[g,x]),C&&(S=[S[1],S[0]]);else{S=_.range;var E=S,P=rze(E,2);c=P[0],u=P[1]}var R=Hne(_,a),O=R.realScaleType,D=R.scale;D.domain(A).range(S),Wne(D);var I=Gne(D,Zo(Zo({},_),{},{realScaleType:O})),$=Zo(Zo(Zo({},_),I),{},{range:S,radius:x,realScaleType:O,scale:D,cx:d,cy:f,innerRadius:g,outerRadius:x,startAngle:c,endAngle:u});return Zo(Zo({},y),{},Yne({},w,$))},{})},cze=function(e,r){var n=e.x,s=e.y,a=r.x,o=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(s-o,2))},uze=function(e,r){var n=e.x,s=e.y,a=r.cx,o=r.cy,l=cze({x:n,y:s},{x:a,y:o});if(l<=0)return{radius:l};var c=(n-a)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:oze(u),angleInRadian:u}},dze=function(e){var r=e.startAngle,n=e.endAngle,s=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(s,a);return{startAngle:r-o*360,endAngle:n-o*360}},hze=function(e,r){var n=r.startAngle,s=r.endAngle,a=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(a,o);return e+l*360},WH=function(e,r){var n=e.x,s=e.y,a=uze({x:n,y:s},r),o=a.radius,l=a.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=dze(r),f=d.startAngle,m=d.endAngle,g=l,x;if(f<=m){for(;g>m;)g-=360;for(;g<f;)g+=360;x=g>=f&&g<=m}else{for(;g>f;)g-=360;for(;g<m;)g+=360;x=g>=m&&g<=f}return x?Zo(Zo({},r),{},{radius:o,angle:hze(g,r)}):null},Jne=function(e){return!N.isValidElement(e)&&!yt(e)&&typeof e!="boolean"?e.className:""};function gv(t){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gv(t)}var fze=["offset"];function pze(t){return yze(t)||vze(t)||gze(t)||mze()}function mze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gze(t,e){if(t){if(typeof t=="string")return lR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lR(t,e)}}function vze(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yze(t){if(Array.isArray(t))return lR(t)}function lR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xze(t,e){if(t==null)return{};var r=bze(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bze(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function GH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Vn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GH(Object(r),!0).forEach(function(n){wze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wze(t,e,r){return e=_ze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _ze(t){var e=Sze(t,"string");return gv(e)=="symbol"?e:e+""}function Sze(t,e){if(gv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vv(){return vv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vv.apply(this,arguments)}var jze=function(e){var r=e.value,n=e.formatter,s=It(e.children)?r:e.children;return yt(n)?n(s):s},Aze=function(e,r){var n=Fs(r-e),s=Math.min(Math.abs(r-e),360);return n*s},Nze=function(e,r,n){var s=e.position,a=e.viewBox,o=e.offset,l=e.className,c=a,u=c.cx,d=c.cy,f=c.innerRadius,m=c.outerRadius,g=c.startAngle,x=c.endAngle,v=c.clockWise,y=(f+m)/2,w=Aze(g,x),_=w>=0?1:-1,A,C;s==="insideStart"?(A=g+_*o,C=v):s==="insideEnd"?(A=x-_*o,C=!v):s==="end"&&(A=x+_*o,C=v),C=w<=0?C:!C;var S=$r(u,d,y,A),E=$r(u,d,y,A+(C?1:-1)*359),P="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(C?0:1,`,
    `).concat(E.x,",").concat(E.y),R=It(e.id)?Mp("recharts-radial-line-"):e.id;return G.createElement("text",vv({},n,{dominantBaseline:"central",className:Rt("recharts-radial-bar-label",l)}),G.createElement("defs",null,G.createElement("path",{id:R,d:P})),G.createElement("textPath",{xlinkHref:"#".concat(R)},r))},Eze=function(e){var r=e.viewBox,n=e.offset,s=e.position,a=r,o=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,f=a.endAngle,m=(d+f)/2;if(s==="outside"){var g=$r(o,l,u+n,m),x=g.x,v=g.y;return{x,y:v,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,w=$r(o,l,y,m),_=w.x,A=w.y;return{x:_,y:A,textAnchor:"middle",verticalAnchor:"middle"}},Cze=function(e){var r=e.viewBox,n=e.parentViewBox,s=e.offset,a=e.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,m=f*s,g=f>0?"end":"start",x=f>0?"start":"end",v=u>=0?1:-1,y=v*s,w=v>0?"end":"start",_=v>0?"start":"end";if(a==="top"){var A={x:l+u/2,y:c-f*s,textAnchor:"middle",verticalAnchor:g};return Vn(Vn({},A),n?{height:Math.max(c-n.y,0),width:u}:{})}if(a==="bottom"){var C={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:x};return Vn(Vn({},C),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(a==="left"){var S={x:l-y,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return Vn(Vn({},S),n?{width:Math.max(S.x-n.x,0),height:d}:{})}if(a==="right"){var E={x:l+u+y,y:c+d/2,textAnchor:_,verticalAnchor:"middle"};return Vn(Vn({},E),n?{width:Math.max(n.x+n.width-E.x,0),height:d}:{})}var P=n?{width:u,height:d}:{};return a==="insideLeft"?Vn({x:l+y,y:c+d/2,textAnchor:_,verticalAnchor:"middle"},P):a==="insideRight"?Vn({x:l+u-y,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},P):a==="insideTop"?Vn({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:x},P):a==="insideBottom"?Vn({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:g},P):a==="insideTopLeft"?Vn({x:l+y,y:c+m,textAnchor:_,verticalAnchor:x},P):a==="insideTopRight"?Vn({x:l+u-y,y:c+m,textAnchor:w,verticalAnchor:x},P):a==="insideBottomLeft"?Vn({x:l+y,y:c+d-m,textAnchor:_,verticalAnchor:g},P):a==="insideBottomRight"?Vn({x:l+u-y,y:c+d-m,textAnchor:w,verticalAnchor:g},P):Rp(a)&&(Re(a.x)||Iu(a.x))&&(Re(a.y)||Iu(a.y))?Vn({x:l+Bs(a.x,u),y:c+Bs(a.y,d),textAnchor:"end",verticalAnchor:"end"},P):Vn({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},Tze=function(e){return"cx"in e&&Re(e.cx)};function os(t){var e=t.offset,r=e===void 0?5:e,n=xze(t,fze),s=Vn({offset:r},n),a=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,d=s.className,f=d===void 0?"":d,m=s.textBreakAll;if(!a||It(l)&&It(c)&&!N.isValidElement(u)&&!yt(u))return null;if(N.isValidElement(u))return N.cloneElement(u,s);var g;if(yt(u)){if(g=N.createElement(u,s),N.isValidElement(g))return g}else g=jze(s);var x=Tze(a),v=lt(s,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Nze(s,g,v);var y=x?Eze(s):Cze(s);return G.createElement(wd,vv({className:Rt("recharts-label",f)},v,y,{breakAll:m}),g)}os.displayName="Label";var Zne=function(e){var r=e.cx,n=e.cy,s=e.angle,a=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,m=e.y,g=e.top,x=e.left,v=e.width,y=e.height,w=e.clockWise,_=e.labelViewBox;if(_)return _;if(Re(v)&&Re(y)){if(Re(f)&&Re(m))return{x:f,y:m,width:v,height:y};if(Re(g)&&Re(x))return{x:g,y:x,width:v,height:y}}return Re(f)&&Re(m)?{x:f,y:m,width:0,height:0}:Re(r)&&Re(n)?{cx:r,cy:n,startAngle:a||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:w}:e.viewBox?e.viewBox:{}},Pze=function(e,r){return e?e===!0?G.createElement(os,{key:"label-implicit",viewBox:r}):Qn(e)?G.createElement(os,{key:"label-implicit",viewBox:r,value:e}):N.isValidElement(e)?e.type===os?N.cloneElement(e,{key:"label-implicit",viewBox:r}):G.createElement(os,{key:"label-implicit",content:e,viewBox:r}):yt(e)?G.createElement(os,{key:"label-implicit",content:e,viewBox:r}):Rp(e)?G.createElement(os,vv({viewBox:r},e,{key:"label-implicit"})):null:null},kze=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,a=Zne(e),o=ri(s,os).map(function(c,u){return N.cloneElement(c,{viewBox:r||a,key:"label-".concat(u)})});if(!n)return o;var l=Pze(e.label,r||a);return[l].concat(pze(o))};os.parseViewBox=Zne;os.renderCallByParent=kze;var nP,KH;function Oze(){if(KH)return nP;KH=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return nP=t,nP}var Rze=Oze();const Ize=gr(Rze);function yv(t){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yv(t)}var Mze=["valueAccessor"],Dze=["data","dataKey","clockWise","id","textBreakAll"];function Lze(t){return Uze(t)||Bze(t)||Fze(t)||$ze()}function $ze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fze(t,e){if(t){if(typeof t=="string")return cR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cR(t,e)}}function Bze(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Uze(t){if(Array.isArray(t))return cR(t)}function cR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vw(){return Vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vw.apply(this,arguments)}function XH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function YH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XH(Object(r),!0).forEach(function(n){zze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zze(t,e,r){return e=qze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qze(t){var e=Vze(t,"string");return yv(e)=="symbol"?e:e+""}function Vze(t,e){if(yv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QH(t,e){if(t==null)return{};var r=Hze(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hze(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Wze=function(e){return Array.isArray(e.value)?Ize(e.value):e.value};function ml(t){var e=t.valueAccessor,r=e===void 0?Wze:e,n=QH(t,Mze),s=n.data,a=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=QH(n,Dze);return!s||!s.length?null:G.createElement(lr,{className:"recharts-label-list"},s.map(function(d,f){var m=It(a)?r(d,f):Yn(d&&d.payload,a),g=It(l)?{}:{id:"".concat(l,"-").concat(f)};return G.createElement(os,Vw({},lt(d,!0),u,g,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:os.parseViewBox(It(o)?d:YH(YH({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}ml.displayName="LabelList";function Gze(t,e){return t?t===!0?G.createElement(ml,{key:"labelList-implicit",data:e}):G.isValidElement(t)||yt(t)?G.createElement(ml,{key:"labelList-implicit",data:e,content:t}):Rp(t)?G.createElement(ml,Vw({data:e},t,{key:"labelList-implicit"})):null:null}function Kze(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,s=ri(n,ml).map(function(o,l){return N.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return s;var a=Gze(t.label,e);return[a].concat(Lze(s))}ml.renderCallByParent=Kze;function xv(t){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xv(t)}function uR(){return uR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uR.apply(this,arguments)}function JH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ZH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JH(Object(r),!0).forEach(function(n){Xze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xze(t,e,r){return e=Yze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yze(t){var e=Qze(t,"string");return xv(e)=="symbol"?e:e+""}function Qze(t,e){if(xv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jze=function(e,r){var n=Fs(r-e),s=Math.min(Math.abs(r-e),359.999);return n*s},k0=function(e){var r=e.cx,n=e.cy,s=e.radius,a=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+s,f=Math.asin(c/d)/qw,m=u?a:a+o*f,g=$r(r,n,d,m),x=$r(r,n,s,m),v=u?a-o*f:a,y=$r(r,n,d*Math.cos(f*qw),v);return{center:g,circleTangency:x,lineTangency:y,theta:f}},ese=function(e){var r=e.cx,n=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.startAngle,l=e.endAngle,c=Jze(o,l),u=o+c,d=$r(r,n,a,o),f=$r(r,n,a,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var g=$r(r,n,s,o),x=$r(r,n,s,u);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},Zze=function(e){var r=e.cx,n=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=Fs(d-u),m=k0({cx:r,cy:n,radius:a,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),g=m.circleTangency,x=m.lineTangency,v=m.theta,y=k0({cx:r,cy:n,radius:a,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),w=y.circleTangency,_=y.lineTangency,A=y.theta,C=c?Math.abs(u-d):Math.abs(u-d)-v-A;if(C<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):ese({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d});var S="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(C>180),",").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,`
  `);if(s>0){var E=k0({cx:r,cy:n,radius:s,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=E.circleTangency,R=E.lineTangency,O=E.theta,D=k0({cx:r,cy:n,radius:s,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=D.circleTangency,$=D.lineTangency,M=D.theta,U=c?Math.abs(u-d):Math.abs(u-d)-O-M;if(U<0&&o===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(U>180),",").concat(+(f>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(R.x,",").concat(R.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},e6e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tse=function(e){var r=ZH(ZH({},e6e),e),n=r.cx,s=r.cy,a=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,m=r.className;if(o<a||d===f)return null;var g=Rt("recharts-sector",m),x=o-a,v=Bs(l,x,0,!0),y;return v>0&&Math.abs(d-f)<360?y=Zze({cx:n,cy:s,innerRadius:a,outerRadius:o,cornerRadius:Math.min(v,x/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):y=ese({cx:n,cy:s,innerRadius:a,outerRadius:o,startAngle:d,endAngle:f}),G.createElement("path",uR({},lt(r,!0),{className:g,d:y,role:"img"}))};function bv(t){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bv(t)}function dR(){return dR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dR.apply(this,arguments)}function e8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function t8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e8(Object(r),!0).forEach(function(n){t6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function t6e(t,e,r){return e=r6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r6e(t){var e=n6e(t,"string");return bv(e)=="symbol"?e:e+""}function n6e(t,e){if(bv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var r8={curveBasisClosed:SLe,curveBasisOpen:jLe,curveBasis:_Le,curveBumpX:lLe,curveBumpY:cLe,curveLinearClosed:ALe,curveLinear:GS,curveMonotoneX:NLe,curveMonotoneY:ELe,curveNatural:CLe,curveStep:TLe,curveStepAfter:kLe,curveStepBefore:PLe},O0=function(e){return e.x===+e.x&&e.y===+e.y},Lm=function(e){return e.x},$m=function(e){return e.y},s6e=function(e,r){if(yt(e))return e;var n="curve".concat(HS(e));return(n==="curveMonotone"||n==="curveBump")&&r?r8["".concat(n).concat(r==="vertical"?"Y":"X")]:r8[n]||GS},a6e=function(e){var r=e.type,n=r===void 0?"linear":r,s=e.points,a=s===void 0?[]:s,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=s6e(n,l),f=u?a.filter(function(v){return O0(v)}):a,m;if(Array.isArray(o)){var g=u?o.filter(function(v){return O0(v)}):o,x=f.map(function(v,y){return t8(t8({},v),{},{base:g[y]})});return l==="vertical"?m=S0().y($m).x1(Lm).x0(function(v){return v.base.x}):m=S0().x(Lm).y1($m).y0(function(v){return v.base.y}),m.defined(O0).curve(d),m(x)}return l==="vertical"&&Re(o)?m=S0().y($m).x1(Lm).x0(o):Re(o)?m=S0().x(Lm).y1($m).y0(o):m=Jte().x(Lm).y($m),m.defined(O0).curve(d),m(f)},ff=function(e){var r=e.className,n=e.points,s=e.path,a=e.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?a6e(e):s;return N.createElement("path",dR({},lt(e,!1),yw(e),{className:Rt("recharts-curve",r),d:o,ref:a}))},sP={exports:{}},aP,n8;function i6e(){if(n8)return aP;n8=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return aP=t,aP}var iP,s8;function o6e(){if(s8)return iP;s8=1;var t=i6e();function e(){}function r(){}return r.resetWarningCache=e,iP=function(){function n(o,l,c,u,d,f){if(f!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:e};return a.PropTypes=a,a},iP}var a8;function l6e(){return a8||(a8=1,sP.exports=o6e()()),sP.exports}var c6e=l6e();const xr=gr(c6e);var u6e=Object.getOwnPropertyNames,d6e=Object.getOwnPropertySymbols,h6e=Object.prototype.hasOwnProperty;function i8(t,e){return function(n,s,a){return t(n,s,a)&&e(n,s,a)}}function R0(t){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,s);var a=s.cache,o=a.get(r),l=a.get(n);if(o&&l)return o===n&&l===r;a.set(r,n),a.set(n,r);var c=t(r,n,s);return a.delete(r),a.delete(n),c}}function o8(t){return u6e(t).concat(d6e(t))}var f6e=Object.hasOwn||(function(t,e){return h6e.call(t,e)});function Bd(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var p6e="__v",m6e="__o",g6e="_owner",l8=Object.getOwnPropertyDescriptor,c8=Object.keys;function v6e(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function y6e(t,e){return Bd(t.getTime(),e.getTime())}function x6e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function b6e(t,e){return t===e}function u8(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var s=new Array(n),a=t.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var u=e.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(s[f]){f++;continue}var m=o.value,g=l.value;if(r.equals(m[0],g[0],c,f,t,e,r)&&r.equals(m[1],g[1],m[0],g[0],t,e,r)){d=s[f]=!0;break}f++}if(!d)return!1;c++}return!0}var w6e=Bd;function _6e(t,e,r){var n=c8(t),s=n.length;if(c8(e).length!==s)return!1;for(;s-- >0;)if(!rse(t,e,r,n[s]))return!1;return!0}function Fm(t,e,r){var n=o8(t),s=n.length;if(o8(e).length!==s)return!1;for(var a,o,l;s-- >0;)if(a=n[s],!rse(t,e,r,a)||(o=l8(t,a),l=l8(e,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function S6e(t,e){return Bd(t.valueOf(),e.valueOf())}function j6e(t,e){return t.source===e.source&&t.flags===e.flags}function d8(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var s=new Array(n),a=t.values(),o,l;(o=a.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!s[d]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function A6e(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function N6e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function rse(t,e,r,n){return(n===g6e||n===m6e||n===p6e)&&(t.$$typeof||e.$$typeof)?!0:f6e(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var E6e="[object Arguments]",C6e="[object Boolean]",T6e="[object Date]",P6e="[object Error]",k6e="[object Map]",O6e="[object Number]",R6e="[object Object]",I6e="[object RegExp]",M6e="[object Set]",D6e="[object String]",L6e="[object URL]",$6e=Array.isArray,h8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,f8=Object.assign,F6e=Object.prototype.toString.call.bind(Object.prototype.toString);function B6e(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,s=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,m=t.areUrlsEqual;return function(x,v,y){if(x===v)return!0;if(x==null||v==null)return!1;var w=typeof x;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?o(x,v,y):w==="function"?s(x,v,y):!1;var _=x.constructor;if(_!==v.constructor)return!1;if(_===Object)return l(x,v,y);if($6e(x))return e(x,v,y);if(h8!=null&&h8(x))return f(x,v,y);if(_===Date)return r(x,v,y);if(_===RegExp)return u(x,v,y);if(_===Map)return a(x,v,y);if(_===Set)return d(x,v,y);var A=F6e(x);return A===T6e?r(x,v,y):A===I6e?u(x,v,y):A===k6e?a(x,v,y):A===M6e?d(x,v,y):A===R6e?typeof x.then!="function"&&typeof v.then!="function"&&l(x,v,y):A===L6e?m(x,v,y):A===P6e?n(x,v,y):A===E6e?l(x,v,y):A===C6e||A===O6e||A===D6e?c(x,v,y):!1}}function U6e(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,s={areArraysEqual:n?Fm:v6e,areDatesEqual:y6e,areErrorsEqual:x6e,areFunctionsEqual:b6e,areMapsEqual:n?i8(u8,Fm):u8,areNumbersEqual:w6e,areObjectsEqual:n?Fm:_6e,arePrimitiveWrappersEqual:S6e,areRegExpsEqual:j6e,areSetsEqual:n?i8(d8,Fm):d8,areTypedArraysEqual:n?Fm:A6e,areUrlsEqual:N6e};if(r&&(s=f8({},s,r(s))),e){var a=R0(s.areArraysEqual),o=R0(s.areMapsEqual),l=R0(s.areObjectsEqual),c=R0(s.areSetsEqual);s=f8({},s,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function z6e(t){return function(e,r,n,s,a,o,l){return t(e,r,l)}}function q6e(t){var e=t.circular,r=t.comparator,n=t.createState,s=t.equals,a=t.strict;if(n)return function(c,u){var d=n(),f=d.cache,m=f===void 0?e?new WeakMap:void 0:f,g=d.meta;return r(c,u,{cache:m,equals:s,meta:g,strict:a})};if(e)return function(c,u){return r(c,u,{cache:new WeakMap,equals:s,meta:void 0,strict:a})};var o={cache:void 0,equals:s,meta:void 0,strict:a};return function(c,u){return r(c,u,o)}}var V6e=Jc();Jc({strict:!0});Jc({circular:!0});Jc({circular:!0,strict:!0});Jc({createInternalComparator:function(){return Bd}});Jc({strict:!0,createInternalComparator:function(){return Bd}});Jc({circular:!0,createInternalComparator:function(){return Bd}});Jc({circular:!0,createInternalComparator:function(){return Bd},strict:!0});function Jc(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,s=t.createState,a=t.strict,o=a===void 0?!1:a,l=U6e(t),c=B6e(l),u=n?n(c):z6e(c);return q6e({circular:r,comparator:c,createState:s,equals:u,strict:o})}function H6e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function p8(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(a){r<0&&(r=a),a-r>e?(t(a),r=-1):H6e(s)};requestAnimationFrame(n)}function hR(t){"@babel/helpers - typeof";return hR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hR(t)}function W6e(t){return Y6e(t)||X6e(t)||K6e(t)||G6e()}function G6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K6e(t,e){if(t){if(typeof t=="string")return m8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m8(t,e)}}function m8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function X6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Y6e(t){if(Array.isArray(t))return t}function Q6e(){var t={},e=function(){return null},r=!1,n=function s(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,l=W6e(o),c=l[0],u=l.slice(1);if(typeof c=="number"){p8(s.bind(null,u),c);return}s(c),p8(s.bind(null,u));return}hR(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function wv(t){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wv(t)}function g8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function v8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g8(Object(r),!0).forEach(function(n){nse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nse(t,e,r){return e=J6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J6e(t){var e=Z6e(t,"string");return wv(e)==="symbol"?e:String(e)}function Z6e(t,e){if(wv(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eqe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,s){return n.filter(function(a){return s.includes(a)})})},tqe=function(e){return e},rqe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},vg=function(e,r){return Object.keys(r).reduce(function(n,s){return v8(v8({},n),{},nse({},s,e(s,r[s])))},{})},y8=function(e,r,n){return e.map(function(s){return"".concat(rqe(s)," ").concat(r,"ms ").concat(n)}).join(",")};function nqe(t,e){return iqe(t)||aqe(t,e)||sse(t,e)||sqe()}function sqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aqe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function iqe(t){if(Array.isArray(t))return t}function oqe(t){return uqe(t)||cqe(t)||sse(t)||lqe()}function lqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sse(t,e){if(t){if(typeof t=="string")return fR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fR(t,e)}}function cqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uqe(t){if(Array.isArray(t))return fR(t)}function fR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Hw=1e-4,ase=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},ise=function(e,r){return e.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},x8=function(e,r){return function(n){var s=ase(e,r);return ise(s,n)}},dqe=function(e,r){return function(n){var s=ase(e,r),a=[].concat(oqe(s.map(function(o,l){return o*l}).slice(1)),[0]);return ise(a,n)}},b8=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=r[0],a=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,a=0,o=1,l=1;break;case"ease":s=.25,a=.1,o=.25,l=1;break;case"ease-in":s=.42,a=0,o=1,l=1;break;case"ease-out":s=.42,a=0,o=.58,l=1;break;case"ease-in-out":s=0,a=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=nqe(u,4);s=d[0],a=d[1],o=d[2],l=d[3]}}}var f=x8(s,o),m=x8(a,l),g=dqe(s,o),x=function(w){return w>1?1:w<0?0:w},v=function(w){for(var _=w>1?1:w,A=_,C=0;C<8;++C){var S=f(A)-_,E=g(A);if(Math.abs(S-_)<Hw||E<Hw)return m(A);A=x(A-S/E)}return m(A)};return v.isStepper=!1,v},hqe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,s=e.damping,a=s===void 0?8:s,o=e.dt,l=o===void 0?17:o,c=function(d,f,m){var g=-(d-f)*n,x=m*a,v=m+(g-x)*l/1e3,y=m*l/1e3+d;return Math.abs(y-f)<Hw&&Math.abs(v)<Hw?[f,0]:[y,v]};return c.isStepper=!0,c.dt=l,c},fqe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return b8(s);case"spring":return hqe();default:if(s.split("(")[0]==="cubic-bezier")return b8(s)}return typeof s=="function"?s:null};function _v(t){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_v(t)}function w8(t){return gqe(t)||mqe(t)||ose(t)||pqe()}function pqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gqe(t){if(Array.isArray(t))return mR(t)}function _8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ps(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_8(Object(r),!0).forEach(function(n){pR(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pR(t,e,r){return e=vqe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vqe(t){var e=yqe(t,"string");return _v(e)==="symbol"?e:String(e)}function yqe(t,e){if(_v(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_v(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xqe(t,e){return _qe(t)||wqe(t,e)||ose(t,e)||bqe()}function bqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ose(t,e){if(t){if(typeof t=="string")return mR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mR(t,e)}}function mR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wqe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function _qe(t){if(Array.isArray(t))return t}var Ww=function(e,r,n){return e+(r-e)*n},gR=function(e){var r=e.from,n=e.to;return r!==n},Sqe=function t(e,r,n){var s=vg(function(a,o){if(gR(o)){var l=e(o.from,o.to,o.velocity),c=xqe(l,2),u=c[0],d=c[1];return ps(ps({},o),{},{from:u,velocity:d})}return o},r);return n<1?vg(function(a,o){return gR(o)?ps(ps({},o),{},{velocity:Ww(o.velocity,s[a].velocity,n),from:Ww(o.from,s[a].from,n)}):o},r):t(e,s,n-1)};const jqe=(function(t,e,r,n,s){var a=eqe(t,e),o=a.reduce(function(y,w){return ps(ps({},y),{},pR({},w,[t[w],e[w]]))},{}),l=a.reduce(function(y,w){return ps(ps({},y),{},pR({},w,{from:t[w],velocity:0,to:e[w]}))},{}),c=-1,u,d,f=function(){return null},m=function(){return vg(function(w,_){return _.from},l)},g=function(){return!Object.values(l).filter(gR).length},x=function(w){u||(u=w);var _=w-u,A=_/r.dt;l=Sqe(r,l,A),s(ps(ps(ps({},t),e),m())),u=w,g()||(c=requestAnimationFrame(f))},v=function(w){d||(d=w);var _=(w-d)/n,A=vg(function(S,E){return Ww.apply(void 0,w8(E).concat([r(_)]))},o);if(s(ps(ps(ps({},t),e),A)),_<1)c=requestAnimationFrame(f);else{var C=vg(function(S,E){return Ww.apply(void 0,w8(E).concat([r(1)]))},o);s(ps(ps(ps({},t),e),C))}};return f=r.isStepper?x:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}});function Gf(t){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gf(t)}var Aqe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Nqe(t,e){if(t==null)return{};var r=Eqe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Eqe(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function oP(t){return kqe(t)||Pqe(t)||Tqe(t)||Cqe()}function Cqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tqe(t,e){if(t){if(typeof t=="string")return vR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vR(t,e)}}function Pqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kqe(t){if(Array.isArray(t))return vR(t)}function vR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function S8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function xi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S8(Object(r),!0).forEach(function(n){Qm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qm(t,e,r){return e=lse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rqe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lse(n.key),n)}}function Iqe(t,e,r){return e&&Rqe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lse(t){var e=Mqe(t,"string");return Gf(e)==="symbol"?e:String(e)}function Mqe(t,e){if(Gf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yR(t,e)}function yR(t,e){return yR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},yR(t,e)}function Lqe(t){var e=$qe();return function(){var n=Gw(t),s;if(e){var a=Gw(this).constructor;s=Reflect.construct(n,arguments,a)}else s=n.apply(this,arguments);return xR(this,s)}}function xR(t,e){if(e&&(Gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bR(t)}function bR(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $qe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gw(t){return Gw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gw(t)}var Eo=(function(t){Dqe(r,t);var e=Lqe(r);function r(n,s){var a;Oqe(this,r),a=e.call(this,n,s);var o=a.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,m=o.children,g=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(bR(a)),a.changeStyle=a.changeStyle.bind(bR(a)),!l||g<=0)return a.state={style:{}},typeof m=="function"&&(a.state={style:d}),xR(a);if(f&&f.length)a.state={style:f[0].style};else if(u){if(typeof m=="function")return a.state={style:u},xR(a);a.state={style:c?Qm({},c,u):u}}else a.state={style:{}};return a}return Iqe(r,[{key:"componentDidMount",value:function(){var s=this.props,a=s.isActive,o=s.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,f=a.from,m=this.state.style;if(l){if(!o){var g={style:c?Qm({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(g);return}if(!(V6e(s.to,d)&&s.canBegin&&s.isActive)){var x=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=x||u?f:s.to;if(this.state&&m){var y={style:c?Qm({},c,v):v};(c&&m[c]!==v||!c&&m!==v)&&this.setState(y)}this.runAnimation(xi(xi({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var a=this,o=s.from,l=s.to,c=s.duration,u=s.easing,d=s.begin,f=s.onAnimationEnd,m=s.onAnimationStart,g=jqe(o,l,fqe(u),c,this.changeStyle),x=function(){a.stopJSAnimation=g()};this.manager.start([m,d,x,c,f])}},{key:"runStepAnimation",value:function(s){var a=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],d=u.style,f=u.duration,m=f===void 0?0:f,g=function(v,y,w){if(w===0)return v;var _=y.duration,A=y.easing,C=A===void 0?"ease":A,S=y.style,E=y.properties,P=y.onAnimationEnd,R=w>0?o[w-1]:y,O=E||Object.keys(S);if(typeof C=="function"||C==="spring")return[].concat(oP(v),[a.runJSAnimation.bind(a,{from:R.style,to:S,duration:_,easing:C}),_]);var D=y8(O,_,C),I=xi(xi(xi({},R.style),S),{},{transition:D});return[].concat(oP(v),[I,_,P]).filter(tqe)};return this.manager.start([c].concat(oP(o.reduce(g,[d,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Q6e());var a=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,d=s.onAnimationStart,f=s.onAnimationEnd,m=s.steps,g=s.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var v=l?Qm({},l,c):c,y=y8(Object.keys(v),o,u);x.start([d,a,xi(xi({},v),{},{transition:y}),o,f])}},{key:"render",value:function(){var s=this.props,a=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Nqe(s,Aqe),u=N.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!l||u===0||o<=0)return a;var f=function(g){var x=g.props,v=x.style,y=v===void 0?{}:v,w=x.className,_=N.cloneElement(g,xi(xi({},c),{},{style:xi(xi({},y),d),className:w}));return _};return u===1?f(N.Children.only(a)):G.createElement("div",null,N.Children.map(a,function(m){return f(m)}))}}]),r})(N.PureComponent);Eo.displayName="Animate";Eo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Eo.propTypes={from:xr.oneOfType([xr.object,xr.string]),to:xr.oneOfType([xr.object,xr.string]),attributeName:xr.string,duration:xr.number,begin:xr.number,easing:xr.oneOfType([xr.string,xr.func]),steps:xr.arrayOf(xr.shape({duration:xr.number.isRequired,style:xr.object.isRequired,easing:xr.oneOfType([xr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),xr.func]),properties:xr.arrayOf("string"),onAnimationEnd:xr.func})),children:xr.oneOfType([xr.node,xr.func]),isActive:xr.bool,canBegin:xr.bool,onAnimationEnd:xr.func,shouldReAnimate:xr.bool,onAnimationStart:xr.func,onAnimationReStart:xr.func};function Sv(t){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(t)}function Kw(){return Kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kw.apply(this,arguments)}function Fqe(t,e){return qqe(t)||zqe(t,e)||Uqe(t,e)||Bqe()}function Bqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uqe(t,e){if(t){if(typeof t=="string")return j8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j8(t,e)}}function j8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zqe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function qqe(t){if(Array.isArray(t))return t}function A8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function N8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A8(Object(r),!0).forEach(function(n){Vqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vqe(t,e,r){return e=Hqe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hqe(t){var e=Wqe(t,"string");return Sv(e)=="symbol"?e:e+""}function Wqe(t,e){if(Sv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E8=function(e,r,n,s,a){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,d;if(o>0&&a instanceof Array){for(var f=[0,0,0,0],m=0,g=4;m<g;m++)f[m]=a[m]>o?o:a[m];d="M".concat(e,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(r)),d+="L ".concat(e+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+l*f[1])),d+="L ".concat(e+n,",").concat(r+s-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+n-c*f[2],",").concat(r+s)),d+="L ".concat(e+c*f[3],",").concat(r+s),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+s-l*f[3])),d+="Z"}else if(o>0&&a===+a&&a>0){var x=Math.min(o,a);d="M ".concat(e,",").concat(r+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+c*x,",").concat(r,`
            L `).concat(e+n-c*x,",").concat(r,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+n,",").concat(r+l*x,`
            L `).concat(e+n,",").concat(r+s-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+n-c*x,",").concat(r+s,`
            L `).concat(e+c*x,",").concat(r+s,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e,",").concat(r+s-l*x," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return d},Gqe=function(e,r){if(!e||!r)return!1;var n=e.x,s=e.y,a=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),d=Math.max(a,a+l),f=Math.min(o,o+c),m=Math.max(o,o+c);return n>=u&&n<=d&&s>=f&&s<=m}return!1},Kqe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JD=function(e){var r=N8(N8({},Kqe),e),n=N.useRef(),s=N.useState(-1),a=Fqe(s,2),o=a[0],l=a[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&l(C)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,m=r.radius,g=r.className,x=r.animationEasing,v=r.animationDuration,y=r.animationBegin,w=r.isAnimationActive,_=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var A=Rt("recharts-rectangle",g);return _?G.createElement(Eo,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:v,animationEasing:x,isActive:_},function(C){var S=C.width,E=C.height,P=C.x,R=C.y;return G.createElement(Eo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,isActive:w,easing:x},G.createElement("path",Kw({},lt(r,!0),{className:A,d:E8(P,R,S,E,m),ref:n})))}):G.createElement("path",Kw({},lt(r,!0),{className:A,d:E8(c,u,d,f,m)}))},Xqe=["points","className","baseLinePoints","connectNulls"];function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xh.apply(this,arguments)}function Yqe(t,e){if(t==null)return{};var r=Qqe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Qqe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function C8(t){return tVe(t)||eVe(t)||Zqe(t)||Jqe()}function Jqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zqe(t,e){if(t){if(typeof t=="string")return wR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wR(t,e)}}function eVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tVe(t){if(Array.isArray(t))return wR(t)}function wR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var T8=function(e){return e&&e.x===+e.x&&e.y===+e.y},rVe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){T8(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),T8(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},yg=function(e,r){var n=rVe(e);r&&(n=[n.reduce(function(a,o){return[].concat(C8(a),C8(o))},[])]);var s=n.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},nVe=function(e,r,n){var s=yg(e,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(yg(r.reverse(),n).slice(1))},sVe=function(e){var r=e.points,n=e.className,s=e.baseLinePoints,a=e.connectNulls,o=Yqe(e,Xqe);if(!r||!r.length)return null;var l=Rt("recharts-polygon",n);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",u=nVe(r,s,a);return G.createElement("g",{className:l},G.createElement("path",Xh({},lt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?G.createElement("path",Xh({},lt(o,!0),{fill:"none",d:yg(r,a)})):null,c?G.createElement("path",Xh({},lt(o,!0),{fill:"none",d:yg(s,a)})):null)}var d=yg(r,a);return G.createElement("path",Xh({},lt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function _R(){return _R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_R.apply(this,arguments)}var uj=function(e){var r=e.cx,n=e.cy,s=e.r,a=e.className,o=Rt("recharts-dot",a);return r===+r&&n===+n&&s===+s?N.createElement("circle",_R({},lt(e,!1),yw(e),{className:o,cx:r,cy:n,r:s})):null};function jv(t){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jv(t)}var aVe=["x","y","top","left","width","height","className"];function SR(){return SR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SR.apply(this,arguments)}function P8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function iVe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P8(Object(r),!0).forEach(function(n){oVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oVe(t,e,r){return e=lVe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lVe(t){var e=cVe(t,"string");return jv(e)=="symbol"?e:e+""}function cVe(t,e){if(jv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uVe(t,e){if(t==null)return{};var r=dVe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dVe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var hVe=function(e,r,n,s,a,o){return"M".concat(e,",").concat(a,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},fVe=function(e){var r=e.x,n=r===void 0?0:r,s=e.y,a=s===void 0?0:s,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,m=e.height,g=m===void 0?0:m,x=e.className,v=uVe(e,aVe),y=iVe({x:n,y:a,top:l,left:u,width:f,height:g},v);return!Re(n)||!Re(a)||!Re(f)||!Re(g)||!Re(l)||!Re(u)?null:G.createElement("path",SR({},lt(y,!0),{className:Rt("recharts-cross",x),d:hVe(n,a,f,g,l,u)}))},lP,k8;function pVe(){if(k8)return lP;k8=1;var t=aj(),e=Sne(),r=Io();function n(s,a){return s&&s.length?t(s,r(a,2),e):void 0}return lP=n,lP}var mVe=pVe();const gVe=gr(mVe);var cP,O8;function vVe(){if(O8)return cP;O8=1;var t=aj(),e=Io(),r=jne();function n(s,a){return s&&s.length?t(s,e(a,2),r):void 0}return cP=n,cP}var yVe=vVe();const xVe=gr(yVe);var bVe=["cx","cy","angle","ticks","axisLine"],wVe=["ticks","tick","angle","tickFormatter","stroke"];function Kf(t){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kf(t)}function xg(){return xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xg.apply(this,arguments)}function R8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function gu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R8(Object(r),!0).forEach(function(n){dj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I8(t,e){if(t==null)return{};var r=_Ve(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _Ve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function SVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,use(n.key),n)}}function jVe(t,e,r){return e&&M8(t.prototype,e),r&&M8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function AVe(t,e,r){return e=Xw(e),NVe(t,cse()?Reflect.construct(e,r||[],Xw(t).constructor):e.apply(t,r))}function NVe(t,e){if(e&&(Kf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EVe(t)}function EVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cse=function(){return!!t})()}function Xw(t){return Xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xw(t)}function CVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jR(t,e)}function jR(t,e){return jR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},jR(t,e)}function dj(t,e,r){return e=use(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function use(t){var e=TVe(t,"string");return Kf(e)=="symbol"?e:e+""}function TVe(t,e){if(Kf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hj=(function(t){function e(){return SVe(this,e),AVe(this,e,arguments)}return CVe(e,t),jVe(e,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return $r(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,a=n.cy,o=n.angle,l=n.ticks,c=gVe(l,function(d){return d.coordinate||0}),u=xVe(l,function(d){return d.coordinate||0});return{cx:s,cy:a,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,a=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=I8(n,bVe),d=l.reduce(function(x,v){return[Math.min(x[0],v.coordinate),Math.max(x[1],v.coordinate)]},[1/0,-1/0]),f=$r(s,a,d[0],o),m=$r(s,a,d[1],o),g=gu(gu(gu({},lt(u,!1)),{},{fill:"none"},lt(c,!1)),{},{x1:f.x,y1:f.y,x2:m.x,y2:m.y});return G.createElement("line",xg({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var n=this,s=this.props,a=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,u=s.stroke,d=I8(s,wVe),f=this.getTickTextAnchor(),m=lt(d,!1),g=lt(o,!1),x=a.map(function(v,y){var w=n.getTickValueCoord(v),_=gu(gu(gu(gu({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(w.x,", ").concat(w.y,")")},m),{},{stroke:"none",fill:u},g),{},{index:y},w),{},{payload:v});return G.createElement(lr,xg({className:Rt("recharts-polar-radius-axis-tick",Jne(o)),key:"tick-".concat(v.coordinate)},bd(n.props,v,y)),e.renderTickItem(o,_,c?c(v.value,y):v.value))});return G.createElement(lr,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,s=n.ticks,a=n.axisLine,o=n.tick;return!s||!s.length?null:G.createElement(lr,{className:Rt("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),os.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,a){var o;return G.isValidElement(n)?o=G.cloneElement(n,s):yt(n)?o=n(s):o=G.createElement(wd,xg({},s,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])})(N.PureComponent);dj(hj,"displayName","PolarRadiusAxis");dj(hj,"axisType","radiusAxis");dj(hj,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Xf(t){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(t)}function Tu(){return Tu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tu.apply(this,arguments)}function D8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function vu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D8(Object(r),!0).forEach(function(n){fj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hse(n.key),n)}}function kVe(t,e,r){return e&&L8(t.prototype,e),r&&L8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function OVe(t,e,r){return e=Yw(e),RVe(t,dse()?Reflect.construct(e,r||[],Yw(t).constructor):e.apply(t,r))}function RVe(t,e){if(e&&(Xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IVe(t)}function IVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dse=function(){return!!t})()}function Yw(t){return Yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yw(t)}function MVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AR(t,e)}function AR(t,e){return AR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},AR(t,e)}function fj(t,e,r){return e=hse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hse(t){var e=DVe(t,"string");return Xf(e)=="symbol"?e:e+""}function DVe(t,e){if(Xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var LVe=Math.PI/180,$8=1e-5,pj=(function(t){function e(){return PVe(this,e),OVe(this,e,arguments)}return MVe(e,t),kVe(e,[{key:"getTickLineCoord",value:function(n){var s=this.props,a=s.cx,o=s.cy,l=s.radius,c=s.orientation,u=s.tickSize,d=u||8,f=$r(a,o,l,n.coordinate),m=$r(a,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,a=Math.cos(-n.coordinate*LVe),o;return a>$8?o=s==="outer"?"start":"end":a<-$8?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,a=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=vu(vu({},lt(this.props,!1)),{},{fill:"none"},lt(l,!1));if(c==="circle")return G.createElement(uj,Tu({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:a,r:o}));var d=this.props.ticks,f=d.map(function(m){return $r(s,a,o,m.coordinate)});return G.createElement(sVe,Tu({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,a=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,u=s.stroke,d=lt(this.props,!1),f=lt(o,!1),m=vu(vu({},d),{},{fill:"none"},lt(l,!1)),g=a.map(function(x,v){var y=n.getTickLineCoord(x),w=n.getTickTextAnchor(x),_=vu(vu(vu({textAnchor:w},d),{},{stroke:"none",fill:u},f),{},{index:v,payload:x,x:y.x2,y:y.y2});return G.createElement(lr,Tu({className:Rt("recharts-polar-angle-axis-tick",Jne(o)),key:"tick-".concat(x.coordinate)},bd(n.props,x,v)),l&&G.createElement("line",Tu({className:"recharts-polar-angle-axis-tick-line"},m,y)),o&&e.renderTickItem(o,_,c?c(x.value,v):x.value))});return G.createElement(lr,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,s=n.ticks,a=n.radius,o=n.axisLine;return a<=0||!s||!s.length?null:G.createElement(lr,{className:Rt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,a){var o;return G.isValidElement(n)?o=G.cloneElement(n,s):yt(n)?o=n(s):o=G.createElement(wd,Tu({},s,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])})(N.PureComponent);fj(pj,"displayName","PolarAngleAxis");fj(pj,"axisType","angleAxis");fj(pj,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var uP,F8;function $Ve(){if(F8)return uP;F8=1;var t=wre(),e=t(Object.getPrototypeOf,Object);return uP=e,uP}var dP,B8;function FVe(){if(B8)return dP;B8=1;var t=Tl(),e=$Ve(),r=Pl(),n="[object Object]",s=Function.prototype,a=Object.prototype,o=s.toString,l=a.hasOwnProperty,c=o.call(Object);function u(d){if(!r(d)||t(d)!=n)return!1;var f=e(d);if(f===null)return!0;var m=l.call(f,"constructor")&&f.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==c}return dP=u,dP}var BVe=FVe();const UVe=gr(BVe);var hP,U8;function zVe(){if(U8)return hP;U8=1;var t=Tl(),e=Pl(),r="[object Boolean]";function n(s){return s===!0||s===!1||e(s)&&t(s)==r}return hP=n,hP}var qVe=zVe();const VVe=gr(qVe);function Av(t){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(t)}function Qw(){return Qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qw.apply(this,arguments)}function HVe(t,e){return XVe(t)||KVe(t,e)||GVe(t,e)||WVe()}function WVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GVe(t,e){if(t){if(typeof t=="string")return z8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z8(t,e)}}function z8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function KVe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function XVe(t){if(Array.isArray(t))return t}function q8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function V8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?q8(Object(r),!0).forEach(function(n){YVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YVe(t,e,r){return e=QVe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QVe(t){var e=JVe(t,"string");return Av(e)=="symbol"?e:e+""}function JVe(t,e){if(Av(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var H8=function(e,r,n,s,a){var o=n-s,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-o/2,",").concat(r+a),l+="L ".concat(e+n-o/2-s,",").concat(r+a),l+="L ".concat(e,",").concat(r," Z"),l},ZVe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eHe=function(e){var r=V8(V8({},ZVe),e),n=N.useRef(),s=N.useState(-1),a=HVe(s,2),o=a[0],l=a[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var A=n.current.getTotalLength();A&&l(A)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,m=r.height,g=r.className,x=r.animationEasing,v=r.animationDuration,y=r.animationBegin,w=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||m!==+m||d===0&&f===0||m===0)return null;var _=Rt("recharts-trapezoid",g);return w?G.createElement(Eo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:m,x:c,y:u},duration:v,animationEasing:x,isActive:w},function(A){var C=A.upperWidth,S=A.lowerWidth,E=A.height,P=A.x,R=A.y;return G.createElement(Eo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,easing:x},G.createElement("path",Qw({},lt(r,!0),{className:_,d:H8(P,R,C,S,E),ref:n})))}):G.createElement("g",null,G.createElement("path",Qw({},lt(r,!0),{className:_,d:H8(c,u,d,f,m)})))},tHe=["option","shapeType","propTransformer","activeClassName","isActive"];function Nv(t){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nv(t)}function rHe(t,e){if(t==null)return{};var r=nHe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nHe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function W8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Jw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W8(Object(r),!0).forEach(function(n){sHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sHe(t,e,r){return e=aHe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aHe(t){var e=iHe(t,"string");return Nv(e)=="symbol"?e:e+""}function iHe(t,e){if(Nv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oHe(t,e){return Jw(Jw({},e),t)}function lHe(t,e){return t==="symbols"}function G8(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return G.createElement(JD,r);case"trapezoid":return G.createElement(eHe,r);case"sector":return G.createElement(tse,r);case"symbols":if(lHe(e))return G.createElement(vD,r);break;default:return null}}function cHe(t){return N.isValidElement(t)?t.props:t}function fse(t){var e=t.option,r=t.shapeType,n=t.propTransformer,s=n===void 0?oHe:n,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,l=t.isActive,c=rHe(t,tHe),u;if(N.isValidElement(e))u=N.cloneElement(e,Jw(Jw({},c),cHe(e)));else if(yt(e))u=e(c);else if(UVe(e)&&!VVe(e)){var d=s(e,c);u=G.createElement(G8,{shapeType:r,elementProps:d})}else{var f=c;u=G.createElement(G8,{shapeType:r,elementProps:f})}return l?G.createElement(lr,{className:o},u):u}function mj(t,e){return e!=null&&"trapezoids"in t.props}function gj(t,e){return e!=null&&"sectors"in t.props}function Ev(t,e){return e!=null&&"points"in t.props}function uHe(t,e){var r,n,s=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,a=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return s&&a}function dHe(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function hHe(t,e){var r=t.x===e.x,n=t.y===e.y,s=t.z===e.z;return r&&n&&s}function fHe(t,e){var r;return mj(t,e)?r=uHe:gj(t,e)?r=dHe:Ev(t,e)&&(r=hHe),r}function pHe(t,e){var r;return mj(t,e)?r="trapezoids":gj(t,e)?r="sectors":Ev(t,e)&&(r="points"),r}function mHe(t,e){if(mj(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(gj(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Ev(t,e)?e.payload:{}}function gHe(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,s=pHe(r,e),a=mHe(r,e),o=n.filter(function(c,u){var d=Hf(a,c),f=r.props[s].filter(function(x){var v=fHe(r,e);return v(x,e)}),m=r.props[s].indexOf(f[f.length-1]),g=u===m;return d&&g}),l=n.indexOf(o[o.length-1]);return l}var ib;function Yf(t){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(t)}function Yh(){return Yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yh.apply(this,arguments)}function K8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Mr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K8(Object(r),!0).forEach(function(n){Ja(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mse(n.key),n)}}function yHe(t,e,r){return e&&X8(t.prototype,e),r&&X8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xHe(t,e,r){return e=Zw(e),bHe(t,pse()?Reflect.construct(e,r||[],Zw(t).constructor):e.apply(t,r))}function bHe(t,e){if(e&&(Yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wHe(t)}function wHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pse=function(){return!!t})()}function Zw(t){return Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zw(t)}function _He(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NR(t,e)}function NR(t,e){return NR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},NR(t,e)}function Ja(t,e,r){return e=mse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mse(t){var e=SHe(t,"string");return Yf(e)=="symbol"?e:e+""}function SHe(t,e){if(Yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ol=(function(t){function e(r){var n;return vHe(this,e),n=xHe(this,e,[r]),Ja(n,"pieRef",null),Ja(n,"sectorRefs",[]),Ja(n,"id",Mp("recharts-pie-")),Ja(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),yt(s)&&s()}),Ja(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),yt(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return _He(e,t),yHe(e,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,u=a.valueKey,d=lt(this.props,!1),f=lt(o,!1),m=lt(l,!1),g=o&&o.offsetRadius||20,x=n.map(function(v,y){var w=(v.startAngle+v.endAngle)/2,_=$r(v.cx,v.cy,v.outerRadius+g,w),A=Mr(Mr(Mr(Mr({},d),v),{},{stroke:"none"},f),{},{index:y,textAnchor:e.getTextAnchor(_.x,v.cx)},_),C=Mr(Mr(Mr(Mr({},d),v),{},{fill:"none",stroke:v.fill},m),{},{index:y,points:[$r(v.cx,v.cy,v.outerRadius,w),_]}),S=c;return It(c)&&It(u)?S="value":It(c)&&(S=u),G.createElement(lr,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(y)},l&&e.renderLabelLineItem(l,C,"line"),e.renderLabelItem(o,A,Yn(v,S)))});return G.createElement(lr,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(n){var s=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return n.map(function(u,d){if(u?.startAngle===0&&u?.endAngle===0&&n.length!==1)return null;var f=s.isActiveIndex(d),m=c&&s.hasActiveIndex()?c:null,g=f?o:m,x=Mr(Mr({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return G.createElement(lr,Yh({ref:function(y){y&&!s.sectorRefs.includes(y)&&s.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},bd(s.props,u,d),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(d)}),G.createElement(fse,Yh({option:g,isActive:f,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,a=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,d=s.animationId,f=this.state,m=f.prevSectors,g=f.prevIsAnimationActive;return G.createElement(Eo,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var v=x.t,y=[],w=a&&a[0],_=w.startAngle;return a.forEach(function(A,C){var S=m&&m[C],E=C>0?Ia(A,"paddingAngle",0):0;if(S){var P=ia(S.endAngle-S.startAngle,A.endAngle-A.startAngle),R=Mr(Mr({},A),{},{startAngle:_+E,endAngle:_+P(v)+E});y.push(R),_=R.endAngle}else{var O=A.endAngle,D=A.startAngle,I=ia(0,O-D),$=I(v),M=Mr(Mr({},A),{},{startAngle:_+E,endAngle:_+$+E});y.push(M),_=M.endAngle}}),G.createElement(lr,null,n.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,a=n.isAnimationActive,o=this.state.prevSectors;return a&&s&&s.length&&(!o||!Hf(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,a=s.hide,o=s.sectors,l=s.className,c=s.label,u=s.cx,d=s.cy,f=s.innerRadius,m=s.outerRadius,g=s.isAnimationActive,x=this.state.isAnimationFinished;if(a||!o||!o.length||!Re(u)||!Re(d)||!Re(f)||!Re(m))return null;var v=Rt("recharts-pie",l);return G.createElement(lr,{tabIndex:this.props.rootTabIndex,className:v,ref:function(w){n.pieRef=w}},this.renderSectors(),c&&this.renderLabels(o),os.renderCallByParent(this.props,null,!1),(!g||x)&&ml.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,a){if(G.isValidElement(n))return G.cloneElement(n,s);if(yt(n))return n(s);var o=Rt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return G.createElement(ff,Yh({},s,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,a){if(G.isValidElement(n))return G.cloneElement(n,s);var o=a;if(yt(n)&&(o=n(s),G.isValidElement(o)))return o;var l=Rt("recharts-pie-label-text",typeof n!="boolean"&&!yt(n)?n.className:"");return G.createElement(wd,Yh({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(N.PureComponent);ib=Ol;Ja(Ol,"displayName","Pie");Ja(Ol,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ld.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ja(Ol,"parseDeltaAngle",function(t,e){var r=Fs(e-t),n=Math.min(Math.abs(e-t),360);return r*n});Ja(Ol,"getRealPieData",function(t){var e=t.data,r=t.children,n=lt(t,!1),s=ri(r,JS);return e&&e.length?e.map(function(a,o){return Mr(Mr(Mr({payload:a},n),a),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(a){return Mr(Mr({},n),a.props)}):[]});Ja(Ol,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,s=e.width,a=e.height,o=Qne(s,a),l=n+Bs(t.cx,s,s/2),c=r+Bs(t.cy,a,a/2),u=Bs(t.innerRadius,o,0),d=Bs(t.outerRadius,o,o*.8),f=t.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Ja(Ol,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?Mr(Mr({},e.type.defaultProps),e.props):e.props,s=ib.getRealPieData(n);if(!s||!s.length)return null;var a=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,m=n.tooltipType,g=Math.abs(n.minAngle),x=ib.parseCoordinateOfPie(n,r),v=ib.parseDeltaAngle(o,l),y=Math.abs(v),w=u;It(u)&&It(f)?($i(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):It(u)&&($i(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=f);var _=s.filter(function(R){return Yn(R,w,0)!==0}).length,A=(y>=360?_:_-1)*c,C=y-_*g-A,S=s.reduce(function(R,O){var D=Yn(O,w,0);return R+(Re(D)?D:0)},0),E;if(S>0){var P;E=s.map(function(R,O){var D=Yn(R,w,0),I=Yn(R,d,O),$=(Re(D)?D:0)/S,M;O?M=P.endAngle+Fs(v)*c*(D!==0?1:0):M=o;var U=M+Fs(v)*((D!==0?g:0)+$*C),H=(M+U)/2,z=(x.innerRadius+x.outerRadius)/2,q=[{name:I,value:D,payload:R,dataKey:w,type:m}],V=$r(x.cx,x.cy,z,H);return P=Mr(Mr(Mr({percent:$,cornerRadius:a,name:I,tooltipPayload:q,midAngle:H,middleRadius:z,tooltipPosition:V},R),x),{},{value:Yn(R,w),startAngle:M,endAngle:U,payload:R,paddingAngle:Fs(v)*c}),P})}return Mr(Mr({},x),{},{sectors:E,data:s})});var fP,Y8;function jHe(){if(Y8)return fP;Y8=1;var t=Math.ceil,e=Math.max;function r(n,s,a,o){for(var l=-1,c=e(t((s-n)/(a||1)),0),u=Array(c);c--;)u[o?c:++l]=n,n+=a;return u}return fP=r,fP}var pP,Q8;function gse(){if(Q8)return pP;Q8=1;var t=Lre(),e=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=t(s),s===e||s===-e){var a=s<0?-1:1;return a*r}return s===s?s:0}return pP=n,pP}var mP,J8;function AHe(){if(J8)return mP;J8=1;var t=jHe(),e=QS(),r=gse();function n(s){return function(a,o,l){return l&&typeof l!="number"&&e(a,o,l)&&(o=l=void 0),a=r(a),o===void 0?(o=a,a=0):o=r(o),l=l===void 0?a<o?1:-1:r(l),t(a,o,l,s)}}return mP=n,mP}var gP,Z8;function NHe(){if(Z8)return gP;Z8=1;var t=AHe(),e=t();return gP=e,gP}var EHe=NHe();const e_=gr(EHe);function Cv(t){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cv(t)}function eW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function tW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eW(Object(r),!0).forEach(function(n){vse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vse(t,e,r){return e=CHe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CHe(t){var e=THe(t,"string");return Cv(e)=="symbol"?e:e+""}function THe(t,e){if(Cv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PHe=["Webkit","Moz","O","ms"],kHe=function(e,r){var n=e.replace(/(\w)/,function(a){return a.toUpperCase()}),s=PHe.reduce(function(a,o){return tW(tW({},a),{},vse({},o+n,r))},{});return s[e]=r,s};function Qf(t){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qf(t)}function t_(){return t_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},t_.apply(this,arguments)}function rW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function vP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rW(Object(r),!0).forEach(function(n){xa(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xse(n.key),n)}}function RHe(t,e,r){return e&&nW(t.prototype,e),r&&nW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function IHe(t,e,r){return e=r_(e),MHe(t,yse()?Reflect.construct(e,r||[],r_(t).constructor):e.apply(t,r))}function MHe(t,e){if(e&&(Qf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DHe(t)}function DHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yse=function(){return!!t})()}function r_(t){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r_(t)}function LHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ER(t,e)}function ER(t,e){return ER=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ER(t,e)}function xa(t,e,r){return e=xse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xse(t){var e=$He(t,"string");return Qf(e)=="symbol"?e:e+""}function $He(t,e){if(Qf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var FHe=function(e){var r=e.data,n=e.startIndex,s=e.endIndex,a=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=mg().domain(e_(0,c)).range([a,a+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:d}},sW=function(e){return e.changedTouches&&!!e.changedTouches.length},Jf=(function(t){function e(r){var n;return OHe(this,e),n=IHe(this,e,[r]),xa(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),xa(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),xa(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,a=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:a,startIndex:l})}),n.detachDragEndListener()}),xa(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),xa(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),xa(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),xa(n,"handleSlideDragStart",function(s){var a=sW(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return LHe(e,t),RHe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,a=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(s,a),m=Math.max(s,a),g=e.getIndexInRange(o,f),x=e.getIndexInRange(o,m);return{startIndex:g-g%c,endIndex:x===d?d:x-x%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,a=s.data,o=s.tickFormatter,l=s.dataKey,c=Yn(a[n],l,n);return yt(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,a=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,m=c.startIndex,g=c.endIndex,x=c.onChange,v=n.pageX-a;v>0?v=Math.min(v,u+d-f-l,u+d-f-o):v<0&&(v=Math.max(v,u-o,u-l));var y=this.getIndex({startX:o+v,endX:l+v});(y.startIndex!==m||y.endIndex!==g)&&x&&x(y),this.setState({startX:o+v,endX:l+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var a=sW(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,a=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],d=this.props,f=d.x,m=d.width,g=d.travellerWidth,x=d.onChange,v=d.gap,y=d.data,w={startX:this.state.startX,endX:this.state.endX},_=n.pageX-a;_>0?_=Math.min(_,f+m-g-u):_<0&&(_=Math.max(_,f-u)),w[o]=u+_;var A=this.getIndex(w),C=A.startIndex,S=A.endIndex,E=function(){var R=y.length-1;return o==="startX"&&(l>c?C%v===0:S%v===0)||l<c&&S===R||o==="endX"&&(l>c?S%v===0:C%v===0)||l>c&&S===R};this.setState(xa(xa({},o,u+_),"brushMoveStartX",n.pageX),function(){x&&E()&&x(A)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var a=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[s],f=l.indexOf(d);if(f!==-1){var m=f+n;if(!(m===-1||m>=l.length)){var g=l[m];s==="startX"&&g>=u||s==="endX"&&g<=c||this.setState(xa({},s,g),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,a=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return G.createElement("rect",{stroke:u,fill:c,x:s,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,a=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=N.Children.only(u);return f?G.cloneElement(f,{x:s,y:a,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var a,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,m=c.traveller,g=c.ariaLabel,x=c.data,v=c.startIndex,y=c.endIndex,w=Math.max(n,this.props.x),_=vP(vP({},lt(this.props,!1)),{},{x:w,y:u,width:d,height:f}),A=g||"Min value: ".concat((a=x[v])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=x[y])===null||o===void 0?void 0:o.name);return G.createElement(lr,{tabIndex:0,role:"slider","aria-label":A,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(m,_))}},{key:"renderSlide",value:function(n,s){var a=this.props,o=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(n,s)+u,f=Math.max(Math.abs(s-n)-u,0);return G.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,a=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,m=d.endX,g=5,x={pointerEvents:"none",fill:u};return G.createElement(lr,{className:"recharts-brush-texts"},G.createElement(wd,t_({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-g,y:o+l/2},x),this.getTextOfTick(s)),G.createElement(wd,t_({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+c+g,y:o+l/2},x),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,s=n.data,a=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,m=this.state,g=m.startX,x=m.endX,v=m.isTextActive,y=m.isSlideMoving,w=m.isTravellerMoving,_=m.isTravellerFocused;if(!s||!s.length||!Re(l)||!Re(c)||!Re(u)||!Re(d)||u<=0||d<=0)return null;var A=Rt("recharts-brush",a),C=G.Children.count(o)===1,S=kHe("userSelect","none");return G.createElement(lr,{className:A,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(g,x),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(x,"endX"),(v||y||w||_||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,a=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(a+l/2)-1;return G.createElement(G.Fragment,null,G.createElement("rect",{x:s,y:a,width:o,height:l,fill:c,stroke:"none"}),G.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),G.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var a;return G.isValidElement(n)?a=G.cloneElement(n,s):yt(n)?a=n(s):a=e.renderDefaultTraveller(s),a}},{key:"getDerivedStateFromProps",value:function(n,s){var a=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(a!==s.prevData||u!==s.prevUpdateId)return vP({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},a&&a.length?FHe({data:a,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var m=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,s){for(var a=n.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])})(N.PureComponent);xa(Jf,"displayName","Brush");xa(Jf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var yP,aW;function BHe(){if(aW)return yP;aW=1;var t=jD();function e(r,n){var s;return t(r,function(a,o,l){return s=n(a,o,l),!s}),!!s}return yP=e,yP}var xP,iW;function UHe(){if(iW)return xP;iW=1;var t=pre(),e=Io(),r=BHe(),n=fa(),s=QS();function a(o,l,c){var u=n(o)?t:r;return c&&s(o,l,c)&&(l=void 0),u(o,e(l,3))}return xP=a,xP}var zHe=UHe();const qHe=gr(zHe);var bo=function(e,r){var n=e.alwaysShow,s=e.ifOverflow;return n&&(s="extendDomain"),s===r},bP,oW;function VHe(){if(oW)return bP;oW=1;var t=Ore();function e(r,n,s){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return bP=e,bP}var wP,lW;function HHe(){if(lW)return wP;lW=1;var t=VHe(),e=Pre(),r=Io();function n(s,a){var o={};return a=r(a,3),e(s,function(l,c,u){t(o,c,a(l,c,u))}),o}return wP=n,wP}var WHe=HHe();const GHe=gr(WHe);var _P,cW;function KHe(){if(cW)return _P;cW=1;function t(e,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!r(e[n],n,e))return!1;return!0}return _P=t,_P}var SP,uW;function XHe(){if(uW)return SP;uW=1;var t=jD();function e(r,n){var s=!0;return t(r,function(a,o,l){return s=!!n(a,o,l),s}),s}return SP=e,SP}var jP,dW;function YHe(){if(dW)return jP;dW=1;var t=KHe(),e=XHe(),r=Io(),n=fa(),s=QS();function a(o,l,c){var u=n(o)?t:e;return c&&s(o,l,c)&&(l=void 0),u(o,r(l,3))}return jP=a,jP}var QHe=YHe();const bse=gr(QHe);var JHe=["x","y"];function Tv(t){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(t)}function CR(){return CR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CR.apply(this,arguments)}function hW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Bm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hW(Object(r),!0).forEach(function(n){ZHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZHe(t,e,r){return e=e8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e8e(t){var e=t8e(t,"string");return Tv(e)=="symbol"?e:e+""}function t8e(t,e){if(Tv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r8e(t,e){if(t==null)return{};var r=n8e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function n8e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function s8e(t,e){var r=t.x,n=t.y,s=r8e(t,JHe),a="".concat(r),o=parseInt(a,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||s.height),d=parseInt(u,10),f="".concat(e.width||s.width),m=parseInt(f,10);return Bm(Bm(Bm(Bm(Bm({},e),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:e.name,radius:e.radius})}function fW(t){return G.createElement(fse,CR({shapeType:"rectangle",propTransformer:s8e,activeClassName:"recharts-active-bar"},t))}var a8e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof e=="number")return e;var a=Re(n)||TDe(n);return a?e(n,s):(a||Sd(),r)}},i8e=["value","background"],wse;function Zf(t){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zf(t)}function o8e(t,e){if(t==null)return{};var r=l8e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function l8e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function n_(){return n_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n_.apply(this,arguments)}function pW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Pn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pW(Object(r),!0).forEach(function(n){xc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sse(n.key),n)}}function u8e(t,e,r){return e&&mW(t.prototype,e),r&&mW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d8e(t,e,r){return e=s_(e),h8e(t,_se()?Reflect.construct(e,r||[],s_(t).constructor):e.apply(t,r))}function h8e(t,e){if(e&&(Zf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f8e(t)}function f8e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _se(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_se=function(){return!!t})()}function s_(t){return s_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s_(t)}function p8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TR(t,e)}function TR(t,e){return TR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},TR(t,e)}function xc(t,e,r){return e=Sse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sse(t){var e=m8e(t,"string");return Zf(e)=="symbol"?e:e+""}function m8e(t,e){if(Zf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sy=(function(t){function e(){var r;c8e(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=d8e(this,e,[].concat(s)),xc(r,"state",{isAnimationFinished:!1}),xc(r,"id",Mp("recharts-bar-")),xc(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),xc(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return p8e(e,t),u8e(e,[{key:"renderRectanglesStatically",value:function(n){var s=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,u=a.activeBar,d=lt(this.props,!1);return n&&n.map(function(f,m){var g=m===c,x=g?u:o,v=Pn(Pn(Pn({},d),f),{},{isActive:g,option:x,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return G.createElement(lr,n_({className:"recharts-bar-rectangle"},bd(s.props,f,m),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(m)}),G.createElement(fW,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,a=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,m=this.state.prevData;return G.createElement(Eo,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var x=g.t,v=a.map(function(y,w){var _=m&&m[w];if(_){var A=ia(_.x,y.x),C=ia(_.y,y.y),S=ia(_.width,y.width),E=ia(_.height,y.height);return Pn(Pn({},y),{},{x:A(x),y:C(x),width:S(x),height:E(x)})}if(o==="horizontal"){var P=ia(0,y.height),R=P(x);return Pn(Pn({},y),{},{y:y.y+y.height-R,height:R})}var O=ia(0,y.width),D=O(x);return Pn(Pn({},y),{},{width:D})});return G.createElement(lr,null,n.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,a=n.isAnimationActive,o=this.state.prevData;return a&&s&&s.length&&(!o||!Hf(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,a=s.data,o=s.dataKey,l=s.activeIndex,c=lt(this.props.background,!1);return a.map(function(u,d){u.value;var f=u.background,m=o8e(u,i8e);if(!f)return null;var g=Pn(Pn(Pn(Pn(Pn({},m),{},{fill:"#eee"},f),c),bd(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return G.createElement(fW,n_({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},g))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,f=ri(d,cj);if(!f)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,g=function(y,w){var _=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:_,errorVal:Yn(y,w)}},x={clipPath:n?"url(#clipPath-".concat(s,")"):null};return G.createElement(lr,x,f.map(function(v){return G.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:g})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,a=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,m=n.height,g=n.isAnimationActive,x=n.background,v=n.id;if(s||!a||!a.length)return null;var y=this.state.isAnimationFinished,w=Rt("recharts-bar",o),_=l&&l.allowDataOverflow,A=c&&c.allowDataOverflow,C=_||A,S=It(v)?this.id:v;return G.createElement(lr,{className:w},_||A?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(S)},G.createElement("rect",{x:_?u:u-f/2,y:A?d:d-m/2,width:_?f:f*2,height:A?m:m*2}))):null,G.createElement(lr,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(S,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,S),(!g||y)&&ml.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(N.PureComponent);wse=Sy;xc(Sy,"displayName","Bar");xc(Sy,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ld.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});xc(Sy,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,s=t.bandSize,a=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,m=t.offset,g=VUe(n,r);if(!g)return null;var x=e.layout,v=r.type.defaultProps,y=v!==void 0?Pn(Pn({},v),r.props):r.props,w=y.dataKey,_=y.children,A=y.minPointSize,C=x==="horizontal"?o:a,S=u?C.scale.domain():null,E=QUe({numericAxis:C}),P=ri(_,JS),R=f.map(function(O,D){var I,$,M,U,H,z;u?I=HUe(u[d+D],S):(I=Yn(O,w),Array.isArray(I)||(I=[E,I]));var q=a8e(A,wse.defaultProps.minPointSize)(I[1],D);if(x==="horizontal"){var V,W=[o.scale(I[0]),o.scale(I[1])],B=W[0],F=W[1];$=BH({axis:a,ticks:l,bandSize:s,offset:g.offset,entry:O,index:D}),M=(V=F??B)!==null&&V!==void 0?V:void 0,U=g.size;var Y=B-F;if(H=Number.isNaN(Y)?0:Y,z={x:$,y:o.y,width:U,height:o.height},Math.abs(q)>0&&Math.abs(H)<Math.abs(q)){var oe=Fs(H||q)*(Math.abs(q)-Math.abs(H));M-=oe,H+=oe}}else{var xe=[a.scale(I[0]),a.scale(I[1])],J=xe[0],Ee=xe[1];if($=J,M=BH({axis:o,ticks:c,bandSize:s,offset:g.offset,entry:O,index:D}),U=Ee-J,H=g.size,z={x:a.x,y:M,width:a.width,height:H},Math.abs(q)>0&&Math.abs(U)<Math.abs(q)){var ye=Fs(U||q)*(Math.abs(q)-Math.abs(U));U+=ye}}return Pn(Pn(Pn({},O),{},{x:$,y:M,width:U,height:H,value:u?I:I[1],payload:O,background:z},P&&P[D]&&P[D].props),{},{tooltipPayload:[Xne(r,O)],tooltipPosition:{x:$+U/2,y:M+H/2}})});return Pn({data:R,layout:x},m)});function Pv(t){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(t)}function g8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jse(n.key),n)}}function v8e(t,e,r){return e&&gW(t.prototype,e),r&&gW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function vW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ti(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vW(Object(r),!0).forEach(function(n){vj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vj(t,e,r){return e=jse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jse(t){var e=y8e(t,"string");return Pv(e)=="symbol"?e:e+""}function y8e(t,e){if(Pv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x8e=function(e,r,n,s,a){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!wa(u,Sy);return d.reduce(function(g,x){var v=r[x],y=v.orientation,w=v.domain,_=v.padding,A=_===void 0?{}:_,C=v.mirror,S=v.reversed,E="".concat(y).concat(C?"Mirror":""),P,R,O,D,I;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var $=w[1]-w[0],M=1/0,U=v.categoricalDomain.sort(ODe);if(U.forEach(function(xe,J){J>0&&(M=Math.min((xe||0)-(U[J-1]||0),M))}),Number.isFinite(M)){var H=M/$,z=v.layout==="vertical"?n.height:n.width;if(v.padding==="gap"&&(P=H*z/2),v.padding==="no-gap"){var q=Bs(e.barCategoryGap,H*z),V=H*z/2;P=V-q-(V-q)/z*q}}}s==="xAxis"?R=[n.left+(A.left||0)+(P||0),n.left+n.width-(A.right||0)-(P||0)]:s==="yAxis"?R=c==="horizontal"?[n.top+n.height-(A.bottom||0),n.top+(A.top||0)]:[n.top+(A.top||0)+(P||0),n.top+n.height-(A.bottom||0)-(P||0)]:R=v.range,S&&(R=[R[1],R[0]]);var W=Hne(v,a,m),B=W.scale,F=W.realScaleType;B.domain(w).range(R),Wne(B);var Y=Gne(B,Ti(Ti({},v),{},{realScaleType:F}));s==="xAxis"?(I=y==="top"&&!C||y==="bottom"&&C,O=n.left,D=f[E]-I*v.height):s==="yAxis"&&(I=y==="left"&&!C||y==="right"&&C,O=f[E]-I*v.width,D=n.top);var oe=Ti(Ti(Ti({},v),Y),{},{realScaleType:F,x:O,y:D,scale:B,width:s==="xAxis"?n.width:v.width,height:s==="yAxis"?n.height:v.height});return oe.bandSize=zw(oe,Y),!v.hide&&s==="xAxis"?f[E]+=(I?-1:1)*oe.height:v.hide||(f[E]+=(I?-1:1)*oe.width),Ti(Ti({},g),{},vj({},x,oe))},{})},Ase=function(e,r){var n=e.x,s=e.y,a=r.x,o=r.y;return{x:Math.min(n,a),y:Math.min(s,o),width:Math.abs(a-n),height:Math.abs(o-s)}},b8e=function(e){var r=e.x1,n=e.y1,s=e.x2,a=e.y2;return Ase({x:r,y:n},{x:s,y:a})},Nse=(function(){function t(e){g8e(this,t),this.scale=e}return v8e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],a=n[n.length-1];return s<=a?r>=s&&r<=a:r>=a&&r<=s}}],[{key:"create",value:function(r){return new t(r)}}])})();vj(Nse,"EPS",1e-4);var ZD=function(e){var r=Object.keys(e).reduce(function(n,s){return Ti(Ti({},n),{},vj({},s,Nse.create(e[s])))},{});return Ti(Ti({},r),{},{apply:function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return GHe(s,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return bse(s,function(a,o){return r[o].isInRange(a)})}})};function w8e(t){return(t%180+180)%180}var _8e=function(e){var r=e.width,n=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=w8e(s),o=a*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},AP,yW;function S8e(){if(yW)return AP;yW=1;var t=Io(),e=yy(),r=XS();function n(s){return function(a,o,l){var c=Object(a);if(!e(a)){var u=t(o,3);a=r(a),o=function(f){return u(c[f],f,c)}}var d=s(a,o,l);return d>-1?c[u?a[d]:d]:void 0}}return AP=n,AP}var NP,xW;function j8e(){if(xW)return NP;xW=1;var t=gse();function e(r){var n=t(r),s=n%1;return n===n?s?n-s:n:0}return NP=e,NP}var EP,bW;function A8e(){if(bW)return EP;bW=1;var t=Are(),e=Io(),r=j8e(),n=Math.max;function s(a,o,l){var c=a==null?0:a.length;if(!c)return-1;var u=l==null?0:r(l);return u<0&&(u=n(c+u,0)),t(a,e(o,3),u)}return EP=s,EP}var CP,wW;function N8e(){if(wW)return CP;wW=1;var t=S8e(),e=A8e(),r=t(e);return CP=r,CP}var E8e=N8e();const C8e=gr(E8e);var T8e=Ute();const P8e=gr(T8e);var k8e=P8e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),eL=N.createContext(void 0),tL=N.createContext(void 0),Ese=N.createContext(void 0),Cse=N.createContext({}),Tse=N.createContext(void 0),Pse=N.createContext(0),kse=N.createContext(0),_W=function(e){var r=e.state,n=r.xAxisMap,s=r.yAxisMap,a=r.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=k8e(a);return G.createElement(eL.Provider,{value:n},G.createElement(tL.Provider,{value:s},G.createElement(Cse.Provider,{value:a},G.createElement(Ese.Provider,{value:d},G.createElement(Tse.Provider,{value:o},G.createElement(Pse.Provider,{value:u},G.createElement(kse.Provider,{value:c},l)))))))},O8e=function(){return N.useContext(Tse)},Ose=function(e){var r=N.useContext(eL);r==null&&Sd();var n=r[e];return n==null&&Sd(),n},R8e=function(){var e=N.useContext(eL);return pc(e)},I8e=function(){var e=N.useContext(tL),r=C8e(e,function(n){return bse(n.domain,Number.isFinite)});return r||pc(e)},Rse=function(e){var r=N.useContext(tL);r==null&&Sd();var n=r[e];return n==null&&Sd(),n},M8e=function(){var e=N.useContext(Ese);return e},D8e=function(){return N.useContext(Cse)},rL=function(){return N.useContext(kse)},nL=function(){return N.useContext(Pse)};function ep(t){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(t)}function L8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $8e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mse(n.key),n)}}function F8e(t,e,r){return e&&$8e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function B8e(t,e,r){return e=a_(e),U8e(t,Ise()?Reflect.construct(e,r||[],a_(t).constructor):e.apply(t,r))}function U8e(t,e){if(e&&(ep(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z8e(t)}function z8e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ise(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ise=function(){return!!t})()}function a_(t){return a_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a_(t)}function q8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PR(t,e)}function PR(t,e){return PR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},PR(t,e)}function SW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function jW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SW(Object(r),!0).forEach(function(n){sL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sL(t,e,r){return e=Mse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mse(t){var e=V8e(t,"string");return ep(e)=="symbol"?e:e+""}function V8e(t,e){if(ep(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function H8e(t,e){return X8e(t)||K8e(t,e)||G8e(t,e)||W8e()}function W8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G8e(t,e){if(t){if(typeof t=="string")return AW(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AW(t,e)}}function AW(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function K8e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function X8e(t){if(Array.isArray(t))return t}function kR(){return kR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kR.apply(this,arguments)}var Y8e=function(e,r){var n;return G.isValidElement(e)?n=G.cloneElement(e,r):yt(e)?n=e(r):n=G.createElement("line",kR({},r,{className:"recharts-reference-line-line"})),n},Q8e=function(e,r,n,s,a,o,l,c,u){var d=a.x,f=a.y,m=a.width,g=a.height;if(n){var x=u.y,v=e.y.apply(x,{position:o});if(bo(u,"discard")&&!e.y.isInRange(v))return null;var y=[{x:d+m,y:v},{x:d,y:v}];return c==="left"?y.reverse():y}if(r){var w=u.x,_=e.x.apply(w,{position:o});if(bo(u,"discard")&&!e.x.isInRange(_))return null;var A=[{x:_,y:f+g},{x:_,y:f}];return l==="top"?A.reverse():A}if(s){var C=u.segment,S=C.map(function(E){return e.apply(E,{position:o})});return bo(u,"discard")&&qHe(S,function(E){return!e.isInRange(E)})?null:S}return null};function J8e(t){var e=t.x,r=t.y,n=t.segment,s=t.xAxisId,a=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=O8e(),d=Ose(s),f=Rse(a),m=M8e();if(!u||!m)return null;$i(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=ZD({x:d.scale,y:f.scale}),x=Qn(e),v=Qn(r),y=n&&n.length===2,w=Q8e(g,x,v,y,m,t.position,d.orientation,f.orientation,t);if(!w)return null;var _=H8e(w,2),A=_[0],C=A.x,S=A.y,E=_[1],P=E.x,R=E.y,O=bo(t,"hidden")?"url(#".concat(u,")"):void 0,D=jW(jW({clipPath:O},lt(t,!0)),{},{x1:C,y1:S,x2:P,y2:R});return G.createElement(lr,{className:Rt("recharts-reference-line",l)},Y8e(o,D),os.renderCallByParent(t,b8e({x1:C,y1:S,x2:P,y2:R})))}var aL=(function(t){function e(){return L8e(this,e),B8e(this,e,arguments)}return q8e(e,t),F8e(e,[{key:"render",value:function(){return G.createElement(J8e,this.props)}}])})(G.Component);sL(aL,"displayName","ReferenceLine");sL(aL,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function OR(){return OR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OR.apply(this,arguments)}function tp(t){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tp(t)}function NW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function EW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NW(Object(r),!0).forEach(function(n){yj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Z8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eWe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lse(n.key),n)}}function tWe(t,e,r){return e&&eWe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rWe(t,e,r){return e=i_(e),nWe(t,Dse()?Reflect.construct(e,r||[],i_(t).constructor):e.apply(t,r))}function nWe(t,e){if(e&&(tp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sWe(t)}function sWe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dse=function(){return!!t})()}function i_(t){return i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i_(t)}function aWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RR(t,e)}function RR(t,e){return RR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},RR(t,e)}function yj(t,e,r){return e=Lse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lse(t){var e=iWe(t,"string");return tp(e)=="symbol"?e:e+""}function iWe(t,e){if(tp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oWe=function(e){var r=e.x,n=e.y,s=e.xAxis,a=e.yAxis,o=ZD({x:s.scale,y:a.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return bo(e,"discard")&&!o.isInRange(l)?null:l},xj=(function(t){function e(){return Z8e(this,e),rWe(this,e,arguments)}return aWe(e,t),tWe(e,[{key:"render",value:function(){var n=this.props,s=n.x,a=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Qn(s),d=Qn(a);if($i(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=oWe(this.props);if(!f)return null;var m=f.x,g=f.y,x=this.props,v=x.shape,y=x.className,w=bo(this.props,"hidden")?"url(#".concat(c,")"):void 0,_=EW(EW({clipPath:w},lt(this.props,!0)),{},{cx:m,cy:g});return G.createElement(lr,{className:Rt("recharts-reference-dot",y)},e.renderDot(v,_),os.renderCallByParent(this.props,{x:m-o,y:g-o,width:2*o,height:2*o}))}}])})(G.Component);yj(xj,"displayName","ReferenceDot");yj(xj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});yj(xj,"renderDot",function(t,e){var r;return G.isValidElement(t)?r=G.cloneElement(t,e):yt(t)?r=t(e):r=G.createElement(uj,OR({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function IR(){return IR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IR.apply(this,arguments)}function rp(t){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rp(t)}function CW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function TW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CW(Object(r),!0).forEach(function(n){bj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cWe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fse(n.key),n)}}function uWe(t,e,r){return e&&cWe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dWe(t,e,r){return e=o_(e),hWe(t,$se()?Reflect.construct(e,r||[],o_(t).constructor):e.apply(t,r))}function hWe(t,e){if(e&&(rp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fWe(t)}function fWe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $se(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($se=function(){return!!t})()}function o_(t){return o_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o_(t)}function pWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MR(t,e)}function MR(t,e){return MR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},MR(t,e)}function bj(t,e,r){return e=Fse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fse(t){var e=mWe(t,"string");return rp(e)=="symbol"?e:e+""}function mWe(t,e){if(rp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gWe=function(e,r,n,s,a){var o=a.x1,l=a.x2,c=a.y1,u=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var m=ZD({x:d.scale,y:f.scale}),g={x:e?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},x={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(u,{position:"end"}):m.y.rangeMax};return bo(a,"discard")&&(!m.isInRange(g)||!m.isInRange(x))?null:Ase(g,x)},wj=(function(t){function e(){return lWe(this,e),dWe(this,e,arguments)}return pWe(e,t),uWe(e,[{key:"render",value:function(){var n=this.props,s=n.x1,a=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;$i(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Qn(s),m=Qn(a),g=Qn(o),x=Qn(l),v=this.props.shape;if(!f&&!m&&!g&&!x&&!v)return null;var y=gWe(f,m,g,x,this.props);if(!y&&!v)return null;var w=bo(this.props,"hidden")?"url(#".concat(d,")"):void 0;return G.createElement(lr,{className:Rt("recharts-reference-area",c)},e.renderRect(v,TW(TW({clipPath:w},lt(this.props,!0)),y)),os.renderCallByParent(this.props,y))}}])})(G.Component);bj(wj,"displayName","ReferenceArea");bj(wj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});bj(wj,"renderRect",function(t,e){var r;return G.isValidElement(t)?r=G.cloneElement(t,e):yt(t)?r=t(e):r=G.createElement(JD,IR({},e,{className:"recharts-reference-area-rect"})),r});function Bse(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],s=0;s<t.length;s+=e)n.push(t[s]);return n}function vWe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return _8e(n,r)}function yWe(t,e,r){var n=r==="width",s=t.x,a=t.y,o=t.width,l=t.height;return e===1?{start:n?s:a,end:n?s+o:a+l}:{start:n?s+o:a+l,end:n?s:a}}function l_(t,e,r,n,s){if(t*e<t*n||t*e>t*s)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-s)<=0}function xWe(t,e){return Bse(t,e+1)}function bWe(t,e,r,n,s){for(var a=(n||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,f=function(){var x=n?.[c];if(x===void 0)return{v:Bse(n,u)};var v=c,y,w=function(){return y===void 0&&(y=r(x,v)),y},_=x.coordinate,A=c===0||l_(t,_,w,d,l);A||(c=0,d=o,u+=1),A&&(d=_+t*(w()/2+s),c+=u)},m;u<=a.length;)if(m=f(),m)return m.v;return[]}function kv(t){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(t)}function PW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ns(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PW(Object(r),!0).forEach(function(n){wWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wWe(t,e,r){return e=_We(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _We(t){var e=SWe(t,"string");return kv(e)=="symbol"?e:e+""}function SWe(t,e){if(kv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jWe(t,e,r,n,s){for(var a=(n||[]).slice(),o=a.length,l=e.start,c=e.end,u=function(m){var g=a[m],x,v=function(){return x===void 0&&(x=r(g,m)),x};if(m===o-1){var y=t*(g.coordinate+t*v()/2-c);a[m]=g=Ns(Ns({},g),{},{tickCoord:y>0?g.coordinate-y*t:g.coordinate})}else a[m]=g=Ns(Ns({},g),{},{tickCoord:g.coordinate});var w=l_(t,g.tickCoord,v,l,c);w&&(c=g.tickCoord-t*(v()/2+s),a[m]=Ns(Ns({},g),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return a}function AWe(t,e,r,n,s,a){var o=(n||[]).slice(),l=o.length,c=e.start,u=e.end;if(a){var d=n[l-1],f=r(d,l-1),m=t*(d.coordinate+t*f/2-u);o[l-1]=d=Ns(Ns({},d),{},{tickCoord:m>0?d.coordinate-m*t:d.coordinate});var g=l_(t,d.tickCoord,function(){return f},c,u);g&&(u=d.tickCoord-t*(f/2+s),o[l-1]=Ns(Ns({},d),{},{isShow:!0}))}for(var x=a?l-1:l,v=function(_){var A=o[_],C,S=function(){return C===void 0&&(C=r(A,_)),C};if(_===0){var E=t*(A.coordinate-t*S()/2-c);o[_]=A=Ns(Ns({},A),{},{tickCoord:E<0?A.coordinate-E*t:A.coordinate})}else o[_]=A=Ns(Ns({},A),{},{tickCoord:A.coordinate});var P=l_(t,A.tickCoord,S,c,u);P&&(c=A.tickCoord+t*(S()/2+s),o[_]=Ns(Ns({},A),{},{isShow:!0}))},y=0;y<x;y++)v(y);return o}function iL(t,e,r){var n=t.tick,s=t.ticks,a=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!s||!s.length||!n)return[];if(Re(c)||Ld.isSsr)return xWe(s,typeof c=="number"&&Re(c)?c:0);var m=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?pg(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},v=function(A,C){var S=yt(u)?u(A.value,C):A.value;return g==="width"?vWe(pg(S,{fontSize:e,letterSpacing:r}),x,f):pg(S,{fontSize:e,letterSpacing:r})[g]},y=s.length>=2?Fs(s[1].coordinate-s[0].coordinate):1,w=yWe(a,y,g);return c==="equidistantPreserveStart"?bWe(y,w,v,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=AWe(y,w,v,s,o,c==="preserveStartEnd"):m=jWe(y,w,v,s,o),m.filter(function(_){return _.isShow}))}var NWe=["viewBox"],EWe=["viewBox"],CWe=["ticks"];function np(t){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},np(t)}function Qh(){return Qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qh.apply(this,arguments)}function kW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function qn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kW(Object(r),!0).forEach(function(n){oL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TP(t,e){if(t==null)return{};var r=TWe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function TWe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function PWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zse(n.key),n)}}function kWe(t,e,r){return e&&OW(t.prototype,e),r&&OW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function OWe(t,e,r){return e=c_(e),RWe(t,Use()?Reflect.construct(e,r||[],c_(t).constructor):e.apply(t,r))}function RWe(t,e){if(e&&(np(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IWe(t)}function IWe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Use(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Use=function(){return!!t})()}function c_(t){return c_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c_(t)}function MWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DR(t,e)}function DR(t,e){return DR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},DR(t,e)}function oL(t,e,r){return e=zse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zse(t){var e=DWe(t,"string");return np(e)=="symbol"?e:e+""}function DWe(t,e){if(np(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bp=(function(t){function e(r){var n;return PWe(this,e),n=OWe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return MWe(e,t),kWe(e,[{key:"shouldComponentUpdate",value:function(n,s){var a=n.viewBox,o=TP(n,NWe),l=this.props,c=l.viewBox,u=TP(l,EWe);return!uf(a,c)||!uf(o,u)||!uf(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,a=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,d=s.tickSize,f=s.mirror,m=s.tickMargin,g,x,v,y,w,_,A=f?-1:1,C=n.tickSize||d,S=Re(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":g=x=n.coordinate,y=o+ +!f*c,v=y-A*C,_=v-A*m,w=S;break;case"left":v=y=n.coordinate,x=a+ +!f*l,g=x-A*C,w=g-A*m,_=S;break;case"right":v=y=n.coordinate,x=a+ +f*l,g=x+A*C,w=g+A*m,_=S;break;default:g=x=n.coordinate,y=o+ +f*c,v=y+A*C,_=v+A*m,w=S;break}return{line:{x1:g,y1:v,x2:x,y2:y},tick:{x:w,y:_}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,a=n.mirror,o;switch(s){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,a=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,a=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=qn(qn(qn({},lt(this.props,!1)),lt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);f=qn(qn({},f),{},{x1:s,y1:a+m*l,x2:s+o,y2:a+m*l})}else{var g=+(c==="left"&&!u||c==="right"&&u);f=qn(qn({},f),{},{x1:s+g*o,y1:a,x2:s+g*o,y2:a+l})}return G.createElement("line",Qh({},f,{className:Rt("recharts-cartesian-axis-line",Ia(d,"className"))}))}},{key:"renderTicks",value:function(n,s,a){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,m=l.unit,g=iL(qn(qn({},this.props),{},{ticks:n}),s,a),x=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),y=lt(this.props,!1),w=lt(d,!1),_=qn(qn({},y),{},{fill:"none"},lt(c,!1)),A=g.map(function(C,S){var E=o.getTickLineCoord(C),P=E.line,R=E.tick,O=qn(qn(qn(qn({textAnchor:x,verticalAnchor:v},y),{},{stroke:"none",fill:u},w),R),{},{index:S,payload:C,visibleTicksCount:g.length,tickFormatter:f});return G.createElement(lr,Qh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},bd(o.props,C,S)),c&&G.createElement("line",Qh({},_,P,{className:Rt("recharts-cartesian-axis-tick-line",Ia(c,"className"))})),d&&e.renderTickItem(d,O,"".concat(yt(f)?f(C.value,S):C.value).concat(m||"")))});return G.createElement("g",{className:"recharts-cartesian-axis-ticks"},A)}},{key:"render",value:function(){var n=this,s=this.props,a=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var f=this.props,m=f.ticks,g=TP(f,CWe),x=m;return yt(c)&&(x=m&&m.length>0?c(this.props):c(g)),o<=0||l<=0||!x||!x.length?null:G.createElement(lr,{className:Rt("recharts-cartesian-axis",u),ref:function(y){n.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),os.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,a){var o,l=Rt(s.className,"recharts-cartesian-axis-tick-value");return G.isValidElement(n)?o=G.cloneElement(n,qn(qn({},s),{},{className:l})):yt(n)?o=n(qn(qn({},s),{},{className:l})):o=G.createElement(wd,Qh({},s,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])})(N.Component);oL(Bp,"displayName","CartesianAxis");oL(Bp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var LWe=["x1","y1","x2","y2","key"],$We=["offset"];function jd(t){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(t)}function RW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Es(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RW(Object(r),!0).forEach(function(n){FWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FWe(t,e,r){return e=BWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BWe(t){var e=UWe(t,"string");return jd(e)=="symbol"?e:e+""}function UWe(t,e){if(jd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lu(){return Lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lu.apply(this,arguments)}function IW(t,e){if(t==null)return{};var r=zWe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zWe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qWe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,s=e.x,a=e.y,o=e.width,l=e.height,c=e.ry;return G.createElement("rect",{x:s,y:a,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function qse(t,e){var r;if(G.isValidElement(t))r=G.cloneElement(t,e);else if(yt(t))r=t(e);else{var n=e.x1,s=e.y1,a=e.x2,o=e.y2,l=e.key,c=IW(e,LWe),u=lt(c,!1);u.offset;var d=IW(u,$We);r=G.createElement("line",Lu({},d,{x1:n,y1:s,x2:a,y2:o,fill:"none",key:l}))}return r}function VWe(t){var e=t.x,r=t.width,n=t.horizontal,s=n===void 0?!0:n,a=t.horizontalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=Es(Es({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return qse(s,u)});return G.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function HWe(t){var e=t.y,r=t.height,n=t.vertical,s=n===void 0?!0:n,a=t.verticalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=Es(Es({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return qse(s,u)});return G.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function WWe(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,s=t.y,a=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,g){return m-g});s!==d[0]&&d.unshift(0);var f=d.map(function(m,g){var x=!d[g+1],v=x?s+o-m:d[g+1]-m;if(v<=0)return null;var y=g%e.length;return G.createElement("rect",{key:"react-".concat(g),y:m,x:n,height:v,width:a,stroke:"none",fill:e[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function GWe(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,s=t.fillOpacity,a=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(m){return Math.round(m+a-a)}).sort(function(m,g){return m-g});a!==d[0]&&d.unshift(0);var f=d.map(function(m,g){var x=!d[g+1],v=x?a+l-m:d[g+1]-m;if(v<=0)return null;var y=g%n.length;return G.createElement("rect",{key:"react-".concat(g),x:m,y:o,width:v,height:c,stroke:"none",fill:n[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var KWe=function(e,r){var n=e.xAxis,s=e.width,a=e.height,o=e.offset;return Vne(iL(Es(Es(Es({},Bp.defaultProps),n),{},{ticks:cl(n,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.left,o.left+o.width,r)},XWe=function(e,r){var n=e.yAxis,s=e.width,a=e.height,o=e.offset;return Vne(iL(Es(Es(Es({},Bp.defaultProps),n),{},{ticks:cl(n,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.top,o.top+o.height,r)},Ph={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Vse(t){var e,r,n,s,a,o,l=rL(),c=nL(),u=D8e(),d=Es(Es({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Ph.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Ph.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Ph.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:Ph.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Ph.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Ph.verticalFill,x:Re(t.x)?t.x:u.left,y:Re(t.y)?t.y:u.top,width:Re(t.width)?t.width:u.width,height:Re(t.height)?t.height:u.height}),f=d.x,m=d.y,g=d.width,x=d.height,v=d.syncWithTicks,y=d.horizontalValues,w=d.verticalValues,_=R8e(),A=I8e();if(!Re(g)||g<=0||!Re(x)||x<=0||!Re(f)||f!==+f||!Re(m)||m!==+m)return null;var C=d.verticalCoordinatesGenerator||KWe,S=d.horizontalCoordinatesGenerator||XWe,E=d.horizontalPoints,P=d.verticalPoints;if((!E||!E.length)&&yt(S)){var R=y&&y.length,O=S({yAxis:A?Es(Es({},A),{},{ticks:R?y:A.ticks}):void 0,width:l,height:c,offset:u},R?!0:v);$i(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(jd(O),"]")),Array.isArray(O)&&(E=O)}if((!P||!P.length)&&yt(C)){var D=w&&w.length,I=C({xAxis:_?Es(Es({},_),{},{ticks:D?w:_.ticks}):void 0,width:l,height:c,offset:u},D?!0:v);$i(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(jd(I),"]")),Array.isArray(I)&&(P=I)}return G.createElement("g",{className:"recharts-cartesian-grid"},G.createElement(qWe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),G.createElement(VWe,Lu({},d,{offset:u,horizontalPoints:E,xAxis:_,yAxis:A})),G.createElement(HWe,Lu({},d,{offset:u,verticalPoints:P,xAxis:_,yAxis:A})),G.createElement(WWe,Lu({},d,{horizontalPoints:E})),G.createElement(GWe,Lu({},d,{verticalPoints:P})))}Vse.displayName="CartesianGrid";var YWe=["layout","type","stroke","connectNulls","isRange","ref"],QWe=["key"],Hse;function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}function Wse(t,e){if(t==null)return{};var r=JWe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function JWe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $u(){return $u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$u.apply(this,arguments)}function MW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function oc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MW(Object(r),!0).forEach(function(n){go(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kse(n.key),n)}}function e9e(t,e,r){return e&&DW(t.prototype,e),r&&DW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function t9e(t,e,r){return e=u_(e),r9e(t,Gse()?Reflect.construct(e,r||[],u_(t).constructor):e.apply(t,r))}function r9e(t,e){if(e&&(sp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n9e(t)}function n9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gse=function(){return!!t})()}function u_(t){return u_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},u_(t)}function s9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LR(t,e)}function LR(t,e){return LR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},LR(t,e)}function go(t,e,r){return e=Kse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kse(t){var e=a9e(t,"string");return sp(e)=="symbol"?e:e+""}function a9e(t,e){if(sp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Al=(function(t){function e(){var r;ZWe(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=t9e(this,e,[].concat(s)),go(r,"state",{isAnimationFinished:!0}),go(r,"id",Mp("recharts-area-")),go(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),yt(o)&&o()}),go(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),yt(o)&&o()}),r}return s9e(e,t),e9e(e,[{key:"renderDots",value:function(n,s,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,m=lt(this.props,!1),g=lt(u,!0),x=d.map(function(y,w){var _=oc(oc(oc({key:"dot-".concat(w),r:3},m),g),{},{index:w,cx:y.x,cy:y.y,dataKey:f,value:y.value,payload:y.payload,points:d});return e.renderDotItem(u,_)}),v={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return G.createElement(lr,$u({className:"recharts-area-dots"},v),x)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=n*Math.abs(c-u),f=yc(o.map(function(m){return m.y||0}));return Re(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(yc(a.map(function(m){return m.y||0})),f)),Re(f)?G.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=n*Math.abs(c-u),f=yc(o.map(function(m){return m.x||0}));return Re(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(yc(a.map(function(m){return m.x||0})),f)),Re(f)?G.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,a,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,m=l.isRange;l.ref;var g=Wse(l,YWe);return G.createElement(lr,{clipPath:a?"url(#clipPath-".concat(o,")"):null},G.createElement(ff,$u({},lt(g,!0),{points:n,connectNulls:f,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&G.createElement(ff,$u({},lt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&m&&G.createElement(ff,$u({},lt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var a=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,m=o.animationEasing,g=o.animationId,x=this.state,v=x.prevPoints,y=x.prevBaseLine;return G.createElement(Eo,{begin:d,duration:f,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var _=w.t;if(v){var A=v.length/l.length,C=l.map(function(R,O){var D=Math.floor(O*A);if(v[D]){var I=v[D],$=ia(I.x,R.x),M=ia(I.y,R.y);return oc(oc({},R),{},{x:$(_),y:M(_)})}return R}),S;if(Re(c)&&typeof c=="number"){var E=ia(y,c);S=E(_)}else if(It(c)||Ip(c)){var P=ia(y,0);S=P(_)}else S=c.map(function(R,O){var D=Math.floor(O*A);if(y[D]){var I=y[D],$=ia(I.x,R.x),M=ia(I.y,R.y);return oc(oc({},R),{},{x:$(_),y:M(_)})}return R});return a.renderAreaStatically(C,S,n,s)}return G.createElement(lr,null,G.createElement("defs",null,G.createElement("clipPath",{id:"animationClipPath-".concat(s)},a.renderClipRect(_))),G.createElement(lr,{clipPath:"url(#animationClipPath-".concat(s,")")},a.renderAreaStatically(l,c,n,s)))})}},{key:"renderArea",value:function(n,s){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!d&&m>0||!Hf(d,o)||!Hf(f,l))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(o,l,n,s)}},{key:"render",value:function(){var n,s=this.props,a=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,d=s.left,f=s.xAxis,m=s.yAxis,g=s.width,x=s.height,v=s.isAnimationActive,y=s.id;if(a||!l||!l.length)return null;var w=this.state.isAnimationFinished,_=l.length===1,A=Rt("recharts-area",c),C=f&&f.allowDataOverflow,S=m&&m.allowDataOverflow,E=C||S,P=It(y)?this.id:y,R=(n=lt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=R.r,D=O===void 0?3:O,I=R.strokeWidth,$=I===void 0?2:I,M=UDe(o)?o:{},U=M.clipDot,H=U===void 0?!0:U,z=D*2+$;return G.createElement(lr,{className:A},C||S?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(P)},G.createElement("rect",{x:C?d:d-g/2,y:S?u:u-x/2,width:C?g:g*2,height:S?x:x*2})),!H&&G.createElement("clipPath",{id:"clipPath-dots-".concat(P)},G.createElement("rect",{x:d-z/2,y:u-z/2,width:g+z,height:x+z}))):null,_?null:this.renderArea(E,P),(o||_)&&this.renderDots(E,H,P),(!v||w)&&ml.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(N.PureComponent);Hse=Al;go(Al,"displayName","Area");go(Al,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ld.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});go(Al,"getBaseValue",function(t,e,r,n){var s=t.layout,a=t.baseValue,o=e.props.baseValue,l=o??a;if(Re(l)&&typeof l=="number")return l;var c=s==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});go(Al,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,s=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,m=t.offset,g=e.layout,x=u&&u.length,v=Hse.getBaseValue(e,r,n,s),y=g==="horizontal",w=!1,_=f.map(function(C,S){var E;x?E=u[d+S]:(E=Yn(C,c),Array.isArray(E)?w=!0:E=[v,E]);var P=E[1]==null||x&&Yn(C,c)==null;return y?{x:FH({axis:n,ticks:a,bandSize:l,entry:C,index:S}),y:P?null:s.scale(E[1]),value:E,payload:C}:{x:P?null:n.scale(E[1]),y:FH({axis:s,ticks:o,bandSize:l,entry:C,index:S}),value:E,payload:C}}),A;return x||w?A=_.map(function(C){var S=Array.isArray(C.value)?C.value[0]:null;return y?{x:C.x,y:S!=null&&C.y!=null?s.scale(S):null}:{x:S!=null?n.scale(S):null,y:C.y}}):A=y?s.scale(v):n.scale(v),oc({points:_,baseLine:A,layout:g,isRange:w},m)});go(Al,"renderDotItem",function(t,e){var r;if(G.isValidElement(t))r=G.cloneElement(t,e);else if(yt(t))r=t(e);else{var n=Rt("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,a=Wse(e,QWe);r=G.createElement(uj,$u({},a,{key:s,className:n}))}return r});function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}function i9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o9e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qse(n.key),n)}}function l9e(t,e,r){return e&&o9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function c9e(t,e,r){return e=d_(e),u9e(t,Xse()?Reflect.construct(e,r||[],d_(t).constructor):e.apply(t,r))}function u9e(t,e){if(e&&(ap(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d9e(t)}function d9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xse=function(){return!!t})()}function d_(t){return d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d_(t)}function h9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$R(t,e)}function $R(t,e){return $R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},$R(t,e)}function Yse(t,e,r){return e=Qse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qse(t){var e=f9e(t,"string");return ap(e)=="symbol"?e:e+""}function f9e(t,e){if(ap(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function FR(){return FR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FR.apply(this,arguments)}function p9e(t){var e=t.xAxisId,r=rL(),n=nL(),s=Ose(e);return s==null?null:N.createElement(Bp,FR({},s,{className:Rt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return cl(o,!0)}}))}var _j=(function(t){function e(){return i9e(this,e),c9e(this,e,arguments)}return h9e(e,t),l9e(e,[{key:"render",value:function(){return N.createElement(p9e,this.props)}}])})(N.Component);Yse(_j,"displayName","XAxis");Yse(_j,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function m9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g9e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eae(n.key),n)}}function v9e(t,e,r){return e&&g9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function y9e(t,e,r){return e=h_(e),x9e(t,Jse()?Reflect.construct(e,r||[],h_(t).constructor):e.apply(t,r))}function x9e(t,e){if(e&&(ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b9e(t)}function b9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jse=function(){return!!t})()}function h_(t){return h_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h_(t)}function w9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BR(t,e)}function BR(t,e){return BR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},BR(t,e)}function Zse(t,e,r){return e=eae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eae(t){var e=_9e(t,"string");return ip(e)=="symbol"?e:e+""}function _9e(t,e){if(ip(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function UR(){return UR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UR.apply(this,arguments)}var S9e=function(e){var r=e.yAxisId,n=rL(),s=nL(),a=Rse(r);return a==null?null:N.createElement(Bp,UR({},a,{className:Rt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return cl(l,!0)}}))},Sj=(function(t){function e(){return m9e(this,e),y9e(this,e,arguments)}return w9e(e,t),v9e(e,[{key:"render",value:function(){return N.createElement(S9e,this.props)}}])})(N.Component);Zse(Sj,"displayName","YAxis");Zse(Sj,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function LW(t){return E9e(t)||N9e(t)||A9e(t)||j9e()}function j9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A9e(t,e){if(t){if(typeof t=="string")return zR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zR(t,e)}}function N9e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function E9e(t){if(Array.isArray(t))return zR(t)}function zR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var qR=function(e,r,n,s,a){var o=ri(e,aL),l=ri(e,xj),c=[].concat(LW(o),LW(l)),u=ri(e,wj),d="".concat(s,"Id"),f=s[0],m=r;if(c.length&&(m=c.reduce(function(v,y){if(y.props[d]===n&&bo(y.props,"extendDomain")&&Re(y.props[f])){var w=y.props[f];return[Math.min(v[0],w),Math.max(v[1],w)]}return v},m)),u.length){var g="".concat(f,"1"),x="".concat(f,"2");m=u.reduce(function(v,y){if(y.props[d]===n&&bo(y.props,"extendDomain")&&Re(y.props[g])&&Re(y.props[x])){var w=y.props[g],_=y.props[x];return[Math.min(v[0],w,_),Math.max(v[1],w,_)]}return v},m)}return a&&a.length&&(m=a.reduce(function(v,y){return Re(y)?[Math.min(v[0],y),Math.max(v[1],y)]:v},m)),m},PP={exports:{}},$W;function C9e(){return $W||($W=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,f||c,m),x=r?r+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],g]:c._events[x].push(g):(c._events[x]=g,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,g=f.length,x=new Array(g);m<g;m++)x[m]=f[m].fn;return x},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,m,g,x){var v=r?r+u:u;if(!this._events[v])return!1;var y=this._events[v],w=arguments.length,_,A;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,m),!0;case 5:return y.fn.call(y.context,d,f,m,g),!0;case 6:return y.fn.call(y.context,d,f,m,g,x),!0}for(A=1,_=new Array(w-1);A<w;A++)_[A-1]=arguments[A];y.fn.apply(y.context,_)}else{var C=y.length,S;for(A=0;A<C;A++)switch(y[A].once&&this.removeListener(u,y[A].fn,void 0,!0),w){case 1:y[A].fn.call(y[A].context);break;case 2:y[A].fn.call(y[A].context,d);break;case 3:y[A].fn.call(y[A].context,d,f);break;case 4:y[A].fn.call(y[A].context,d,f,m);break;default:if(!_)for(S=1,_=new Array(w-1);S<w;S++)_[S-1]=arguments[S];y[A].fn.apply(y[A].context,_)}}return!0},l.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,m){var g=r?r+u:u;if(!this._events[g])return this;if(!d)return o(this,g),this;var x=this._events[g];if(x.fn)x.fn===d&&(!m||x.once)&&(!f||x.context===f)&&o(this,g);else{for(var v=0,y=[],w=x.length;v<w;v++)(x[v].fn!==d||m&&!x[v].once||f&&x[v].context!==f)&&y.push(x[v]);y.length?this._events[g]=y.length===1?y[0]:y:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(PP)),PP.exports}var T9e=C9e();const P9e=gr(T9e);var kP=new P9e,OP="recharts.syncMouseEvents";function Ov(t){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(t)}function k9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O9e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tae(n.key),n)}}function R9e(t,e,r){return e&&O9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RP(t,e,r){return e=tae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tae(t){var e=I9e(t,"string");return Ov(e)=="symbol"?e:e+""}function I9e(t,e){if(Ov(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ov(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var M9e=(function(){function t(){k9e(this,t),RP(this,"activeIndex",0),RP(this,"coordinateList",[]),RP(this,"layout","horizontal")}return R9e(t,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,a=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,m=r.mouseHandlerCallback,g=m===void 0?null:m;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),a=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=a+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])})();function D9e(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t?.[0],s=t?.[1];if(n&&s&&Re(n)&&Re(s))return!0}return!1}function L9e(t,e,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-s,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function rae(t){var e=t.cx,r=t.cy,n=t.radius,s=t.startAngle,a=t.endAngle,o=$r(e,r,n,s),l=$r(e,r,n,a);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:s,endAngle:a}}function $9e(t,e,r){var n,s,a,o;if(t==="horizontal")n=e.x,a=n,s=r.top,o=r.top+r.height;else if(t==="vertical")s=e.y,o=s,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,m=$r(l,c,u,f),g=$r(l,c,d,f);n=m.x,s=m.y,a=g.x,o=g.y}else return rae(e);return[{x:n,y:s},{x:a,y:o}]}function Rv(t){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(t)}function FW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function I0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FW(Object(r),!0).forEach(function(n){F9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function F9e(t,e,r){return e=B9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B9e(t){var e=U9e(t,"string");return Rv(e)=="symbol"?e:e+""}function U9e(t,e){if(Rv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z9e(t){var e,r,n=t.element,s=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,m=t.chartName,g=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!g||!a||!o||m!=="ScatterChart"&&s!=="axis")return null;var x,v=ff;if(m==="ScatterChart")x=o,v=fVe;else if(m==="BarChart")x=L9e(f,o,c,d),v=JD;else if(f==="radial"){var y=rae(o),w=y.cx,_=y.cy,A=y.radius,C=y.startAngle,S=y.endAngle;x={cx:w,cy:_,startAngle:C,endAngle:S,innerRadius:A,outerRadius:A},v=tse}else x={points:$9e(f,o,c)},v=ff;var E=I0(I0(I0(I0({stroke:"#ccc",pointerEvents:"none"},c),x),lt(g,!1)),{},{payload:l,payloadIndex:u,className:Rt("recharts-tooltip-cursor",g.className)});return N.isValidElement(g)?N.cloneElement(g,E):N.createElement(v,E)}var q9e=["item"],V9e=["children","className","width","height","style","compact","title","desc"];function op(t){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(t)}function Jh(){return Jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jh.apply(this,arguments)}function BW(t,e){return G9e(t)||W9e(t,e)||sae(t,e)||H9e()}function H9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W9e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function G9e(t){if(Array.isArray(t))return t}function UW(t,e){if(t==null)return{};var r=K9e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function K9e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function X9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y9e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aae(n.key),n)}}function Q9e(t,e,r){return e&&Y9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function J9e(t,e,r){return e=f_(e),Z9e(t,nae()?Reflect.construct(e,r||[],f_(t).constructor):e.apply(t,r))}function Z9e(t,e){if(e&&(op(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eGe(t)}function eGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nae=function(){return!!t})()}function f_(t){return f_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},f_(t)}function tGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VR(t,e)}function VR(t,e){return VR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},VR(t,e)}function lp(t){return sGe(t)||nGe(t)||sae(t)||rGe()}function rGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sae(t,e){if(t){if(typeof t=="string")return HR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HR(t,e)}}function nGe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sGe(t){if(Array.isArray(t))return HR(t)}function HR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function be(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zW(Object(r),!0).forEach(function(n){ft(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ft(t,e,r){return e=aae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aae(t){var e=aGe(t,"string");return op(e)=="symbol"?e:e+""}function aGe(t,e){if(op(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iGe={xAxis:["bottom","top"],yAxis:["left","right"]},oGe={width:"100%",height:"100%"},iae={x:0,y:0};function M0(t){return t}var lGe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},cGe=function(e,r,n,s){var a=r.find(function(d){return d&&d.index===n});if(a){if(e==="horizontal")return{x:a.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,l=s.radius;return be(be(be({},s),$r(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,u=s.angle;return be(be(be({},s),$r(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return iae},jj=function(e,r){var n=r.graphicalItems,s=r.dataStartIndex,a=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(lp(l),lp(u)):l},[]);return o.length>0?o:e&&e.length&&Re(s)&&Re(a)?e.slice(s,a+1):[]};function oae(t){return t==="number"?[0,"auto"]:void 0}var WR=function(e,r,n,s){var a=e.graphicalItems,o=e.tooltipAxis,l=jj(r,e);return n<0||!a||!a.length||n>=l.length?null:a.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var g=f===void 0?l:f;m=vw(g,o.dataKey,s)}else m=f&&f[n]||l[n];return m?[].concat(lp(c),[Xne(u,m)]):c},[])},qW=function(e,r,n,s){var a=s||{x:e.chartX,y:e.chartY},o=lGe(a,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=$Ue(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,m=WR(e,r,d,f),g=cGe(n,l,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:m,activeCoordinate:g}}return null},uGe=function(e,r){var n=r.axes,s=r.graphicalItems,a=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,m=e.stackOffset,g=qne(d,a);return n.reduce(function(x,v){var y,w=v.type.defaultProps!==void 0?be(be({},v.type.defaultProps),v.props):v.props,_=w.type,A=w.dataKey,C=w.allowDataOverflow,S=w.allowDuplicatedCategory,E=w.scale,P=w.ticks,R=w.includeHidden,O=w[o];if(x[O])return x;var D=jj(e.data,{graphicalItems:s.filter(function(Y){var oe,xe=o in Y.props?Y.props[o]:(oe=Y.type.defaultProps)===null||oe===void 0?void 0:oe[o];return xe===O}),dataStartIndex:c,dataEndIndex:u}),I=D.length,$,M,U;D9e(w.domain,C,_)&&($=oR(w.domain,null,C),g&&(_==="number"||E!=="auto")&&(U=gg(D,A,"category")));var H=oae(_);if(!$||$.length===0){var z,q=(z=w.domain)!==null&&z!==void 0?z:H;if(A){if($=gg(D,A,_),_==="category"&&g){var V=kDe($);S&&V?(M=$,$=e_(0,I)):S||($=qH(q,$,v).reduce(function(Y,oe){return Y.indexOf(oe)>=0?Y:[].concat(lp(Y),[oe])},[]))}else if(_==="category")S?$=$.filter(function(Y){return Y!==""&&!It(Y)}):$=qH(q,$,v).reduce(function(Y,oe){return Y.indexOf(oe)>=0||oe===""||It(oe)?Y:[].concat(lp(Y),[oe])},[]);else if(_==="number"){var W=qUe(D,s.filter(function(Y){var oe,xe,J=o in Y.props?Y.props[o]:(oe=Y.type.defaultProps)===null||oe===void 0?void 0:oe[o],Ee="hide"in Y.props?Y.props.hide:(xe=Y.type.defaultProps)===null||xe===void 0?void 0:xe.hide;return J===O&&(R||!Ee)}),A,a,d);W&&($=W)}g&&(_==="number"||E!=="auto")&&(U=gg(D,A,"category"))}else g?$=e_(0,I):l&&l[O]&&l[O].hasStack&&_==="number"?$=m==="expand"?[0,1]:Kne(l[O].stackGroups,c,u):$=zne(D,s.filter(function(Y){var oe=o in Y.props?Y.props[o]:Y.type.defaultProps[o],xe="hide"in Y.props?Y.props.hide:Y.type.defaultProps.hide;return oe===O&&(R||!xe)}),_,d,!0);if(_==="number")$=qR(f,$,O,a,P),q&&($=oR(q,$,C));else if(_==="category"&&q){var B=q,F=$.every(function(Y){return B.indexOf(Y)>=0});F&&($=B)}}return be(be({},x),{},ft({},O,be(be({},w),{},{axisType:a,domain:$,categoricalDomain:U,duplicateDomain:M,originalDomain:(y=w.domain)!==null&&y!==void 0?y:H,isCategorical:g,layout:d})))},{})},dGe=function(e,r){var n=r.graphicalItems,s=r.Axis,a=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,m=jj(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),g=m.length,x=qne(d,a),v=-1;return n.reduce(function(y,w){var _=w.type.defaultProps!==void 0?be(be({},w.type.defaultProps),w.props):w.props,A=_[o],C=oae("number");if(!y[A]){v++;var S;return x?S=e_(0,g):l&&l[A]&&l[A].hasStack?(S=Kne(l[A].stackGroups,c,u),S=qR(f,S,A,a)):(S=oR(C,zne(m,n.filter(function(E){var P,R,O=o in E.props?E.props[o]:(P=E.type.defaultProps)===null||P===void 0?void 0:P[o],D="hide"in E.props?E.props.hide:(R=E.type.defaultProps)===null||R===void 0?void 0:R.hide;return O===A&&!D}),"number",d),s.defaultProps.allowDataOverflow),S=qR(f,S,A,a)),be(be({},y),{},ft({},A,be(be({axisType:a},s.defaultProps),{},{hide:!0,orientation:Ia(iGe,"".concat(a,".").concat(v%2),null),domain:S,originalDomain:C,isCategorical:x,layout:d})))}return y},{})},hGe=function(e,r){var n=r.axisType,s=n===void 0?"xAxis":n,a=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.children,f="".concat(s,"Id"),m=ri(d,a),g={};return m&&m.length?g=uGe(e,{axes:m,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(g=dGe(e,{Axis:a,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),g},fGe=function(e){var r=pc(e),n=cl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:AD(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:zw(r,n)}},VW=function(e){var r=e.children,n=e.defaultShowTooltip,s=wa(r,Jf),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(a=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},pGe=function(e){return!e||!e.length?!1:e.some(function(r){var n=fl(r&&r.type);return n&&n.indexOf("Bar")>=0})},HW=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},mGe=function(e,r){var n=e.props,s=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,l=e.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,m=n.margin||{},g=wa(f,Jf),x=wa(f,Ku),v=Object.keys(c).reduce(function(S,E){var P=c[E],R=P.orientation;return!P.mirror&&!P.hide?be(be({},S),{},ft({},R,S[R]+P.width)):S},{left:m.left||0,right:m.right||0}),y=Object.keys(o).reduce(function(S,E){var P=o[E],R=P.orientation;return!P.mirror&&!P.hide?be(be({},S),{},ft({},R,Ia(S,"".concat(R))+P.height)):S},{top:m.top||0,bottom:m.bottom||0}),w=be(be({},y),v),_=w.bottom;g&&(w.bottom+=g.props.height||Jf.defaultProps.height),x&&r&&(w=UUe(w,s,n,r));var A=u-w.left-w.right,C=d-w.top-w.bottom;return be(be({brushBottom:_},w),{},{width:Math.max(A,0),height:Math.max(C,0)})},gGe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},lae=function(e){var r=e.chartName,n=e.GraphicalChild,s=e.defaultTooltipEventType,a=s===void 0?"axis":s,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,m=function(w,_){var A=_.graphicalItems,C=_.stackGroups,S=_.offset,E=_.updateId,P=_.dataStartIndex,R=_.dataEndIndex,O=w.barSize,D=w.layout,I=w.barGap,$=w.barCategoryGap,M=w.maxBarSize,U=HW(D),H=U.numericAxisName,z=U.cateAxisName,q=pGe(A),V=[];return A.forEach(function(W,B){var F=jj(w.data,{graphicalItems:[W],dataStartIndex:P,dataEndIndex:R}),Y=W.type.defaultProps!==void 0?be(be({},W.type.defaultProps),W.props):W.props,oe=Y.dataKey,xe=Y.maxBarSize,J=Y["".concat(H,"Id")],Ee=Y["".concat(z,"Id")],ye={},je=c.reduce(function(ae,ce){var Ce=_["".concat(ce.axisType,"Map")],K=Y["".concat(ce.axisType,"Id")];Ce&&Ce[K]||ce.axisType==="zAxis"||Sd();var we=Ce[K];return be(be({},ae),{},ft(ft({},ce.axisType,we),"".concat(ce.axisType,"Ticks"),cl(we)))},ye),pe=je[z],Se=je["".concat(z,"Ticks")],Oe=C&&C[J]&&C[J].hasStack&&JUe(W,C[J].stackGroups),ve=fl(W.type).indexOf("Bar")>=0,Xe=zw(pe,Se),$e=[],at=q&&FUe({barSize:O,stackGroups:C,totalSize:gGe(je,z)});if(ve){var Ft,rr,_e=It(xe)?M:xe,St=(Ft=(rr=zw(pe,Se,!0))!==null&&rr!==void 0?rr:_e)!==null&&Ft!==void 0?Ft:0;$e=BUe({barGap:I,barCategoryGap:$,bandSize:St!==Xe?St:Xe,sizeList:at[Ee],maxBarSize:_e}),St!==Xe&&($e=$e.map(function(ae){return be(be({},ae),{},{position:be(be({},ae.position),{},{offset:ae.position.offset-St/2})})}))}var X=W&&W.type&&W.type.getComposedData;X&&V.push({props:be(be({},X(be(be({},je),{},{displayedData:F,props:w,dataKey:oe,item:W,bandSize:Xe,barPosition:$e,offset:S,stackedData:Oe,layout:D,dataStartIndex:P,dataEndIndex:R}))),{},ft(ft(ft({key:W.key||"item-".concat(B)},H,je[H]),z,je[z]),"animationId",E)),childIndex:VDe(W,w.children),item:W})}),V},g=function(w,_){var A=w.props,C=w.dataStartIndex,S=w.dataEndIndex,E=w.updateId;if(!n6({props:A}))return null;var P=A.children,R=A.layout,O=A.stackOffset,D=A.data,I=A.reverseStackOrder,$=HW(R),M=$.numericAxisName,U=$.cateAxisName,H=ri(P,n),z=YUe(D,H,"".concat(M,"Id"),"".concat(U,"Id"),O,I),q=c.reduce(function(Y,oe){var xe="".concat(oe.axisType,"Map");return be(be({},Y),{},ft({},xe,hGe(A,be(be({},oe),{},{graphicalItems:H,stackGroups:oe.axisType===M&&z,dataStartIndex:C,dataEndIndex:S}))))},{}),V=mGe(be(be({},q),{},{props:A,graphicalItems:H}),_?.legendBBox);Object.keys(q).forEach(function(Y){q[Y]=d(A,q[Y],V,Y.replace("Map",""),r)});var W=q["".concat(U,"Map")],B=fGe(W),F=m(A,be(be({},q),{},{dataStartIndex:C,dataEndIndex:S,updateId:E,graphicalItems:H,stackGroups:z,offset:V}));return be(be({formattedGraphicalItems:F,graphicalItems:H,offset:V,stackGroups:z},B),q)},x=(function(y){function w(_){var A,C,S;return X9e(this,w),S=J9e(this,w,[_]),ft(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ft(S,"accessibilityManager",new M9e),ft(S,"handleLegendBBoxUpdate",function(E){if(E){var P=S.state,R=P.dataStartIndex,O=P.dataEndIndex,D=P.updateId;S.setState(be({legendBBox:E},g({props:S.props,dataStartIndex:R,dataEndIndex:O,updateId:D},be(be({},S.state),{},{legendBBox:E}))))}}),ft(S,"handleReceiveSyncEvent",function(E,P,R){if(S.props.syncId===E){if(R===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(P)}}),ft(S,"handleBrushChange",function(E){var P=E.startIndex,R=E.endIndex;if(P!==S.state.dataStartIndex||R!==S.state.dataEndIndex){var O=S.state.updateId;S.setState(function(){return be({dataStartIndex:P,dataEndIndex:R},g({props:S.props,dataStartIndex:P,dataEndIndex:R,updateId:O},S.state))}),S.triggerSyncEvent({dataStartIndex:P,dataEndIndex:R})}}),ft(S,"handleMouseEnter",function(E){var P=S.getMouseInfo(E);if(P){var R=be(be({},P),{},{isTooltipActive:!0});S.setState(R),S.triggerSyncEvent(R);var O=S.props.onMouseEnter;yt(O)&&O(R,E)}}),ft(S,"triggeredAfterMouseMove",function(E){var P=S.getMouseInfo(E),R=P?be(be({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(R),S.triggerSyncEvent(R);var O=S.props.onMouseMove;yt(O)&&O(R,E)}),ft(S,"handleItemMouseEnter",function(E){S.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),ft(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),ft(S,"handleMouseMove",function(E){E.persist(),S.throttleTriggeredAfterMouseMove(E)}),ft(S,"handleMouseLeave",function(E){S.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};S.setState(P),S.triggerSyncEvent(P);var R=S.props.onMouseLeave;yt(R)&&R(P,E)}),ft(S,"handleOuterEvent",function(E){var P=qDe(E),R=Ia(S.props,"".concat(P));if(P&&yt(R)){var O,D;/.*touch.*/i.test(P)?D=S.getMouseInfo(E.changedTouches[0]):D=S.getMouseInfo(E),R((O=D)!==null&&O!==void 0?O:{},E)}}),ft(S,"handleClick",function(E){var P=S.getMouseInfo(E);if(P){var R=be(be({},P),{},{isTooltipActive:!0});S.setState(R),S.triggerSyncEvent(R);var O=S.props.onClick;yt(O)&&O(R,E)}}),ft(S,"handleMouseDown",function(E){var P=S.props.onMouseDown;if(yt(P)){var R=S.getMouseInfo(E);P(R,E)}}),ft(S,"handleMouseUp",function(E){var P=S.props.onMouseUp;if(yt(P)){var R=S.getMouseInfo(E);P(R,E)}}),ft(S,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),ft(S,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseDown(E.changedTouches[0])}),ft(S,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseUp(E.changedTouches[0])}),ft(S,"handleDoubleClick",function(E){var P=S.props.onDoubleClick;if(yt(P)){var R=S.getMouseInfo(E);P(R,E)}}),ft(S,"handleContextMenu",function(E){var P=S.props.onContextMenu;if(yt(P)){var R=S.getMouseInfo(E);P(R,E)}}),ft(S,"triggerSyncEvent",function(E){S.props.syncId!==void 0&&kP.emit(OP,S.props.syncId,E,S.eventEmitterSymbol)}),ft(S,"applySyncEvent",function(E){var P=S.props,R=P.layout,O=P.syncMethod,D=S.state.updateId,I=E.dataStartIndex,$=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)S.setState(be({dataStartIndex:I,dataEndIndex:$},g({props:S.props,dataStartIndex:I,dataEndIndex:$,updateId:D},S.state)));else if(E.activeTooltipIndex!==void 0){var M=E.chartX,U=E.chartY,H=E.activeTooltipIndex,z=S.state,q=z.offset,V=z.tooltipTicks;if(!q)return;if(typeof O=="function")H=O(V,E);else if(O==="value"){H=-1;for(var W=0;W<V.length;W++)if(V[W].value===E.activeLabel){H=W;break}}var B=be(be({},q),{},{x:q.left,y:q.top}),F=Math.min(M,B.x+B.width),Y=Math.min(U,B.y+B.height),oe=V[H]&&V[H].value,xe=WR(S.state,S.props.data,H),J=V[H]?{x:R==="horizontal"?V[H].coordinate:F,y:R==="horizontal"?Y:V[H].coordinate}:iae;S.setState(be(be({},E),{},{activeLabel:oe,activeCoordinate:J,activePayload:xe,activeTooltipIndex:H}))}else S.setState(E)}),ft(S,"renderCursor",function(E){var P,R=S.state,O=R.isTooltipActive,D=R.activeCoordinate,I=R.activePayload,$=R.offset,M=R.activeTooltipIndex,U=R.tooltipAxisBandSize,H=S.getTooltipEventType(),z=(P=E.props.active)!==null&&P!==void 0?P:O,q=S.props.layout,V=E.key||"_recharts-cursor";return G.createElement(z9e,{key:V,activeCoordinate:D,activePayload:I,activeTooltipIndex:M,chartName:r,element:E,isActive:z,layout:q,offset:$,tooltipAxisBandSize:U,tooltipEventType:H})}),ft(S,"renderPolarAxis",function(E,P,R){var O=Ia(E,"type.axisType"),D=Ia(S.state,"".concat(O,"Map")),I=E.type.defaultProps,$=I!==void 0?be(be({},I),E.props):E.props,M=D&&D[$["".concat(O,"Id")]];return N.cloneElement(E,be(be({},M),{},{className:Rt(O,M.className),key:E.key||"".concat(P,"-").concat(R),ticks:cl(M,!0)}))}),ft(S,"renderPolarGrid",function(E){var P=E.props,R=P.radialLines,O=P.polarAngles,D=P.polarRadius,I=S.state,$=I.radiusAxisMap,M=I.angleAxisMap,U=pc($),H=pc(M),z=H.cx,q=H.cy,V=H.innerRadius,W=H.outerRadius;return N.cloneElement(E,{polarAngles:Array.isArray(O)?O:cl(H,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(D)?D:cl(U,!0).map(function(B){return B.coordinate}),cx:z,cy:q,innerRadius:V,outerRadius:W,key:E.key||"polar-grid",radialLines:R})}),ft(S,"renderLegend",function(){var E=S.state.formattedGraphicalItems,P=S.props,R=P.children,O=P.width,D=P.height,I=S.props.margin||{},$=O-(I.left||0)-(I.right||0),M=Bne({children:R,formattedGraphicalItems:E,legendWidth:$,legendContent:u});if(!M)return null;var U=M.item,H=UW(M,q9e);return N.cloneElement(U,be(be({},H),{},{chartWidth:O,chartHeight:D,margin:I,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),ft(S,"renderTooltip",function(){var E,P=S.props,R=P.children,O=P.accessibilityLayer,D=wa(R,Ci);if(!D)return null;var I=S.state,$=I.isTooltipActive,M=I.activeCoordinate,U=I.activePayload,H=I.activeLabel,z=I.offset,q=(E=D.props.active)!==null&&E!==void 0?E:$;return N.cloneElement(D,{viewBox:be(be({},z),{},{x:z.left,y:z.top}),active:q,label:H,payload:q?U:[],coordinate:M,accessibilityLayer:O})}),ft(S,"renderBrush",function(E){var P=S.props,R=P.margin,O=P.data,D=S.state,I=D.offset,$=D.dataStartIndex,M=D.dataEndIndex,U=D.updateId;return N.cloneElement(E,{key:E.key||"_recharts-brush",onChange:P0(S.handleBrushChange,E.props.onChange),data:O,x:Re(E.props.x)?E.props.x:I.left,y:Re(E.props.y)?E.props.y:I.top+I.height+I.brushBottom-(R.bottom||0),width:Re(E.props.width)?E.props.width:I.width,startIndex:$,endIndex:M,updateId:"brush-".concat(U)})}),ft(S,"renderReferenceElement",function(E,P,R){if(!E)return null;var O=S,D=O.clipPathId,I=S.state,$=I.xAxisMap,M=I.yAxisMap,U=I.offset,H=E.type.defaultProps||{},z=E.props,q=z.xAxisId,V=q===void 0?H.xAxisId:q,W=z.yAxisId,B=W===void 0?H.yAxisId:W;return N.cloneElement(E,{key:E.key||"".concat(P,"-").concat(R),xAxis:$[V],yAxis:M[B],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:D})}),ft(S,"renderActivePoints",function(E){var P=E.item,R=E.activePoint,O=E.basePoint,D=E.childIndex,I=E.isRange,$=[],M=P.props.key,U=P.item.type.defaultProps!==void 0?be(be({},P.item.type.defaultProps),P.item.props):P.item.props,H=U.activeDot,z=U.dataKey,q=be(be({index:D,dataKey:z,cx:R.x,cy:R.y,r:4,fill:QD(P.item),strokeWidth:2,stroke:"#fff",payload:R.payload,value:R.value},lt(H,!1)),yw(H));return $.push(w.renderActiveDot(H,q,"".concat(M,"-activePoint-").concat(D))),O?$.push(w.renderActiveDot(H,be(be({},q),{},{cx:O.x,cy:O.y}),"".concat(M,"-basePoint-").concat(D))):I&&$.push(null),$}),ft(S,"renderGraphicChild",function(E,P,R){var O=S.filterFormatItem(E,P,R);if(!O)return null;var D=S.getTooltipEventType(),I=S.state,$=I.isTooltipActive,M=I.tooltipAxis,U=I.activeTooltipIndex,H=I.activeLabel,z=S.props.children,q=wa(z,Ci),V=O.props,W=V.points,B=V.isRange,F=V.baseLine,Y=O.item.type.defaultProps!==void 0?be(be({},O.item.type.defaultProps),O.item.props):O.item.props,oe=Y.activeDot,xe=Y.hide,J=Y.activeBar,Ee=Y.activeShape,ye=!!(!xe&&$&&q&&(oe||J||Ee)),je={};D!=="axis"&&q&&q.props.trigger==="click"?je={onClick:P0(S.handleItemMouseEnter,E.props.onClick)}:D!=="axis"&&(je={onMouseLeave:P0(S.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:P0(S.handleItemMouseEnter,E.props.onMouseEnter)});var pe=N.cloneElement(E,be(be({},O.props),je));function Se(ce){return typeof M.dataKey=="function"?M.dataKey(ce.payload):null}if(ye)if(U>=0){var Oe,ve;if(M.dataKey&&!M.allowDuplicatedCategory){var Xe=typeof M.dataKey=="function"?Se:"payload.".concat(M.dataKey.toString());Oe=vw(W,Xe,H),ve=B&&F&&vw(F,Xe,H)}else Oe=W?.[U],ve=B&&F&&F[U];if(Ee||J){var $e=E.props.activeIndex!==void 0?E.props.activeIndex:U;return[N.cloneElement(E,be(be(be({},O.props),je),{},{activeIndex:$e})),null,null]}if(!It(Oe))return[pe].concat(lp(S.renderActivePoints({item:O,activePoint:Oe,basePoint:ve,childIndex:U,isRange:B})))}else{var at,Ft=(at=S.getItemByXY(S.state.activeCoordinate))!==null&&at!==void 0?at:{graphicalItem:pe},rr=Ft.graphicalItem,_e=rr.item,St=_e===void 0?E:_e,X=rr.childIndex,ae=be(be(be({},O.props),je),{},{activeIndex:X});return[N.cloneElement(St,ae),null,null]}return B?[pe,null,null]:[pe,null]}),ft(S,"renderCustomized",function(E,P,R){return N.cloneElement(E,be(be({key:"recharts-customized-".concat(R)},S.props),S.state))}),ft(S,"renderMap",{CartesianGrid:{handler:M0,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:M0},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:M0},YAxis:{handler:M0},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((A=_.id)!==null&&A!==void 0?A:Mp("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=$re(S.triggeredAfterMouseMove,(C=_.throttleDelay)!==null&&C!==void 0?C:1e3/60),S.state={},S}return tGe(w,y),Q9e(w,[{key:"componentDidMount",value:function(){var A,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var A=this.props,C=A.children,S=A.data,E=A.height,P=A.layout,R=wa(C,Ci);if(R){var O=R.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,I=WR(this.state,S,O,D),$=this.state.tooltipTicks[O].coordinate,M=(this.state.offset.top+E)/2,U=P==="horizontal",H=U?{x:$,y:M}:{y:$,x:M},z=this.state.formattedGraphicalItems.find(function(V){var W=V.item;return W.type.name==="Scatter"});z&&(H=be(be({},H),z.props.points[O].tooltipPosition),I=z.props.points[O].tooltipPayload);var q={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:D,activePayload:I,activeCoordinate:H};this.setState(q),this.renderCursor(R),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(A,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==A.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==A.margin){var S,E;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(A){TO([wa(A.children,Ci)],[wa(this.props.children,Ci)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var A=wa(this.props.children,Ci);if(A&&typeof A.props.shared=="boolean"){var C=A.props.shared?"axis":"item";return l.indexOf(C)>=0?C:a}return a}},{key:"getMouseInfo",value:function(A){if(!this.container)return null;var C=this.container,S=C.getBoundingClientRect(),E=P4e(S),P={chartX:Math.round(A.pageX-E.left),chartY:Math.round(A.pageY-E.top)},R=S.width/C.offsetWidth||1,O=this.inRange(P.chartX,P.chartY,R);if(!O)return null;var D=this.state,I=D.xAxisMap,$=D.yAxisMap,M=this.getTooltipEventType(),U=qW(this.state,this.props.data,this.props.layout,O);if(M!=="axis"&&I&&$){var H=pc(I).scale,z=pc($).scale,q=H&&H.invert?H.invert(P.chartX):null,V=z&&z.invert?z.invert(P.chartY):null;return be(be({},P),{},{xValue:q,yValue:V},U)}return U?be(be({},P),U):null}},{key:"inRange",value:function(A,C){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,P=A/S,R=C/S;if(E==="horizontal"||E==="vertical"){var O=this.state.offset,D=P>=O.left&&P<=O.left+O.width&&R>=O.top&&R<=O.top+O.height;return D?{x:P,y:R}:null}var I=this.state,$=I.angleAxisMap,M=I.radiusAxisMap;if($&&M){var U=pc($);return WH({x:P,y:R},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var A=this.props.children,C=this.getTooltipEventType(),S=wa(A,Ci),E={};S&&C==="axis"&&(S.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=yw(this.props,this.handleOuterEvent);return be(be({},P),E)}},{key:"addListener",value:function(){kP.on(OP,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){kP.removeListener(OP,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(A,C,S){for(var E=this.state.formattedGraphicalItems,P=0,R=E.length;P<R;P++){var O=E[P];if(O.item===A||O.props.key===A.key||C===fl(O.item.type)&&S===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var A=this.clipPathId,C=this.state.offset,S=C.left,E=C.top,P=C.height,R=C.width;return G.createElement("defs",null,G.createElement("clipPath",{id:A},G.createElement("rect",{x:S,y:E,height:P,width:R})))}},{key:"getXScales",value:function(){var A=this.state.xAxisMap;return A?Object.entries(A).reduce(function(C,S){var E=BW(S,2),P=E[0],R=E[1];return be(be({},C),{},ft({},P,R.scale))},{}):null}},{key:"getYScales",value:function(){var A=this.state.yAxisMap;return A?Object.entries(A).reduce(function(C,S){var E=BW(S,2),P=E[0],R=E[1];return be(be({},C),{},ft({},P,R.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(A){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[A])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(A){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[A])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(A){var C=this.state,S=C.formattedGraphicalItems,E=C.activeItem;if(S&&S.length)for(var P=0,R=S.length;P<R;P++){var O=S[P],D=O.props,I=O.item,$=I.type.defaultProps!==void 0?be(be({},I.type.defaultProps),I.props):I.props,M=fl(I.type);if(M==="Bar"){var U=(D.data||[]).find(function(V){return Gqe(A,V)});if(U)return{graphicalItem:O,payload:U}}else if(M==="RadialBar"){var H=(D.data||[]).find(function(V){return WH(A,V)});if(H)return{graphicalItem:O,payload:H}}else if(mj(O,E)||gj(O,E)||Ev(O,E)){var z=gHe({graphicalItem:O,activeTooltipItem:E,itemData:$.data}),q=$.activeIndex===void 0?z:$.activeIndex;return{graphicalItem:be(be({},O),{},{childIndex:q}),payload:Ev(O,E)?$.data[z]:O.props.data[z]}}}return null}},{key:"render",value:function(){var A=this;if(!n6(this))return null;var C=this.props,S=C.children,E=C.className,P=C.width,R=C.height,O=C.style,D=C.compact,I=C.title,$=C.desc,M=UW(C,V9e),U=lt(M,!1);if(D)return G.createElement(_W,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement(kO,Jh({},U,{width:P,height:R,title:I,desc:$}),this.renderClipPath(),a6(S,this.renderMap)));if(this.props.accessibilityLayer){var H,z;U.tabIndex=(H=this.props.tabIndex)!==null&&H!==void 0?H:0,U.role=(z=this.props.role)!==null&&z!==void 0?z:"application",U.onKeyDown=function(V){A.accessibilityManager.keyboardEvent(V)},U.onFocus=function(){A.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return G.createElement(_W,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement("div",Jh({className:Rt("recharts-wrapper",E),style:be({position:"relative",cursor:"default",width:P,height:R},O)},q,{ref:function(W){A.container=W}}),G.createElement(kO,Jh({},U,{width:P,height:R,title:I,desc:$,style:oGe}),this.renderClipPath(),a6(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(N.Component);ft(x,"displayName",r),ft(x,"defaultProps",be({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),ft(x,"getDerivedStateFromProps",function(y,w){var _=y.dataKey,A=y.data,C=y.children,S=y.width,E=y.height,P=y.layout,R=y.stackOffset,O=y.margin,D=w.dataStartIndex,I=w.dataEndIndex;if(w.updateId===void 0){var $=VW(y);return be(be(be({},$),{},{updateId:0},g(be(be({props:y},$),{},{updateId:0}),w)),{},{prevDataKey:_,prevData:A,prevWidth:S,prevHeight:E,prevLayout:P,prevStackOffset:R,prevMargin:O,prevChildren:C})}if(_!==w.prevDataKey||A!==w.prevData||S!==w.prevWidth||E!==w.prevHeight||P!==w.prevLayout||R!==w.prevStackOffset||!uf(O,w.prevMargin)){var M=VW(y),U={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},H=be(be({},qW(w,A,P)),{},{updateId:w.updateId+1}),z=be(be(be({},M),U),H);return be(be(be({},z),g(be({props:y},z),w)),{},{prevDataKey:_,prevData:A,prevWidth:S,prevHeight:E,prevLayout:P,prevStackOffset:R,prevMargin:O,prevChildren:C})}if(!TO(C,w.prevChildren)){var q,V,W,B,F=wa(C,Jf),Y=F&&(q=(V=F.props)===null||V===void 0?void 0:V.startIndex)!==null&&q!==void 0?q:D,oe=F&&(W=(B=F.props)===null||B===void 0?void 0:B.endIndex)!==null&&W!==void 0?W:I,xe=Y!==D||oe!==I,J=!It(A),Ee=J&&!xe?w.updateId:w.updateId+1;return be(be({updateId:Ee},g(be(be({props:y},w),{},{updateId:Ee,dataStartIndex:Y,dataEndIndex:oe}),w)),{},{prevChildren:C,dataStartIndex:Y,dataEndIndex:oe})}return null}),ft(x,"renderActiveDot",function(y,w,_){var A;return N.isValidElement(y)?A=N.cloneElement(y,w):yt(y)?A=y(w):A=G.createElement(uj,w),G.createElement(lr,{className:"recharts-active-dot",key:_},A)});var v=N.forwardRef(function(w,_){return G.createElement(x,Jh({},w,{ref:_}))});return v.displayName=x.displayName,v},vGe=lae({chartName:"PieChart",GraphicalChild:Ol,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:pj},{axisType:"radiusAxis",AxisComp:hj}],formatAxisMap:lze,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),yGe=lae({chartName:"AreaChart",GraphicalChild:Al,axisComponents:[{axisType:"xAxis",AxisComp:_j},{axisType:"yAxis",AxisComp:Sj}],formatAxisMap:x8e});const lL={CRITICAL:"#dc2626",HIGH:"#ea580c",MEDIUM:"#f59e0b",LOW:"#10b981"};function xGe(){const t=ys(),[e,r]=N.useState("1h"),[n,s]=N.useState(!0),{data:a,isLoading:o}=nt({queryKey:["/api/security/metrics",e],refetchInterval:n?1e4:!1}),{data:l,isLoading:c}=nt({queryKey:["/api/security/vulnerabilities"],refetchInterval:n?3e4:!1}),{data:u,isLoading:d}=nt({queryKey:["/api/security/anomalies"],refetchInterval:n?1e4:!1}),{data:f,isLoading:m}=nt({queryKey:["/api/security/dependency-scan"],refetchInterval:n?3e5:!1}),{data:g,isLoading:x}=nt({queryKey:["/api/security/semgrep-findings"],refetchInterval:n?6e4:!1});N.useEffect(()=>{try{const w=window.location.protocol==="https:"?"wss:":"ws:",_=window.location.hostname,A=window.location.port||(window.location.protocol==="https:"?"443":"80"),C=`${w}//${_}:${A}/ws/security`;console.log("🔌 [SecurityDashboard] Connecting to WebSocket:",C);const S=new WebSocket(C);return S.onopen=()=>{console.log("🔌 [SecurityDashboard] WebSocket connected successfully")},S.onmessage=E=>{const P=JSON.parse(E.data);switch(P.type){case"anomaly":t.invalidateQueries({queryKey:["/api/security/anomalies"]});break;case"vulnerability":t.invalidateQueries({queryKey:["/api/security/vulnerabilities"]});break;case"critical-alert":TGe(P);break}},S.onerror=E=>{console.error("🔌 [SecurityDashboard] WebSocket error:",E)},S.onclose=E=>{console.log("🔌 [SecurityDashboard] WebSocket closed:",E.code,E.reason)},()=>{S.close()}}catch(w){console.error("🔌 [SecurityDashboard] Failed to create WebSocket connection:",w)}},[t]);const v={securityScore:EGe(a,l),totalVulnerabilities:Array.isArray(l)?l.length:0,criticalVulnerabilities:Array.isArray(l)?l.filter(w=>w.severity==="CRITICAL").length:0,recentAnomalies:Array.isArray(u)?u.filter(w=>new Date(w.timestamp).getTime()>Date.now()-36e5).length:0},y=()=>{t.invalidateQueries({queryKey:["/api/security/metrics"]}),t.invalidateQueries({queryKey:["/api/security/vulnerabilities"]}),t.invalidateQueries({queryKey:["/api/security/anomalies"]}),t.invalidateQueries({queryKey:["/api/security/dependency-scan"]}),t.invalidateQueries({queryKey:["/api/security/semgrep-findings"]})};return i.jsx(pt,{title:"Monitoramento Avançado de Segurança",actions:i.jsx(Tp,{onRefresh:y,isLoading:o||c||d,variant:"ghost"}),children:i.jsxs("div",{className:"container mx-auto space-y-6 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsx("p",{className:"text-muted-foreground",children:"Sistema autônomo de detecção e prevenção de vulnerabilidades"})}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(ke,{variant:n?"default":"outline",className:"cursor-pointer",onClick:()=>s(!n),children:[i.jsx(Da,{className:"mr-1 h-4 w-4"}),n?"Ao Vivo":"Pausado"]}),i.jsxs(Yt,{value:e,onValueChange:r,children:[i.jsx(Ht,{className:"w-[180px]",children:i.jsx(Qt,{placeholder:"Selecionar período"})}),i.jsxs(Wt,{children:[i.jsx(le,{value:"1h",children:"Última hora"}),i.jsx(le,{value:"24h",children:"Últimas 24h"}),i.jsx(le,{value:"7d",children:"Últimos 7 dias"}),i.jsx(le,{value:"30d",children:"Últimos 30 dias"})]})]})]})]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"Score de Segurança Global"}),i.jsx(Jt,{children:"Avaliação geral da postura de segurança do sistema"})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-6xl font-bold",style:{color:CGe(v.securityScore)},children:[v.securityScore,"%"]}),i.jsxs("div",{className:"space-y-2 text-right",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ar,{className:"h-4 w-4 text-green-500"}),i.jsx("span",{children:"Proteções Ativas: 20"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{children:"Conformidade OWASP: 100%"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nje,{className:"h-4 w-4 text-yellow-500"}),i.jsx("span",{children:"Detecção ML: Ativa"})]})]})]}),i.jsx(On,{value:v.securityScore,className:"mt-4"})]})]}),i.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:o?i.jsxs(i.Fragment,{children:[i.jsx(Ot,{className:"h-32 w-full"}),i.jsx(Ot,{className:"h-32 w-full"}),i.jsx(Ot,{className:"h-32 w-full"}),i.jsx(Ot,{className:"h-32 w-full"})]}):i.jsxs(i.Fragment,{children:[i.jsx(D0,{title:"Vulnerabilidades",value:v.totalVulnerabilities,icon:i.jsx(yX,{className:"h-8 w-8"}),trend:-15,critical:v.criticalVulnerabilities}),i.jsx(D0,{title:"Anomalias/Hora",value:v.recentAnomalies,icon:i.jsx(jr,{className:"h-8 w-8"}),trend:25}),i.jsx(D0,{title:"IPs Bloqueados",value:a?.blockedIPs||0,icon:i.jsx(V_,{className:"h-8 w-8"}),trend:10}),i.jsx(D0,{title:"Taxa de Erro",value:`${(a?.errorRate||0).toFixed(2)}%`,icon:i.jsx(Ea,{className:"h-8 w-8"}),trend:-5})]})}),Array.isArray(l)&&l.filter(w=>w.severity==="CRITICAL").length>0&&i.jsxs(jt,{variant:"destructive",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(sw,{children:"Atenção: Vulnerabilidades Críticas Detectadas"}),i.jsxs(At,{children:[v.criticalVulnerabilities," vulnerabilidades críticas requerem ação imediata.",i.jsx("div",{className:"mt-2 space-y-1",children:Array.isArray(l)&&l.filter(w=>w.severity==="CRITICAL").slice(0,3).map(w=>i.jsxs("div",{className:"text-sm",children:["• ",w.type,": ",w.description]},w.id))})]})]}),i.jsxs(kp,{defaultValue:"vulnerabilities",className:"space-y-4",children:[i.jsxs(Rd,{className:"grid w-full grid-cols-5",children:[i.jsx(dn,{value:"vulnerabilities",children:"Vulnerabilidades"}),i.jsx(dn,{value:"anomalies",children:"Anomalias"}),i.jsx(dn,{value:"attacks",children:"Ataques"}),i.jsx(dn,{value:"dependencies",children:"Dependências"}),i.jsx(dn,{value:"code",children:"Análise de Código"})]}),i.jsx(hn,{value:"vulnerabilities",className:"space-y-4",children:c?i.jsx(Ot,{className:"h-64 w-full"}):i.jsx(bGe,{vulnerabilities:l})}),i.jsx(hn,{value:"anomalies",className:"space-y-4",children:d?i.jsx(Ot,{className:"h-64 w-full"}):i.jsx(wGe,{anomalies:u})}),i.jsx(hn,{value:"attacks",className:"space-y-4",children:o?i.jsx(Ot,{className:"h-64 w-full"}):i.jsx(_Ge,{metrics:a})}),i.jsx(hn,{value:"dependencies",className:"space-y-4",children:m?i.jsx(Ot,{className:"h-64 w-full"}):i.jsx(SGe,{scans:f})}),i.jsx(hn,{value:"code",className:"space-y-4",children:x?i.jsx(Ot,{className:"h-64 w-full"}):i.jsx(jGe,{findings:g})})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Tendência de Segurança"})}),i.jsx(re,{children:i.jsx(AGe,{data:a?.trend||[]})})]}),i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Distribuição de Vulnerabilidades"})}),i.jsx(re,{children:i.jsx(NGe,{vulnerabilities:l})})]})]})]})})}function D0({title:t,value:e,icon:r,trend:n,critical:s}){return i.jsx(ee,{children:i.jsx(re,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:t}),i.jsx("p",{className:"text-2xl font-bold",children:e}),s!==void 0&&i.jsxs("p",{className:"text-sm text-destructive",children:[s," críticas"]})]}),i.jsxs("div",{className:"flex flex-col items-end",children:[r,n!==void 0&&i.jsxs(ke,{variant:n>0?"destructive":"default",className:"mt-2",children:[n>0?"+":"",n,"%"]})]})]})})})}function bGe({vulnerabilities:t}){return!t||t.length===0?i.jsx(ee,{children:i.jsxs(re,{className:"p-12 text-center",children:[i.jsx(ar,{className:"mx-auto mb-4 h-12 w-12 text-green-500"}),i.jsx("p",{className:"text-lg font-semibold",children:"Nenhuma vulnerabilidade detectada"}),i.jsx("p",{className:"text-muted-foreground",children:"O sistema está seguro"})]})}):i.jsx("div",{className:"space-y-4",children:t.map(e=>i.jsx(ee,{children:i.jsx(re,{className:"p-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ke,{style:{backgroundColor:lL[e.severity],color:"white"},children:e.severity}),i.jsx("span",{className:"font-semibold",children:e.type}),e.endpoint&&i.jsx("code",{className:"rounded bg-muted px-2 py-1 text-sm",children:e.endpoint})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Detectado em ",new Date(e.detectedAt).toLocaleString()]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Confiança: ",((1-e.falsePositiveScore)*100).toFixed(0),"%"]})})]})})},e.id))})}function wGe({anomalies:t}){return i.jsx("div",{className:"space-y-4",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"Detecções em Tempo Real"}),i.jsx(Jt,{children:"Anomalias detectadas por Machine Learning"})]}),i.jsx(re,{children:t?.map(e=>i.jsx("div",{className:"border-warning mb-4 border-l-4 py-2 pl-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:e.type}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]}),i.jsxs(ke,{variant:"outline",children:[(e.confidence*100).toFixed(0),"% certeza"]})]})},e.id))})]})})}function _Ge({metrics:t}){return i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Padrões de Ataque Detectados"})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx(L0,{type:"SQL Injection",count:t?.attacks?.sql||0,blocked:t?.blocked?.sql||0}),i.jsx(L0,{type:"XSS",count:t?.attacks?.xss||0,blocked:t?.blocked?.xss||0}),i.jsx(L0,{type:"Brute Force",count:t?.attacks?.bruteforce||0,blocked:t?.blocked?.bruteforce||0}),i.jsx(L0,{type:"Path Traversal",count:t?.attacks?.pathTraversal||0,blocked:t?.blocked?.pathTraversal||0})]})})]})}function L0({type:t,count:e,blocked:r}){const n=e>0?(r/e*100).toFixed(0):100;return i.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:t}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[e," tentativas • ",r," bloqueadas"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl font-bold",children:[n,"%"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Taxa de bloqueio"})]})]})}function SGe({scans:t}){return i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(Qa,{className:"h-5 w-5"}),"Análise de Dependências (OWASP Dependency-Check)"]})}),i.jsx(re,{children:t?.vulnerabilities?.map(e=>i.jsx("div",{className:"border-b py-4 last:border-0",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:e.dependency}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),i.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[i.jsx(ke,{variant:"outline",children:e.cve}),i.jsxs(ke,{style:{backgroundColor:lL[e.severity]||"#10b981",color:"white"},children:["CVSS: ",e.cvssScore]})]})]}),i.jsx(ke,{children:e.version})]})},e.cve))})]})}function jGe({findings:t}){return i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(SX,{className:"h-5 w-5"}),"Análise de Código (Semgrep SAST)"]})}),i.jsx(re,{children:t?.map(e=>i.jsx("div",{className:"border-b py-4 last:border-0",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"font-medium",children:e.rule}),i.jsx(ke,{variant:e.severity==="ERROR"?"destructive":"default",children:e.severity})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.message}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsxs("code",{className:"rounded bg-muted px-2 py-1",children:[e.file,":",e.line,":",e.column]}),e.category&&i.jsx(ke,{variant:"outline",children:e.category})]}),e.fixSuggestion&&i.jsx(jt,{className:"mt-2",children:i.jsxs(At,{className:"text-xs",children:["💡 ",e.fixSuggestion]})})]})},e.id))})]})}function AGe({data:t}){return i.jsx(Fre,{width:"100%",height:300,children:i.jsxs(yGe,{data:t,children:[i.jsx(Vse,{strokeDasharray:"3 3"}),i.jsx(_j,{dataKey:"time"}),i.jsx(Sj,{}),i.jsx(Ci,{}),i.jsx(Ku,{}),i.jsx(Al,{type:"monotone",dataKey:"securityScore",stroke:"#10b981",fill:"#10b981",fillOpacity:.3,name:"Score de Segurança"}),i.jsx(Al,{type:"monotone",dataKey:"threats",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.3,name:"Ameaças"})]})})}function NGe({vulnerabilities:t}){const e=t?Object.entries(t.reduce((r,n)=>(r[n.severity]=(r[n.severity]||0)+1,r),{})).map(([r,n])=>({name:r,value:n,fill:lL[r]})):[];return i.jsx(Fre,{width:"100%",height:300,children:i.jsxs(vGe,{children:[i.jsx(Ol,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:({name:r,value:n})=>`${r}: ${n}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:e.map((r,n)=>i.jsx(JS,{fill:r.fill},`cell-${n}`))}),i.jsx(Ci,{})]})})}function EGe(t,e){if(!t||!e)return 100;let r=100;const n={CRITICAL:15,HIGH:10,MEDIUM:5,LOW:2};return e.forEach(s=>{r-=n[s.severity]||0}),t.errorRate>5&&(r-=10),t.anomalyScore>50&&(r-=15),t.blockedRequests>t.totalRequests*.1&&(r-=20),Math.max(0,Math.min(100,r))}function CGe(t){return t>=90?"#10b981":t>=70?"#f59e0b":t>=50?"#ea580c":"#dc2626"}function TGe(t){console.error("ALERTA CRÍTICO:",t)}function PGe(){return i.jsx(xGe,{})}function kGe(){const{user:t}=$a();if(t?.role!=="ADMINISTRADOR")return i.jsx(pt,{title:"Acesso Negado",children:i.jsxs(jt,{variant:"destructive",children:[i.jsx(jr,{className:"h-4 w-4"}),i.jsx(At,{children:"Você não tem permissão para acessar esta página. Apenas usuários com perfil ADMINISTRADOR podem visualizar o dashboard de monitoramento."})]})});const{data:e,isLoading:r,error:n,isError:s}=nt({queryKey:["/api/monitoring/queues/metrics"],refetchInterval:1e4,refetchIntervalInBackground:!0}),a=c=>c==="dead-letter-queue"?i.jsx(Ea,{className:"h-5 w-5 text-red-500"}):i.jsx(Da,{className:"h-5 w-5 text-blue-500"}),o=c=>Object.values(c.alerts).some(d=>d)?i.jsx(ke,{variant:"destructive",children:"Alerta"}):c.activeJobs>0?i.jsx(ke,{variant:"secondary",children:"Processando"}):i.jsx(ke,{variant:"default",className:"bg-green-100 text-green-800",children:"Saudável"}),l=c=>Object.values(c.alerts).some(d=>d)?"border-red-500 border-2":"";return r?i.jsx(pt,{title:"Dashboard de Monitoramento",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(3)].map((c,u)=>i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(Ot,{className:"h-6 w-32"})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ot,{className:"h-4 w-24"}),i.jsx(Ot,{className:"h-4 w-20"}),i.jsx(Ot,{className:"h-4 w-28"})]})})]},u))})}):s?i.jsx(pt,{title:"Dashboard de Monitoramento",children:i.jsxs(jt,{variant:"destructive",children:[i.jsx(jr,{className:"h-4 w-4"}),i.jsxs(At,{children:["Erro ao carregar métricas das filas: ",n?.message||"Erro desconhecido"]})]})}):i.jsx(pt,{title:"Dashboard de Monitoramento",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Hc,{className:"h-6 w-6"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Filas BullMQ"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[e?.healthy?i.jsx(ar,{className:"h-5 w-5 text-green-500"}):i.jsx(jr,{className:"h-5 w-5 text-red-500"}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["Última atualização: ",e?.timestamp?new Date(e.timestamp).toLocaleTimeString():"N/A"]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e?.queues?.map(c=>i.jsxs(ee,{className:l(c),"data-testid":`card-queue-${c.queueName}`,children:[i.jsxs(ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsxs(de,{className:"text-sm font-medium flex items-center space-x-2",children:[a(c.queueName),i.jsx("span",{children:c.queueName})]}),o(c)]}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total:"}),i.jsx("span",{className:"font-semibold","data-testid":`text-total-${c.queueName}`,children:c.totalJobs})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Ativos:"}),i.jsx("span",{className:"font-semibold text-blue-600","data-testid":`text-active-${c.queueName}`,children:c.activeJobs})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Completos:"}),i.jsx("span",{className:"font-semibold text-green-600","data-testid":`text-completed-${c.queueName}`,children:c.completedJobs})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Falhados:"}),i.jsx("span",{className:"font-semibold text-red-600","data-testid":`text-failed-${c.queueName}`,children:c.failedJobs})]})]}),c.queueName==="dead-letter-queue"&&c.dlqSize!==void 0&&i.jsx("div",{className:"border-t pt-2",children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"DLQ Size:"}),i.jsx("span",{className:`font-semibold ${c.dlqSize>0?"text-red-600":"text-green-600"}`,"data-testid":"text-dlq-size",children:c.dlqSize})]})}),Object.values(c.alerts).some(u=>u)&&i.jsxs("div",{className:"border-t pt-2",children:[i.jsxs("div",{className:"flex items-center space-x-1 text-sm text-red-600",children:[i.jsx(jr,{className:"h-3 w-3"}),i.jsx("span",{children:"Alertas ativos:"})]}),i.jsxs("ul",{className:"mt-1 text-xs text-red-600 space-y-1",children:[c.alerts.highFailureRate&&i.jsx("li",{children:"• Alta taxa de falhas"}),c.alerts.slowProcessing&&i.jsx("li",{children:"• Processamento lento"}),c.alerts.highDLQSize&&i.jsx("li",{children:"• DLQ com muitos jobs"})]})]})]})})]},c.queueName))}),(!e?.queues||e.queues.length===0)&&i.jsxs(jt,{children:[i.jsx(_n,{className:"h-4 w-4"}),i.jsx(At,{children:"Nenhuma fila encontrada ou todas as filas estão vazias."})]})]})})}function OGe(){const{toast:t}=Fr(),[e,r]=N.useState(null),{data:n,isLoading:s}=nt({queryKey:["/api/auth/sessions"],queryFn:async()=>{const l=await fetch("/api/auth/sessions",{headers:{Authorization:`Bearer ${localStorage.getItem("supabase.auth.token")}`}});if(!l.ok)throw new Error("Erro ao buscar sessões");return(await l.json()).sessions}}),a=Mt({mutationFn:async l=>{const c=await fetch(`/api/auth/sessions/${l}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("supabase.auth.token")}`}});if(!c.ok)throw new Error("Erro ao encerrar sessão");return c.json()},onSuccess:()=>{t({title:"Sessão encerrada",description:"A sessão foi encerrada com sucesso."}),tr.invalidateQueries({queryKey:["/api/auth/sessions"]}),r(null)},onError:()=>{t({title:"Erro",description:"Não foi possível encerrar a sessão.",variant:"destructive"})}}),o=l=>l.toLowerCase().includes("mobile")||l.toLowerCase().includes("android")||l.toLowerCase().includes("iphone")?i.jsx(kX,{className:"h-5 w-5"}):l.toLowerCase().includes("ipad")||l.toLowerCase().includes("tablet")?i.jsx(wje,{className:"h-5 w-5"}):i.jsx(qb,{className:"h-5 w-5"});return i.jsxs("div",{className:"container mx-auto max-w-4xl py-8",children:[i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-6 w-6"}),i.jsx(de,{children:"Sessões Ativas"})]}),i.jsx(Jt,{children:"Gerencie os dispositivos e locais onde sua conta está conectada."})]}),i.jsx(re,{className:"space-y-4",children:s?i.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Carregando sessões..."}):n?.length===0?i.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Nenhuma sessão ativa encontrada."}):n?.map(l=>i.jsxs("div",{className:"hover:bg-accent/50 flex items-center justify-between rounded-lg border p-4 transition-colors",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"rounded-lg bg-accent p-2",children:o(l.device)}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:l.device}),l.isCurrent&&i.jsx(ke,{variant:"secondary",className:"text-xs",children:"Sessão Atual"})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["IP: ",l.ipAddress]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Criada em:"," ",Mn(new Date(l.createdAt),"dd 'de' MMMM 'às' HH:mm",{locale:dd})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Última atividade:"," ",Mn(new Date(l.lastActivityAt),"dd 'de' MMMM 'às' HH:mm",{locale:dd})]})]})]}),!l.isCurrent&&i.jsx(se,{variant:"ghost",size:"icon",onClick:()=>r(l),className:"hover:bg-destructive/10 text-destructive hover:text-destructive",children:i.jsx(ay,{className:"h-4 w-4"})})]},l.id))})]}),i.jsx($2,{open:!!e,onOpenChange:()=>r(null),children:i.jsxs(SS,{children:[i.jsxs(jS,{children:[i.jsx(NS,{children:"Encerrar sessão?"}),i.jsxs(ES,{children:["Tem certeza que deseja encerrar esta sessão? O usuário será desconectado deste dispositivo.",i.jsxs("div",{className:"mt-4 rounded-md bg-accent p-3",children:[i.jsx("div",{className:"font-medium",children:e?.device}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["IP: ",e?.ipAddress]})]})]})]}),i.jsxs(AS,{children:[i.jsx(TS,{children:"Cancelar"}),i.jsx(CS,{onClick:()=>e&&a.mutate(e.id),className:"hover:bg-destructive/90 bg-destructive",children:"Encerrar Sessão"})]})]})})]})}const RGe=b1e,cae=N.createContext({}),WW=({...t})=>i.jsx(cae.Provider,{value:{name:t.name},children:i.jsx(Li,{...t})}),Aj=()=>{const t=N.useContext(cae),e=N.useContext(uae),{getFieldState:r,formState:n}=iS(),s=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...s}},uae=N.createContext({}),GR=N.forwardRef(({className:t,...e},r)=>{const n=N.useId();return i.jsx(uae.Provider,{value:{id:n},children:i.jsx("div",{ref:r,className:Ie("space-y-2",t),...e})})});GR.displayName="FormItem";const KR=N.forwardRef(({className:t,...e},r)=>{const{error:n,formItemId:s}=Aj();return i.jsx(ue,{ref:r,className:Ie(n&&"text-destructive",t),htmlFor:s,...e})});KR.displayName="FormLabel";const XR=N.forwardRef(({...t},e)=>{const{error:r,formItemId:n,formDescriptionId:s,formMessageId:a}=Aj();return i.jsx(zK,{ref:e,id:n,"aria-describedby":r?`${s} ${a}`:`${s}`,"aria-invalid":!!r,...t})});XR.displayName="FormControl";const IGe=N.forwardRef(({className:t,...e},r)=>{const{formDescriptionId:n}=Aj();return i.jsx("p",{ref:r,id:n,className:Ie("text-sm text-muted-foreground",t),...e})});IGe.displayName="FormDescription";const YR=N.forwardRef(({className:t,children:e,...r},n)=>{const{error:s,formMessageId:a}=Aj(),o=s?String(s?.message??""):e;return o?i.jsx("p",{ref:n,id:a,className:Ie("text-sm font-medium text-destructive",t),...r,children:o}):null});YR.displayName="FormMessage";const MGe=ci({newEmail:br().email("Email inválido"),password:br().min(1,"Senha é obrigatória")});function DGe(){const[,t]=qi(),{user:e}=$a(),{toast:r}=Fr(),[n,s]=N.useState(null),[a,o]=N.useState(null),l=si({resolver:ai(MGe),defaultValues:{newEmail:"",password:""}}),{data:c}=nt({queryKey:["/api/auth/email-change-status"],refetchInterval:a?5e3:!1}),u=Mt({mutationFn:async g=>await Je("/api/auth/change-email",{method:"POST",body:JSON.stringify(g)}),onSuccess:g=>{r({title:"Email de verificação enviado",description:"Verifique seu novo email para confirmar a alteração."}),g.debugToken&&s(g.debugToken),o(l.getValues("newEmail")),l.reset()},onError:g=>{r({title:"Erro ao alterar email",description:g.message||"Ocorreu um erro ao processar sua solicitação",variant:"destructive"})}}),d=Mt({mutationFn:async g=>await Je("/api/auth/verify-email-change",{method:"POST",body:JSON.stringify({token:g})}),onSuccess:()=>{r({title:"Email alterado com sucesso",description:"Por favor, faça login novamente com seu novo email."}),setTimeout(()=>{window.location.href="/login"},2e3)},onError:g=>{r({title:"Erro ao verificar email",description:g.message||"Token inválido ou expirado",variant:"destructive"}),s(null)}}),f=g=>{u.mutate(g)},m=()=>{n&&d.mutate(n)};return i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"container mx-auto max-w-2xl p-4",children:[i.jsxs(se,{variant:"ghost",className:"mb-4",onClick:()=>t("/configuracoes"),children:[i.jsx(NM,{className:"mr-2 h-4 w-4"}),"Voltar para Configurações"]}),i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(H_,{className:"h-5 w-5"}),"Alterar Email"]}),i.jsx(Jt,{children:"Altere o email associado à sua conta"})]}),i.jsxs(re,{className:"space-y-6",children:[i.jsxs("div",{className:"bg-muted/50 rounded-lg border p-4",children:[i.jsx("div",{className:"mb-1 text-sm text-muted-foreground",children:"Email atual"}),i.jsx("div",{className:"font-medium",children:e?.email})]}),c?.hasPendingChange&&i.jsxs(jt,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950",children:[i.jsx(ir,{className:"h-4 w-4 text-blue-600"}),i.jsxs(At,{className:"text-blue-800 dark:text-blue-200",children:["Você tem uma alteração de email pendente para:"," ",i.jsx("strong",{children:c.newEmail}),i.jsx("br",{}),"Verifique seu email para confirmar a alteração."]})]}),n&&i.jsxs(jt,{className:"border-amber-200 bg-amber-50 dark:bg-amber-950",children:[i.jsx(ir,{className:"h-4 w-4 text-amber-600"}),i.jsxs(At,{className:"text-amber-800 dark:text-amber-200",children:[i.jsx("div",{className:"mb-2",children:i.jsx("strong",{children:"Modo Desenvolvimento - Token de Verificação:"})}),i.jsx("code",{className:"mb-3 block break-all rounded bg-muted p-2 text-xs",children:n}),i.jsx(se,{size:"sm",onClick:m,disabled:d.isPending,children:"Verificar Token"})]})]}),!c?.hasPendingChange&&i.jsx(RGe,{...l,children:i.jsxs("form",{onSubmit:l.handleSubmit(f),className:"space-y-4",children:[i.jsx(WW,{control:l.control,name:"newEmail",render:({field:g})=>i.jsxs(GR,{children:[i.jsx(KR,{children:"Novo Email"}),i.jsx(XR,{children:i.jsx(Fe,{...g,type:"email",placeholder:"novo.email@exemplo.com",disabled:u.isPending})}),i.jsx(YR,{})]})}),i.jsx(WW,{control:l.control,name:"password",render:({field:g})=>i.jsxs(GR,{children:[i.jsx(KR,{children:"Senha Atual"}),i.jsx(XR,{children:i.jsx(Fe,{...g,type:"password",placeholder:"Digite sua senha atual",disabled:u.isPending})}),i.jsx(YR,{})]})}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx(se,{type:"submit",disabled:u.isPending,children:u.isPending?"Processando...":"Alterar Email"})})]})}),i.jsxs(jt,{children:[i.jsx(fr,{className:"h-4 w-4"}),i.jsx(At,{children:"Por motivos de segurança, você precisará verificar o novo email antes que a alteração seja efetivada. Um email de verificação será enviado para o novo endereço."})]})]})]})]})})}function LGe(){const{user:t}=$a(),e=t?.role==="ADMINISTRADOR",r=[{title:"Alterar Email",description:"Altere o email associado à sua conta",icon:H_,href:"/configuracoes/alterar-email",available:!0},{title:"Sessões Ativas",description:"Gerencie suas sessões de login ativas",icon:qb,href:"/configuracoes/sessoes",available:!0},{title:"Alterar Senha",description:"Atualize sua senha de acesso",icon:V_,href:"/configuracoes/alterar-senha",available:!1},{title:"Produtos de Crédito",description:"Gerencie produtos de crédito disponíveis",icon:_o,href:"/configuracoes/produtos",available:e},{title:"Tabelas Comerciais",description:"Configure tabelas comerciais e taxas",icon:_o,href:"/configuracoes/tabelas",available:e}];return i.jsx(pt,{title:"Configurações",children:i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"container mx-auto max-w-6xl p-4",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"mb-2 text-3xl font-bold",children:"Configurações"}),i.jsx("p",{className:"text-muted-foreground",children:"Gerencie suas preferências e configurações da conta"})]}),i.jsxs(ee,{className:"mb-8",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2",children:[i.jsx(El,{className:"h-5 w-5"}),"Informações da Conta"]})}),i.jsx(re,{children:i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Nome"}),i.jsx("div",{className:"font-medium",children:t?.full_name||"Não informado"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Email"}),i.jsx("div",{className:"font-medium",children:t?.email})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Perfil"}),i.jsx("div",{className:"font-medium",children:t?.role})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"ID do Usuário"}),i.jsx("div",{className:"font-mono text-xs",children:t?.id})]})]})})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.filter(n=>n.available).map(n=>i.jsx(ee,{className:"cursor-pointer transition-shadow hover:shadow-lg",children:i.jsx(on,{href:n.href,children:i.jsxs(ie,{children:[i.jsxs(de,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(n.icon,{className:"h-5 w-5"}),n.title]}),i.jsx(eje,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Jt,{children:n.description})]})})},n.href))}),i.jsxs(ee,{className:"mt-8 border-amber-200 bg-amber-50 dark:border-amber-800 dark:bg-amber-950",children:[i.jsx(ie,{children:i.jsxs(de,{className:"flex items-center gap-2 text-amber-800 dark:text-amber-200",children:[i.jsx(ur,{className:"h-5 w-5"}),"Segurança da Conta"]})}),i.jsx(re,{children:i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Mantenha suas informações de acesso seguras. Nunca compartilhe sua senha e sempre faça logout ao usar computadores compartilhados."})})]})]})})})}function $Ge(){const[t,e]=N.useState({}),r=c=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c),{data:n,isLoading:s}=nt({queryKey:["/api/propostas/aguardando-aceite"],queryFn:async()=>await Je("/api/propostas?status=aguardando_aceite_atendente")}),a=Mt({mutationFn:async({id:c,status:u,observacao:d})=>Je(`/api/propostas/${c}/status`,{method:"PUT",body:{status:u,observacao:d}}),onSuccess:(c,u)=>{tr.invalidateQueries({queryKey:["/api/propostas/aguardando-aceite"]}),Ls({title:u.status==="aceito_atendente"?"Proposta aceita":"Proposta cancelada",description:u.status==="aceito_atendente"?"A proposta foi aceita e está pronta para formalização":"A proposta foi cancelada"}),e(d=>{const f={...d};return delete f[u.id],f})},onError:()=>{Ls({title:"Erro ao atualizar status",description:"Não foi possível atualizar o status da proposta",variant:"destructive"})}}),o=c=>{const u=t[c]||"Proposta aceita pelo atendente para formalização";a.mutate({id:c,status:"aceito_atendente",observacao:u})},l=c=>{const u=t[c];if(!u||u.trim()===""){Ls({title:"Observação obrigatória",description:"Por favor, informe o motivo do cancelamento",variant:"destructive"});return}a.mutate({id:c,status:"cancelado",observacao:u})};return s?i.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:i.jsxs("div",{className:"text-center",children:[i.jsx(un,{className:"mx-auto h-12 w-12 animate-spin text-blue-600"}),i.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Carregando propostas..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:i.jsxs("div",{className:"mx-auto max-w-7xl p-6",children:[i.jsxs("div",{className:"mb-8 flex items-center gap-4",children:[i.jsx(on,{href:"/dashboard",children:i.jsx(se,{variant:"ghost",size:"icon",children:i.jsx(xX,{className:"h-6 w-6"})})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Aceite de Propostas"}),i.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"Aceite ou cancele propostas aprovadas pelo analista"})]})]}),!n||n.length===0?i.jsx(ee,{className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80",children:i.jsxs(re,{className:"p-12 text-center",children:[i.jsx(zt,{className:"mx-auto mb-4 h-16 w-16 text-gray-400"}),i.jsx("h3",{className:"mb-2 text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Nenhuma proposta aguardando aceite"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Quando uma proposta for aprovada pelo analista, ela aparecerá aqui para seu aceite."})]})}):i.jsx("div",{className:"grid gap-6",children:n.map(c=>i.jsxs(ee,{className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80",children:[i.jsx(ie,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(de,{className:"text-xl",children:["Proposta ",c.id.substring(0,8).toUpperCase()]}),i.jsx(ke,{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:"Aguardando Aceite"})]})}),i.jsxs(re,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Dados do Cliente"}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(El,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Nome:"}),i.jsx("span",{className:"text-sm font-medium",children:c.nomeCliente})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CPF:"}),i.jsx("span",{className:"text-sm font-medium",children:c.cpfCliente})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(CX,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Telefone:"}),i.jsx("span",{className:"text-sm font-medium",children:c.telefoneCliente})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(H_,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email:"}),i.jsx("span",{className:"text-sm font-medium",children:c.emailCliente})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"mb-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Informações do Empréstimo"}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs("div",{className:"rounded-lg bg-gray-50 p-3 dark:bg-gray-700/50",children:[i.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[i.jsx(Mc,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Valor Solicitado"})]}),i.jsx("p",{className:"text-lg font-semibold",children:r(c.valorSolicitado)})]}),i.jsxs("div",{className:"rounded-lg bg-green-50 p-3 dark:bg-green-900/20",children:[i.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[i.jsx(ar,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),i.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Valor Aprovado"})]}),i.jsx("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:r(c.valorAprovado||c.valorSolicitado)})]}),i.jsxs("div",{className:"rounded-lg bg-gray-50 p-3 dark:bg-gray-700/50",children:[i.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[i.jsx(_n,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Prazo"})]}),i.jsxs("p",{className:"text-lg font-semibold",children:[c.prazo," meses"]})]})]})]}),c.observacoesAnalista&&i.jsxs("div",{children:[i.jsx("h3",{className:"mb-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Observações do Analista"}),i.jsx("div",{className:"rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20",children:i.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.observacoesAnalista})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"mb-2 block text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Suas Observações"}),i.jsx(Ra,{value:t[c.id]||"",onChange:u=>e(d=>({...d,[c.id]:u.target.value})),placeholder:"Digite observações sobre o aceite ou cancelamento...",className:"w-full",rows:3})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsxs(se,{onClick:()=>o(c.id),disabled:a.isPending,className:"flex-1",children:[i.jsx(ar,{className:"mr-2 h-4 w-4"}),"Aceitar para Formalização"]}),i.jsxs(se,{onClick:()=>l(c.id),disabled:a.isPending,variant:"destructive",className:"flex-1",children:[i.jsx(Ea,{className:"mr-2 h-4 w-4"}),"Cancelar Proposta"]})]})]})]},c.id))})]})})}const dae=({className:t,...e})=>i.jsx("nav",{role:"navigation","aria-label":"pagination",className:Ie("mx-auto flex w-full justify-center",t),...e});dae.displayName="Pagination";const hae=N.forwardRef(({className:t,...e},r)=>i.jsx("ul",{ref:r,className:Ie("flex flex-row items-center gap-1",t),...e}));hae.displayName="PaginationContent";const ob=N.forwardRef(({className:t,...e},r)=>i.jsx("li",{ref:r,className:Ie("",t),...e}));ob.displayName="PaginationItem";const Nj=({className:t,isActive:e,size:r="icon",...n})=>i.jsx("a",{"aria-current":e?"page":void 0,className:Ie(sS({variant:e?"outline":"ghost",size:r}),t),...n});Nj.displayName="PaginationLink";const fae=({className:t,...e})=>i.jsxs(Nj,{"aria-label":"Go to previous page",size:"default",className:Ie("gap-1 pl-2.5",t),...e,children:[i.jsx(xX,{className:"h-4 w-4"}),i.jsx("span",{children:"Previous"})]});fae.displayName="PaginationPrevious";const pae=({className:t,...e})=>i.jsxs(Nj,{"aria-label":"Go to next page",size:"default",className:Ie("gap-1 pr-2.5",t),...e,children:[i.jsx("span",{children:"Next"}),i.jsx(TM,{className:"h-4 w-4"})]});pae.displayName="PaginationNext";const IP=15;function FGe(){const{user:t}=$a(),[e,r]=N.useState(1),[n,s]=N.useState(null),a=t?.role==="ADMINISTRADOR"||t?.role==="DIRETOR",{data:o,isLoading:l,error:c}=nt({queryKey:["/api/contratos"],enabled:a,staleTime:3e4,refetchInterval:6e4}),u=async y=>{try{if(s(y.id),y.urlCcbAssinado){window.open(y.urlCcbAssinado,"_blank");return}if(y.caminhoCcbAssinado){const _=await Je(`/api/formalizacao/${y.id}/ccb-url`,{method:"POST"});_.url?window.open(_.url,"_blank"):console.error("URL do CCB não disponível")}}catch(w){console.error("Erro ao abrir CCB:",w)}finally{s(null)}};if(!a)return i.jsx(pt,{title:"Acesso Negado",children:i.jsx("div",{className:"container mx-auto py-8",children:i.jsxs(ee,{className:"mx-auto max-w-md",children:[i.jsx(ie,{children:i.jsx(de,{className:"text-red-600",children:"Acesso Negado"})}),i.jsxs(re,{children:[i.jsxs(jt,{variant:"destructive",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(At,{children:"Você não tem permissão para acessar esta página. Apenas usuários com perfil ADMINISTRADOR ou DIRETOR podem visualizar contratos."})]}),i.jsx("div",{className:"mt-4",children:i.jsx(se,{onClick:()=>window.location.href="/dashboard",children:"Voltar ao Dashboard"})})]})]})})});if(l)return i.jsx(pt,{title:"Gestão de Contratos",children:i.jsx("div",{className:"container mx-auto py-8",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(Ot,{className:"h-8 w-64"}),i.jsx(Ot,{className:"mt-2 h-4 w-96"})]}),i.jsx(re,{children:i.jsx("div",{className:"space-y-4",children:[...Array(5)].map((y,w)=>i.jsx(Ot,{className:"h-12 w-full"},w))})})]})})});if(c)return i.jsx(pt,{title:"Gestão de Contratos",children:i.jsx("div",{className:"container mx-auto py-8",children:i.jsxs(ee,{children:[i.jsx(ie,{children:i.jsx(de,{children:"Erro ao carregar contratos"})}),i.jsx(re,{children:i.jsxs(jt,{variant:"destructive",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(At,{children:"Ocorreu um erro ao carregar os contratos. Por favor, tente novamente."})]})})]})})});const d=o?.contratos||[],f=o?.estatisticas,m=Math.ceil(d.length/IP),g=(e-1)*IP,x=g+IP,v=d.slice(g,x);return d.length===0?i.jsx(pt,{title:"Gestão de Contratos",children:i.jsx("div",{className:"container mx-auto py-8",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"Gestão de Contratos"}),i.jsx(Jt,{children:"Visualize e gerencie todos os contratos assinados"})]}),i.jsx(re,{children:i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(zt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-lg font-semibold",children:"Nenhum contrato assinado encontrado"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Quando houver contratos assinados, eles aparecerão aqui."})]})})]})})}):i.jsx(pt,{title:"Gestão de Contratos",children:i.jsx("div",{className:"container mx-auto py-8",children:i.jsxs(ee,{children:[i.jsxs(ie,{children:[i.jsx(de,{children:"Gestão de Contratos"}),i.jsx(Jt,{children:"Visualize e gerencie todos os contratos assinados"}),f&&i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 md:grid-cols-5",children:[i.jsxs("div",{className:"rounded-lg bg-blue-50 p-3",children:[i.jsx("p",{className:"text-xs text-blue-600",children:"Total de Contratos"}),i.jsx("p",{className:"text-xl font-bold text-blue-900",children:f.totalContratos})]}),i.jsxs("div",{className:"rounded-lg bg-yellow-50 p-3",children:[i.jsx("p",{className:"text-xs text-yellow-600",children:"Aguardando Pagamento"}),i.jsx("p",{className:"text-xl font-bold text-yellow-900",children:f.aguardandoPagamento})]}),i.jsxs("div",{className:"rounded-lg bg-green-50 p-3",children:[i.jsx("p",{className:"text-xs text-green-600",children:"Pagos"}),i.jsx("p",{className:"text-xl font-bold text-green-900",children:f.pagos})]}),i.jsxs("div",{className:"rounded-lg bg-purple-50 p-3",children:[i.jsx("p",{className:"text-xs text-purple-600",children:"Valor Total Contratado"}),i.jsx("p",{className:"text-lg font-bold text-purple-900",children:aE(f.valorTotalContratado)})]}),i.jsxs("div",{className:"rounded-lg bg-indigo-50 p-3",children:[i.jsx("p",{className:"text-xs text-indigo-600",children:"Valor Total Liberado"}),i.jsx("p",{className:"text-lg font-bold text-indigo-900",children:aE(f.valorTotalLiberado)})]})]})]}),i.jsxs(re,{children:[i.jsx("div",{className:"rounded-md border",children:i.jsxs(pd,{children:[i.jsx(md,{children:i.jsxs(Dn,{children:[i.jsx(Lt,{children:"ID da Proposta"}),i.jsx(Lt,{children:"Nome do Cliente"}),i.jsx(Lt,{children:"CPF/CNPJ"}),i.jsx(Lt,{children:"Valor do Contrato"}),i.jsx(Lt,{children:"Data da Assinatura"}),i.jsx(Lt,{children:"Status"}),i.jsx(Lt,{className:"text-right",children:"Ações"})]})}),i.jsx(gd,{children:v.map(y=>i.jsxs(Dn,{children:[i.jsxs(vt,{className:"font-mono text-xs",children:[y.id.slice(0,8),"..."]}),i.jsx(vt,{className:"font-medium",children:y.clienteNome}),i.jsx(vt,{children:y.tipoPessoa==="PF"?UGe(y.clienteCpf||""):zGe(y.clienteCnpj||"")}),i.jsx(vt,{children:aE(parseFloat(y.valor||"0"))}),i.jsx(vt,{children:y.dataAssinatura?Mn(new Date(y.dataAssinatura),"dd/MM/yyyy 'às' HH:mm",{locale:dd}):"-"}),i.jsx(vt,{children:i.jsx(BGe,{status:y.statusFormalizacao})}),i.jsx(vt,{className:"text-right",children:i.jsx(se,{size:"sm",variant:"outline",onClick:()=>u(y),disabled:!y.caminhoCcbAssinado||n===y.id,"data-testid":`button-view-ccb-${y.id}`,children:n===y.id?i.jsx(i.Fragment,{children:"Carregando..."}):i.jsxs(i.Fragment,{children:[i.jsx(PM,{className:"mr-1 h-4 w-4"}),"Visualizar CCB Assinado"]})})})]},y.id))})]})}),m>1&&i.jsx("div",{className:"mt-4",children:i.jsx(dae,{children:i.jsxs(hae,{children:[i.jsx(ob,{children:i.jsx(fae,{onClick:()=>r(Math.max(1,e-1)),className:e===1?"pointer-events-none opacity-50":"cursor-pointer"})}),[...Array(m)].map((y,w)=>i.jsx(ob,{children:i.jsx(Nj,{onClick:()=>r(w+1),isActive:e===w+1,className:"cursor-pointer",children:w+1})},w)),i.jsx(ob,{children:i.jsx(pae,{onClick:()=>r(Math.min(m,e+1)),className:e===m?"pointer-events-none opacity-50":"cursor-pointer"})})]})})})]})]})})})}function BGe({status:t}){const r={PENDENTE_GERACAO:{label:"Pendente",className:"bg-gray-100 text-gray-800"},AGUARDANDO_ASSINATURA:{label:"Aguardando Assinatura",className:"bg-yellow-100 text-yellow-800"},AGUARDANDO_PAGAMENTO:{label:"Aguardando Pagamento",className:"bg-orange-100 text-orange-800"},CONCLUIDO:{label:"Concluído",className:"bg-green-100 text-green-800"},EM_PROCESSAMENTO:{label:"Em Processamento",className:"bg-blue-100 text-blue-800"}}[t]||{label:t||"Desconhecido",className:"bg-gray-100 text-gray-800"};return i.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${r.className}`,children:r.label})}function UGe(t){if(!t)return"-";const e=t.replace(/\D/g,"");return e.length!==11?t:e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}function zGe(t){if(!t)return"-";const e=t.replace(/\D/g,"");return e.length!==14?t:e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5")}function qGe(){return i.jsx("div",{className:"flex min-h-screen w-full items-center justify-center bg-gray-50",children:i.jsx(ee,{className:"mx-4 w-full max-w-md",children:i.jsxs(re,{className:"pt-6",children:[i.jsxs("div",{className:"mb-4 flex gap-2",children:[i.jsx(ir,{className:"h-8 w-8 text-red-500"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),i.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function VGe(){return i.jsxs(bbe,{children:[i.jsx(Nr,{path:"/login",component:pCe}),i.jsx(Nr,{path:"/dashboard",children:i.jsx(Rr,{children:i.jsx(mU,{})})}),i.jsx(Nr,{path:"/propostas/nova",children:i.jsx(Rr,{children:i.jsx(bU,{})})}),i.jsx(Nr,{path:"/propostas/editar/:id",children:i.jsx(Rr,{children:i.jsx(F2e,{})})}),i.jsx(Nr,{path:"/nova-proposta",children:i.jsx(Rr,{children:i.jsx(bU,{})})}),i.jsx(Nr,{path:"/credito/fila",children:i.jsx(Rr,{children:i.jsx(JRe,{})})}),i.jsx(Nr,{path:"/credito/analise/:id",children:i.jsx(Rr,{children:i.jsx(nIe,{})})}),i.jsx(Nr,{path:"/financeiro/pagamentos",children:i.jsx(Rr,{children:i.jsx(cIe,{})})}),i.jsx(Nr,{path:"/financeiro/cobrancas",children:i.jsx(Rr,{children:i.jsx(uIe,{})})}),i.jsx(Nr,{path:"/formalizacao",children:i.jsx(Rr,{children:i.jsx(SU,{})})}),i.jsx(Nr,{path:"/formalizacao/acompanhamento/:id",children:i.jsx(Rr,{children:i.jsx(SU,{})})}),i.jsx(Nr,{path:"/aceite-atendente",children:i.jsx(Rr,{children:i.jsx($Ge,{})})}),i.jsx(Nr,{path:"/gestao/contratos",children:i.jsx(Rr,{children:i.jsx(FGe,{})})}),i.jsx(Nr,{path:"/configuracoes/tabelas",children:i.jsx(Rr,{children:i.jsx(vIe,{})})}),i.jsx(Nr,{path:"/admin/usuarios",children:i.jsx(Rr,{children:i.jsx(PIe,{})})}),i.jsx(Nr,{path:"/parceiros",children:i.jsx(Rr,{children:i.jsx(RIe,{})})}),i.jsx(Nr,{path:"/parceiros/detalhe/:id",children:i.jsx(Rr,{children:i.jsx(FIe,{})})}),i.jsx(Nr,{path:"/configuracoes",children:i.jsx(Rr,{children:i.jsx(LGe,{})})}),i.jsx(Nr,{path:"/configuracoes/produtos",children:i.jsx(Rr,{children:i.jsx(zIe,{})})}),i.jsx(Nr,{path:"/configuracoes/sessoes",children:i.jsx(Rr,{children:i.jsx(OGe,{})})}),i.jsx(Nr,{path:"/configuracoes/alterar-email",children:i.jsx(Rr,{children:i.jsx(DGe,{})})}),i.jsx(Nr,{path:"/admin/lojas",children:i.jsx(Rr,{children:i.jsx(HIe,{})})}),i.jsx(Nr,{path:"/admin/security/owasp",children:i.jsx(Rr,{children:i.jsx(B2e,{})})}),i.jsx(Nr,{path:"/admin/security/wstg",children:i.jsx(Rr,{children:i.jsx(z2e,{})})}),i.jsx(Nr,{path:"/admin/security/dashboard",children:i.jsx(Rr,{children:i.jsx(PGe,{})})}),i.jsx(Nr,{path:"/admin/monitoring/dashboard",children:i.jsx(Rr,{children:i.jsx(kGe,{})})}),i.jsx(Nr,{path:"/",children:i.jsx(Rr,{children:i.jsx(mU,{})})}),i.jsx(Nr,{component:qGe})]})}function HGe(){return i.jsx(Ube,{client:tr,children:i.jsx(n1e,{children:i.jsx(r1e,{children:i.jsx(i1e,{children:i.jsxs(yY,{children:[i.jsx(VGe,{}),i.jsx(lAe,{})]})})})})})}U0e({dsn:"https://7018ab54dbb88c9c5c6a00e41cb6ab2a@o4509882222641152.ingest.us.sentry.io/4509882232209408",environment:"production",tracesSampleRate:.1,beforeSend(t){return t.user&&(delete t.user.email,delete t.user.ip_address),t},integrations:[S0e(),n0e({maskAllText:!0,blockAllMedia:!0})],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1});window.addEventListener("unhandledrejection",t=>{["The message port closed before a response was received","mce-autosize-textarea","custom element","ResizeObserver loop limit exceeded"].some(n=>t.reason?.message?.includes(n)||t.reason?.toString()?.includes(n))&&t.preventDefault()});window.addEventListener("error",t=>{["mce-autosize-textarea","custom element","webcomponents-ce.js"].some(n=>t.message?.includes(n)||t.filename?.includes(n))&&t.preventDefault()});const WGe=Z0e(HGe,{fallback:({error:t,resetError:e})=>i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center p-8 max-w-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Oops! Algo deu errado"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Um erro inesperado aconteceu. Nossa equipe foi notificada automaticamente."}),i.jsx("button",{onClick:e,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Tentar novamente"})]})}),showDialog:!1});goe.createRoot(document.getElementById("root")).render(i.jsx(z2,{children:i.jsx(WGe,{})}));
