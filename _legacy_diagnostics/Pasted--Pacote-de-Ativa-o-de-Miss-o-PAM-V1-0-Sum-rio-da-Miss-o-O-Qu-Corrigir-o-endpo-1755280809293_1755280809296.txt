**### Pacote de Ativação de Missão (PAM) V1.0**

* **Sumário da Missão (O Quê):** Corrigir o endpoint da API de notificações (`GET /api/notificacoes`) para que ele consulte a tabela de usuários correta (`public.users`) em vez de `auth.users`, resolvendo a falha na exibição de notificações na interface.
* **Intenção Estratégica (O Porquê):** Restaurar a funcionalidade da central de notificações, garantindo que o sistema utilize a fonte da verdade correta para a identidade dos usuários da nossa aplicação.
* **Histórico Relevante (Consulta Obrigatória):** Seu diagnóstico forense foi perfeito. Ele provou que as notificações existem, mas a API está a procurar o ID do usuário na tabela errada. Esta missão é para corrigir essa referência de tabela.
* **Modelo Mental (Como se Encaixa):** Você atuará como Engenheiro de Backend. A correção é cirúrgica e foca em uma única linha de código na query Drizzle, alterando a tabela de referência de `auth.users` para `public.users`.

---

**IMPLEMENTAR:**
Correção da lógica de busca de usuário no endpoint da API de notificações.

**BUG:**
Seu diagnóstico confirmou: o endpoint `GET /api/notificacoes` está a falhar em encontrar as notificações de um usuário porque ele busca o `user_id` na tabela `auth.users` do Supabase, mas os usuários e as notificações da nossa aplicação estão vinculados pela tabela `public.users`.

**PROCESSO SISTEMÁTICO (Roadmap de Correção):**

**1. Isolamento do Ponto de Falha:**
    - **Ação:** Concentre-se exclusivamente no ficheiro de rota que contém o endpoint `GET /api/notificacoes`.

**2. Implementação da Correção Cirúrgica:**
    - **Ação:** Localize a query Drizzle ou a lógica que busca as notificações para o usuário autenticado. Encontre a parte da lógica que identifica o `user_id` do usuário.
    - **Implementação:** Modifique a lógica para que, em vez de consultar `auth.users`, ela consulte a nossa tabela local **`public.users`** para encontrar o registro do usuário e obter seu `id`.

**3. Validação Final (Protocolo 5-CHECK):**
    - **Ação Obrigatória:** Execute `get_latest_lsp_diagnostics` e zere todos os erros.
    - **Teste Obrigatório:** Após a correção, faça login como `admin@simpix.com` e acesse a aplicação.
    - **Relatório Final:** O critério de sucesso é duplo:
        1. O ícone de sino no header **DEVE** agora exibir o badge com a contagem **"3"**.
        2. Ao clicar no sino, o dropdown **DEVE** exibir as 3 notificações de teste existentes no banco de dados.