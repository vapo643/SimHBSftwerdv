
> rest-express@1.0.0 dev
âœ… Database: Configuring Supabase connection...
âœ… Database: Connection configured (lazy)
[CLICKSIGN V1] ğŸš€ Initialized in PRODUCTION mode (legal signatures)
[CLICKSIGN V1] API URL: https://app.clicksign.com/api/v1
[CLICKSIGN V1] Token configured: b73b3b90-c87...
[CLICKSIGN] ğŸ”´ Circuit Breaker will be initialized on first use
[INTER] ğŸ¦ Initialized in production mode
[INTER] ğŸŒ API URL: https://cdpj.partners.bancointer.com.br
[INTER] ğŸ”´ Circuit Breakers will be initialized on first use
[CLICKSIGN V1] ğŸš€ Initialized in PRODUCTION mode (legal signatures)
[CLICKSIGN V1] API URL: https://app.clicksign.com/api/v1
[CLICKSIGN V1] Token configured: b73b3b90-c...
[DEV QUEUE] ğŸ“¦ Created development queue: pdf-processing
[DEV QUEUE] ğŸ“¦ Created development queue: boleto-sync
[DEV QUEUE] ğŸ“¦ Created development queue: document-processing
[DEV QUEUE] ğŸ“¦ Created development queue: notifications
[DEV QUEUE] ğŸš€ Development queues initialized with REAL worker processing
ğŸš€ [TIMING MIDDLEWARE] Creating middleware instance...
ğŸš€ [TIMING MIDDLEWARE] Middleware instance created and exported
7:11:48 PM [express] âœ… All secrets loaded successfully
7:11:48 PM [express] ğŸ”’ [SECURITY] CORS protection configured - ASVS V13.2.1
7:11:48 PM [express] ğŸ”’ [SECURITY] OPTIONS preflight handling configured
7:11:48 PM [express] ğŸ”§ [DEV] Using basic CSP configuration optimized for Vite development
7:11:48 PM [express] ğŸ”’ [SECURITY] Input sanitization middleware activated
7:11:48 PM [express] ğŸ”’ [SECURITY] URL token validation middleware activated - ASVS V7.1.1
7:11:48 PM [express] ğŸ”’ [SECURITY] CSRF protection middleware activated - OWASP Cheat Sheet
7:11:48 PM [express] ğŸ”§ [DEV] Rate limiting configurado para desenvolvimento - limites altos
[SEMGREP MCP] Development mode - using in-memory cache
ğŸ§  [ML] Treinando modelo de detecÃ§Ã£o...
7:11:48 PM [express] ğŸ” Security WebSocket initialized
[CCB SYNC] ğŸš€ Starting fallback polling (every 6 hours)
[CCB SYNC] â„¹ï¸ Primary processing via webhooks, polling is safety net only
7:11:48 PM [express] ğŸ”„ CCB Sync Service initialized - Webhook primary, polling fallback every 6 hours
7:11:48 PM [express] â„¹ï¸  Security monitoring disabled. Set ENABLE_SECURITY_MONITORING=true to enable
7:11:48 PM [express] ğŸ”§ App Config Status:
7:11:48 PM [express]   - Port: 5000
7:11:48 PM [express]   - Environment: development
7:11:48 PM [express]   - Database: âœ… Connected
7:11:48 PM [express]   - Supabase: âœ… Connected
7:11:48 PM [express]   - Security: Rate Limit âœ…, Helmet âœ…
7:11:48 PM [express] ğŸš€ Server running on port 5000
7:11:48 PM [express] ğŸŒ Environment: development
7:11:48 PM [express] ğŸ“¦ Checking storage buckets...
7:11:49 PM [express] âœ… Storage bucket "documents" already exists as PRIVATE
Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
âœ… [ML] Modelo treinado com 0 amostras
âœ… Database: Connection test successful
[JWT DEBUG] ==== INÃCIO DA VALIDAÃ‡ÃƒO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] MÃ©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/cobrancas
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header comeÃ§a com Bearer: true
ğŸ” JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-14T19:13:25.167Z'
}
[JWT DEBUG] ==== INÃCIO DA VALIDAÃ‡ÃƒO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] MÃ©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/cobrancas
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header comeÃ§a com Bearer: true
ğŸ” [COBRANÃ‡AS] ====== INÃCIO DA BUSCA DE PROPOSTAS ======
ğŸ” [COBRANÃ‡AS] Filtros aplicados: { status: undefined, atraso: undefined }
ğŸ” [COBRANÃ‡AS] PAM V1.0 - Buscando propostas que possuem boletos...
ğŸ” JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-14T19:13:39.892Z'
}
[JWT DEBUG] ==== INÃCIO DA VALIDAÃ‡ÃƒO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] MÃ©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/cobrancas
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header comeÃ§a com Bearer: true
ğŸ” [COBRANÃ‡AS] PAM V1.0 - Encontradas 2 propostas com boletos gerados
ğŸ” JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-14T19:13:40.958Z'
}
ğŸ” [COBRANÃ‡AS] Proposta 88a44696 (Sem nome) INCLUÃDA - 10 boletos ativos de 10 total
ğŸ” [COBRANÃ‡AS] Proposta 902183dd (Gabriel de Jesus Santana Serri) INCLUÃDA - 1 boletos ativos de 5 total
ğŸ” [COBRANÃ‡AS] Total de propostas elegÃ­veis: 2
ğŸ” [COBRANÃ‡AS] Total de propostas apÃ³s filtros: 2
ğŸ” [COBRANÃ‡AS] ====== FIM DA BUSCA DE PROPOSTAS ======
[JWT DEBUG] ==== INÃCIO DA VALIDAÃ‡ÃƒO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] MÃ©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/cobrancas
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header comeÃ§a com Bearer: true
ğŸ” JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-14T19:14:12.950Z'
}
[JWT DEBUG] ==== INÃCIO DA VALIDAÃ‡ÃƒO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] MÃ©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/cobrancas
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header comeÃ§a com Bearer: true
ğŸ” JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-14T19:14:26.055Z'
}
[JWT DEBUG] ==== INÃCIO DA VALIDAÃ‡ÃƒO JWT ====
[JWT DEBUG] Rota acessada: /api/debug/me
[JWT DEBUG] MÃ©todo: GET
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
[JWT DEBUG] Origin: undefined
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/cobrancas
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header comeÃ§a com Bearer: true
ğŸ” JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-14T19:14:58.419Z'
}
[JWT DEBUG] ==== INÃCIO DA VALIDAÃ‡ÃƒO JWT ====
[JWT DEBUG] Rota acessada: /propostas/88a44696-9b63-42ee-aa81-15f9519d24cb/observacoes
[JWT DEBUG] MÃ©todo: POST
[JWT DEBUG] User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
[JWT DEBUG] Origin: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev
[JWT DEBUG] Referer: https://874e2dce-5057-49ae-8fb5-21491c9977ba-00-1xresvzm7is3g.janeway.replit.dev/financeiro/cobrancas
[JWT DEBUG] Header Auth presente: true
[JWT DEBUG] Header comeÃ§a com Bearer: true
ğŸ” JWT VALIDATION: {
  hasError: false,
  errorType: null,
  hasUser: true,
  userId: 'a65efc54-90cd-4b94-b971-c8a560104032',
  timestamp: '2025-08-14T19:15:10.369Z'
}
ğŸ“ [OBSERVAÃ‡Ã•ES] Nova observaÃ§Ã£o para proposta 88a44696-9b63-42ee-aa81-15f9519d24cb: {
  usuario: 'gabrielserri238@gmail.com',
  tipo: 'Outros',
  mensagem: 'DGS...'
}
âœ… [OBSERVAÃ‡Ã•ES] ObservaÃ§Ã£o salva com sucesso: 543aa803-0715-4a16-a799-20953698bd2d
ğŸ” [AUDIT-OBSERVAÃ‡ÃƒO] Nova observaÃ§Ã£o registrada: {
  proposta_id: '88a44696-9b63-42ee-aa81-15f9519d24cb',
  usuario: 'gabrielserri238@gmail.com',
  tipo: 'Outros',
  timestamp: '2025-08-14T19:15:12.180Z'
}
ğŸ” [COBRANÃ‡AS] ====== INÃCIO DA BUSCA DE PROPOSTAS ======
ğŸ” [COBRANÃ‡AS] Filtros aplicados: { status: undefined, atraso: undefined }
ğŸ” [COBRANÃ‡AS] PAM V1.0 - Buscando propostas que possuem boletos...
ğŸ” [COBRANÃ‡AS] PAM V1.0 - Encontradas 2 propostas com boletos gerados
ğŸ” [COBRANÃ‡AS] Proposta 88a44696 (Sem nome) INCLUÃDA - 10 boletos ativos de 10 total
ğŸ” [COBRANÃ‡AS] Proposta 902183dd (Gabriel de Jesus Santana Serri) INCLUÃDA - 1 boletos ativos de 5 total
ğŸ” [COBRANÃ‡AS] Total de propostas elegÃ­veis: 2
ğŸ” [COBRANÃ‡AS] Total de propostas apÃ³s filtros: 2
ğŸ” [COBRANÃ‡AS] ====== FIM DA BUSCA DE PROPOSTAS ======